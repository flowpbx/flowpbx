function vv(e,r){for(var o=0;o<r.length;o++){const s=r[o];if(typeof s!="string"&&!Array.isArray(s)){for(const a in s)if(a!=="default"&&!(a in e)){const l=Object.getOwnPropertyDescriptor(s,a);l&&Object.defineProperty(e,a,l.get?l:{enumerable:!0,get:()=>s[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function o(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(a){if(a.ep)return;a.ep=!0;const l=o(a);fetch(a.href,l)}})();function f0(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var bc={exports:{}},ss={},_c={exports:{}},Ie={};var pp;function wv(){if(pp)return Ie;pp=1;var e=Symbol.for("react.element"),r=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),c=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),y=Symbol.iterator;function x(L){return L===null||typeof L!="object"?null:(L=y&&L[y]||L["@@iterator"],typeof L=="function"?L:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},N=Object.assign,C={};function E(L,B,oe){this.props=L,this.context=B,this.refs=C,this.updater=oe||w}E.prototype.isReactComponent={},E.prototype.setState=function(L,B){if(typeof L!="object"&&typeof L!="function"&&L!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,L,B,"setState")},E.prototype.forceUpdate=function(L){this.updater.enqueueForceUpdate(this,L,"forceUpdate")};function _(){}_.prototype=E.prototype;function R(L,B,oe){this.props=L,this.context=B,this.refs=C,this.updater=oe||w}var b=R.prototype=new _;b.constructor=R,N(b,E.prototype),b.isPureReactComponent=!0;var j=Array.isArray,A=Object.prototype.hasOwnProperty,T={current:null},P={key:!0,ref:!0,__self:!0,__source:!0};function O(L,B,oe){var re,ce={},me=null,he=null;if(B!=null)for(re in B.ref!==void 0&&(he=B.ref),B.key!==void 0&&(me=""+B.key),B)A.call(B,re)&&!P.hasOwnProperty(re)&&(ce[re]=B[re]);var ie=arguments.length-2;if(ie===1)ce.children=oe;else if(1<ie){for(var pe=Array(ie),De=0;De<ie;De++)pe[De]=arguments[De+2];ce.children=pe}if(L&&L.defaultProps)for(re in ie=L.defaultProps,ie)ce[re]===void 0&&(ce[re]=ie[re]);return{$$typeof:e,type:L,key:me,ref:he,props:ce,_owner:T.current}}function G(L,B){return{$$typeof:e,type:L.type,key:B,ref:L.ref,props:L.props,_owner:L._owner}}function D(L){return typeof L=="object"&&L!==null&&L.$$typeof===e}function F(L){var B={"=":"=0",":":"=2"};return"$"+L.replace(/[=:]/g,function(oe){return B[oe]})}var H=/\/+/g;function W(L,B){return typeof L=="object"&&L!==null&&L.key!=null?F(""+L.key):B.toString(36)}function M(L,B,oe,re,ce){var me=typeof L;(me==="undefined"||me==="boolean")&&(L=null);var he=!1;if(L===null)he=!0;else switch(me){case"string":case"number":he=!0;break;case"object":switch(L.$$typeof){case e:case r:he=!0}}if(he)return he=L,ce=ce(he),L=re===""?"."+W(he,0):re,j(ce)?(oe="",L!=null&&(oe=L.replace(H,"$&/")+"/"),M(ce,B,oe,"",function(De){return De})):ce!=null&&(D(ce)&&(ce=G(ce,oe+(!ce.key||he&&he.key===ce.key?"":(""+ce.key).replace(H,"$&/")+"/")+L)),B.push(ce)),1;if(he=0,re=re===""?".":re+":",j(L))for(var ie=0;ie<L.length;ie++){me=L[ie];var pe=re+W(me,ie);he+=M(me,B,oe,pe,ce)}else if(pe=x(L),typeof pe=="function")for(L=pe.call(L),ie=0;!(me=L.next()).done;)me=me.value,pe=re+W(me,ie++),he+=M(me,B,oe,pe,ce);else if(me==="object")throw B=String(L),Error("Objects are not valid as a React child (found: "+(B==="[object Object]"?"object with keys {"+Object.keys(L).join(", ")+"}":B)+"). If you meant to render a collection of children, use an array instead.");return he}function z(L,B,oe){if(L==null)return L;var re=[],ce=0;return M(L,re,"","",function(me){return B.call(oe,me,ce++)}),re}function Y(L){if(L._status===-1){var B=L._result;B=B(),B.then(function(oe){(L._status===0||L._status===-1)&&(L._status=1,L._result=oe)},function(oe){(L._status===0||L._status===-1)&&(L._status=2,L._result=oe)}),L._status===-1&&(L._status=0,L._result=B)}if(L._status===1)return L._result.default;throw L._result}var Q={current:null},I={transition:null},K={ReactCurrentDispatcher:Q,ReactCurrentBatchConfig:I,ReactCurrentOwner:T};function U(){throw Error("act(...) is not supported in production builds of React.")}return Ie.Children={map:z,forEach:function(L,B,oe){z(L,function(){B.apply(this,arguments)},oe)},count:function(L){var B=0;return z(L,function(){B++}),B},toArray:function(L){return z(L,function(B){return B})||[]},only:function(L){if(!D(L))throw Error("React.Children.only expected to receive a single React element child.");return L}},Ie.Component=E,Ie.Fragment=o,Ie.Profiler=a,Ie.PureComponent=R,Ie.StrictMode=s,Ie.Suspense=p,Ie.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=K,Ie.act=U,Ie.cloneElement=function(L,B,oe){if(L==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+L+".");var re=N({},L.props),ce=L.key,me=L.ref,he=L._owner;if(B!=null){if(B.ref!==void 0&&(me=B.ref,he=T.current),B.key!==void 0&&(ce=""+B.key),L.type&&L.type.defaultProps)var ie=L.type.defaultProps;for(pe in B)A.call(B,pe)&&!P.hasOwnProperty(pe)&&(re[pe]=B[pe]===void 0&&ie!==void 0?ie[pe]:B[pe])}var pe=arguments.length-2;if(pe===1)re.children=oe;else if(1<pe){ie=Array(pe);for(var De=0;De<pe;De++)ie[De]=arguments[De+2];re.children=ie}return{$$typeof:e,type:L.type,key:ce,ref:me,props:re,_owner:he}},Ie.createContext=function(L){return L={$$typeof:c,_currentValue:L,_currentValue2:L,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},L.Provider={$$typeof:l,_context:L},L.Consumer=L},Ie.createElement=O,Ie.createFactory=function(L){var B=O.bind(null,L);return B.type=L,B},Ie.createRef=function(){return{current:null}},Ie.forwardRef=function(L){return{$$typeof:f,render:L}},Ie.isValidElement=D,Ie.lazy=function(L){return{$$typeof:g,_payload:{_status:-1,_result:L},_init:Y}},Ie.memo=function(L,B){return{$$typeof:h,type:L,compare:B===void 0?null:B}},Ie.startTransition=function(L){var B=I.transition;I.transition={};try{L()}finally{I.transition=B}},Ie.unstable_act=U,Ie.useCallback=function(L,B){return Q.current.useCallback(L,B)},Ie.useContext=function(L){return Q.current.useContext(L)},Ie.useDebugValue=function(){},Ie.useDeferredValue=function(L){return Q.current.useDeferredValue(L)},Ie.useEffect=function(L,B){return Q.current.useEffect(L,B)},Ie.useId=function(){return Q.current.useId()},Ie.useImperativeHandle=function(L,B,oe){return Q.current.useImperativeHandle(L,B,oe)},Ie.useInsertionEffect=function(L,B){return Q.current.useInsertionEffect(L,B)},Ie.useLayoutEffect=function(L,B){return Q.current.useLayoutEffect(L,B)},Ie.useMemo=function(L,B){return Q.current.useMemo(L,B)},Ie.useReducer=function(L,B,oe){return Q.current.useReducer(L,B,oe)},Ie.useRef=function(L){return Q.current.useRef(L)},Ie.useState=function(L){return Q.current.useState(L)},Ie.useSyncExternalStore=function(L,B,oe){return Q.current.useSyncExternalStore(L,B,oe)},Ie.useTransition=function(){return Q.current.useTransition()},Ie.version="18.3.1",Ie}var mp;function Ms(){return mp||(mp=1,_c.exports=wv()),_c.exports}var gp;function bv(){if(gp)return ss;gp=1;var e=Ms(),r=Symbol.for("react.element"),o=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,a=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(f,p,h){var g,y={},x=null,w=null;h!==void 0&&(x=""+h),p.key!==void 0&&(x=""+p.key),p.ref!==void 0&&(w=p.ref);for(g in p)s.call(p,g)&&!l.hasOwnProperty(g)&&(y[g]=p[g]);if(f&&f.defaultProps)for(g in p=f.defaultProps,p)y[g]===void 0&&(y[g]=p[g]);return{$$typeof:r,type:f,key:x,ref:w,props:y,_owner:a.current}}return ss.Fragment=o,ss.jsx=c,ss.jsxs=c,ss}var yp;function _v(){return yp||(yp=1,bc.exports=bv()),bc.exports}var u=_v(),S=Ms();const h0=f0(S),Nv=vv({__proto__:null,default:h0},[S]);var Xa={},Nc={exports:{}},Zt={},Sc={exports:{}},Ec={};var xp;function Sv(){return xp||(xp=1,(function(e){function r(I,K){var U=I.length;I.push(K);e:for(;0<U;){var L=U-1>>>1,B=I[L];if(0<a(B,K))I[L]=K,I[U]=B,U=L;else break e}}function o(I){return I.length===0?null:I[0]}function s(I){if(I.length===0)return null;var K=I[0],U=I.pop();if(U!==K){I[0]=U;e:for(var L=0,B=I.length,oe=B>>>1;L<oe;){var re=2*(L+1)-1,ce=I[re],me=re+1,he=I[me];if(0>a(ce,U))me<B&&0>a(he,ce)?(I[L]=he,I[me]=U,L=me):(I[L]=ce,I[re]=U,L=re);else if(me<B&&0>a(he,U))I[L]=he,I[me]=U,L=me;else break e}}return K}function a(I,K){var U=I.sortIndex-K.sortIndex;return U!==0?U:I.id-K.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;e.unstable_now=function(){return l.now()}}else{var c=Date,f=c.now();e.unstable_now=function(){return c.now()-f}}var p=[],h=[],g=1,y=null,x=3,w=!1,N=!1,C=!1,E=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,R=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(I){for(var K=o(h);K!==null;){if(K.callback===null)s(h);else if(K.startTime<=I)s(h),K.sortIndex=K.expirationTime,r(p,K);else break;K=o(h)}}function j(I){if(C=!1,b(I),!N)if(o(p)!==null)N=!0,Y(A);else{var K=o(h);K!==null&&Q(j,K.startTime-I)}}function A(I,K){N=!1,C&&(C=!1,_(O),O=-1),w=!0;var U=x;try{for(b(K),y=o(p);y!==null&&(!(y.expirationTime>K)||I&&!F());){var L=y.callback;if(typeof L=="function"){y.callback=null,x=y.priorityLevel;var B=L(y.expirationTime<=K);K=e.unstable_now(),typeof B=="function"?y.callback=B:y===o(p)&&s(p),b(K)}else s(p);y=o(p)}if(y!==null)var oe=!0;else{var re=o(h);re!==null&&Q(j,re.startTime-K),oe=!1}return oe}finally{y=null,x=U,w=!1}}var T=!1,P=null,O=-1,G=5,D=-1;function F(){return!(e.unstable_now()-D<G)}function H(){if(P!==null){var I=e.unstable_now();D=I;var K=!0;try{K=P(!0,I)}finally{K?W():(T=!1,P=null)}}else T=!1}var W;if(typeof R=="function")W=function(){R(H)};else if(typeof MessageChannel<"u"){var M=new MessageChannel,z=M.port2;M.port1.onmessage=H,W=function(){z.postMessage(null)}}else W=function(){E(H,0)};function Y(I){P=I,T||(T=!0,W())}function Q(I,K){O=E(function(){I(e.unstable_now())},K)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(I){I.callback=null},e.unstable_continueExecution=function(){N||w||(N=!0,Y(A))},e.unstable_forceFrameRate=function(I){0>I||125<I?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):G=0<I?Math.floor(1e3/I):5},e.unstable_getCurrentPriorityLevel=function(){return x},e.unstable_getFirstCallbackNode=function(){return o(p)},e.unstable_next=function(I){switch(x){case 1:case 2:case 3:var K=3;break;default:K=x}var U=x;x=K;try{return I()}finally{x=U}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(I,K){switch(I){case 1:case 2:case 3:case 4:case 5:break;default:I=3}var U=x;x=I;try{return K()}finally{x=U}},e.unstable_scheduleCallback=function(I,K,U){var L=e.unstable_now();switch(typeof U=="object"&&U!==null?(U=U.delay,U=typeof U=="number"&&0<U?L+U:L):U=L,I){case 1:var B=-1;break;case 2:B=250;break;case 5:B=1073741823;break;case 4:B=1e4;break;default:B=5e3}return B=U+B,I={id:g++,callback:K,priorityLevel:I,startTime:U,expirationTime:B,sortIndex:-1},U>L?(I.sortIndex=U,r(h,I),o(p)===null&&I===o(h)&&(C?(_(O),O=-1):C=!0,Q(j,U-L))):(I.sortIndex=B,r(p,I),N||w||(N=!0,Y(A))),I},e.unstable_shouldYield=F,e.unstable_wrapCallback=function(I){var K=x;return function(){var U=x;x=K;try{return I.apply(this,arguments)}finally{x=U}}}})(Ec)),Ec}var vp;function Ev(){return vp||(vp=1,Sc.exports=Sv()),Sc.exports}var wp;function Cv(){if(wp)return Zt;wp=1;var e=Ms(),r=Ev();function o(t){for(var n="https://reactjs.org/docs/error-decoder.html?invariant="+t,i=1;i<arguments.length;i++)n+="&args[]="+encodeURIComponent(arguments[i]);return"Minified React error #"+t+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,a={};function l(t,n){c(t,n),c(t+"Capture",n)}function c(t,n){for(a[t]=n,t=0;t<n.length;t++)s.add(n[t])}var f=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),p=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,g={},y={};function x(t){return p.call(y,t)?!0:p.call(g,t)?!1:h.test(t)?y[t]=!0:(g[t]=!0,!1)}function w(t,n,i,d){if(i!==null&&i.type===0)return!1;switch(typeof n){case"function":case"symbol":return!0;case"boolean":return d?!1:i!==null?!i.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function N(t,n,i,d){if(n===null||typeof n>"u"||w(t,n,i,d))return!0;if(d)return!1;if(i!==null)switch(i.type){case 3:return!n;case 4:return n===!1;case 5:return isNaN(n);case 6:return isNaN(n)||1>n}return!1}function C(t,n,i,d,m,v,k){this.acceptsBooleans=n===2||n===3||n===4,this.attributeName=d,this.attributeNamespace=m,this.mustUseProperty=i,this.propertyName=t,this.type=n,this.sanitizeURL=v,this.removeEmptyString=k}var E={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){E[t]=new C(t,0,!1,t,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var n=t[0];E[n]=new C(n,1,!1,t[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(t){E[t]=new C(t,2,!1,t.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){E[t]=new C(t,2,!1,t,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){E[t]=new C(t,3,!1,t.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(t){E[t]=new C(t,3,!0,t,null,!1,!1)}),["capture","download"].forEach(function(t){E[t]=new C(t,4,!1,t,null,!1,!1)}),["cols","rows","size","span"].forEach(function(t){E[t]=new C(t,6,!1,t,null,!1,!1)}),["rowSpan","start"].forEach(function(t){E[t]=new C(t,5,!1,t.toLowerCase(),null,!1,!1)});var _=/[\-:]([a-z])/g;function R(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var n=t.replace(_,R);E[n]=new C(n,1,!1,t,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var n=t.replace(_,R);E[n]=new C(n,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(t){var n=t.replace(_,R);E[n]=new C(n,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(t){E[t]=new C(t,1,!1,t.toLowerCase(),null,!1,!1)}),E.xlinkHref=new C("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(t){E[t]=new C(t,1,!1,t.toLowerCase(),null,!0,!0)});function b(t,n,i,d){var m=E.hasOwnProperty(n)?E[n]:null;(m!==null?m.type!==0:d||!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(N(n,i,m,d)&&(i=null),d||m===null?x(n)&&(i===null?t.removeAttribute(n):t.setAttribute(n,""+i)):m.mustUseProperty?t[m.propertyName]=i===null?m.type===3?!1:"":i:(n=m.attributeName,d=m.attributeNamespace,i===null?t.removeAttribute(n):(m=m.type,i=m===3||m===4&&i===!0?"":""+i,d?t.setAttributeNS(d,n,i):t.setAttribute(n,i))))}var j=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,A=Symbol.for("react.element"),T=Symbol.for("react.portal"),P=Symbol.for("react.fragment"),O=Symbol.for("react.strict_mode"),G=Symbol.for("react.profiler"),D=Symbol.for("react.provider"),F=Symbol.for("react.context"),H=Symbol.for("react.forward_ref"),W=Symbol.for("react.suspense"),M=Symbol.for("react.suspense_list"),z=Symbol.for("react.memo"),Y=Symbol.for("react.lazy"),Q=Symbol.for("react.offscreen"),I=Symbol.iterator;function K(t){return t===null||typeof t!="object"?null:(t=I&&t[I]||t["@@iterator"],typeof t=="function"?t:null)}var U=Object.assign,L;function B(t){if(L===void 0)try{throw Error()}catch(i){var n=i.stack.trim().match(/\n( *(at )?)/);L=n&&n[1]||""}return`
`+L+t}var oe=!1;function re(t,n){if(!t||oe)return"";oe=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(n)if(n=function(){throw Error()},Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(n,[])}catch(ne){var d=ne}Reflect.construct(t,[],n)}else{try{n.call()}catch(ne){d=ne}t.call(n.prototype)}else{try{throw Error()}catch(ne){d=ne}t()}}catch(ne){if(ne&&d&&typeof ne.stack=="string"){for(var m=ne.stack.split(`
`),v=d.stack.split(`
`),k=m.length-1,$=v.length-1;1<=k&&0<=$&&m[k]!==v[$];)$--;for(;1<=k&&0<=$;k--,$--)if(m[k]!==v[$]){if(k!==1||$!==1)do if(k--,$--,0>$||m[k]!==v[$]){var X=`
`+m[k].replace(" at new "," at ");return t.displayName&&X.includes("<anonymous>")&&(X=X.replace("<anonymous>",t.displayName)),X}while(1<=k&&0<=$);break}}}finally{oe=!1,Error.prepareStackTrace=i}return(t=t?t.displayName||t.name:"")?B(t):""}function ce(t){switch(t.tag){case 5:return B(t.type);case 16:return B("Lazy");case 13:return B("Suspense");case 19:return B("SuspenseList");case 0:case 2:case 15:return t=re(t.type,!1),t;case 11:return t=re(t.type.render,!1),t;case 1:return t=re(t.type,!0),t;default:return""}}function me(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case P:return"Fragment";case T:return"Portal";case G:return"Profiler";case O:return"StrictMode";case W:return"Suspense";case M:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case F:return(t.displayName||"Context")+".Consumer";case D:return(t._context.displayName||"Context")+".Provider";case H:var n=t.render;return t=t.displayName,t||(t=n.displayName||n.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case z:return n=t.displayName||null,n!==null?n:me(t.type)||"Memo";case Y:n=t._payload,t=t._init;try{return me(t(n))}catch{}}return null}function he(t){var n=t.type;switch(t.tag){case 24:return"Cache";case 9:return(n.displayName||"Context")+".Consumer";case 10:return(n._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=n.render,t=t.displayName||t.name||"",n.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return n;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return me(n);case 8:return n===O?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n}return null}function ie(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function pe(t){var n=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function De(t){var n=pe(t)?"checked":"value",i=Object.getOwnPropertyDescriptor(t.constructor.prototype,n),d=""+t[n];if(!t.hasOwnProperty(n)&&typeof i<"u"&&typeof i.get=="function"&&typeof i.set=="function"){var m=i.get,v=i.set;return Object.defineProperty(t,n,{configurable:!0,get:function(){return m.call(this)},set:function(k){d=""+k,v.call(this,k)}}),Object.defineProperty(t,n,{enumerable:i.enumerable}),{getValue:function(){return d},setValue:function(k){d=""+k},stopTracking:function(){t._valueTracker=null,delete t[n]}}}}function ze(t){t._valueTracker||(t._valueTracker=De(t))}function ye(t){if(!t)return!1;var n=t._valueTracker;if(!n)return!0;var i=n.getValue(),d="";return t&&(d=pe(t)?t.checked?"true":"false":t.value),t=d,t!==i?(n.setValue(t),!0):!1}function Re(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Be(t,n){var i=n.checked;return U({},n,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:i??t._wrapperState.initialChecked})}function Ze(t,n){var i=n.defaultValue==null?"":n.defaultValue,d=n.checked!=null?n.checked:n.defaultChecked;i=ie(n.value!=null?n.value:i),t._wrapperState={initialChecked:d,initialValue:i,controlled:n.type==="checkbox"||n.type==="radio"?n.checked!=null:n.value!=null}}function He(t,n){n=n.checked,n!=null&&b(t,"checked",n,!1)}function ut(t,n){He(t,n);var i=ie(n.value),d=n.type;if(i!=null)d==="number"?(i===0&&t.value===""||t.value!=i)&&(t.value=""+i):t.value!==""+i&&(t.value=""+i);else if(d==="submit"||d==="reset"){t.removeAttribute("value");return}n.hasOwnProperty("value")?Rt(t,n.type,i):n.hasOwnProperty("defaultValue")&&Rt(t,n.type,ie(n.defaultValue)),n.checked==null&&n.defaultChecked!=null&&(t.defaultChecked=!!n.defaultChecked)}function qt(t,n,i){if(n.hasOwnProperty("value")||n.hasOwnProperty("defaultValue")){var d=n.type;if(!(d!=="submit"&&d!=="reset"||n.value!==void 0&&n.value!==null))return;n=""+t._wrapperState.initialValue,i||n===t.value||(t.value=n),t.defaultValue=n}i=t.name,i!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,i!==""&&(t.name=i)}function Rt(t,n,i){(n!=="number"||Re(t.ownerDocument)!==t)&&(i==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+i&&(t.defaultValue=""+i))}var zt=Array.isArray;function Ot(t,n,i,d){if(t=t.options,n){n={};for(var m=0;m<i.length;m++)n["$"+i[m]]=!0;for(i=0;i<t.length;i++)m=n.hasOwnProperty("$"+t[i].value),t[i].selected!==m&&(t[i].selected=m),m&&d&&(t[i].defaultSelected=!0)}else{for(i=""+ie(i),n=null,m=0;m<t.length;m++){if(t[m].value===i){t[m].selected=!0,d&&(t[m].defaultSelected=!0);return}n!==null||t[m].disabled||(n=t[m])}n!==null&&(n.selected=!0)}}function En(t,n){if(n.dangerouslySetInnerHTML!=null)throw Error(o(91));return U({},n,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Hn(t,n){var i=n.value;if(i==null){if(i=n.children,n=n.defaultValue,i!=null){if(n!=null)throw Error(o(92));if(zt(i)){if(1<i.length)throw Error(o(93));i=i[0]}n=i}n==null&&(n=""),i=n}t._wrapperState={initialValue:ie(i)}}function Ht(t,n){var i=ie(n.value),d=ie(n.defaultValue);i!=null&&(i=""+i,i!==t.value&&(t.value=i),n.defaultValue==null&&t.defaultValue!==i&&(t.defaultValue=i)),d!=null&&(t.defaultValue=""+d)}function Jt(t){var n=t.textContent;n===t._wrapperState.initialValue&&n!==""&&n!==null&&(t.value=n)}function un(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function en(t,n){return t==null||t==="http://www.w3.org/1999/xhtml"?un(n):t==="http://www.w3.org/2000/svg"&&n==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var St,Vt=(function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(n,i,d,m){MSApp.execUnsafeLocalFunction(function(){return t(n,i,d,m)})}:t})(function(t,n){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=n;else{for(St=St||document.createElement("div"),St.innerHTML="<svg>"+n.valueOf().toString()+"</svg>",n=St.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;n.firstChild;)t.appendChild(n.firstChild)}});function cn(t,n){if(n){var i=t.firstChild;if(i&&i===t.lastChild&&i.nodeType===3){i.nodeValue=n;return}}t.textContent=n}var ar={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},oo=["Webkit","ms","Moz","O"];Object.keys(ar).forEach(function(t){oo.forEach(function(n){n=n+t.charAt(0).toUpperCase()+t.substring(1),ar[n]=ar[t]})});function Ao(t,n,i){return n==null||typeof n=="boolean"||n===""?"":i||typeof n!="number"||n===0||ar.hasOwnProperty(t)&&ar[t]?(""+n).trim():n+"px"}function Bt(t,n){t=t.style;for(var i in n)if(n.hasOwnProperty(i)){var d=i.indexOf("--")===0,m=Ao(i,n[i],d);i==="float"&&(i="cssFloat"),d?t.setProperty(i,m):t[i]=m}}var $o=U({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function jr(t,n){if(n){if($o[t]&&(n.children!=null||n.dangerouslySetInnerHTML!=null))throw Error(o(137,t));if(n.dangerouslySetInnerHTML!=null){if(n.children!=null)throw Error(o(60));if(typeof n.dangerouslySetInnerHTML!="object"||!("__html"in n.dangerouslySetInnerHTML))throw Error(o(61))}if(n.style!=null&&typeof n.style!="object")throw Error(o(62))}}function Rr(t,n){if(t.indexOf("-")===-1)return typeof n.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var io=null;function Pr(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Vn=null,Cn=null,dn=null;function Fo(t){if(t=Wi(t)){if(typeof Vn!="function")throw Error(o(280));var n=t.stateNode;n&&(n=la(n),Vn(t.stateNode,t.type,n))}}function so(t){Cn?dn?dn.push(t):dn=[t]:Cn=t}function Oo(){if(Cn){var t=Cn,n=dn;if(dn=Cn=null,Fo(t),n)for(t=0;t<n.length;t++)Fo(n[t])}}function ao(t,n){return t(n)}function lr(){}var Bn=!1;function lo(t,n,i){if(Bn)return t(n,i);Bn=!0;try{return ao(t,n,i)}finally{Bn=!1,(Cn!==null||dn!==null)&&(lr(),Oo())}}function ur(t,n){var i=t.stateNode;if(i===null)return null;var d=la(i);if(d===null)return null;i=d[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(t=t.type,d=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!d;break e;default:t=!1}if(t)return null;if(i&&typeof i!="function")throw Error(o(231,n,typeof i));return i}var uo=!1;if(f)try{var V={};Object.defineProperty(V,"passive",{get:function(){uo=!0}}),window.addEventListener("test",V,V),window.removeEventListener("test",V,V)}catch{uo=!1}function q(t,n,i,d,m,v,k,$,X){var ne=Array.prototype.slice.call(arguments,3);try{n.apply(i,ne)}catch(le){this.onError(le)}}var te=!1,ae=null,de=!1,Ne=null,xe={onError:function(t){te=!0,ae=t}};function _e(t,n,i,d,m,v,k,$,X){te=!1,ae=null,q.apply(xe,arguments)}function Ce(t,n,i,d,m,v,k,$,X){if(_e.apply(this,arguments),te){if(te){var ne=ae;te=!1,ae=null}else throw Error(o(198));de||(de=!0,Ne=ne)}}function we(t){var n=t,i=t;if(t.alternate)for(;n.return;)n=n.return;else{t=n;do n=t,(n.flags&4098)!==0&&(i=n.return),t=n.return;while(t)}return n.tag===3?i:null}function Pe(t){if(t.tag===13){var n=t.memoizedState;if(n===null&&(t=t.alternate,t!==null&&(n=t.memoizedState)),n!==null)return n.dehydrated}return null}function Ee(t){if(we(t)!==t)throw Error(o(188))}function Ve(t){var n=t.alternate;if(!n){if(n=we(t),n===null)throw Error(o(188));return n!==t?null:t}for(var i=t,d=n;;){var m=i.return;if(m===null)break;var v=m.alternate;if(v===null){if(d=m.return,d!==null){i=d;continue}break}if(m.child===v.child){for(v=m.child;v;){if(v===i)return Ee(m),t;if(v===d)return Ee(m),n;v=v.sibling}throw Error(o(188))}if(i.return!==d.return)i=m,d=v;else{for(var k=!1,$=m.child;$;){if($===i){k=!0,i=m,d=v;break}if($===d){k=!0,d=m,i=v;break}$=$.sibling}if(!k){for($=v.child;$;){if($===i){k=!0,i=v,d=m;break}if($===d){k=!0,d=v,i=m;break}$=$.sibling}if(!k)throw Error(o(189))}}if(i.alternate!==d)throw Error(o(190))}if(i.tag!==3)throw Error(o(188));return i.stateNode.current===i?t:n}function Fe(t){return t=Ve(t),t!==null?ct(t):null}function ct(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var n=ct(t);if(n!==null)return n;t=t.sibling}return null}var st=r.unstable_scheduleCallback,ht=r.unstable_cancelCallback,Ye=r.unstable_shouldYield,Et=r.unstable_requestPaint,Ge=r.unstable_now,cr=r.unstable_getCurrentPriorityLevel,Ut=r.unstable_ImmediatePriority,It=r.unstable_UserBlockingPriority,Un=r.unstable_NormalPriority,dr=r.unstable_LowPriority,fn=r.unstable_IdlePriority,hn=null,Ct=null;function Oe(t){if(Ct&&typeof Ct.onCommitFiberRoot=="function")try{Ct.onCommitFiberRoot(hn,t,void 0,(t.current.flags&128)===128)}catch{}}var Ke=Math.clz32?Math.clz32:Je,Wn=Math.log,kn=Math.LN2;function Je(t){return t>>>=0,t===0?32:31-(Wn(t)/kn|0)|0}var jn=64,fr=4194304;function Yn(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Ho(t,n){var i=t.pendingLanes;if(i===0)return 0;var d=0,m=t.suspendedLanes,v=t.pingedLanes,k=i&268435455;if(k!==0){var $=k&~m;$!==0?d=Yn($):(v&=k,v!==0&&(d=Yn(v)))}else k=i&~m,k!==0?d=Yn(k):v!==0&&(d=Yn(v));if(d===0)return 0;if(n!==0&&n!==d&&(n&m)===0&&(m=d&-d,v=n&-n,m>=v||m===16&&(v&4194240)!==0))return n;if((d&4)!==0&&(d|=i&16),n=t.entangledLanes,n!==0)for(t=t.entanglements,n&=d;0<n;)i=31-Ke(n),m=1<<i,d|=t[i],n&=~m;return d}function Ws(t,n){switch(t){case 1:case 2:case 4:return n+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Bl(t,n){for(var i=t.suspendedLanes,d=t.pingedLanes,m=t.expirationTimes,v=t.pendingLanes;0<v;){var k=31-Ke(v),$=1<<k,X=m[k];X===-1?(($&i)===0||($&d)!==0)&&(m[k]=Ws($,n)):X<=n&&(t.expiredLanes|=$),v&=~$}}function ki(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Vo(){var t=jn;return jn<<=1,(jn&4194240)===0&&(jn=64),t}function ji(t){for(var n=[],i=0;31>i;i++)n.push(t);return n}function co(t,n,i){t.pendingLanes|=n,n!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,n=31-Ke(n),t[n]=i}function Ys(t,n){var i=t.pendingLanes&~n;t.pendingLanes=n,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=n,t.mutableReadLanes&=n,t.entangledLanes&=n,n=t.entanglements;var d=t.eventTimes;for(t=t.expirationTimes;0<i;){var m=31-Ke(i),v=1<<m;n[m]=0,d[m]=-1,t[m]=-1,i&=~v}}function Ul(t,n){var i=t.entangledLanes|=n;for(t=t.entanglements;i;){var d=31-Ke(i),m=1<<d;m&n|t[d]&n&&(t[d]|=n),i&=~m}}var Qe=0;function Wd(t){return t&=-t,1<t?4<t?(t&268435455)!==0?16:536870912:4:1}var Yd,Wl,Xd,Gd,Kd,Yl=!1,Xs=[],Mr=null,Tr=null,Dr=null,Ri=new Map,Pi=new Map,Lr=[],Hy="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Zd(t,n){switch(t){case"focusin":case"focusout":Mr=null;break;case"dragenter":case"dragleave":Tr=null;break;case"mouseover":case"mouseout":Dr=null;break;case"pointerover":case"pointerout":Ri.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pi.delete(n.pointerId)}}function Mi(t,n,i,d,m,v){return t===null||t.nativeEvent!==v?(t={blockedOn:n,domEventName:i,eventSystemFlags:d,nativeEvent:v,targetContainers:[m]},n!==null&&(n=Wi(n),n!==null&&Wl(n)),t):(t.eventSystemFlags|=d,n=t.targetContainers,m!==null&&n.indexOf(m)===-1&&n.push(m),t)}function Vy(t,n,i,d,m){switch(n){case"focusin":return Mr=Mi(Mr,t,n,i,d,m),!0;case"dragenter":return Tr=Mi(Tr,t,n,i,d,m),!0;case"mouseover":return Dr=Mi(Dr,t,n,i,d,m),!0;case"pointerover":var v=m.pointerId;return Ri.set(v,Mi(Ri.get(v)||null,t,n,i,d,m)),!0;case"gotpointercapture":return v=m.pointerId,Pi.set(v,Mi(Pi.get(v)||null,t,n,i,d,m)),!0}return!1}function Qd(t){var n=fo(t.target);if(n!==null){var i=we(n);if(i!==null){if(n=i.tag,n===13){if(n=Pe(i),n!==null){t.blockedOn=n,Kd(t.priority,function(){Xd(i)});return}}else if(n===3&&i.stateNode.current.memoizedState.isDehydrated){t.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Gs(t){if(t.blockedOn!==null)return!1;for(var n=t.targetContainers;0<n.length;){var i=Gl(t.domEventName,t.eventSystemFlags,n[0],t.nativeEvent);if(i===null){i=t.nativeEvent;var d=new i.constructor(i.type,i);io=d,i.target.dispatchEvent(d),io=null}else return n=Wi(i),n!==null&&Wl(n),t.blockedOn=i,!1;n.shift()}return!0}function qd(t,n,i){Gs(t)&&i.delete(n)}function By(){Yl=!1,Mr!==null&&Gs(Mr)&&(Mr=null),Tr!==null&&Gs(Tr)&&(Tr=null),Dr!==null&&Gs(Dr)&&(Dr=null),Ri.forEach(qd),Pi.forEach(qd)}function Ti(t,n){t.blockedOn===n&&(t.blockedOn=null,Yl||(Yl=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,By)))}function Di(t){function n(m){return Ti(m,t)}if(0<Xs.length){Ti(Xs[0],t);for(var i=1;i<Xs.length;i++){var d=Xs[i];d.blockedOn===t&&(d.blockedOn=null)}}for(Mr!==null&&Ti(Mr,t),Tr!==null&&Ti(Tr,t),Dr!==null&&Ti(Dr,t),Ri.forEach(n),Pi.forEach(n),i=0;i<Lr.length;i++)d=Lr[i],d.blockedOn===t&&(d.blockedOn=null);for(;0<Lr.length&&(i=Lr[0],i.blockedOn===null);)Qd(i),i.blockedOn===null&&Lr.shift()}var Bo=j.ReactCurrentBatchConfig,Ks=!0;function Uy(t,n,i,d){var m=Qe,v=Bo.transition;Bo.transition=null;try{Qe=1,Xl(t,n,i,d)}finally{Qe=m,Bo.transition=v}}function Wy(t,n,i,d){var m=Qe,v=Bo.transition;Bo.transition=null;try{Qe=4,Xl(t,n,i,d)}finally{Qe=m,Bo.transition=v}}function Xl(t,n,i,d){if(Ks){var m=Gl(t,n,i,d);if(m===null)du(t,n,d,Zs,i),Zd(t,d);else if(Vy(m,t,n,i,d))d.stopPropagation();else if(Zd(t,d),n&4&&-1<Hy.indexOf(t)){for(;m!==null;){var v=Wi(m);if(v!==null&&Yd(v),v=Gl(t,n,i,d),v===null&&du(t,n,d,Zs,i),v===m)break;m=v}m!==null&&d.stopPropagation()}else du(t,n,d,null,i)}}var Zs=null;function Gl(t,n,i,d){if(Zs=null,t=Pr(d),t=fo(t),t!==null)if(n=we(t),n===null)t=null;else if(i=n.tag,i===13){if(t=Pe(n),t!==null)return t;t=null}else if(i===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;t=null}else n!==t&&(t=null);return Zs=t,null}function Jd(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(cr()){case Ut:return 1;case It:return 4;case Un:case dr:return 16;case fn:return 536870912;default:return 16}default:return 16}}var zr=null,Kl=null,Qs=null;function ef(){if(Qs)return Qs;var t,n=Kl,i=n.length,d,m="value"in zr?zr.value:zr.textContent,v=m.length;for(t=0;t<i&&n[t]===m[t];t++);var k=i-t;for(d=1;d<=k&&n[i-d]===m[v-d];d++);return Qs=m.slice(t,1<d?1-d:void 0)}function qs(t){var n=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&n===13&&(t=13)):t=n,t===10&&(t=13),32<=t||t===13?t:0}function Js(){return!0}function tf(){return!1}function tn(t){function n(i,d,m,v,k){this._reactName=i,this._targetInst=m,this.type=d,this.nativeEvent=v,this.target=k,this.currentTarget=null;for(var $ in t)t.hasOwnProperty($)&&(i=t[$],this[$]=i?i(v):v[$]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?Js:tf,this.isPropagationStopped=tf,this}return U(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=Js)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=Js)},persist:function(){},isPersistent:Js}),n}var Uo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Zl=tn(Uo),Li=U({},Uo,{view:0,detail:0}),Yy=tn(Li),Ql,ql,zi,ea=U({},Li,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:eu,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==zi&&(zi&&t.type==="mousemove"?(Ql=t.screenX-zi.screenX,ql=t.screenY-zi.screenY):ql=Ql=0,zi=t),Ql)},movementY:function(t){return"movementY"in t?t.movementY:ql}}),nf=tn(ea),Xy=U({},ea,{dataTransfer:0}),Gy=tn(Xy),Ky=U({},Li,{relatedTarget:0}),Jl=tn(Ky),Zy=U({},Uo,{animationName:0,elapsedTime:0,pseudoElement:0}),Qy=tn(Zy),qy=U({},Uo,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Jy=tn(qy),ex=U({},Uo,{data:0}),rf=tn(ex),tx={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},nx={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},rx={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ox(t){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(t):(t=rx[t])?!!n[t]:!1}function eu(){return ox}var ix=U({},Li,{key:function(t){if(t.key){var n=tx[t.key]||t.key;if(n!=="Unidentified")return n}return t.type==="keypress"?(t=qs(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?nx[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:eu,charCode:function(t){return t.type==="keypress"?qs(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?qs(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),sx=tn(ix),ax=U({},ea,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),of=tn(ax),lx=U({},Li,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:eu}),ux=tn(lx),cx=U({},Uo,{propertyName:0,elapsedTime:0,pseudoElement:0}),dx=tn(cx),fx=U({},ea,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),hx=tn(fx),px=[9,13,27,32],tu=f&&"CompositionEvent"in window,Ii=null;f&&"documentMode"in document&&(Ii=document.documentMode);var mx=f&&"TextEvent"in window&&!Ii,sf=f&&(!tu||Ii&&8<Ii&&11>=Ii),af=" ",lf=!1;function uf(t,n){switch(t){case"keyup":return px.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function cf(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Wo=!1;function gx(t,n){switch(t){case"compositionend":return cf(n);case"keypress":return n.which!==32?null:(lf=!0,af);case"textInput":return t=n.data,t===af&&lf?null:t;default:return null}}function yx(t,n){if(Wo)return t==="compositionend"||!tu&&uf(t,n)?(t=ef(),Qs=Kl=zr=null,Wo=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return sf&&n.locale!=="ko"?null:n.data;default:return null}}var xx={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function df(t){var n=t&&t.nodeName&&t.nodeName.toLowerCase();return n==="input"?!!xx[t.type]:n==="textarea"}function ff(t,n,i,d){so(d),n=ia(n,"onChange"),0<n.length&&(i=new Zl("onChange","change",null,i,d),t.push({event:i,listeners:n}))}var Ai=null,$i=null;function vx(t){Pf(t,0)}function ta(t){var n=Zo(t);if(ye(n))return t}function wx(t,n){if(t==="change")return n}var hf=!1;if(f){var nu;if(f){var ru="oninput"in document;if(!ru){var pf=document.createElement("div");pf.setAttribute("oninput","return;"),ru=typeof pf.oninput=="function"}nu=ru}else nu=!1;hf=nu&&(!document.documentMode||9<document.documentMode)}function mf(){Ai&&(Ai.detachEvent("onpropertychange",gf),$i=Ai=null)}function gf(t){if(t.propertyName==="value"&&ta($i)){var n=[];ff(n,$i,t,Pr(t)),lo(vx,n)}}function bx(t,n,i){t==="focusin"?(mf(),Ai=n,$i=i,Ai.attachEvent("onpropertychange",gf)):t==="focusout"&&mf()}function _x(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return ta($i)}function Nx(t,n){if(t==="click")return ta(n)}function Sx(t,n){if(t==="input"||t==="change")return ta(n)}function Ex(t,n){return t===n&&(t!==0||1/t===1/n)||t!==t&&n!==n}var Rn=typeof Object.is=="function"?Object.is:Ex;function Fi(t,n){if(Rn(t,n))return!0;if(typeof t!="object"||t===null||typeof n!="object"||n===null)return!1;var i=Object.keys(t),d=Object.keys(n);if(i.length!==d.length)return!1;for(d=0;d<i.length;d++){var m=i[d];if(!p.call(n,m)||!Rn(t[m],n[m]))return!1}return!0}function yf(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function xf(t,n){var i=yf(t);t=0;for(var d;i;){if(i.nodeType===3){if(d=t+i.textContent.length,t<=n&&d>=n)return{node:i,offset:n-t};t=d}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=yf(i)}}function vf(t,n){return t&&n?t===n?!0:t&&t.nodeType===3?!1:n&&n.nodeType===3?vf(t,n.parentNode):"contains"in t?t.contains(n):t.compareDocumentPosition?!!(t.compareDocumentPosition(n)&16):!1:!1}function wf(){for(var t=window,n=Re();n instanceof t.HTMLIFrameElement;){try{var i=typeof n.contentWindow.location.href=="string"}catch{i=!1}if(i)t=n.contentWindow;else break;n=Re(t.document)}return n}function ou(t){var n=t&&t.nodeName&&t.nodeName.toLowerCase();return n&&(n==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||n==="textarea"||t.contentEditable==="true")}function Cx(t){var n=wf(),i=t.focusedElem,d=t.selectionRange;if(n!==i&&i&&i.ownerDocument&&vf(i.ownerDocument.documentElement,i)){if(d!==null&&ou(i)){if(n=d.start,t=d.end,t===void 0&&(t=n),"selectionStart"in i)i.selectionStart=n,i.selectionEnd=Math.min(t,i.value.length);else if(t=(n=i.ownerDocument||document)&&n.defaultView||window,t.getSelection){t=t.getSelection();var m=i.textContent.length,v=Math.min(d.start,m);d=d.end===void 0?v:Math.min(d.end,m),!t.extend&&v>d&&(m=d,d=v,v=m),m=xf(i,v);var k=xf(i,d);m&&k&&(t.rangeCount!==1||t.anchorNode!==m.node||t.anchorOffset!==m.offset||t.focusNode!==k.node||t.focusOffset!==k.offset)&&(n=n.createRange(),n.setStart(m.node,m.offset),t.removeAllRanges(),v>d?(t.addRange(n),t.extend(k.node,k.offset)):(n.setEnd(k.node,k.offset),t.addRange(n)))}}for(n=[],t=i;t=t.parentNode;)t.nodeType===1&&n.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof i.focus=="function"&&i.focus(),i=0;i<n.length;i++)t=n[i],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var kx=f&&"documentMode"in document&&11>=document.documentMode,Yo=null,iu=null,Oi=null,su=!1;function bf(t,n,i){var d=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;su||Yo==null||Yo!==Re(d)||(d=Yo,"selectionStart"in d&&ou(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),Oi&&Fi(Oi,d)||(Oi=d,d=ia(iu,"onSelect"),0<d.length&&(n=new Zl("onSelect","select",null,n,i),t.push({event:n,listeners:d}),n.target=Yo)))}function na(t,n){var i={};return i[t.toLowerCase()]=n.toLowerCase(),i["Webkit"+t]="webkit"+n,i["Moz"+t]="moz"+n,i}var Xo={animationend:na("Animation","AnimationEnd"),animationiteration:na("Animation","AnimationIteration"),animationstart:na("Animation","AnimationStart"),transitionend:na("Transition","TransitionEnd")},au={},_f={};f&&(_f=document.createElement("div").style,"AnimationEvent"in window||(delete Xo.animationend.animation,delete Xo.animationiteration.animation,delete Xo.animationstart.animation),"TransitionEvent"in window||delete Xo.transitionend.transition);function ra(t){if(au[t])return au[t];if(!Xo[t])return t;var n=Xo[t],i;for(i in n)if(n.hasOwnProperty(i)&&i in _f)return au[t]=n[i];return t}var Nf=ra("animationend"),Sf=ra("animationiteration"),Ef=ra("animationstart"),Cf=ra("transitionend"),kf=new Map,jf="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ir(t,n){kf.set(t,n),l(n,[t])}for(var lu=0;lu<jf.length;lu++){var uu=jf[lu],jx=uu.toLowerCase(),Rx=uu[0].toUpperCase()+uu.slice(1);Ir(jx,"on"+Rx)}Ir(Nf,"onAnimationEnd"),Ir(Sf,"onAnimationIteration"),Ir(Ef,"onAnimationStart"),Ir("dblclick","onDoubleClick"),Ir("focusin","onFocus"),Ir("focusout","onBlur"),Ir(Cf,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Hi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Px=new Set("cancel close invalid load scroll toggle".split(" ").concat(Hi));function Rf(t,n,i){var d=t.type||"unknown-event";t.currentTarget=i,Ce(d,n,void 0,t),t.currentTarget=null}function Pf(t,n){n=(n&4)!==0;for(var i=0;i<t.length;i++){var d=t[i],m=d.event;d=d.listeners;e:{var v=void 0;if(n)for(var k=d.length-1;0<=k;k--){var $=d[k],X=$.instance,ne=$.currentTarget;if($=$.listener,X!==v&&m.isPropagationStopped())break e;Rf(m,$,ne),v=X}else for(k=0;k<d.length;k++){if($=d[k],X=$.instance,ne=$.currentTarget,$=$.listener,X!==v&&m.isPropagationStopped())break e;Rf(m,$,ne),v=X}}}if(de)throw t=Ne,de=!1,Ne=null,t}function tt(t,n){var i=n[yu];i===void 0&&(i=n[yu]=new Set);var d=t+"__bubble";i.has(d)||(Mf(n,t,2,!1),i.add(d))}function cu(t,n,i){var d=0;n&&(d|=4),Mf(i,t,d,n)}var oa="_reactListening"+Math.random().toString(36).slice(2);function Vi(t){if(!t[oa]){t[oa]=!0,s.forEach(function(i){i!=="selectionchange"&&(Px.has(i)||cu(i,!1,t),cu(i,!0,t))});var n=t.nodeType===9?t:t.ownerDocument;n===null||n[oa]||(n[oa]=!0,cu("selectionchange",!1,n))}}function Mf(t,n,i,d){switch(Jd(n)){case 1:var m=Uy;break;case 4:m=Wy;break;default:m=Xl}i=m.bind(null,n,i,t),m=void 0,!uo||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(m=!0),d?m!==void 0?t.addEventListener(n,i,{capture:!0,passive:m}):t.addEventListener(n,i,!0):m!==void 0?t.addEventListener(n,i,{passive:m}):t.addEventListener(n,i,!1)}function du(t,n,i,d,m){var v=d;if((n&1)===0&&(n&2)===0&&d!==null)e:for(;;){if(d===null)return;var k=d.tag;if(k===3||k===4){var $=d.stateNode.containerInfo;if($===m||$.nodeType===8&&$.parentNode===m)break;if(k===4)for(k=d.return;k!==null;){var X=k.tag;if((X===3||X===4)&&(X=k.stateNode.containerInfo,X===m||X.nodeType===8&&X.parentNode===m))return;k=k.return}for(;$!==null;){if(k=fo($),k===null)return;if(X=k.tag,X===5||X===6){d=v=k;continue e}$=$.parentNode}}d=d.return}lo(function(){var ne=v,le=Pr(i),ue=[];e:{var se=kf.get(t);if(se!==void 0){var ge=Zl,be=t;switch(t){case"keypress":if(qs(i)===0)break e;case"keydown":case"keyup":ge=sx;break;case"focusin":be="focus",ge=Jl;break;case"focusout":be="blur",ge=Jl;break;case"beforeblur":case"afterblur":ge=Jl;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ge=nf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ge=Gy;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ge=ux;break;case Nf:case Sf:case Ef:ge=Qy;break;case Cf:ge=dx;break;case"scroll":ge=Yy;break;case"wheel":ge=hx;break;case"copy":case"cut":case"paste":ge=Jy;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ge=of}var Se=(n&4)!==0,ft=!Se&&t==="scroll",J=Se?se!==null?se+"Capture":null:se;Se=[];for(var Z=ne,ee;Z!==null;){ee=Z;var fe=ee.stateNode;if(ee.tag===5&&fe!==null&&(ee=fe,J!==null&&(fe=ur(Z,J),fe!=null&&Se.push(Bi(Z,fe,ee)))),ft)break;Z=Z.return}0<Se.length&&(se=new ge(se,be,null,i,le),ue.push({event:se,listeners:Se}))}}if((n&7)===0){e:{if(se=t==="mouseover"||t==="pointerover",ge=t==="mouseout"||t==="pointerout",se&&i!==io&&(be=i.relatedTarget||i.fromElement)&&(fo(be)||be[hr]))break e;if((ge||se)&&(se=le.window===le?le:(se=le.ownerDocument)?se.defaultView||se.parentWindow:window,ge?(be=i.relatedTarget||i.toElement,ge=ne,be=be?fo(be):null,be!==null&&(ft=we(be),be!==ft||be.tag!==5&&be.tag!==6)&&(be=null)):(ge=null,be=ne),ge!==be)){if(Se=nf,fe="onMouseLeave",J="onMouseEnter",Z="mouse",(t==="pointerout"||t==="pointerover")&&(Se=of,fe="onPointerLeave",J="onPointerEnter",Z="pointer"),ft=ge==null?se:Zo(ge),ee=be==null?se:Zo(be),se=new Se(fe,Z+"leave",ge,i,le),se.target=ft,se.relatedTarget=ee,fe=null,fo(le)===ne&&(Se=new Se(J,Z+"enter",be,i,le),Se.target=ee,Se.relatedTarget=ft,fe=Se),ft=fe,ge&&be)t:{for(Se=ge,J=be,Z=0,ee=Se;ee;ee=Go(ee))Z++;for(ee=0,fe=J;fe;fe=Go(fe))ee++;for(;0<Z-ee;)Se=Go(Se),Z--;for(;0<ee-Z;)J=Go(J),ee--;for(;Z--;){if(Se===J||J!==null&&Se===J.alternate)break t;Se=Go(Se),J=Go(J)}Se=null}else Se=null;ge!==null&&Tf(ue,se,ge,Se,!1),be!==null&&ft!==null&&Tf(ue,ft,be,Se,!0)}}e:{if(se=ne?Zo(ne):window,ge=se.nodeName&&se.nodeName.toLowerCase(),ge==="select"||ge==="input"&&se.type==="file")var ke=wx;else if(df(se))if(hf)ke=Sx;else{ke=_x;var Me=bx}else(ge=se.nodeName)&&ge.toLowerCase()==="input"&&(se.type==="checkbox"||se.type==="radio")&&(ke=Nx);if(ke&&(ke=ke(t,ne))){ff(ue,ke,i,le);break e}Me&&Me(t,se,ne),t==="focusout"&&(Me=se._wrapperState)&&Me.controlled&&se.type==="number"&&Rt(se,"number",se.value)}switch(Me=ne?Zo(ne):window,t){case"focusin":(df(Me)||Me.contentEditable==="true")&&(Yo=Me,iu=ne,Oi=null);break;case"focusout":Oi=iu=Yo=null;break;case"mousedown":su=!0;break;case"contextmenu":case"mouseup":case"dragend":su=!1,bf(ue,i,le);break;case"selectionchange":if(kx)break;case"keydown":case"keyup":bf(ue,i,le)}var Te;if(tu)e:{switch(t){case"compositionstart":var Le="onCompositionStart";break e;case"compositionend":Le="onCompositionEnd";break e;case"compositionupdate":Le="onCompositionUpdate";break e}Le=void 0}else Wo?uf(t,i)&&(Le="onCompositionEnd"):t==="keydown"&&i.keyCode===229&&(Le="onCompositionStart");Le&&(sf&&i.locale!=="ko"&&(Wo||Le!=="onCompositionStart"?Le==="onCompositionEnd"&&Wo&&(Te=ef()):(zr=le,Kl="value"in zr?zr.value:zr.textContent,Wo=!0)),Me=ia(ne,Le),0<Me.length&&(Le=new rf(Le,t,null,i,le),ue.push({event:Le,listeners:Me}),Te?Le.data=Te:(Te=cf(i),Te!==null&&(Le.data=Te)))),(Te=mx?gx(t,i):yx(t,i))&&(ne=ia(ne,"onBeforeInput"),0<ne.length&&(le=new rf("onBeforeInput","beforeinput",null,i,le),ue.push({event:le,listeners:ne}),le.data=Te))}Pf(ue,n)})}function Bi(t,n,i){return{instance:t,listener:n,currentTarget:i}}function ia(t,n){for(var i=n+"Capture",d=[];t!==null;){var m=t,v=m.stateNode;m.tag===5&&v!==null&&(m=v,v=ur(t,i),v!=null&&d.unshift(Bi(t,v,m)),v=ur(t,n),v!=null&&d.push(Bi(t,v,m))),t=t.return}return d}function Go(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Tf(t,n,i,d,m){for(var v=n._reactName,k=[];i!==null&&i!==d;){var $=i,X=$.alternate,ne=$.stateNode;if(X!==null&&X===d)break;$.tag===5&&ne!==null&&($=ne,m?(X=ur(i,v),X!=null&&k.unshift(Bi(i,X,$))):m||(X=ur(i,v),X!=null&&k.push(Bi(i,X,$)))),i=i.return}k.length!==0&&t.push({event:n,listeners:k})}var Mx=/\r\n?/g,Tx=/\u0000|\uFFFD/g;function Df(t){return(typeof t=="string"?t:""+t).replace(Mx,`
`).replace(Tx,"")}function sa(t,n,i){if(n=Df(n),Df(t)!==n&&i)throw Error(o(425))}function aa(){}var fu=null,hu=null;function pu(t,n){return t==="textarea"||t==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var mu=typeof setTimeout=="function"?setTimeout:void 0,Dx=typeof clearTimeout=="function"?clearTimeout:void 0,Lf=typeof Promise=="function"?Promise:void 0,Lx=typeof queueMicrotask=="function"?queueMicrotask:typeof Lf<"u"?function(t){return Lf.resolve(null).then(t).catch(zx)}:mu;function zx(t){setTimeout(function(){throw t})}function gu(t,n){var i=n,d=0;do{var m=i.nextSibling;if(t.removeChild(i),m&&m.nodeType===8)if(i=m.data,i==="/$"){if(d===0){t.removeChild(m),Di(n);return}d--}else i!=="$"&&i!=="$?"&&i!=="$!"||d++;i=m}while(i);Di(n)}function Ar(t){for(;t!=null;t=t.nextSibling){var n=t.nodeType;if(n===1||n===3)break;if(n===8){if(n=t.data,n==="$"||n==="$!"||n==="$?")break;if(n==="/$")return null}}return t}function zf(t){t=t.previousSibling;for(var n=0;t;){if(t.nodeType===8){var i=t.data;if(i==="$"||i==="$!"||i==="$?"){if(n===0)return t;n--}else i==="/$"&&n++}t=t.previousSibling}return null}var Ko=Math.random().toString(36).slice(2),Xn="__reactFiber$"+Ko,Ui="__reactProps$"+Ko,hr="__reactContainer$"+Ko,yu="__reactEvents$"+Ko,Ix="__reactListeners$"+Ko,Ax="__reactHandles$"+Ko;function fo(t){var n=t[Xn];if(n)return n;for(var i=t.parentNode;i;){if(n=i[hr]||i[Xn]){if(i=n.alternate,n.child!==null||i!==null&&i.child!==null)for(t=zf(t);t!==null;){if(i=t[Xn])return i;t=zf(t)}return n}t=i,i=t.parentNode}return null}function Wi(t){return t=t[Xn]||t[hr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Zo(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(o(33))}function la(t){return t[Ui]||null}var xu=[],Qo=-1;function $r(t){return{current:t}}function nt(t){0>Qo||(t.current=xu[Qo],xu[Qo]=null,Qo--)}function et(t,n){Qo++,xu[Qo]=t.current,t.current=n}var Fr={},Pt=$r(Fr),Wt=$r(!1),ho=Fr;function qo(t,n){var i=t.type.contextTypes;if(!i)return Fr;var d=t.stateNode;if(d&&d.__reactInternalMemoizedUnmaskedChildContext===n)return d.__reactInternalMemoizedMaskedChildContext;var m={},v;for(v in i)m[v]=n[v];return d&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=n,t.__reactInternalMemoizedMaskedChildContext=m),m}function Yt(t){return t=t.childContextTypes,t!=null}function ua(){nt(Wt),nt(Pt)}function If(t,n,i){if(Pt.current!==Fr)throw Error(o(168));et(Pt,n),et(Wt,i)}function Af(t,n,i){var d=t.stateNode;if(n=n.childContextTypes,typeof d.getChildContext!="function")return i;d=d.getChildContext();for(var m in d)if(!(m in n))throw Error(o(108,he(t)||"Unknown",m));return U({},i,d)}function ca(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Fr,ho=Pt.current,et(Pt,t),et(Wt,Wt.current),!0}function $f(t,n,i){var d=t.stateNode;if(!d)throw Error(o(169));i?(t=Af(t,n,ho),d.__reactInternalMemoizedMergedChildContext=t,nt(Wt),nt(Pt),et(Pt,t)):nt(Wt),et(Wt,i)}var pr=null,da=!1,vu=!1;function Ff(t){pr===null?pr=[t]:pr.push(t)}function $x(t){da=!0,Ff(t)}function Or(){if(!vu&&pr!==null){vu=!0;var t=0,n=Qe;try{var i=pr;for(Qe=1;t<i.length;t++){var d=i[t];do d=d(!0);while(d!==null)}pr=null,da=!1}catch(m){throw pr!==null&&(pr=pr.slice(t+1)),st(Ut,Or),m}finally{Qe=n,vu=!1}}return null}var Jo=[],ei=0,fa=null,ha=0,pn=[],mn=0,po=null,mr=1,gr="";function mo(t,n){Jo[ei++]=ha,Jo[ei++]=fa,fa=t,ha=n}function Of(t,n,i){pn[mn++]=mr,pn[mn++]=gr,pn[mn++]=po,po=t;var d=mr;t=gr;var m=32-Ke(d)-1;d&=~(1<<m),i+=1;var v=32-Ke(n)+m;if(30<v){var k=m-m%5;v=(d&(1<<k)-1).toString(32),d>>=k,m-=k,mr=1<<32-Ke(n)+m|i<<m|d,gr=v+t}else mr=1<<v|i<<m|d,gr=t}function wu(t){t.return!==null&&(mo(t,1),Of(t,1,0))}function bu(t){for(;t===fa;)fa=Jo[--ei],Jo[ei]=null,ha=Jo[--ei],Jo[ei]=null;for(;t===po;)po=pn[--mn],pn[mn]=null,gr=pn[--mn],pn[mn]=null,mr=pn[--mn],pn[mn]=null}var nn=null,rn=null,rt=!1,Pn=null;function Hf(t,n){var i=vn(5,null,null,0);i.elementType="DELETED",i.stateNode=n,i.return=t,n=t.deletions,n===null?(t.deletions=[i],t.flags|=16):n.push(i)}function Vf(t,n){switch(t.tag){case 5:var i=t.type;return n=n.nodeType!==1||i.toLowerCase()!==n.nodeName.toLowerCase()?null:n,n!==null?(t.stateNode=n,nn=t,rn=Ar(n.firstChild),!0):!1;case 6:return n=t.pendingProps===""||n.nodeType!==3?null:n,n!==null?(t.stateNode=n,nn=t,rn=null,!0):!1;case 13:return n=n.nodeType!==8?null:n,n!==null?(i=po!==null?{id:mr,overflow:gr}:null,t.memoizedState={dehydrated:n,treeContext:i,retryLane:1073741824},i=vn(18,null,null,0),i.stateNode=n,i.return=t,t.child=i,nn=t,rn=null,!0):!1;default:return!1}}function _u(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Nu(t){if(rt){var n=rn;if(n){var i=n;if(!Vf(t,n)){if(_u(t))throw Error(o(418));n=Ar(i.nextSibling);var d=nn;n&&Vf(t,n)?Hf(d,i):(t.flags=t.flags&-4097|2,rt=!1,nn=t)}}else{if(_u(t))throw Error(o(418));t.flags=t.flags&-4097|2,rt=!1,nn=t}}}function Bf(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;nn=t}function pa(t){if(t!==nn)return!1;if(!rt)return Bf(t),rt=!0,!1;var n;if((n=t.tag!==3)&&!(n=t.tag!==5)&&(n=t.type,n=n!=="head"&&n!=="body"&&!pu(t.type,t.memoizedProps)),n&&(n=rn)){if(_u(t))throw Uf(),Error(o(418));for(;n;)Hf(t,n),n=Ar(n.nextSibling)}if(Bf(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(o(317));e:{for(t=t.nextSibling,n=0;t;){if(t.nodeType===8){var i=t.data;if(i==="/$"){if(n===0){rn=Ar(t.nextSibling);break e}n--}else i!=="$"&&i!=="$!"&&i!=="$?"||n++}t=t.nextSibling}rn=null}}else rn=nn?Ar(t.stateNode.nextSibling):null;return!0}function Uf(){for(var t=rn;t;)t=Ar(t.nextSibling)}function ti(){rn=nn=null,rt=!1}function Su(t){Pn===null?Pn=[t]:Pn.push(t)}var Fx=j.ReactCurrentBatchConfig;function Yi(t,n,i){if(t=i.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(i._owner){if(i=i._owner,i){if(i.tag!==1)throw Error(o(309));var d=i.stateNode}if(!d)throw Error(o(147,t));var m=d,v=""+t;return n!==null&&n.ref!==null&&typeof n.ref=="function"&&n.ref._stringRef===v?n.ref:(n=function(k){var $=m.refs;k===null?delete $[v]:$[v]=k},n._stringRef=v,n)}if(typeof t!="string")throw Error(o(284));if(!i._owner)throw Error(o(290,t))}return t}function ma(t,n){throw t=Object.prototype.toString.call(n),Error(o(31,t==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":t))}function Wf(t){var n=t._init;return n(t._payload)}function Yf(t){function n(J,Z){if(t){var ee=J.deletions;ee===null?(J.deletions=[Z],J.flags|=16):ee.push(Z)}}function i(J,Z){if(!t)return null;for(;Z!==null;)n(J,Z),Z=Z.sibling;return null}function d(J,Z){for(J=new Map;Z!==null;)Z.key!==null?J.set(Z.key,Z):J.set(Z.index,Z),Z=Z.sibling;return J}function m(J,Z){return J=Gr(J,Z),J.index=0,J.sibling=null,J}function v(J,Z,ee){return J.index=ee,t?(ee=J.alternate,ee!==null?(ee=ee.index,ee<Z?(J.flags|=2,Z):ee):(J.flags|=2,Z)):(J.flags|=1048576,Z)}function k(J){return t&&J.alternate===null&&(J.flags|=2),J}function $(J,Z,ee,fe){return Z===null||Z.tag!==6?(Z=mc(ee,J.mode,fe),Z.return=J,Z):(Z=m(Z,ee),Z.return=J,Z)}function X(J,Z,ee,fe){var ke=ee.type;return ke===P?le(J,Z,ee.props.children,fe,ee.key):Z!==null&&(Z.elementType===ke||typeof ke=="object"&&ke!==null&&ke.$$typeof===Y&&Wf(ke)===Z.type)?(fe=m(Z,ee.props),fe.ref=Yi(J,Z,ee),fe.return=J,fe):(fe=Fa(ee.type,ee.key,ee.props,null,J.mode,fe),fe.ref=Yi(J,Z,ee),fe.return=J,fe)}function ne(J,Z,ee,fe){return Z===null||Z.tag!==4||Z.stateNode.containerInfo!==ee.containerInfo||Z.stateNode.implementation!==ee.implementation?(Z=gc(ee,J.mode,fe),Z.return=J,Z):(Z=m(Z,ee.children||[]),Z.return=J,Z)}function le(J,Z,ee,fe,ke){return Z===null||Z.tag!==7?(Z=No(ee,J.mode,fe,ke),Z.return=J,Z):(Z=m(Z,ee),Z.return=J,Z)}function ue(J,Z,ee){if(typeof Z=="string"&&Z!==""||typeof Z=="number")return Z=mc(""+Z,J.mode,ee),Z.return=J,Z;if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case A:return ee=Fa(Z.type,Z.key,Z.props,null,J.mode,ee),ee.ref=Yi(J,null,Z),ee.return=J,ee;case T:return Z=gc(Z,J.mode,ee),Z.return=J,Z;case Y:var fe=Z._init;return ue(J,fe(Z._payload),ee)}if(zt(Z)||K(Z))return Z=No(Z,J.mode,ee,null),Z.return=J,Z;ma(J,Z)}return null}function se(J,Z,ee,fe){var ke=Z!==null?Z.key:null;if(typeof ee=="string"&&ee!==""||typeof ee=="number")return ke!==null?null:$(J,Z,""+ee,fe);if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case A:return ee.key===ke?X(J,Z,ee,fe):null;case T:return ee.key===ke?ne(J,Z,ee,fe):null;case Y:return ke=ee._init,se(J,Z,ke(ee._payload),fe)}if(zt(ee)||K(ee))return ke!==null?null:le(J,Z,ee,fe,null);ma(J,ee)}return null}function ge(J,Z,ee,fe,ke){if(typeof fe=="string"&&fe!==""||typeof fe=="number")return J=J.get(ee)||null,$(Z,J,""+fe,ke);if(typeof fe=="object"&&fe!==null){switch(fe.$$typeof){case A:return J=J.get(fe.key===null?ee:fe.key)||null,X(Z,J,fe,ke);case T:return J=J.get(fe.key===null?ee:fe.key)||null,ne(Z,J,fe,ke);case Y:var Me=fe._init;return ge(J,Z,ee,Me(fe._payload),ke)}if(zt(fe)||K(fe))return J=J.get(ee)||null,le(Z,J,fe,ke,null);ma(Z,fe)}return null}function be(J,Z,ee,fe){for(var ke=null,Me=null,Te=Z,Le=Z=0,bt=null;Te!==null&&Le<ee.length;Le++){Te.index>Le?(bt=Te,Te=null):bt=Te.sibling;var Xe=se(J,Te,ee[Le],fe);if(Xe===null){Te===null&&(Te=bt);break}t&&Te&&Xe.alternate===null&&n(J,Te),Z=v(Xe,Z,Le),Me===null?ke=Xe:Me.sibling=Xe,Me=Xe,Te=bt}if(Le===ee.length)return i(J,Te),rt&&mo(J,Le),ke;if(Te===null){for(;Le<ee.length;Le++)Te=ue(J,ee[Le],fe),Te!==null&&(Z=v(Te,Z,Le),Me===null?ke=Te:Me.sibling=Te,Me=Te);return rt&&mo(J,Le),ke}for(Te=d(J,Te);Le<ee.length;Le++)bt=ge(Te,J,Le,ee[Le],fe),bt!==null&&(t&&bt.alternate!==null&&Te.delete(bt.key===null?Le:bt.key),Z=v(bt,Z,Le),Me===null?ke=bt:Me.sibling=bt,Me=bt);return t&&Te.forEach(function(Kr){return n(J,Kr)}),rt&&mo(J,Le),ke}function Se(J,Z,ee,fe){var ke=K(ee);if(typeof ke!="function")throw Error(o(150));if(ee=ke.call(ee),ee==null)throw Error(o(151));for(var Me=ke=null,Te=Z,Le=Z=0,bt=null,Xe=ee.next();Te!==null&&!Xe.done;Le++,Xe=ee.next()){Te.index>Le?(bt=Te,Te=null):bt=Te.sibling;var Kr=se(J,Te,Xe.value,fe);if(Kr===null){Te===null&&(Te=bt);break}t&&Te&&Kr.alternate===null&&n(J,Te),Z=v(Kr,Z,Le),Me===null?ke=Kr:Me.sibling=Kr,Me=Kr,Te=bt}if(Xe.done)return i(J,Te),rt&&mo(J,Le),ke;if(Te===null){for(;!Xe.done;Le++,Xe=ee.next())Xe=ue(J,Xe.value,fe),Xe!==null&&(Z=v(Xe,Z,Le),Me===null?ke=Xe:Me.sibling=Xe,Me=Xe);return rt&&mo(J,Le),ke}for(Te=d(J,Te);!Xe.done;Le++,Xe=ee.next())Xe=ge(Te,J,Le,Xe.value,fe),Xe!==null&&(t&&Xe.alternate!==null&&Te.delete(Xe.key===null?Le:Xe.key),Z=v(Xe,Z,Le),Me===null?ke=Xe:Me.sibling=Xe,Me=Xe);return t&&Te.forEach(function(xv){return n(J,xv)}),rt&&mo(J,Le),ke}function ft(J,Z,ee,fe){if(typeof ee=="object"&&ee!==null&&ee.type===P&&ee.key===null&&(ee=ee.props.children),typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case A:e:{for(var ke=ee.key,Me=Z;Me!==null;){if(Me.key===ke){if(ke=ee.type,ke===P){if(Me.tag===7){i(J,Me.sibling),Z=m(Me,ee.props.children),Z.return=J,J=Z;break e}}else if(Me.elementType===ke||typeof ke=="object"&&ke!==null&&ke.$$typeof===Y&&Wf(ke)===Me.type){i(J,Me.sibling),Z=m(Me,ee.props),Z.ref=Yi(J,Me,ee),Z.return=J,J=Z;break e}i(J,Me);break}else n(J,Me);Me=Me.sibling}ee.type===P?(Z=No(ee.props.children,J.mode,fe,ee.key),Z.return=J,J=Z):(fe=Fa(ee.type,ee.key,ee.props,null,J.mode,fe),fe.ref=Yi(J,Z,ee),fe.return=J,J=fe)}return k(J);case T:e:{for(Me=ee.key;Z!==null;){if(Z.key===Me)if(Z.tag===4&&Z.stateNode.containerInfo===ee.containerInfo&&Z.stateNode.implementation===ee.implementation){i(J,Z.sibling),Z=m(Z,ee.children||[]),Z.return=J,J=Z;break e}else{i(J,Z);break}else n(J,Z);Z=Z.sibling}Z=gc(ee,J.mode,fe),Z.return=J,J=Z}return k(J);case Y:return Me=ee._init,ft(J,Z,Me(ee._payload),fe)}if(zt(ee))return be(J,Z,ee,fe);if(K(ee))return Se(J,Z,ee,fe);ma(J,ee)}return typeof ee=="string"&&ee!==""||typeof ee=="number"?(ee=""+ee,Z!==null&&Z.tag===6?(i(J,Z.sibling),Z=m(Z,ee),Z.return=J,J=Z):(i(J,Z),Z=mc(ee,J.mode,fe),Z.return=J,J=Z),k(J)):i(J,Z)}return ft}var ni=Yf(!0),Xf=Yf(!1),ga=$r(null),ya=null,ri=null,Eu=null;function Cu(){Eu=ri=ya=null}function ku(t){var n=ga.current;nt(ga),t._currentValue=n}function ju(t,n,i){for(;t!==null;){var d=t.alternate;if((t.childLanes&n)!==n?(t.childLanes|=n,d!==null&&(d.childLanes|=n)):d!==null&&(d.childLanes&n)!==n&&(d.childLanes|=n),t===i)break;t=t.return}}function oi(t,n){ya=t,Eu=ri=null,t=t.dependencies,t!==null&&t.firstContext!==null&&((t.lanes&n)!==0&&(Xt=!0),t.firstContext=null)}function gn(t){var n=t._currentValue;if(Eu!==t)if(t={context:t,memoizedValue:n,next:null},ri===null){if(ya===null)throw Error(o(308));ri=t,ya.dependencies={lanes:0,firstContext:t}}else ri=ri.next=t;return n}var go=null;function Ru(t){go===null?go=[t]:go.push(t)}function Gf(t,n,i,d){var m=n.interleaved;return m===null?(i.next=i,Ru(n)):(i.next=m.next,m.next=i),n.interleaved=i,yr(t,d)}function yr(t,n){t.lanes|=n;var i=t.alternate;for(i!==null&&(i.lanes|=n),i=t,t=t.return;t!==null;)t.childLanes|=n,i=t.alternate,i!==null&&(i.childLanes|=n),i=t,t=t.return;return i.tag===3?i.stateNode:null}var Hr=!1;function Pu(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Kf(t,n){t=t.updateQueue,n.updateQueue===t&&(n.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function xr(t,n){return{eventTime:t,lane:n,tag:0,payload:null,callback:null,next:null}}function Vr(t,n,i){var d=t.updateQueue;if(d===null)return null;if(d=d.shared,(We&2)!==0){var m=d.pending;return m===null?n.next=n:(n.next=m.next,m.next=n),d.pending=n,yr(t,i)}return m=d.interleaved,m===null?(n.next=n,Ru(d)):(n.next=m.next,m.next=n),d.interleaved=n,yr(t,i)}function xa(t,n,i){if(n=n.updateQueue,n!==null&&(n=n.shared,(i&4194240)!==0)){var d=n.lanes;d&=t.pendingLanes,i|=d,n.lanes=i,Ul(t,i)}}function Zf(t,n){var i=t.updateQueue,d=t.alternate;if(d!==null&&(d=d.updateQueue,i===d)){var m=null,v=null;if(i=i.firstBaseUpdate,i!==null){do{var k={eventTime:i.eventTime,lane:i.lane,tag:i.tag,payload:i.payload,callback:i.callback,next:null};v===null?m=v=k:v=v.next=k,i=i.next}while(i!==null);v===null?m=v=n:v=v.next=n}else m=v=n;i={baseState:d.baseState,firstBaseUpdate:m,lastBaseUpdate:v,shared:d.shared,effects:d.effects},t.updateQueue=i;return}t=i.lastBaseUpdate,t===null?i.firstBaseUpdate=n:t.next=n,i.lastBaseUpdate=n}function va(t,n,i,d){var m=t.updateQueue;Hr=!1;var v=m.firstBaseUpdate,k=m.lastBaseUpdate,$=m.shared.pending;if($!==null){m.shared.pending=null;var X=$,ne=X.next;X.next=null,k===null?v=ne:k.next=ne,k=X;var le=t.alternate;le!==null&&(le=le.updateQueue,$=le.lastBaseUpdate,$!==k&&($===null?le.firstBaseUpdate=ne:$.next=ne,le.lastBaseUpdate=X))}if(v!==null){var ue=m.baseState;k=0,le=ne=X=null,$=v;do{var se=$.lane,ge=$.eventTime;if((d&se)===se){le!==null&&(le=le.next={eventTime:ge,lane:0,tag:$.tag,payload:$.payload,callback:$.callback,next:null});e:{var be=t,Se=$;switch(se=n,ge=i,Se.tag){case 1:if(be=Se.payload,typeof be=="function"){ue=be.call(ge,ue,se);break e}ue=be;break e;case 3:be.flags=be.flags&-65537|128;case 0:if(be=Se.payload,se=typeof be=="function"?be.call(ge,ue,se):be,se==null)break e;ue=U({},ue,se);break e;case 2:Hr=!0}}$.callback!==null&&$.lane!==0&&(t.flags|=64,se=m.effects,se===null?m.effects=[$]:se.push($))}else ge={eventTime:ge,lane:se,tag:$.tag,payload:$.payload,callback:$.callback,next:null},le===null?(ne=le=ge,X=ue):le=le.next=ge,k|=se;if($=$.next,$===null){if($=m.shared.pending,$===null)break;se=$,$=se.next,se.next=null,m.lastBaseUpdate=se,m.shared.pending=null}}while(!0);if(le===null&&(X=ue),m.baseState=X,m.firstBaseUpdate=ne,m.lastBaseUpdate=le,n=m.shared.interleaved,n!==null){m=n;do k|=m.lane,m=m.next;while(m!==n)}else v===null&&(m.shared.lanes=0);vo|=k,t.lanes=k,t.memoizedState=ue}}function Qf(t,n,i){if(t=n.effects,n.effects=null,t!==null)for(n=0;n<t.length;n++){var d=t[n],m=d.callback;if(m!==null){if(d.callback=null,d=i,typeof m!="function")throw Error(o(191,m));m.call(d)}}}var Xi={},Gn=$r(Xi),Gi=$r(Xi),Ki=$r(Xi);function yo(t){if(t===Xi)throw Error(o(174));return t}function Mu(t,n){switch(et(Ki,n),et(Gi,t),et(Gn,Xi),t=n.nodeType,t){case 9:case 11:n=(n=n.documentElement)?n.namespaceURI:en(null,"");break;default:t=t===8?n.parentNode:n,n=t.namespaceURI||null,t=t.tagName,n=en(n,t)}nt(Gn),et(Gn,n)}function ii(){nt(Gn),nt(Gi),nt(Ki)}function qf(t){yo(Ki.current);var n=yo(Gn.current),i=en(n,t.type);n!==i&&(et(Gi,t),et(Gn,i))}function Tu(t){Gi.current===t&&(nt(Gn),nt(Gi))}var at=$r(0);function wa(t){for(var n=t;n!==null;){if(n.tag===13){var i=n.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||i.data==="$?"||i.data==="$!"))return n}else if(n.tag===19&&n.memoizedProps.revealOrder!==void 0){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var Du=[];function Lu(){for(var t=0;t<Du.length;t++)Du[t]._workInProgressVersionPrimary=null;Du.length=0}var ba=j.ReactCurrentDispatcher,zu=j.ReactCurrentBatchConfig,xo=0,lt=null,yt=null,vt=null,_a=!1,Zi=!1,Qi=0,Ox=0;function Mt(){throw Error(o(321))}function Iu(t,n){if(n===null)return!1;for(var i=0;i<n.length&&i<t.length;i++)if(!Rn(t[i],n[i]))return!1;return!0}function Au(t,n,i,d,m,v){if(xo=v,lt=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,ba.current=t===null||t.memoizedState===null?Ux:Wx,t=i(d,m),Zi){v=0;do{if(Zi=!1,Qi=0,25<=v)throw Error(o(301));v+=1,vt=yt=null,n.updateQueue=null,ba.current=Yx,t=i(d,m)}while(Zi)}if(ba.current=Ea,n=yt!==null&&yt.next!==null,xo=0,vt=yt=lt=null,_a=!1,n)throw Error(o(300));return t}function $u(){var t=Qi!==0;return Qi=0,t}function Kn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return vt===null?lt.memoizedState=vt=t:vt=vt.next=t,vt}function yn(){if(yt===null){var t=lt.alternate;t=t!==null?t.memoizedState:null}else t=yt.next;var n=vt===null?lt.memoizedState:vt.next;if(n!==null)vt=n,yt=t;else{if(t===null)throw Error(o(310));yt=t,t={memoizedState:yt.memoizedState,baseState:yt.baseState,baseQueue:yt.baseQueue,queue:yt.queue,next:null},vt===null?lt.memoizedState=vt=t:vt=vt.next=t}return vt}function qi(t,n){return typeof n=="function"?n(t):n}function Fu(t){var n=yn(),i=n.queue;if(i===null)throw Error(o(311));i.lastRenderedReducer=t;var d=yt,m=d.baseQueue,v=i.pending;if(v!==null){if(m!==null){var k=m.next;m.next=v.next,v.next=k}d.baseQueue=m=v,i.pending=null}if(m!==null){v=m.next,d=d.baseState;var $=k=null,X=null,ne=v;do{var le=ne.lane;if((xo&le)===le)X!==null&&(X=X.next={lane:0,action:ne.action,hasEagerState:ne.hasEagerState,eagerState:ne.eagerState,next:null}),d=ne.hasEagerState?ne.eagerState:t(d,ne.action);else{var ue={lane:le,action:ne.action,hasEagerState:ne.hasEagerState,eagerState:ne.eagerState,next:null};X===null?($=X=ue,k=d):X=X.next=ue,lt.lanes|=le,vo|=le}ne=ne.next}while(ne!==null&&ne!==v);X===null?k=d:X.next=$,Rn(d,n.memoizedState)||(Xt=!0),n.memoizedState=d,n.baseState=k,n.baseQueue=X,i.lastRenderedState=d}if(t=i.interleaved,t!==null){m=t;do v=m.lane,lt.lanes|=v,vo|=v,m=m.next;while(m!==t)}else m===null&&(i.lanes=0);return[n.memoizedState,i.dispatch]}function Ou(t){var n=yn(),i=n.queue;if(i===null)throw Error(o(311));i.lastRenderedReducer=t;var d=i.dispatch,m=i.pending,v=n.memoizedState;if(m!==null){i.pending=null;var k=m=m.next;do v=t(v,k.action),k=k.next;while(k!==m);Rn(v,n.memoizedState)||(Xt=!0),n.memoizedState=v,n.baseQueue===null&&(n.baseState=v),i.lastRenderedState=v}return[v,d]}function Jf(){}function eh(t,n){var i=lt,d=yn(),m=n(),v=!Rn(d.memoizedState,m);if(v&&(d.memoizedState=m,Xt=!0),d=d.queue,Hu(rh.bind(null,i,d,t),[t]),d.getSnapshot!==n||v||vt!==null&&vt.memoizedState.tag&1){if(i.flags|=2048,Ji(9,nh.bind(null,i,d,m,n),void 0,null),wt===null)throw Error(o(349));(xo&30)!==0||th(i,n,m)}return m}function th(t,n,i){t.flags|=16384,t={getSnapshot:n,value:i},n=lt.updateQueue,n===null?(n={lastEffect:null,stores:null},lt.updateQueue=n,n.stores=[t]):(i=n.stores,i===null?n.stores=[t]:i.push(t))}function nh(t,n,i,d){n.value=i,n.getSnapshot=d,oh(n)&&ih(t)}function rh(t,n,i){return i(function(){oh(n)&&ih(t)})}function oh(t){var n=t.getSnapshot;t=t.value;try{var i=n();return!Rn(t,i)}catch{return!0}}function ih(t){var n=yr(t,1);n!==null&&Ln(n,t,1,-1)}function sh(t){var n=Kn();return typeof t=="function"&&(t=t()),n.memoizedState=n.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:qi,lastRenderedState:t},n.queue=t,t=t.dispatch=Bx.bind(null,lt,t),[n.memoizedState,t]}function Ji(t,n,i,d){return t={tag:t,create:n,destroy:i,deps:d,next:null},n=lt.updateQueue,n===null?(n={lastEffect:null,stores:null},lt.updateQueue=n,n.lastEffect=t.next=t):(i=n.lastEffect,i===null?n.lastEffect=t.next=t:(d=i.next,i.next=t,t.next=d,n.lastEffect=t)),t}function ah(){return yn().memoizedState}function Na(t,n,i,d){var m=Kn();lt.flags|=t,m.memoizedState=Ji(1|n,i,void 0,d===void 0?null:d)}function Sa(t,n,i,d){var m=yn();d=d===void 0?null:d;var v=void 0;if(yt!==null){var k=yt.memoizedState;if(v=k.destroy,d!==null&&Iu(d,k.deps)){m.memoizedState=Ji(n,i,v,d);return}}lt.flags|=t,m.memoizedState=Ji(1|n,i,v,d)}function lh(t,n){return Na(8390656,8,t,n)}function Hu(t,n){return Sa(2048,8,t,n)}function uh(t,n){return Sa(4,2,t,n)}function ch(t,n){return Sa(4,4,t,n)}function dh(t,n){if(typeof n=="function")return t=t(),n(t),function(){n(null)};if(n!=null)return t=t(),n.current=t,function(){n.current=null}}function fh(t,n,i){return i=i!=null?i.concat([t]):null,Sa(4,4,dh.bind(null,n,t),i)}function Vu(){}function hh(t,n){var i=yn();n=n===void 0?null:n;var d=i.memoizedState;return d!==null&&n!==null&&Iu(n,d[1])?d[0]:(i.memoizedState=[t,n],t)}function ph(t,n){var i=yn();n=n===void 0?null:n;var d=i.memoizedState;return d!==null&&n!==null&&Iu(n,d[1])?d[0]:(t=t(),i.memoizedState=[t,n],t)}function mh(t,n,i){return(xo&21)===0?(t.baseState&&(t.baseState=!1,Xt=!0),t.memoizedState=i):(Rn(i,n)||(i=Vo(),lt.lanes|=i,vo|=i,t.baseState=!0),n)}function Hx(t,n){var i=Qe;Qe=i!==0&&4>i?i:4,t(!0);var d=zu.transition;zu.transition={};try{t(!1),n()}finally{Qe=i,zu.transition=d}}function gh(){return yn().memoizedState}function Vx(t,n,i){var d=Yr(t);if(i={lane:d,action:i,hasEagerState:!1,eagerState:null,next:null},yh(t))xh(n,i);else if(i=Gf(t,n,i,d),i!==null){var m=$t();Ln(i,t,d,m),vh(i,n,d)}}function Bx(t,n,i){var d=Yr(t),m={lane:d,action:i,hasEagerState:!1,eagerState:null,next:null};if(yh(t))xh(n,m);else{var v=t.alternate;if(t.lanes===0&&(v===null||v.lanes===0)&&(v=n.lastRenderedReducer,v!==null))try{var k=n.lastRenderedState,$=v(k,i);if(m.hasEagerState=!0,m.eagerState=$,Rn($,k)){var X=n.interleaved;X===null?(m.next=m,Ru(n)):(m.next=X.next,X.next=m),n.interleaved=m;return}}catch{}i=Gf(t,n,m,d),i!==null&&(m=$t(),Ln(i,t,d,m),vh(i,n,d))}}function yh(t){var n=t.alternate;return t===lt||n!==null&&n===lt}function xh(t,n){Zi=_a=!0;var i=t.pending;i===null?n.next=n:(n.next=i.next,i.next=n),t.pending=n}function vh(t,n,i){if((i&4194240)!==0){var d=n.lanes;d&=t.pendingLanes,i|=d,n.lanes=i,Ul(t,i)}}var Ea={readContext:gn,useCallback:Mt,useContext:Mt,useEffect:Mt,useImperativeHandle:Mt,useInsertionEffect:Mt,useLayoutEffect:Mt,useMemo:Mt,useReducer:Mt,useRef:Mt,useState:Mt,useDebugValue:Mt,useDeferredValue:Mt,useTransition:Mt,useMutableSource:Mt,useSyncExternalStore:Mt,useId:Mt,unstable_isNewReconciler:!1},Ux={readContext:gn,useCallback:function(t,n){return Kn().memoizedState=[t,n===void 0?null:n],t},useContext:gn,useEffect:lh,useImperativeHandle:function(t,n,i){return i=i!=null?i.concat([t]):null,Na(4194308,4,dh.bind(null,n,t),i)},useLayoutEffect:function(t,n){return Na(4194308,4,t,n)},useInsertionEffect:function(t,n){return Na(4,2,t,n)},useMemo:function(t,n){var i=Kn();return n=n===void 0?null:n,t=t(),i.memoizedState=[t,n],t},useReducer:function(t,n,i){var d=Kn();return n=i!==void 0?i(n):n,d.memoizedState=d.baseState=n,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:n},d.queue=t,t=t.dispatch=Vx.bind(null,lt,t),[d.memoizedState,t]},useRef:function(t){var n=Kn();return t={current:t},n.memoizedState=t},useState:sh,useDebugValue:Vu,useDeferredValue:function(t){return Kn().memoizedState=t},useTransition:function(){var t=sh(!1),n=t[0];return t=Hx.bind(null,t[1]),Kn().memoizedState=t,[n,t]},useMutableSource:function(){},useSyncExternalStore:function(t,n,i){var d=lt,m=Kn();if(rt){if(i===void 0)throw Error(o(407));i=i()}else{if(i=n(),wt===null)throw Error(o(349));(xo&30)!==0||th(d,n,i)}m.memoizedState=i;var v={value:i,getSnapshot:n};return m.queue=v,lh(rh.bind(null,d,v,t),[t]),d.flags|=2048,Ji(9,nh.bind(null,d,v,i,n),void 0,null),i},useId:function(){var t=Kn(),n=wt.identifierPrefix;if(rt){var i=gr,d=mr;i=(d&~(1<<32-Ke(d)-1)).toString(32)+i,n=":"+n+"R"+i,i=Qi++,0<i&&(n+="H"+i.toString(32)),n+=":"}else i=Ox++,n=":"+n+"r"+i.toString(32)+":";return t.memoizedState=n},unstable_isNewReconciler:!1},Wx={readContext:gn,useCallback:hh,useContext:gn,useEffect:Hu,useImperativeHandle:fh,useInsertionEffect:uh,useLayoutEffect:ch,useMemo:ph,useReducer:Fu,useRef:ah,useState:function(){return Fu(qi)},useDebugValue:Vu,useDeferredValue:function(t){var n=yn();return mh(n,yt.memoizedState,t)},useTransition:function(){var t=Fu(qi)[0],n=yn().memoizedState;return[t,n]},useMutableSource:Jf,useSyncExternalStore:eh,useId:gh,unstable_isNewReconciler:!1},Yx={readContext:gn,useCallback:hh,useContext:gn,useEffect:Hu,useImperativeHandle:fh,useInsertionEffect:uh,useLayoutEffect:ch,useMemo:ph,useReducer:Ou,useRef:ah,useState:function(){return Ou(qi)},useDebugValue:Vu,useDeferredValue:function(t){var n=yn();return yt===null?n.memoizedState=t:mh(n,yt.memoizedState,t)},useTransition:function(){var t=Ou(qi)[0],n=yn().memoizedState;return[t,n]},useMutableSource:Jf,useSyncExternalStore:eh,useId:gh,unstable_isNewReconciler:!1};function Mn(t,n){if(t&&t.defaultProps){n=U({},n),t=t.defaultProps;for(var i in t)n[i]===void 0&&(n[i]=t[i]);return n}return n}function Bu(t,n,i,d){n=t.memoizedState,i=i(d,n),i=i==null?n:U({},n,i),t.memoizedState=i,t.lanes===0&&(t.updateQueue.baseState=i)}var Ca={isMounted:function(t){return(t=t._reactInternals)?we(t)===t:!1},enqueueSetState:function(t,n,i){t=t._reactInternals;var d=$t(),m=Yr(t),v=xr(d,m);v.payload=n,i!=null&&(v.callback=i),n=Vr(t,v,m),n!==null&&(Ln(n,t,m,d),xa(n,t,m))},enqueueReplaceState:function(t,n,i){t=t._reactInternals;var d=$t(),m=Yr(t),v=xr(d,m);v.tag=1,v.payload=n,i!=null&&(v.callback=i),n=Vr(t,v,m),n!==null&&(Ln(n,t,m,d),xa(n,t,m))},enqueueForceUpdate:function(t,n){t=t._reactInternals;var i=$t(),d=Yr(t),m=xr(i,d);m.tag=2,n!=null&&(m.callback=n),n=Vr(t,m,d),n!==null&&(Ln(n,t,d,i),xa(n,t,d))}};function wh(t,n,i,d,m,v,k){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(d,v,k):n.prototype&&n.prototype.isPureReactComponent?!Fi(i,d)||!Fi(m,v):!0}function bh(t,n,i){var d=!1,m=Fr,v=n.contextType;return typeof v=="object"&&v!==null?v=gn(v):(m=Yt(n)?ho:Pt.current,d=n.contextTypes,v=(d=d!=null)?qo(t,m):Fr),n=new n(i,v),t.memoizedState=n.state!==null&&n.state!==void 0?n.state:null,n.updater=Ca,t.stateNode=n,n._reactInternals=t,d&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=m,t.__reactInternalMemoizedMaskedChildContext=v),n}function _h(t,n,i,d){t=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(i,d),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(i,d),n.state!==t&&Ca.enqueueReplaceState(n,n.state,null)}function Uu(t,n,i,d){var m=t.stateNode;m.props=i,m.state=t.memoizedState,m.refs={},Pu(t);var v=n.contextType;typeof v=="object"&&v!==null?m.context=gn(v):(v=Yt(n)?ho:Pt.current,m.context=qo(t,v)),m.state=t.memoizedState,v=n.getDerivedStateFromProps,typeof v=="function"&&(Bu(t,n,v,i),m.state=t.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(n=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),n!==m.state&&Ca.enqueueReplaceState(m,m.state,null),va(t,i,m,d),m.state=t.memoizedState),typeof m.componentDidMount=="function"&&(t.flags|=4194308)}function si(t,n){try{var i="",d=n;do i+=ce(d),d=d.return;while(d);var m=i}catch(v){m=`
Error generating stack: `+v.message+`
`+v.stack}return{value:t,source:n,stack:m,digest:null}}function Wu(t,n,i){return{value:t,source:null,stack:i??null,digest:n??null}}function Yu(t,n){try{console.error(n.value)}catch(i){setTimeout(function(){throw i})}}var Xx=typeof WeakMap=="function"?WeakMap:Map;function Nh(t,n,i){i=xr(-1,i),i.tag=3,i.payload={element:null};var d=n.value;return i.callback=function(){Da||(Da=!0,ac=d),Yu(t,n)},i}function Sh(t,n,i){i=xr(-1,i),i.tag=3;var d=t.type.getDerivedStateFromError;if(typeof d=="function"){var m=n.value;i.payload=function(){return d(m)},i.callback=function(){Yu(t,n)}}var v=t.stateNode;return v!==null&&typeof v.componentDidCatch=="function"&&(i.callback=function(){Yu(t,n),typeof d!="function"&&(Ur===null?Ur=new Set([this]):Ur.add(this));var k=n.stack;this.componentDidCatch(n.value,{componentStack:k!==null?k:""})}),i}function Eh(t,n,i){var d=t.pingCache;if(d===null){d=t.pingCache=new Xx;var m=new Set;d.set(n,m)}else m=d.get(n),m===void 0&&(m=new Set,d.set(n,m));m.has(i)||(m.add(i),t=av.bind(null,t,n,i),n.then(t,t))}function Ch(t){do{var n;if((n=t.tag===13)&&(n=t.memoizedState,n=n!==null?n.dehydrated!==null:!0),n)return t;t=t.return}while(t!==null);return null}function kh(t,n,i,d,m){return(t.mode&1)===0?(t===n?t.flags|=65536:(t.flags|=128,i.flags|=131072,i.flags&=-52805,i.tag===1&&(i.alternate===null?i.tag=17:(n=xr(-1,1),n.tag=2,Vr(i,n,1))),i.lanes|=1),t):(t.flags|=65536,t.lanes=m,t)}var Gx=j.ReactCurrentOwner,Xt=!1;function At(t,n,i,d){n.child=t===null?Xf(n,null,i,d):ni(n,t.child,i,d)}function jh(t,n,i,d,m){i=i.render;var v=n.ref;return oi(n,m),d=Au(t,n,i,d,v,m),i=$u(),t!==null&&!Xt?(n.updateQueue=t.updateQueue,n.flags&=-2053,t.lanes&=~m,vr(t,n,m)):(rt&&i&&wu(n),n.flags|=1,At(t,n,d,m),n.child)}function Rh(t,n,i,d,m){if(t===null){var v=i.type;return typeof v=="function"&&!pc(v)&&v.defaultProps===void 0&&i.compare===null&&i.defaultProps===void 0?(n.tag=15,n.type=v,Ph(t,n,v,d,m)):(t=Fa(i.type,null,d,n,n.mode,m),t.ref=n.ref,t.return=n,n.child=t)}if(v=t.child,(t.lanes&m)===0){var k=v.memoizedProps;if(i=i.compare,i=i!==null?i:Fi,i(k,d)&&t.ref===n.ref)return vr(t,n,m)}return n.flags|=1,t=Gr(v,d),t.ref=n.ref,t.return=n,n.child=t}function Ph(t,n,i,d,m){if(t!==null){var v=t.memoizedProps;if(Fi(v,d)&&t.ref===n.ref)if(Xt=!1,n.pendingProps=d=v,(t.lanes&m)!==0)(t.flags&131072)!==0&&(Xt=!0);else return n.lanes=t.lanes,vr(t,n,m)}return Xu(t,n,i,d,m)}function Mh(t,n,i){var d=n.pendingProps,m=d.children,v=t!==null?t.memoizedState:null;if(d.mode==="hidden")if((n.mode&1)===0)n.memoizedState={baseLanes:0,cachePool:null,transitions:null},et(li,on),on|=i;else{if((i&1073741824)===0)return t=v!==null?v.baseLanes|i:i,n.lanes=n.childLanes=1073741824,n.memoizedState={baseLanes:t,cachePool:null,transitions:null},n.updateQueue=null,et(li,on),on|=t,null;n.memoizedState={baseLanes:0,cachePool:null,transitions:null},d=v!==null?v.baseLanes:i,et(li,on),on|=d}else v!==null?(d=v.baseLanes|i,n.memoizedState=null):d=i,et(li,on),on|=d;return At(t,n,m,i),n.child}function Th(t,n){var i=n.ref;(t===null&&i!==null||t!==null&&t.ref!==i)&&(n.flags|=512,n.flags|=2097152)}function Xu(t,n,i,d,m){var v=Yt(i)?ho:Pt.current;return v=qo(n,v),oi(n,m),i=Au(t,n,i,d,v,m),d=$u(),t!==null&&!Xt?(n.updateQueue=t.updateQueue,n.flags&=-2053,t.lanes&=~m,vr(t,n,m)):(rt&&d&&wu(n),n.flags|=1,At(t,n,i,m),n.child)}function Dh(t,n,i,d,m){if(Yt(i)){var v=!0;ca(n)}else v=!1;if(oi(n,m),n.stateNode===null)ja(t,n),bh(n,i,d),Uu(n,i,d,m),d=!0;else if(t===null){var k=n.stateNode,$=n.memoizedProps;k.props=$;var X=k.context,ne=i.contextType;typeof ne=="object"&&ne!==null?ne=gn(ne):(ne=Yt(i)?ho:Pt.current,ne=qo(n,ne));var le=i.getDerivedStateFromProps,ue=typeof le=="function"||typeof k.getSnapshotBeforeUpdate=="function";ue||typeof k.UNSAFE_componentWillReceiveProps!="function"&&typeof k.componentWillReceiveProps!="function"||($!==d||X!==ne)&&_h(n,k,d,ne),Hr=!1;var se=n.memoizedState;k.state=se,va(n,d,k,m),X=n.memoizedState,$!==d||se!==X||Wt.current||Hr?(typeof le=="function"&&(Bu(n,i,le,d),X=n.memoizedState),($=Hr||wh(n,i,$,d,se,X,ne))?(ue||typeof k.UNSAFE_componentWillMount!="function"&&typeof k.componentWillMount!="function"||(typeof k.componentWillMount=="function"&&k.componentWillMount(),typeof k.UNSAFE_componentWillMount=="function"&&k.UNSAFE_componentWillMount()),typeof k.componentDidMount=="function"&&(n.flags|=4194308)):(typeof k.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=d,n.memoizedState=X),k.props=d,k.state=X,k.context=ne,d=$):(typeof k.componentDidMount=="function"&&(n.flags|=4194308),d=!1)}else{k=n.stateNode,Kf(t,n),$=n.memoizedProps,ne=n.type===n.elementType?$:Mn(n.type,$),k.props=ne,ue=n.pendingProps,se=k.context,X=i.contextType,typeof X=="object"&&X!==null?X=gn(X):(X=Yt(i)?ho:Pt.current,X=qo(n,X));var ge=i.getDerivedStateFromProps;(le=typeof ge=="function"||typeof k.getSnapshotBeforeUpdate=="function")||typeof k.UNSAFE_componentWillReceiveProps!="function"&&typeof k.componentWillReceiveProps!="function"||($!==ue||se!==X)&&_h(n,k,d,X),Hr=!1,se=n.memoizedState,k.state=se,va(n,d,k,m);var be=n.memoizedState;$!==ue||se!==be||Wt.current||Hr?(typeof ge=="function"&&(Bu(n,i,ge,d),be=n.memoizedState),(ne=Hr||wh(n,i,ne,d,se,be,X)||!1)?(le||typeof k.UNSAFE_componentWillUpdate!="function"&&typeof k.componentWillUpdate!="function"||(typeof k.componentWillUpdate=="function"&&k.componentWillUpdate(d,be,X),typeof k.UNSAFE_componentWillUpdate=="function"&&k.UNSAFE_componentWillUpdate(d,be,X)),typeof k.componentDidUpdate=="function"&&(n.flags|=4),typeof k.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof k.componentDidUpdate!="function"||$===t.memoizedProps&&se===t.memoizedState||(n.flags|=4),typeof k.getSnapshotBeforeUpdate!="function"||$===t.memoizedProps&&se===t.memoizedState||(n.flags|=1024),n.memoizedProps=d,n.memoizedState=be),k.props=d,k.state=be,k.context=X,d=ne):(typeof k.componentDidUpdate!="function"||$===t.memoizedProps&&se===t.memoizedState||(n.flags|=4),typeof k.getSnapshotBeforeUpdate!="function"||$===t.memoizedProps&&se===t.memoizedState||(n.flags|=1024),d=!1)}return Gu(t,n,i,d,v,m)}function Gu(t,n,i,d,m,v){Th(t,n);var k=(n.flags&128)!==0;if(!d&&!k)return m&&$f(n,i,!1),vr(t,n,v);d=n.stateNode,Gx.current=n;var $=k&&typeof i.getDerivedStateFromError!="function"?null:d.render();return n.flags|=1,t!==null&&k?(n.child=ni(n,t.child,null,v),n.child=ni(n,null,$,v)):At(t,n,$,v),n.memoizedState=d.state,m&&$f(n,i,!0),n.child}function Lh(t){var n=t.stateNode;n.pendingContext?If(t,n.pendingContext,n.pendingContext!==n.context):n.context&&If(t,n.context,!1),Mu(t,n.containerInfo)}function zh(t,n,i,d,m){return ti(),Su(m),n.flags|=256,At(t,n,i,d),n.child}var Ku={dehydrated:null,treeContext:null,retryLane:0};function Zu(t){return{baseLanes:t,cachePool:null,transitions:null}}function Ih(t,n,i){var d=n.pendingProps,m=at.current,v=!1,k=(n.flags&128)!==0,$;if(($=k)||($=t!==null&&t.memoizedState===null?!1:(m&2)!==0),$?(v=!0,n.flags&=-129):(t===null||t.memoizedState!==null)&&(m|=1),et(at,m&1),t===null)return Nu(n),t=n.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?((n.mode&1)===0?n.lanes=1:t.data==="$!"?n.lanes=8:n.lanes=1073741824,null):(k=d.children,t=d.fallback,v?(d=n.mode,v=n.child,k={mode:"hidden",children:k},(d&1)===0&&v!==null?(v.childLanes=0,v.pendingProps=k):v=Oa(k,d,0,null),t=No(t,d,i,null),v.return=n,t.return=n,v.sibling=t,n.child=v,n.child.memoizedState=Zu(i),n.memoizedState=Ku,t):Qu(n,k));if(m=t.memoizedState,m!==null&&($=m.dehydrated,$!==null))return Kx(t,n,k,d,$,m,i);if(v){v=d.fallback,k=n.mode,m=t.child,$=m.sibling;var X={mode:"hidden",children:d.children};return(k&1)===0&&n.child!==m?(d=n.child,d.childLanes=0,d.pendingProps=X,n.deletions=null):(d=Gr(m,X),d.subtreeFlags=m.subtreeFlags&14680064),$!==null?v=Gr($,v):(v=No(v,k,i,null),v.flags|=2),v.return=n,d.return=n,d.sibling=v,n.child=d,d=v,v=n.child,k=t.child.memoizedState,k=k===null?Zu(i):{baseLanes:k.baseLanes|i,cachePool:null,transitions:k.transitions},v.memoizedState=k,v.childLanes=t.childLanes&~i,n.memoizedState=Ku,d}return v=t.child,t=v.sibling,d=Gr(v,{mode:"visible",children:d.children}),(n.mode&1)===0&&(d.lanes=i),d.return=n,d.sibling=null,t!==null&&(i=n.deletions,i===null?(n.deletions=[t],n.flags|=16):i.push(t)),n.child=d,n.memoizedState=null,d}function Qu(t,n){return n=Oa({mode:"visible",children:n},t.mode,0,null),n.return=t,t.child=n}function ka(t,n,i,d){return d!==null&&Su(d),ni(n,t.child,null,i),t=Qu(n,n.pendingProps.children),t.flags|=2,n.memoizedState=null,t}function Kx(t,n,i,d,m,v,k){if(i)return n.flags&256?(n.flags&=-257,d=Wu(Error(o(422))),ka(t,n,k,d)):n.memoizedState!==null?(n.child=t.child,n.flags|=128,null):(v=d.fallback,m=n.mode,d=Oa({mode:"visible",children:d.children},m,0,null),v=No(v,m,k,null),v.flags|=2,d.return=n,v.return=n,d.sibling=v,n.child=d,(n.mode&1)!==0&&ni(n,t.child,null,k),n.child.memoizedState=Zu(k),n.memoizedState=Ku,v);if((n.mode&1)===0)return ka(t,n,k,null);if(m.data==="$!"){if(d=m.nextSibling&&m.nextSibling.dataset,d)var $=d.dgst;return d=$,v=Error(o(419)),d=Wu(v,d,void 0),ka(t,n,k,d)}if($=(k&t.childLanes)!==0,Xt||$){if(d=wt,d!==null){switch(k&-k){case 4:m=2;break;case 16:m=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:m=32;break;case 536870912:m=268435456;break;default:m=0}m=(m&(d.suspendedLanes|k))!==0?0:m,m!==0&&m!==v.retryLane&&(v.retryLane=m,yr(t,m),Ln(d,t,m,-1))}return hc(),d=Wu(Error(o(421))),ka(t,n,k,d)}return m.data==="$?"?(n.flags|=128,n.child=t.child,n=lv.bind(null,t),m._reactRetry=n,null):(t=v.treeContext,rn=Ar(m.nextSibling),nn=n,rt=!0,Pn=null,t!==null&&(pn[mn++]=mr,pn[mn++]=gr,pn[mn++]=po,mr=t.id,gr=t.overflow,po=n),n=Qu(n,d.children),n.flags|=4096,n)}function Ah(t,n,i){t.lanes|=n;var d=t.alternate;d!==null&&(d.lanes|=n),ju(t.return,n,i)}function qu(t,n,i,d,m){var v=t.memoizedState;v===null?t.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:d,tail:i,tailMode:m}:(v.isBackwards=n,v.rendering=null,v.renderingStartTime=0,v.last=d,v.tail=i,v.tailMode=m)}function $h(t,n,i){var d=n.pendingProps,m=d.revealOrder,v=d.tail;if(At(t,n,d.children,i),d=at.current,(d&2)!==0)d=d&1|2,n.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=n.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Ah(t,i,n);else if(t.tag===19)Ah(t,i,n);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===n)break e;for(;t.sibling===null;){if(t.return===null||t.return===n)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}d&=1}if(et(at,d),(n.mode&1)===0)n.memoizedState=null;else switch(m){case"forwards":for(i=n.child,m=null;i!==null;)t=i.alternate,t!==null&&wa(t)===null&&(m=i),i=i.sibling;i=m,i===null?(m=n.child,n.child=null):(m=i.sibling,i.sibling=null),qu(n,!1,m,i,v);break;case"backwards":for(i=null,m=n.child,n.child=null;m!==null;){if(t=m.alternate,t!==null&&wa(t)===null){n.child=m;break}t=m.sibling,m.sibling=i,i=m,m=t}qu(n,!0,i,null,v);break;case"together":qu(n,!1,null,null,void 0);break;default:n.memoizedState=null}return n.child}function ja(t,n){(n.mode&1)===0&&t!==null&&(t.alternate=null,n.alternate=null,n.flags|=2)}function vr(t,n,i){if(t!==null&&(n.dependencies=t.dependencies),vo|=n.lanes,(i&n.childLanes)===0)return null;if(t!==null&&n.child!==t.child)throw Error(o(153));if(n.child!==null){for(t=n.child,i=Gr(t,t.pendingProps),n.child=i,i.return=n;t.sibling!==null;)t=t.sibling,i=i.sibling=Gr(t,t.pendingProps),i.return=n;i.sibling=null}return n.child}function Zx(t,n,i){switch(n.tag){case 3:Lh(n),ti();break;case 5:qf(n);break;case 1:Yt(n.type)&&ca(n);break;case 4:Mu(n,n.stateNode.containerInfo);break;case 10:var d=n.type._context,m=n.memoizedProps.value;et(ga,d._currentValue),d._currentValue=m;break;case 13:if(d=n.memoizedState,d!==null)return d.dehydrated!==null?(et(at,at.current&1),n.flags|=128,null):(i&n.child.childLanes)!==0?Ih(t,n,i):(et(at,at.current&1),t=vr(t,n,i),t!==null?t.sibling:null);et(at,at.current&1);break;case 19:if(d=(i&n.childLanes)!==0,(t.flags&128)!==0){if(d)return $h(t,n,i);n.flags|=128}if(m=n.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),et(at,at.current),d)break;return null;case 22:case 23:return n.lanes=0,Mh(t,n,i)}return vr(t,n,i)}var Fh,Ju,Oh,Hh;Fh=function(t,n){for(var i=n.child;i!==null;){if(i.tag===5||i.tag===6)t.appendChild(i.stateNode);else if(i.tag!==4&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return;i=i.return}i.sibling.return=i.return,i=i.sibling}},Ju=function(){},Oh=function(t,n,i,d){var m=t.memoizedProps;if(m!==d){t=n.stateNode,yo(Gn.current);var v=null;switch(i){case"input":m=Be(t,m),d=Be(t,d),v=[];break;case"select":m=U({},m,{value:void 0}),d=U({},d,{value:void 0}),v=[];break;case"textarea":m=En(t,m),d=En(t,d),v=[];break;default:typeof m.onClick!="function"&&typeof d.onClick=="function"&&(t.onclick=aa)}jr(i,d);var k;i=null;for(ne in m)if(!d.hasOwnProperty(ne)&&m.hasOwnProperty(ne)&&m[ne]!=null)if(ne==="style"){var $=m[ne];for(k in $)$.hasOwnProperty(k)&&(i||(i={}),i[k]="")}else ne!=="dangerouslySetInnerHTML"&&ne!=="children"&&ne!=="suppressContentEditableWarning"&&ne!=="suppressHydrationWarning"&&ne!=="autoFocus"&&(a.hasOwnProperty(ne)?v||(v=[]):(v=v||[]).push(ne,null));for(ne in d){var X=d[ne];if($=m?.[ne],d.hasOwnProperty(ne)&&X!==$&&(X!=null||$!=null))if(ne==="style")if($){for(k in $)!$.hasOwnProperty(k)||X&&X.hasOwnProperty(k)||(i||(i={}),i[k]="");for(k in X)X.hasOwnProperty(k)&&$[k]!==X[k]&&(i||(i={}),i[k]=X[k])}else i||(v||(v=[]),v.push(ne,i)),i=X;else ne==="dangerouslySetInnerHTML"?(X=X?X.__html:void 0,$=$?$.__html:void 0,X!=null&&$!==X&&(v=v||[]).push(ne,X)):ne==="children"?typeof X!="string"&&typeof X!="number"||(v=v||[]).push(ne,""+X):ne!=="suppressContentEditableWarning"&&ne!=="suppressHydrationWarning"&&(a.hasOwnProperty(ne)?(X!=null&&ne==="onScroll"&&tt("scroll",t),v||$===X||(v=[])):(v=v||[]).push(ne,X))}i&&(v=v||[]).push("style",i);var ne=v;(n.updateQueue=ne)&&(n.flags|=4)}},Hh=function(t,n,i,d){i!==d&&(n.flags|=4)};function es(t,n){if(!rt)switch(t.tailMode){case"hidden":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?t.tail=null:i.sibling=null;break;case"collapsed":i=t.tail;for(var d=null;i!==null;)i.alternate!==null&&(d=i),i=i.sibling;d===null?n||t.tail===null?t.tail=null:t.tail.sibling=null:d.sibling=null}}function Tt(t){var n=t.alternate!==null&&t.alternate.child===t.child,i=0,d=0;if(n)for(var m=t.child;m!==null;)i|=m.lanes|m.childLanes,d|=m.subtreeFlags&14680064,d|=m.flags&14680064,m.return=t,m=m.sibling;else for(m=t.child;m!==null;)i|=m.lanes|m.childLanes,d|=m.subtreeFlags,d|=m.flags,m.return=t,m=m.sibling;return t.subtreeFlags|=d,t.childLanes=i,n}function Qx(t,n,i){var d=n.pendingProps;switch(bu(n),n.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Tt(n),null;case 1:return Yt(n.type)&&ua(),Tt(n),null;case 3:return d=n.stateNode,ii(),nt(Wt),nt(Pt),Lu(),d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null),(t===null||t.child===null)&&(pa(n)?n.flags|=4:t===null||t.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,Pn!==null&&(cc(Pn),Pn=null))),Ju(t,n),Tt(n),null;case 5:Tu(n);var m=yo(Ki.current);if(i=n.type,t!==null&&n.stateNode!=null)Oh(t,n,i,d,m),t.ref!==n.ref&&(n.flags|=512,n.flags|=2097152);else{if(!d){if(n.stateNode===null)throw Error(o(166));return Tt(n),null}if(t=yo(Gn.current),pa(n)){d=n.stateNode,i=n.type;var v=n.memoizedProps;switch(d[Xn]=n,d[Ui]=v,t=(n.mode&1)!==0,i){case"dialog":tt("cancel",d),tt("close",d);break;case"iframe":case"object":case"embed":tt("load",d);break;case"video":case"audio":for(m=0;m<Hi.length;m++)tt(Hi[m],d);break;case"source":tt("error",d);break;case"img":case"image":case"link":tt("error",d),tt("load",d);break;case"details":tt("toggle",d);break;case"input":Ze(d,v),tt("invalid",d);break;case"select":d._wrapperState={wasMultiple:!!v.multiple},tt("invalid",d);break;case"textarea":Hn(d,v),tt("invalid",d)}jr(i,v),m=null;for(var k in v)if(v.hasOwnProperty(k)){var $=v[k];k==="children"?typeof $=="string"?d.textContent!==$&&(v.suppressHydrationWarning!==!0&&sa(d.textContent,$,t),m=["children",$]):typeof $=="number"&&d.textContent!==""+$&&(v.suppressHydrationWarning!==!0&&sa(d.textContent,$,t),m=["children",""+$]):a.hasOwnProperty(k)&&$!=null&&k==="onScroll"&&tt("scroll",d)}switch(i){case"input":ze(d),qt(d,v,!0);break;case"textarea":ze(d),Jt(d);break;case"select":case"option":break;default:typeof v.onClick=="function"&&(d.onclick=aa)}d=m,n.updateQueue=d,d!==null&&(n.flags|=4)}else{k=m.nodeType===9?m:m.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=un(i)),t==="http://www.w3.org/1999/xhtml"?i==="script"?(t=k.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof d.is=="string"?t=k.createElement(i,{is:d.is}):(t=k.createElement(i),i==="select"&&(k=t,d.multiple?k.multiple=!0:d.size&&(k.size=d.size))):t=k.createElementNS(t,i),t[Xn]=n,t[Ui]=d,Fh(t,n,!1,!1),n.stateNode=t;e:{switch(k=Rr(i,d),i){case"dialog":tt("cancel",t),tt("close",t),m=d;break;case"iframe":case"object":case"embed":tt("load",t),m=d;break;case"video":case"audio":for(m=0;m<Hi.length;m++)tt(Hi[m],t);m=d;break;case"source":tt("error",t),m=d;break;case"img":case"image":case"link":tt("error",t),tt("load",t),m=d;break;case"details":tt("toggle",t),m=d;break;case"input":Ze(t,d),m=Be(t,d),tt("invalid",t);break;case"option":m=d;break;case"select":t._wrapperState={wasMultiple:!!d.multiple},m=U({},d,{value:void 0}),tt("invalid",t);break;case"textarea":Hn(t,d),m=En(t,d),tt("invalid",t);break;default:m=d}jr(i,m),$=m;for(v in $)if($.hasOwnProperty(v)){var X=$[v];v==="style"?Bt(t,X):v==="dangerouslySetInnerHTML"?(X=X?X.__html:void 0,X!=null&&Vt(t,X)):v==="children"?typeof X=="string"?(i!=="textarea"||X!=="")&&cn(t,X):typeof X=="number"&&cn(t,""+X):v!=="suppressContentEditableWarning"&&v!=="suppressHydrationWarning"&&v!=="autoFocus"&&(a.hasOwnProperty(v)?X!=null&&v==="onScroll"&&tt("scroll",t):X!=null&&b(t,v,X,k))}switch(i){case"input":ze(t),qt(t,d,!1);break;case"textarea":ze(t),Jt(t);break;case"option":d.value!=null&&t.setAttribute("value",""+ie(d.value));break;case"select":t.multiple=!!d.multiple,v=d.value,v!=null?Ot(t,!!d.multiple,v,!1):d.defaultValue!=null&&Ot(t,!!d.multiple,d.defaultValue,!0);break;default:typeof m.onClick=="function"&&(t.onclick=aa)}switch(i){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break e;case"img":d=!0;break e;default:d=!1}}d&&(n.flags|=4)}n.ref!==null&&(n.flags|=512,n.flags|=2097152)}return Tt(n),null;case 6:if(t&&n.stateNode!=null)Hh(t,n,t.memoizedProps,d);else{if(typeof d!="string"&&n.stateNode===null)throw Error(o(166));if(i=yo(Ki.current),yo(Gn.current),pa(n)){if(d=n.stateNode,i=n.memoizedProps,d[Xn]=n,(v=d.nodeValue!==i)&&(t=nn,t!==null))switch(t.tag){case 3:sa(d.nodeValue,i,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&sa(d.nodeValue,i,(t.mode&1)!==0)}v&&(n.flags|=4)}else d=(i.nodeType===9?i:i.ownerDocument).createTextNode(d),d[Xn]=n,n.stateNode=d}return Tt(n),null;case 13:if(nt(at),d=n.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(rt&&rn!==null&&(n.mode&1)!==0&&(n.flags&128)===0)Uf(),ti(),n.flags|=98560,v=!1;else if(v=pa(n),d!==null&&d.dehydrated!==null){if(t===null){if(!v)throw Error(o(318));if(v=n.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(o(317));v[Xn]=n}else ti(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;Tt(n),v=!1}else Pn!==null&&(cc(Pn),Pn=null),v=!0;if(!v)return n.flags&65536?n:null}return(n.flags&128)!==0?(n.lanes=i,n):(d=d!==null,d!==(t!==null&&t.memoizedState!==null)&&d&&(n.child.flags|=8192,(n.mode&1)!==0&&(t===null||(at.current&1)!==0?xt===0&&(xt=3):hc())),n.updateQueue!==null&&(n.flags|=4),Tt(n),null);case 4:return ii(),Ju(t,n),t===null&&Vi(n.stateNode.containerInfo),Tt(n),null;case 10:return ku(n.type._context),Tt(n),null;case 17:return Yt(n.type)&&ua(),Tt(n),null;case 19:if(nt(at),v=n.memoizedState,v===null)return Tt(n),null;if(d=(n.flags&128)!==0,k=v.rendering,k===null)if(d)es(v,!1);else{if(xt!==0||t!==null&&(t.flags&128)!==0)for(t=n.child;t!==null;){if(k=wa(t),k!==null){for(n.flags|=128,es(v,!1),d=k.updateQueue,d!==null&&(n.updateQueue=d,n.flags|=4),n.subtreeFlags=0,d=i,i=n.child;i!==null;)v=i,t=d,v.flags&=14680066,k=v.alternate,k===null?(v.childLanes=0,v.lanes=t,v.child=null,v.subtreeFlags=0,v.memoizedProps=null,v.memoizedState=null,v.updateQueue=null,v.dependencies=null,v.stateNode=null):(v.childLanes=k.childLanes,v.lanes=k.lanes,v.child=k.child,v.subtreeFlags=0,v.deletions=null,v.memoizedProps=k.memoizedProps,v.memoizedState=k.memoizedState,v.updateQueue=k.updateQueue,v.type=k.type,t=k.dependencies,v.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),i=i.sibling;return et(at,at.current&1|2),n.child}t=t.sibling}v.tail!==null&&Ge()>ui&&(n.flags|=128,d=!0,es(v,!1),n.lanes=4194304)}else{if(!d)if(t=wa(k),t!==null){if(n.flags|=128,d=!0,i=t.updateQueue,i!==null&&(n.updateQueue=i,n.flags|=4),es(v,!0),v.tail===null&&v.tailMode==="hidden"&&!k.alternate&&!rt)return Tt(n),null}else 2*Ge()-v.renderingStartTime>ui&&i!==1073741824&&(n.flags|=128,d=!0,es(v,!1),n.lanes=4194304);v.isBackwards?(k.sibling=n.child,n.child=k):(i=v.last,i!==null?i.sibling=k:n.child=k,v.last=k)}return v.tail!==null?(n=v.tail,v.rendering=n,v.tail=n.sibling,v.renderingStartTime=Ge(),n.sibling=null,i=at.current,et(at,d?i&1|2:i&1),n):(Tt(n),null);case 22:case 23:return fc(),d=n.memoizedState!==null,t!==null&&t.memoizedState!==null!==d&&(n.flags|=8192),d&&(n.mode&1)!==0?(on&1073741824)!==0&&(Tt(n),n.subtreeFlags&6&&(n.flags|=8192)):Tt(n),null;case 24:return null;case 25:return null}throw Error(o(156,n.tag))}function qx(t,n){switch(bu(n),n.tag){case 1:return Yt(n.type)&&ua(),t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 3:return ii(),nt(Wt),nt(Pt),Lu(),t=n.flags,(t&65536)!==0&&(t&128)===0?(n.flags=t&-65537|128,n):null;case 5:return Tu(n),null;case 13:if(nt(at),t=n.memoizedState,t!==null&&t.dehydrated!==null){if(n.alternate===null)throw Error(o(340));ti()}return t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 19:return nt(at),null;case 4:return ii(),null;case 10:return ku(n.type._context),null;case 22:case 23:return fc(),null;case 24:return null;default:return null}}var Ra=!1,Dt=!1,Jx=typeof WeakSet=="function"?WeakSet:Set,ve=null;function ai(t,n){var i=t.ref;if(i!==null)if(typeof i=="function")try{i(null)}catch(d){dt(t,n,d)}else i.current=null}function ec(t,n,i){try{i()}catch(d){dt(t,n,d)}}var Vh=!1;function ev(t,n){if(fu=Ks,t=wf(),ou(t)){if("selectionStart"in t)var i={start:t.selectionStart,end:t.selectionEnd};else e:{i=(i=t.ownerDocument)&&i.defaultView||window;var d=i.getSelection&&i.getSelection();if(d&&d.rangeCount!==0){i=d.anchorNode;var m=d.anchorOffset,v=d.focusNode;d=d.focusOffset;try{i.nodeType,v.nodeType}catch{i=null;break e}var k=0,$=-1,X=-1,ne=0,le=0,ue=t,se=null;t:for(;;){for(var ge;ue!==i||m!==0&&ue.nodeType!==3||($=k+m),ue!==v||d!==0&&ue.nodeType!==3||(X=k+d),ue.nodeType===3&&(k+=ue.nodeValue.length),(ge=ue.firstChild)!==null;)se=ue,ue=ge;for(;;){if(ue===t)break t;if(se===i&&++ne===m&&($=k),se===v&&++le===d&&(X=k),(ge=ue.nextSibling)!==null)break;ue=se,se=ue.parentNode}ue=ge}i=$===-1||X===-1?null:{start:$,end:X}}else i=null}i=i||{start:0,end:0}}else i=null;for(hu={focusedElem:t,selectionRange:i},Ks=!1,ve=n;ve!==null;)if(n=ve,t=n.child,(n.subtreeFlags&1028)!==0&&t!==null)t.return=n,ve=t;else for(;ve!==null;){n=ve;try{var be=n.alternate;if((n.flags&1024)!==0)switch(n.tag){case 0:case 11:case 15:break;case 1:if(be!==null){var Se=be.memoizedProps,ft=be.memoizedState,J=n.stateNode,Z=J.getSnapshotBeforeUpdate(n.elementType===n.type?Se:Mn(n.type,Se),ft);J.__reactInternalSnapshotBeforeUpdate=Z}break;case 3:var ee=n.stateNode.containerInfo;ee.nodeType===1?ee.textContent="":ee.nodeType===9&&ee.documentElement&&ee.removeChild(ee.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(o(163))}}catch(fe){dt(n,n.return,fe)}if(t=n.sibling,t!==null){t.return=n.return,ve=t;break}ve=n.return}return be=Vh,Vh=!1,be}function ts(t,n,i){var d=n.updateQueue;if(d=d!==null?d.lastEffect:null,d!==null){var m=d=d.next;do{if((m.tag&t)===t){var v=m.destroy;m.destroy=void 0,v!==void 0&&ec(n,i,v)}m=m.next}while(m!==d)}}function Pa(t,n){if(n=n.updateQueue,n=n!==null?n.lastEffect:null,n!==null){var i=n=n.next;do{if((i.tag&t)===t){var d=i.create;i.destroy=d()}i=i.next}while(i!==n)}}function tc(t){var n=t.ref;if(n!==null){var i=t.stateNode;t.tag,t=i,typeof n=="function"?n(t):n.current=t}}function Bh(t){var n=t.alternate;n!==null&&(t.alternate=null,Bh(n)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(n=t.stateNode,n!==null&&(delete n[Xn],delete n[Ui],delete n[yu],delete n[Ix],delete n[Ax])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Uh(t){return t.tag===5||t.tag===3||t.tag===4}function Wh(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Uh(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function nc(t,n,i){var d=t.tag;if(d===5||d===6)t=t.stateNode,n?i.nodeType===8?i.parentNode.insertBefore(t,n):i.insertBefore(t,n):(i.nodeType===8?(n=i.parentNode,n.insertBefore(t,i)):(n=i,n.appendChild(t)),i=i._reactRootContainer,i!=null||n.onclick!==null||(n.onclick=aa));else if(d!==4&&(t=t.child,t!==null))for(nc(t,n,i),t=t.sibling;t!==null;)nc(t,n,i),t=t.sibling}function rc(t,n,i){var d=t.tag;if(d===5||d===6)t=t.stateNode,n?i.insertBefore(t,n):i.appendChild(t);else if(d!==4&&(t=t.child,t!==null))for(rc(t,n,i),t=t.sibling;t!==null;)rc(t,n,i),t=t.sibling}var kt=null,Tn=!1;function Br(t,n,i){for(i=i.child;i!==null;)Yh(t,n,i),i=i.sibling}function Yh(t,n,i){if(Ct&&typeof Ct.onCommitFiberUnmount=="function")try{Ct.onCommitFiberUnmount(hn,i)}catch{}switch(i.tag){case 5:Dt||ai(i,n);case 6:var d=kt,m=Tn;kt=null,Br(t,n,i),kt=d,Tn=m,kt!==null&&(Tn?(t=kt,i=i.stateNode,t.nodeType===8?t.parentNode.removeChild(i):t.removeChild(i)):kt.removeChild(i.stateNode));break;case 18:kt!==null&&(Tn?(t=kt,i=i.stateNode,t.nodeType===8?gu(t.parentNode,i):t.nodeType===1&&gu(t,i),Di(t)):gu(kt,i.stateNode));break;case 4:d=kt,m=Tn,kt=i.stateNode.containerInfo,Tn=!0,Br(t,n,i),kt=d,Tn=m;break;case 0:case 11:case 14:case 15:if(!Dt&&(d=i.updateQueue,d!==null&&(d=d.lastEffect,d!==null))){m=d=d.next;do{var v=m,k=v.destroy;v=v.tag,k!==void 0&&((v&2)!==0||(v&4)!==0)&&ec(i,n,k),m=m.next}while(m!==d)}Br(t,n,i);break;case 1:if(!Dt&&(ai(i,n),d=i.stateNode,typeof d.componentWillUnmount=="function"))try{d.props=i.memoizedProps,d.state=i.memoizedState,d.componentWillUnmount()}catch($){dt(i,n,$)}Br(t,n,i);break;case 21:Br(t,n,i);break;case 22:i.mode&1?(Dt=(d=Dt)||i.memoizedState!==null,Br(t,n,i),Dt=d):Br(t,n,i);break;default:Br(t,n,i)}}function Xh(t){var n=t.updateQueue;if(n!==null){t.updateQueue=null;var i=t.stateNode;i===null&&(i=t.stateNode=new Jx),n.forEach(function(d){var m=uv.bind(null,t,d);i.has(d)||(i.add(d),d.then(m,m))})}}function Dn(t,n){var i=n.deletions;if(i!==null)for(var d=0;d<i.length;d++){var m=i[d];try{var v=t,k=n,$=k;e:for(;$!==null;){switch($.tag){case 5:kt=$.stateNode,Tn=!1;break e;case 3:kt=$.stateNode.containerInfo,Tn=!0;break e;case 4:kt=$.stateNode.containerInfo,Tn=!0;break e}$=$.return}if(kt===null)throw Error(o(160));Yh(v,k,m),kt=null,Tn=!1;var X=m.alternate;X!==null&&(X.return=null),m.return=null}catch(ne){dt(m,n,ne)}}if(n.subtreeFlags&12854)for(n=n.child;n!==null;)Gh(n,t),n=n.sibling}function Gh(t,n){var i=t.alternate,d=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Dn(n,t),Zn(t),d&4){try{ts(3,t,t.return),Pa(3,t)}catch(Se){dt(t,t.return,Se)}try{ts(5,t,t.return)}catch(Se){dt(t,t.return,Se)}}break;case 1:Dn(n,t),Zn(t),d&512&&i!==null&&ai(i,i.return);break;case 5:if(Dn(n,t),Zn(t),d&512&&i!==null&&ai(i,i.return),t.flags&32){var m=t.stateNode;try{cn(m,"")}catch(Se){dt(t,t.return,Se)}}if(d&4&&(m=t.stateNode,m!=null)){var v=t.memoizedProps,k=i!==null?i.memoizedProps:v,$=t.type,X=t.updateQueue;if(t.updateQueue=null,X!==null)try{$==="input"&&v.type==="radio"&&v.name!=null&&He(m,v),Rr($,k);var ne=Rr($,v);for(k=0;k<X.length;k+=2){var le=X[k],ue=X[k+1];le==="style"?Bt(m,ue):le==="dangerouslySetInnerHTML"?Vt(m,ue):le==="children"?cn(m,ue):b(m,le,ue,ne)}switch($){case"input":ut(m,v);break;case"textarea":Ht(m,v);break;case"select":var se=m._wrapperState.wasMultiple;m._wrapperState.wasMultiple=!!v.multiple;var ge=v.value;ge!=null?Ot(m,!!v.multiple,ge,!1):se!==!!v.multiple&&(v.defaultValue!=null?Ot(m,!!v.multiple,v.defaultValue,!0):Ot(m,!!v.multiple,v.multiple?[]:"",!1))}m[Ui]=v}catch(Se){dt(t,t.return,Se)}}break;case 6:if(Dn(n,t),Zn(t),d&4){if(t.stateNode===null)throw Error(o(162));m=t.stateNode,v=t.memoizedProps;try{m.nodeValue=v}catch(Se){dt(t,t.return,Se)}}break;case 3:if(Dn(n,t),Zn(t),d&4&&i!==null&&i.memoizedState.isDehydrated)try{Di(n.containerInfo)}catch(Se){dt(t,t.return,Se)}break;case 4:Dn(n,t),Zn(t);break;case 13:Dn(n,t),Zn(t),m=t.child,m.flags&8192&&(v=m.memoizedState!==null,m.stateNode.isHidden=v,!v||m.alternate!==null&&m.alternate.memoizedState!==null||(sc=Ge())),d&4&&Xh(t);break;case 22:if(le=i!==null&&i.memoizedState!==null,t.mode&1?(Dt=(ne=Dt)||le,Dn(n,t),Dt=ne):Dn(n,t),Zn(t),d&8192){if(ne=t.memoizedState!==null,(t.stateNode.isHidden=ne)&&!le&&(t.mode&1)!==0)for(ve=t,le=t.child;le!==null;){for(ue=ve=le;ve!==null;){switch(se=ve,ge=se.child,se.tag){case 0:case 11:case 14:case 15:ts(4,se,se.return);break;case 1:ai(se,se.return);var be=se.stateNode;if(typeof be.componentWillUnmount=="function"){d=se,i=se.return;try{n=d,be.props=n.memoizedProps,be.state=n.memoizedState,be.componentWillUnmount()}catch(Se){dt(d,i,Se)}}break;case 5:ai(se,se.return);break;case 22:if(se.memoizedState!==null){Qh(ue);continue}}ge!==null?(ge.return=se,ve=ge):Qh(ue)}le=le.sibling}e:for(le=null,ue=t;;){if(ue.tag===5){if(le===null){le=ue;try{m=ue.stateNode,ne?(v=m.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none"):($=ue.stateNode,X=ue.memoizedProps.style,k=X!=null&&X.hasOwnProperty("display")?X.display:null,$.style.display=Ao("display",k))}catch(Se){dt(t,t.return,Se)}}}else if(ue.tag===6){if(le===null)try{ue.stateNode.nodeValue=ne?"":ue.memoizedProps}catch(Se){dt(t,t.return,Se)}}else if((ue.tag!==22&&ue.tag!==23||ue.memoizedState===null||ue===t)&&ue.child!==null){ue.child.return=ue,ue=ue.child;continue}if(ue===t)break e;for(;ue.sibling===null;){if(ue.return===null||ue.return===t)break e;le===ue&&(le=null),ue=ue.return}le===ue&&(le=null),ue.sibling.return=ue.return,ue=ue.sibling}}break;case 19:Dn(n,t),Zn(t),d&4&&Xh(t);break;case 21:break;default:Dn(n,t),Zn(t)}}function Zn(t){var n=t.flags;if(n&2){try{e:{for(var i=t.return;i!==null;){if(Uh(i)){var d=i;break e}i=i.return}throw Error(o(160))}switch(d.tag){case 5:var m=d.stateNode;d.flags&32&&(cn(m,""),d.flags&=-33);var v=Wh(t);rc(t,v,m);break;case 3:case 4:var k=d.stateNode.containerInfo,$=Wh(t);nc(t,$,k);break;default:throw Error(o(161))}}catch(X){dt(t,t.return,X)}t.flags&=-3}n&4096&&(t.flags&=-4097)}function tv(t,n,i){ve=t,Kh(t)}function Kh(t,n,i){for(var d=(t.mode&1)!==0;ve!==null;){var m=ve,v=m.child;if(m.tag===22&&d){var k=m.memoizedState!==null||Ra;if(!k){var $=m.alternate,X=$!==null&&$.memoizedState!==null||Dt;$=Ra;var ne=Dt;if(Ra=k,(Dt=X)&&!ne)for(ve=m;ve!==null;)k=ve,X=k.child,k.tag===22&&k.memoizedState!==null?qh(m):X!==null?(X.return=k,ve=X):qh(m);for(;v!==null;)ve=v,Kh(v),v=v.sibling;ve=m,Ra=$,Dt=ne}Zh(t)}else(m.subtreeFlags&8772)!==0&&v!==null?(v.return=m,ve=v):Zh(t)}}function Zh(t){for(;ve!==null;){var n=ve;if((n.flags&8772)!==0){var i=n.alternate;try{if((n.flags&8772)!==0)switch(n.tag){case 0:case 11:case 15:Dt||Pa(5,n);break;case 1:var d=n.stateNode;if(n.flags&4&&!Dt)if(i===null)d.componentDidMount();else{var m=n.elementType===n.type?i.memoizedProps:Mn(n.type,i.memoizedProps);d.componentDidUpdate(m,i.memoizedState,d.__reactInternalSnapshotBeforeUpdate)}var v=n.updateQueue;v!==null&&Qf(n,v,d);break;case 3:var k=n.updateQueue;if(k!==null){if(i=null,n.child!==null)switch(n.child.tag){case 5:i=n.child.stateNode;break;case 1:i=n.child.stateNode}Qf(n,k,i)}break;case 5:var $=n.stateNode;if(i===null&&n.flags&4){i=$;var X=n.memoizedProps;switch(n.type){case"button":case"input":case"select":case"textarea":X.autoFocus&&i.focus();break;case"img":X.src&&(i.src=X.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(n.memoizedState===null){var ne=n.alternate;if(ne!==null){var le=ne.memoizedState;if(le!==null){var ue=le.dehydrated;ue!==null&&Di(ue)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(o(163))}Dt||n.flags&512&&tc(n)}catch(se){dt(n,n.return,se)}}if(n===t){ve=null;break}if(i=n.sibling,i!==null){i.return=n.return,ve=i;break}ve=n.return}}function Qh(t){for(;ve!==null;){var n=ve;if(n===t){ve=null;break}var i=n.sibling;if(i!==null){i.return=n.return,ve=i;break}ve=n.return}}function qh(t){for(;ve!==null;){var n=ve;try{switch(n.tag){case 0:case 11:case 15:var i=n.return;try{Pa(4,n)}catch(X){dt(n,i,X)}break;case 1:var d=n.stateNode;if(typeof d.componentDidMount=="function"){var m=n.return;try{d.componentDidMount()}catch(X){dt(n,m,X)}}var v=n.return;try{tc(n)}catch(X){dt(n,v,X)}break;case 5:var k=n.return;try{tc(n)}catch(X){dt(n,k,X)}}}catch(X){dt(n,n.return,X)}if(n===t){ve=null;break}var $=n.sibling;if($!==null){$.return=n.return,ve=$;break}ve=n.return}}var nv=Math.ceil,Ma=j.ReactCurrentDispatcher,oc=j.ReactCurrentOwner,xn=j.ReactCurrentBatchConfig,We=0,wt=null,pt=null,jt=0,on=0,li=$r(0),xt=0,ns=null,vo=0,Ta=0,ic=0,rs=null,Gt=null,sc=0,ui=1/0,wr=null,Da=!1,ac=null,Ur=null,La=!1,Wr=null,za=0,os=0,lc=null,Ia=-1,Aa=0;function $t(){return(We&6)!==0?Ge():Ia!==-1?Ia:Ia=Ge()}function Yr(t){return(t.mode&1)===0?1:(We&2)!==0&&jt!==0?jt&-jt:Fx.transition!==null?(Aa===0&&(Aa=Vo()),Aa):(t=Qe,t!==0||(t=window.event,t=t===void 0?16:Jd(t.type)),t)}function Ln(t,n,i,d){if(50<os)throw os=0,lc=null,Error(o(185));co(t,i,d),((We&2)===0||t!==wt)&&(t===wt&&((We&2)===0&&(Ta|=i),xt===4&&Xr(t,jt)),Kt(t,d),i===1&&We===0&&(n.mode&1)===0&&(ui=Ge()+500,da&&Or()))}function Kt(t,n){var i=t.callbackNode;Bl(t,n);var d=Ho(t,t===wt?jt:0);if(d===0)i!==null&&ht(i),t.callbackNode=null,t.callbackPriority=0;else if(n=d&-d,t.callbackPriority!==n){if(i!=null&&ht(i),n===1)t.tag===0?$x(ep.bind(null,t)):Ff(ep.bind(null,t)),Lx(function(){(We&6)===0&&Or()}),i=null;else{switch(Wd(d)){case 1:i=Ut;break;case 4:i=It;break;case 16:i=Un;break;case 536870912:i=fn;break;default:i=Un}i=lp(i,Jh.bind(null,t))}t.callbackPriority=n,t.callbackNode=i}}function Jh(t,n){if(Ia=-1,Aa=0,(We&6)!==0)throw Error(o(327));var i=t.callbackNode;if(ci()&&t.callbackNode!==i)return null;var d=Ho(t,t===wt?jt:0);if(d===0)return null;if((d&30)!==0||(d&t.expiredLanes)!==0||n)n=$a(t,d);else{n=d;var m=We;We|=2;var v=np();(wt!==t||jt!==n)&&(wr=null,ui=Ge()+500,bo(t,n));do try{iv();break}catch($){tp(t,$)}while(!0);Cu(),Ma.current=v,We=m,pt!==null?n=0:(wt=null,jt=0,n=xt)}if(n!==0){if(n===2&&(m=ki(t),m!==0&&(d=m,n=uc(t,m))),n===1)throw i=ns,bo(t,0),Xr(t,d),Kt(t,Ge()),i;if(n===6)Xr(t,d);else{if(m=t.current.alternate,(d&30)===0&&!rv(m)&&(n=$a(t,d),n===2&&(v=ki(t),v!==0&&(d=v,n=uc(t,v))),n===1))throw i=ns,bo(t,0),Xr(t,d),Kt(t,Ge()),i;switch(t.finishedWork=m,t.finishedLanes=d,n){case 0:case 1:throw Error(o(345));case 2:_o(t,Gt,wr);break;case 3:if(Xr(t,d),(d&130023424)===d&&(n=sc+500-Ge(),10<n)){if(Ho(t,0)!==0)break;if(m=t.suspendedLanes,(m&d)!==d){$t(),t.pingedLanes|=t.suspendedLanes&m;break}t.timeoutHandle=mu(_o.bind(null,t,Gt,wr),n);break}_o(t,Gt,wr);break;case 4:if(Xr(t,d),(d&4194240)===d)break;for(n=t.eventTimes,m=-1;0<d;){var k=31-Ke(d);v=1<<k,k=n[k],k>m&&(m=k),d&=~v}if(d=m,d=Ge()-d,d=(120>d?120:480>d?480:1080>d?1080:1920>d?1920:3e3>d?3e3:4320>d?4320:1960*nv(d/1960))-d,10<d){t.timeoutHandle=mu(_o.bind(null,t,Gt,wr),d);break}_o(t,Gt,wr);break;case 5:_o(t,Gt,wr);break;default:throw Error(o(329))}}}return Kt(t,Ge()),t.callbackNode===i?Jh.bind(null,t):null}function uc(t,n){var i=rs;return t.current.memoizedState.isDehydrated&&(bo(t,n).flags|=256),t=$a(t,n),t!==2&&(n=Gt,Gt=i,n!==null&&cc(n)),t}function cc(t){Gt===null?Gt=t:Gt.push.apply(Gt,t)}function rv(t){for(var n=t;;){if(n.flags&16384){var i=n.updateQueue;if(i!==null&&(i=i.stores,i!==null))for(var d=0;d<i.length;d++){var m=i[d],v=m.getSnapshot;m=m.value;try{if(!Rn(v(),m))return!1}catch{return!1}}}if(i=n.child,n.subtreeFlags&16384&&i!==null)i.return=n,n=i;else{if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function Xr(t,n){for(n&=~ic,n&=~Ta,t.suspendedLanes|=n,t.pingedLanes&=~n,t=t.expirationTimes;0<n;){var i=31-Ke(n),d=1<<i;t[i]=-1,n&=~d}}function ep(t){if((We&6)!==0)throw Error(o(327));ci();var n=Ho(t,0);if((n&1)===0)return Kt(t,Ge()),null;var i=$a(t,n);if(t.tag!==0&&i===2){var d=ki(t);d!==0&&(n=d,i=uc(t,d))}if(i===1)throw i=ns,bo(t,0),Xr(t,n),Kt(t,Ge()),i;if(i===6)throw Error(o(345));return t.finishedWork=t.current.alternate,t.finishedLanes=n,_o(t,Gt,wr),Kt(t,Ge()),null}function dc(t,n){var i=We;We|=1;try{return t(n)}finally{We=i,We===0&&(ui=Ge()+500,da&&Or())}}function wo(t){Wr!==null&&Wr.tag===0&&(We&6)===0&&ci();var n=We;We|=1;var i=xn.transition,d=Qe;try{if(xn.transition=null,Qe=1,t)return t()}finally{Qe=d,xn.transition=i,We=n,(We&6)===0&&Or()}}function fc(){on=li.current,nt(li)}function bo(t,n){t.finishedWork=null,t.finishedLanes=0;var i=t.timeoutHandle;if(i!==-1&&(t.timeoutHandle=-1,Dx(i)),pt!==null)for(i=pt.return;i!==null;){var d=i;switch(bu(d),d.tag){case 1:d=d.type.childContextTypes,d!=null&&ua();break;case 3:ii(),nt(Wt),nt(Pt),Lu();break;case 5:Tu(d);break;case 4:ii();break;case 13:nt(at);break;case 19:nt(at);break;case 10:ku(d.type._context);break;case 22:case 23:fc()}i=i.return}if(wt=t,pt=t=Gr(t.current,null),jt=on=n,xt=0,ns=null,ic=Ta=vo=0,Gt=rs=null,go!==null){for(n=0;n<go.length;n++)if(i=go[n],d=i.interleaved,d!==null){i.interleaved=null;var m=d.next,v=i.pending;if(v!==null){var k=v.next;v.next=m,d.next=k}i.pending=d}go=null}return t}function tp(t,n){do{var i=pt;try{if(Cu(),ba.current=Ea,_a){for(var d=lt.memoizedState;d!==null;){var m=d.queue;m!==null&&(m.pending=null),d=d.next}_a=!1}if(xo=0,vt=yt=lt=null,Zi=!1,Qi=0,oc.current=null,i===null||i.return===null){xt=1,ns=n,pt=null;break}e:{var v=t,k=i.return,$=i,X=n;if(n=jt,$.flags|=32768,X!==null&&typeof X=="object"&&typeof X.then=="function"){var ne=X,le=$,ue=le.tag;if((le.mode&1)===0&&(ue===0||ue===11||ue===15)){var se=le.alternate;se?(le.updateQueue=se.updateQueue,le.memoizedState=se.memoizedState,le.lanes=se.lanes):(le.updateQueue=null,le.memoizedState=null)}var ge=Ch(k);if(ge!==null){ge.flags&=-257,kh(ge,k,$,v,n),ge.mode&1&&Eh(v,ne,n),n=ge,X=ne;var be=n.updateQueue;if(be===null){var Se=new Set;Se.add(X),n.updateQueue=Se}else be.add(X);break e}else{if((n&1)===0){Eh(v,ne,n),hc();break e}X=Error(o(426))}}else if(rt&&$.mode&1){var ft=Ch(k);if(ft!==null){(ft.flags&65536)===0&&(ft.flags|=256),kh(ft,k,$,v,n),Su(si(X,$));break e}}v=X=si(X,$),xt!==4&&(xt=2),rs===null?rs=[v]:rs.push(v),v=k;do{switch(v.tag){case 3:v.flags|=65536,n&=-n,v.lanes|=n;var J=Nh(v,X,n);Zf(v,J);break e;case 1:$=X;var Z=v.type,ee=v.stateNode;if((v.flags&128)===0&&(typeof Z.getDerivedStateFromError=="function"||ee!==null&&typeof ee.componentDidCatch=="function"&&(Ur===null||!Ur.has(ee)))){v.flags|=65536,n&=-n,v.lanes|=n;var fe=Sh(v,$,n);Zf(v,fe);break e}}v=v.return}while(v!==null)}op(i)}catch(ke){n=ke,pt===i&&i!==null&&(pt=i=i.return);continue}break}while(!0)}function np(){var t=Ma.current;return Ma.current=Ea,t===null?Ea:t}function hc(){(xt===0||xt===3||xt===2)&&(xt=4),wt===null||(vo&268435455)===0&&(Ta&268435455)===0||Xr(wt,jt)}function $a(t,n){var i=We;We|=2;var d=np();(wt!==t||jt!==n)&&(wr=null,bo(t,n));do try{ov();break}catch(m){tp(t,m)}while(!0);if(Cu(),We=i,Ma.current=d,pt!==null)throw Error(o(261));return wt=null,jt=0,xt}function ov(){for(;pt!==null;)rp(pt)}function iv(){for(;pt!==null&&!Ye();)rp(pt)}function rp(t){var n=ap(t.alternate,t,on);t.memoizedProps=t.pendingProps,n===null?op(t):pt=n,oc.current=null}function op(t){var n=t;do{var i=n.alternate;if(t=n.return,(n.flags&32768)===0){if(i=Qx(i,n,on),i!==null){pt=i;return}}else{if(i=qx(i,n),i!==null){i.flags&=32767,pt=i;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{xt=6,pt=null;return}}if(n=n.sibling,n!==null){pt=n;return}pt=n=t}while(n!==null);xt===0&&(xt=5)}function _o(t,n,i){var d=Qe,m=xn.transition;try{xn.transition=null,Qe=1,sv(t,n,i,d)}finally{xn.transition=m,Qe=d}return null}function sv(t,n,i,d){do ci();while(Wr!==null);if((We&6)!==0)throw Error(o(327));i=t.finishedWork;var m=t.finishedLanes;if(i===null)return null;if(t.finishedWork=null,t.finishedLanes=0,i===t.current)throw Error(o(177));t.callbackNode=null,t.callbackPriority=0;var v=i.lanes|i.childLanes;if(Ys(t,v),t===wt&&(pt=wt=null,jt=0),(i.subtreeFlags&2064)===0&&(i.flags&2064)===0||La||(La=!0,lp(Un,function(){return ci(),null})),v=(i.flags&15990)!==0,(i.subtreeFlags&15990)!==0||v){v=xn.transition,xn.transition=null;var k=Qe;Qe=1;var $=We;We|=4,oc.current=null,ev(t,i),Gh(i,t),Cx(hu),Ks=!!fu,hu=fu=null,t.current=i,tv(i),Et(),We=$,Qe=k,xn.transition=v}else t.current=i;if(La&&(La=!1,Wr=t,za=m),v=t.pendingLanes,v===0&&(Ur=null),Oe(i.stateNode),Kt(t,Ge()),n!==null)for(d=t.onRecoverableError,i=0;i<n.length;i++)m=n[i],d(m.value,{componentStack:m.stack,digest:m.digest});if(Da)throw Da=!1,t=ac,ac=null,t;return(za&1)!==0&&t.tag!==0&&ci(),v=t.pendingLanes,(v&1)!==0?t===lc?os++:(os=0,lc=t):os=0,Or(),null}function ci(){if(Wr!==null){var t=Wd(za),n=xn.transition,i=Qe;try{if(xn.transition=null,Qe=16>t?16:t,Wr===null)var d=!1;else{if(t=Wr,Wr=null,za=0,(We&6)!==0)throw Error(o(331));var m=We;for(We|=4,ve=t.current;ve!==null;){var v=ve,k=v.child;if((ve.flags&16)!==0){var $=v.deletions;if($!==null){for(var X=0;X<$.length;X++){var ne=$[X];for(ve=ne;ve!==null;){var le=ve;switch(le.tag){case 0:case 11:case 15:ts(8,le,v)}var ue=le.child;if(ue!==null)ue.return=le,ve=ue;else for(;ve!==null;){le=ve;var se=le.sibling,ge=le.return;if(Bh(le),le===ne){ve=null;break}if(se!==null){se.return=ge,ve=se;break}ve=ge}}}var be=v.alternate;if(be!==null){var Se=be.child;if(Se!==null){be.child=null;do{var ft=Se.sibling;Se.sibling=null,Se=ft}while(Se!==null)}}ve=v}}if((v.subtreeFlags&2064)!==0&&k!==null)k.return=v,ve=k;else e:for(;ve!==null;){if(v=ve,(v.flags&2048)!==0)switch(v.tag){case 0:case 11:case 15:ts(9,v,v.return)}var J=v.sibling;if(J!==null){J.return=v.return,ve=J;break e}ve=v.return}}var Z=t.current;for(ve=Z;ve!==null;){k=ve;var ee=k.child;if((k.subtreeFlags&2064)!==0&&ee!==null)ee.return=k,ve=ee;else e:for(k=Z;ve!==null;){if($=ve,($.flags&2048)!==0)try{switch($.tag){case 0:case 11:case 15:Pa(9,$)}}catch(ke){dt($,$.return,ke)}if($===k){ve=null;break e}var fe=$.sibling;if(fe!==null){fe.return=$.return,ve=fe;break e}ve=$.return}}if(We=m,Or(),Ct&&typeof Ct.onPostCommitFiberRoot=="function")try{Ct.onPostCommitFiberRoot(hn,t)}catch{}d=!0}return d}finally{Qe=i,xn.transition=n}}return!1}function ip(t,n,i){n=si(i,n),n=Nh(t,n,1),t=Vr(t,n,1),n=$t(),t!==null&&(co(t,1,n),Kt(t,n))}function dt(t,n,i){if(t.tag===3)ip(t,t,i);else for(;n!==null;){if(n.tag===3){ip(n,t,i);break}else if(n.tag===1){var d=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(Ur===null||!Ur.has(d))){t=si(i,t),t=Sh(n,t,1),n=Vr(n,t,1),t=$t(),n!==null&&(co(n,1,t),Kt(n,t));break}}n=n.return}}function av(t,n,i){var d=t.pingCache;d!==null&&d.delete(n),n=$t(),t.pingedLanes|=t.suspendedLanes&i,wt===t&&(jt&i)===i&&(xt===4||xt===3&&(jt&130023424)===jt&&500>Ge()-sc?bo(t,0):ic|=i),Kt(t,n)}function sp(t,n){n===0&&((t.mode&1)===0?n=1:(n=fr,fr<<=1,(fr&130023424)===0&&(fr=4194304)));var i=$t();t=yr(t,n),t!==null&&(co(t,n,i),Kt(t,i))}function lv(t){var n=t.memoizedState,i=0;n!==null&&(i=n.retryLane),sp(t,i)}function uv(t,n){var i=0;switch(t.tag){case 13:var d=t.stateNode,m=t.memoizedState;m!==null&&(i=m.retryLane);break;case 19:d=t.stateNode;break;default:throw Error(o(314))}d!==null&&d.delete(n),sp(t,i)}var ap;ap=function(t,n,i){if(t!==null)if(t.memoizedProps!==n.pendingProps||Wt.current)Xt=!0;else{if((t.lanes&i)===0&&(n.flags&128)===0)return Xt=!1,Zx(t,n,i);Xt=(t.flags&131072)!==0}else Xt=!1,rt&&(n.flags&1048576)!==0&&Of(n,ha,n.index);switch(n.lanes=0,n.tag){case 2:var d=n.type;ja(t,n),t=n.pendingProps;var m=qo(n,Pt.current);oi(n,i),m=Au(null,n,d,t,m,i);var v=$u();return n.flags|=1,typeof m=="object"&&m!==null&&typeof m.render=="function"&&m.$$typeof===void 0?(n.tag=1,n.memoizedState=null,n.updateQueue=null,Yt(d)?(v=!0,ca(n)):v=!1,n.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,Pu(n),m.updater=Ca,n.stateNode=m,m._reactInternals=n,Uu(n,d,t,i),n=Gu(null,n,d,!0,v,i)):(n.tag=0,rt&&v&&wu(n),At(null,n,m,i),n=n.child),n;case 16:d=n.elementType;e:{switch(ja(t,n),t=n.pendingProps,m=d._init,d=m(d._payload),n.type=d,m=n.tag=dv(d),t=Mn(d,t),m){case 0:n=Xu(null,n,d,t,i);break e;case 1:n=Dh(null,n,d,t,i);break e;case 11:n=jh(null,n,d,t,i);break e;case 14:n=Rh(null,n,d,Mn(d.type,t),i);break e}throw Error(o(306,d,""))}return n;case 0:return d=n.type,m=n.pendingProps,m=n.elementType===d?m:Mn(d,m),Xu(t,n,d,m,i);case 1:return d=n.type,m=n.pendingProps,m=n.elementType===d?m:Mn(d,m),Dh(t,n,d,m,i);case 3:e:{if(Lh(n),t===null)throw Error(o(387));d=n.pendingProps,v=n.memoizedState,m=v.element,Kf(t,n),va(n,d,null,i);var k=n.memoizedState;if(d=k.element,v.isDehydrated)if(v={element:d,isDehydrated:!1,cache:k.cache,pendingSuspenseBoundaries:k.pendingSuspenseBoundaries,transitions:k.transitions},n.updateQueue.baseState=v,n.memoizedState=v,n.flags&256){m=si(Error(o(423)),n),n=zh(t,n,d,i,m);break e}else if(d!==m){m=si(Error(o(424)),n),n=zh(t,n,d,i,m);break e}else for(rn=Ar(n.stateNode.containerInfo.firstChild),nn=n,rt=!0,Pn=null,i=Xf(n,null,d,i),n.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling;else{if(ti(),d===m){n=vr(t,n,i);break e}At(t,n,d,i)}n=n.child}return n;case 5:return qf(n),t===null&&Nu(n),d=n.type,m=n.pendingProps,v=t!==null?t.memoizedProps:null,k=m.children,pu(d,m)?k=null:v!==null&&pu(d,v)&&(n.flags|=32),Th(t,n),At(t,n,k,i),n.child;case 6:return t===null&&Nu(n),null;case 13:return Ih(t,n,i);case 4:return Mu(n,n.stateNode.containerInfo),d=n.pendingProps,t===null?n.child=ni(n,null,d,i):At(t,n,d,i),n.child;case 11:return d=n.type,m=n.pendingProps,m=n.elementType===d?m:Mn(d,m),jh(t,n,d,m,i);case 7:return At(t,n,n.pendingProps,i),n.child;case 8:return At(t,n,n.pendingProps.children,i),n.child;case 12:return At(t,n,n.pendingProps.children,i),n.child;case 10:e:{if(d=n.type._context,m=n.pendingProps,v=n.memoizedProps,k=m.value,et(ga,d._currentValue),d._currentValue=k,v!==null)if(Rn(v.value,k)){if(v.children===m.children&&!Wt.current){n=vr(t,n,i);break e}}else for(v=n.child,v!==null&&(v.return=n);v!==null;){var $=v.dependencies;if($!==null){k=v.child;for(var X=$.firstContext;X!==null;){if(X.context===d){if(v.tag===1){X=xr(-1,i&-i),X.tag=2;var ne=v.updateQueue;if(ne!==null){ne=ne.shared;var le=ne.pending;le===null?X.next=X:(X.next=le.next,le.next=X),ne.pending=X}}v.lanes|=i,X=v.alternate,X!==null&&(X.lanes|=i),ju(v.return,i,n),$.lanes|=i;break}X=X.next}}else if(v.tag===10)k=v.type===n.type?null:v.child;else if(v.tag===18){if(k=v.return,k===null)throw Error(o(341));k.lanes|=i,$=k.alternate,$!==null&&($.lanes|=i),ju(k,i,n),k=v.sibling}else k=v.child;if(k!==null)k.return=v;else for(k=v;k!==null;){if(k===n){k=null;break}if(v=k.sibling,v!==null){v.return=k.return,k=v;break}k=k.return}v=k}At(t,n,m.children,i),n=n.child}return n;case 9:return m=n.type,d=n.pendingProps.children,oi(n,i),m=gn(m),d=d(m),n.flags|=1,At(t,n,d,i),n.child;case 14:return d=n.type,m=Mn(d,n.pendingProps),m=Mn(d.type,m),Rh(t,n,d,m,i);case 15:return Ph(t,n,n.type,n.pendingProps,i);case 17:return d=n.type,m=n.pendingProps,m=n.elementType===d?m:Mn(d,m),ja(t,n),n.tag=1,Yt(d)?(t=!0,ca(n)):t=!1,oi(n,i),bh(n,d,m),Uu(n,d,m,i),Gu(null,n,d,!0,t,i);case 19:return $h(t,n,i);case 22:return Mh(t,n,i)}throw Error(o(156,n.tag))};function lp(t,n){return st(t,n)}function cv(t,n,i,d){this.tag=t,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function vn(t,n,i,d){return new cv(t,n,i,d)}function pc(t){return t=t.prototype,!(!t||!t.isReactComponent)}function dv(t){if(typeof t=="function")return pc(t)?1:0;if(t!=null){if(t=t.$$typeof,t===H)return 11;if(t===z)return 14}return 2}function Gr(t,n){var i=t.alternate;return i===null?(i=vn(t.tag,n,t.key,t.mode),i.elementType=t.elementType,i.type=t.type,i.stateNode=t.stateNode,i.alternate=t,t.alternate=i):(i.pendingProps=n,i.type=t.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=t.flags&14680064,i.childLanes=t.childLanes,i.lanes=t.lanes,i.child=t.child,i.memoizedProps=t.memoizedProps,i.memoizedState=t.memoizedState,i.updateQueue=t.updateQueue,n=t.dependencies,i.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},i.sibling=t.sibling,i.index=t.index,i.ref=t.ref,i}function Fa(t,n,i,d,m,v){var k=2;if(d=t,typeof t=="function")pc(t)&&(k=1);else if(typeof t=="string")k=5;else e:switch(t){case P:return No(i.children,m,v,n);case O:k=8,m|=8;break;case G:return t=vn(12,i,n,m|2),t.elementType=G,t.lanes=v,t;case W:return t=vn(13,i,n,m),t.elementType=W,t.lanes=v,t;case M:return t=vn(19,i,n,m),t.elementType=M,t.lanes=v,t;case Q:return Oa(i,m,v,n);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case D:k=10;break e;case F:k=9;break e;case H:k=11;break e;case z:k=14;break e;case Y:k=16,d=null;break e}throw Error(o(130,t==null?t:typeof t,""))}return n=vn(k,i,n,m),n.elementType=t,n.type=d,n.lanes=v,n}function No(t,n,i,d){return t=vn(7,t,d,n),t.lanes=i,t}function Oa(t,n,i,d){return t=vn(22,t,d,n),t.elementType=Q,t.lanes=i,t.stateNode={isHidden:!1},t}function mc(t,n,i){return t=vn(6,t,null,n),t.lanes=i,t}function gc(t,n,i){return n=vn(4,t.children!==null?t.children:[],t.key,n),n.lanes=i,n.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},n}function fv(t,n,i,d,m){this.tag=n,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ji(0),this.expirationTimes=ji(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ji(0),this.identifierPrefix=d,this.onRecoverableError=m,this.mutableSourceEagerHydrationData=null}function yc(t,n,i,d,m,v,k,$,X){return t=new fv(t,n,i,$,X),n===1?(n=1,v===!0&&(n|=8)):n=0,v=vn(3,null,null,n),t.current=v,v.stateNode=t,v.memoizedState={element:d,isDehydrated:i,cache:null,transitions:null,pendingSuspenseBoundaries:null},Pu(v),t}function hv(t,n,i){var d=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:T,key:d==null?null:""+d,children:t,containerInfo:n,implementation:i}}function up(t){if(!t)return Fr;t=t._reactInternals;e:{if(we(t)!==t||t.tag!==1)throw Error(o(170));var n=t;do{switch(n.tag){case 3:n=n.stateNode.context;break e;case 1:if(Yt(n.type)){n=n.stateNode.__reactInternalMemoizedMergedChildContext;break e}}n=n.return}while(n!==null);throw Error(o(171))}if(t.tag===1){var i=t.type;if(Yt(i))return Af(t,i,n)}return n}function cp(t,n,i,d,m,v,k,$,X){return t=yc(i,d,!0,t,m,v,k,$,X),t.context=up(null),i=t.current,d=$t(),m=Yr(i),v=xr(d,m),v.callback=n??null,Vr(i,v,m),t.current.lanes=m,co(t,m,d),Kt(t,d),t}function Ha(t,n,i,d){var m=n.current,v=$t(),k=Yr(m);return i=up(i),n.context===null?n.context=i:n.pendingContext=i,n=xr(v,k),n.payload={element:t},d=d===void 0?null:d,d!==null&&(n.callback=d),t=Vr(m,n,k),t!==null&&(Ln(t,m,k,v),xa(t,m,k)),k}function Va(t){return t=t.current,t.child?(t.child.tag===5,t.child.stateNode):null}function dp(t,n){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var i=t.retryLane;t.retryLane=i!==0&&i<n?i:n}}function xc(t,n){dp(t,n),(t=t.alternate)&&dp(t,n)}function pv(){return null}var fp=typeof reportError=="function"?reportError:function(t){console.error(t)};function vc(t){this._internalRoot=t}Ba.prototype.render=vc.prototype.render=function(t){var n=this._internalRoot;if(n===null)throw Error(o(409));Ha(t,n,null,null)},Ba.prototype.unmount=vc.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var n=t.containerInfo;wo(function(){Ha(null,t,null,null)}),n[hr]=null}};function Ba(t){this._internalRoot=t}Ba.prototype.unstable_scheduleHydration=function(t){if(t){var n=Gd();t={blockedOn:null,target:t,priority:n};for(var i=0;i<Lr.length&&n!==0&&n<Lr[i].priority;i++);Lr.splice(i,0,t),i===0&&Qd(t)}};function wc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Ua(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function hp(){}function mv(t,n,i,d,m){if(m){if(typeof d=="function"){var v=d;d=function(){var ne=Va(k);v.call(ne)}}var k=cp(n,d,t,0,null,!1,!1,"",hp);return t._reactRootContainer=k,t[hr]=k.current,Vi(t.nodeType===8?t.parentNode:t),wo(),k}for(;m=t.lastChild;)t.removeChild(m);if(typeof d=="function"){var $=d;d=function(){var ne=Va(X);$.call(ne)}}var X=yc(t,0,!1,null,null,!1,!1,"",hp);return t._reactRootContainer=X,t[hr]=X.current,Vi(t.nodeType===8?t.parentNode:t),wo(function(){Ha(n,X,i,d)}),X}function Wa(t,n,i,d,m){var v=i._reactRootContainer;if(v){var k=v;if(typeof m=="function"){var $=m;m=function(){var X=Va(k);$.call(X)}}Ha(n,k,t,m)}else k=mv(i,n,t,m,d);return Va(k)}Yd=function(t){switch(t.tag){case 3:var n=t.stateNode;if(n.current.memoizedState.isDehydrated){var i=Yn(n.pendingLanes);i!==0&&(Ul(n,i|1),Kt(n,Ge()),(We&6)===0&&(ui=Ge()+500,Or()))}break;case 13:wo(function(){var d=yr(t,1);if(d!==null){var m=$t();Ln(d,t,1,m)}}),xc(t,1)}},Wl=function(t){if(t.tag===13){var n=yr(t,134217728);if(n!==null){var i=$t();Ln(n,t,134217728,i)}xc(t,134217728)}},Xd=function(t){if(t.tag===13){var n=Yr(t),i=yr(t,n);if(i!==null){var d=$t();Ln(i,t,n,d)}xc(t,n)}},Gd=function(){return Qe},Kd=function(t,n){var i=Qe;try{return Qe=t,n()}finally{Qe=i}},Vn=function(t,n,i){switch(n){case"input":if(ut(t,i),n=i.name,i.type==="radio"&&n!=null){for(i=t;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll("input[name="+JSON.stringify(""+n)+'][type="radio"]'),n=0;n<i.length;n++){var d=i[n];if(d!==t&&d.form===t.form){var m=la(d);if(!m)throw Error(o(90));ye(d),ut(d,m)}}}break;case"textarea":Ht(t,i);break;case"select":n=i.value,n!=null&&Ot(t,!!i.multiple,n,!1)}},ao=dc,lr=wo;var gv={usingClientEntryPoint:!1,Events:[Wi,Zo,la,so,Oo,dc]},is={findFiberByHostInstance:fo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},yv={bundleType:is.bundleType,version:is.version,rendererPackageName:is.rendererPackageName,rendererConfig:is.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:j.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Fe(t),t===null?null:t.stateNode},findFiberByHostInstance:is.findFiberByHostInstance||pv,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ya=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ya.isDisabled&&Ya.supportsFiber)try{hn=Ya.inject(yv),Ct=Ya}catch{}}return Zt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=gv,Zt.createPortal=function(t,n){var i=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!wc(n))throw Error(o(200));return hv(t,n,null,i)},Zt.createRoot=function(t,n){if(!wc(t))throw Error(o(299));var i=!1,d="",m=fp;return n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(d=n.identifierPrefix),n.onRecoverableError!==void 0&&(m=n.onRecoverableError)),n=yc(t,1,!1,null,null,i,!1,d,m),t[hr]=n.current,Vi(t.nodeType===8?t.parentNode:t),new vc(n)},Zt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var n=t._reactInternals;if(n===void 0)throw typeof t.render=="function"?Error(o(188)):(t=Object.keys(t).join(","),Error(o(268,t)));return t=Fe(n),t=t===null?null:t.stateNode,t},Zt.flushSync=function(t){return wo(t)},Zt.hydrate=function(t,n,i){if(!Ua(n))throw Error(o(200));return Wa(null,t,n,!0,i)},Zt.hydrateRoot=function(t,n,i){if(!wc(t))throw Error(o(405));var d=i!=null&&i.hydratedSources||null,m=!1,v="",k=fp;if(i!=null&&(i.unstable_strictMode===!0&&(m=!0),i.identifierPrefix!==void 0&&(v=i.identifierPrefix),i.onRecoverableError!==void 0&&(k=i.onRecoverableError)),n=cp(n,null,t,1,i??null,m,!1,v,k),t[hr]=n.current,Vi(t),d)for(t=0;t<d.length;t++)i=d[t],m=i._getVersion,m=m(i._source),n.mutableSourceEagerHydrationData==null?n.mutableSourceEagerHydrationData=[i,m]:n.mutableSourceEagerHydrationData.push(i,m);return new Ba(n)},Zt.render=function(t,n,i){if(!Ua(n))throw Error(o(200));return Wa(null,t,n,!1,i)},Zt.unmountComponentAtNode=function(t){if(!Ua(t))throw Error(o(40));return t._reactRootContainer?(wo(function(){Wa(null,null,t,!1,function(){t._reactRootContainer=null,t[hr]=null})}),!0):!1},Zt.unstable_batchedUpdates=dc,Zt.unstable_renderSubtreeIntoContainer=function(t,n,i,d){if(!Ua(i))throw Error(o(200));if(t==null||t._reactInternals===void 0)throw Error(o(38));return Wa(t,n,i,!1,d)},Zt.version="18.3.1-next-f1338f8080-20240426",Zt}var bp;function p0(){if(bp)return Nc.exports;bp=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(r){console.error(r)}}return e(),Nc.exports=Cv(),Nc.exports}var _p;function kv(){if(_p)return Xa;_p=1;var e=p0();return Xa.createRoot=e.createRoot,Xa.hydrateRoot=e.hydrateRoot,Xa}var jv=kv();var m0=e=>{throw TypeError(e)},Rv=(e,r,o)=>r.has(e)||m0("Cannot "+o),Cc=(e,r,o)=>(Rv(e,r,"read from private field"),o?o.call(e):r.get(e)),Pv=(e,r,o)=>r.has(e)?m0("Cannot add the same private member more than once"):r instanceof WeakSet?r.add(e):r.set(e,o),Np="popstate";function Mv(e={}){function r(s,a){let{pathname:l,search:c,hash:f}=s.location;return vs("",{pathname:l,search:c,hash:f},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function o(s,a){return typeof a=="string"?a:er(a)}return Dv(r,o,null,e)}function $e(e,r){if(e===!1||e===null||typeof e>"u")throw new Error(r)}function mt(e,r){if(!e){typeof console<"u"&&console.warn(r);try{throw new Error(r)}catch{}}}function Tv(){return Math.random().toString(36).substring(2,10)}function Sp(e,r){return{usr:e.state,key:e.key,idx:r}}function vs(e,r,o=null,s){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof r=="string"?ro(r):r,state:o,key:r&&r.key||s||Tv()}}function er({pathname:e="/",search:r="",hash:o=""}){return r&&r!=="?"&&(e+=r.charAt(0)==="?"?r:"?"+r),o&&o!=="#"&&(e+=o.charAt(0)==="#"?o:"#"+o),e}function ro(e){let r={};if(e){let o=e.indexOf("#");o>=0&&(r.hash=e.substring(o),e=e.substring(0,o));let s=e.indexOf("?");s>=0&&(r.search=e.substring(s),e=e.substring(0,s)),e&&(r.pathname=e)}return r}function Dv(e,r,o,s={}){let{window:a=document.defaultView,v5Compat:l=!1}=s,c=a.history,f="POP",p=null,h=g();h==null&&(h=0,c.replaceState({...c.state,idx:h},""));function g(){return(c.state||{idx:null}).idx}function y(){f="POP";let E=g(),_=E==null?null:E-h;h=E,p&&p({action:f,location:C.location,delta:_})}function x(E,_){f="PUSH";let R=vs(C.location,E,_);h=g()+1;let b=Sp(R,h),j=C.createHref(R);try{c.pushState(b,"",j)}catch(A){if(A instanceof DOMException&&A.name==="DataCloneError")throw A;a.location.assign(j)}l&&p&&p({action:f,location:C.location,delta:1})}function w(E,_){f="REPLACE";let R=vs(C.location,E,_);h=g();let b=Sp(R,h),j=C.createHref(R);c.replaceState(b,"",j),l&&p&&p({action:f,location:C.location,delta:0})}function N(E){return g0(E)}let C={get action(){return f},get location(){return e(a,c)},listen(E){if(p)throw new Error("A history only accepts one active listener");return a.addEventListener(Np,y),p=E,()=>{a.removeEventListener(Np,y),p=null}},createHref(E){return r(a,E)},createURL:N,encodeLocation(E){let _=N(E);return{pathname:_.pathname,search:_.search,hash:_.hash}},push:x,replace:w,go(E){return c.go(E)}};return C}function g0(e,r=!1){let o="http://localhost";typeof window<"u"&&(o=window.location.origin!=="null"?window.location.origin:window.location.href),$e(o,"No window.location.(origin|href) available to create URL");let s=typeof e=="string"?e:er(e);return s=s.replace(/ $/,"%20"),!r&&s.startsWith("//")&&(s=o+s),new URL(s,o)}var fs,Ep=class{constructor(e){if(Pv(this,fs,new Map),e)for(let[r,o]of e)this.set(r,o)}get(e){if(Cc(this,fs).has(e))return Cc(this,fs).get(e);if(e.defaultValue!==void 0)return e.defaultValue;throw new Error("No value found for context")}set(e,r){Cc(this,fs).set(e,r)}};fs=new WeakMap;var Lv=new Set(["lazy","caseSensitive","path","id","index","children"]);function zv(e){return Lv.has(e)}var Iv=new Set(["lazy","caseSensitive","path","id","index","middleware","children"]);function Av(e){return Iv.has(e)}function $v(e){return e.index===!0}function ws(e,r,o=[],s={},a=!1){return e.map((l,c)=>{let f=[...o,String(c)],p=typeof l.id=="string"?l.id:f.join("-");if($e(l.index!==!0||!l.children,"Cannot specify children on an index route"),$e(a||!s[p],`Found a route id collision on id "${p}".  Route id's must be globally unique within Data Router usages`),$v(l)){let h={...l,id:p};return s[p]=Cp(h,r(h)),h}else{let h={...l,id:p,children:void 0};return s[p]=Cp(h,r(h)),l.children&&(h.children=ws(l.children,r,f,s,a)),h}})}function Cp(e,r){return Object.assign(e,{...r,...typeof r.lazy=="object"&&r.lazy!=null?{lazy:{...e.lazy,...r.lazy}}:{}})}function Jr(e,r,o="/"){return hs(e,r,o,!1)}function hs(e,r,o,s){let a=typeof r=="string"?ro(r):r,l=bn(a.pathname||"/",o);if(l==null)return null;let c=y0(e);Ov(c);let f=null;for(let p=0;f==null&&p<c.length;++p){let h=Qv(l);f=Kv(c[p],h,s)}return f}function Fv(e,r){let{route:o,pathname:s,params:a}=e;return{id:o.id,pathname:s,params:a,data:r[o.id],loaderData:r[o.id],handle:o.handle}}function y0(e,r=[],o=[],s="",a=!1){let l=(c,f,p=a,h)=>{let g={relativePath:h===void 0?c.path||"":h,caseSensitive:c.caseSensitive===!0,childrenIndex:f,route:c};if(g.relativePath.startsWith("/")){if(!g.relativePath.startsWith(s)&&p)return;$e(g.relativePath.startsWith(s),`Absolute route path "${g.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),g.relativePath=g.relativePath.slice(s.length)}let y=qn([s,g.relativePath]),x=o.concat(g);c.children&&c.children.length>0&&($e(c.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${y}".`),y0(c.children,r,x,y,p)),!(c.path==null&&!c.index)&&r.push({path:y,score:Xv(y,c.index),routesMeta:x})};return e.forEach((c,f)=>{if(c.path===""||!c.path?.includes("?"))l(c,f);else for(let p of x0(c.path))l(c,f,!0,p)}),r}function x0(e){let r=e.split("/");if(r.length===0)return[];let[o,...s]=r,a=o.endsWith("?"),l=o.replace(/\?$/,"");if(s.length===0)return a?[l,""]:[l];let c=x0(s.join("/")),f=[];return f.push(...c.map(p=>p===""?l:[l,p].join("/"))),a&&f.push(...c),f.map(p=>e.startsWith("/")&&p===""?"/":p)}function Ov(e){e.sort((r,o)=>r.score!==o.score?o.score-r.score:Gv(r.routesMeta.map(s=>s.childrenIndex),o.routesMeta.map(s=>s.childrenIndex)))}var Hv=/^:[\w-]+$/,Vv=3,Bv=2,Uv=1,Wv=10,Yv=-2,kp=e=>e==="*";function Xv(e,r){let o=e.split("/"),s=o.length;return o.some(kp)&&(s+=Yv),r&&(s+=Bv),o.filter(a=>!kp(a)).reduce((a,l)=>a+(Hv.test(l)?Vv:l===""?Uv:Wv),s)}function Gv(e,r){return e.length===r.length&&e.slice(0,-1).every((s,a)=>s===r[a])?e[e.length-1]-r[r.length-1]:0}function Kv(e,r,o=!1){let{routesMeta:s}=e,a={},l="/",c=[];for(let f=0;f<s.length;++f){let p=s[f],h=f===s.length-1,g=l==="/"?r:r.slice(l.length)||"/",y=gl({path:p.relativePath,caseSensitive:p.caseSensitive,end:h},g),x=p.route;if(!y&&h&&o&&!s[s.length-1].route.index&&(y=gl({path:p.relativePath,caseSensitive:p.caseSensitive,end:!1},g)),!y)return null;Object.assign(a,y.params),c.push({params:a,pathname:qn([l,y.pathname]),pathnameBase:e1(qn([l,y.pathnameBase])),route:x}),y.pathnameBase!=="/"&&(l=qn([l,y.pathnameBase]))}return c}function gl(e,r){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[o,s]=Zv(e.path,e.caseSensitive,e.end),a=r.match(o);if(!a)return null;let l=a[0],c=l.replace(/(.)\/+$/,"$1"),f=a.slice(1);return{params:s.reduce((h,{paramName:g,isOptional:y},x)=>{if(g==="*"){let N=f[x]||"";c=l.slice(0,l.length-N.length).replace(/(.)\/+$/,"$1")}const w=f[x];return y&&!w?h[g]=void 0:h[g]=(w||"").replace(/%2F/g,"/"),h},{}),pathname:l,pathnameBase:c,pattern:e}}function Zv(e,r=!1,o=!0){mt(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let s=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,f,p)=>(s.push({paramName:f,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(s.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):o?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,r?void 0:"i"),s]}function Qv(e){try{return e.split("/").map(r=>decodeURIComponent(r).replace(/\//g,"%2F")).join("/")}catch(r){return mt(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${r}).`),e}}function bn(e,r){if(r==="/")return e;if(!e.toLowerCase().startsWith(r.toLowerCase()))return null;let o=r.endsWith("/")?r.length-1:r.length,s=e.charAt(o);return s&&s!=="/"?null:e.slice(o)||"/"}function qv({basename:e,pathname:r}){return r==="/"?e:qn([e,r])}var v0=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ud=e=>v0.test(e);function Jv(e,r="/"){let{pathname:o,search:s="",hash:a=""}=typeof e=="string"?ro(e):e,l;return o?(o=o.replace(/\/\/+/g,"/"),o.startsWith("/")?l=jp(o.substring(1),"/"):l=jp(o,r)):l=r,{pathname:l,search:t1(s),hash:n1(a)}}function jp(e,r){let o=r.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?o.length>1&&o.pop():a!=="."&&o.push(a)}),o.length>1?o.join("/"):"/"}function kc(e,r,o,s){return`Cannot include a '${e}' character in a manually specified \`to.${r}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${o}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function w0(e){return e.filter((r,o)=>o===0||r.route.path&&r.route.path.length>0)}function cd(e){let r=w0(e);return r.map((o,s)=>s===r.length-1?o.pathname:o.pathnameBase)}function dd(e,r,o,s=!1){let a;typeof e=="string"?a=ro(e):(a={...e},$e(!a.pathname||!a.pathname.includes("?"),kc("?","pathname","search",a)),$e(!a.pathname||!a.pathname.includes("#"),kc("#","pathname","hash",a)),$e(!a.search||!a.search.includes("#"),kc("#","search","hash",a)));let l=e===""||a.pathname==="",c=l?"/":a.pathname,f;if(c==null)f=o;else{let y=r.length-1;if(!s&&c.startsWith("..")){let x=c.split("/");for(;x[0]==="..";)x.shift(),y-=1;a.pathname=x.join("/")}f=y>=0?r[y]:"/"}let p=Jv(a,f),h=c&&c!=="/"&&c.endsWith("/"),g=(l||c===".")&&o.endsWith("/");return!p.pathname.endsWith("/")&&(h||g)&&(p.pathname+="/"),p}var qn=e=>e.join("/").replace(/\/\/+/g,"/"),e1=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),t1=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,n1=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e,Ts=class{constructor(e,r,o,s=!1){this.status=e,this.statusText=r||"",this.internal=s,o instanceof Error?(this.data=o.toString(),this.error=o):this.data=o}};function bs(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}function Ds(e){return e.map(r=>r.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var b0=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function _0(e,r){let o=e;if(typeof o!="string"||!v0.test(o))return{absoluteURL:void 0,isExternal:!1,to:o};let s=o,a=!1;if(b0)try{let l=new URL(window.location.href),c=o.startsWith("//")?new URL(l.protocol+o):new URL(o),f=bn(c.pathname,r);c.origin===l.origin&&f!=null?o=f+c.search+c.hash:a=!0}catch{mt(!1,`<Link to="${o}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:s,isExternal:a,to:o}}var no=Symbol("Uninstrumented");function r1(e,r){let o={lazy:[],"lazy.loader":[],"lazy.action":[],"lazy.middleware":[],middleware:[],loader:[],action:[]};e.forEach(a=>a({id:r.id,index:r.index,path:r.path,instrument(l){let c=Object.keys(o);for(let f of c)l[f]&&o[f].push(l[f])}}));let s={};if(typeof r.lazy=="function"&&o.lazy.length>0){let a=hi(o.lazy,r.lazy,()=>{});a&&(s.lazy=a)}if(typeof r.lazy=="object"){let a=r.lazy;["middleware","loader","action"].forEach(l=>{let c=a[l],f=o[`lazy.${l}`];if(typeof c=="function"&&f.length>0){let p=hi(f,c,()=>{});p&&(s.lazy=Object.assign(s.lazy||{},{[l]:p}))}})}return["loader","action"].forEach(a=>{let l=r[a];if(typeof l=="function"&&o[a].length>0){let c=l[no]??l,f=hi(o[a],c,(...p)=>Rp(p[0]));f&&(a==="loader"&&c.hydrate===!0&&(f.hydrate=!0),f[no]=c,s[a]=f)}}),r.middleware&&r.middleware.length>0&&o.middleware.length>0&&(s.middleware=r.middleware.map(a=>{let l=a[no]??a,c=hi(o.middleware,l,(...f)=>Rp(f[0]));return c?(c[no]=l,c):a})),s}function o1(e,r){let o={navigate:[],fetch:[]};if(r.forEach(s=>s({instrument(a){let l=Object.keys(a);for(let c of l)a[c]&&o[c].push(a[c])}})),o.navigate.length>0){let s=e.navigate[no]??e.navigate,a=hi(o.navigate,s,(...l)=>{let[c,f]=l;return{to:typeof c=="number"||typeof c=="string"?c:c?er(c):".",...Pp(e,f??{})}});a&&(a[no]=s,e.navigate=a)}if(o.fetch.length>0){let s=e.fetch[no]??e.fetch,a=hi(o.fetch,s,(...l)=>{let[c,,f,p]=l;return{href:f??".",fetcherKey:c,...Pp(e,p??{})}});a&&(a[no]=s,e.fetch=a)}return e}function hi(e,r,o){return e.length===0?null:async(...s)=>{let a=await N0(e,o(...s),()=>r(...s),e.length-1);if(a.type==="error")throw a.value;return a.value}}async function N0(e,r,o,s){let a=e[s],l;if(a){let c,f=async()=>(c?console.error("You cannot call instrumented handlers more than once"):c=N0(e,r,o,s-1),l=await c,$e(l,"Expected a result"),l.type==="error"&&l.value instanceof Error?{status:"error",error:l.value}:{status:"success",error:void 0});try{await a(f,r)}catch(p){console.error("An instrumentation function threw an error:",p)}c||await f(),await c}else try{l={type:"success",value:await o()}}catch(c){l={type:"error",value:c}}return l||{type:"error",value:new Error("No result assigned in instrumentation chain.")}}function Rp(e){let{request:r,context:o,params:s,unstable_pattern:a}=e;return{request:i1(r),params:{...s},unstable_pattern:a,context:s1(o)}}function Pp(e,r){return{currentUrl:er(e.state.location),..."formMethod"in r?{formMethod:r.formMethod}:{},..."formEncType"in r?{formEncType:r.formEncType}:{},..."formData"in r?{formData:r.formData}:{},..."body"in r?{body:r.body}:{}}}function i1(e){return{method:e.method,url:e.url,headers:{get:(...r)=>e.headers.get(...r)}}}function s1(e){if(l1(e)){let r={...e};return Object.freeze(r),r}else return{get:r=>e.get(r)}}var a1=Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function l1(e){if(e===null||typeof e!="object")return!1;const r=Object.getPrototypeOf(e);return r===Object.prototype||r===null||Object.getOwnPropertyNames(r).sort().join("\0")===a1}var S0=["POST","PUT","PATCH","DELETE"],u1=new Set(S0),c1=["GET",...S0],d1=new Set(c1),E0=new Set([301,302,303,307,308]),f1=new Set([307,308]),jc={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},h1={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},as={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},p1=e=>({hasErrorBoundary:!!e.hasErrorBoundary}),C0="remix-router-transitions",k0=Symbol("ResetLoaderData");function m1(e){const r=e.window?e.window:typeof window<"u"?window:void 0,o=typeof r<"u"&&typeof r.document<"u"&&typeof r.document.createElement<"u";$e(e.routes.length>0,"You must provide a non-empty routes array to createRouter");let s=e.hydrationRouteProperties||[],a=e.mapRouteProperties||p1,l=a;if(e.unstable_instrumentations){let V=e.unstable_instrumentations;l=q=>({...a(q),...r1(V.map(te=>te.route).filter(Boolean),q)})}let c={},f=ws(e.routes,l,void 0,c),p,h=e.basename||"/";h.startsWith("/")||(h=`/${h}`);let g=e.dataStrategy||w1,y={...e.future},x=null,w=new Set,N=null,C=null,E=null,_=e.hydrationData!=null,R=Jr(f,e.history.location,h),b=!1,j=null,A;if(R==null&&!e.patchRoutesOnNavigation){let V=wn(404,{pathname:e.history.location.pathname}),{matches:q,route:te}=Ga(f);A=!0,R=q,j={[te.id]:V}}else if(R&&!e.hydrationData&&lr(R,f,e.history.location.pathname).active&&(R=null),R)if(R.some(V=>V.route.lazy))A=!1;else if(!R.some(V=>fd(V.route)))A=!0;else{let V=e.hydrationData?e.hydrationData.loaderData:null,q=e.hydrationData?e.hydrationData.errors:null;if(q){let te=R.findIndex(ae=>q[ae.route.id]!==void 0);A=R.slice(0,te+1).every(ae=>!Yc(ae.route,V,q))}else A=R.every(te=>!Yc(te.route,V,q))}else{A=!1,R=[];let V=lr(null,f,e.history.location.pathname);V.active&&V.matches&&(b=!0,R=V.matches)}let T,P={historyAction:e.history.action,location:e.history.location,matches:R,initialized:A,navigation:jc,restoreScrollPosition:e.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:e.hydrationData&&e.hydrationData.loaderData||{},actionData:e.hydrationData&&e.hydrationData.actionData||null,errors:e.hydrationData&&e.hydrationData.errors||j,fetchers:new Map,blockers:new Map},O="POP",G=null,D=!1,F,H=!1,W=new Map,M=null,z=!1,Y=!1,Q=new Set,I=new Map,K=0,U=-1,L=new Map,B=new Set,oe=new Map,re=new Map,ce=new Set,me=new Map,he,ie=null;function pe(){if(x=e.history.listen(({action:V,location:q,delta:te})=>{if(he){he(),he=void 0;return}mt(me.size===0||te!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let ae=Cn({currentLocation:P.location,nextLocation:q,historyAction:V});if(ae&&te!=null){let de=new Promise(Ne=>{he=Ne});e.history.go(te*-1),Vn(ae,{state:"blocked",location:q,proceed(){Vn(ae,{state:"proceeding",proceed:void 0,reset:void 0,location:q}),de.then(()=>e.history.go(te))},reset(){let Ne=new Map(P.blockers);Ne.set(ae,as),ye({blockers:Ne})}}),G?.resolve(),G=null;return}return He(V,q)}),o){$1(r,W);let V=()=>F1(r,W);r.addEventListener("pagehide",V),M=()=>r.removeEventListener("pagehide",V)}return P.initialized||He("POP",P.location,{initialHydration:!0}),T}function De(){x&&x(),M&&M(),w.clear(),F&&F.abort(),P.fetchers.forEach((V,q)=>oo(q)),P.blockers.forEach((V,q)=>Pr(q))}function ze(V){return w.add(V),()=>w.delete(V)}function ye(V,q={}){V.matches&&(V.matches=V.matches.map(de=>{let Ne=c[de.route.id],xe=de.route;return xe.element!==Ne.element||xe.errorElement!==Ne.errorElement||xe.hydrateFallbackElement!==Ne.hydrateFallbackElement?{...de,route:Ne}:de})),P={...P,...V};let te=[],ae=[];P.fetchers.forEach((de,Ne)=>{de.state==="idle"&&(ce.has(Ne)?te.push(Ne):ae.push(Ne))}),ce.forEach(de=>{!P.fetchers.has(de)&&!I.has(de)&&te.push(de)}),[...w].forEach(de=>de(P,{deletedFetchers:te,newErrors:V.errors??null,viewTransitionOpts:q.viewTransitionOpts,flushSync:q.flushSync===!0})),te.forEach(de=>oo(de)),ae.forEach(de=>P.fetchers.delete(de))}function Re(V,q,{flushSync:te}={}){let ae=P.actionData!=null&&P.navigation.formMethod!=null&&Lt(P.navigation.formMethod)&&P.navigation.state==="loading"&&V.state?._isRedirect!==!0,de;q.actionData?Object.keys(q.actionData).length>0?de=q.actionData:de=null:ae?de=P.actionData:de=null;let Ne=q.loaderData?Op(P.loaderData,q.loaderData,q.matches||[],q.errors):P.loaderData,xe=P.blockers;xe.size>0&&(xe=new Map(xe),xe.forEach((Pe,Ee)=>xe.set(Ee,as)));let _e=z?!1:ao(V,q.matches||P.matches),Ce=D===!0||P.navigation.formMethod!=null&&Lt(P.navigation.formMethod)&&V.state?._isRedirect!==!0;p&&(f=p,p=void 0),z||O==="POP"||(O==="PUSH"?e.history.push(V,V.state):O==="REPLACE"&&e.history.replace(V,V.state));let we;if(O==="POP"){let Pe=W.get(P.location.pathname);Pe&&Pe.has(V.pathname)?we={currentLocation:P.location,nextLocation:V}:W.has(V.pathname)&&(we={currentLocation:V,nextLocation:P.location})}else if(H){let Pe=W.get(P.location.pathname);Pe?Pe.add(V.pathname):(Pe=new Set([V.pathname]),W.set(P.location.pathname,Pe)),we={currentLocation:P.location,nextLocation:V}}ye({...q,actionData:de,loaderData:Ne,historyAction:O,location:V,initialized:!0,navigation:jc,revalidation:"idle",restoreScrollPosition:_e,preventScrollReset:Ce,blockers:xe},{viewTransitionOpts:we,flushSync:te===!0}),O="POP",D=!1,H=!1,z=!1,Y=!1,G?.resolve(),G=null,ie?.resolve(),ie=null}async function Be(V,q){if(G?.resolve(),G=null,typeof V=="number"){G||(G=Up());let Fe=G.promise;return e.history.go(V),Fe}let te=Wc(P.location,P.matches,h,V,q?.fromRouteId,q?.relative),{path:ae,submission:de,error:Ne}=Mp(!1,te,q),xe=P.location,_e=vs(P.location,ae,q&&q.state);_e={..._e,...e.history.encodeLocation(_e)};let Ce=q&&q.replace!=null?q.replace:void 0,we="PUSH";Ce===!0?we="REPLACE":Ce===!1||de!=null&&Lt(de.formMethod)&&de.formAction===P.location.pathname+P.location.search&&(we="REPLACE");let Pe=q&&"preventScrollReset"in q?q.preventScrollReset===!0:void 0,Ee=(q&&q.flushSync)===!0,Ve=Cn({currentLocation:xe,nextLocation:_e,historyAction:we});if(Ve){Vn(Ve,{state:"blocked",location:_e,proceed(){Vn(Ve,{state:"proceeding",proceed:void 0,reset:void 0,location:_e}),Be(V,q)},reset(){let Fe=new Map(P.blockers);Fe.set(Ve,as),ye({blockers:Fe})}});return}await He(we,_e,{submission:de,pendingError:Ne,preventScrollReset:Pe,replace:q&&q.replace,enableViewTransition:q&&q.viewTransition,flushSync:Ee,callSiteDefaultShouldRevalidate:q&&q.unstable_defaultShouldRevalidate})}function Ze(){ie||(ie=Up()),en(),ye({revalidation:"loading"});let V=ie.promise;return P.navigation.state==="submitting"?V:P.navigation.state==="idle"?(He(P.historyAction,P.location,{startUninterruptedRevalidation:!0}),V):(He(O||P.historyAction,P.navigation.location,{overrideNavigation:P.navigation,enableViewTransition:H===!0}),V)}async function He(V,q,te){F&&F.abort(),F=null,O=V,z=(te&&te.startUninterruptedRevalidation)===!0,Oo(P.location,P.matches),D=(te&&te.preventScrollReset)===!0,H=(te&&te.enableViewTransition)===!0;let ae=p||f,de=te&&te.overrideNavigation,Ne=te?.initialHydration&&P.matches&&P.matches.length>0&&!b?P.matches:Jr(ae,q,h),xe=(te&&te.flushSync)===!0;if(Ne&&P.initialized&&!Y&&j1(P.location,q)&&!(te&&te.submission&&Lt(te.submission.formMethod))){Re(q,{matches:Ne},{flushSync:xe});return}let _e=lr(Ne,ae,q.pathname);if(_e.active&&_e.matches&&(Ne=_e.matches),!Ne){let{error:st,notFoundMatches:ht,route:Ye}=dn(q.pathname);Re(q,{matches:ht,loaderData:{},errors:{[Ye.id]:st}},{flushSync:xe});return}F=new AbortController;let Ce=fi(e.history,q,F.signal,te&&te.submission),we=e.getContext?await e.getContext():new Ep,Pe;if(te&&te.pendingError)Pe=[eo(Ne).route.id,{type:"error",error:te.pendingError}];else if(te&&te.submission&&Lt(te.submission.formMethod)){let st=await ut(Ce,q,te.submission,Ne,we,_e.active,te&&te.initialHydration===!0,{replace:te.replace,flushSync:xe});if(st.shortCircuited)return;if(st.pendingActionResult){let[ht,Ye]=st.pendingActionResult;if(sn(Ye)&&bs(Ye.error)&&Ye.error.status===404){F=null,Re(q,{matches:st.matches,loaderData:{},errors:{[ht]:Ye.error}});return}}Ne=st.matches||Ne,Pe=st.pendingActionResult,de=Rc(q,te.submission),xe=!1,_e.active=!1,Ce=fi(e.history,Ce.url,Ce.signal)}let{shortCircuited:Ee,matches:Ve,loaderData:Fe,errors:ct}=await qt(Ce,q,Ne,we,_e.active,de,te&&te.submission,te&&te.fetcherSubmission,te&&te.replace,te&&te.initialHydration===!0,xe,Pe,te&&te.callSiteDefaultShouldRevalidate);Ee||(F=null,Re(q,{matches:Ve||Ne,...Hp(Pe),loaderData:Fe,errors:ct}))}async function ut(V,q,te,ae,de,Ne,xe,_e={}){en();let Ce=I1(q,te);if(ye({navigation:Ce},{flushSync:_e.flushSync===!0}),Ne){let Ee=await Bn(ae,q.pathname,V.signal);if(Ee.type==="aborted")return{shortCircuited:!0};if(Ee.type==="error"){if(Ee.partialMatches.length===0){let{matches:Fe,route:ct}=Ga(f);return{matches:Fe,pendingActionResult:[ct.id,{type:"error",error:Ee.error}]}}let Ve=eo(Ee.partialMatches).route.id;return{matches:Ee.partialMatches,pendingActionResult:[Ve,{type:"error",error:Ee.error}]}}else if(Ee.matches)ae=Ee.matches;else{let{notFoundMatches:Ve,error:Fe,route:ct}=dn(q.pathname);return{matches:Ve,pendingActionResult:[ct.id,{type:"error",error:Fe}]}}}let we,Pe=ll(ae,q);if(!Pe.route.action&&!Pe.route.lazy)we={type:"error",error:wn(405,{method:V.method,pathname:q.pathname,routeId:Pe.route.id})};else{let Ee=gi(l,c,V,ae,Pe,xe?[]:s,de),Ve=await Jt(V,Ee,de,null);if(we=Ve[Pe.route.id],!we){for(let Fe of ae)if(Ve[Fe.route.id]){we=Ve[Fe.route.id];break}}if(V.signal.aborted)return{shortCircuited:!0}}if(Eo(we)){let Ee;return _e&&_e.replace!=null?Ee=_e.replace:Ee=Ap(we.response.headers.get("Location"),new URL(V.url),h,e.history)===P.location.pathname+P.location.search,await Ht(V,we,!0,{submission:te,replace:Ee}),{shortCircuited:!0}}if(sn(we)){let Ee=eo(ae,Pe.route.id);return(_e&&_e.replace)!==!0&&(O="PUSH"),{matches:ae,pendingActionResult:[Ee.route.id,we,Pe.route.id]}}return{matches:ae,pendingActionResult:[Pe.route.id,we]}}async function qt(V,q,te,ae,de,Ne,xe,_e,Ce,we,Pe,Ee,Ve){let Fe=Ne||Rc(q,xe),ct=xe||_e||Bp(Fe),st=!z&&!we;if(de){if(st){let Ke=Rt(Ee);ye({navigation:Fe,...Ke!==void 0?{actionData:Ke}:{}},{flushSync:Pe})}let Oe=await Bn(te,q.pathname,V.signal);if(Oe.type==="aborted")return{shortCircuited:!0};if(Oe.type==="error"){if(Oe.partialMatches.length===0){let{matches:Wn,route:kn}=Ga(f);return{matches:Wn,loaderData:{},errors:{[kn.id]:Oe.error}}}let Ke=eo(Oe.partialMatches).route.id;return{matches:Oe.partialMatches,loaderData:{},errors:{[Ke]:Oe.error}}}else if(Oe.matches)te=Oe.matches;else{let{error:Ke,notFoundMatches:Wn,route:kn}=dn(q.pathname);return{matches:Wn,loaderData:{},errors:{[kn.id]:Ke}}}}let ht=p||f,{dsMatches:Ye,revalidatingFetchers:Et}=Tp(V,ae,l,c,e.history,P,te,ct,q,we?[]:s,we===!0,Y,Q,ce,oe,B,ht,h,e.patchRoutesOnNavigation!=null,Ee,Ve);if(U=++K,!e.dataStrategy&&!Ye.some(Oe=>Oe.shouldLoad)&&!Ye.some(Oe=>Oe.route.middleware&&Oe.route.middleware.length>0)&&Et.length===0){let Oe=jr();return Re(q,{matches:te,loaderData:{},errors:Ee&&sn(Ee[1])?{[Ee[0]]:Ee[1].error}:null,...Hp(Ee),...Oe?{fetchers:new Map(P.fetchers)}:{}},{flushSync:Pe}),{shortCircuited:!0}}if(st){let Oe={};if(!de){Oe.navigation=Fe;let Ke=Rt(Ee);Ke!==void 0&&(Oe.actionData=Ke)}Et.length>0&&(Oe.fetchers=zt(Et)),ye(Oe,{flushSync:Pe})}Et.forEach(Oe=>{Bt(Oe.key),Oe.controller&&I.set(Oe.key,Oe.controller)});let Ge=()=>Et.forEach(Oe=>Bt(Oe.key));F&&F.signal.addEventListener("abort",Ge);let{loaderResults:cr,fetcherResults:Ut}=await un(Ye,Et,V,ae);if(V.signal.aborted)return{shortCircuited:!0};F&&F.signal.removeEventListener("abort",Ge),Et.forEach(Oe=>I.delete(Oe.key));let It=Ka(cr);if(It)return await Ht(V,It.result,!0,{replace:Ce}),{shortCircuited:!0};if(It=Ka(Ut),It)return B.add(It.key),await Ht(V,It.result,!0,{replace:Ce}),{shortCircuited:!0};let{loaderData:Un,errors:dr}=Fp(P,te,cr,Ee,Et,Ut);we&&P.errors&&(dr={...P.errors,...dr});let fn=jr(),hn=Rr(U),Ct=fn||hn||Et.length>0;return{matches:te,loaderData:Un,errors:dr,...Ct?{fetchers:new Map(P.fetchers)}:{}}}function Rt(V){if(V&&!sn(V[1]))return{[V[0]]:V[1].data};if(P.actionData)return Object.keys(P.actionData).length===0?null:P.actionData}function zt(V){return V.forEach(q=>{let te=P.fetchers.get(q.key),ae=ls(void 0,te?te.data:void 0);P.fetchers.set(q.key,ae)}),new Map(P.fetchers)}async function Ot(V,q,te,ae){Bt(V);let de=(ae&&ae.flushSync)===!0,Ne=p||f,xe=Wc(P.location,P.matches,h,te,q,ae?.relative),_e=Jr(Ne,xe,h),Ce=lr(_e,Ne,xe);if(Ce.active&&Ce.matches&&(_e=Ce.matches),!_e){Vt(V,q,wn(404,{pathname:xe}),{flushSync:de});return}let{path:we,submission:Pe,error:Ee}=Mp(!0,xe,ae);if(Ee){Vt(V,q,Ee,{flushSync:de});return}let Ve=e.getContext?await e.getContext():new Ep,Fe=(ae&&ae.preventScrollReset)===!0;if(Pe&&Lt(Pe.formMethod)){await En(V,q,we,_e,Ve,Ce.active,de,Fe,Pe,ae&&ae.unstable_defaultShouldRevalidate);return}oe.set(V,{routeId:q,path:we}),await Hn(V,q,we,_e,Ve,Ce.active,de,Fe,Pe)}async function En(V,q,te,ae,de,Ne,xe,_e,Ce,we){en(),oe.delete(V);let Pe=P.fetchers.get(V);St(V,A1(Ce,Pe),{flushSync:xe});let Ee=new AbortController,Ve=fi(e.history,te,Ee.signal,Ce);if(Ne){let Je=await Bn(ae,new URL(Ve.url).pathname,Ve.signal,V);if(Je.type==="aborted")return;if(Je.type==="error"){Vt(V,q,Je.error,{flushSync:xe});return}else if(Je.matches)ae=Je.matches;else{Vt(V,q,wn(404,{pathname:te}),{flushSync:xe});return}}let Fe=ll(ae,te);if(!Fe.route.action&&!Fe.route.lazy){let Je=wn(405,{method:Ce.formMethod,pathname:te,routeId:q});Vt(V,q,Je,{flushSync:xe});return}I.set(V,Ee);let ct=K,st=gi(l,c,Ve,ae,Fe,s,de),ht=await Jt(Ve,st,de,V),Ye=ht[Fe.route.id];if(!Ye){for(let Je of st)if(ht[Je.route.id]){Ye=ht[Je.route.id];break}}if(Ve.signal.aborted){I.get(V)===Ee&&I.delete(V);return}if(ce.has(V)){if(Eo(Ye)||sn(Ye)){St(V,_r(void 0));return}}else{if(Eo(Ye))if(I.delete(V),U>ct){St(V,_r(void 0));return}else return B.add(V),St(V,ls(Ce)),Ht(Ve,Ye,!1,{fetcherSubmission:Ce,preventScrollReset:_e});if(sn(Ye)){Vt(V,q,Ye.error);return}}let Et=P.navigation.location||P.location,Ge=fi(e.history,Et,Ee.signal),cr=p||f,Ut=P.navigation.state!=="idle"?Jr(cr,P.navigation.location,h):P.matches;$e(Ut,"Didn't find any matches after fetcher action");let It=++K;L.set(V,It);let Un=ls(Ce,Ye.data);P.fetchers.set(V,Un);let{dsMatches:dr,revalidatingFetchers:fn}=Tp(Ge,de,l,c,e.history,P,Ut,Ce,Et,s,!1,Y,Q,ce,oe,B,cr,h,e.patchRoutesOnNavigation!=null,[Fe.route.id,Ye],we);fn.filter(Je=>Je.key!==V).forEach(Je=>{let jn=Je.key,fr=P.fetchers.get(jn),Yn=ls(void 0,fr?fr.data:void 0);P.fetchers.set(jn,Yn),Bt(jn),Je.controller&&I.set(jn,Je.controller)}),ye({fetchers:new Map(P.fetchers)});let hn=()=>fn.forEach(Je=>Bt(Je.key));Ee.signal.addEventListener("abort",hn);let{loaderResults:Ct,fetcherResults:Oe}=await un(dr,fn,Ge,de);if(Ee.signal.aborted)return;if(Ee.signal.removeEventListener("abort",hn),L.delete(V),I.delete(V),fn.forEach(Je=>I.delete(Je.key)),P.fetchers.has(V)){let Je=_r(Ye.data);P.fetchers.set(V,Je)}let Ke=Ka(Ct);if(Ke)return Ht(Ge,Ke.result,!1,{preventScrollReset:_e});if(Ke=Ka(Oe),Ke)return B.add(Ke.key),Ht(Ge,Ke.result,!1,{preventScrollReset:_e});let{loaderData:Wn,errors:kn}=Fp(P,Ut,Ct,void 0,fn,Oe);Rr(It),P.navigation.state==="loading"&&It>U?($e(O,"Expected pending action"),F&&F.abort(),Re(P.navigation.location,{matches:Ut,loaderData:Wn,errors:kn,fetchers:new Map(P.fetchers)})):(ye({errors:kn,loaderData:Op(P.loaderData,Wn,Ut,kn),fetchers:new Map(P.fetchers)}),Y=!1)}async function Hn(V,q,te,ae,de,Ne,xe,_e,Ce){let we=P.fetchers.get(V);St(V,ls(Ce,we?we.data:void 0),{flushSync:xe});let Pe=new AbortController,Ee=fi(e.history,te,Pe.signal);if(Ne){let Ye=await Bn(ae,new URL(Ee.url).pathname,Ee.signal,V);if(Ye.type==="aborted")return;if(Ye.type==="error"){Vt(V,q,Ye.error,{flushSync:xe});return}else if(Ye.matches)ae=Ye.matches;else{Vt(V,q,wn(404,{pathname:te}),{flushSync:xe});return}}let Ve=ll(ae,te);I.set(V,Pe);let Fe=K,ct=gi(l,c,Ee,ae,Ve,s,de),ht=(await Jt(Ee,ct,de,V))[Ve.route.id];if(I.get(V)===Pe&&I.delete(V),!Ee.signal.aborted){if(ce.has(V)){St(V,_r(void 0));return}if(Eo(ht))if(U>Fe){St(V,_r(void 0));return}else{B.add(V),await Ht(Ee,ht,!1,{preventScrollReset:_e});return}if(sn(ht)){Vt(V,q,ht.error);return}St(V,_r(ht.data))}}async function Ht(V,q,te,{submission:ae,fetcherSubmission:de,preventScrollReset:Ne,replace:xe}={}){te||(G?.resolve(),G=null),q.response.headers.has("X-Remix-Revalidate")&&(Y=!0);let _e=q.response.headers.get("Location");$e(_e,"Expected a Location header on the redirect Response"),_e=Ap(_e,new URL(V.url),h,e.history);let Ce=vs(P.location,_e,{_isRedirect:!0});if(o){let ct=!1;if(q.response.headers.has("X-Remix-Reload-Document"))ct=!0;else if(ud(_e)){const st=g0(_e,!0);ct=st.origin!==r.location.origin||bn(st.pathname,h)==null}if(ct){xe?r.location.replace(_e):r.location.assign(_e);return}}F=null;let we=xe===!0||q.response.headers.has("X-Remix-Replace")?"REPLACE":"PUSH",{formMethod:Pe,formAction:Ee,formEncType:Ve}=P.navigation;!ae&&!de&&Pe&&Ee&&Ve&&(ae=Bp(P.navigation));let Fe=ae||de;if(f1.has(q.response.status)&&Fe&&Lt(Fe.formMethod))await He(we,Ce,{submission:{...Fe,formAction:_e},preventScrollReset:Ne||D,enableViewTransition:te?H:void 0});else{let ct=Rc(Ce,ae);await He(we,Ce,{overrideNavigation:ct,fetcherSubmission:de,preventScrollReset:Ne||D,enableViewTransition:te?H:void 0})}}async function Jt(V,q,te,ae){let de,Ne={};try{de=await _1(g,V,q,ae,te,!1)}catch(xe){return q.filter(_e=>_e.shouldLoad).forEach(_e=>{Ne[_e.route.id]={type:"error",error:xe}}),Ne}if(V.signal.aborted)return Ne;if(!Lt(V.method))for(let xe of q){if(de[xe.route.id]?.type==="error")break;!de.hasOwnProperty(xe.route.id)&&!P.loaderData.hasOwnProperty(xe.route.id)&&(!P.errors||!P.errors.hasOwnProperty(xe.route.id))&&xe.shouldCallHandler()&&(de[xe.route.id]={type:"error",result:new Error(`No result returned from dataStrategy for route ${xe.route.id}`)})}for(let[xe,_e]of Object.entries(de))if(T1(_e)){let Ce=_e.result;Ne[xe]={type:"redirect",response:C1(Ce,V,xe,q,h)}}else Ne[xe]=await E1(_e);return Ne}async function un(V,q,te,ae){let de=Jt(te,V,ae,null),Ne=Promise.all(q.map(async Ce=>{if(Ce.matches&&Ce.match&&Ce.request&&Ce.controller){let Pe=(await Jt(Ce.request,Ce.matches,ae,Ce.key))[Ce.match.route.id];return{[Ce.key]:Pe}}else return Promise.resolve({[Ce.key]:{type:"error",error:wn(404,{pathname:Ce.path})}})})),xe=await de,_e=(await Ne).reduce((Ce,we)=>Object.assign(Ce,we),{});return{loaderResults:xe,fetcherResults:_e}}function en(){Y=!0,oe.forEach((V,q)=>{I.has(q)&&Q.add(q),Bt(q)})}function St(V,q,te={}){P.fetchers.set(V,q),ye({fetchers:new Map(P.fetchers)},{flushSync:(te&&te.flushSync)===!0})}function Vt(V,q,te,ae={}){let de=eo(P.matches,q);oo(V),ye({errors:{[de.route.id]:te},fetchers:new Map(P.fetchers)},{flushSync:(ae&&ae.flushSync)===!0})}function cn(V){return re.set(V,(re.get(V)||0)+1),ce.has(V)&&ce.delete(V),P.fetchers.get(V)||h1}function ar(V,q){Bt(V,q?.reason),St(V,_r(null))}function oo(V){let q=P.fetchers.get(V);I.has(V)&&!(q&&q.state==="loading"&&L.has(V))&&Bt(V),oe.delete(V),L.delete(V),B.delete(V),ce.delete(V),Q.delete(V),P.fetchers.delete(V)}function Ao(V){let q=(re.get(V)||0)-1;q<=0?(re.delete(V),ce.add(V)):re.set(V,q),ye({fetchers:new Map(P.fetchers)})}function Bt(V,q){let te=I.get(V);te&&(te.abort(q),I.delete(V))}function $o(V){for(let q of V){let te=cn(q),ae=_r(te.data);P.fetchers.set(q,ae)}}function jr(){let V=[],q=!1;for(let te of B){let ae=P.fetchers.get(te);$e(ae,`Expected fetcher: ${te}`),ae.state==="loading"&&(B.delete(te),V.push(te),q=!0)}return $o(V),q}function Rr(V){let q=[];for(let[te,ae]of L)if(ae<V){let de=P.fetchers.get(te);$e(de,`Expected fetcher: ${te}`),de.state==="loading"&&(Bt(te),L.delete(te),q.push(te))}return $o(q),q.length>0}function io(V,q){let te=P.blockers.get(V)||as;return me.get(V)!==q&&me.set(V,q),te}function Pr(V){P.blockers.delete(V),me.delete(V)}function Vn(V,q){let te=P.blockers.get(V)||as;$e(te.state==="unblocked"&&q.state==="blocked"||te.state==="blocked"&&q.state==="blocked"||te.state==="blocked"&&q.state==="proceeding"||te.state==="blocked"&&q.state==="unblocked"||te.state==="proceeding"&&q.state==="unblocked",`Invalid blocker state transition: ${te.state} -> ${q.state}`);let ae=new Map(P.blockers);ae.set(V,q),ye({blockers:ae})}function Cn({currentLocation:V,nextLocation:q,historyAction:te}){if(me.size===0)return;me.size>1&&mt(!1,"A router only supports one blocker at a time");let ae=Array.from(me.entries()),[de,Ne]=ae[ae.length-1],xe=P.blockers.get(de);if(!(xe&&xe.state==="proceeding")&&Ne({currentLocation:V,nextLocation:q,historyAction:te}))return de}function dn(V){let q=wn(404,{pathname:V}),te=p||f,{matches:ae,route:de}=Ga(te);return{notFoundMatches:ae,route:de,error:q}}function Fo(V,q,te){if(N=V,E=q,C=te||null,!_&&P.navigation===jc){_=!0;let ae=ao(P.location,P.matches);ae!=null&&ye({restoreScrollPosition:ae})}return()=>{N=null,E=null,C=null}}function so(V,q){return C&&C(V,q.map(ae=>Fv(ae,P.loaderData)))||V.key}function Oo(V,q){if(N&&E){let te=so(V,q);N[te]=E()}}function ao(V,q){if(N){let te=so(V,q),ae=N[te];if(typeof ae=="number")return ae}return null}function lr(V,q,te){if(e.patchRoutesOnNavigation)if(V){if(Object.keys(V[0].params).length>0)return{active:!0,matches:hs(q,te,h,!0)}}else return{active:!0,matches:hs(q,te,h,!0)||[]};return{active:!1,matches:null}}async function Bn(V,q,te,ae){if(!e.patchRoutesOnNavigation)return{type:"success",matches:V};let de=V;for(;;){let Ne=p==null,xe=p||f,_e=c;try{await e.patchRoutesOnNavigation({signal:te,path:q,matches:de,fetcherKey:ae,patch:(Pe,Ee)=>{te.aborted||Dp(Pe,Ee,xe,_e,l,!1)}})}catch(Pe){return{type:"error",error:Pe,partialMatches:de}}finally{Ne&&!te.aborted&&(f=[...f])}if(te.aborted)return{type:"aborted"};let Ce=Jr(xe,q,h),we=null;if(Ce){if(Object.keys(Ce[0].params).length===0)return{type:"success",matches:Ce};if(we=hs(xe,q,h,!0),!(we&&de.length<we.length&&lo(de,we.slice(0,de.length))))return{type:"success",matches:Ce}}if(we||(we=hs(xe,q,h,!0)),!we||lo(de,we))return{type:"success",matches:null};de=we}}function lo(V,q){return V.length===q.length&&V.every((te,ae)=>te.route.id===q[ae].route.id)}function ur(V){c={},p=ws(V,l,void 0,c)}function uo(V,q,te=!1){let ae=p==null;Dp(V,q,p||f,c,l,te),ae&&(f=[...f],ye({}))}return T={get basename(){return h},get future(){return y},get state(){return P},get routes(){return f},get window(){return r},initialize:pe,subscribe:ze,enableScrollRestoration:Fo,navigate:Be,fetch:Ot,revalidate:Ze,createHref:V=>e.history.createHref(V),encodeLocation:V=>e.history.encodeLocation(V),getFetcher:cn,resetFetcher:ar,deleteFetcher:Ao,dispose:De,getBlocker:io,deleteBlocker:Pr,patchRoutes:uo,_internalFetchControllers:I,_internalSetRoutes:ur,_internalSetStateDoNotUseOrYouWillBreakYourApp(V){ye(V)}},e.unstable_instrumentations&&(T=o1(T,e.unstable_instrumentations.map(V=>V.router).filter(Boolean))),T}function g1(e){return e!=null&&("formData"in e&&e.formData!=null||"body"in e&&e.body!==void 0)}function Wc(e,r,o,s,a,l){let c,f;if(a){c=[];for(let h of r)if(c.push(h),h.route.id===a){f=h;break}}else c=r,f=r[r.length-1];let p=dd(s||".",cd(c),bn(e.pathname,o)||e.pathname,l==="path");if(s==null&&(p.search=e.search,p.hash=e.hash),(s==null||s===""||s===".")&&f){let h=pd(p.search);if(f.route.index&&!h)p.search=p.search?p.search.replace(/^\?/,"?index&"):"?index";else if(!f.route.index&&h){let g=new URLSearchParams(p.search),y=g.getAll("index");g.delete("index"),y.filter(w=>w).forEach(w=>g.append("index",w));let x=g.toString();p.search=x?`?${x}`:""}}return o!=="/"&&(p.pathname=qv({basename:o,pathname:p.pathname})),er(p)}function Mp(e,r,o){if(!o||!g1(o))return{path:r};if(o.formMethod&&!z1(o.formMethod))return{path:r,error:wn(405,{method:o.formMethod})};let s=()=>({path:r,error:wn(400,{type:"invalid-body"})}),l=(o.formMethod||"get").toUpperCase(),c=D0(r);if(o.body!==void 0){if(o.formEncType==="text/plain"){if(!Lt(l))return s();let y=typeof o.body=="string"?o.body:o.body instanceof FormData||o.body instanceof URLSearchParams?Array.from(o.body.entries()).reduce((x,[w,N])=>`${x}${w}=${N}
`,""):String(o.body);return{path:r,submission:{formMethod:l,formAction:c,formEncType:o.formEncType,formData:void 0,json:void 0,text:y}}}else if(o.formEncType==="application/json"){if(!Lt(l))return s();try{let y=typeof o.body=="string"?JSON.parse(o.body):o.body;return{path:r,submission:{formMethod:l,formAction:c,formEncType:o.formEncType,formData:void 0,json:y,text:void 0}}}catch{return s()}}}$e(typeof FormData=="function","FormData is not available in this environment");let f,p;if(o.formData)f=Gc(o.formData),p=o.formData;else if(o.body instanceof FormData)f=Gc(o.body),p=o.body;else if(o.body instanceof URLSearchParams)f=o.body,p=$p(f);else if(o.body==null)f=new URLSearchParams,p=new FormData;else try{f=new URLSearchParams(o.body),p=$p(f)}catch{return s()}let h={formMethod:l,formAction:c,formEncType:o&&o.formEncType||"application/x-www-form-urlencoded",formData:p,json:void 0,text:void 0};if(Lt(h.formMethod))return{path:r,submission:h};let g=ro(r);return e&&g.search&&pd(g.search)&&f.append("index",""),g.search=`?${f}`,{path:er(g),submission:h}}function Tp(e,r,o,s,a,l,c,f,p,h,g,y,x,w,N,C,E,_,R,b,j){let A=b?sn(b[1])?b[1].error:b[1].data:void 0,T=a.createURL(l.location),P=a.createURL(p),O;if(g&&l.errors){let z=Object.keys(l.errors)[0];O=c.findIndex(Y=>Y.route.id===z)}else if(b&&sn(b[1])){let z=b[0];O=c.findIndex(Y=>Y.route.id===z)-1}let G=b?b[1].statusCode:void 0,D=G&&G>=400,F={currentUrl:T,currentParams:l.matches[0]?.params||{},nextUrl:P,nextParams:c[0].params,...f,actionResult:A,actionStatus:G},H=Ds(c),W=c.map((z,Y)=>{let{route:Q}=z,I=null;if(O!=null&&Y>O?I=!1:Q.lazy?I=!0:fd(Q)?g?I=Yc(Q,l.loaderData,l.errors):y1(l.loaderData,l.matches[Y],z)&&(I=!0):I=!1,I!==null)return Xc(o,s,e,H,z,h,r,I);let K=!1;typeof j=="boolean"?K=j:D?K=!1:(y||T.pathname+T.search===P.pathname+P.search||T.search!==P.search||x1(l.matches[Y],z))&&(K=!0);let U={...F,defaultShouldRevalidate:K},L=gs(z,U);return Xc(o,s,e,H,z,h,r,L,U,j)}),M=[];return N.forEach((z,Y)=>{if(g||!c.some(re=>re.route.id===z.routeId)||w.has(Y))return;let Q=l.fetchers.get(Y),I=Q&&Q.state!=="idle"&&Q.data===void 0,K=Jr(E,z.path,_);if(!K){if(R&&I)return;M.push({key:Y,routeId:z.routeId,path:z.path,matches:null,match:null,request:null,controller:null});return}if(C.has(Y))return;let U=ll(K,z.path),L=new AbortController,B=fi(a,z.path,L.signal),oe=null;if(x.has(Y))x.delete(Y),oe=gi(o,s,B,K,U,h,r);else if(I)y&&(oe=gi(o,s,B,K,U,h,r));else{let re;typeof j=="boolean"?re=j:D?re=!1:re=y;let ce={...F,defaultShouldRevalidate:re};gs(U,ce)&&(oe=gi(o,s,B,K,U,h,r,ce))}oe&&M.push({key:Y,routeId:z.routeId,path:z.path,matches:oe,match:U,request:B,controller:L})}),{dsMatches:W,revalidatingFetchers:M}}function fd(e){return e.loader!=null||e.middleware!=null&&e.middleware.length>0}function Yc(e,r,o){if(e.lazy)return!0;if(!fd(e))return!1;let s=r!=null&&e.id in r,a=o!=null&&o[e.id]!==void 0;return!s&&a?!1:typeof e.loader=="function"&&e.loader.hydrate===!0?!0:!s&&!a}function y1(e,r,o){let s=!r||o.route.id!==r.route.id,a=!e.hasOwnProperty(o.route.id);return s||a}function x1(e,r){let o=e.route.path;return e.pathname!==r.pathname||o!=null&&o.endsWith("*")&&e.params["*"]!==r.params["*"]}function gs(e,r){if(e.route.shouldRevalidate){let o=e.route.shouldRevalidate(r);if(typeof o=="boolean")return o}return r.defaultShouldRevalidate}function Dp(e,r,o,s,a,l){let c;if(e){let h=s[e];$e(h,`No route found to patch children into: routeId = ${e}`),h.children||(h.children=[]),c=h.children}else c=o;let f=[],p=[];if(r.forEach(h=>{let g=c.find(y=>j0(h,y));g?p.push({existingRoute:g,newRoute:h}):f.push(h)}),f.length>0){let h=ws(f,a,[e||"_","patch",String(c?.length||"0")],s);c.push(...h)}if(l&&p.length>0)for(let h=0;h<p.length;h++){let{existingRoute:g,newRoute:y}=p[h],x=g,[w]=ws([y],a,[],{},!0);Object.assign(x,{element:w.element?w.element:x.element,errorElement:w.errorElement?w.errorElement:x.errorElement,hydrateFallbackElement:w.hydrateFallbackElement?w.hydrateFallbackElement:x.hydrateFallbackElement})}}function j0(e,r){return"id"in e&&"id"in r&&e.id===r.id?!0:e.index===r.index&&e.path===r.path&&e.caseSensitive===r.caseSensitive?(!e.children||e.children.length===0)&&(!r.children||r.children.length===0)?!0:e.children.every((o,s)=>r.children?.some(a=>j0(o,a))):!1}var Lp=new WeakMap,R0=({key:e,route:r,manifest:o,mapRouteProperties:s})=>{let a=o[r.id];if($e(a,"No route found in manifest"),!a.lazy||typeof a.lazy!="object")return;let l=a.lazy[e];if(!l)return;let c=Lp.get(a);c||(c={},Lp.set(a,c));let f=c[e];if(f)return f;let p=(async()=>{let h=zv(e),y=a[e]!==void 0&&e!=="hasErrorBoundary";if(h)mt(!h,"Route property "+e+" is not a supported lazy route property. This property will be ignored."),c[e]=Promise.resolve();else if(y)mt(!1,`Route "${a.id}" has a static property "${e}" defined. The lazy property will be ignored.`);else{let x=await l();x!=null&&(Object.assign(a,{[e]:x}),Object.assign(a,s(a)))}typeof a.lazy=="object"&&(a.lazy[e]=void 0,Object.values(a.lazy).every(x=>x===void 0)&&(a.lazy=void 0))})();return c[e]=p,p},zp=new WeakMap;function v1(e,r,o,s,a){let l=o[e.id];if($e(l,"No route found in manifest"),!e.lazy)return{lazyRoutePromise:void 0,lazyHandlerPromise:void 0};if(typeof e.lazy=="function"){let g=zp.get(l);if(g)return{lazyRoutePromise:g,lazyHandlerPromise:g};let y=(async()=>{$e(typeof e.lazy=="function","No lazy route function found");let x=await e.lazy(),w={};for(let N in x){let C=x[N];if(C===void 0)continue;let E=Av(N),R=l[N]!==void 0&&N!=="hasErrorBoundary";E?mt(!E,"Route property "+N+" is not a supported property to be returned from a lazy route function. This property will be ignored."):R?mt(!R,`Route "${l.id}" has a static property "${N}" defined but its lazy function is also returning a value for this property. The lazy route property "${N}" will be ignored.`):w[N]=C}Object.assign(l,w),Object.assign(l,{...s(l),lazy:void 0})})();return zp.set(l,y),y.catch(()=>{}),{lazyRoutePromise:y,lazyHandlerPromise:y}}let c=Object.keys(e.lazy),f=[],p;for(let g of c){if(a&&a.includes(g))continue;let y=R0({key:g,route:e,manifest:o,mapRouteProperties:s});y&&(f.push(y),g===r&&(p=y))}let h=f.length>0?Promise.all(f).then(()=>{}):void 0;return h?.catch(()=>{}),p?.catch(()=>{}),{lazyRoutePromise:h,lazyHandlerPromise:p}}async function Ip(e){let r=e.matches.filter(a=>a.shouldLoad),o={};return(await Promise.all(r.map(a=>a.resolve()))).forEach((a,l)=>{o[r[l].route.id]=a}),o}async function w1(e){return e.matches.some(r=>r.route.middleware)?P0(e,()=>Ip(e)):Ip(e)}function P0(e,r){return b1(e,r,s=>{if(L1(s))throw s;return s},P1,o);function o(s,a,l){if(l)return Promise.resolve(Object.assign(l.value,{[a]:{type:"error",result:s}}));{let{matches:c}=e,f=Math.min(Math.max(c.findIndex(h=>h.route.id===a),0),Math.max(c.findIndex(h=>h.shouldCallHandler()),0)),p=eo(c,c[f].route.id).route.id;return Promise.resolve({[p]:{type:"error",result:s}})}}}async function b1(e,r,o,s,a){let{matches:l,request:c,params:f,context:p,unstable_pattern:h}=e,g=l.flatMap(x=>x.route.middleware?x.route.middleware.map(w=>[x.route.id,w]):[]);return await M0({request:c,params:f,context:p,unstable_pattern:h},g,r,o,s,a)}async function M0(e,r,o,s,a,l,c=0){let{request:f}=e;if(f.signal.aborted)throw f.signal.reason??new Error(`Request aborted: ${f.method} ${f.url}`);let p=r[c];if(!p)return await o();let[h,g]=p,y,x=async()=>{if(y)throw new Error("You may only call `next()` once per middleware");try{return y={value:await M0(e,r,o,s,a,l,c+1)},y.value}catch(w){return y={value:await l(w,h,y)},y.value}};try{let w=await g(e,x),N=w!=null?s(w):void 0;return a(N)?N:y?N??y.value:(y={value:await x()},y.value)}catch(w){return await l(w,h,y)}}function T0(e,r,o,s,a){let l=R0({key:"middleware",route:s.route,manifest:r,mapRouteProperties:e}),c=v1(s.route,Lt(o.method)?"action":"loader",r,e,a);return{middleware:l,route:c.lazyRoutePromise,handler:c.lazyHandlerPromise}}function Xc(e,r,o,s,a,l,c,f,p=null,h){let g=!1,y=T0(e,r,o,a,l);return{...a,_lazyPromises:y,shouldLoad:f,shouldRevalidateArgs:p,shouldCallHandler(x){return g=!0,p?typeof h=="boolean"?gs(a,{...p,defaultShouldRevalidate:h}):typeof x=="boolean"?gs(a,{...p,defaultShouldRevalidate:x}):gs(a,p):f},resolve(x){let{lazy:w,loader:N,middleware:C}=a.route,E=g||f||x&&!Lt(o.method)&&(w||N),_=C&&C.length>0&&!N&&!w;return E&&(Lt(o.method)||!_)?N1({request:o,unstable_pattern:s,match:a,lazyHandlerPromise:y?.handler,lazyRoutePromise:y?.route,handlerOverride:x,scopedContext:c}):Promise.resolve({type:"data",result:void 0})}}}function gi(e,r,o,s,a,l,c,f=null){return s.map(p=>p.route.id!==a.route.id?{...p,shouldLoad:!1,shouldRevalidateArgs:f,shouldCallHandler:()=>!1,_lazyPromises:T0(e,r,o,p,l),resolve:()=>Promise.resolve({type:"data",result:void 0})}:Xc(e,r,o,Ds(s),p,l,c,!0,f))}async function _1(e,r,o,s,a,l){o.some(h=>h._lazyPromises?.middleware)&&await Promise.all(o.map(h=>h._lazyPromises?.middleware));let c={request:r,unstable_pattern:Ds(o),params:o[0].params,context:a,matches:o},p=await e({...c,fetcherKey:s,runClientMiddleware:h=>{let g=c;return P0(g,()=>h({...g,fetcherKey:s,runClientMiddleware:()=>{throw new Error("Cannot call `runClientMiddleware()` from within an `runClientMiddleware` handler")}}))}});try{await Promise.all(o.flatMap(h=>[h._lazyPromises?.handler,h._lazyPromises?.route]))}catch{}return p}async function N1({request:e,unstable_pattern:r,match:o,lazyHandlerPromise:s,lazyRoutePromise:a,handlerOverride:l,scopedContext:c}){let f,p,h=Lt(e.method),g=h?"action":"loader",y=x=>{let w,N=new Promise((_,R)=>w=R);p=()=>w(),e.signal.addEventListener("abort",p);let C=_=>typeof x!="function"?Promise.reject(new Error(`You cannot call the handler for a route which defines a boolean "${g}" [routeId: ${o.route.id}]`)):x({request:e,unstable_pattern:r,params:o.params,context:c},..._!==void 0?[_]:[]),E=(async()=>{try{return{type:"data",result:await(l?l(R=>C(R)):C())}}catch(_){return{type:"error",result:_}}})();return Promise.race([E,N])};try{let x=h?o.route.action:o.route.loader;if(s||a)if(x){let w,[N]=await Promise.all([y(x).catch(C=>{w=C}),s,a]);if(w!==void 0)throw w;f=N}else{await s;let w=h?o.route.action:o.route.loader;if(w)[f]=await Promise.all([y(w),a]);else if(g==="action"){let N=new URL(e.url),C=N.pathname+N.search;throw wn(405,{method:e.method,pathname:C,routeId:o.route.id})}else return{type:"data",result:void 0}}else if(x)f=await y(x);else{let w=new URL(e.url),N=w.pathname+w.search;throw wn(404,{pathname:N})}}catch(x){return{type:"error",result:x}}finally{p&&e.signal.removeEventListener("abort",p)}return f}async function S1(e){let r=e.headers.get("Content-Type");return r&&/\bapplication\/json\b/.test(r)?e.body==null?null:e.json():e.text()}async function E1(e){let{result:r,type:o}=e;if(hd(r)){let s;try{s=await S1(r)}catch(a){return{type:"error",error:a}}return o==="error"?{type:"error",error:new Ts(r.status,r.statusText,s),statusCode:r.status,headers:r.headers}:{type:"data",data:s,statusCode:r.status,headers:r.headers}}return o==="error"?Vp(r)?r.data instanceof Error?{type:"error",error:r.data,statusCode:r.init?.status,headers:r.init?.headers?new Headers(r.init.headers):void 0}:{type:"error",error:R1(r),statusCode:bs(r)?r.status:void 0,headers:r.init?.headers?new Headers(r.init.headers):void 0}:{type:"error",error:r,statusCode:bs(r)?r.status:void 0}:Vp(r)?{type:"data",data:r.data,statusCode:r.init?.status,headers:r.init?.headers?new Headers(r.init.headers):void 0}:{type:"data",data:r}}function C1(e,r,o,s,a){let l=e.headers.get("Location");if($e(l,"Redirects returned/thrown from loaders/actions must have a Location header"),!ud(l)){let c=s.slice(0,s.findIndex(f=>f.route.id===o)+1);l=Wc(new URL(r.url),c,a,l),e.headers.set("Location",l)}return e}function Ap(e,r,o,s){let a=["about:","blob:","chrome:","chrome-untrusted:","content:","data:","devtools:","file:","filesystem:","javascript:"];if(ud(e)){let l=e,c=l.startsWith("//")?new URL(r.protocol+l):new URL(l);if(a.includes(c.protocol))throw new Error("Invalid redirect location");let f=bn(c.pathname,o)!=null;if(c.origin===r.origin&&f)return c.pathname+c.search+c.hash}try{let l=s.createURL(e);if(a.includes(l.protocol))throw new Error("Invalid redirect location")}catch{}return e}function fi(e,r,o,s){let a=e.createURL(D0(r)).toString(),l={signal:o};if(s&&Lt(s.formMethod)){let{formMethod:c,formEncType:f}=s;l.method=c.toUpperCase(),f==="application/json"?(l.headers=new Headers({"Content-Type":f}),l.body=JSON.stringify(s.json)):f==="text/plain"?l.body=s.text:f==="application/x-www-form-urlencoded"&&s.formData?l.body=Gc(s.formData):l.body=s.formData}return new Request(a,l)}function Gc(e){let r=new URLSearchParams;for(let[o,s]of e.entries())r.append(o,typeof s=="string"?s:s.name);return r}function $p(e){let r=new FormData;for(let[o,s]of e.entries())r.append(o,s);return r}function k1(e,r,o,s=!1,a=!1){let l={},c=null,f,p=!1,h={},g=o&&sn(o[1])?o[1].error:void 0;return e.forEach(y=>{if(!(y.route.id in r))return;let x=y.route.id,w=r[x];if($e(!Eo(w),"Cannot handle redirect results in processLoaderData"),sn(w)){let N=w.error;if(g!==void 0&&(N=g,g=void 0),c=c||{},a)c[x]=N;else{let C=eo(e,x);c[C.route.id]==null&&(c[C.route.id]=N)}s||(l[x]=k0),p||(p=!0,f=bs(w.error)?w.error.status:500),w.headers&&(h[x]=w.headers)}else l[x]=w.data,w.statusCode&&w.statusCode!==200&&!p&&(f=w.statusCode),w.headers&&(h[x]=w.headers)}),g!==void 0&&o&&(c={[o[0]]:g},o[2]&&(l[o[2]]=void 0)),{loaderData:l,errors:c,statusCode:f||200,loaderHeaders:h}}function Fp(e,r,o,s,a,l){let{loaderData:c,errors:f}=k1(r,o,s);return a.filter(p=>!p.matches||p.matches.some(h=>h.shouldLoad)).forEach(p=>{let{key:h,match:g,controller:y}=p;if(y&&y.signal.aborted)return;let x=l[h];if($e(x,"Did not find corresponding fetcher result"),sn(x)){let w=eo(e.matches,g?.route.id);f&&f[w.route.id]||(f={...f,[w.route.id]:x.error}),e.fetchers.delete(h)}else if(Eo(x))$e(!1,"Unhandled fetcher revalidation redirect");else{let w=_r(x.data);e.fetchers.set(h,w)}}),{loaderData:c,errors:f}}function Op(e,r,o,s){let a=Object.entries(r).filter(([,l])=>l!==k0).reduce((l,[c,f])=>(l[c]=f,l),{});for(let l of o){let c=l.route.id;if(!r.hasOwnProperty(c)&&e.hasOwnProperty(c)&&l.route.loader&&(a[c]=e[c]),s&&s.hasOwnProperty(c))break}return a}function Hp(e){return e?sn(e[1])?{actionData:{}}:{actionData:{[e[0]]:e[1].data}}:{}}function eo(e,r){return(r?e.slice(0,e.findIndex(s=>s.route.id===r)+1):[...e]).reverse().find(s=>s.route.hasErrorBoundary===!0)||e[0]}function Ga(e){let r=e.length===1?e[0]:e.find(o=>o.index||!o.path||o.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:r}],route:r}}function wn(e,{pathname:r,routeId:o,method:s,type:a,message:l}={}){let c="Unknown Server Error",f="Unknown @remix-run/router error";return e===400?(c="Bad Request",s&&r&&o?f=`You made a ${s} request to "${r}" but did not provide a \`loader\` for route "${o}", so there is no way to handle the request.`:a==="invalid-body"&&(f="Unable to encode submission body")):e===403?(c="Forbidden",f=`Route "${o}" does not match URL "${r}"`):e===404?(c="Not Found",f=`No route matches URL "${r}"`):e===405&&(c="Method Not Allowed",s&&r&&o?f=`You made a ${s.toUpperCase()} request to "${r}" but did not provide an \`action\` for route "${o}", so there is no way to handle the request.`:s&&(f=`Invalid request method "${s.toUpperCase()}"`)),new Ts(e||500,c,new Error(f),!0)}function Ka(e){let r=Object.entries(e);for(let o=r.length-1;o>=0;o--){let[s,a]=r[o];if(Eo(a))return{key:s,result:a}}}function D0(e){let r=typeof e=="string"?ro(e):e;return er({...r,hash:""})}function j1(e,r){return e.pathname!==r.pathname||e.search!==r.search?!1:e.hash===""?r.hash!=="":e.hash===r.hash?!0:r.hash!==""}function R1(e){return new Ts(e.init?.status??500,e.init?.statusText??"Internal Server Error",e.data)}function P1(e){return e!=null&&typeof e=="object"&&Object.entries(e).every(([r,o])=>typeof r=="string"&&M1(o))}function M1(e){return e!=null&&typeof e=="object"&&"type"in e&&"result"in e&&(e.type==="data"||e.type==="error")}function T1(e){return hd(e.result)&&E0.has(e.result.status)}function sn(e){return e.type==="error"}function Eo(e){return(e&&e.type)==="redirect"}function Vp(e){return typeof e=="object"&&e!=null&&"type"in e&&"data"in e&&"init"in e&&e.type==="DataWithResponseInit"}function hd(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.headers=="object"&&typeof e.body<"u"}function D1(e){return E0.has(e)}function L1(e){return hd(e)&&D1(e.status)&&e.headers.has("Location")}function z1(e){return d1.has(e.toUpperCase())}function Lt(e){return u1.has(e.toUpperCase())}function pd(e){return new URLSearchParams(e).getAll("index").some(r=>r==="")}function ll(e,r){let o=typeof r=="string"?ro(r).search:r.search;if(e[e.length-1].route.index&&pd(o||""))return e[e.length-1];let s=w0(e);return s[s.length-1]}function Bp(e){let{formMethod:r,formAction:o,formEncType:s,text:a,formData:l,json:c}=e;if(!(!r||!o||!s)){if(a!=null)return{formMethod:r,formAction:o,formEncType:s,formData:void 0,json:void 0,text:a};if(l!=null)return{formMethod:r,formAction:o,formEncType:s,formData:l,json:void 0,text:void 0};if(c!==void 0)return{formMethod:r,formAction:o,formEncType:s,formData:void 0,json:c,text:void 0}}}function Rc(e,r){return r?{state:"loading",location:e,formMethod:r.formMethod,formAction:r.formAction,formEncType:r.formEncType,formData:r.formData,json:r.json,text:r.text}:{state:"loading",location:e,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function I1(e,r){return{state:"submitting",location:e,formMethod:r.formMethod,formAction:r.formAction,formEncType:r.formEncType,formData:r.formData,json:r.json,text:r.text}}function ls(e,r){return e?{state:"loading",formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text,data:r}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:r}}function A1(e,r){return{state:"submitting",formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text,data:r?r.data:void 0}}function _r(e){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function $1(e,r){try{let o=e.sessionStorage.getItem(C0);if(o){let s=JSON.parse(o);for(let[a,l]of Object.entries(s||{}))l&&Array.isArray(l)&&r.set(a,new Set(l||[]))}}catch{}}function F1(e,r){if(r.size>0){let o={};for(let[s,a]of r)o[s]=[...a];try{e.sessionStorage.setItem(C0,JSON.stringify(o))}catch(s){mt(!1,`Failed to save applied view transitions in sessionStorage (${s}).`)}}}function Up(){let e,r,o=new Promise((s,a)=>{e=async l=>{s(l);try{await o}catch{}},r=async l=>{a(l);try{await o}catch{}}});return{promise:o,resolve:e,reject:r}}var zo=S.createContext(null);zo.displayName="DataRouter";var Ls=S.createContext(null);Ls.displayName="DataRouterState";var L0=S.createContext(!1);function O1(){return S.useContext(L0)}var md=S.createContext({isTransitioning:!1});md.displayName="ViewTransition";var z0=S.createContext(new Map);z0.displayName="Fetchers";var H1=S.createContext(null);H1.displayName="Await";var _n=S.createContext(null);_n.displayName="Navigation";var Rl=S.createContext(null);Rl.displayName="Location";var nr=S.createContext({outlet:null,matches:[],isDataRoute:!1});nr.displayName="Route";var gd=S.createContext(null);gd.displayName="RouteError";var I0="REACT_ROUTER_ERROR",V1="REDIRECT",B1="ROUTE_ERROR_RESPONSE";function U1(e){if(e.startsWith(`${I0}:${V1}:{`))try{let r=JSON.parse(e.slice(28));if(typeof r=="object"&&r&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.location=="string"&&typeof r.reloadDocument=="boolean"&&typeof r.replace=="boolean")return r}catch{}}function W1(e){if(e.startsWith(`${I0}:${B1}:{`))try{let r=JSON.parse(e.slice(40));if(typeof r=="object"&&r&&typeof r.status=="number"&&typeof r.statusText=="string")return new Ts(r.status,r.statusText,r.data)}catch{}}function Y1(e,{relative:r}={}){$e(zs(),"useHref() may be used only in the context of a <Router> component.");let{basename:o,navigator:s}=S.useContext(_n),{hash:a,pathname:l,search:c}=Is(e,{relative:r}),f=l;return o!=="/"&&(f=l==="/"?o:qn([o,l])),s.createHref({pathname:f,search:c,hash:a})}function zs(){return S.useContext(Rl)!=null}function Io(){return $e(zs(),"useLocation() may be used only in the context of a <Router> component."),S.useContext(Rl).location}var A0="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function $0(e){S.useContext(_n).static||S.useLayoutEffect(e)}function yd(){let{isDataRoute:e}=S.useContext(nr);return e?aw():X1()}function X1(){$e(zs(),"useNavigate() may be used only in the context of a <Router> component.");let e=S.useContext(zo),{basename:r,navigator:o}=S.useContext(_n),{matches:s}=S.useContext(nr),{pathname:a}=Io(),l=JSON.stringify(cd(s)),c=S.useRef(!1);return $0(()=>{c.current=!0}),S.useCallback((p,h={})=>{if(mt(c.current,A0),!c.current)return;if(typeof p=="number"){o.go(p);return}let g=dd(p,JSON.parse(l),a,h.relative==="path");e==null&&r!=="/"&&(g.pathname=g.pathname==="/"?r:qn([r,g.pathname])),(h.replace?o.replace:o.push)(g,h.state,h)},[r,o,l,a,e])}var G1=S.createContext(null);function K1(e){let r=S.useContext(nr).outlet;return S.useMemo(()=>r&&S.createElement(G1.Provider,{value:e},r),[r,e])}function Is(e,{relative:r}={}){let{matches:o}=S.useContext(nr),{pathname:s}=Io(),a=JSON.stringify(cd(o));return S.useMemo(()=>dd(e,JSON.parse(a),s,r==="path"),[e,a,s,r])}function Z1(e,r,o,s,a){$e(zs(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:l}=S.useContext(_n),{matches:c}=S.useContext(nr),f=c[c.length-1],p=f?f.params:{},h=f?f.pathname:"/",g=f?f.pathnameBase:"/",y=f&&f.route;{let R=y&&y.path||"";O0(h,!y||R.endsWith("*")||R.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${h}" (under <Route path="${R}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${R}"> to <Route path="${R==="/"?"*":`${R}/*`}">.`)}let x=Io(),w;w=x;let N=w.pathname||"/",C=N;if(g!=="/"){let R=g.replace(/^\//,"").split("/");C="/"+N.replace(/^\//,"").split("/").slice(R.length).join("/")}let E=Jr(e,{pathname:C});return mt(y||E!=null,`No routes matched location "${w.pathname}${w.search}${w.hash}" `),mt(E==null||E[E.length-1].route.element!==void 0||E[E.length-1].route.Component!==void 0||E[E.length-1].route.lazy!==void 0,`Matched leaf route at location "${w.pathname}${w.search}${w.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`),tw(E&&E.map(R=>Object.assign({},R,{params:Object.assign({},p,R.params),pathname:qn([g,l.encodeLocation?l.encodeLocation(R.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:R.pathname]),pathnameBase:R.pathnameBase==="/"?g:qn([g,l.encodeLocation?l.encodeLocation(R.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:R.pathnameBase])})),c,o,s,a)}function Q1(){let e=sw(),r=bs(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),o=e instanceof Error?e.stack:null,s="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:s},l={padding:"2px 4px",backgroundColor:s},c=null;return console.error("Error handled by React Router default ErrorBoundary:",e),c=S.createElement(S.Fragment,null,S.createElement("p",null," Hey developer "),S.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",S.createElement("code",{style:l},"ErrorBoundary")," or"," ",S.createElement("code",{style:l},"errorElement")," prop on your route.")),S.createElement(S.Fragment,null,S.createElement("h2",null,"Unexpected Application Error!"),S.createElement("h3",{style:{fontStyle:"italic"}},r),o?S.createElement("pre",{style:a},o):null,c)}var q1=S.createElement(Q1,null),F0=class extends S.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,r){return r.location!==e.location||r.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:r.error,location:r.location,revalidation:e.revalidation||r.revalidation}}componentDidCatch(e,r){this.props.onError?this.props.onError(e,r):console.error("React Router caught the following error during render",e)}render(){let e=this.state.error;if(this.context&&typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){const o=W1(e.digest);o&&(e=o)}let r=e!==void 0?S.createElement(nr.Provider,{value:this.props.routeContext},S.createElement(gd.Provider,{value:e,children:this.props.component})):this.props.children;return this.context?S.createElement(J1,{error:e},r):r}};F0.contextType=L0;var Pc=new WeakMap;function J1({children:e,error:r}){let{basename:o}=S.useContext(_n);if(typeof r=="object"&&r&&"digest"in r&&typeof r.digest=="string"){let s=U1(r.digest);if(s){let a=Pc.get(r);if(a)throw a;let l=_0(s.location,o);if(b0&&!Pc.get(r))if(l.isExternal||s.reloadDocument)window.location.href=l.absoluteURL||l.to;else{const c=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(l.to,{replace:s.replace}));throw Pc.set(r,c),c}return S.createElement("meta",{httpEquiv:"refresh",content:`0;url=${l.absoluteURL||l.to}`})}}return e}function ew({routeContext:e,match:r,children:o}){let s=S.useContext(zo);return s&&s.static&&s.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=r.route.id),S.createElement(nr.Provider,{value:e},o)}function tw(e,r=[],o=null,s=null,a=null){if(e==null){if(!o)return null;if(o.errors)e=o.matches;else if(r.length===0&&!o.initialized&&o.matches.length>0)e=o.matches;else return null}let l=e,c=o?.errors;if(c!=null){let g=l.findIndex(y=>y.route.id&&c?.[y.route.id]!==void 0);$e(g>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(c).join(",")}`),l=l.slice(0,Math.min(l.length,g+1))}let f=!1,p=-1;if(o)for(let g=0;g<l.length;g++){let y=l[g];if((y.route.HydrateFallback||y.route.hydrateFallbackElement)&&(p=g),y.route.id){let{loaderData:x,errors:w}=o,N=y.route.loader&&!x.hasOwnProperty(y.route.id)&&(!w||w[y.route.id]===void 0);if(y.route.lazy||N){f=!0,p>=0?l=l.slice(0,p+1):l=[l[0]];break}}}let h=o&&s?(g,y)=>{s(g,{location:o.location,params:o.matches?.[0]?.params??{},unstable_pattern:Ds(o.matches),errorInfo:y})}:void 0;return l.reduceRight((g,y,x)=>{let w,N=!1,C=null,E=null;o&&(w=c&&y.route.id?c[y.route.id]:void 0,C=y.route.errorElement||q1,f&&(p<0&&x===0?(O0("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),N=!0,E=null):p===x&&(N=!0,E=y.route.hydrateFallbackElement||null)));let _=r.concat(l.slice(0,x+1)),R=()=>{let b;return w?b=C:N?b=E:y.route.Component?b=S.createElement(y.route.Component,null):y.route.element?b=y.route.element:b=g,S.createElement(ew,{match:y,routeContext:{outlet:g,matches:_,isDataRoute:o!=null},children:b})};return o&&(y.route.ErrorBoundary||y.route.errorElement||x===0)?S.createElement(F0,{location:o.location,revalidation:o.revalidation,component:C,error:w,children:R(),routeContext:{outlet:null,matches:_,isDataRoute:!0},onError:h}):R()},null)}function xd(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function nw(e){let r=S.useContext(zo);return $e(r,xd(e)),r}function rw(e){let r=S.useContext(Ls);return $e(r,xd(e)),r}function ow(e){let r=S.useContext(nr);return $e(r,xd(e)),r}function vd(e){let r=ow(e),o=r.matches[r.matches.length-1];return $e(o.route.id,`${e} can only be used on routes that contain a unique "id"`),o.route.id}function iw(){return vd("useRouteId")}function sw(){let e=S.useContext(gd),r=rw("useRouteError"),o=vd("useRouteError");return e!==void 0?e:r.errors?.[o]}function aw(){let{router:e}=nw("useNavigate"),r=vd("useNavigate"),o=S.useRef(!1);return $0(()=>{o.current=!0}),S.useCallback(async(a,l={})=>{mt(o.current,A0),o.current&&(typeof a=="number"?await e.navigate(a):await e.navigate(a,{fromRouteId:r,...l}))},[e,r])}var Wp={};function O0(e,r,o){!r&&!Wp[e]&&(Wp[e]=!0,mt(!1,o))}var Yp={};function Xp(e,r){!e&&!Yp[r]&&(Yp[r]=!0,console.warn(r))}var lw="useOptimistic",Gp=Nv[lw],uw=()=>{};function cw(e){return Gp?Gp(e):[e,uw]}function dw(e){let r={hasErrorBoundary:e.hasErrorBoundary||e.ErrorBoundary!=null||e.errorElement!=null};return e.Component&&(e.element&&mt(!1,"You should not include both `Component` and `element` on your route - `Component` will be used."),Object.assign(r,{element:S.createElement(e.Component),Component:void 0})),e.HydrateFallback&&(e.hydrateFallbackElement&&mt(!1,"You should not include both `HydrateFallback` and `hydrateFallbackElement` on your route - `HydrateFallback` will be used."),Object.assign(r,{hydrateFallbackElement:S.createElement(e.HydrateFallback),HydrateFallback:void 0})),e.ErrorBoundary&&(e.errorElement&&mt(!1,"You should not include both `ErrorBoundary` and `errorElement` on your route - `ErrorBoundary` will be used."),Object.assign(r,{errorElement:S.createElement(e.ErrorBoundary),ErrorBoundary:void 0})),r}var fw=["HydrateFallback","hydrateFallbackElement"],hw=class{constructor(){this.status="pending",this.promise=new Promise((e,r)=>{this.resolve=o=>{this.status==="pending"&&(this.status="resolved",e(o))},this.reject=o=>{this.status==="pending"&&(this.status="rejected",r(o))}})}};function pw({router:e,flushSync:r,onError:o,unstable_useTransitions:s}){s=O1()||s;let[l,c]=S.useState(e.state),[f,p]=cw(l),[h,g]=S.useState(),[y,x]=S.useState({isTransitioning:!1}),[w,N]=S.useState(),[C,E]=S.useState(),[_,R]=S.useState(),b=S.useRef(new Map),j=S.useCallback((O,{deletedFetchers:G,newErrors:D,flushSync:F,viewTransitionOpts:H})=>{D&&o&&Object.values(D).forEach(M=>o(M,{location:O.location,params:O.matches[0]?.params??{},unstable_pattern:Ds(O.matches)})),O.fetchers.forEach((M,z)=>{M.data!==void 0&&b.current.set(z,M.data)}),G.forEach(M=>b.current.delete(M)),Xp(F===!1||r!=null,'You provided the `flushSync` option to a router update, but you are not using the `<RouterProvider>` from `react-router/dom` so `ReactDOM.flushSync()` is unavailable.  Please update your app to `import { RouterProvider } from "react-router/dom"` and ensure you have `react-dom` installed as a dependency to use the `flushSync` option.');let W=e.window!=null&&e.window.document!=null&&typeof e.window.document.startViewTransition=="function";if(Xp(H==null||W,"You provided the `viewTransition` option to a router update, but you do not appear to be running in a DOM environment as `window.startViewTransition` is not available."),!H||!W){r&&F?r(()=>c(O)):s===!1?c(O):S.startTransition(()=>{s===!0&&p(M=>Kp(M,O)),c(O)});return}if(r&&F){r(()=>{C&&(w?.resolve(),C.skipTransition()),x({isTransitioning:!0,flushSync:!0,currentLocation:H.currentLocation,nextLocation:H.nextLocation})});let M=e.window.document.startViewTransition(()=>{r(()=>c(O))});M.finished.finally(()=>{r(()=>{N(void 0),E(void 0),g(void 0),x({isTransitioning:!1})})}),r(()=>E(M));return}C?(w?.resolve(),C.skipTransition(),R({state:O,currentLocation:H.currentLocation,nextLocation:H.nextLocation})):(g(O),x({isTransitioning:!0,flushSync:!1,currentLocation:H.currentLocation,nextLocation:H.nextLocation}))},[e.window,r,C,w,s,p,o]);S.useLayoutEffect(()=>e.subscribe(j),[e,j]),S.useEffect(()=>{y.isTransitioning&&!y.flushSync&&N(new hw)},[y]),S.useEffect(()=>{if(w&&h&&e.window){let O=h,G=w.promise,D=e.window.document.startViewTransition(async()=>{s===!1?c(O):S.startTransition(()=>{s===!0&&p(F=>Kp(F,O)),c(O)}),await G});D.finished.finally(()=>{N(void 0),E(void 0),g(void 0),x({isTransitioning:!1})}),E(D)}},[h,w,e.window,s,p]),S.useEffect(()=>{w&&h&&f.location.key===h.location.key&&w.resolve()},[w,C,f.location,h]),S.useEffect(()=>{!y.isTransitioning&&_&&(g(_.state),x({isTransitioning:!0,flushSync:!1,currentLocation:_.currentLocation,nextLocation:_.nextLocation}),R(void 0))},[y.isTransitioning,_]);let A=S.useMemo(()=>({createHref:e.createHref,encodeLocation:e.encodeLocation,go:O=>e.navigate(O),push:(O,G,D)=>e.navigate(O,{state:G,preventScrollReset:D?.preventScrollReset}),replace:(O,G,D)=>e.navigate(O,{replace:!0,state:G,preventScrollReset:D?.preventScrollReset})}),[e]),T=e.basename||"/",P=S.useMemo(()=>({router:e,navigator:A,static:!1,basename:T,onError:o}),[e,A,T,o]);return S.createElement(S.Fragment,null,S.createElement(zo.Provider,{value:P},S.createElement(Ls.Provider,{value:f},S.createElement(z0.Provider,{value:b.current},S.createElement(md.Provider,{value:y},S.createElement(xw,{basename:T,location:f.location,navigationType:f.historyAction,navigator:A,unstable_useTransitions:s},S.createElement(mw,{routes:e.routes,future:e.future,state:f,onError:o})))))),null)}function Kp(e,r){return{...e,navigation:r.navigation.state!=="idle"?r.navigation:e.navigation,revalidation:r.revalidation!=="idle"?r.revalidation:e.revalidation,actionData:r.navigation.state!=="submitting"?r.actionData:e.actionData,fetchers:r.fetchers}}var mw=S.memo(gw);function gw({routes:e,future:r,state:o,onError:s}){return Z1(e,void 0,o,s,r)}function yw(e){return K1(e.context)}function xw({basename:e="/",children:r=null,location:o,navigationType:s="POP",navigator:a,static:l=!1,unstable_useTransitions:c}){$e(!zs(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let f=e.replace(/^\/*/,"/"),p=S.useMemo(()=>({basename:f,navigator:a,static:l,unstable_useTransitions:c,future:{}}),[f,a,l,c]);typeof o=="string"&&(o=ro(o));let{pathname:h="/",search:g="",hash:y="",state:x=null,key:w="default"}=o,N=S.useMemo(()=>{let C=bn(h,f);return C==null?null:{location:{pathname:C,search:g,hash:y,state:x,key:w},navigationType:s}},[f,h,g,y,x,w,s]);return mt(N!=null,`<Router basename="${f}"> is not able to match the URL "${h}${g}${y}" because it does not start with the basename, so the <Router> won't render anything.`),N==null?null:S.createElement(_n.Provider,{value:p},S.createElement(Rl.Provider,{children:r,value:N}))}var ul="get",cl="application/x-www-form-urlencoded";function Pl(e){return typeof HTMLElement<"u"&&e instanceof HTMLElement}function vw(e){return Pl(e)&&e.tagName.toLowerCase()==="button"}function ww(e){return Pl(e)&&e.tagName.toLowerCase()==="form"}function bw(e){return Pl(e)&&e.tagName.toLowerCase()==="input"}function _w(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function Nw(e,r){return e.button===0&&(!r||r==="_self")&&!_w(e)}var Za=null;function Sw(){if(Za===null)try{new FormData(document.createElement("form"),0),Za=!1}catch{Za=!0}return Za}var Ew=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Mc(e){return e!=null&&!Ew.has(e)?(mt(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${cl}"`),null):e}function Cw(e,r){let o,s,a,l,c;if(ww(e)){let f=e.getAttribute("action");s=f?bn(f,r):null,o=e.getAttribute("method")||ul,a=Mc(e.getAttribute("enctype"))||cl,l=new FormData(e)}else if(vw(e)||bw(e)&&(e.type==="submit"||e.type==="image")){let f=e.form;if(f==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let p=e.getAttribute("formaction")||f.getAttribute("action");if(s=p?bn(p,r):null,o=e.getAttribute("formmethod")||f.getAttribute("method")||ul,a=Mc(e.getAttribute("formenctype"))||Mc(f.getAttribute("enctype"))||cl,l=new FormData(f,e),!Sw()){let{name:h,type:g,value:y}=e;if(g==="image"){let x=h?`${h}.`:"";l.append(`${x}x`,"0"),l.append(`${x}y`,"0")}else h&&l.append(h,y)}}else{if(Pl(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');o=ul,s=null,a=cl,c=e}return l&&a==="text/plain"&&(c=l,l=void 0),{action:s,method:o.toLowerCase(),encType:a,formData:l,body:c}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function wd(e,r){if(e===!1||e===null||typeof e>"u")throw new Error(r)}function kw(e,r,o,s){let a=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return o?a.pathname.endsWith("/")?a.pathname=`${a.pathname}_.${s}`:a.pathname=`${a.pathname}.${s}`:a.pathname==="/"?a.pathname=`_root.${s}`:r&&bn(a.pathname,r)==="/"?a.pathname=`${r.replace(/\/$/,"")}/_root.${s}`:a.pathname=`${a.pathname.replace(/\/$/,"")}.${s}`,a}async function jw(e,r){if(e.id in r)return r[e.id];try{let o=await import(e.module);return r[e.id]=o,o}catch(o){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(o),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Rw(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function Pw(e,r,o){let s=await Promise.all(e.map(async a=>{let l=r.routes[a.route.id];if(l){let c=await jw(l,o);return c.links?c.links():[]}return[]}));return Lw(s.flat(1).filter(Rw).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function Zp(e,r,o,s,a,l){let c=(p,h)=>o[h]?p.route.id!==o[h].route.id:!0,f=(p,h)=>o[h].pathname!==p.pathname||o[h].route.path?.endsWith("*")&&o[h].params["*"]!==p.params["*"];return l==="assets"?r.filter((p,h)=>c(p,h)||f(p,h)):l==="data"?r.filter((p,h)=>{let g=s.routes[p.route.id];if(!g||!g.hasLoader)return!1;if(c(p,h)||f(p,h))return!0;if(p.route.shouldRevalidate){let y=p.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:o[0]?.params||{},nextUrl:new URL(e,window.origin),nextParams:p.params,defaultShouldRevalidate:!0});if(typeof y=="boolean")return y}return!0}):[]}function Mw(e,r,{includeHydrateFallback:o}={}){return Tw(e.map(s=>{let a=r.routes[s.route.id];if(!a)return[];let l=[a.module];return a.clientActionModule&&(l=l.concat(a.clientActionModule)),a.clientLoaderModule&&(l=l.concat(a.clientLoaderModule)),o&&a.hydrateFallbackModule&&(l=l.concat(a.hydrateFallbackModule)),a.imports&&(l=l.concat(a.imports)),l}).flat(1))}function Tw(e){return[...new Set(e)]}function Dw(e){let r={},o=Object.keys(e).sort();for(let s of o)r[s]=e[s];return r}function Lw(e,r){let o=new Set;return new Set(r),e.reduce((s,a)=>{let l=JSON.stringify(Dw(a));return o.has(l)||(o.add(l),s.push({key:l,link:a})),s},[])}function H0(){let e=S.useContext(zo);return wd(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function zw(){let e=S.useContext(Ls);return wd(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var bd=S.createContext(void 0);bd.displayName="FrameworkContext";function V0(){let e=S.useContext(bd);return wd(e,"You must render this element inside a <HydratedRouter> element"),e}function Iw(e,r){let o=S.useContext(bd),[s,a]=S.useState(!1),[l,c]=S.useState(!1),{onFocus:f,onBlur:p,onMouseEnter:h,onMouseLeave:g,onTouchStart:y}=r,x=S.useRef(null);S.useEffect(()=>{if(e==="render"&&c(!0),e==="viewport"){let C=_=>{_.forEach(R=>{c(R.isIntersecting)})},E=new IntersectionObserver(C,{threshold:.5});return x.current&&E.observe(x.current),()=>{E.disconnect()}}},[e]),S.useEffect(()=>{if(s){let C=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(C)}}},[s]);let w=()=>{a(!0)},N=()=>{a(!1),c(!1)};return o?e!=="intent"?[l,x,{}]:[l,x,{onFocus:us(f,w),onBlur:us(p,N),onMouseEnter:us(h,w),onMouseLeave:us(g,N),onTouchStart:us(y,w)}]:[!1,x,{}]}function us(e,r){return o=>{e&&e(o),o.defaultPrevented||r(o)}}function Aw({page:e,...r}){let{router:o}=H0(),s=S.useMemo(()=>Jr(o.routes,e,o.basename),[o.routes,e,o.basename]);return s?S.createElement(Fw,{page:e,matches:s,...r}):null}function $w(e){let{manifest:r,routeModules:o}=V0(),[s,a]=S.useState([]);return S.useEffect(()=>{let l=!1;return Pw(e,r,o).then(c=>{l||a(c)}),()=>{l=!0}},[e,r,o]),s}function Fw({page:e,matches:r,...o}){let s=Io(),{future:a,manifest:l,routeModules:c}=V0(),{basename:f}=H0(),{loaderData:p,matches:h}=zw(),g=S.useMemo(()=>Zp(e,r,h,l,s,"data"),[e,r,h,l,s]),y=S.useMemo(()=>Zp(e,r,h,l,s,"assets"),[e,r,h,l,s]),x=S.useMemo(()=>{if(e===s.pathname+s.search+s.hash)return[];let C=new Set,E=!1;if(r.forEach(R=>{let b=l.routes[R.route.id];!b||!b.hasLoader||(!g.some(j=>j.route.id===R.route.id)&&R.route.id in p&&c[R.route.id]?.shouldRevalidate||b.hasClientLoader?E=!0:C.add(R.route.id))}),C.size===0)return[];let _=kw(e,f,a.unstable_trailingSlashAwareDataRequests,"data");return E&&C.size>0&&_.searchParams.set("_routes",r.filter(R=>C.has(R.route.id)).map(R=>R.route.id).join(",")),[_.pathname+_.search]},[f,a.unstable_trailingSlashAwareDataRequests,p,s,l,g,r,e,c]),w=S.useMemo(()=>Mw(y,l),[y,l]),N=$w(y);return S.createElement(S.Fragment,null,x.map(C=>S.createElement("link",{key:C,rel:"prefetch",as:"fetch",href:C,...o})),w.map(C=>S.createElement("link",{key:C,rel:"modulepreload",href:C,...o})),N.map(({key:C,link:E})=>S.createElement("link",{key:C,nonce:o.nonce,...E,crossOrigin:E.crossOrigin??o.crossOrigin})))}function Ow(...e){return r=>{e.forEach(o=>{typeof o=="function"?o(r):o!=null&&(o.current=r)})}}var Hw=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Hw&&(window.__reactRouterVersion="7.13.0")}catch{}function Vw(e,r){return m1({basename:r?.basename,getContext:r?.getContext,future:r?.future,history:Mv({window:r?.window}),hydrationData:Bw(),routes:e,mapRouteProperties:dw,hydrationRouteProperties:fw,dataStrategy:r?.dataStrategy,patchRoutesOnNavigation:r?.patchRoutesOnNavigation,window:r?.window,unstable_instrumentations:r?.unstable_instrumentations}).initialize()}function Bw(){let e=window?.__staticRouterHydrationData;return e&&e.errors&&(e={...e,errors:Uw(e.errors)}),e}function Uw(e){if(!e)return null;let r=Object.entries(e),o={};for(let[s,a]of r)if(a&&a.__type==="RouteErrorResponse")o[s]=new Ts(a.status,a.statusText,a.data,a.internal===!0);else if(a&&a.__type==="Error"){if(a.__subType){let l=window[a.__subType];if(typeof l=="function")try{let c=new l(a.message);c.stack="",o[s]=c}catch{}}if(o[s]==null){let l=new Error(a.message);l.stack="",o[s]=l}}else o[s]=a;return o}var B0=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,_d=S.forwardRef(function({onClick:r,discover:o="render",prefetch:s="none",relative:a,reloadDocument:l,replace:c,state:f,target:p,to:h,preventScrollReset:g,viewTransition:y,unstable_defaultShouldRevalidate:x,...w},N){let{basename:C,unstable_useTransitions:E}=S.useContext(_n),_=typeof h=="string"&&B0.test(h),R=_0(h,C);h=R.to;let b=Y1(h,{relative:a}),[j,A,T]=Iw(s,w),P=Xw(h,{replace:c,state:f,target:p,preventScrollReset:g,relative:a,viewTransition:y,unstable_defaultShouldRevalidate:x,unstable_useTransitions:E});function O(D){r&&r(D),D.defaultPrevented||P(D)}let G=S.createElement("a",{...w,...T,href:R.absoluteURL||b,onClick:R.isExternal||l?r:O,ref:Ow(N,A),target:p,"data-discover":!_&&o==="render"?"true":void 0});return j&&!_?S.createElement(S.Fragment,null,G,S.createElement(Aw,{page:b})):G});_d.displayName="Link";var Kc=S.forwardRef(function({"aria-current":r="page",caseSensitive:o=!1,className:s="",end:a=!1,style:l,to:c,viewTransition:f,children:p,...h},g){let y=Is(c,{relative:h.relative}),x=Io(),w=S.useContext(Ls),{navigator:N,basename:C}=S.useContext(_n),E=w!=null&&qw(y)&&f===!0,_=N.encodeLocation?N.encodeLocation(y).pathname:y.pathname,R=x.pathname,b=w&&w.navigation&&w.navigation.location?w.navigation.location.pathname:null;o||(R=R.toLowerCase(),b=b?b.toLowerCase():null,_=_.toLowerCase()),b&&C&&(b=bn(b,C)||b);const j=_!=="/"&&_.endsWith("/")?_.length-1:_.length;let A=R===_||!a&&R.startsWith(_)&&R.charAt(j)==="/",T=b!=null&&(b===_||!a&&b.startsWith(_)&&b.charAt(_.length)==="/"),P={isActive:A,isPending:T,isTransitioning:E},O=A?r:void 0,G;typeof s=="function"?G=s(P):G=[s,A?"active":null,T?"pending":null,E?"transitioning":null].filter(Boolean).join(" ");let D=typeof l=="function"?l(P):l;return S.createElement(_d,{...h,"aria-current":O,className:G,ref:g,style:D,to:c,viewTransition:f},typeof p=="function"?p(P):p)});Kc.displayName="NavLink";var Ww=S.forwardRef(({discover:e="render",fetcherKey:r,navigate:o,reloadDocument:s,replace:a,state:l,method:c=ul,action:f,onSubmit:p,relative:h,preventScrollReset:g,viewTransition:y,unstable_defaultShouldRevalidate:x,...w},N)=>{let{unstable_useTransitions:C}=S.useContext(_n),E=Zw(),_=Qw(f,{relative:h}),R=c.toLowerCase()==="get"?"get":"post",b=typeof f=="string"&&B0.test(f),j=A=>{if(p&&p(A),A.defaultPrevented)return;A.preventDefault();let T=A.nativeEvent.submitter,P=T?.getAttribute("formmethod")||c,O=()=>E(T||A.currentTarget,{fetcherKey:r,method:P,navigate:o,replace:a,state:l,relative:h,preventScrollReset:g,viewTransition:y,unstable_defaultShouldRevalidate:x});C&&o!==!1?S.startTransition(()=>O()):O()};return S.createElement("form",{ref:N,method:R,action:_,onSubmit:s?p:j,...w,"data-discover":!b&&e==="render"?"true":void 0})});Ww.displayName="Form";function Yw(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function U0(e){let r=S.useContext(zo);return $e(r,Yw(e)),r}function Xw(e,{target:r,replace:o,state:s,preventScrollReset:a,relative:l,viewTransition:c,unstable_defaultShouldRevalidate:f,unstable_useTransitions:p}={}){let h=yd(),g=Io(),y=Is(e,{relative:l});return S.useCallback(x=>{if(Nw(x,r)){x.preventDefault();let w=o!==void 0?o:er(g)===er(y),N=()=>h(e,{replace:w,state:s,preventScrollReset:a,relative:l,viewTransition:c,unstable_defaultShouldRevalidate:f});p?S.startTransition(()=>N()):N()}},[g,h,y,o,s,r,e,a,l,c,f,p])}var Gw=0,Kw=()=>`__${String(++Gw)}__`;function Zw(){let{router:e}=U0("useSubmit"),{basename:r}=S.useContext(_n),o=iw(),s=e.fetch,a=e.navigate;return S.useCallback(async(l,c={})=>{let{action:f,method:p,encType:h,formData:g,body:y}=Cw(l,r);if(c.navigate===!1){let x=c.fetcherKey||Kw();await s(x,o,c.action||f,{unstable_defaultShouldRevalidate:c.unstable_defaultShouldRevalidate,preventScrollReset:c.preventScrollReset,formData:g,body:y,formMethod:c.method||p,formEncType:c.encType||h,flushSync:c.flushSync})}else await a(c.action||f,{unstable_defaultShouldRevalidate:c.unstable_defaultShouldRevalidate,preventScrollReset:c.preventScrollReset,formData:g,body:y,formMethod:c.method||p,formEncType:c.encType||h,replace:c.replace,state:c.state,fromRouteId:o,flushSync:c.flushSync,viewTransition:c.viewTransition})},[s,a,r,o])}function Qw(e,{relative:r}={}){let{basename:o}=S.useContext(_n),s=S.useContext(nr);$e(s,"useFormAction must be used inside a RouteContext");let[a]=s.matches.slice(-1),l={...Is(e||".",{relative:r})},c=Io();if(e==null){l.search=c.search;let f=new URLSearchParams(l.search),p=f.getAll("index");if(p.some(g=>g==="")){f.delete("index"),p.filter(y=>y).forEach(y=>f.append("index",y));let g=f.toString();l.search=g?`?${g}`:""}}return(!e||e===".")&&a.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),o!=="/"&&(l.pathname=l.pathname==="/"?o:qn([o,l.pathname])),er(l)}function qw(e,{relative:r}={}){let o=S.useContext(md);$e(o!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=U0("useViewTransitionState"),a=Is(e,{relative:r});if(!o.isTransitioning)return!1;let l=bn(o.currentLocation.pathname,s)||o.currentLocation.pathname,c=bn(o.nextLocation.pathname,s)||o.nextLocation.pathname;return gl(a.pathname,c)!=null||gl(a.pathname,l)!=null}var W0=p0();function Jw(e){return S.createElement(pw,{flushSync:W0.flushSync,...e})}const eb=[{label:"Overview",items:[{to:"/",label:"Dashboard",icon:nb}]},{label:"Call Routing",items:[{to:"/call-flows",label:"Call Flows",icon:rb},{to:"/inbound-numbers",label:"Inbound Numbers",icon:ob},{to:"/time-switches",label:"Time Switches",icon:ib},{to:"/ivr-menus",label:"IVR Menus",icon:sb},{to:"/ring-groups",label:"Ring Groups",icon:ab}]},{label:"Resources",items:[{to:"/extensions",label:"Extensions",icon:lb},{to:"/trunks",label:"Trunks",icon:ub},{to:"/voicemail",label:"Voicemail Boxes",icon:cb},{to:"/conferences",label:"Conferences",icon:db},{to:"/prompts",label:"Audio Prompts",icon:mb}]},{label:"History",items:[{to:"/call-history",label:"Call History",icon:fb},{to:"/recordings",label:"Recordings",icon:hb}]}];function tb(){const[e,r]=S.useState(!1);return u.jsxs("div",{className:"min-h-screen bg-gray-50 flex",children:[e&&u.jsx("div",{className:"fixed inset-0 bg-black/30 z-20 lg:hidden",onClick:()=>r(!1)}),u.jsxs("aside",{className:`fixed inset-y-0 left-0 z-30 w-60 bg-gray-900 text-gray-300 flex flex-col transform transition-transform duration-200 lg:translate-x-0 lg:static lg:z-auto ${e?"translate-x-0":"-translate-x-full"}`,children:[u.jsx("div",{className:"flex items-center gap-2 px-4 h-14 border-b border-gray-800 shrink-0",children:u.jsx("span",{className:"text-lg font-bold text-white tracking-tight",children:"FlowPBX"})}),u.jsx("nav",{className:"flex-1 overflow-y-auto py-3 px-2 space-y-4",children:eb.map(o=>u.jsxs("div",{children:[u.jsx("p",{className:"px-2 mb-1 text-xs font-semibold uppercase tracking-wider text-gray-500",children:o.label}),u.jsx("ul",{className:"space-y-0.5",children:o.items.map(s=>u.jsx("li",{children:u.jsxs(Kc,{to:s.to,end:s.to==="/",onClick:()=>r(!1),className:({isActive:a})=>`flex items-center gap-2.5 px-2 py-1.5 text-sm rounded-md transition-colors ${a?"bg-gray-800 text-white font-medium":"hover:bg-gray-800/60 hover:text-white"}`,children:[u.jsx(s.icon,{className:"w-4 h-4 shrink-0"}),s.label]})},s.to))})]},o.label))}),u.jsx("div",{className:"border-t border-gray-800 p-2 shrink-0",children:u.jsxs(Kc,{to:"/settings",onClick:()=>r(!1),className:({isActive:o})=>`flex items-center gap-2.5 px-2 py-1.5 text-sm rounded-md transition-colors ${o?"bg-gray-800 text-white font-medium":"hover:bg-gray-800/60 hover:text-white"}`,children:[u.jsx(pb,{className:"w-4 h-4 shrink-0"}),"Settings"]})})]}),u.jsxs("div",{className:"flex-1 flex flex-col min-w-0",children:[u.jsxs("header",{className:"h-14 bg-white border-b border-gray-200 flex items-center justify-between px-4 shrink-0",children:[u.jsx("button",{type:"button",className:"lg:hidden p-1.5 -ml-1.5 rounded-md text-gray-500 hover:text-gray-700 hover:bg-gray-100",onClick:()=>r(!0),children:u.jsx(gb,{className:"w-5 h-5"})}),u.jsx("div",{className:"lg:hidden"}),u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("span",{className:"text-sm text-gray-500",children:"Admin"}),u.jsx("a",{href:"/api/v1/auth/logout",onClick:o=>{o.preventDefault(),fetch("/api/v1/auth/logout",{method:"POST",credentials:"same-origin"}).then(()=>{window.location.href="/login"})},className:"text-sm text-gray-500 hover:text-gray-700",children:"Logout"})]})]}),u.jsx("main",{className:"flex-1 overflow-y-auto p-6",children:u.jsx(yw,{})})]})]})}function nb({className:e}){return u.jsx("svg",{className:e,viewBox:"0 0 20 20",fill:"currentColor",children:u.jsx("path",{d:"M3 4a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1H4a1 1 0 01-1-1V4zm8 0a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1h-4a1 1 0 01-1-1V4zM3 12a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1H4a1 1 0 01-1-1v-4zm8 0a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1h-4a1 1 0 01-1-1v-4z"})})}function rb({className:e}){return u.jsx("svg",{className:e,viewBox:"0 0 20 20",fill:"currentColor",children:u.jsx("path",{fillRule:"evenodd",d:"M6 2a2 2 0 00-2 2v1a2 2 0 002 2h1v2H5a2 2 0 00-2 2v1a2 2 0 002 2h1v2a2 2 0 002 2h4a2 2 0 002-2v-2h1a2 2 0 002-2v-1a2 2 0 00-2-2h-2V7h1a2 2 0 002-2V4a2 2 0 00-2-2H6zm0 2h8v1H6V4zm-1 7h10v1H5v-1zm3 5h4v1H8v-1z",clipRule:"evenodd"})})}function ob({className:e}){return u.jsx("svg",{className:e,viewBox:"0 0 20 20",fill:"currentColor",children:u.jsx("path",{d:"M2 3a1 1 0 011-1h2.153a1 1 0 01.986.836l.74 4.435a1 1 0 01-.54 1.06l-1.548.773a11.037 11.037 0 006.105 6.105l.774-1.548a1 1 0 011.059-.54l4.435.74a1 1 0 01.836.986V17a1 1 0 01-1 1h-2C7.82 18 2 12.18 2 5V3z"})})}function ib({className:e}){return u.jsx("svg",{className:e,viewBox:"0 0 20 20",fill:"currentColor",children:u.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z",clipRule:"evenodd"})})}function sb({className:e}){return u.jsx("svg",{className:e,viewBox:"0 0 20 20",fill:"currentColor",children:u.jsx("path",{fillRule:"evenodd",d:"M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 5a1 1 0 011-1h6a1 1 0 110 2H4a1 1 0 01-1-1z",clipRule:"evenodd"})})}function ab({className:e}){return u.jsx("svg",{className:e,viewBox:"0 0 20 20",fill:"currentColor",children:u.jsx("path",{d:"M13 6a3 3 0 11-6 0 3 3 0 016 0zm5 2a2 2 0 11-4 0 2 2 0 014 0zm-4 7a4 4 0 00-8 0v3h8v-3zM6 8a2 2 0 11-4 0 2 2 0 014 0zm10 10v-3a5.972 5.972 0 00-.75-2.906A3.005 3.005 0 0119 15v3h-3zM4.75 12.094A5.973 5.973 0 004 15v3H1v-3a3 3 0 013.75-2.906z"})})}function lb({className:e}){return u.jsx("svg",{className:e,viewBox:"0 0 20 20",fill:"currentColor",children:u.jsx("path",{fillRule:"evenodd",d:"M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z",clipRule:"evenodd"})})}function ub({className:e}){return u.jsx("svg",{className:e,viewBox:"0 0 20 20",fill:"currentColor",children:u.jsx("path",{fillRule:"evenodd",d:"M2 5a2 2 0 012-2h12a2 2 0 012 2v2a2 2 0 01-2 2H4a2 2 0 01-2-2V5zm14 1a1 1 0 11-2 0 1 1 0 012 0zM2 13a2 2 0 012-2h12a2 2 0 012 2v2a2 2 0 01-2 2H4a2 2 0 01-2-2v-2zm14 1a1 1 0 11-2 0 1 1 0 012 0z",clipRule:"evenodd"})})}function cb({className:e}){return u.jsx("svg",{className:e,viewBox:"0 0 20 20",fill:"currentColor",children:u.jsx("path",{d:"M18 10c0 3.866-3.582 7-8 7a8.841 8.841 0 01-4.083-.98L2 17l1.338-3.123C2.493 12.767 2 11.434 2 10c0-3.866 3.582-7 8-7s8 3.134 8 7z"})})}function db({className:e}){return u.jsx("svg",{className:e,viewBox:"0 0 20 20",fill:"currentColor",children:u.jsx("path",{fillRule:"evenodd",d:"M7 4a3 3 0 016 0v4a3 3 0 11-6 0V4zm4 10.93A7.001 7.001 0 0017 8a1 1 0 10-2 0A5 5 0 015 8a1 1 0 00-2 0 7.001 7.001 0 006 6.93V17H6a1 1 0 100 2h8a1 1 0 100-2h-3v-2.07z",clipRule:"evenodd"})})}function fb({className:e}){return u.jsx("svg",{className:e,viewBox:"0 0 20 20",fill:"currentColor",children:u.jsx("path",{fillRule:"evenodd",d:"M3 3a1 1 0 000 2v8a2 2 0 002 2h2.586l-1.293 1.293a1 1 0 101.414 1.414L10 15.414l2.293 2.293a1 1 0 001.414-1.414L12.414 15H15a2 2 0 002-2V5a1 1 0 100-2H3zm11 4a1 1 0 10-2 0v4a1 1 0 102 0V7zm-3 1a1 1 0 10-2 0v3a1 1 0 102 0V8zM8 9a1 1 0 00-2 0v2a1 1 0 102 0V9z",clipRule:"evenodd"})})}function hb({className:e}){return u.jsx("svg",{className:e,viewBox:"0 0 20 20",fill:"currentColor",children:u.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z",clipRule:"evenodd"})})}function pb({className:e}){return u.jsx("svg",{className:e,viewBox:"0 0 20 20",fill:"currentColor",children:u.jsx("path",{fillRule:"evenodd",d:"M11.49 3.17c-.38-1.56-2.6-1.56-2.98 0a1.532 1.532 0 01-2.286.948c-1.372-.836-2.942.734-2.106 2.106.54.886.061 2.042-.947 2.287-1.561.379-1.561 2.6 0 2.978a1.532 1.532 0 01.947 2.287c-.836 1.372.734 2.942 2.106 2.106a1.532 1.532 0 012.287.947c.379 1.561 2.6 1.561 2.978 0a1.533 1.533 0 012.287-.947c1.372.836 2.942-.734 2.106-2.106a1.533 1.533 0 01.947-2.287c1.561-.379 1.561-2.6 0-2.978a1.532 1.532 0 01-.947-2.287c.836-1.372-.734-2.942-2.106-2.106a1.532 1.532 0 01-2.287-.947zM10 13a3 3 0 100-6 3 3 0 000 6z",clipRule:"evenodd"})})}function mb({className:e}){return u.jsx("svg",{className:e,viewBox:"0 0 20 20",fill:"currentColor",children:u.jsx("path",{fillRule:"evenodd",d:"M9.383 3.076A1 1 0 0110 4v12a1 1 0 01-1.707.707L4.586 13H2a1 1 0 01-1-1V8a1 1 0 011-1h2.586l3.707-3.707a1 1 0 011.09-.217zM14.657 2.929a1 1 0 011.414 0A9.972 9.972 0 0119 10a9.972 9.972 0 01-2.929 7.071 1 1 0 01-1.414-1.414A7.971 7.971 0 0017 10c0-2.21-.894-4.208-2.343-5.657a1 1 0 010-1.414zm-2.829 2.828a1 1 0 011.415 0A5.983 5.983 0 0115 10a5.984 5.984 0 01-1.757 4.243 1 1 0 01-1.415-1.415A3.984 3.984 0 0013 10a3.983 3.983 0 00-1.172-2.828 1 1 0 010-1.415z",clipRule:"evenodd"})})}function gb({className:e}){return u.jsx("svg",{className:e,viewBox:"0 0 20 20",fill:"currentColor",children:u.jsx("path",{fillRule:"evenodd",d:"M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z",clipRule:"evenodd"})})}const yb="/api/v1";class qe extends Error{status;constructor(r,o){super(o),this.name="ApiError",this.status=r}}function xb(){const e=document.cookie.split("; ").find(r=>r.startsWith("flowpbx_csrf="));return e?e.split("=")[1]:null}function vb(e,r){const o=new URL(yb+e,window.location.origin);if(r)for(const[s,a]of Object.entries(r))a!==void 0&&o.searchParams.set(s,String(a));return o.pathname+o.search}async function Ml(e,r,o){const s=vb(r,o?.params),a={Accept:"application/json"};if(o?.body!==void 0&&(a["Content-Type"]="application/json"),e!=="GET"&&e!=="HEAD"){const f=xb();f&&(a["X-CSRF-Token"]=f)}const l=await fetch(s,{method:e,headers:a,credentials:"same-origin",body:o?.body!==void 0?JSON.stringify(o.body):void 0});if(l.status===401){const f=window.location.pathname;throw f!=="/login"&&f!=="/setup"&&(window.location.href="/login"),new qe(l.status,"authentication required")}const c=await l.json();if(!l.ok||c.error)throw new qe(l.status,c.error??`request failed with status ${l.status}`);return c.data}function Nn(e,r){return Ml("GET",e,{params:r})}function Sn(e,r){return Ml("POST",e,{body:r})}function rr(e,r){return Ml("PUT",e,{body:r})}function or(e){return Ml("DELETE",e)}function As(e,r){return Nn(e,r)}function wb(){return Nn("/health")}function bb(e){return Sn("/auth/login",e)}function _b(e){return Sn("/setup",e)}function Nb(){const e=yd(),[r,o]=S.useState(""),[s,a]=S.useState(""),[l,c]=S.useState(""),[f,p]=S.useState(!1),[h,g]=S.useState(!0);S.useEffect(()=>{let x=!1;return wb().then(w=>{!x&&w.needs_setup&&e("/setup",{replace:!0})}).catch(()=>{}).finally(()=>{x||g(!1)}),()=>{x=!0}},[e]);async function y(x){x.preventDefault(),c(""),p(!0);try{await bb({username:r,password:s}),e("/",{replace:!0})}catch(w){w instanceof qe?c(w.message):c("unable to connect to server")}finally{p(!1)}}return h?u.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:u.jsx("p",{className:"text-sm text-gray-400",children:"Loading"})}):u.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center px-4",children:u.jsxs("div",{className:"w-full max-w-sm",children:[u.jsxs("div",{className:"text-center mb-8",children:[u.jsx("h1",{className:"text-2xl font-bold text-gray-900 tracking-tight",children:"FlowPBX"}),u.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Sign in to your account"})]}),u.jsxs("form",{onSubmit:y,className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 space-y-4",children:[l&&u.jsx("div",{className:"rounded-md bg-red-50 border border-red-200 px-3 py-2",children:u.jsx("p",{className:"text-sm text-red-700",children:l})}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-700 mb-1",children:"Username"}),u.jsx("input",{id:"username",type:"text",required:!0,autoComplete:"username",autoFocus:!0,value:r,onChange:x=>o(x.target.value),className:"block w-full rounded-md border border-gray-300 px-3 py-2 text-sm text-gray-900 placeholder-gray-400 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500",placeholder:"admin"})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),u.jsx("input",{id:"password",type:"password",required:!0,autoComplete:"current-password",value:s,onChange:x=>a(x.target.value),className:"block w-full rounded-md border border-gray-300 px-3 py-2 text-sm text-gray-900 placeholder-gray-400 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500"})]}),u.jsx("button",{type:"submit",disabled:f,className:"w-full rounded-md bg-blue-600 px-3 py-2 text-sm font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:f?"Signing in":"Sign in"})]})]})})}const Qa=["Admin Account","Hostname","SIP Ports","First Trunk","First Extension","License Key","Review"],Sb={admin_username:"admin",admin_password:"",admin_password_confirm:"",hostname:"",sip_port:5060,sip_tls_port:5061,rtp_port_min:1e4,rtp_port_max:2e4,trunk_name:"",trunk_host:"",trunk_port:5060,trunk_username:"",trunk_password:"",trunk_transport:"udp",skip_trunk:!1,ext_number:"100",ext_name:"",ext_password:"",skip_extension:!1,license_key:"",skip_license:!1},_t="block w-full rounded-md border border-gray-300 px-3 py-2 text-sm text-gray-900 placeholder-gray-400 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500",Nt="block text-sm font-medium text-gray-700 mb-1";function Eb(){const e=yd(),[r,o]=S.useState(0),[s,a]=S.useState(Sb),[l,c]=S.useState(""),[f,p]=S.useState(!1);function h(_,R){a(b=>({...b,[_]:R}))}function g(){switch(r){case 0:return s.admin_username.trim()?s.admin_password.length<8?"Password must be at least 8 characters":s.admin_password!==s.admin_password_confirm?"Passwords do not match":null:"Username is required";case 1:return s.hostname.trim()?null:"Hostname or IP address is required";case 2:return s.sip_port<1||s.sip_port>65535?"SIP port must be 1-65535":s.sip_tls_port<1||s.sip_tls_port>65535?"SIP TLS port must be 1-65535":s.rtp_port_min<1024?"RTP port min must be at least 1024":s.rtp_port_max>65535?"RTP port max must be at most 65535":s.rtp_port_min>=s.rtp_port_max?"RTP port min must be less than max":null;case 3:{if(!s.skip_trunk){if(!s.trunk_name.trim())return"Trunk name is required";if(!s.trunk_host.trim())return"Trunk host is required"}return null}case 4:{if(!s.skip_extension){if(!s.ext_number.trim())return"Extension number is required";if(!s.ext_name.trim())return"Display name is required";if(s.ext_password.length<8)return"SIP password must be at least 8 characters"}return null}default:return null}}function y(_){_.preventDefault();const R=g();if(R){c(R);return}c(""),o(b=>b+1)}function x(){c(""),o(_=>_-1)}async function w(_){_.preventDefault(),c(""),p(!0);try{await _b({admin_username:s.admin_username.trim(),admin_password:s.admin_password,hostname:s.hostname.trim(),sip_port:s.sip_port,sip_tls_port:s.sip_tls_port,rtp_port_min:s.rtp_port_min,rtp_port_max:s.rtp_port_max}),e("/login",{replace:!0})}catch(R){R instanceof qe?c(R.message):c("unable to connect to server")}finally{p(!1)}}function N(){switch(r){case 0:return u.jsxs("div",{className:"space-y-4",children:[u.jsx("p",{className:"text-sm text-gray-500",children:"Create the initial administrator account."}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"admin_username",className:Nt,children:"Username"}),u.jsx("input",{id:"admin_username",type:"text",required:!0,autoComplete:"username",autoFocus:!0,value:s.admin_username,onChange:_=>h("admin_username",_.target.value),className:_t})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"admin_password",className:Nt,children:"Password"}),u.jsx("input",{id:"admin_password",type:"password",required:!0,autoComplete:"new-password",value:s.admin_password,onChange:_=>h("admin_password",_.target.value),className:_t,placeholder:"Minimum 8 characters"})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"admin_password_confirm",className:Nt,children:"Confirm Password"}),u.jsx("input",{id:"admin_password_confirm",type:"password",required:!0,autoComplete:"new-password",value:s.admin_password_confirm,onChange:_=>h("admin_password_confirm",_.target.value),className:_t})]})]});case 1:return u.jsxs("div",{className:"space-y-4",children:[u.jsx("p",{className:"text-sm text-gray-500",children:"Enter the hostname or public IP address that SIP devices and trunks will use to reach this PBX."}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"hostname",className:Nt,children:"Hostname / External IP"}),u.jsx("input",{id:"hostname",type:"text",required:!0,autoFocus:!0,value:s.hostname,onChange:_=>h("hostname",_.target.value),className:_t,placeholder:"pbx.example.com or 203.0.113.10"})]})]});case 2:return u.jsxs("div",{className:"space-y-4",children:[u.jsx("p",{className:"text-sm text-gray-500",children:"Configure SIP signaling and RTP media port ranges. Defaults work for most installations."}),u.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:"sip_port",className:Nt,children:"SIP UDP/TCP Port"}),u.jsx("input",{id:"sip_port",type:"number",required:!0,autoFocus:!0,min:1,max:65535,value:s.sip_port,onChange:_=>h("sip_port",Number(_.target.value)),className:_t})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"sip_tls_port",className:Nt,children:"SIP TLS Port"}),u.jsx("input",{id:"sip_tls_port",type:"number",required:!0,min:1,max:65535,value:s.sip_tls_port,onChange:_=>h("sip_tls_port",Number(_.target.value)),className:_t})]})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:"rtp_port_min",className:Nt,children:"RTP Port Min"}),u.jsx("input",{id:"rtp_port_min",type:"number",required:!0,min:1024,max:65535,value:s.rtp_port_min,onChange:_=>h("rtp_port_min",Number(_.target.value)),className:_t})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"rtp_port_max",className:Nt,children:"RTP Port Max"}),u.jsx("input",{id:"rtp_port_max",type:"number",required:!0,min:1024,max:65535,value:s.rtp_port_max,onChange:_=>h("rtp_port_max",Number(_.target.value)),className:_t})]})]})]});case 3:return u.jsxs("div",{className:"space-y-4",children:[u.jsx("p",{className:"text-sm text-gray-500",children:"Optionally configure your first SIP trunk to connect to an upstream provider."}),u.jsxs("label",{className:"flex items-center gap-2 text-sm text-gray-700",children:[u.jsx("input",{type:"checkbox",checked:s.skip_trunk,onChange:_=>h("skip_trunk",_.target.checked),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),"Skip  I'll add a trunk later"]}),!s.skip_trunk&&u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:"trunk_name",className:Nt,children:"Trunk Name"}),u.jsx("input",{id:"trunk_name",type:"text",value:s.trunk_name,onChange:_=>h("trunk_name",_.target.value),className:_t,placeholder:"My SIP Provider"})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:"trunk_host",className:Nt,children:"Host"}),u.jsx("input",{id:"trunk_host",type:"text",value:s.trunk_host,onChange:_=>h("trunk_host",_.target.value),className:_t,placeholder:"sip.provider.com"})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"trunk_port",className:Nt,children:"Port"}),u.jsx("input",{id:"trunk_port",type:"number",min:1,max:65535,value:s.trunk_port,onChange:_=>h("trunk_port",Number(_.target.value)),className:_t})]})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"trunk_transport",className:Nt,children:"Transport"}),u.jsxs("select",{id:"trunk_transport",value:s.trunk_transport,onChange:_=>h("trunk_transport",_.target.value),className:_t,children:[u.jsx("option",{value:"udp",children:"UDP"}),u.jsx("option",{value:"tcp",children:"TCP"}),u.jsx("option",{value:"tls",children:"TLS"})]})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"trunk_username",className:Nt,children:"Username"}),u.jsx("input",{id:"trunk_username",type:"text",value:s.trunk_username,onChange:_=>h("trunk_username",_.target.value),className:_t,autoComplete:"off"})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"trunk_password",className:Nt,children:"Password"}),u.jsx("input",{id:"trunk_password",type:"password",value:s.trunk_password,onChange:_=>h("trunk_password",_.target.value),className:_t,autoComplete:"off"})]})]})]});case 4:return u.jsxs("div",{className:"space-y-4",children:[u.jsx("p",{className:"text-sm text-gray-500",children:"Optionally create your first extension so a phone can register immediately."}),u.jsxs("label",{className:"flex items-center gap-2 text-sm text-gray-700",children:[u.jsx("input",{type:"checkbox",checked:s.skip_extension,onChange:_=>h("skip_extension",_.target.checked),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),"Skip  I'll add extensions later"]}),!s.skip_extension&&u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:"ext_number",className:Nt,children:"Extension Number"}),u.jsx("input",{id:"ext_number",type:"text",value:s.ext_number,onChange:_=>h("ext_number",_.target.value),className:_t,placeholder:"100"})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"ext_name",className:Nt,children:"Display Name"}),u.jsx("input",{id:"ext_name",type:"text",value:s.ext_name,onChange:_=>h("ext_name",_.target.value),className:_t,placeholder:"John Smith"})]})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"ext_password",className:Nt,children:"SIP Password"}),u.jsx("input",{id:"ext_password",type:"password",value:s.ext_password,onChange:_=>h("ext_password",_.target.value),className:_t,placeholder:"Minimum 8 characters",autoComplete:"off"})]})]})]});case 5:return u.jsxs("div",{className:"space-y-4",children:[u.jsx("p",{className:"text-sm text-gray-500",children:"Enter your FlowPBX license key, or skip to use the free tier."}),u.jsxs("label",{className:"flex items-center gap-2 text-sm text-gray-700",children:[u.jsx("input",{type:"checkbox",checked:s.skip_license,onChange:_=>h("skip_license",_.target.checked),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),"Skip  use free tier"]}),!s.skip_license&&u.jsxs("div",{children:[u.jsx("label",{htmlFor:"license_key",className:Nt,children:"License Key"}),u.jsx("input",{id:"license_key",type:"text",value:s.license_key,onChange:_=>h("license_key",_.target.value),className:_t,placeholder:"XXXX-XXXX-XXXX-XXXX",autoComplete:"off"})]})]});case 6:return u.jsxs("div",{className:"space-y-4",children:[u.jsx("p",{className:"text-sm text-gray-500",children:"Review your settings before completing setup."}),u.jsxs("dl",{className:"divide-y divide-gray-100 text-sm",children:[u.jsx(Zr,{label:"Admin Username",value:s.admin_username}),u.jsx(Zr,{label:"Hostname",value:s.hostname}),u.jsx(Zr,{label:"SIP Port",value:String(s.sip_port)}),u.jsx(Zr,{label:"SIP TLS Port",value:String(s.sip_tls_port)}),u.jsx(Zr,{label:"RTP Ports",value:`${s.rtp_port_min}  ${s.rtp_port_max}`}),u.jsx(Zr,{label:"First Trunk",value:s.skip_trunk?"Skipped":`${s.trunk_name} (${s.trunk_host})`}),u.jsx(Zr,{label:"First Extension",value:s.skip_extension?"Skipped":`${s.ext_number}  ${s.ext_name}`}),u.jsx(Zr,{label:"License",value:s.skip_license?"Free tier":s.license_key||"(empty)"})]})]})}}const C=r===Qa.length-1,E=C?w:y;return u.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center px-4",children:u.jsxs("div",{className:"w-full max-w-lg",children:[u.jsxs("div",{className:"text-center mb-8",children:[u.jsx("h1",{className:"text-2xl font-bold text-gray-900 tracking-tight",children:"FlowPBX Setup"}),u.jsxs("p",{className:"mt-1 text-sm text-gray-500",children:["Step ",r+1," of ",Qa.length]})]}),u.jsx("div",{className:"mb-6",children:u.jsx("div",{className:"flex gap-1",children:Qa.map((_,R)=>u.jsx("div",{className:`h-1 flex-1 rounded-full transition-colors ${R<=r?"bg-blue-600":"bg-gray-200"}`},R))})}),u.jsxs("form",{onSubmit:E,className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[u.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:Qa[r]}),l&&u.jsx("div",{className:"rounded-md bg-red-50 border border-red-200 px-3 py-2 mb-4",children:u.jsx("p",{className:"text-sm text-red-700",children:l})}),N(),u.jsxs("div",{className:"flex justify-between mt-6 pt-4 border-t border-gray-100",children:[u.jsx("button",{type:"button",onClick:x,disabled:r===0,className:"rounded-md border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50 disabled:opacity-30 disabled:cursor-not-allowed transition-colors",children:"Back"}),u.jsx("button",{type:"submit",disabled:f,className:"rounded-md bg-blue-600 px-4 py-2 text-sm font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:C?f?"Finishing":"Finish Setup":"Next"})]})]})]})})}function Zr({label:e,value:r}){return u.jsxs("div",{className:"flex justify-between py-2",children:[u.jsx("dt",{className:"text-gray-500",children:e}),u.jsx("dd",{className:"font-medium text-gray-900",children:r})]})}const Cb={active_calls:0,registered_devices:0,total_extensions:0,total_trunks:0,recent_cdrs:[]};function kb(){const[e,r]=S.useState(Cb),[o,s]=S.useState(!0);S.useEffect(()=>{let l=!1;return Nn("/dashboard/stats").then(c=>{l||r(c)}).catch(()=>{}).finally(()=>{l||s(!1)}),()=>{l=!0}},[]);function a(l){const c=Math.floor(l/60),f=l%60;return`${c}:${f.toString().padStart(2,"0")}`}return u.jsxs("div",{children:[u.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Dashboard"}),u.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"System overview and recent activity."}),u.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mt-6",children:[u.jsx(qa,{label:"Active Calls",value:e.active_calls,loading:o,color:"blue"}),u.jsx(qa,{label:"Registered Devices",value:e.registered_devices,loading:o,color:"green"}),u.jsx(qa,{label:"Extensions",value:e.total_extensions,loading:o,color:"gray"}),u.jsx(qa,{label:"Trunks",value:e.total_trunks,loading:o,color:"gray"})]}),u.jsxs("div",{className:"mt-8",children:[u.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Recent Calls"}),u.jsx("div",{className:"overflow-x-auto border border-gray-200 rounded-lg",children:u.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[u.jsx("thead",{className:"bg-gray-50",children:u.jsxs("tr",{children:[u.jsx("th",{className:"px-4 py-2.5 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Time"}),u.jsx("th",{className:"px-4 py-2.5 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Direction"}),u.jsx("th",{className:"px-4 py-2.5 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"From"}),u.jsx("th",{className:"px-4 py-2.5 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"To"}),u.jsx("th",{className:"px-4 py-2.5 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Duration"}),u.jsx("th",{className:"px-4 py-2.5 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"})]})}),u.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:o?u.jsx("tr",{children:u.jsx("td",{colSpan:6,className:"px-4 py-8 text-center text-sm text-gray-400",children:"Loading..."})}):e.recent_cdrs.length===0?u.jsx("tr",{children:u.jsx("td",{colSpan:6,className:"px-4 py-8 text-center text-sm text-gray-400",children:"No recent calls."})}):e.recent_cdrs.map(l=>u.jsxs("tr",{children:[u.jsx("td",{className:"px-4 py-2.5 text-sm text-gray-900 whitespace-nowrap",children:new Date(l.timestamp).toLocaleString()}),u.jsx("td",{className:"px-4 py-2.5 text-sm text-gray-900",children:u.jsx(jb,{direction:l.direction})}),u.jsx("td",{className:"px-4 py-2.5 text-sm text-gray-900",children:l.caller}),u.jsx("td",{className:"px-4 py-2.5 text-sm text-gray-900",children:l.callee}),u.jsx("td",{className:"px-4 py-2.5 text-sm text-gray-900",children:a(l.duration)}),u.jsx("td",{className:"px-4 py-2.5 text-sm",children:u.jsx(Rb,{status:l.status})})]},l.id))})]})})]})]})}function qa({label:e,value:r,loading:o,color:s}){const a={blue:"text-blue-600",green:"text-green-600",gray:"text-gray-900"};return u.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[u.jsx("p",{className:"text-sm font-medium text-gray-500",children:e}),u.jsx("p",{className:`mt-1 text-2xl font-bold ${a[s]}`,children:o?"":r})]})}function jb({direction:e}){const r=e==="inbound";return u.jsx("span",{className:`inline-flex items-center rounded-full px-2 py-0.5 text-xs font-medium ${r?"bg-blue-50 text-blue-700":"bg-gray-100 text-gray-700"}`,children:r?"In":"Out"})}function Rb({status:e}){const r={answered:"bg-green-50 text-green-700",missed:"bg-red-50 text-red-700",busy:"bg-yellow-50 text-yellow-700",failed:"bg-red-50 text-red-700"};return u.jsx("span",{className:`inline-flex items-center rounded-full px-2 py-0.5 text-xs font-medium ${r[e]??"bg-gray-100 text-gray-700"}`,children:e})}function gt(e){if(typeof e=="string"||typeof e=="number")return""+e;let r="";if(Array.isArray(e))for(let o=0,s;o<e.length;o++)(s=gt(e[o]))!==""&&(r+=(r&&" ")+s);else for(let o in e)e[o]&&(r+=(r&&" ")+o);return r}var Pb={value:()=>{}};function Tl(){for(var e=0,r=arguments.length,o={},s;e<r;++e){if(!(s=arguments[e]+"")||s in o||/[\s.]/.test(s))throw new Error("illegal type: "+s);o[s]=[]}return new dl(o)}function dl(e){this._=e}function Mb(e,r){return e.trim().split(/^|\s+/).map(function(o){var s="",a=o.indexOf(".");if(a>=0&&(s=o.slice(a+1),o=o.slice(0,a)),o&&!r.hasOwnProperty(o))throw new Error("unknown type: "+o);return{type:o,name:s}})}dl.prototype=Tl.prototype={constructor:dl,on:function(e,r){var o=this._,s=Mb(e+"",o),a,l=-1,c=s.length;if(arguments.length<2){for(;++l<c;)if((a=(e=s[l]).type)&&(a=Tb(o[a],e.name)))return a;return}if(r!=null&&typeof r!="function")throw new Error("invalid callback: "+r);for(;++l<c;)if(a=(e=s[l]).type)o[a]=Qp(o[a],e.name,r);else if(r==null)for(a in o)o[a]=Qp(o[a],e.name,null);return this},copy:function(){var e={},r=this._;for(var o in r)e[o]=r[o].slice();return new dl(e)},call:function(e,r){if((a=arguments.length-2)>0)for(var o=new Array(a),s=0,a,l;s<a;++s)o[s]=arguments[s+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(l=this._[e],s=0,a=l.length;s<a;++s)l[s].value.apply(r,o)},apply:function(e,r,o){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var s=this._[e],a=0,l=s.length;a<l;++a)s[a].value.apply(r,o)}};function Tb(e,r){for(var o=0,s=e.length,a;o<s;++o)if((a=e[o]).name===r)return a.value}function Qp(e,r,o){for(var s=0,a=e.length;s<a;++s)if(e[s].name===r){e[s]=Pb,e=e.slice(0,s).concat(e.slice(s+1));break}return o!=null&&e.push({name:r,value:o}),e}var Zc="http://www.w3.org/1999/xhtml";const qp={svg:"http://www.w3.org/2000/svg",xhtml:Zc,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Dl(e){var r=e+="",o=r.indexOf(":");return o>=0&&(r=e.slice(0,o))!=="xmlns"&&(e=e.slice(o+1)),qp.hasOwnProperty(r)?{space:qp[r],local:e}:e}function Db(e){return function(){var r=this.ownerDocument,o=this.namespaceURI;return o===Zc&&r.documentElement.namespaceURI===Zc?r.createElement(e):r.createElementNS(o,e)}}function Lb(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Y0(e){var r=Dl(e);return(r.local?Lb:Db)(r)}function zb(){}function Nd(e){return e==null?zb:function(){return this.querySelector(e)}}function Ib(e){typeof e!="function"&&(e=Nd(e));for(var r=this._groups,o=r.length,s=new Array(o),a=0;a<o;++a)for(var l=r[a],c=l.length,f=s[a]=new Array(c),p,h,g=0;g<c;++g)(p=l[g])&&(h=e.call(p,p.__data__,g,l))&&("__data__"in p&&(h.__data__=p.__data__),f[g]=h);return new ln(s,this._parents)}function Ab(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function $b(){return[]}function X0(e){return e==null?$b:function(){return this.querySelectorAll(e)}}function Fb(e){return function(){return Ab(e.apply(this,arguments))}}function Ob(e){typeof e=="function"?e=Fb(e):e=X0(e);for(var r=this._groups,o=r.length,s=[],a=[],l=0;l<o;++l)for(var c=r[l],f=c.length,p,h=0;h<f;++h)(p=c[h])&&(s.push(e.call(p,p.__data__,h,c)),a.push(p));return new ln(s,a)}function G0(e){return function(){return this.matches(e)}}function K0(e){return function(r){return r.matches(e)}}var Hb=Array.prototype.find;function Vb(e){return function(){return Hb.call(this.children,e)}}function Bb(){return this.firstElementChild}function Ub(e){return this.select(e==null?Bb:Vb(typeof e=="function"?e:K0(e)))}var Wb=Array.prototype.filter;function Yb(){return Array.from(this.children)}function Xb(e){return function(){return Wb.call(this.children,e)}}function Gb(e){return this.selectAll(e==null?Yb:Xb(typeof e=="function"?e:K0(e)))}function Kb(e){typeof e!="function"&&(e=G0(e));for(var r=this._groups,o=r.length,s=new Array(o),a=0;a<o;++a)for(var l=r[a],c=l.length,f=s[a]=[],p,h=0;h<c;++h)(p=l[h])&&e.call(p,p.__data__,h,l)&&f.push(p);return new ln(s,this._parents)}function Z0(e){return new Array(e.length)}function Zb(){return new ln(this._enter||this._groups.map(Z0),this._parents)}function yl(e,r){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=r}yl.prototype={constructor:yl,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,r){return this._parent.insertBefore(e,r)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function Qb(e){return function(){return e}}function qb(e,r,o,s,a,l){for(var c=0,f,p=r.length,h=l.length;c<h;++c)(f=r[c])?(f.__data__=l[c],s[c]=f):o[c]=new yl(e,l[c]);for(;c<p;++c)(f=r[c])&&(a[c]=f)}function Jb(e,r,o,s,a,l,c){var f,p,h=new Map,g=r.length,y=l.length,x=new Array(g),w;for(f=0;f<g;++f)(p=r[f])&&(x[f]=w=c.call(p,p.__data__,f,r)+"",h.has(w)?a[f]=p:h.set(w,p));for(f=0;f<y;++f)w=c.call(e,l[f],f,l)+"",(p=h.get(w))?(s[f]=p,p.__data__=l[f],h.delete(w)):o[f]=new yl(e,l[f]);for(f=0;f<g;++f)(p=r[f])&&h.get(x[f])===p&&(a[f]=p)}function e2(e){return e.__data__}function t2(e,r){if(!arguments.length)return Array.from(this,e2);var o=r?Jb:qb,s=this._parents,a=this._groups;typeof e!="function"&&(e=Qb(e));for(var l=a.length,c=new Array(l),f=new Array(l),p=new Array(l),h=0;h<l;++h){var g=s[h],y=a[h],x=y.length,w=n2(e.call(g,g&&g.__data__,h,s)),N=w.length,C=f[h]=new Array(N),E=c[h]=new Array(N),_=p[h]=new Array(x);o(g,y,C,E,_,w,r);for(var R=0,b=0,j,A;R<N;++R)if(j=C[R]){for(R>=b&&(b=R+1);!(A=E[b])&&++b<N;);j._next=A||null}}return c=new ln(c,s),c._enter=f,c._exit=p,c}function n2(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function r2(){return new ln(this._exit||this._groups.map(Z0),this._parents)}function o2(e,r,o){var s=this.enter(),a=this,l=this.exit();return typeof e=="function"?(s=e(s),s&&(s=s.selection())):s=s.append(e+""),r!=null&&(a=r(a),a&&(a=a.selection())),o==null?l.remove():o(l),s&&a?s.merge(a).order():a}function i2(e){for(var r=e.selection?e.selection():e,o=this._groups,s=r._groups,a=o.length,l=s.length,c=Math.min(a,l),f=new Array(a),p=0;p<c;++p)for(var h=o[p],g=s[p],y=h.length,x=f[p]=new Array(y),w,N=0;N<y;++N)(w=h[N]||g[N])&&(x[N]=w);for(;p<a;++p)f[p]=o[p];return new ln(f,this._parents)}function s2(){for(var e=this._groups,r=-1,o=e.length;++r<o;)for(var s=e[r],a=s.length-1,l=s[a],c;--a>=0;)(c=s[a])&&(l&&c.compareDocumentPosition(l)^4&&l.parentNode.insertBefore(c,l),l=c);return this}function a2(e){e||(e=l2);function r(y,x){return y&&x?e(y.__data__,x.__data__):!y-!x}for(var o=this._groups,s=o.length,a=new Array(s),l=0;l<s;++l){for(var c=o[l],f=c.length,p=a[l]=new Array(f),h,g=0;g<f;++g)(h=c[g])&&(p[g]=h);p.sort(r)}return new ln(a,this._parents).order()}function l2(e,r){return e<r?-1:e>r?1:e>=r?0:NaN}function u2(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function c2(){return Array.from(this)}function d2(){for(var e=this._groups,r=0,o=e.length;r<o;++r)for(var s=e[r],a=0,l=s.length;a<l;++a){var c=s[a];if(c)return c}return null}function f2(){let e=0;for(const r of this)++e;return e}function h2(){return!this.node()}function p2(e){for(var r=this._groups,o=0,s=r.length;o<s;++o)for(var a=r[o],l=0,c=a.length,f;l<c;++l)(f=a[l])&&e.call(f,f.__data__,l,a);return this}function m2(e){return function(){this.removeAttribute(e)}}function g2(e){return function(){this.removeAttributeNS(e.space,e.local)}}function y2(e,r){return function(){this.setAttribute(e,r)}}function x2(e,r){return function(){this.setAttributeNS(e.space,e.local,r)}}function v2(e,r){return function(){var o=r.apply(this,arguments);o==null?this.removeAttribute(e):this.setAttribute(e,o)}}function w2(e,r){return function(){var o=r.apply(this,arguments);o==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,o)}}function b2(e,r){var o=Dl(e);if(arguments.length<2){var s=this.node();return o.local?s.getAttributeNS(o.space,o.local):s.getAttribute(o)}return this.each((r==null?o.local?g2:m2:typeof r=="function"?o.local?w2:v2:o.local?x2:y2)(o,r))}function Q0(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function _2(e){return function(){this.style.removeProperty(e)}}function N2(e,r,o){return function(){this.style.setProperty(e,r,o)}}function S2(e,r,o){return function(){var s=r.apply(this,arguments);s==null?this.style.removeProperty(e):this.style.setProperty(e,s,o)}}function E2(e,r,o){return arguments.length>1?this.each((r==null?_2:typeof r=="function"?S2:N2)(e,r,o??"")):vi(this.node(),e)}function vi(e,r){return e.style.getPropertyValue(r)||Q0(e).getComputedStyle(e,null).getPropertyValue(r)}function C2(e){return function(){delete this[e]}}function k2(e,r){return function(){this[e]=r}}function j2(e,r){return function(){var o=r.apply(this,arguments);o==null?delete this[e]:this[e]=o}}function R2(e,r){return arguments.length>1?this.each((r==null?C2:typeof r=="function"?j2:k2)(e,r)):this.node()[e]}function q0(e){return e.trim().split(/^|\s+/)}function Sd(e){return e.classList||new J0(e)}function J0(e){this._node=e,this._names=q0(e.getAttribute("class")||"")}J0.prototype={add:function(e){var r=this._names.indexOf(e);r<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var r=this._names.indexOf(e);r>=0&&(this._names.splice(r,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function eg(e,r){for(var o=Sd(e),s=-1,a=r.length;++s<a;)o.add(r[s])}function tg(e,r){for(var o=Sd(e),s=-1,a=r.length;++s<a;)o.remove(r[s])}function P2(e){return function(){eg(this,e)}}function M2(e){return function(){tg(this,e)}}function T2(e,r){return function(){(r.apply(this,arguments)?eg:tg)(this,e)}}function D2(e,r){var o=q0(e+"");if(arguments.length<2){for(var s=Sd(this.node()),a=-1,l=o.length;++a<l;)if(!s.contains(o[a]))return!1;return!0}return this.each((typeof r=="function"?T2:r?P2:M2)(o,r))}function L2(){this.textContent=""}function z2(e){return function(){this.textContent=e}}function I2(e){return function(){var r=e.apply(this,arguments);this.textContent=r??""}}function A2(e){return arguments.length?this.each(e==null?L2:(typeof e=="function"?I2:z2)(e)):this.node().textContent}function $2(){this.innerHTML=""}function F2(e){return function(){this.innerHTML=e}}function O2(e){return function(){var r=e.apply(this,arguments);this.innerHTML=r??""}}function H2(e){return arguments.length?this.each(e==null?$2:(typeof e=="function"?O2:F2)(e)):this.node().innerHTML}function V2(){this.nextSibling&&this.parentNode.appendChild(this)}function B2(){return this.each(V2)}function U2(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function W2(){return this.each(U2)}function Y2(e){var r=typeof e=="function"?e:Y0(e);return this.select(function(){return this.appendChild(r.apply(this,arguments))})}function X2(){return null}function G2(e,r){var o=typeof e=="function"?e:Y0(e),s=r==null?X2:typeof r=="function"?r:Nd(r);return this.select(function(){return this.insertBefore(o.apply(this,arguments),s.apply(this,arguments)||null)})}function K2(){var e=this.parentNode;e&&e.removeChild(this)}function Z2(){return this.each(K2)}function Q2(){var e=this.cloneNode(!1),r=this.parentNode;return r?r.insertBefore(e,this.nextSibling):e}function q2(){var e=this.cloneNode(!0),r=this.parentNode;return r?r.insertBefore(e,this.nextSibling):e}function J2(e){return this.select(e?q2:Q2)}function e_(e){return arguments.length?this.property("__data__",e):this.node().__data__}function t_(e){return function(r){e.call(this,r,this.__data__)}}function n_(e){return e.trim().split(/^|\s+/).map(function(r){var o="",s=r.indexOf(".");return s>=0&&(o=r.slice(s+1),r=r.slice(0,s)),{type:r,name:o}})}function r_(e){return function(){var r=this.__on;if(r){for(var o=0,s=-1,a=r.length,l;o<a;++o)l=r[o],(!e.type||l.type===e.type)&&l.name===e.name?this.removeEventListener(l.type,l.listener,l.options):r[++s]=l;++s?r.length=s:delete this.__on}}}function o_(e,r,o){return function(){var s=this.__on,a,l=t_(r);if(s){for(var c=0,f=s.length;c<f;++c)if((a=s[c]).type===e.type&&a.name===e.name){this.removeEventListener(a.type,a.listener,a.options),this.addEventListener(a.type,a.listener=l,a.options=o),a.value=r;return}}this.addEventListener(e.type,l,o),a={type:e.type,name:e.name,value:r,listener:l,options:o},s?s.push(a):this.__on=[a]}}function i_(e,r,o){var s=n_(e+""),a,l=s.length,c;if(arguments.length<2){var f=this.node().__on;if(f){for(var p=0,h=f.length,g;p<h;++p)for(a=0,g=f[p];a<l;++a)if((c=s[a]).type===g.type&&c.name===g.name)return g.value}return}for(f=r?o_:r_,a=0;a<l;++a)this.each(f(s[a],r,o));return this}function ng(e,r,o){var s=Q0(e),a=s.CustomEvent;typeof a=="function"?a=new a(r,o):(a=s.document.createEvent("Event"),o?(a.initEvent(r,o.bubbles,o.cancelable),a.detail=o.detail):a.initEvent(r,!1,!1)),e.dispatchEvent(a)}function s_(e,r){return function(){return ng(this,e,r)}}function a_(e,r){return function(){return ng(this,e,r.apply(this,arguments))}}function l_(e,r){return this.each((typeof r=="function"?a_:s_)(e,r))}function*u_(){for(var e=this._groups,r=0,o=e.length;r<o;++r)for(var s=e[r],a=0,l=s.length,c;a<l;++a)(c=s[a])&&(yield c)}var rg=[null];function ln(e,r){this._groups=e,this._parents=r}function $s(){return new ln([[document.documentElement]],rg)}function c_(){return this}ln.prototype=$s.prototype={constructor:ln,select:Ib,selectAll:Ob,selectChild:Ub,selectChildren:Gb,filter:Kb,data:t2,enter:Zb,exit:r2,join:o2,merge:i2,selection:c_,order:s2,sort:a2,call:u2,nodes:c2,node:d2,size:f2,empty:h2,each:p2,attr:b2,style:E2,property:R2,classed:D2,text:A2,html:H2,raise:B2,lower:W2,append:Y2,insert:G2,remove:Z2,clone:J2,datum:e_,on:i_,dispatch:l_,[Symbol.iterator]:u_};function an(e){return typeof e=="string"?new ln([[document.querySelector(e)]],[document.documentElement]):new ln([[e]],rg)}function d_(e){let r;for(;r=e.sourceEvent;)e=r;return e}function In(e,r){if(e=d_(e),r===void 0&&(r=e.currentTarget),r){var o=r.ownerSVGElement||r;if(o.createSVGPoint){var s=o.createSVGPoint();return s.x=e.clientX,s.y=e.clientY,s=s.matrixTransform(r.getScreenCTM().inverse()),[s.x,s.y]}if(r.getBoundingClientRect){var a=r.getBoundingClientRect();return[e.clientX-a.left-r.clientLeft,e.clientY-a.top-r.clientTop]}}return[e.pageX,e.pageY]}const f_={passive:!1},_s={capture:!0,passive:!1};function Tc(e){e.stopImmediatePropagation()}function yi(e){e.preventDefault(),e.stopImmediatePropagation()}function og(e){var r=e.document.documentElement,o=an(e).on("dragstart.drag",yi,_s);"onselectstart"in r?o.on("selectstart.drag",yi,_s):(r.__noselect=r.style.MozUserSelect,r.style.MozUserSelect="none")}function ig(e,r){var o=e.document.documentElement,s=an(e).on("dragstart.drag",null);r&&(s.on("click.drag",yi,_s),setTimeout(function(){s.on("click.drag",null)},0)),"onselectstart"in o?s.on("selectstart.drag",null):(o.style.MozUserSelect=o.__noselect,delete o.__noselect)}const Ja=e=>()=>e;function Qc(e,{sourceEvent:r,subject:o,target:s,identifier:a,active:l,x:c,y:f,dx:p,dy:h,dispatch:g}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:r,enumerable:!0,configurable:!0},subject:{value:o,enumerable:!0,configurable:!0},target:{value:s,enumerable:!0,configurable:!0},identifier:{value:a,enumerable:!0,configurable:!0},active:{value:l,enumerable:!0,configurable:!0},x:{value:c,enumerable:!0,configurable:!0},y:{value:f,enumerable:!0,configurable:!0},dx:{value:p,enumerable:!0,configurable:!0},dy:{value:h,enumerable:!0,configurable:!0},_:{value:g}})}Qc.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function h_(e){return!e.ctrlKey&&!e.button}function p_(){return this.parentNode}function m_(e,r){return r??{x:e.x,y:e.y}}function g_(){return navigator.maxTouchPoints||"ontouchstart"in this}function sg(){var e=h_,r=p_,o=m_,s=g_,a={},l=Tl("start","drag","end"),c=0,f,p,h,g,y=0;function x(j){j.on("mousedown.drag",w).filter(s).on("touchstart.drag",E).on("touchmove.drag",_,f_).on("touchend.drag touchcancel.drag",R).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function w(j,A){if(!(g||!e.call(this,j,A))){var T=b(this,r.call(this,j,A),j,A,"mouse");T&&(an(j.view).on("mousemove.drag",N,_s).on("mouseup.drag",C,_s),og(j.view),Tc(j),h=!1,f=j.clientX,p=j.clientY,T("start",j))}}function N(j){if(yi(j),!h){var A=j.clientX-f,T=j.clientY-p;h=A*A+T*T>y}a.mouse("drag",j)}function C(j){an(j.view).on("mousemove.drag mouseup.drag",null),ig(j.view,h),yi(j),a.mouse("end",j)}function E(j,A){if(e.call(this,j,A)){var T=j.changedTouches,P=r.call(this,j,A),O=T.length,G,D;for(G=0;G<O;++G)(D=b(this,P,j,A,T[G].identifier,T[G]))&&(Tc(j),D("start",j,T[G]))}}function _(j){var A=j.changedTouches,T=A.length,P,O;for(P=0;P<T;++P)(O=a[A[P].identifier])&&(yi(j),O("drag",j,A[P]))}function R(j){var A=j.changedTouches,T=A.length,P,O;for(g&&clearTimeout(g),g=setTimeout(function(){g=null},500),P=0;P<T;++P)(O=a[A[P].identifier])&&(Tc(j),O("end",j,A[P]))}function b(j,A,T,P,O,G){var D=l.copy(),F=In(G||T,A),H,W,M;if((M=o.call(j,new Qc("beforestart",{sourceEvent:T,target:x,identifier:O,active:c,x:F[0],y:F[1],dx:0,dy:0,dispatch:D}),P))!=null)return H=M.x-F[0]||0,W=M.y-F[1]||0,function z(Y,Q,I){var K=F,U;switch(Y){case"start":a[O]=z,U=c++;break;case"end":delete a[O],--c;case"drag":F=In(I||Q,A),U=c;break}D.call(Y,j,new Qc(Y,{sourceEvent:Q,subject:M,target:x,identifier:O,active:U,x:F[0]+H,y:F[1]+W,dx:F[0]-K[0],dy:F[1]-K[1],dispatch:D}),P)}}return x.filter=function(j){return arguments.length?(e=typeof j=="function"?j:Ja(!!j),x):e},x.container=function(j){return arguments.length?(r=typeof j=="function"?j:Ja(j),x):r},x.subject=function(j){return arguments.length?(o=typeof j=="function"?j:Ja(j),x):o},x.touchable=function(j){return arguments.length?(s=typeof j=="function"?j:Ja(!!j),x):s},x.on=function(){var j=l.on.apply(l,arguments);return j===l?x:j},x.clickDistance=function(j){return arguments.length?(y=(j=+j)*j,x):Math.sqrt(y)},x}function Ed(e,r,o){e.prototype=r.prototype=o,o.constructor=e}function ag(e,r){var o=Object.create(e.prototype);for(var s in r)o[s]=r[s];return o}function Fs(){}var Ns=.7,xl=1/Ns,xi="\\s*([+-]?\\d+)\\s*",Ss="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Jn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",y_=/^#([0-9a-f]{3,8})$/,x_=new RegExp(`^rgb\\(${xi},${xi},${xi}\\)$`),v_=new RegExp(`^rgb\\(${Jn},${Jn},${Jn}\\)$`),w_=new RegExp(`^rgba\\(${xi},${xi},${xi},${Ss}\\)$`),b_=new RegExp(`^rgba\\(${Jn},${Jn},${Jn},${Ss}\\)$`),__=new RegExp(`^hsl\\(${Ss},${Jn},${Jn}\\)$`),N_=new RegExp(`^hsla\\(${Ss},${Jn},${Jn},${Ss}\\)$`),Jp={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Ed(Fs,Mo,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:em,formatHex:em,formatHex8:S_,formatHsl:E_,formatRgb:tm,toString:tm});function em(){return this.rgb().formatHex()}function S_(){return this.rgb().formatHex8()}function E_(){return lg(this).formatHsl()}function tm(){return this.rgb().formatRgb()}function Mo(e){var r,o;return e=(e+"").trim().toLowerCase(),(r=y_.exec(e))?(o=r[1].length,r=parseInt(r[1],16),o===6?nm(r):o===3?new Qt(r>>8&15|r>>4&240,r>>4&15|r&240,(r&15)<<4|r&15,1):o===8?el(r>>24&255,r>>16&255,r>>8&255,(r&255)/255):o===4?el(r>>12&15|r>>8&240,r>>8&15|r>>4&240,r>>4&15|r&240,((r&15)<<4|r&15)/255):null):(r=x_.exec(e))?new Qt(r[1],r[2],r[3],1):(r=v_.exec(e))?new Qt(r[1]*255/100,r[2]*255/100,r[3]*255/100,1):(r=w_.exec(e))?el(r[1],r[2],r[3],r[4]):(r=b_.exec(e))?el(r[1]*255/100,r[2]*255/100,r[3]*255/100,r[4]):(r=__.exec(e))?im(r[1],r[2]/100,r[3]/100,1):(r=N_.exec(e))?im(r[1],r[2]/100,r[3]/100,r[4]):Jp.hasOwnProperty(e)?nm(Jp[e]):e==="transparent"?new Qt(NaN,NaN,NaN,0):null}function nm(e){return new Qt(e>>16&255,e>>8&255,e&255,1)}function el(e,r,o,s){return s<=0&&(e=r=o=NaN),new Qt(e,r,o,s)}function C_(e){return e instanceof Fs||(e=Mo(e)),e?(e=e.rgb(),new Qt(e.r,e.g,e.b,e.opacity)):new Qt}function qc(e,r,o,s){return arguments.length===1?C_(e):new Qt(e,r,o,s??1)}function Qt(e,r,o,s){this.r=+e,this.g=+r,this.b=+o,this.opacity=+s}Ed(Qt,qc,ag(Fs,{brighter(e){return e=e==null?xl:Math.pow(xl,e),new Qt(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Ns:Math.pow(Ns,e),new Qt(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Qt(ko(this.r),ko(this.g),ko(this.b),vl(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:rm,formatHex:rm,formatHex8:k_,formatRgb:om,toString:om}));function rm(){return`#${Co(this.r)}${Co(this.g)}${Co(this.b)}`}function k_(){return`#${Co(this.r)}${Co(this.g)}${Co(this.b)}${Co((isNaN(this.opacity)?1:this.opacity)*255)}`}function om(){const e=vl(this.opacity);return`${e===1?"rgb(":"rgba("}${ko(this.r)}, ${ko(this.g)}, ${ko(this.b)}${e===1?")":`, ${e})`}`}function vl(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function ko(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Co(e){return e=ko(e),(e<16?"0":"")+e.toString(16)}function im(e,r,o,s){return s<=0?e=r=o=NaN:o<=0||o>=1?e=r=NaN:r<=0&&(e=NaN),new An(e,r,o,s)}function lg(e){if(e instanceof An)return new An(e.h,e.s,e.l,e.opacity);if(e instanceof Fs||(e=Mo(e)),!e)return new An;if(e instanceof An)return e;e=e.rgb();var r=e.r/255,o=e.g/255,s=e.b/255,a=Math.min(r,o,s),l=Math.max(r,o,s),c=NaN,f=l-a,p=(l+a)/2;return f?(r===l?c=(o-s)/f+(o<s)*6:o===l?c=(s-r)/f+2:c=(r-o)/f+4,f/=p<.5?l+a:2-l-a,c*=60):f=p>0&&p<1?0:c,new An(c,f,p,e.opacity)}function j_(e,r,o,s){return arguments.length===1?lg(e):new An(e,r,o,s??1)}function An(e,r,o,s){this.h=+e,this.s=+r,this.l=+o,this.opacity=+s}Ed(An,j_,ag(Fs,{brighter(e){return e=e==null?xl:Math.pow(xl,e),new An(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Ns:Math.pow(Ns,e),new An(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,r=isNaN(e)||isNaN(this.s)?0:this.s,o=this.l,s=o+(o<.5?o:1-o)*r,a=2*o-s;return new Qt(Dc(e>=240?e-240:e+120,a,s),Dc(e,a,s),Dc(e<120?e+240:e-120,a,s),this.opacity)},clamp(){return new An(sm(this.h),tl(this.s),tl(this.l),vl(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=vl(this.opacity);return`${e===1?"hsl(":"hsla("}${sm(this.h)}, ${tl(this.s)*100}%, ${tl(this.l)*100}%${e===1?")":`, ${e})`}`}}));function sm(e){return e=(e||0)%360,e<0?e+360:e}function tl(e){return Math.max(0,Math.min(1,e||0))}function Dc(e,r,o){return(e<60?r+(o-r)*e/60:e<180?o:e<240?r+(o-r)*(240-e)/60:r)*255}const Cd=e=>()=>e;function R_(e,r){return function(o){return e+o*r}}function P_(e,r,o){return e=Math.pow(e,o),r=Math.pow(r,o)-e,o=1/o,function(s){return Math.pow(e+s*r,o)}}function M_(e){return(e=+e)==1?ug:function(r,o){return o-r?P_(r,o,e):Cd(isNaN(r)?o:r)}}function ug(e,r){var o=r-e;return o?R_(e,o):Cd(isNaN(e)?r:e)}const wl=(function e(r){var o=M_(r);function s(a,l){var c=o((a=qc(a)).r,(l=qc(l)).r),f=o(a.g,l.g),p=o(a.b,l.b),h=ug(a.opacity,l.opacity);return function(g){return a.r=c(g),a.g=f(g),a.b=p(g),a.opacity=h(g),a+""}}return s.gamma=e,s})(1);function T_(e,r){r||(r=[]);var o=e?Math.min(r.length,e.length):0,s=r.slice(),a;return function(l){for(a=0;a<o;++a)s[a]=e[a]*(1-l)+r[a]*l;return s}}function D_(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function L_(e,r){var o=r?r.length:0,s=e?Math.min(o,e.length):0,a=new Array(s),l=new Array(o),c;for(c=0;c<s;++c)a[c]=ys(e[c],r[c]);for(;c<o;++c)l[c]=r[c];return function(f){for(c=0;c<s;++c)l[c]=a[c](f);return l}}function z_(e,r){var o=new Date;return e=+e,r=+r,function(s){return o.setTime(e*(1-s)+r*s),o}}function Qn(e,r){return e=+e,r=+r,function(o){return e*(1-o)+r*o}}function I_(e,r){var o={},s={},a;(e===null||typeof e!="object")&&(e={}),(r===null||typeof r!="object")&&(r={});for(a in r)a in e?o[a]=ys(e[a],r[a]):s[a]=r[a];return function(l){for(a in o)s[a]=o[a](l);return s}}var Jc=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Lc=new RegExp(Jc.source,"g");function A_(e){return function(){return e}}function $_(e){return function(r){return e(r)+""}}function cg(e,r){var o=Jc.lastIndex=Lc.lastIndex=0,s,a,l,c=-1,f=[],p=[];for(e=e+"",r=r+"";(s=Jc.exec(e))&&(a=Lc.exec(r));)(l=a.index)>o&&(l=r.slice(o,l),f[c]?f[c]+=l:f[++c]=l),(s=s[0])===(a=a[0])?f[c]?f[c]+=a:f[++c]=a:(f[++c]=null,p.push({i:c,x:Qn(s,a)})),o=Lc.lastIndex;return o<r.length&&(l=r.slice(o),f[c]?f[c]+=l:f[++c]=l),f.length<2?p[0]?$_(p[0].x):A_(r):(r=p.length,function(h){for(var g=0,y;g<r;++g)f[(y=p[g]).i]=y.x(h);return f.join("")})}function ys(e,r){var o=typeof r,s;return r==null||o==="boolean"?Cd(r):(o==="number"?Qn:o==="string"?(s=Mo(r))?(r=s,wl):cg:r instanceof Mo?wl:r instanceof Date?z_:D_(r)?T_:Array.isArray(r)?L_:typeof r.valueOf!="function"&&typeof r.toString!="function"||isNaN(r)?I_:Qn)(e,r)}var am=180/Math.PI,ed={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function dg(e,r,o,s,a,l){var c,f,p;return(c=Math.sqrt(e*e+r*r))&&(e/=c,r/=c),(p=e*o+r*s)&&(o-=e*p,s-=r*p),(f=Math.sqrt(o*o+s*s))&&(o/=f,s/=f,p/=f),e*s<r*o&&(e=-e,r=-r,p=-p,c=-c),{translateX:a,translateY:l,rotate:Math.atan2(r,e)*am,skewX:Math.atan(p)*am,scaleX:c,scaleY:f}}var nl;function F_(e){const r=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return r.isIdentity?ed:dg(r.a,r.b,r.c,r.d,r.e,r.f)}function O_(e){return e==null||(nl||(nl=document.createElementNS("http://www.w3.org/2000/svg","g")),nl.setAttribute("transform",e),!(e=nl.transform.baseVal.consolidate()))?ed:(e=e.matrix,dg(e.a,e.b,e.c,e.d,e.e,e.f))}function fg(e,r,o,s){function a(h){return h.length?h.pop()+" ":""}function l(h,g,y,x,w,N){if(h!==y||g!==x){var C=w.push("translate(",null,r,null,o);N.push({i:C-4,x:Qn(h,y)},{i:C-2,x:Qn(g,x)})}else(y||x)&&w.push("translate("+y+r+x+o)}function c(h,g,y,x){h!==g?(h-g>180?g+=360:g-h>180&&(h+=360),x.push({i:y.push(a(y)+"rotate(",null,s)-2,x:Qn(h,g)})):g&&y.push(a(y)+"rotate("+g+s)}function f(h,g,y,x){h!==g?x.push({i:y.push(a(y)+"skewX(",null,s)-2,x:Qn(h,g)}):g&&y.push(a(y)+"skewX("+g+s)}function p(h,g,y,x,w,N){if(h!==y||g!==x){var C=w.push(a(w)+"scale(",null,",",null,")");N.push({i:C-4,x:Qn(h,y)},{i:C-2,x:Qn(g,x)})}else(y!==1||x!==1)&&w.push(a(w)+"scale("+y+","+x+")")}return function(h,g){var y=[],x=[];return h=e(h),g=e(g),l(h.translateX,h.translateY,g.translateX,g.translateY,y,x),c(h.rotate,g.rotate,y,x),f(h.skewX,g.skewX,y,x),p(h.scaleX,h.scaleY,g.scaleX,g.scaleY,y,x),h=g=null,function(w){for(var N=-1,C=x.length,E;++N<C;)y[(E=x[N]).i]=E.x(w);return y.join("")}}}var H_=fg(F_,"px, ","px)","deg)"),V_=fg(O_,", ",")",")"),B_=1e-12;function lm(e){return((e=Math.exp(e))+1/e)/2}function U_(e){return((e=Math.exp(e))-1/e)/2}function W_(e){return((e=Math.exp(2*e))-1)/(e+1)}const fl=(function e(r,o,s){function a(l,c){var f=l[0],p=l[1],h=l[2],g=c[0],y=c[1],x=c[2],w=g-f,N=y-p,C=w*w+N*N,E,_;if(C<B_)_=Math.log(x/h)/r,E=function(P){return[f+P*w,p+P*N,h*Math.exp(r*P*_)]};else{var R=Math.sqrt(C),b=(x*x-h*h+s*C)/(2*h*o*R),j=(x*x-h*h-s*C)/(2*x*o*R),A=Math.log(Math.sqrt(b*b+1)-b),T=Math.log(Math.sqrt(j*j+1)-j);_=(T-A)/r,E=function(P){var O=P*_,G=lm(A),D=h/(o*R)*(G*W_(r*O+A)-U_(A));return[f+D*w,p+D*N,h*G/lm(r*O+A)]}}return E.duration=_*1e3*r/Math.SQRT2,E}return a.rho=function(l){var c=Math.max(.001,+l),f=c*c,p=f*f;return e(c,f,p)},a})(Math.SQRT2,2,4);var wi=0,ps=0,cs=0,hg=1e3,bl,ms,_l=0,To=0,Ll=0,Es=typeof performance=="object"&&performance.now?performance:Date,pg=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function kd(){return To||(pg(Y_),To=Es.now()+Ll)}function Y_(){To=0}function Nl(){this._call=this._time=this._next=null}Nl.prototype=mg.prototype={constructor:Nl,restart:function(e,r,o){if(typeof e!="function")throw new TypeError("callback is not a function");o=(o==null?kd():+o)+(r==null?0:+r),!this._next&&ms!==this&&(ms?ms._next=this:bl=this,ms=this),this._call=e,this._time=o,td()},stop:function(){this._call&&(this._call=null,this._time=1/0,td())}};function mg(e,r,o){var s=new Nl;return s.restart(e,r,o),s}function X_(){kd(),++wi;for(var e=bl,r;e;)(r=To-e._time)>=0&&e._call.call(void 0,r),e=e._next;--wi}function um(){To=(_l=Es.now())+Ll,wi=ps=0;try{X_()}finally{wi=0,K_(),To=0}}function G_(){var e=Es.now(),r=e-_l;r>hg&&(Ll-=r,_l=e)}function K_(){for(var e,r=bl,o,s=1/0;r;)r._call?(s>r._time&&(s=r._time),e=r,r=r._next):(o=r._next,r._next=null,r=e?e._next=o:bl=o);ms=e,td(s)}function td(e){if(!wi){ps&&(ps=clearTimeout(ps));var r=e-To;r>24?(e<1/0&&(ps=setTimeout(um,e-Es.now()-Ll)),cs&&(cs=clearInterval(cs))):(cs||(_l=Es.now(),cs=setInterval(G_,hg)),wi=1,pg(um))}}function cm(e,r,o){var s=new Nl;return r=r==null?0:+r,s.restart(a=>{s.stop(),e(a+r)},r,o),s}var Z_=Tl("start","end","cancel","interrupt"),Q_=[],gg=0,dm=1,nd=2,hl=3,fm=4,rd=5,pl=6;function zl(e,r,o,s,a,l){var c=e.__transition;if(!c)e.__transition={};else if(o in c)return;q_(e,o,{name:r,index:s,group:a,on:Z_,tween:Q_,time:l.time,delay:l.delay,duration:l.duration,ease:l.ease,timer:null,state:gg})}function jd(e,r){var o=On(e,r);if(o.state>gg)throw new Error("too late; already scheduled");return o}function ir(e,r){var o=On(e,r);if(o.state>hl)throw new Error("too late; already running");return o}function On(e,r){var o=e.__transition;if(!o||!(o=o[r]))throw new Error("transition not found");return o}function q_(e,r,o){var s=e.__transition,a;s[r]=o,o.timer=mg(l,0,o.time);function l(h){o.state=dm,o.timer.restart(c,o.delay,o.time),o.delay<=h&&c(h-o.delay)}function c(h){var g,y,x,w;if(o.state!==dm)return p();for(g in s)if(w=s[g],w.name===o.name){if(w.state===hl)return cm(c);w.state===fm?(w.state=pl,w.timer.stop(),w.on.call("interrupt",e,e.__data__,w.index,w.group),delete s[g]):+g<r&&(w.state=pl,w.timer.stop(),w.on.call("cancel",e,e.__data__,w.index,w.group),delete s[g])}if(cm(function(){o.state===hl&&(o.state=fm,o.timer.restart(f,o.delay,o.time),f(h))}),o.state=nd,o.on.call("start",e,e.__data__,o.index,o.group),o.state===nd){for(o.state=hl,a=new Array(x=o.tween.length),g=0,y=-1;g<x;++g)(w=o.tween[g].value.call(e,e.__data__,o.index,o.group))&&(a[++y]=w);a.length=y+1}}function f(h){for(var g=h<o.duration?o.ease.call(null,h/o.duration):(o.timer.restart(p),o.state=rd,1),y=-1,x=a.length;++y<x;)a[y].call(e,g);o.state===rd&&(o.on.call("end",e,e.__data__,o.index,o.group),p())}function p(){o.state=pl,o.timer.stop(),delete s[r];for(var h in s)return;delete e.__transition}}function ml(e,r){var o=e.__transition,s,a,l=!0,c;if(o){r=r==null?null:r+"";for(c in o){if((s=o[c]).name!==r){l=!1;continue}a=s.state>nd&&s.state<rd,s.state=pl,s.timer.stop(),s.on.call(a?"interrupt":"cancel",e,e.__data__,s.index,s.group),delete o[c]}l&&delete e.__transition}}function J_(e){return this.each(function(){ml(this,e)})}function eN(e,r){var o,s;return function(){var a=ir(this,e),l=a.tween;if(l!==o){s=o=l;for(var c=0,f=s.length;c<f;++c)if(s[c].name===r){s=s.slice(),s.splice(c,1);break}}a.tween=s}}function tN(e,r,o){var s,a;if(typeof o!="function")throw new Error;return function(){var l=ir(this,e),c=l.tween;if(c!==s){a=(s=c).slice();for(var f={name:r,value:o},p=0,h=a.length;p<h;++p)if(a[p].name===r){a[p]=f;break}p===h&&a.push(f)}l.tween=a}}function nN(e,r){var o=this._id;if(e+="",arguments.length<2){for(var s=On(this.node(),o).tween,a=0,l=s.length,c;a<l;++a)if((c=s[a]).name===e)return c.value;return null}return this.each((r==null?eN:tN)(o,e,r))}function Rd(e,r,o){var s=e._id;return e.each(function(){var a=ir(this,s);(a.value||(a.value={}))[r]=o.apply(this,arguments)}),function(a){return On(a,s).value[r]}}function yg(e,r){var o;return(typeof r=="number"?Qn:r instanceof Mo?wl:(o=Mo(r))?(r=o,wl):cg)(e,r)}function rN(e){return function(){this.removeAttribute(e)}}function oN(e){return function(){this.removeAttributeNS(e.space,e.local)}}function iN(e,r,o){var s,a=o+"",l;return function(){var c=this.getAttribute(e);return c===a?null:c===s?l:l=r(s=c,o)}}function sN(e,r,o){var s,a=o+"",l;return function(){var c=this.getAttributeNS(e.space,e.local);return c===a?null:c===s?l:l=r(s=c,o)}}function aN(e,r,o){var s,a,l;return function(){var c,f=o(this),p;return f==null?void this.removeAttribute(e):(c=this.getAttribute(e),p=f+"",c===p?null:c===s&&p===a?l:(a=p,l=r(s=c,f)))}}function lN(e,r,o){var s,a,l;return function(){var c,f=o(this),p;return f==null?void this.removeAttributeNS(e.space,e.local):(c=this.getAttributeNS(e.space,e.local),p=f+"",c===p?null:c===s&&p===a?l:(a=p,l=r(s=c,f)))}}function uN(e,r){var o=Dl(e),s=o==="transform"?V_:yg;return this.attrTween(e,typeof r=="function"?(o.local?lN:aN)(o,s,Rd(this,"attr."+e,r)):r==null?(o.local?oN:rN)(o):(o.local?sN:iN)(o,s,r))}function cN(e,r){return function(o){this.setAttribute(e,r.call(this,o))}}function dN(e,r){return function(o){this.setAttributeNS(e.space,e.local,r.call(this,o))}}function fN(e,r){var o,s;function a(){var l=r.apply(this,arguments);return l!==s&&(o=(s=l)&&dN(e,l)),o}return a._value=r,a}function hN(e,r){var o,s;function a(){var l=r.apply(this,arguments);return l!==s&&(o=(s=l)&&cN(e,l)),o}return a._value=r,a}function pN(e,r){var o="attr."+e;if(arguments.length<2)return(o=this.tween(o))&&o._value;if(r==null)return this.tween(o,null);if(typeof r!="function")throw new Error;var s=Dl(e);return this.tween(o,(s.local?fN:hN)(s,r))}function mN(e,r){return function(){jd(this,e).delay=+r.apply(this,arguments)}}function gN(e,r){return r=+r,function(){jd(this,e).delay=r}}function yN(e){var r=this._id;return arguments.length?this.each((typeof e=="function"?mN:gN)(r,e)):On(this.node(),r).delay}function xN(e,r){return function(){ir(this,e).duration=+r.apply(this,arguments)}}function vN(e,r){return r=+r,function(){ir(this,e).duration=r}}function wN(e){var r=this._id;return arguments.length?this.each((typeof e=="function"?xN:vN)(r,e)):On(this.node(),r).duration}function bN(e,r){if(typeof r!="function")throw new Error;return function(){ir(this,e).ease=r}}function _N(e){var r=this._id;return arguments.length?this.each(bN(r,e)):On(this.node(),r).ease}function NN(e,r){return function(){var o=r.apply(this,arguments);if(typeof o!="function")throw new Error;ir(this,e).ease=o}}function SN(e){if(typeof e!="function")throw new Error;return this.each(NN(this._id,e))}function EN(e){typeof e!="function"&&(e=G0(e));for(var r=this._groups,o=r.length,s=new Array(o),a=0;a<o;++a)for(var l=r[a],c=l.length,f=s[a]=[],p,h=0;h<c;++h)(p=l[h])&&e.call(p,p.__data__,h,l)&&f.push(p);return new Er(s,this._parents,this._name,this._id)}function CN(e){if(e._id!==this._id)throw new Error;for(var r=this._groups,o=e._groups,s=r.length,a=o.length,l=Math.min(s,a),c=new Array(s),f=0;f<l;++f)for(var p=r[f],h=o[f],g=p.length,y=c[f]=new Array(g),x,w=0;w<g;++w)(x=p[w]||h[w])&&(y[w]=x);for(;f<s;++f)c[f]=r[f];return new Er(c,this._parents,this._name,this._id)}function kN(e){return(e+"").trim().split(/^|\s+/).every(function(r){var o=r.indexOf(".");return o>=0&&(r=r.slice(0,o)),!r||r==="start"})}function jN(e,r,o){var s,a,l=kN(r)?jd:ir;return function(){var c=l(this,e),f=c.on;f!==s&&(a=(s=f).copy()).on(r,o),c.on=a}}function RN(e,r){var o=this._id;return arguments.length<2?On(this.node(),o).on.on(e):this.each(jN(o,e,r))}function PN(e){return function(){var r=this.parentNode;for(var o in this.__transition)if(+o!==e)return;r&&r.removeChild(this)}}function MN(){return this.on("end.remove",PN(this._id))}function TN(e){var r=this._name,o=this._id;typeof e!="function"&&(e=Nd(e));for(var s=this._groups,a=s.length,l=new Array(a),c=0;c<a;++c)for(var f=s[c],p=f.length,h=l[c]=new Array(p),g,y,x=0;x<p;++x)(g=f[x])&&(y=e.call(g,g.__data__,x,f))&&("__data__"in g&&(y.__data__=g.__data__),h[x]=y,zl(h[x],r,o,x,h,On(g,o)));return new Er(l,this._parents,r,o)}function DN(e){var r=this._name,o=this._id;typeof e!="function"&&(e=X0(e));for(var s=this._groups,a=s.length,l=[],c=[],f=0;f<a;++f)for(var p=s[f],h=p.length,g,y=0;y<h;++y)if(g=p[y]){for(var x=e.call(g,g.__data__,y,p),w,N=On(g,o),C=0,E=x.length;C<E;++C)(w=x[C])&&zl(w,r,o,C,x,N);l.push(x),c.push(g)}return new Er(l,c,r,o)}var LN=$s.prototype.constructor;function zN(){return new LN(this._groups,this._parents)}function IN(e,r){var o,s,a;return function(){var l=vi(this,e),c=(this.style.removeProperty(e),vi(this,e));return l===c?null:l===o&&c===s?a:a=r(o=l,s=c)}}function xg(e){return function(){this.style.removeProperty(e)}}function AN(e,r,o){var s,a=o+"",l;return function(){var c=vi(this,e);return c===a?null:c===s?l:l=r(s=c,o)}}function $N(e,r,o){var s,a,l;return function(){var c=vi(this,e),f=o(this),p=f+"";return f==null&&(p=f=(this.style.removeProperty(e),vi(this,e))),c===p?null:c===s&&p===a?l:(a=p,l=r(s=c,f))}}function FN(e,r){var o,s,a,l="style."+r,c="end."+l,f;return function(){var p=ir(this,e),h=p.on,g=p.value[l]==null?f||(f=xg(r)):void 0;(h!==o||a!==g)&&(s=(o=h).copy()).on(c,a=g),p.on=s}}function ON(e,r,o){var s=(e+="")=="transform"?H_:yg;return r==null?this.styleTween(e,IN(e,s)).on("end.style."+e,xg(e)):typeof r=="function"?this.styleTween(e,$N(e,s,Rd(this,"style."+e,r))).each(FN(this._id,e)):this.styleTween(e,AN(e,s,r),o).on("end.style."+e,null)}function HN(e,r,o){return function(s){this.style.setProperty(e,r.call(this,s),o)}}function VN(e,r,o){var s,a;function l(){var c=r.apply(this,arguments);return c!==a&&(s=(a=c)&&HN(e,c,o)),s}return l._value=r,l}function BN(e,r,o){var s="style."+(e+="");if(arguments.length<2)return(s=this.tween(s))&&s._value;if(r==null)return this.tween(s,null);if(typeof r!="function")throw new Error;return this.tween(s,VN(e,r,o??""))}function UN(e){return function(){this.textContent=e}}function WN(e){return function(){var r=e(this);this.textContent=r??""}}function YN(e){return this.tween("text",typeof e=="function"?WN(Rd(this,"text",e)):UN(e==null?"":e+""))}function XN(e){return function(r){this.textContent=e.call(this,r)}}function GN(e){var r,o;function s(){var a=e.apply(this,arguments);return a!==o&&(r=(o=a)&&XN(a)),r}return s._value=e,s}function KN(e){var r="text";if(arguments.length<1)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,GN(e))}function ZN(){for(var e=this._name,r=this._id,o=vg(),s=this._groups,a=s.length,l=0;l<a;++l)for(var c=s[l],f=c.length,p,h=0;h<f;++h)if(p=c[h]){var g=On(p,r);zl(p,e,o,h,c,{time:g.time+g.delay+g.duration,delay:0,duration:g.duration,ease:g.ease})}return new Er(s,this._parents,e,o)}function QN(){var e,r,o=this,s=o._id,a=o.size();return new Promise(function(l,c){var f={value:c},p={value:function(){--a===0&&l()}};o.each(function(){var h=ir(this,s),g=h.on;g!==e&&(r=(e=g).copy(),r._.cancel.push(f),r._.interrupt.push(f),r._.end.push(p)),h.on=r}),a===0&&l()})}var qN=0;function Er(e,r,o,s){this._groups=e,this._parents=r,this._name=o,this._id=s}function vg(){return++qN}var br=$s.prototype;Er.prototype={constructor:Er,select:TN,selectAll:DN,selectChild:br.selectChild,selectChildren:br.selectChildren,filter:EN,merge:CN,selection:zN,transition:ZN,call:br.call,nodes:br.nodes,node:br.node,size:br.size,empty:br.empty,each:br.each,on:RN,attr:uN,attrTween:pN,style:ON,styleTween:BN,text:YN,textTween:KN,remove:MN,tween:nN,delay:yN,duration:wN,ease:_N,easeVarying:SN,end:QN,[Symbol.iterator]:br[Symbol.iterator]};function JN(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var eS={time:null,delay:0,duration:250,ease:JN};function tS(e,r){for(var o;!(o=e.__transition)||!(o=o[r]);)if(!(e=e.parentNode))throw new Error(`transition ${r} not found`);return o}function nS(e){var r,o;e instanceof Er?(r=e._id,e=e._name):(r=vg(),(o=eS).time=kd(),e=e==null?null:e+"");for(var s=this._groups,a=s.length,l=0;l<a;++l)for(var c=s[l],f=c.length,p,h=0;h<f;++h)(p=c[h])&&zl(p,e,r,h,c,o||tS(p,r));return new Er(s,this._parents,e,r)}$s.prototype.interrupt=J_;$s.prototype.transition=nS;const rl=e=>()=>e;function rS(e,{sourceEvent:r,target:o,transform:s,dispatch:a}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:r,enumerable:!0,configurable:!0},target:{value:o,enumerable:!0,configurable:!0},transform:{value:s,enumerable:!0,configurable:!0},_:{value:a}})}function Nr(e,r,o){this.k=e,this.x=r,this.y=o}Nr.prototype={constructor:Nr,scale:function(e){return e===1?this:new Nr(this.k*e,this.x,this.y)},translate:function(e,r){return e===0&r===0?this:new Nr(this.k,this.x+this.k*e,this.y+this.k*r)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Il=new Nr(1,0,0);wg.prototype=Nr.prototype;function wg(e){for(;!e.__zoom;)if(!(e=e.parentNode))return Il;return e.__zoom}function zc(e){e.stopImmediatePropagation()}function ds(e){e.preventDefault(),e.stopImmediatePropagation()}function oS(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function iS(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function hm(){return this.__zoom||Il}function sS(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function aS(){return navigator.maxTouchPoints||"ontouchstart"in this}function lS(e,r,o){var s=e.invertX(r[0][0])-o[0][0],a=e.invertX(r[1][0])-o[1][0],l=e.invertY(r[0][1])-o[0][1],c=e.invertY(r[1][1])-o[1][1];return e.translate(a>s?(s+a)/2:Math.min(0,s)||Math.max(0,a),c>l?(l+c)/2:Math.min(0,l)||Math.max(0,c))}function bg(){var e=oS,r=iS,o=lS,s=sS,a=aS,l=[0,1/0],c=[[-1/0,-1/0],[1/0,1/0]],f=250,p=fl,h=Tl("start","zoom","end"),g,y,x,w=500,N=150,C=0,E=10;function _(M){M.property("__zoom",hm).on("wheel.zoom",O,{passive:!1}).on("mousedown.zoom",G).on("dblclick.zoom",D).filter(a).on("touchstart.zoom",F).on("touchmove.zoom",H).on("touchend.zoom touchcancel.zoom",W).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}_.transform=function(M,z,Y,Q){var I=M.selection?M.selection():M;I.property("__zoom",hm),M!==I?A(M,z,Y,Q):I.interrupt().each(function(){T(this,arguments).event(Q).start().zoom(null,typeof z=="function"?z.apply(this,arguments):z).end()})},_.scaleBy=function(M,z,Y,Q){_.scaleTo(M,function(){var I=this.__zoom.k,K=typeof z=="function"?z.apply(this,arguments):z;return I*K},Y,Q)},_.scaleTo=function(M,z,Y,Q){_.transform(M,function(){var I=r.apply(this,arguments),K=this.__zoom,U=Y==null?j(I):typeof Y=="function"?Y.apply(this,arguments):Y,L=K.invert(U),B=typeof z=="function"?z.apply(this,arguments):z;return o(b(R(K,B),U,L),I,c)},Y,Q)},_.translateBy=function(M,z,Y,Q){_.transform(M,function(){return o(this.__zoom.translate(typeof z=="function"?z.apply(this,arguments):z,typeof Y=="function"?Y.apply(this,arguments):Y),r.apply(this,arguments),c)},null,Q)},_.translateTo=function(M,z,Y,Q,I){_.transform(M,function(){var K=r.apply(this,arguments),U=this.__zoom,L=Q==null?j(K):typeof Q=="function"?Q.apply(this,arguments):Q;return o(Il.translate(L[0],L[1]).scale(U.k).translate(typeof z=="function"?-z.apply(this,arguments):-z,typeof Y=="function"?-Y.apply(this,arguments):-Y),K,c)},Q,I)};function R(M,z){return z=Math.max(l[0],Math.min(l[1],z)),z===M.k?M:new Nr(z,M.x,M.y)}function b(M,z,Y){var Q=z[0]-Y[0]*M.k,I=z[1]-Y[1]*M.k;return Q===M.x&&I===M.y?M:new Nr(M.k,Q,I)}function j(M){return[(+M[0][0]+ +M[1][0])/2,(+M[0][1]+ +M[1][1])/2]}function A(M,z,Y,Q){M.on("start.zoom",function(){T(this,arguments).event(Q).start()}).on("interrupt.zoom end.zoom",function(){T(this,arguments).event(Q).end()}).tween("zoom",function(){var I=this,K=arguments,U=T(I,K).event(Q),L=r.apply(I,K),B=Y==null?j(L):typeof Y=="function"?Y.apply(I,K):Y,oe=Math.max(L[1][0]-L[0][0],L[1][1]-L[0][1]),re=I.__zoom,ce=typeof z=="function"?z.apply(I,K):z,me=p(re.invert(B).concat(oe/re.k),ce.invert(B).concat(oe/ce.k));return function(he){if(he===1)he=ce;else{var ie=me(he),pe=oe/ie[2];he=new Nr(pe,B[0]-ie[0]*pe,B[1]-ie[1]*pe)}U.zoom(null,he)}})}function T(M,z,Y){return!Y&&M.__zooming||new P(M,z)}function P(M,z){this.that=M,this.args=z,this.active=0,this.sourceEvent=null,this.extent=r.apply(M,z),this.taps=0}P.prototype={event:function(M){return M&&(this.sourceEvent=M),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(M,z){return this.mouse&&M!=="mouse"&&(this.mouse[1]=z.invert(this.mouse[0])),this.touch0&&M!=="touch"&&(this.touch0[1]=z.invert(this.touch0[0])),this.touch1&&M!=="touch"&&(this.touch1[1]=z.invert(this.touch1[0])),this.that.__zoom=z,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(M){var z=an(this.that).datum();h.call(M,this.that,new rS(M,{sourceEvent:this.sourceEvent,target:_,transform:this.that.__zoom,dispatch:h}),z)}};function O(M,...z){if(!e.apply(this,arguments))return;var Y=T(this,z).event(M),Q=this.__zoom,I=Math.max(l[0],Math.min(l[1],Q.k*Math.pow(2,s.apply(this,arguments)))),K=In(M);if(Y.wheel)(Y.mouse[0][0]!==K[0]||Y.mouse[0][1]!==K[1])&&(Y.mouse[1]=Q.invert(Y.mouse[0]=K)),clearTimeout(Y.wheel);else{if(Q.k===I)return;Y.mouse=[K,Q.invert(K)],ml(this),Y.start()}ds(M),Y.wheel=setTimeout(U,N),Y.zoom("mouse",o(b(R(Q,I),Y.mouse[0],Y.mouse[1]),Y.extent,c));function U(){Y.wheel=null,Y.end()}}function G(M,...z){if(x||!e.apply(this,arguments))return;var Y=M.currentTarget,Q=T(this,z,!0).event(M),I=an(M.view).on("mousemove.zoom",B,!0).on("mouseup.zoom",oe,!0),K=In(M,Y),U=M.clientX,L=M.clientY;og(M.view),zc(M),Q.mouse=[K,this.__zoom.invert(K)],ml(this),Q.start();function B(re){if(ds(re),!Q.moved){var ce=re.clientX-U,me=re.clientY-L;Q.moved=ce*ce+me*me>C}Q.event(re).zoom("mouse",o(b(Q.that.__zoom,Q.mouse[0]=In(re,Y),Q.mouse[1]),Q.extent,c))}function oe(re){I.on("mousemove.zoom mouseup.zoom",null),ig(re.view,Q.moved),ds(re),Q.event(re).end()}}function D(M,...z){if(e.apply(this,arguments)){var Y=this.__zoom,Q=In(M.changedTouches?M.changedTouches[0]:M,this),I=Y.invert(Q),K=Y.k*(M.shiftKey?.5:2),U=o(b(R(Y,K),Q,I),r.apply(this,z),c);ds(M),f>0?an(this).transition().duration(f).call(A,U,Q,M):an(this).call(_.transform,U,Q,M)}}function F(M,...z){if(e.apply(this,arguments)){var Y=M.touches,Q=Y.length,I=T(this,z,M.changedTouches.length===Q).event(M),K,U,L,B;for(zc(M),U=0;U<Q;++U)L=Y[U],B=In(L,this),B=[B,this.__zoom.invert(B),L.identifier],I.touch0?!I.touch1&&I.touch0[2]!==B[2]&&(I.touch1=B,I.taps=0):(I.touch0=B,K=!0,I.taps=1+!!g);g&&(g=clearTimeout(g)),K&&(I.taps<2&&(y=B[0],g=setTimeout(function(){g=null},w)),ml(this),I.start())}}function H(M,...z){if(this.__zooming){var Y=T(this,z).event(M),Q=M.changedTouches,I=Q.length,K,U,L,B;for(ds(M),K=0;K<I;++K)U=Q[K],L=In(U,this),Y.touch0&&Y.touch0[2]===U.identifier?Y.touch0[0]=L:Y.touch1&&Y.touch1[2]===U.identifier&&(Y.touch1[0]=L);if(U=Y.that.__zoom,Y.touch1){var oe=Y.touch0[0],re=Y.touch0[1],ce=Y.touch1[0],me=Y.touch1[1],he=(he=ce[0]-oe[0])*he+(he=ce[1]-oe[1])*he,ie=(ie=me[0]-re[0])*ie+(ie=me[1]-re[1])*ie;U=R(U,Math.sqrt(he/ie)),L=[(oe[0]+ce[0])/2,(oe[1]+ce[1])/2],B=[(re[0]+me[0])/2,(re[1]+me[1])/2]}else if(Y.touch0)L=Y.touch0[0],B=Y.touch0[1];else return;Y.zoom("touch",o(b(U,L,B),Y.extent,c))}}function W(M,...z){if(this.__zooming){var Y=T(this,z).event(M),Q=M.changedTouches,I=Q.length,K,U;for(zc(M),x&&clearTimeout(x),x=setTimeout(function(){x=null},w),K=0;K<I;++K)U=Q[K],Y.touch0&&Y.touch0[2]===U.identifier?delete Y.touch0:Y.touch1&&Y.touch1[2]===U.identifier&&delete Y.touch1;if(Y.touch1&&!Y.touch0&&(Y.touch0=Y.touch1,delete Y.touch1),Y.touch0)Y.touch0[1]=this.__zoom.invert(Y.touch0[0]);else if(Y.end(),Y.taps===2&&(U=In(U,this),Math.hypot(y[0]-U[0],y[1]-U[1])<E)){var L=an(this).on("dblclick.zoom");L&&L.apply(this,arguments)}}}return _.wheelDelta=function(M){return arguments.length?(s=typeof M=="function"?M:rl(+M),_):s},_.filter=function(M){return arguments.length?(e=typeof M=="function"?M:rl(!!M),_):e},_.touchable=function(M){return arguments.length?(a=typeof M=="function"?M:rl(!!M),_):a},_.extent=function(M){return arguments.length?(r=typeof M=="function"?M:rl([[+M[0][0],+M[0][1]],[+M[1][0],+M[1][1]]]),_):r},_.scaleExtent=function(M){return arguments.length?(l[0]=+M[0],l[1]=+M[1],_):[l[0],l[1]]},_.translateExtent=function(M){return arguments.length?(c[0][0]=+M[0][0],c[1][0]=+M[1][0],c[0][1]=+M[0][1],c[1][1]=+M[1][1],_):[[c[0][0],c[0][1]],[c[1][0],c[1][1]]]},_.constrain=function(M){return arguments.length?(o=M,_):o},_.duration=function(M){return arguments.length?(f=+M,_):f},_.interpolate=function(M){return arguments.length?(p=M,_):p},_.on=function(){var M=h.on.apply(h,arguments);return M===h?_:M},_.clickDistance=function(M){return arguments.length?(C=(M=+M)*M,_):Math.sqrt(C)},_.tapDistance=function(M){return arguments.length?(E=+M,_):E},_}const tr={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,{id:r,sourceHandle:o,targetHandle:s})=>`Couldn't create edge for ${e} handle id: "${e==="source"?o:s}", edge id: ${r}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(e="react")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${e}/dist/style.css' or base.css to make sure everything is working properly.`,error014:()=>"useNodeConnections: No node ID found. Call useNodeConnections inside a custom Node or provide a node ID.",error015:()=>"It seems that you are trying to drag a node that is not initialized. Please use onNodesChange as explained in the docs."},Cs=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],_g=["Enter"," ","Escape"],Ng={"node.a11yDescription.default":"Press enter or space to select a node. Press delete to remove it and escape to cancel.","node.a11yDescription.keyboardDisabled":"Press enter or space to select a node. You can then use the arrow keys to move the node around. Press delete to remove it and escape to cancel.","node.a11yDescription.ariaLiveMessage":({direction:e,x:r,y:o})=>`Moved selected node ${e}. New position, x: ${r}, y: ${o}`,"edge.a11yDescription.default":"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel.","controls.ariaLabel":"Control Panel","controls.zoomIn.ariaLabel":"Zoom In","controls.zoomOut.ariaLabel":"Zoom Out","controls.fitView.ariaLabel":"Fit View","controls.interactive.ariaLabel":"Toggle Interactivity","minimap.ariaLabel":"Mini Map","handle.ariaLabel":"Handle"};var bi;(function(e){e.Strict="strict",e.Loose="loose"})(bi||(bi={}));var jo;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(jo||(jo={}));var ks;(function(e){e.Partial="partial",e.Full="full"})(ks||(ks={}));const Sg={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null,pointer:null};var to;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(to||(to={}));var Sl;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(Sl||(Sl={}));var je;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(je||(je={}));const pm={[je.Left]:je.Right,[je.Right]:je.Left,[je.Top]:je.Bottom,[je.Bottom]:je.Top};function Eg(e){return e===null?null:e?"valid":"invalid"}const Cg=e=>"id"in e&&"source"in e&&"target"in e,uS=e=>"id"in e&&"position"in e&&!("source"in e)&&!("target"in e),Pd=e=>"id"in e&&"internals"in e&&!("source"in e)&&!("target"in e),Os=(e,r=[0,0])=>{const{width:o,height:s}=kr(e),a=e.origin??r,l=o*a[0],c=s*a[1];return{x:e.position.x-l,y:e.position.y-c}},cS=(e,r={nodeOrigin:[0,0]})=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const o=e.reduce((s,a)=>{const l=typeof a=="string";let c=!r.nodeLookup&&!l?a:void 0;r.nodeLookup&&(c=l?r.nodeLookup.get(a):Pd(a)?a:r.nodeLookup.get(a.id));const f=c?El(c,r.nodeOrigin):{x:0,y:0,x2:0,y2:0};return Al(s,f)},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return $l(o)},Hs=(e,r={})=>{let o={x:1/0,y:1/0,x2:-1/0,y2:-1/0},s=!1;return e.forEach(a=>{(r.filter===void 0||r.filter(a))&&(o=Al(o,El(a)),s=!0)}),s?$l(o):{x:0,y:0,width:0,height:0}},Md=(e,r,[o,s,a]=[0,0,1],l=!1,c=!1)=>{const f={...Bs(r,[o,s,a]),width:r.width/a,height:r.height/a},p=[];for(const h of e.values()){const{measured:g,selectable:y=!0,hidden:x=!1}=h;if(c&&!y||x)continue;const w=g.width??h.width??h.initialWidth??null,N=g.height??h.height??h.initialHeight??null,C=js(f,Ni(h)),E=(w??0)*(N??0),_=l&&C>0;(!h.internals.handleBounds||_||C>=E||h.dragging)&&p.push(h)}return p},dS=(e,r)=>{const o=new Set;return e.forEach(s=>{o.add(s.id)}),r.filter(s=>o.has(s.source)||o.has(s.target))};function fS(e,r){const o=new Map,s=r?.nodes?new Set(r.nodes.map(a=>a.id)):null;return e.forEach(a=>{a.measured.width&&a.measured.height&&(r?.includeHiddenNodes||!a.hidden)&&(!s||s.has(a.id))&&o.set(a.id,a)}),o}async function hS({nodes:e,width:r,height:o,panZoom:s,minZoom:a,maxZoom:l},c){if(e.size===0)return Promise.resolve(!0);const f=fS(e,c),p=Hs(f),h=Td(p,r,o,c?.minZoom??a,c?.maxZoom??l,c?.padding??.1);return await s.setViewport(h,{duration:c?.duration,ease:c?.ease,interpolate:c?.interpolate}),Promise.resolve(!0)}function kg({nodeId:e,nextPosition:r,nodeLookup:o,nodeOrigin:s=[0,0],nodeExtent:a,onError:l}){const c=o.get(e),f=c.parentId?o.get(c.parentId):void 0,{x:p,y:h}=f?f.internals.positionAbsolute:{x:0,y:0},g=c.origin??s;let y=c.extent||a;if(c.extent==="parent"&&!c.expandParent)if(!f)l?.("005",tr.error005());else{const w=f.measured.width,N=f.measured.height;w&&N&&(y=[[p,h],[p+w,h+N]])}else f&&Si(c.extent)&&(y=[[c.extent[0][0]+p,c.extent[0][1]+h],[c.extent[1][0]+p,c.extent[1][1]+h]]);const x=Si(y)?Do(r,y,c.measured):r;return(c.measured.width===void 0||c.measured.height===void 0)&&l?.("015",tr.error015()),{position:{x:x.x-p+(c.measured.width??0)*g[0],y:x.y-h+(c.measured.height??0)*g[1]},positionAbsolute:x}}async function pS({nodesToRemove:e=[],edgesToRemove:r=[],nodes:o,edges:s,onBeforeDelete:a}){const l=new Set(e.map(x=>x.id)),c=[];for(const x of o){if(x.deletable===!1)continue;const w=l.has(x.id),N=!w&&x.parentId&&c.find(C=>C.id===x.parentId);(w||N)&&c.push(x)}const f=new Set(r.map(x=>x.id)),p=s.filter(x=>x.deletable!==!1),g=dS(c,p);for(const x of p)f.has(x.id)&&!g.find(N=>N.id===x.id)&&g.push(x);if(!a)return{edges:g,nodes:c};const y=await a({nodes:c,edges:g});return typeof y=="boolean"?y?{edges:g,nodes:c}:{edges:[],nodes:[]}:y}const _i=(e,r=0,o=1)=>Math.min(Math.max(e,r),o),Do=(e={x:0,y:0},r,o)=>({x:_i(e.x,r[0][0],r[1][0]-(o?.width??0)),y:_i(e.y,r[0][1],r[1][1]-(o?.height??0))});function jg(e,r,o){const{width:s,height:a}=kr(o),{x:l,y:c}=o.internals.positionAbsolute;return Do(e,[[l,c],[l+s,c+a]],r)}const mm=(e,r,o)=>e<r?_i(Math.abs(e-r),1,r)/r:e>o?-_i(Math.abs(e-o),1,r)/r:0,Rg=(e,r,o=15,s=40)=>{const a=mm(e.x,s,r.width-s)*o,l=mm(e.y,s,r.height-s)*o;return[a,l]},Al=(e,r)=>({x:Math.min(e.x,r.x),y:Math.min(e.y,r.y),x2:Math.max(e.x2,r.x2),y2:Math.max(e.y2,r.y2)}),od=({x:e,y:r,width:o,height:s})=>({x:e,y:r,x2:e+o,y2:r+s}),$l=({x:e,y:r,x2:o,y2:s})=>({x:e,y:r,width:o-e,height:s-r}),Ni=(e,r=[0,0])=>{const{x:o,y:s}=Pd(e)?e.internals.positionAbsolute:Os(e,r);return{x:o,y:s,width:e.measured?.width??e.width??e.initialWidth??0,height:e.measured?.height??e.height??e.initialHeight??0}},El=(e,r=[0,0])=>{const{x:o,y:s}=Pd(e)?e.internals.positionAbsolute:Os(e,r);return{x:o,y:s,x2:o+(e.measured?.width??e.width??e.initialWidth??0),y2:s+(e.measured?.height??e.height??e.initialHeight??0)}},Pg=(e,r)=>$l(Al(od(e),od(r))),js=(e,r)=>{const o=Math.max(0,Math.min(e.x+e.width,r.x+r.width)-Math.max(e.x,r.x)),s=Math.max(0,Math.min(e.y+e.height,r.y+r.height)-Math.max(e.y,r.y));return Math.ceil(o*s)},gm=e=>$n(e.width)&&$n(e.height)&&$n(e.x)&&$n(e.y),$n=e=>!isNaN(e)&&isFinite(e),mS=(e,r)=>{},Vs=(e,r=[1,1])=>({x:r[0]*Math.round(e.x/r[0]),y:r[1]*Math.round(e.y/r[1])}),Bs=({x:e,y:r},[o,s,a],l=!1,c=[1,1])=>{const f={x:(e-o)/a,y:(r-s)/a};return l?Vs(f,c):f},Cl=({x:e,y:r},[o,s,a])=>({x:e*a+o,y:r*a+s});function di(e,r){if(typeof e=="number")return Math.floor((r-r/(1+e))*.5);if(typeof e=="string"&&e.endsWith("px")){const o=parseFloat(e);if(!Number.isNaN(o))return Math.floor(o)}if(typeof e=="string"&&e.endsWith("%")){const o=parseFloat(e);if(!Number.isNaN(o))return Math.floor(r*o*.01)}return console.error(`[React Flow] The padding value "${e}" is invalid. Please provide a number or a string with a valid unit (px or %).`),0}function gS(e,r,o){if(typeof e=="string"||typeof e=="number"){const s=di(e,o),a=di(e,r);return{top:s,right:a,bottom:s,left:a,x:a*2,y:s*2}}if(typeof e=="object"){const s=di(e.top??e.y??0,o),a=di(e.bottom??e.y??0,o),l=di(e.left??e.x??0,r),c=di(e.right??e.x??0,r);return{top:s,right:c,bottom:a,left:l,x:l+c,y:s+a}}return{top:0,right:0,bottom:0,left:0,x:0,y:0}}function yS(e,r,o,s,a,l){const{x:c,y:f}=Cl(e,[r,o,s]),{x:p,y:h}=Cl({x:e.x+e.width,y:e.y+e.height},[r,o,s]),g=a-p,y=l-h;return{left:Math.floor(c),top:Math.floor(f),right:Math.floor(g),bottom:Math.floor(y)}}const Td=(e,r,o,s,a,l)=>{const c=gS(l,r,o),f=(r-c.x)/e.width,p=(o-c.y)/e.height,h=Math.min(f,p),g=_i(h,s,a),y=e.x+e.width/2,x=e.y+e.height/2,w=r/2-y*g,N=o/2-x*g,C=yS(e,w,N,g,r,o),E={left:Math.min(C.left-c.left,0),top:Math.min(C.top-c.top,0),right:Math.min(C.right-c.right,0),bottom:Math.min(C.bottom-c.bottom,0)};return{x:w-E.left+E.right,y:N-E.top+E.bottom,zoom:g}},Rs=()=>typeof navigator<"u"&&navigator?.userAgent?.indexOf("Mac")>=0;function Si(e){return e!=null&&e!=="parent"}function kr(e){return{width:e.measured?.width??e.width??e.initialWidth??0,height:e.measured?.height??e.height??e.initialHeight??0}}function Mg(e){return(e.measured?.width??e.width??e.initialWidth)!==void 0&&(e.measured?.height??e.height??e.initialHeight)!==void 0}function Tg(e,r={width:0,height:0},o,s,a){const l={...e},c=s.get(o);if(c){const f=c.origin||a;l.x+=c.internals.positionAbsolute.x-(r.width??0)*f[0],l.y+=c.internals.positionAbsolute.y-(r.height??0)*f[1]}return l}function ym(e,r){if(e.size!==r.size)return!1;for(const o of e)if(!r.has(o))return!1;return!0}function xS(){let e,r;return{promise:new Promise((s,a)=>{e=s,r=a}),resolve:e,reject:r}}function vS(e){return{...Ng,...e||{}}}function xs(e,{snapGrid:r=[0,0],snapToGrid:o=!1,transform:s,containerBounds:a}){const{x:l,y:c}=Fn(e),f=Bs({x:l-(a?.left??0),y:c-(a?.top??0)},s),{x:p,y:h}=o?Vs(f,r):f;return{xSnapped:p,ySnapped:h,...f}}const Dd=e=>({width:e.offsetWidth,height:e.offsetHeight}),Dg=e=>e?.getRootNode?.()||window?.document,wS=["INPUT","SELECT","TEXTAREA"];function Lg(e){const r=e.composedPath?.()?.[0]||e.target;return r?.nodeType!==1?!1:wS.includes(r.nodeName)||r.hasAttribute("contenteditable")||!!r.closest(".nokey")}const zg=e=>"clientX"in e,Fn=(e,r)=>{const o=zg(e),s=o?e.clientX:e.touches?.[0].clientX,a=o?e.clientY:e.touches?.[0].clientY;return{x:s-(r?.left??0),y:a-(r?.top??0)}},xm=(e,r,o,s,a)=>{const l=r.querySelectorAll(`.${e}`);return!l||!l.length?null:Array.from(l).map(c=>{const f=c.getBoundingClientRect();return{id:c.getAttribute("data-handleid"),type:e,nodeId:a,position:c.getAttribute("data-handlepos"),x:(f.left-o.left)/s,y:(f.top-o.top)/s,...Dd(c)}})};function Ig({sourceX:e,sourceY:r,targetX:o,targetY:s,sourceControlX:a,sourceControlY:l,targetControlX:c,targetControlY:f}){const p=e*.125+a*.375+c*.375+o*.125,h=r*.125+l*.375+f*.375+s*.125,g=Math.abs(p-e),y=Math.abs(h-r);return[p,h,g,y]}function ol(e,r){return e>=0?.5*e:r*25*Math.sqrt(-e)}function vm({pos:e,x1:r,y1:o,x2:s,y2:a,c:l}){switch(e){case je.Left:return[r-ol(r-s,l),o];case je.Right:return[r+ol(s-r,l),o];case je.Top:return[r,o-ol(o-a,l)];case je.Bottom:return[r,o+ol(a-o,l)]}}function Ag({sourceX:e,sourceY:r,sourcePosition:o=je.Bottom,targetX:s,targetY:a,targetPosition:l=je.Top,curvature:c=.25}){const[f,p]=vm({pos:o,x1:e,y1:r,x2:s,y2:a,c}),[h,g]=vm({pos:l,x1:s,y1:a,x2:e,y2:r,c}),[y,x,w,N]=Ig({sourceX:e,sourceY:r,targetX:s,targetY:a,sourceControlX:f,sourceControlY:p,targetControlX:h,targetControlY:g});return[`M${e},${r} C${f},${p} ${h},${g} ${s},${a}`,y,x,w,N]}function $g({sourceX:e,sourceY:r,targetX:o,targetY:s}){const a=Math.abs(o-e)/2,l=o<e?o+a:o-a,c=Math.abs(s-r)/2,f=s<r?s+c:s-c;return[l,f,a,c]}function bS({sourceNode:e,targetNode:r,selected:o=!1,zIndex:s=0,elevateOnSelect:a=!1,zIndexMode:l="basic"}){if(l==="manual")return s;const c=a&&o?s+1e3:s,f=Math.max(e.parentId||a&&e.selected?e.internals.z:0,r.parentId||a&&r.selected?r.internals.z:0);return c+f}function _S({sourceNode:e,targetNode:r,width:o,height:s,transform:a}){const l=Al(El(e),El(r));l.x===l.x2&&(l.x2+=1),l.y===l.y2&&(l.y2+=1);const c={x:-a[0]/a[2],y:-a[1]/a[2],width:o/a[2],height:s/a[2]};return js(c,$l(l))>0}const NS=({source:e,sourceHandle:r,target:o,targetHandle:s})=>`xy-edge__${e}${r||""}-${o}${s||""}`,SS=(e,r)=>r.some(o=>o.source===e.source&&o.target===e.target&&(o.sourceHandle===e.sourceHandle||!o.sourceHandle&&!e.sourceHandle)&&(o.targetHandle===e.targetHandle||!o.targetHandle&&!e.targetHandle)),Fg=(e,r,o={})=>{if(!e.source||!e.target)return r;const s=o.getEdgeId||NS;let a;return Cg(e)?a={...e}:a={...e,id:s(e)},SS(a,r)?r:(a.sourceHandle===null&&delete a.sourceHandle,a.targetHandle===null&&delete a.targetHandle,r.concat(a))};function Og({sourceX:e,sourceY:r,targetX:o,targetY:s}){const[a,l,c,f]=$g({sourceX:e,sourceY:r,targetX:o,targetY:s});return[`M ${e},${r}L ${o},${s}`,a,l,c,f]}const wm={[je.Left]:{x:-1,y:0},[je.Right]:{x:1,y:0},[je.Top]:{x:0,y:-1},[je.Bottom]:{x:0,y:1}},ES=({source:e,sourcePosition:r=je.Bottom,target:o})=>r===je.Left||r===je.Right?e.x<o.x?{x:1,y:0}:{x:-1,y:0}:e.y<o.y?{x:0,y:1}:{x:0,y:-1},bm=(e,r)=>Math.sqrt(Math.pow(r.x-e.x,2)+Math.pow(r.y-e.y,2));function CS({source:e,sourcePosition:r=je.Bottom,target:o,targetPosition:s=je.Top,center:a,offset:l,stepPosition:c}){const f=wm[r],p=wm[s],h={x:e.x+f.x*l,y:e.y+f.y*l},g={x:o.x+p.x*l,y:o.y+p.y*l},y=ES({source:h,sourcePosition:r,target:g}),x=y.x!==0?"x":"y",w=y[x];let N=[],C,E;const _={x:0,y:0},R={x:0,y:0},[,,b,j]=$g({sourceX:e.x,sourceY:e.y,targetX:o.x,targetY:o.y});if(f[x]*p[x]===-1){x==="x"?(C=a.x??h.x+(g.x-h.x)*c,E=a.y??(h.y+g.y)/2):(C=a.x??(h.x+g.x)/2,E=a.y??h.y+(g.y-h.y)*c);const T=[{x:C,y:h.y},{x:C,y:g.y}],P=[{x:h.x,y:E},{x:g.x,y:E}];f[x]===w?N=x==="x"?T:P:N=x==="x"?P:T}else{const T=[{x:h.x,y:g.y}],P=[{x:g.x,y:h.y}];if(x==="x"?N=f.x===w?P:T:N=f.y===w?T:P,r===s){const H=Math.abs(e[x]-o[x]);if(H<=l){const W=Math.min(l-1,l-H);f[x]===w?_[x]=(h[x]>e[x]?-1:1)*W:R[x]=(g[x]>o[x]?-1:1)*W}}if(r!==s){const H=x==="x"?"y":"x",W=f[x]===p[H],M=h[H]>g[H],z=h[H]<g[H];(f[x]===1&&(!W&&M||W&&z)||f[x]!==1&&(!W&&z||W&&M))&&(N=x==="x"?T:P)}const O={x:h.x+_.x,y:h.y+_.y},G={x:g.x+R.x,y:g.y+R.y},D=Math.max(Math.abs(O.x-N[0].x),Math.abs(G.x-N[0].x)),F=Math.max(Math.abs(O.y-N[0].y),Math.abs(G.y-N[0].y));D>=F?(C=(O.x+G.x)/2,E=N[0].y):(C=N[0].x,E=(O.y+G.y)/2)}return[[e,{x:h.x+_.x,y:h.y+_.y},...N,{x:g.x+R.x,y:g.y+R.y},o],C,E,b,j]}function kS(e,r,o,s){const a=Math.min(bm(e,r)/2,bm(r,o)/2,s),{x:l,y:c}=r;if(e.x===l&&l===o.x||e.y===c&&c===o.y)return`L${l} ${c}`;if(e.y===c){const h=e.x<o.x?-1:1,g=e.y<o.y?1:-1;return`L ${l+a*h},${c}Q ${l},${c} ${l},${c+a*g}`}const f=e.x<o.x?1:-1,p=e.y<o.y?-1:1;return`L ${l},${c+a*p}Q ${l},${c} ${l+a*f},${c}`}function kl({sourceX:e,sourceY:r,sourcePosition:o=je.Bottom,targetX:s,targetY:a,targetPosition:l=je.Top,borderRadius:c=5,centerX:f,centerY:p,offset:h=20,stepPosition:g=.5}){const[y,x,w,N,C]=CS({source:{x:e,y:r},sourcePosition:o,target:{x:s,y:a},targetPosition:l,center:{x:f,y:p},offset:h,stepPosition:g});return[y.reduce((_,R,b)=>{let j="";return b>0&&b<y.length-1?j=kS(y[b-1],R,y[b+1],c):j=`${b===0?"M":"L"}${R.x} ${R.y}`,_+=j,_},""),x,w,N,C]}function _m(e){return e&&!!(e.internals.handleBounds||e.handles?.length)&&!!(e.measured.width||e.width||e.initialWidth)}function jS(e){const{sourceNode:r,targetNode:o}=e;if(!_m(r)||!_m(o))return null;const s=r.internals.handleBounds||Nm(r.handles),a=o.internals.handleBounds||Nm(o.handles),l=Sm(s?.source??[],e.sourceHandle),c=Sm(e.connectionMode===bi.Strict?a?.target??[]:(a?.target??[]).concat(a?.source??[]),e.targetHandle);if(!l||!c)return e.onError?.("008",tr.error008(l?"target":"source",{id:e.id,sourceHandle:e.sourceHandle,targetHandle:e.targetHandle})),null;const f=l?.position||je.Bottom,p=c?.position||je.Top,h=Lo(r,l,f),g=Lo(o,c,p);return{sourceX:h.x,sourceY:h.y,targetX:g.x,targetY:g.y,sourcePosition:f,targetPosition:p}}function Nm(e){if(!e)return null;const r=[],o=[];for(const s of e)s.width=s.width??1,s.height=s.height??1,s.type==="source"?r.push(s):s.type==="target"&&o.push(s);return{source:r,target:o}}function Lo(e,r,o=je.Left,s=!1){const a=(r?.x??0)+e.internals.positionAbsolute.x,l=(r?.y??0)+e.internals.positionAbsolute.y,{width:c,height:f}=r??kr(e);if(s)return{x:a+c/2,y:l+f/2};switch(r?.position??o){case je.Top:return{x:a+c/2,y:l};case je.Right:return{x:a+c,y:l+f/2};case je.Bottom:return{x:a+c/2,y:l+f};case je.Left:return{x:a,y:l+f/2}}}function Sm(e,r){return e&&(r?e.find(o=>o.id===r):e[0])||null}function id(e,r){return e?typeof e=="string"?e:`${r?`${r}__`:""}${Object.keys(e).sort().map(s=>`${s}=${e[s]}`).join("&")}`:""}function RS(e,{id:r,defaultColor:o,defaultMarkerStart:s,defaultMarkerEnd:a}){const l=new Set;return e.reduce((c,f)=>([f.markerStart||s,f.markerEnd||a].forEach(p=>{if(p&&typeof p=="object"){const h=id(p,r);l.has(h)||(c.push({id:h,color:p.color||o,...p}),l.add(h))}}),c),[]).sort((c,f)=>c.id.localeCompare(f.id))}const Hg=1e3,PS=10,Ld={nodeOrigin:[0,0],nodeExtent:Cs,elevateNodesOnSelect:!0,zIndexMode:"basic",defaults:{}},MS={...Ld,checkEquality:!0};function zd(e,r){const o={...e};for(const s in r)r[s]!==void 0&&(o[s]=r[s]);return o}function TS(e,r,o){const s=zd(Ld,o);for(const a of e.values())if(a.parentId)Ad(a,e,r,s);else{const l=Os(a,s.nodeOrigin),c=Si(a.extent)?a.extent:s.nodeExtent,f=Do(l,c,kr(a));a.internals.positionAbsolute=f}}function DS(e,r){if(!e.handles)return e.measured?r?.internals.handleBounds:void 0;const o=[],s=[];for(const a of e.handles){const l={id:a.id,width:a.width??1,height:a.height??1,nodeId:e.id,x:a.x,y:a.y,position:a.position,type:a.type};a.type==="source"?o.push(l):a.type==="target"&&s.push(l)}return{source:o,target:s}}function Id(e){return e==="manual"}function sd(e,r,o,s={}){const a=zd(MS,s),l={i:0},c=new Map(r),f=a?.elevateNodesOnSelect&&!Id(a.zIndexMode)?Hg:0;let p=e.length>0;r.clear(),o.clear();for(const h of e){let g=c.get(h.id);if(a.checkEquality&&h===g?.internals.userNode)r.set(h.id,g);else{const y=Os(h,a.nodeOrigin),x=Si(h.extent)?h.extent:a.nodeExtent,w=Do(y,x,kr(h));g={...a.defaults,...h,measured:{width:h.measured?.width,height:h.measured?.height},internals:{positionAbsolute:w,handleBounds:DS(h,g),z:Vg(h,f,a.zIndexMode),userNode:h}},r.set(h.id,g)}(g.measured===void 0||g.measured.width===void 0||g.measured.height===void 0)&&!g.hidden&&(p=!1),h.parentId&&Ad(g,r,o,s,l)}return p}function LS(e,r){if(!e.parentId)return;const o=r.get(e.parentId);o?o.set(e.id,e):r.set(e.parentId,new Map([[e.id,e]]))}function Ad(e,r,o,s,a){const{elevateNodesOnSelect:l,nodeOrigin:c,nodeExtent:f,zIndexMode:p}=zd(Ld,s),h=e.parentId,g=r.get(h);if(!g){console.warn(`Parent node ${h} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);return}LS(e,o),a&&!g.parentId&&g.internals.rootParentIndex===void 0&&p==="auto"&&(g.internals.rootParentIndex=++a.i,g.internals.z=g.internals.z+a.i*PS),a&&g.internals.rootParentIndex!==void 0&&(a.i=g.internals.rootParentIndex);const y=l&&!Id(p)?Hg:0,{x,y:w,z:N}=zS(e,g,c,f,y,p),{positionAbsolute:C}=e.internals,E=x!==C.x||w!==C.y;(E||N!==e.internals.z)&&r.set(e.id,{...e,internals:{...e.internals,positionAbsolute:E?{x,y:w}:C,z:N}})}function Vg(e,r,o){const s=$n(e.zIndex)?e.zIndex:0;return Id(o)?s:s+(e.selected?r:0)}function zS(e,r,o,s,a,l){const{x:c,y:f}=r.internals.positionAbsolute,p=kr(e),h=Os(e,o),g=Si(e.extent)?Do(h,e.extent,p):h;let y=Do({x:c+g.x,y:f+g.y},s,p);e.extent==="parent"&&(y=jg(y,p,r));const x=Vg(e,a,l),w=r.internals.z??0;return{x:y.x,y:y.y,z:w>=x?w+1:x}}function $d(e,r,o,s=[0,0]){const a=[],l=new Map;for(const c of e){const f=r.get(c.parentId);if(!f)continue;const p=l.get(c.parentId)?.expandedRect??Ni(f),h=Pg(p,c.rect);l.set(c.parentId,{expandedRect:h,parent:f})}return l.size>0&&l.forEach(({expandedRect:c,parent:f},p)=>{const h=f.internals.positionAbsolute,g=kr(f),y=f.origin??s,x=c.x<h.x?Math.round(Math.abs(h.x-c.x)):0,w=c.y<h.y?Math.round(Math.abs(h.y-c.y)):0,N=Math.max(g.width,Math.round(c.width)),C=Math.max(g.height,Math.round(c.height)),E=(N-g.width)*y[0],_=(C-g.height)*y[1];(x>0||w>0||E||_)&&(a.push({id:p,type:"position",position:{x:f.position.x-x+E,y:f.position.y-w+_}}),o.get(p)?.forEach(R=>{e.some(b=>b.id===R.id)||a.push({id:R.id,type:"position",position:{x:R.position.x+x,y:R.position.y+w}})})),(g.width<c.width||g.height<c.height||x||w)&&a.push({id:p,type:"dimensions",setAttributes:!0,dimensions:{width:N+(x?y[0]*x-E:0),height:C+(w?y[1]*w-_:0)}})}),a}function IS(e,r,o,s,a,l,c){const f=s?.querySelector(".xyflow__viewport");let p=!1;if(!f)return{changes:[],updatedInternals:p};const h=[],g=window.getComputedStyle(f),{m22:y}=new window.DOMMatrixReadOnly(g.transform),x=[];for(const w of e.values()){const N=r.get(w.id);if(!N)continue;if(N.hidden){r.set(N.id,{...N,internals:{...N.internals,handleBounds:void 0}}),p=!0;continue}const C=Dd(w.nodeElement),E=N.measured.width!==C.width||N.measured.height!==C.height;if(!!(C.width&&C.height&&(E||!N.internals.handleBounds||w.force))){const R=w.nodeElement.getBoundingClientRect(),b=Si(N.extent)?N.extent:l;let{positionAbsolute:j}=N.internals;N.parentId&&N.extent==="parent"?j=jg(j,C,r.get(N.parentId)):b&&(j=Do(j,b,C));const A={...N,measured:C,internals:{...N.internals,positionAbsolute:j,handleBounds:{source:xm("source",w.nodeElement,R,y,N.id),target:xm("target",w.nodeElement,R,y,N.id)}}};r.set(N.id,A),N.parentId&&Ad(A,r,o,{nodeOrigin:a,zIndexMode:c}),p=!0,E&&(h.push({id:N.id,type:"dimensions",dimensions:C}),N.expandParent&&N.parentId&&x.push({id:N.id,parentId:N.parentId,rect:Ni(A,a)}))}}if(x.length>0){const w=$d(x,r,o,a);h.push(...w)}return{changes:h,updatedInternals:p}}async function AS({delta:e,panZoom:r,transform:o,translateExtent:s,width:a,height:l}){if(!r||!e.x&&!e.y)return Promise.resolve(!1);const c=await r.setViewportConstrained({x:o[0]+e.x,y:o[1]+e.y,zoom:o[2]},[[0,0],[a,l]],s),f=!!c&&(c.x!==o[0]||c.y!==o[1]||c.k!==o[2]);return Promise.resolve(f)}function Em(e,r,o,s,a,l){let c=a;const f=s.get(c)||new Map;s.set(c,f.set(o,r)),c=`${a}-${e}`;const p=s.get(c)||new Map;if(s.set(c,p.set(o,r)),l){c=`${a}-${e}-${l}`;const h=s.get(c)||new Map;s.set(c,h.set(o,r))}}function Bg(e,r,o){e.clear(),r.clear();for(const s of o){const{source:a,target:l,sourceHandle:c=null,targetHandle:f=null}=s,p={edgeId:s.id,source:a,target:l,sourceHandle:c,targetHandle:f},h=`${a}-${c}--${l}-${f}`,g=`${l}-${f}--${a}-${c}`;Em("source",p,g,e,a,c),Em("target",p,h,e,l,f),r.set(s.id,s)}}function Ug(e,r){if(!e.parentId)return!1;const o=r.get(e.parentId);return o?o.selected?!0:Ug(o,r):!1}function Cm(e,r,o){let s=e;do{if(s?.matches?.(r))return!0;if(s===o)return!1;s=s?.parentElement}while(s);return!1}function $S(e,r,o,s){const a=new Map;for(const[l,c]of e)if((c.selected||c.id===s)&&(!c.parentId||!Ug(c,e))&&(c.draggable||r&&typeof c.draggable>"u")){const f=e.get(l);f&&a.set(l,{id:l,position:f.position||{x:0,y:0},distance:{x:o.x-f.internals.positionAbsolute.x,y:o.y-f.internals.positionAbsolute.y},extent:f.extent,parentId:f.parentId,origin:f.origin,expandParent:f.expandParent,internals:{positionAbsolute:f.internals.positionAbsolute||{x:0,y:0}},measured:{width:f.measured.width??0,height:f.measured.height??0}})}return a}function Ic({nodeId:e,dragItems:r,nodeLookup:o,dragging:s=!0}){const a=[];for(const[c,f]of r){const p=o.get(c)?.internals.userNode;p&&a.push({...p,position:f.position,dragging:s})}if(!e)return[a[0],a];const l=o.get(e)?.internals.userNode;return[l?{...l,position:r.get(e)?.position||l.position,dragging:s}:a[0],a]}function FS({dragItems:e,snapGrid:r,x:o,y:s}){const a=e.values().next().value;if(!a)return null;const l={x:o-a.distance.x,y:s-a.distance.y},c=Vs(l,r);return{x:c.x-l.x,y:c.y-l.y}}function OS({onNodeMouseDown:e,getStoreItems:r,onDragStart:o,onDrag:s,onDragStop:a}){let l={x:null,y:null},c=0,f=new Map,p=!1,h={x:0,y:0},g=null,y=!1,x=null,w=!1,N=!1,C=null;function E({noDragClassName:R,handleSelector:b,domNode:j,isSelectable:A,nodeId:T,nodeClickDistance:P=0}){x=an(j);function O({x:H,y:W}){const{nodeLookup:M,nodeExtent:z,snapGrid:Y,snapToGrid:Q,nodeOrigin:I,onNodeDrag:K,onSelectionDrag:U,onError:L,updateNodePositions:B}=r();l={x:H,y:W};let oe=!1;const re=f.size>1,ce=re&&z?od(Hs(f)):null,me=re&&Q?FS({dragItems:f,snapGrid:Y,x:H,y:W}):null;for(const[he,ie]of f){if(!M.has(he))continue;let pe={x:H-ie.distance.x,y:W-ie.distance.y};Q&&(pe=me?{x:Math.round(pe.x+me.x),y:Math.round(pe.y+me.y)}:Vs(pe,Y));let De=null;if(re&&z&&!ie.extent&&ce){const{positionAbsolute:Re}=ie.internals,Be=Re.x-ce.x+z[0][0],Ze=Re.x+ie.measured.width-ce.x2+z[1][0],He=Re.y-ce.y+z[0][1],ut=Re.y+ie.measured.height-ce.y2+z[1][1];De=[[Be,He],[Ze,ut]]}const{position:ze,positionAbsolute:ye}=kg({nodeId:he,nextPosition:pe,nodeLookup:M,nodeExtent:De||z,nodeOrigin:I,onError:L});oe=oe||ie.position.x!==ze.x||ie.position.y!==ze.y,ie.position=ze,ie.internals.positionAbsolute=ye}if(N=N||oe,!!oe&&(B(f,!0),C&&(s||K||!T&&U))){const[he,ie]=Ic({nodeId:T,dragItems:f,nodeLookup:M});s?.(C,f,he,ie),K?.(C,he,ie),T||U?.(C,ie)}}async function G(){if(!g)return;const{transform:H,panBy:W,autoPanSpeed:M,autoPanOnNodeDrag:z}=r();if(!z){p=!1,cancelAnimationFrame(c);return}const[Y,Q]=Rg(h,g,M);(Y!==0||Q!==0)&&(l.x=(l.x??0)-Y/H[2],l.y=(l.y??0)-Q/H[2],await W({x:Y,y:Q})&&O(l)),c=requestAnimationFrame(G)}function D(H){const{nodeLookup:W,multiSelectionActive:M,nodesDraggable:z,transform:Y,snapGrid:Q,snapToGrid:I,selectNodesOnDrag:K,onNodeDragStart:U,onSelectionDragStart:L,unselectNodesAndEdges:B}=r();y=!0,(!K||!A)&&!M&&T&&(W.get(T)?.selected||B()),A&&K&&T&&e?.(T);const oe=xs(H.sourceEvent,{transform:Y,snapGrid:Q,snapToGrid:I,containerBounds:g});if(l=oe,f=$S(W,z,oe,T),f.size>0&&(o||U||!T&&L)){const[re,ce]=Ic({nodeId:T,dragItems:f,nodeLookup:W});o?.(H.sourceEvent,f,re,ce),U?.(H.sourceEvent,re,ce),T||L?.(H.sourceEvent,ce)}}const F=sg().clickDistance(P).on("start",H=>{const{domNode:W,nodeDragThreshold:M,transform:z,snapGrid:Y,snapToGrid:Q}=r();g=W?.getBoundingClientRect()||null,w=!1,N=!1,C=H.sourceEvent,M===0&&D(H),l=xs(H.sourceEvent,{transform:z,snapGrid:Y,snapToGrid:Q,containerBounds:g}),h=Fn(H.sourceEvent,g)}).on("drag",H=>{const{autoPanOnNodeDrag:W,transform:M,snapGrid:z,snapToGrid:Y,nodeDragThreshold:Q,nodeLookup:I}=r(),K=xs(H.sourceEvent,{transform:M,snapGrid:z,snapToGrid:Y,containerBounds:g});if(C=H.sourceEvent,(H.sourceEvent.type==="touchmove"&&H.sourceEvent.touches.length>1||T&&!I.has(T))&&(w=!0),!w){if(!p&&W&&y&&(p=!0,G()),!y){const U=Fn(H.sourceEvent,g),L=U.x-h.x,B=U.y-h.y;Math.sqrt(L*L+B*B)>Q&&D(H)}(l.x!==K.xSnapped||l.y!==K.ySnapped)&&f&&y&&(h=Fn(H.sourceEvent,g),O(K))}}).on("end",H=>{if(!(!y||w)&&(p=!1,y=!1,cancelAnimationFrame(c),f.size>0)){const{nodeLookup:W,updateNodePositions:M,onNodeDragStop:z,onSelectionDragStop:Y}=r();if(N&&(M(f,!1),N=!1),a||z||!T&&Y){const[Q,I]=Ic({nodeId:T,dragItems:f,nodeLookup:W,dragging:!1});a?.(H.sourceEvent,f,Q,I),z?.(H.sourceEvent,Q,I),T||Y?.(H.sourceEvent,I)}}}).filter(H=>{const W=H.target;return!H.button&&(!R||!Cm(W,`.${R}`,j))&&(!b||Cm(W,b,j))});x.call(F)}function _(){x?.on(".drag",null)}return{update:E,destroy:_}}function HS(e,r,o){const s=[],a={x:e.x-o,y:e.y-o,width:o*2,height:o*2};for(const l of r.values())js(a,Ni(l))>0&&s.push(l);return s}const VS=250;function BS(e,r,o,s){let a=[],l=1/0;const c=HS(e,o,r+VS);for(const f of c){const p=[...f.internals.handleBounds?.source??[],...f.internals.handleBounds?.target??[]];for(const h of p){if(s.nodeId===h.nodeId&&s.type===h.type&&s.id===h.id)continue;const{x:g,y}=Lo(f,h,h.position,!0),x=Math.sqrt(Math.pow(g-e.x,2)+Math.pow(y-e.y,2));x>r||(x<l?(a=[{...h,x:g,y}],l=x):x===l&&a.push({...h,x:g,y}))}}if(!a.length)return null;if(a.length>1){const f=s.type==="source"?"target":"source";return a.find(p=>p.type===f)??a[0]}return a[0]}function Wg(e,r,o,s,a,l=!1){const c=s.get(e);if(!c)return null;const f=a==="strict"?c.internals.handleBounds?.[r]:[...c.internals.handleBounds?.source??[],...c.internals.handleBounds?.target??[]],p=(o?f?.find(h=>h.id===o):f?.[0])??null;return p&&l?{...p,...Lo(c,p,p.position,!0)}:p}function Yg(e,r){return e||(r?.classList.contains("target")?"target":r?.classList.contains("source")?"source":null)}function US(e,r){let o=null;return r?o=!0:e&&!r&&(o=!1),o}const Xg=()=>!0;function WS(e,{connectionMode:r,connectionRadius:o,handleId:s,nodeId:a,edgeUpdaterType:l,isTarget:c,domNode:f,nodeLookup:p,lib:h,autoPanOnConnect:g,flowId:y,panBy:x,cancelConnection:w,onConnectStart:N,onConnect:C,onConnectEnd:E,isValidConnection:_=Xg,onReconnectEnd:R,updateConnection:b,getTransform:j,getFromHandle:A,autoPanSpeed:T,dragThreshold:P=1,handleDomNode:O}){const G=Dg(e.target);let D=0,F;const{x:H,y:W}=Fn(e),M=Yg(l,O),z=f?.getBoundingClientRect();let Y=!1;if(!z||!M)return;const Q=Wg(a,M,s,p,r);if(!Q)return;let I=Fn(e,z),K=!1,U=null,L=!1,B=null;function oe(){if(!g||!z)return;const[ze,ye]=Rg(I,z,T);x({x:ze,y:ye}),D=requestAnimationFrame(oe)}const re={...Q,nodeId:a,type:M,position:Q.position},ce=p.get(a);let he={inProgress:!0,isValid:null,from:Lo(ce,re,je.Left,!0),fromHandle:re,fromPosition:re.position,fromNode:ce,to:I,toHandle:null,toPosition:pm[re.position],toNode:null,pointer:I};function ie(){Y=!0,b(he),N?.(e,{nodeId:a,handleId:s,handleType:M})}P===0&&ie();function pe(ze){if(!Y){const{x:ut,y:qt}=Fn(ze),Rt=ut-H,zt=qt-W;if(!(Rt*Rt+zt*zt>P*P))return;ie()}if(!A()||!re){De(ze);return}const ye=j();I=Fn(ze,z),F=BS(Bs(I,ye,!1,[1,1]),o,p,re),K||(oe(),K=!0);const Re=Gg(ze,{handle:F,connectionMode:r,fromNodeId:a,fromHandleId:s,fromType:c?"target":"source",isValidConnection:_,doc:G,lib:h,flowId:y,nodeLookup:p});B=Re.handleDomNode,U=Re.connection,L=US(!!F,Re.isValid);const Be=p.get(a),Ze=Be?Lo(Be,re,je.Left,!0):he.from,He={...he,from:Ze,isValid:L,to:Re.toHandle&&L?Cl({x:Re.toHandle.x,y:Re.toHandle.y},ye):I,toHandle:Re.toHandle,toPosition:L&&Re.toHandle?Re.toHandle.position:pm[re.position],toNode:Re.toHandle?p.get(Re.toHandle.nodeId):null,pointer:I};b(He),he=He}function De(ze){if(!("touches"in ze&&ze.touches.length>0)){if(Y){(F||B)&&U&&L&&C?.(U);const{inProgress:ye,...Re}=he,Be={...Re,toPosition:he.toHandle?he.toPosition:null};E?.(ze,Be),l&&R?.(ze,Be)}w(),cancelAnimationFrame(D),K=!1,L=!1,U=null,B=null,G.removeEventListener("mousemove",pe),G.removeEventListener("mouseup",De),G.removeEventListener("touchmove",pe),G.removeEventListener("touchend",De)}}G.addEventListener("mousemove",pe),G.addEventListener("mouseup",De),G.addEventListener("touchmove",pe),G.addEventListener("touchend",De)}function Gg(e,{handle:r,connectionMode:o,fromNodeId:s,fromHandleId:a,fromType:l,doc:c,lib:f,flowId:p,isValidConnection:h=Xg,nodeLookup:g}){const y=l==="target",x=r?c.querySelector(`.${f}-flow__handle[data-id="${p}-${r?.nodeId}-${r?.id}-${r?.type}"]`):null,{x:w,y:N}=Fn(e),C=c.elementFromPoint(w,N),E=C?.classList.contains(`${f}-flow__handle`)?C:x,_={handleDomNode:E,isValid:!1,connection:null,toHandle:null};if(E){const R=Yg(void 0,E),b=E.getAttribute("data-nodeid"),j=E.getAttribute("data-handleid"),A=E.classList.contains("connectable"),T=E.classList.contains("connectableend");if(!b||!R)return _;const P={source:y?b:s,sourceHandle:y?j:a,target:y?s:b,targetHandle:y?a:j};_.connection=P;const G=A&&T&&(o===bi.Strict?y&&R==="source"||!y&&R==="target":b!==s||j!==a);_.isValid=G&&h(P),_.toHandle=Wg(b,R,j,g,o,!0)}return _}const ad={onPointerDown:WS,isValid:Gg};function YS({domNode:e,panZoom:r,getTransform:o,getViewScale:s}){const a=an(e);function l({translateExtent:f,width:p,height:h,zoomStep:g=1,pannable:y=!0,zoomable:x=!0,inversePan:w=!1}){const N=b=>{if(b.sourceEvent.type!=="wheel"||!r)return;const j=o(),A=b.sourceEvent.ctrlKey&&Rs()?10:1,T=-b.sourceEvent.deltaY*(b.sourceEvent.deltaMode===1?.05:b.sourceEvent.deltaMode?1:.002)*g,P=j[2]*Math.pow(2,T*A);r.scaleTo(P)};let C=[0,0];const E=b=>{(b.sourceEvent.type==="mousedown"||b.sourceEvent.type==="touchstart")&&(C=[b.sourceEvent.clientX??b.sourceEvent.touches[0].clientX,b.sourceEvent.clientY??b.sourceEvent.touches[0].clientY])},_=b=>{const j=o();if(b.sourceEvent.type!=="mousemove"&&b.sourceEvent.type!=="touchmove"||!r)return;const A=[b.sourceEvent.clientX??b.sourceEvent.touches[0].clientX,b.sourceEvent.clientY??b.sourceEvent.touches[0].clientY],T=[A[0]-C[0],A[1]-C[1]];C=A;const P=s()*Math.max(j[2],Math.log(j[2]))*(w?-1:1),O={x:j[0]-T[0]*P,y:j[1]-T[1]*P},G=[[0,0],[p,h]];r.setViewportConstrained({x:O.x,y:O.y,zoom:j[2]},G,f)},R=bg().on("start",E).on("zoom",y?_:null).on("zoom.wheel",x?N:null);a.call(R,{})}function c(){a.on("zoom",null)}return{update:l,destroy:c,pointer:In}}const Fl=e=>({x:e.x,y:e.y,zoom:e.k}),Ac=({x:e,y:r,zoom:o})=>Il.translate(e,r).scale(o),pi=(e,r)=>e.target.closest(`.${r}`),Kg=(e,r)=>r===2&&Array.isArray(e)&&e.includes(2),XS=e=>((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2,$c=(e,r=0,o=XS,s=()=>{})=>{const a=typeof r=="number"&&r>0;return a||s(),a?e.transition().duration(r).ease(o).on("end",s):e},Zg=e=>{const r=e.ctrlKey&&Rs()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*r};function GS({zoomPanValues:e,noWheelClassName:r,d3Selection:o,d3Zoom:s,panOnScrollMode:a,panOnScrollSpeed:l,zoomOnPinch:c,onPanZoomStart:f,onPanZoom:p,onPanZoomEnd:h}){return g=>{if(pi(g,r))return g.ctrlKey&&g.preventDefault(),!1;g.preventDefault(),g.stopImmediatePropagation();const y=o.property("__zoom").k||1;if(g.ctrlKey&&c){const E=In(g),_=Zg(g),R=y*Math.pow(2,_);s.scaleTo(o,R,E,g);return}const x=g.deltaMode===1?20:1;let w=a===jo.Vertical?0:g.deltaX*x,N=a===jo.Horizontal?0:g.deltaY*x;!Rs()&&g.shiftKey&&a!==jo.Vertical&&(w=g.deltaY*x,N=0),s.translateBy(o,-(w/y)*l,-(N/y)*l,{internal:!0});const C=Fl(o.property("__zoom"));clearTimeout(e.panScrollTimeout),e.isPanScrolling?(p?.(g,C),e.panScrollTimeout=setTimeout(()=>{h?.(g,C),e.isPanScrolling=!1},150)):(e.isPanScrolling=!0,f?.(g,C))}}function KS({noWheelClassName:e,preventScrolling:r,d3ZoomHandler:o}){return function(s,a){const l=s.type==="wheel",c=!r&&l&&!s.ctrlKey,f=pi(s,e);if(s.ctrlKey&&l&&f&&s.preventDefault(),c||f)return null;s.preventDefault(),o.call(this,s,a)}}function ZS({zoomPanValues:e,onDraggingChange:r,onPanZoomStart:o}){return s=>{if(s.sourceEvent?.internal)return;const a=Fl(s.transform);e.mouseButton=s.sourceEvent?.button||0,e.isZoomingOrPanning=!0,e.prevViewport=a,s.sourceEvent?.type==="mousedown"&&r(!0),o&&o?.(s.sourceEvent,a)}}function QS({zoomPanValues:e,panOnDrag:r,onPaneContextMenu:o,onTransformChange:s,onPanZoom:a}){return l=>{e.usedRightMouseButton=!!(o&&Kg(r,e.mouseButton??0)),l.sourceEvent?.sync||s([l.transform.x,l.transform.y,l.transform.k]),a&&!l.sourceEvent?.internal&&a?.(l.sourceEvent,Fl(l.transform))}}function qS({zoomPanValues:e,panOnDrag:r,panOnScroll:o,onDraggingChange:s,onPanZoomEnd:a,onPaneContextMenu:l}){return c=>{if(!c.sourceEvent?.internal&&(e.isZoomingOrPanning=!1,l&&Kg(r,e.mouseButton??0)&&!e.usedRightMouseButton&&c.sourceEvent&&l(c.sourceEvent),e.usedRightMouseButton=!1,s(!1),a)){const f=Fl(c.transform);e.prevViewport=f,clearTimeout(e.timerId),e.timerId=setTimeout(()=>{a?.(c.sourceEvent,f)},o?150:0)}}}function JS({zoomActivationKeyPressed:e,zoomOnScroll:r,zoomOnPinch:o,panOnDrag:s,panOnScroll:a,zoomOnDoubleClick:l,userSelectionActive:c,noWheelClassName:f,noPanClassName:p,lib:h,connectionInProgress:g}){return y=>{const x=e||r,w=o&&y.ctrlKey,N=y.type==="wheel";if(y.button===1&&y.type==="mousedown"&&(pi(y,`${h}-flow__node`)||pi(y,`${h}-flow__edge`)))return!0;if(!s&&!x&&!a&&!l&&!o||c||g&&!N||pi(y,f)&&N||pi(y,p)&&(!N||a&&N&&!e)||!o&&y.ctrlKey&&N)return!1;if(!o&&y.type==="touchstart"&&y.touches?.length>1)return y.preventDefault(),!1;if(!x&&!a&&!w&&N||!s&&(y.type==="mousedown"||y.type==="touchstart")||Array.isArray(s)&&!s.includes(y.button)&&y.type==="mousedown")return!1;const C=Array.isArray(s)&&s.includes(y.button)||!y.button||y.button<=1;return(!y.ctrlKey||N)&&C}}function eE({domNode:e,minZoom:r,maxZoom:o,translateExtent:s,viewport:a,onPanZoom:l,onPanZoomStart:c,onPanZoomEnd:f,onDraggingChange:p}){const h={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},g=e.getBoundingClientRect(),y=bg().scaleExtent([r,o]).translateExtent(s),x=an(e).call(y);R({x:a.x,y:a.y,zoom:_i(a.zoom,r,o)},[[0,0],[g.width,g.height]],s);const w=x.on("wheel.zoom"),N=x.on("dblclick.zoom");y.wheelDelta(Zg);function C(F,H){return x?new Promise(W=>{y?.interpolate(H?.interpolate==="linear"?ys:fl).transform($c(x,H?.duration,H?.ease,()=>W(!0)),F)}):Promise.resolve(!1)}function E({noWheelClassName:F,noPanClassName:H,onPaneContextMenu:W,userSelectionActive:M,panOnScroll:z,panOnDrag:Y,panOnScrollMode:Q,panOnScrollSpeed:I,preventScrolling:K,zoomOnPinch:U,zoomOnScroll:L,zoomOnDoubleClick:B,zoomActivationKeyPressed:oe,lib:re,onTransformChange:ce,connectionInProgress:me,paneClickDistance:he,selectionOnDrag:ie}){M&&!h.isZoomingOrPanning&&_();const pe=z&&!oe&&!M;y.clickDistance(ie?1/0:!$n(he)||he<0?0:he);const De=pe?GS({zoomPanValues:h,noWheelClassName:F,d3Selection:x,d3Zoom:y,panOnScrollMode:Q,panOnScrollSpeed:I,zoomOnPinch:U,onPanZoomStart:c,onPanZoom:l,onPanZoomEnd:f}):KS({noWheelClassName:F,preventScrolling:K,d3ZoomHandler:w});if(x.on("wheel.zoom",De,{passive:!1}),!M){const ye=ZS({zoomPanValues:h,onDraggingChange:p,onPanZoomStart:c});y.on("start",ye);const Re=QS({zoomPanValues:h,panOnDrag:Y,onPaneContextMenu:!!W,onPanZoom:l,onTransformChange:ce});y.on("zoom",Re);const Be=qS({zoomPanValues:h,panOnDrag:Y,panOnScroll:z,onPaneContextMenu:W,onPanZoomEnd:f,onDraggingChange:p});y.on("end",Be)}const ze=JS({zoomActivationKeyPressed:oe,panOnDrag:Y,zoomOnScroll:L,panOnScroll:z,zoomOnDoubleClick:B,zoomOnPinch:U,userSelectionActive:M,noPanClassName:H,noWheelClassName:F,lib:re,connectionInProgress:me});y.filter(ze),B?x.on("dblclick.zoom",N):x.on("dblclick.zoom",null)}function _(){y.on("zoom",null)}async function R(F,H,W){const M=Ac(F),z=y?.constrain()(M,H,W);return z&&await C(z),new Promise(Y=>Y(z))}async function b(F,H){const W=Ac(F);return await C(W,H),new Promise(M=>M(W))}function j(F){if(x){const H=Ac(F),W=x.property("__zoom");(W.k!==F.zoom||W.x!==F.x||W.y!==F.y)&&y?.transform(x,H,null,{sync:!0})}}function A(){const F=x?wg(x.node()):{x:0,y:0,k:1};return{x:F.x,y:F.y,zoom:F.k}}function T(F,H){return x?new Promise(W=>{y?.interpolate(H?.interpolate==="linear"?ys:fl).scaleTo($c(x,H?.duration,H?.ease,()=>W(!0)),F)}):Promise.resolve(!1)}function P(F,H){return x?new Promise(W=>{y?.interpolate(H?.interpolate==="linear"?ys:fl).scaleBy($c(x,H?.duration,H?.ease,()=>W(!0)),F)}):Promise.resolve(!1)}function O(F){y?.scaleExtent(F)}function G(F){y?.translateExtent(F)}function D(F){const H=!$n(F)||F<0?0:F;y?.clickDistance(H)}return{update:E,destroy:_,setViewport:b,setViewportConstrained:R,getViewport:A,scaleTo:T,scaleBy:P,setScaleExtent:O,setTranslateExtent:G,syncViewport:j,setClickDistance:D}}var Ei;(function(e){e.Line="line",e.Handle="handle"})(Ei||(Ei={}));function tE({width:e,prevWidth:r,height:o,prevHeight:s,affectsX:a,affectsY:l}){const c=e-r,f=o-s,p=[c>0?1:c<0?-1:0,f>0?1:f<0?-1:0];return c&&a&&(p[0]=p[0]*-1),f&&l&&(p[1]=p[1]*-1),p}function km(e){const r=e.includes("right")||e.includes("left"),o=e.includes("bottom")||e.includes("top"),s=e.includes("left"),a=e.includes("top");return{isHorizontal:r,isVertical:o,affectsX:s,affectsY:a}}function Qr(e,r){return Math.max(0,r-e)}function qr(e,r){return Math.max(0,e-r)}function il(e,r,o){return Math.max(0,r-e,e-o)}function jm(e,r){return e?!r:r}function nE(e,r,o,s,a,l,c,f){let{affectsX:p,affectsY:h}=r;const{isHorizontal:g,isVertical:y}=r,x=g&&y,{xSnapped:w,ySnapped:N}=o,{minWidth:C,maxWidth:E,minHeight:_,maxHeight:R}=s,{x:b,y:j,width:A,height:T,aspectRatio:P}=e;let O=Math.floor(g?w-e.pointerX:0),G=Math.floor(y?N-e.pointerY:0);const D=A+(p?-O:O),F=T+(h?-G:G),H=-l[0]*A,W=-l[1]*T;let M=il(D,C,E),z=il(F,_,R);if(c){let I=0,K=0;p&&O<0?I=Qr(b+O+H,c[0][0]):!p&&O>0&&(I=qr(b+D+H,c[1][0])),h&&G<0?K=Qr(j+G+W,c[0][1]):!h&&G>0&&(K=qr(j+F+W,c[1][1])),M=Math.max(M,I),z=Math.max(z,K)}if(f){let I=0,K=0;p&&O>0?I=qr(b+O,f[0][0]):!p&&O<0&&(I=Qr(b+D,f[1][0])),h&&G>0?K=qr(j+G,f[0][1]):!h&&G<0&&(K=Qr(j+F,f[1][1])),M=Math.max(M,I),z=Math.max(z,K)}if(a){if(g){const I=il(D/P,_,R)*P;if(M=Math.max(M,I),c){let K=0;!p&&!h||p&&!h&&x?K=qr(j+W+D/P,c[1][1])*P:K=Qr(j+W+(p?O:-O)/P,c[0][1])*P,M=Math.max(M,K)}if(f){let K=0;!p&&!h||p&&!h&&x?K=Qr(j+D/P,f[1][1])*P:K=qr(j+(p?O:-O)/P,f[0][1])*P,M=Math.max(M,K)}}if(y){const I=il(F*P,C,E)/P;if(z=Math.max(z,I),c){let K=0;!p&&!h||h&&!p&&x?K=qr(b+F*P+H,c[1][0])/P:K=Qr(b+(h?G:-G)*P+H,c[0][0])/P,z=Math.max(z,K)}if(f){let K=0;!p&&!h||h&&!p&&x?K=Qr(b+F*P,f[1][0])/P:K=qr(b+(h?G:-G)*P,f[0][0])/P,z=Math.max(z,K)}}}G=G+(G<0?z:-z),O=O+(O<0?M:-M),a&&(x?D>F*P?G=(jm(p,h)?-O:O)/P:O=(jm(p,h)?-G:G)*P:g?(G=O/P,h=p):(O=G*P,p=h));const Y=p?b+O:b,Q=h?j+G:j;return{width:A+(p?-O:O),height:T+(h?-G:G),x:l[0]*O*(p?-1:1)+Y,y:l[1]*G*(h?-1:1)+Q}}const Qg={width:0,height:0,x:0,y:0},rE={...Qg,pointerX:0,pointerY:0,aspectRatio:1};function oE(e){return[[0,0],[e.measured.width,e.measured.height]]}function iE(e,r,o){const s=r.position.x+e.position.x,a=r.position.y+e.position.y,l=e.measured.width??0,c=e.measured.height??0,f=o[0]*l,p=o[1]*c;return[[s-f,a-p],[s+l-f,a+c-p]]}function sE({domNode:e,nodeId:r,getStoreItems:o,onChange:s,onEnd:a}){const l=an(e);let c={controlDirection:km("bottom-right"),boundaries:{minWidth:0,minHeight:0,maxWidth:Number.MAX_VALUE,maxHeight:Number.MAX_VALUE},resizeDirection:void 0,keepAspectRatio:!1};function f({controlPosition:h,boundaries:g,keepAspectRatio:y,resizeDirection:x,onResizeStart:w,onResize:N,onResizeEnd:C,shouldResize:E}){let _={...Qg},R={...rE};c={boundaries:g,resizeDirection:x,keepAspectRatio:y,controlDirection:km(h)};let b,j=null,A=[],T,P,O,G=!1;const D=sg().on("start",F=>{const{nodeLookup:H,transform:W,snapGrid:M,snapToGrid:z,nodeOrigin:Y,paneDomNode:Q}=o();if(b=H.get(r),!b)return;j=Q?.getBoundingClientRect()??null;const{xSnapped:I,ySnapped:K}=xs(F.sourceEvent,{transform:W,snapGrid:M,snapToGrid:z,containerBounds:j});_={width:b.measured.width??0,height:b.measured.height??0,x:b.position.x??0,y:b.position.y??0},R={..._,pointerX:I,pointerY:K,aspectRatio:_.width/_.height},T=void 0,b.parentId&&(b.extent==="parent"||b.expandParent)&&(T=H.get(b.parentId),P=T&&b.extent==="parent"?oE(T):void 0),A=[],O=void 0;for(const[U,L]of H)if(L.parentId===r&&(A.push({id:U,position:{...L.position},extent:L.extent}),L.extent==="parent"||L.expandParent)){const B=iE(L,b,L.origin??Y);O?O=[[Math.min(B[0][0],O[0][0]),Math.min(B[0][1],O[0][1])],[Math.max(B[1][0],O[1][0]),Math.max(B[1][1],O[1][1])]]:O=B}w?.(F,{..._})}).on("drag",F=>{const{transform:H,snapGrid:W,snapToGrid:M,nodeOrigin:z}=o(),Y=xs(F.sourceEvent,{transform:H,snapGrid:W,snapToGrid:M,containerBounds:j}),Q=[];if(!b)return;const{x:I,y:K,width:U,height:L}=_,B={},oe=b.origin??z,{width:re,height:ce,x:me,y:he}=nE(R,c.controlDirection,Y,c.boundaries,c.keepAspectRatio,oe,P,O),ie=re!==U,pe=ce!==L,De=me!==I&&ie,ze=he!==K&&pe;if(!De&&!ze&&!ie&&!pe)return;if((De||ze||oe[0]===1||oe[1]===1)&&(B.x=De?me:_.x,B.y=ze?he:_.y,_.x=B.x,_.y=B.y,A.length>0)){const Ze=me-I,He=he-K;for(const ut of A)ut.position={x:ut.position.x-Ze+oe[0]*(re-U),y:ut.position.y-He+oe[1]*(ce-L)},Q.push(ut)}if((ie||pe)&&(B.width=ie&&(!c.resizeDirection||c.resizeDirection==="horizontal")?re:_.width,B.height=pe&&(!c.resizeDirection||c.resizeDirection==="vertical")?ce:_.height,_.width=B.width,_.height=B.height),T&&b.expandParent){const Ze=oe[0]*(B.width??0);B.x&&B.x<Ze&&(_.x=Ze,R.x=R.x-(B.x-Ze));const He=oe[1]*(B.height??0);B.y&&B.y<He&&(_.y=He,R.y=R.y-(B.y-He))}const ye=tE({width:_.width,prevWidth:U,height:_.height,prevHeight:L,affectsX:c.controlDirection.affectsX,affectsY:c.controlDirection.affectsY}),Re={..._,direction:ye};E?.(F,Re)!==!1&&(G=!0,N?.(F,Re),s(B,Q))}).on("end",F=>{G&&(C?.(F,{..._}),a?.({..._}),G=!1)});l.call(D)}function p(){l.on(".drag",null)}return{update:f,destroy:p}}var Fc={exports:{}},Oc={},Hc={exports:{}},Vc={};var Rm;function aE(){if(Rm)return Vc;Rm=1;var e=Ms();function r(y,x){return y===x&&(y!==0||1/y===1/x)||y!==y&&x!==x}var o=typeof Object.is=="function"?Object.is:r,s=e.useState,a=e.useEffect,l=e.useLayoutEffect,c=e.useDebugValue;function f(y,x){var w=x(),N=s({inst:{value:w,getSnapshot:x}}),C=N[0].inst,E=N[1];return l(function(){C.value=w,C.getSnapshot=x,p(C)&&E({inst:C})},[y,w,x]),a(function(){return p(C)&&E({inst:C}),y(function(){p(C)&&E({inst:C})})},[y]),c(w),w}function p(y){var x=y.getSnapshot;y=y.value;try{var w=x();return!o(y,w)}catch{return!0}}function h(y,x){return x()}var g=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?h:f;return Vc.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:g,Vc}var Pm;function lE(){return Pm||(Pm=1,Hc.exports=aE()),Hc.exports}var Mm;function uE(){if(Mm)return Oc;Mm=1;var e=Ms(),r=lE();function o(h,g){return h===g&&(h!==0||1/h===1/g)||h!==h&&g!==g}var s=typeof Object.is=="function"?Object.is:o,a=r.useSyncExternalStore,l=e.useRef,c=e.useEffect,f=e.useMemo,p=e.useDebugValue;return Oc.useSyncExternalStoreWithSelector=function(h,g,y,x,w){var N=l(null);if(N.current===null){var C={hasValue:!1,value:null};N.current=C}else C=N.current;N=f(function(){function _(T){if(!R){if(R=!0,b=T,T=x(T),w!==void 0&&C.hasValue){var P=C.value;if(w(P,T))return j=P}return j=T}if(P=j,s(b,T))return P;var O=x(T);return w!==void 0&&w(P,O)?(b=T,P):(b=T,j=O)}var R=!1,b,j,A=y===void 0?null:y;return[function(){return _(g())},A===null?void 0:function(){return _(A())}]},[g,y,x,w]);var E=a(h,N[0],N[1]);return c(function(){C.hasValue=!0,C.value=E},[E]),p(E),E},Oc}var Tm;function cE(){return Tm||(Tm=1,Fc.exports=uE()),Fc.exports}var dE=cE();const fE=f0(dE),hE={},Dm=e=>{let r;const o=new Set,s=(g,y)=>{const x=typeof g=="function"?g(r):g;if(!Object.is(x,r)){const w=r;r=y??(typeof x!="object"||x===null)?x:Object.assign({},r,x),o.forEach(N=>N(r,w))}},a=()=>r,p={setState:s,getState:a,getInitialState:()=>h,subscribe:g=>(o.add(g),()=>o.delete(g)),destroy:()=>{(hE?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),o.clear()}},h=r=e(s,a,p);return p},pE=e=>e?Dm(e):Dm,{useDebugValue:mE}=h0,{useSyncExternalStoreWithSelector:gE}=fE,yE=e=>e;function qg(e,r=yE,o){const s=gE(e.subscribe,e.getState,e.getServerState||e.getInitialState,r,o);return mE(s),s}const Lm=(e,r)=>{const o=pE(e),s=(a,l=r)=>qg(o,a,l);return Object.assign(s,o),s},xE=(e,r)=>e?Lm(e,r):Lm;function ot(e,r){if(Object.is(e,r))return!0;if(typeof e!="object"||e===null||typeof r!="object"||r===null)return!1;if(e instanceof Map&&r instanceof Map){if(e.size!==r.size)return!1;for(const[s,a]of e)if(!Object.is(a,r.get(s)))return!1;return!0}if(e instanceof Set&&r instanceof Set){if(e.size!==r.size)return!1;for(const s of e)if(!r.has(s))return!1;return!0}const o=Object.keys(e);if(o.length!==Object.keys(r).length)return!1;for(const s of o)if(!Object.prototype.hasOwnProperty.call(r,s)||!Object.is(e[s],r[s]))return!1;return!0}const Ol=S.createContext(null),vE=Ol.Provider,Jg=tr.error001();function Ue(e,r){const o=S.useContext(Ol);if(o===null)throw new Error(Jg);return qg(o,e,r)}function it(){const e=S.useContext(Ol);if(e===null)throw new Error(Jg);return S.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe}),[e])}const zm={display:"none"},wE={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},ey="react-flow__node-desc",ty="react-flow__edge-desc",bE="react-flow__aria-live",_E=e=>e.ariaLiveMessage,NE=e=>e.ariaLabelConfig;function SE({rfId:e}){const r=Ue(_E);return u.jsx("div",{id:`${bE}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:wE,children:r})}function EE({rfId:e,disableKeyboardA11y:r}){const o=Ue(NE);return u.jsxs(u.Fragment,{children:[u.jsx("div",{id:`${ey}-${e}`,style:zm,children:r?o["node.a11yDescription.default"]:o["node.a11yDescription.keyboardDisabled"]}),u.jsx("div",{id:`${ty}-${e}`,style:zm,children:o["edge.a11yDescription.default"]}),!r&&u.jsx(SE,{rfId:e})]})}const Hl=S.forwardRef(({position:e="top-left",children:r,className:o,style:s,...a},l)=>{const c=`${e}`.split("-");return u.jsx("div",{className:gt(["react-flow__panel",o,...c]),style:s,ref:l,...a,children:r})});Hl.displayName="Panel";function CE({proOptions:e,position:r="bottom-right"}){return e?.hideAttribution?null:u.jsx(Hl,{position:r,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev",children:u.jsx("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution",children:"React Flow"})})}const kE=e=>{const r=[],o=[];for(const[,s]of e.nodeLookup)s.selected&&r.push(s.internals.userNode);for(const[,s]of e.edgeLookup)s.selected&&o.push(s);return{selectedNodes:r,selectedEdges:o}},sl=e=>e.id;function jE(e,r){return ot(e.selectedNodes.map(sl),r.selectedNodes.map(sl))&&ot(e.selectedEdges.map(sl),r.selectedEdges.map(sl))}function RE({onSelectionChange:e}){const r=it(),{selectedNodes:o,selectedEdges:s}=Ue(kE,jE);return S.useEffect(()=>{const a={nodes:o,edges:s};e?.(a),r.getState().onSelectionChangeHandlers.forEach(l=>l(a))},[o,s,e]),null}const PE=e=>!!e.onSelectionChangeHandlers;function ME({onSelectionChange:e}){const r=Ue(PE);return e||r?u.jsx(RE,{onSelectionChange:e}):null}const ny=[0,0],TE={x:0,y:0,zoom:1},DE=["nodes","edges","defaultNodes","defaultEdges","onConnect","onConnectStart","onConnectEnd","onClickConnectStart","onClickConnectEnd","nodesDraggable","autoPanOnNodeFocus","nodesConnectable","nodesFocusable","edgesFocusable","edgesReconnectable","elevateNodesOnSelect","elevateEdgesOnSelect","minZoom","maxZoom","nodeExtent","onNodesChange","onEdgesChange","elementsSelectable","connectionMode","snapGrid","snapToGrid","translateExtent","connectOnClick","defaultEdgeOptions","fitView","fitViewOptions","onNodesDelete","onEdgesDelete","onDelete","onNodeDrag","onNodeDragStart","onNodeDragStop","onSelectionDrag","onSelectionDragStart","onSelectionDragStop","onMoveStart","onMove","onMoveEnd","noPanClassName","nodeOrigin","autoPanOnConnect","autoPanOnNodeDrag","onError","connectionRadius","isValidConnection","selectNodesOnDrag","nodeDragThreshold","connectionDragThreshold","onBeforeDelete","debug","autoPanSpeed","ariaLabelConfig","zIndexMode"],Im=[...DE,"rfId"],LE=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges}),Am={translateExtent:Cs,nodeOrigin:ny,minZoom:.5,maxZoom:2,elementsSelectable:!0,noPanClassName:"nopan",rfId:"1"};function zE(e){const{setNodes:r,setEdges:o,setMinZoom:s,setMaxZoom:a,setTranslateExtent:l,setNodeExtent:c,reset:f,setDefaultNodesAndEdges:p}=Ue(LE,ot),h=it();S.useEffect(()=>(p(e.defaultNodes,e.defaultEdges),()=>{g.current=Am,f()}),[]);const g=S.useRef(Am);return S.useEffect(()=>{for(const y of Im){const x=e[y],w=g.current[y];x!==w&&(typeof e[y]>"u"||(y==="nodes"?r(x):y==="edges"?o(x):y==="minZoom"?s(x):y==="maxZoom"?a(x):y==="translateExtent"?l(x):y==="nodeExtent"?c(x):y==="ariaLabelConfig"?h.setState({ariaLabelConfig:vS(x)}):y==="fitView"?h.setState({fitViewQueued:x}):y==="fitViewOptions"?h.setState({fitViewOptions:x}):h.setState({[y]:x})))}g.current=e},Im.map(y=>e[y])),null}function $m(){return typeof window>"u"||!window.matchMedia?null:window.matchMedia("(prefers-color-scheme: dark)")}function IE(e){const[r,o]=S.useState(e==="system"?null:e);return S.useEffect(()=>{if(e!=="system"){o(e);return}const s=$m(),a=()=>o(s?.matches?"dark":"light");return a(),s?.addEventListener("change",a),()=>{s?.removeEventListener("change",a)}},[e]),r!==null?r:$m()?.matches?"dark":"light"}const Fm=typeof document<"u"?document:null;function Ps(e=null,r={target:Fm,actInsideInputWithModifier:!0}){const[o,s]=S.useState(!1),a=S.useRef(!1),l=S.useRef(new Set([])),[c,f]=S.useMemo(()=>{if(e!==null){const h=(Array.isArray(e)?e:[e]).filter(y=>typeof y=="string").map(y=>y.replace("+",`
`).replace(`

`,`
+`).split(`
`)),g=h.reduce((y,x)=>y.concat(...x),[]);return[h,g]}return[[],[]]},[e]);return S.useEffect(()=>{const p=r?.target??Fm,h=r?.actInsideInputWithModifier??!0;if(e!==null){const g=w=>{if(a.current=w.ctrlKey||w.metaKey||w.shiftKey||w.altKey,(!a.current||a.current&&!h)&&Lg(w))return!1;const C=Hm(w.code,f);if(l.current.add(w[C]),Om(c,l.current,!1)){const E=w.composedPath?.()?.[0]||w.target,_=E?.nodeName==="BUTTON"||E?.nodeName==="A";r.preventDefault!==!1&&(a.current||!_)&&w.preventDefault(),s(!0)}},y=w=>{const N=Hm(w.code,f);Om(c,l.current,!0)?(s(!1),l.current.clear()):l.current.delete(w[N]),w.key==="Meta"&&l.current.clear(),a.current=!1},x=()=>{l.current.clear(),s(!1)};return p?.addEventListener("keydown",g),p?.addEventListener("keyup",y),window.addEventListener("blur",x),window.addEventListener("contextmenu",x),()=>{p?.removeEventListener("keydown",g),p?.removeEventListener("keyup",y),window.removeEventListener("blur",x),window.removeEventListener("contextmenu",x)}}},[e,s]),o}function Om(e,r,o){return e.filter(s=>o||s.length===r.size).some(s=>s.every(a=>r.has(a)))}function Hm(e,r){return r.includes(e)?"code":"key"}const AE=()=>{const e=it();return S.useMemo(()=>({zoomIn:r=>{const{panZoom:o}=e.getState();return o?o.scaleBy(1.2,{duration:r?.duration}):Promise.resolve(!1)},zoomOut:r=>{const{panZoom:o}=e.getState();return o?o.scaleBy(1/1.2,{duration:r?.duration}):Promise.resolve(!1)},zoomTo:(r,o)=>{const{panZoom:s}=e.getState();return s?s.scaleTo(r,{duration:o?.duration}):Promise.resolve(!1)},getZoom:()=>e.getState().transform[2],setViewport:async(r,o)=>{const{transform:[s,a,l],panZoom:c}=e.getState();return c?(await c.setViewport({x:r.x??s,y:r.y??a,zoom:r.zoom??l},o),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>{const[r,o,s]=e.getState().transform;return{x:r,y:o,zoom:s}},setCenter:async(r,o,s)=>e.getState().setCenter(r,o,s),fitBounds:async(r,o)=>{const{width:s,height:a,minZoom:l,maxZoom:c,panZoom:f}=e.getState(),p=Td(r,s,a,l,c,o?.padding??.1);return f?(await f.setViewport(p,{duration:o?.duration,ease:o?.ease,interpolate:o?.interpolate}),Promise.resolve(!0)):Promise.resolve(!1)},screenToFlowPosition:(r,o={})=>{const{transform:s,snapGrid:a,snapToGrid:l,domNode:c}=e.getState();if(!c)return r;const{x:f,y:p}=c.getBoundingClientRect(),h={x:r.x-f,y:r.y-p},g=o.snapGrid??a,y=o.snapToGrid??l;return Bs(h,s,y,g)},flowToScreenPosition:r=>{const{transform:o,domNode:s}=e.getState();if(!s)return r;const{x:a,y:l}=s.getBoundingClientRect(),c=Cl(r,o);return{x:c.x+a,y:c.y+l}}}),[])};function ry(e,r){const o=[],s=new Map,a=[];for(const l of e)if(l.type==="add"){a.push(l);continue}else if(l.type==="remove"||l.type==="replace")s.set(l.id,[l]);else{const c=s.get(l.id);c?c.push(l):s.set(l.id,[l])}for(const l of r){const c=s.get(l.id);if(!c){o.push(l);continue}if(c[0].type==="remove")continue;if(c[0].type==="replace"){o.push({...c[0].item});continue}const f={...l};for(const p of c)$E(p,f);o.push(f)}return a.length&&a.forEach(l=>{l.index!==void 0?o.splice(l.index,0,{...l.item}):o.push({...l.item})}),o}function $E(e,r){switch(e.type){case"select":{r.selected=e.selected;break}case"position":{typeof e.position<"u"&&(r.position=e.position),typeof e.dragging<"u"&&(r.dragging=e.dragging);break}case"dimensions":{typeof e.dimensions<"u"&&(r.measured={...e.dimensions},e.setAttributes&&((e.setAttributes===!0||e.setAttributes==="width")&&(r.width=e.dimensions.width),(e.setAttributes===!0||e.setAttributes==="height")&&(r.height=e.dimensions.height))),typeof e.resizing=="boolean"&&(r.resizing=e.resizing);break}}}function oy(e,r){return ry(e,r)}function iy(e,r){return ry(e,r)}function So(e,r){return{id:e,type:"select",selected:r}}function mi(e,r=new Set,o=!1){const s=[];for(const[a,l]of e){const c=r.has(a);!(l.selected===void 0&&!c)&&l.selected!==c&&(o&&(l.selected=c),s.push(So(l.id,c)))}return s}function Vm({items:e=[],lookup:r}){const o=[],s=new Map(e.map(a=>[a.id,a]));for(const[a,l]of e.entries()){const c=r.get(l.id),f=c?.internals?.userNode??c;f!==void 0&&f!==l&&o.push({id:l.id,item:l,type:"replace"}),f===void 0&&o.push({item:l,type:"add",index:a})}for(const[a]of r)s.get(a)===void 0&&o.push({id:a,type:"remove"});return o}function Bm(e){return{id:e.id,type:"remove"}}const Um=e=>uS(e),FE=e=>Cg(e);function sy(e){return S.forwardRef(e)}const OE=typeof window<"u"?S.useLayoutEffect:S.useEffect;function Wm(e){const[r,o]=S.useState(BigInt(0)),[s]=S.useState(()=>HE(()=>o(a=>a+BigInt(1))));return OE(()=>{const a=s.get();a.length&&(e(a),s.reset())},[r]),s}function HE(e){let r=[];return{get:()=>r,reset:()=>{r=[]},push:o=>{r.push(o),e()}}}const ay=S.createContext(null);function VE({children:e}){const r=it(),o=S.useCallback(f=>{const{nodes:p=[],setNodes:h,hasDefaultNodes:g,onNodesChange:y,nodeLookup:x,fitViewQueued:w,onNodesChangeMiddlewareMap:N}=r.getState();let C=p;for(const _ of f)C=typeof _=="function"?_(C):_;let E=Vm({items:C,lookup:x});for(const _ of N.values())E=_(E);g&&h(C),E.length>0?y?.(E):w&&window.requestAnimationFrame(()=>{const{fitViewQueued:_,nodes:R,setNodes:b}=r.getState();_&&b(R)})},[]),s=Wm(o),a=S.useCallback(f=>{const{edges:p=[],setEdges:h,hasDefaultEdges:g,onEdgesChange:y,edgeLookup:x}=r.getState();let w=p;for(const N of f)w=typeof N=="function"?N(w):N;g?h(w):y&&y(Vm({items:w,lookup:x}))},[]),l=Wm(a),c=S.useMemo(()=>({nodeQueue:s,edgeQueue:l}),[]);return u.jsx(ay.Provider,{value:c,children:e})}function BE(){const e=S.useContext(ay);if(!e)throw new Error("useBatchContext must be used within a BatchProvider");return e}const UE=e=>!!e.panZoom;function Fd(){const e=AE(),r=it(),o=BE(),s=Ue(UE),a=S.useMemo(()=>{const l=y=>r.getState().nodeLookup.get(y),c=y=>{o.nodeQueue.push(y)},f=y=>{o.edgeQueue.push(y)},p=y=>{const{nodeLookup:x,nodeOrigin:w}=r.getState(),N=Um(y)?y:x.get(y.id),C=N.parentId?Tg(N.position,N.measured,N.parentId,x,w):N.position,E={...N,position:C,width:N.measured?.width??N.width,height:N.measured?.height??N.height};return Ni(E)},h=(y,x,w={replace:!1})=>{c(N=>N.map(C=>{if(C.id===y){const E=typeof x=="function"?x(C):x;return w.replace&&Um(E)?E:{...C,...E}}return C}))},g=(y,x,w={replace:!1})=>{f(N=>N.map(C=>{if(C.id===y){const E=typeof x=="function"?x(C):x;return w.replace&&FE(E)?E:{...C,...E}}return C}))};return{getNodes:()=>r.getState().nodes.map(y=>({...y})),getNode:y=>l(y)?.internals.userNode,getInternalNode:l,getEdges:()=>{const{edges:y=[]}=r.getState();return y.map(x=>({...x}))},getEdge:y=>r.getState().edgeLookup.get(y),setNodes:c,setEdges:f,addNodes:y=>{const x=Array.isArray(y)?y:[y];o.nodeQueue.push(w=>[...w,...x])},addEdges:y=>{const x=Array.isArray(y)?y:[y];o.edgeQueue.push(w=>[...w,...x])},toObject:()=>{const{nodes:y=[],edges:x=[],transform:w}=r.getState(),[N,C,E]=w;return{nodes:y.map(_=>({..._})),edges:x.map(_=>({..._})),viewport:{x:N,y:C,zoom:E}}},deleteElements:async({nodes:y=[],edges:x=[]})=>{const{nodes:w,edges:N,onNodesDelete:C,onEdgesDelete:E,triggerNodeChanges:_,triggerEdgeChanges:R,onDelete:b,onBeforeDelete:j}=r.getState(),{nodes:A,edges:T}=await pS({nodesToRemove:y,edgesToRemove:x,nodes:w,edges:N,onBeforeDelete:j}),P=T.length>0,O=A.length>0;if(P){const G=T.map(Bm);E?.(T),R(G)}if(O){const G=A.map(Bm);C?.(A),_(G)}return(O||P)&&b?.({nodes:A,edges:T}),{deletedNodes:A,deletedEdges:T}},getIntersectingNodes:(y,x=!0,w)=>{const N=gm(y),C=N?y:p(y),E=w!==void 0;return C?(w||r.getState().nodes).filter(_=>{const R=r.getState().nodeLookup.get(_.id);if(R&&!N&&(_.id===y.id||!R.internals.positionAbsolute))return!1;const b=Ni(E?_:R),j=js(b,C);return x&&j>0||j>=b.width*b.height||j>=C.width*C.height}):[]},isNodeIntersecting:(y,x,w=!0)=>{const C=gm(y)?y:p(y);if(!C)return!1;const E=js(C,x);return w&&E>0||E>=x.width*x.height||E>=C.width*C.height},updateNode:h,updateNodeData:(y,x,w={replace:!1})=>{h(y,N=>{const C=typeof x=="function"?x(N):x;return w.replace?{...N,data:C}:{...N,data:{...N.data,...C}}},w)},updateEdge:g,updateEdgeData:(y,x,w={replace:!1})=>{g(y,N=>{const C=typeof x=="function"?x(N):x;return w.replace?{...N,data:C}:{...N,data:{...N.data,...C}}},w)},getNodesBounds:y=>{const{nodeLookup:x,nodeOrigin:w}=r.getState();return cS(y,{nodeLookup:x,nodeOrigin:w})},getHandleConnections:({type:y,id:x,nodeId:w})=>Array.from(r.getState().connectionLookup.get(`${w}-${y}${x?`-${x}`:""}`)?.values()??[]),getNodeConnections:({type:y,handleId:x,nodeId:w})=>Array.from(r.getState().connectionLookup.get(`${w}${y?x?`-${y}-${x}`:`-${y}`:""}`)?.values()??[]),fitView:async y=>{const x=r.getState().fitViewResolver??xS();return r.setState({fitViewQueued:!0,fitViewOptions:y,fitViewResolver:x}),o.nodeQueue.push(w=>[...w]),x.promise}}},[]);return S.useMemo(()=>({...a,...e,viewportInitialized:s}),[s])}const Ym=e=>e.selected,WE=typeof window<"u"?window:void 0;function YE({deleteKeyCode:e,multiSelectionKeyCode:r}){const o=it(),{deleteElements:s}=Fd(),a=Ps(e,{actInsideInputWithModifier:!1}),l=Ps(r,{target:WE});S.useEffect(()=>{if(a){const{edges:c,nodes:f}=o.getState();s({nodes:f.filter(Ym),edges:c.filter(Ym)}),o.setState({nodesSelectionActive:!1})}},[a]),S.useEffect(()=>{o.setState({multiSelectionActive:l})},[l])}function XE(e){const r=it();S.useEffect(()=>{const o=()=>{if(!e.current||!(e.current.checkVisibility?.()??!0))return!1;const s=Dd(e.current);(s.height===0||s.width===0)&&r.getState().onError?.("004",tr.error004()),r.setState({width:s.width||500,height:s.height||500})};if(e.current){o(),window.addEventListener("resize",o);const s=new ResizeObserver(()=>o());return s.observe(e.current),()=>{window.removeEventListener("resize",o),s&&e.current&&s.unobserve(e.current)}}},[])}const Vl={position:"absolute",width:"100%",height:"100%",top:0,left:0},GE=e=>({userSelectionActive:e.userSelectionActive,lib:e.lib,connectionInProgress:e.connection.inProgress});function KE({onPaneContextMenu:e,zoomOnScroll:r=!0,zoomOnPinch:o=!0,panOnScroll:s=!1,panOnScrollSpeed:a=.5,panOnScrollMode:l=jo.Free,zoomOnDoubleClick:c=!0,panOnDrag:f=!0,defaultViewport:p,translateExtent:h,minZoom:g,maxZoom:y,zoomActivationKeyCode:x,preventScrolling:w=!0,children:N,noWheelClassName:C,noPanClassName:E,onViewportChange:_,isControlledViewport:R,paneClickDistance:b,selectionOnDrag:j}){const A=it(),T=S.useRef(null),{userSelectionActive:P,lib:O,connectionInProgress:G}=Ue(GE,ot),D=Ps(x),F=S.useRef();XE(T);const H=S.useCallback(W=>{_?.({x:W[0],y:W[1],zoom:W[2]}),R||A.setState({transform:W})},[_,R]);return S.useEffect(()=>{if(T.current){F.current=eE({domNode:T.current,minZoom:g,maxZoom:y,translateExtent:h,viewport:p,onDraggingChange:Y=>A.setState({paneDragging:Y}),onPanZoomStart:(Y,Q)=>{const{onViewportChangeStart:I,onMoveStart:K}=A.getState();K?.(Y,Q),I?.(Q)},onPanZoom:(Y,Q)=>{const{onViewportChange:I,onMove:K}=A.getState();K?.(Y,Q),I?.(Q)},onPanZoomEnd:(Y,Q)=>{const{onViewportChangeEnd:I,onMoveEnd:K}=A.getState();K?.(Y,Q),I?.(Q)}});const{x:W,y:M,zoom:z}=F.current.getViewport();return A.setState({panZoom:F.current,transform:[W,M,z],domNode:T.current.closest(".react-flow")}),()=>{F.current?.destroy()}}},[]),S.useEffect(()=>{F.current?.update({onPaneContextMenu:e,zoomOnScroll:r,zoomOnPinch:o,panOnScroll:s,panOnScrollSpeed:a,panOnScrollMode:l,zoomOnDoubleClick:c,panOnDrag:f,zoomActivationKeyPressed:D,preventScrolling:w,noPanClassName:E,userSelectionActive:P,noWheelClassName:C,lib:O,onTransformChange:H,connectionInProgress:G,selectionOnDrag:j,paneClickDistance:b})},[e,r,o,s,a,l,c,f,D,w,E,P,C,O,H,G,j,b]),u.jsx("div",{className:"react-flow__renderer",ref:T,style:Vl,children:N})}const ZE=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function QE(){const{userSelectionActive:e,userSelectionRect:r}=Ue(ZE,ot);return e&&r?u.jsx("div",{className:"react-flow__selection react-flow__container",style:{width:r.width,height:r.height,transform:`translate(${r.x}px, ${r.y}px)`}}):null}const Bc=(e,r)=>o=>{o.target===r.current&&e?.(o)},qE=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,connectionInProgress:e.connection.inProgress,dragging:e.paneDragging});function JE({isSelecting:e,selectionKeyPressed:r,selectionMode:o=ks.Full,panOnDrag:s,paneClickDistance:a,selectionOnDrag:l,onSelectionStart:c,onSelectionEnd:f,onPaneClick:p,onPaneContextMenu:h,onPaneScroll:g,onPaneMouseEnter:y,onPaneMouseMove:x,onPaneMouseLeave:w,children:N}){const C=it(),{userSelectionActive:E,elementsSelectable:_,dragging:R,connectionInProgress:b}=Ue(qE,ot),j=_&&(e||E),A=S.useRef(null),T=S.useRef(),P=S.useRef(new Set),O=S.useRef(new Set),G=S.useRef(!1),D=I=>{if(G.current||b){G.current=!1;return}p?.(I),C.getState().resetSelectedElements(),C.setState({nodesSelectionActive:!1})},F=I=>{if(Array.isArray(s)&&s?.includes(2)){I.preventDefault();return}h?.(I)},H=g?I=>g(I):void 0,W=I=>{G.current&&(I.stopPropagation(),G.current=!1)},M=I=>{const{domNode:K}=C.getState();if(T.current=K?.getBoundingClientRect(),!T.current)return;const U=I.target===A.current;if(!U&&!!I.target.closest(".nokey")||!e||!(l&&U||r)||I.button!==0||!I.isPrimary)return;I.target?.setPointerCapture?.(I.pointerId),G.current=!1;const{x:oe,y:re}=Fn(I.nativeEvent,T.current);C.setState({userSelectionRect:{width:0,height:0,startX:oe,startY:re,x:oe,y:re}}),U||(I.stopPropagation(),I.preventDefault())},z=I=>{const{userSelectionRect:K,transform:U,nodeLookup:L,edgeLookup:B,connectionLookup:oe,triggerNodeChanges:re,triggerEdgeChanges:ce,defaultEdgeOptions:me,resetSelectedElements:he}=C.getState();if(!T.current||!K)return;const{x:ie,y:pe}=Fn(I.nativeEvent,T.current),{startX:De,startY:ze}=K;if(!G.current){const He=r?0:a;if(Math.hypot(ie-De,pe-ze)<=He)return;he(),c?.(I)}G.current=!0;const ye={startX:De,startY:ze,x:ie<De?ie:De,y:pe<ze?pe:ze,width:Math.abs(ie-De),height:Math.abs(pe-ze)},Re=P.current,Be=O.current;P.current=new Set(Md(L,ye,U,o===ks.Partial,!0).map(He=>He.id)),O.current=new Set;const Ze=me?.selectable??!0;for(const He of P.current){const ut=oe.get(He);if(ut)for(const{edgeId:qt}of ut.values()){const Rt=B.get(qt);Rt&&(Rt.selectable??Ze)&&O.current.add(qt)}}if(!ym(Re,P.current)){const He=mi(L,P.current,!0);re(He)}if(!ym(Be,O.current)){const He=mi(B,O.current);ce(He)}C.setState({userSelectionRect:ye,userSelectionActive:!0,nodesSelectionActive:!1})},Y=I=>{I.button===0&&(I.target?.releasePointerCapture?.(I.pointerId),!E&&I.target===A.current&&C.getState().userSelectionRect&&D?.(I),C.setState({userSelectionActive:!1,userSelectionRect:null}),G.current&&(f?.(I),C.setState({nodesSelectionActive:P.current.size>0})))},Q=s===!0||Array.isArray(s)&&s.includes(0);return u.jsxs("div",{className:gt(["react-flow__pane",{draggable:Q,dragging:R,selection:e}]),onClick:j?void 0:Bc(D,A),onContextMenu:Bc(F,A),onWheel:Bc(H,A),onPointerEnter:j?void 0:y,onPointerMove:j?z:x,onPointerUp:j?Y:void 0,onPointerDownCapture:j?M:void 0,onClickCapture:j?W:void 0,onPointerLeave:w,ref:A,style:Vl,children:[N,u.jsx(QE,{})]})}function ld({id:e,store:r,unselect:o=!1,nodeRef:s}){const{addSelectedNodes:a,unselectNodesAndEdges:l,multiSelectionActive:c,nodeLookup:f,onError:p}=r.getState(),h=f.get(e);if(!h){p?.("012",tr.error012(e));return}r.setState({nodesSelectionActive:!1}),h.selected?(o||h.selected&&c)&&(l({nodes:[h],edges:[]}),requestAnimationFrame(()=>s?.current?.blur())):a([e])}function ly({nodeRef:e,disabled:r=!1,noDragClassName:o,handleSelector:s,nodeId:a,isSelectable:l,nodeClickDistance:c}){const f=it(),[p,h]=S.useState(!1),g=S.useRef();return S.useEffect(()=>{g.current=OS({getStoreItems:()=>f.getState(),onNodeMouseDown:y=>{ld({id:y,store:f,nodeRef:e})},onDragStart:()=>{h(!0)},onDragStop:()=>{h(!1)}})},[]),S.useEffect(()=>{if(r)g.current?.destroy();else if(e.current)return g.current?.update({noDragClassName:o,handleSelector:s,domNode:e.current,isSelectable:l,nodeId:a,nodeClickDistance:c}),()=>{g.current?.destroy()}},[o,s,r,l,e,a]),p}const eC=e=>r=>r.selected&&(r.draggable||e&&typeof r.draggable>"u");function uy(){const e=it();return S.useCallback(o=>{const{nodeExtent:s,snapToGrid:a,snapGrid:l,nodesDraggable:c,onError:f,updateNodePositions:p,nodeLookup:h,nodeOrigin:g}=e.getState(),y=new Map,x=eC(c),w=a?l[0]:5,N=a?l[1]:5,C=o.direction.x*w*o.factor,E=o.direction.y*N*o.factor;for(const[,_]of h){if(!x(_))continue;let R={x:_.internals.positionAbsolute.x+C,y:_.internals.positionAbsolute.y+E};a&&(R=Vs(R,l));const{position:b,positionAbsolute:j}=kg({nodeId:_.id,nextPosition:R,nodeLookup:h,nodeExtent:s,nodeOrigin:g,onError:f});_.position=b,_.internals.positionAbsolute=j,y.set(_.id,_)}p(y)},[])}const Od=S.createContext(null),tC=Od.Provider;Od.Consumer;const cy=()=>S.useContext(Od),nC=e=>({connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName,rfId:e.rfId}),rC=(e,r,o)=>s=>{const{connectionClickStartHandle:a,connectionMode:l,connection:c}=s,{fromHandle:f,toHandle:p,isValid:h}=c,g=p?.nodeId===e&&p?.id===r&&p?.type===o;return{connectingFrom:f?.nodeId===e&&f?.id===r&&f?.type===o,connectingTo:g,clickConnecting:a?.nodeId===e&&a?.id===r&&a?.type===o,isPossibleEndHandle:l===bi.Strict?f?.type!==o:e!==f?.nodeId||r!==f?.id,connectionInProcess:!!f,clickConnectionInProcess:!!a,valid:g&&h}};function oC({type:e="source",position:r=je.Top,isValidConnection:o,isConnectable:s=!0,isConnectableStart:a=!0,isConnectableEnd:l=!0,id:c,onConnect:f,children:p,className:h,onMouseDown:g,onTouchStart:y,...x},w){const N=c||null,C=e==="target",E=it(),_=cy(),{connectOnClick:R,noPanClassName:b,rfId:j}=Ue(nC,ot),{connectingFrom:A,connectingTo:T,clickConnecting:P,isPossibleEndHandle:O,connectionInProcess:G,clickConnectionInProcess:D,valid:F}=Ue(rC(_,N,e),ot);_||E.getState().onError?.("010",tr.error010());const H=z=>{const{defaultEdgeOptions:Y,onConnect:Q,hasDefaultEdges:I}=E.getState(),K={...Y,...z};if(I){const{edges:U,setEdges:L}=E.getState();L(Fg(K,U))}Q?.(K),f?.(K)},W=z=>{if(!_)return;const Y=zg(z.nativeEvent);if(a&&(Y&&z.button===0||!Y)){const Q=E.getState();ad.onPointerDown(z.nativeEvent,{handleDomNode:z.currentTarget,autoPanOnConnect:Q.autoPanOnConnect,connectionMode:Q.connectionMode,connectionRadius:Q.connectionRadius,domNode:Q.domNode,nodeLookup:Q.nodeLookup,lib:Q.lib,isTarget:C,handleId:N,nodeId:_,flowId:Q.rfId,panBy:Q.panBy,cancelConnection:Q.cancelConnection,onConnectStart:Q.onConnectStart,onConnectEnd:Q.onConnectEnd,updateConnection:Q.updateConnection,onConnect:H,isValidConnection:o||Q.isValidConnection,getTransform:()=>E.getState().transform,getFromHandle:()=>E.getState().connection.fromHandle,autoPanSpeed:Q.autoPanSpeed,dragThreshold:Q.connectionDragThreshold})}Y?g?.(z):y?.(z)},M=z=>{const{onClickConnectStart:Y,onClickConnectEnd:Q,connectionClickStartHandle:I,connectionMode:K,isValidConnection:U,lib:L,rfId:B,nodeLookup:oe,connection:re}=E.getState();if(!_||!I&&!a)return;if(!I){Y?.(z.nativeEvent,{nodeId:_,handleId:N,handleType:e}),E.setState({connectionClickStartHandle:{nodeId:_,type:e,id:N}});return}const ce=Dg(z.target),me=o||U,{connection:he,isValid:ie}=ad.isValid(z.nativeEvent,{handle:{nodeId:_,id:N,type:e},connectionMode:K,fromNodeId:I.nodeId,fromHandleId:I.id||null,fromType:I.type,isValidConnection:me,flowId:B,doc:ce,lib:L,nodeLookup:oe});ie&&he&&H(he);const pe=structuredClone(re);delete pe.inProgress,pe.toPosition=pe.toHandle?pe.toHandle.position:null,Q?.(z,pe),E.setState({connectionClickStartHandle:null})};return u.jsx("div",{"data-handleid":N,"data-nodeid":_,"data-handlepos":r,"data-id":`${j}-${_}-${N}-${e}`,className:gt(["react-flow__handle",`react-flow__handle-${r}`,"nodrag",b,h,{source:!C,target:C,connectable:s,connectablestart:a,connectableend:l,clickconnecting:P,connectingfrom:A,connectingto:T,valid:F,connectionindicator:s&&(!G||O)&&(G||D?l:a)}]),onMouseDown:W,onTouchStart:W,onClick:R?M:void 0,ref:w,...x,children:p})}const Ro=S.memo(sy(oC));function iC({data:e,isConnectable:r,sourcePosition:o=je.Bottom}){return u.jsxs(u.Fragment,{children:[e?.label,u.jsx(Ro,{type:"source",position:o,isConnectable:r})]})}function sC({data:e,isConnectable:r,targetPosition:o=je.Top,sourcePosition:s=je.Bottom}){return u.jsxs(u.Fragment,{children:[u.jsx(Ro,{type:"target",position:o,isConnectable:r}),e?.label,u.jsx(Ro,{type:"source",position:s,isConnectable:r})]})}function aC(){return null}function lC({data:e,isConnectable:r,targetPosition:o=je.Top}){return u.jsxs(u.Fragment,{children:[u.jsx(Ro,{type:"target",position:o,isConnectable:r}),e?.label]})}const jl={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},Xm={input:iC,default:sC,output:lC,group:aC};function uC(e){return e.internals.handleBounds===void 0?{width:e.width??e.initialWidth??e.style?.width,height:e.height??e.initialHeight??e.style?.height}:{width:e.width??e.style?.width,height:e.height??e.style?.height}}const cC=e=>{const{width:r,height:o,x:s,y:a}=Hs(e.nodeLookup,{filter:l=>!!l.selected});return{width:$n(r)?r:null,height:$n(o)?o:null,userSelectionActive:e.userSelectionActive,transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]}) translate(${s}px,${a}px)`}};function dC({onSelectionContextMenu:e,noPanClassName:r,disableKeyboardA11y:o}){const s=it(),{width:a,height:l,transformString:c,userSelectionActive:f}=Ue(cC,ot),p=uy(),h=S.useRef(null);if(S.useEffect(()=>{o||h.current?.focus({preventScroll:!0})},[o]),ly({nodeRef:h}),f||!a||!l)return null;const g=e?x=>{const w=s.getState().nodes.filter(N=>N.selected);e(x,w)}:void 0,y=x=>{Object.prototype.hasOwnProperty.call(jl,x.key)&&(x.preventDefault(),p({direction:jl[x.key],factor:x.shiftKey?4:1}))};return u.jsx("div",{className:gt(["react-flow__nodesselection","react-flow__container",r]),style:{transform:c},children:u.jsx("div",{ref:h,className:"react-flow__nodesselection-rect",onContextMenu:g,tabIndex:o?void 0:-1,onKeyDown:o?void 0:y,style:{width:a,height:l}})})}const Gm=typeof window<"u"?window:void 0,fC=e=>({nodesSelectionActive:e.nodesSelectionActive,userSelectionActive:e.userSelectionActive});function dy({children:e,onPaneClick:r,onPaneMouseEnter:o,onPaneMouseMove:s,onPaneMouseLeave:a,onPaneContextMenu:l,onPaneScroll:c,paneClickDistance:f,deleteKeyCode:p,selectionKeyCode:h,selectionOnDrag:g,selectionMode:y,onSelectionStart:x,onSelectionEnd:w,multiSelectionKeyCode:N,panActivationKeyCode:C,zoomActivationKeyCode:E,elementsSelectable:_,zoomOnScroll:R,zoomOnPinch:b,panOnScroll:j,panOnScrollSpeed:A,panOnScrollMode:T,zoomOnDoubleClick:P,panOnDrag:O,defaultViewport:G,translateExtent:D,minZoom:F,maxZoom:H,preventScrolling:W,onSelectionContextMenu:M,noWheelClassName:z,noPanClassName:Y,disableKeyboardA11y:Q,onViewportChange:I,isControlledViewport:K}){const{nodesSelectionActive:U,userSelectionActive:L}=Ue(fC,ot),B=Ps(h,{target:Gm}),oe=Ps(C,{target:Gm}),re=oe||O,ce=oe||j,me=g&&re!==!0,he=B||L||me;return YE({deleteKeyCode:p,multiSelectionKeyCode:N}),u.jsx(KE,{onPaneContextMenu:l,elementsSelectable:_,zoomOnScroll:R,zoomOnPinch:b,panOnScroll:ce,panOnScrollSpeed:A,panOnScrollMode:T,zoomOnDoubleClick:P,panOnDrag:!B&&re,defaultViewport:G,translateExtent:D,minZoom:F,maxZoom:H,zoomActivationKeyCode:E,preventScrolling:W,noWheelClassName:z,noPanClassName:Y,onViewportChange:I,isControlledViewport:K,paneClickDistance:f,selectionOnDrag:me,children:u.jsxs(JE,{onSelectionStart:x,onSelectionEnd:w,onPaneClick:r,onPaneMouseEnter:o,onPaneMouseMove:s,onPaneMouseLeave:a,onPaneContextMenu:l,onPaneScroll:c,panOnDrag:re,isSelecting:!!he,selectionMode:y,selectionKeyPressed:B,paneClickDistance:f,selectionOnDrag:me,children:[e,U&&u.jsx(dC,{onSelectionContextMenu:M,noPanClassName:Y,disableKeyboardA11y:Q})]})})}dy.displayName="FlowRenderer";const hC=S.memo(dy),pC=e=>r=>e?Md(r.nodeLookup,{x:0,y:0,width:r.width,height:r.height},r.transform,!0).map(o=>o.id):Array.from(r.nodeLookup.keys());function mC(e){return Ue(S.useCallback(pC(e),[e]),ot)}const gC=e=>e.updateNodeInternals;function yC(){const e=Ue(gC),[r]=S.useState(()=>typeof ResizeObserver>"u"?null:new ResizeObserver(o=>{const s=new Map;o.forEach(a=>{const l=a.target.getAttribute("data-id");s.set(l,{id:l,nodeElement:a.target,force:!0})}),e(s)}));return S.useEffect(()=>()=>{r?.disconnect()},[r]),r}function xC({node:e,nodeType:r,hasDimensions:o,resizeObserver:s}){const a=it(),l=S.useRef(null),c=S.useRef(null),f=S.useRef(e.sourcePosition),p=S.useRef(e.targetPosition),h=S.useRef(r),g=o&&!!e.internals.handleBounds;return S.useEffect(()=>{l.current&&!e.hidden&&(!g||c.current!==l.current)&&(c.current&&s?.unobserve(c.current),s?.observe(l.current),c.current=l.current)},[g,e.hidden]),S.useEffect(()=>()=>{c.current&&(s?.unobserve(c.current),c.current=null)},[]),S.useEffect(()=>{if(l.current){const y=h.current!==r,x=f.current!==e.sourcePosition,w=p.current!==e.targetPosition;(y||x||w)&&(h.current=r,f.current=e.sourcePosition,p.current=e.targetPosition,a.getState().updateNodeInternals(new Map([[e.id,{id:e.id,nodeElement:l.current,force:!0}]])))}},[e.id,r,e.sourcePosition,e.targetPosition]),l}function vC({id:e,onClick:r,onMouseEnter:o,onMouseMove:s,onMouseLeave:a,onContextMenu:l,onDoubleClick:c,nodesDraggable:f,elementsSelectable:p,nodesConnectable:h,nodesFocusable:g,resizeObserver:y,noDragClassName:x,noPanClassName:w,disableKeyboardA11y:N,rfId:C,nodeTypes:E,nodeClickDistance:_,onError:R}){const{node:b,internals:j,isParent:A}=Ue(ie=>{const pe=ie.nodeLookup.get(e),De=ie.parentLookup.has(e);return{node:pe,internals:pe.internals,isParent:De}},ot);let T=b.type||"default",P=E?.[T]||Xm[T];P===void 0&&(R?.("003",tr.error003(T)),T="default",P=E?.default||Xm.default);const O=!!(b.draggable||f&&typeof b.draggable>"u"),G=!!(b.selectable||p&&typeof b.selectable>"u"),D=!!(b.connectable||h&&typeof b.connectable>"u"),F=!!(b.focusable||g&&typeof b.focusable>"u"),H=it(),W=Mg(b),M=xC({node:b,nodeType:T,hasDimensions:W,resizeObserver:y}),z=ly({nodeRef:M,disabled:b.hidden||!O,noDragClassName:x,handleSelector:b.dragHandle,nodeId:e,isSelectable:G,nodeClickDistance:_}),Y=uy();if(b.hidden)return null;const Q=kr(b),I=uC(b),K=G||O||r||o||s||a,U=o?ie=>o(ie,{...j.userNode}):void 0,L=s?ie=>s(ie,{...j.userNode}):void 0,B=a?ie=>a(ie,{...j.userNode}):void 0,oe=l?ie=>l(ie,{...j.userNode}):void 0,re=c?ie=>c(ie,{...j.userNode}):void 0,ce=ie=>{const{selectNodesOnDrag:pe,nodeDragThreshold:De}=H.getState();G&&(!pe||!O||De>0)&&ld({id:e,store:H,nodeRef:M}),r&&r(ie,{...j.userNode})},me=ie=>{if(!(Lg(ie.nativeEvent)||N)){if(_g.includes(ie.key)&&G){const pe=ie.key==="Escape";ld({id:e,store:H,unselect:pe,nodeRef:M})}else if(O&&b.selected&&Object.prototype.hasOwnProperty.call(jl,ie.key)){ie.preventDefault();const{ariaLabelConfig:pe}=H.getState();H.setState({ariaLiveMessage:pe["node.a11yDescription.ariaLiveMessage"]({direction:ie.key.replace("Arrow","").toLowerCase(),x:~~j.positionAbsolute.x,y:~~j.positionAbsolute.y})}),Y({direction:jl[ie.key],factor:ie.shiftKey?4:1})}}},he=()=>{if(N||!M.current?.matches(":focus-visible"))return;const{transform:ie,width:pe,height:De,autoPanOnNodeFocus:ze,setCenter:ye}=H.getState();if(!ze)return;Md(new Map([[e,b]]),{x:0,y:0,width:pe,height:De},ie,!0).length>0||ye(b.position.x+Q.width/2,b.position.y+Q.height/2,{zoom:ie[2]})};return u.jsx("div",{className:gt(["react-flow__node",`react-flow__node-${T}`,{[w]:O},b.className,{selected:b.selected,selectable:G,parent:A,draggable:O,dragging:z}]),ref:M,style:{zIndex:j.z,transform:`translate(${j.positionAbsolute.x}px,${j.positionAbsolute.y}px)`,pointerEvents:K?"all":"none",visibility:W?"visible":"hidden",...b.style,...I},"data-id":e,"data-testid":`rf__node-${e}`,onMouseEnter:U,onMouseMove:L,onMouseLeave:B,onContextMenu:oe,onClick:ce,onDoubleClick:re,onKeyDown:F?me:void 0,tabIndex:F?0:void 0,onFocus:F?he:void 0,role:b.ariaRole??(F?"group":void 0),"aria-roledescription":"node","aria-describedby":N?void 0:`${ey}-${C}`,"aria-label":b.ariaLabel,...b.domAttributes,children:u.jsx(tC,{value:e,children:u.jsx(P,{id:e,data:b.data,type:T,positionAbsoluteX:j.positionAbsolute.x,positionAbsoluteY:j.positionAbsolute.y,selected:b.selected??!1,selectable:G,draggable:O,deletable:b.deletable??!0,isConnectable:D,sourcePosition:b.sourcePosition,targetPosition:b.targetPosition,dragging:z,dragHandle:b.dragHandle,zIndex:j.z,parentId:b.parentId,...Q})})})}var wC=S.memo(vC);const bC=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,onError:e.onError});function fy(e){const{nodesDraggable:r,nodesConnectable:o,nodesFocusable:s,elementsSelectable:a,onError:l}=Ue(bC,ot),c=mC(e.onlyRenderVisibleElements),f=yC();return u.jsx("div",{className:"react-flow__nodes",style:Vl,children:c.map(p=>u.jsx(wC,{id:p,nodeTypes:e.nodeTypes,nodeExtent:e.nodeExtent,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,resizeObserver:f,nodesDraggable:r,nodesConnectable:o,nodesFocusable:s,elementsSelectable:a,nodeClickDistance:e.nodeClickDistance,onError:l},p))})}fy.displayName="NodeRenderer";const _C=S.memo(fy);function NC(e){return Ue(S.useCallback(o=>{if(!e)return o.edges.map(a=>a.id);const s=[];if(o.width&&o.height)for(const a of o.edges){const l=o.nodeLookup.get(a.source),c=o.nodeLookup.get(a.target);l&&c&&_S({sourceNode:l,targetNode:c,width:o.width,height:o.height,transform:o.transform})&&s.push(a.id)}return s},[e]),ot)}const SC=({color:e="none",strokeWidth:r=1})=>{const o={strokeWidth:r,...e&&{stroke:e}};return u.jsx("polyline",{className:"arrow",style:o,strokeLinecap:"round",fill:"none",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4"})},EC=({color:e="none",strokeWidth:r=1})=>{const o={strokeWidth:r,...e&&{stroke:e,fill:e}};return u.jsx("polyline",{className:"arrowclosed",style:o,strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"})},Km={[Sl.Arrow]:SC,[Sl.ArrowClosed]:EC};function CC(e){const r=it();return S.useMemo(()=>Object.prototype.hasOwnProperty.call(Km,e)?Km[e]:(r.getState().onError?.("009",tr.error009(e)),null),[e])}const kC=({id:e,type:r,color:o,width:s=12.5,height:a=12.5,markerUnits:l="strokeWidth",strokeWidth:c,orient:f="auto-start-reverse"})=>{const p=CC(r);return p?u.jsx("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${s}`,markerHeight:`${a}`,viewBox:"-10 -10 20 20",markerUnits:l,orient:f,refX:"0",refY:"0",children:u.jsx(p,{color:o,strokeWidth:c})}):null},hy=({defaultColor:e,rfId:r})=>{const o=Ue(l=>l.edges),s=Ue(l=>l.defaultEdgeOptions),a=S.useMemo(()=>RS(o,{id:r,defaultColor:e,defaultMarkerStart:s?.markerStart,defaultMarkerEnd:s?.markerEnd}),[o,s,r,e]);return a.length?u.jsx("svg",{className:"react-flow__marker","aria-hidden":"true",children:u.jsx("defs",{children:a.map(l=>u.jsx(kC,{id:l.id,type:l.type,color:l.color,width:l.width,height:l.height,markerUnits:l.markerUnits,strokeWidth:l.strokeWidth,orient:l.orient},l.id))})}):null};hy.displayName="MarkerDefinitions";var jC=S.memo(hy);function py({x:e,y:r,label:o,labelStyle:s,labelShowBg:a=!0,labelBgStyle:l,labelBgPadding:c=[2,4],labelBgBorderRadius:f=2,children:p,className:h,...g}){const[y,x]=S.useState({x:1,y:0,width:0,height:0}),w=gt(["react-flow__edge-textwrapper",h]),N=S.useRef(null);return S.useEffect(()=>{if(N.current){const C=N.current.getBBox();x({x:C.x,y:C.y,width:C.width,height:C.height})}},[o]),o?u.jsxs("g",{transform:`translate(${e-y.width/2} ${r-y.height/2})`,className:w,visibility:y.width?"visible":"hidden",...g,children:[a&&u.jsx("rect",{width:y.width+2*c[0],x:-c[0],y:-c[1],height:y.height+2*c[1],className:"react-flow__edge-textbg",style:l,rx:f,ry:f}),u.jsx("text",{className:"react-flow__edge-text",y:y.height/2,dy:"0.3em",ref:N,style:s,children:o}),p]}):null}py.displayName="EdgeText";const RC=S.memo(py);function Us({path:e,labelX:r,labelY:o,label:s,labelStyle:a,labelShowBg:l,labelBgStyle:c,labelBgPadding:f,labelBgBorderRadius:p,interactionWidth:h=20,...g}){return u.jsxs(u.Fragment,{children:[u.jsx("path",{...g,d:e,fill:"none",className:gt(["react-flow__edge-path",g.className])}),h?u.jsx("path",{d:e,fill:"none",strokeOpacity:0,strokeWidth:h,className:"react-flow__edge-interaction"}):null,s&&$n(r)&&$n(o)?u.jsx(RC,{x:r,y:o,label:s,labelStyle:a,labelShowBg:l,labelBgStyle:c,labelBgPadding:f,labelBgBorderRadius:p}):null]})}function Zm({pos:e,x1:r,y1:o,x2:s,y2:a}){return e===je.Left||e===je.Right?[.5*(r+s),o]:[r,.5*(o+a)]}function my({sourceX:e,sourceY:r,sourcePosition:o=je.Bottom,targetX:s,targetY:a,targetPosition:l=je.Top}){const[c,f]=Zm({pos:o,x1:e,y1:r,x2:s,y2:a}),[p,h]=Zm({pos:l,x1:s,y1:a,x2:e,y2:r}),[g,y,x,w]=Ig({sourceX:e,sourceY:r,targetX:s,targetY:a,sourceControlX:c,sourceControlY:f,targetControlX:p,targetControlY:h});return[`M${e},${r} C${c},${f} ${p},${h} ${s},${a}`,g,y,x,w]}function gy(e){return S.memo(({id:r,sourceX:o,sourceY:s,targetX:a,targetY:l,sourcePosition:c,targetPosition:f,label:p,labelStyle:h,labelShowBg:g,labelBgStyle:y,labelBgPadding:x,labelBgBorderRadius:w,style:N,markerEnd:C,markerStart:E,interactionWidth:_})=>{const[R,b,j]=my({sourceX:o,sourceY:s,sourcePosition:c,targetX:a,targetY:l,targetPosition:f}),A=e.isInternal?void 0:r;return u.jsx(Us,{id:A,path:R,labelX:b,labelY:j,label:p,labelStyle:h,labelShowBg:g,labelBgStyle:y,labelBgPadding:x,labelBgBorderRadius:w,style:N,markerEnd:C,markerStart:E,interactionWidth:_})})}const PC=gy({isInternal:!1}),yy=gy({isInternal:!0});PC.displayName="SimpleBezierEdge";yy.displayName="SimpleBezierEdgeInternal";function xy(e){return S.memo(({id:r,sourceX:o,sourceY:s,targetX:a,targetY:l,label:c,labelStyle:f,labelShowBg:p,labelBgStyle:h,labelBgPadding:g,labelBgBorderRadius:y,style:x,sourcePosition:w=je.Bottom,targetPosition:N=je.Top,markerEnd:C,markerStart:E,pathOptions:_,interactionWidth:R})=>{const[b,j,A]=kl({sourceX:o,sourceY:s,sourcePosition:w,targetX:a,targetY:l,targetPosition:N,borderRadius:_?.borderRadius,offset:_?.offset,stepPosition:_?.stepPosition}),T=e.isInternal?void 0:r;return u.jsx(Us,{id:T,path:b,labelX:j,labelY:A,label:c,labelStyle:f,labelShowBg:p,labelBgStyle:h,labelBgPadding:g,labelBgBorderRadius:y,style:x,markerEnd:C,markerStart:E,interactionWidth:R})})}const vy=xy({isInternal:!1}),wy=xy({isInternal:!0});vy.displayName="SmoothStepEdge";wy.displayName="SmoothStepEdgeInternal";function by(e){return S.memo(({id:r,...o})=>{const s=e.isInternal?void 0:r;return u.jsx(vy,{...o,id:s,pathOptions:S.useMemo(()=>({borderRadius:0,offset:o.pathOptions?.offset}),[o.pathOptions?.offset])})})}const MC=by({isInternal:!1}),_y=by({isInternal:!0});MC.displayName="StepEdge";_y.displayName="StepEdgeInternal";function Ny(e){return S.memo(({id:r,sourceX:o,sourceY:s,targetX:a,targetY:l,label:c,labelStyle:f,labelShowBg:p,labelBgStyle:h,labelBgPadding:g,labelBgBorderRadius:y,style:x,markerEnd:w,markerStart:N,interactionWidth:C})=>{const[E,_,R]=Og({sourceX:o,sourceY:s,targetX:a,targetY:l}),b=e.isInternal?void 0:r;return u.jsx(Us,{id:b,path:E,labelX:_,labelY:R,label:c,labelStyle:f,labelShowBg:p,labelBgStyle:h,labelBgPadding:g,labelBgBorderRadius:y,style:x,markerEnd:w,markerStart:N,interactionWidth:C})})}const TC=Ny({isInternal:!1}),Sy=Ny({isInternal:!0});TC.displayName="StraightEdge";Sy.displayName="StraightEdgeInternal";function Ey(e){return S.memo(({id:r,sourceX:o,sourceY:s,targetX:a,targetY:l,sourcePosition:c=je.Bottom,targetPosition:f=je.Top,label:p,labelStyle:h,labelShowBg:g,labelBgStyle:y,labelBgPadding:x,labelBgBorderRadius:w,style:N,markerEnd:C,markerStart:E,pathOptions:_,interactionWidth:R})=>{const[b,j,A]=Ag({sourceX:o,sourceY:s,sourcePosition:c,targetX:a,targetY:l,targetPosition:f,curvature:_?.curvature}),T=e.isInternal?void 0:r;return u.jsx(Us,{id:T,path:b,labelX:j,labelY:A,label:p,labelStyle:h,labelShowBg:g,labelBgStyle:y,labelBgPadding:x,labelBgBorderRadius:w,style:N,markerEnd:C,markerStart:E,interactionWidth:R})})}const DC=Ey({isInternal:!1}),Cy=Ey({isInternal:!0});DC.displayName="BezierEdge";Cy.displayName="BezierEdgeInternal";const Qm={default:Cy,straight:Sy,step:_y,smoothstep:wy,simplebezier:yy},qm={sourceX:null,sourceY:null,targetX:null,targetY:null,sourcePosition:null,targetPosition:null},LC=(e,r,o)=>o===je.Left?e-r:o===je.Right?e+r:e,zC=(e,r,o)=>o===je.Top?e-r:o===je.Bottom?e+r:e,Jm="react-flow__edgeupdater";function e0({position:e,centerX:r,centerY:o,radius:s=10,onMouseDown:a,onMouseEnter:l,onMouseOut:c,type:f}){return u.jsx("circle",{onMouseDown:a,onMouseEnter:l,onMouseOut:c,className:gt([Jm,`${Jm}-${f}`]),cx:LC(r,s,e),cy:zC(o,s,e),r:s,stroke:"transparent",fill:"transparent"})}function IC({isReconnectable:e,reconnectRadius:r,edge:o,sourceX:s,sourceY:a,targetX:l,targetY:c,sourcePosition:f,targetPosition:p,onReconnect:h,onReconnectStart:g,onReconnectEnd:y,setReconnecting:x,setUpdateHover:w}){const N=it(),C=(j,A)=>{if(j.button!==0)return;const{autoPanOnConnect:T,domNode:P,isValidConnection:O,connectionMode:G,connectionRadius:D,lib:F,onConnectStart:H,onConnectEnd:W,cancelConnection:M,nodeLookup:z,rfId:Y,panBy:Q,updateConnection:I}=N.getState(),K=A.type==="target",U=(oe,re)=>{x(!1),y?.(oe,o,A.type,re)},L=oe=>h?.(o,oe),B=(oe,re)=>{x(!0),g?.(j,o,A.type),H?.(oe,re)};ad.onPointerDown(j.nativeEvent,{autoPanOnConnect:T,connectionMode:G,connectionRadius:D,domNode:P,handleId:A.id,nodeId:A.nodeId,nodeLookup:z,isTarget:K,edgeUpdaterType:A.type,lib:F,flowId:Y,cancelConnection:M,panBy:Q,isValidConnection:O,onConnect:L,onConnectStart:B,onConnectEnd:W,onReconnectEnd:U,updateConnection:I,getTransform:()=>N.getState().transform,getFromHandle:()=>N.getState().connection.fromHandle,dragThreshold:N.getState().connectionDragThreshold,handleDomNode:j.currentTarget})},E=j=>C(j,{nodeId:o.target,id:o.targetHandle??null,type:"target"}),_=j=>C(j,{nodeId:o.source,id:o.sourceHandle??null,type:"source"}),R=()=>w(!0),b=()=>w(!1);return u.jsxs(u.Fragment,{children:[(e===!0||e==="source")&&u.jsx(e0,{position:f,centerX:s,centerY:a,radius:r,onMouseDown:E,onMouseEnter:R,onMouseOut:b,type:"source"}),(e===!0||e==="target")&&u.jsx(e0,{position:p,centerX:l,centerY:c,radius:r,onMouseDown:_,onMouseEnter:R,onMouseOut:b,type:"target"})]})}function AC({id:e,edgesFocusable:r,edgesReconnectable:o,elementsSelectable:s,onClick:a,onDoubleClick:l,onContextMenu:c,onMouseEnter:f,onMouseMove:p,onMouseLeave:h,reconnectRadius:g,onReconnect:y,onReconnectStart:x,onReconnectEnd:w,rfId:N,edgeTypes:C,noPanClassName:E,onError:_,disableKeyboardA11y:R}){let b=Ue(ye=>ye.edgeLookup.get(e));const j=Ue(ye=>ye.defaultEdgeOptions);b=j?{...j,...b}:b;let A=b.type||"default",T=C?.[A]||Qm[A];T===void 0&&(_?.("011",tr.error011(A)),A="default",T=C?.default||Qm.default);const P=!!(b.focusable||r&&typeof b.focusable>"u"),O=typeof y<"u"&&(b.reconnectable||o&&typeof b.reconnectable>"u"),G=!!(b.selectable||s&&typeof b.selectable>"u"),D=S.useRef(null),[F,H]=S.useState(!1),[W,M]=S.useState(!1),z=it(),{zIndex:Y,sourceX:Q,sourceY:I,targetX:K,targetY:U,sourcePosition:L,targetPosition:B}=Ue(S.useCallback(ye=>{const Re=ye.nodeLookup.get(b.source),Be=ye.nodeLookup.get(b.target);if(!Re||!Be)return{zIndex:b.zIndex,...qm};const Ze=jS({id:e,sourceNode:Re,targetNode:Be,sourceHandle:b.sourceHandle||null,targetHandle:b.targetHandle||null,connectionMode:ye.connectionMode,onError:_});return{zIndex:bS({selected:b.selected,zIndex:b.zIndex,sourceNode:Re,targetNode:Be,elevateOnSelect:ye.elevateEdgesOnSelect,zIndexMode:ye.zIndexMode}),...Ze||qm}},[b.source,b.target,b.sourceHandle,b.targetHandle,b.selected,b.zIndex]),ot),oe=S.useMemo(()=>b.markerStart?`url('#${id(b.markerStart,N)}')`:void 0,[b.markerStart,N]),re=S.useMemo(()=>b.markerEnd?`url('#${id(b.markerEnd,N)}')`:void 0,[b.markerEnd,N]);if(b.hidden||Q===null||I===null||K===null||U===null)return null;const ce=ye=>{const{addSelectedEdges:Re,unselectNodesAndEdges:Be,multiSelectionActive:Ze}=z.getState();G&&(z.setState({nodesSelectionActive:!1}),b.selected&&Ze?(Be({nodes:[],edges:[b]}),D.current?.blur()):Re([e])),a&&a(ye,b)},me=l?ye=>{l(ye,{...b})}:void 0,he=c?ye=>{c(ye,{...b})}:void 0,ie=f?ye=>{f(ye,{...b})}:void 0,pe=p?ye=>{p(ye,{...b})}:void 0,De=h?ye=>{h(ye,{...b})}:void 0,ze=ye=>{if(!R&&_g.includes(ye.key)&&G){const{unselectNodesAndEdges:Re,addSelectedEdges:Be}=z.getState();ye.key==="Escape"?(D.current?.blur(),Re({edges:[b]})):Be([e])}};return u.jsx("svg",{style:{zIndex:Y},children:u.jsxs("g",{className:gt(["react-flow__edge",`react-flow__edge-${A}`,b.className,E,{selected:b.selected,animated:b.animated,inactive:!G&&!a,updating:F,selectable:G}]),onClick:ce,onDoubleClick:me,onContextMenu:he,onMouseEnter:ie,onMouseMove:pe,onMouseLeave:De,onKeyDown:P?ze:void 0,tabIndex:P?0:void 0,role:b.ariaRole??(P?"group":"img"),"aria-roledescription":"edge","data-id":e,"data-testid":`rf__edge-${e}`,"aria-label":b.ariaLabel===null?void 0:b.ariaLabel||`Edge from ${b.source} to ${b.target}`,"aria-describedby":P?`${ty}-${N}`:void 0,ref:D,...b.domAttributes,children:[!W&&u.jsx(T,{id:e,source:b.source,target:b.target,type:b.type,selected:b.selected,animated:b.animated,selectable:G,deletable:b.deletable??!0,label:b.label,labelStyle:b.labelStyle,labelShowBg:b.labelShowBg,labelBgStyle:b.labelBgStyle,labelBgPadding:b.labelBgPadding,labelBgBorderRadius:b.labelBgBorderRadius,sourceX:Q,sourceY:I,targetX:K,targetY:U,sourcePosition:L,targetPosition:B,data:b.data,style:b.style,sourceHandleId:b.sourceHandle,targetHandleId:b.targetHandle,markerStart:oe,markerEnd:re,pathOptions:"pathOptions"in b?b.pathOptions:void 0,interactionWidth:b.interactionWidth}),O&&u.jsx(IC,{edge:b,isReconnectable:O,reconnectRadius:g,onReconnect:y,onReconnectStart:x,onReconnectEnd:w,sourceX:Q,sourceY:I,targetX:K,targetY:U,sourcePosition:L,targetPosition:B,setUpdateHover:H,setReconnecting:M})]})})}var $C=S.memo(AC);const FC=e=>({edgesFocusable:e.edgesFocusable,edgesReconnectable:e.edgesReconnectable,elementsSelectable:e.elementsSelectable,connectionMode:e.connectionMode,onError:e.onError});function ky({defaultMarkerColor:e,onlyRenderVisibleElements:r,rfId:o,edgeTypes:s,noPanClassName:a,onReconnect:l,onEdgeContextMenu:c,onEdgeMouseEnter:f,onEdgeMouseMove:p,onEdgeMouseLeave:h,onEdgeClick:g,reconnectRadius:y,onEdgeDoubleClick:x,onReconnectStart:w,onReconnectEnd:N,disableKeyboardA11y:C}){const{edgesFocusable:E,edgesReconnectable:_,elementsSelectable:R,onError:b}=Ue(FC,ot),j=NC(r);return u.jsxs("div",{className:"react-flow__edges",children:[u.jsx(jC,{defaultColor:e,rfId:o}),j.map(A=>u.jsx($C,{id:A,edgesFocusable:E,edgesReconnectable:_,elementsSelectable:R,noPanClassName:a,onReconnect:l,onContextMenu:c,onMouseEnter:f,onMouseMove:p,onMouseLeave:h,onClick:g,reconnectRadius:y,onDoubleClick:x,onReconnectStart:w,onReconnectEnd:N,rfId:o,onError:b,edgeTypes:s,disableKeyboardA11y:C},A))]})}ky.displayName="EdgeRenderer";const OC=S.memo(ky),HC=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function VC({children:e}){const r=Ue(HC);return u.jsx("div",{className:"react-flow__viewport xyflow__viewport react-flow__container",style:{transform:r},children:e})}function BC(e){const r=Fd(),o=S.useRef(!1);S.useEffect(()=>{!o.current&&r.viewportInitialized&&e&&(setTimeout(()=>e(r),1),o.current=!0)},[e,r.viewportInitialized])}const UC=e=>e.panZoom?.syncViewport;function WC(e){const r=Ue(UC),o=it();return S.useEffect(()=>{e&&(r?.(e),o.setState({transform:[e.x,e.y,e.zoom]}))},[e,r]),null}function YC(e){return e.connection.inProgress?{...e.connection,to:Bs(e.connection.to,e.transform)}:{...e.connection}}function XC(e){return YC}function GC(e){const r=XC();return Ue(r,ot)}const KC=e=>({nodesConnectable:e.nodesConnectable,isValid:e.connection.isValid,inProgress:e.connection.inProgress,width:e.width,height:e.height});function ZC({containerStyle:e,style:r,type:o,component:s}){const{nodesConnectable:a,width:l,height:c,isValid:f,inProgress:p}=Ue(KC,ot);return!(l&&a&&p)?null:u.jsx("svg",{style:e,width:l,height:c,className:"react-flow__connectionline react-flow__container",children:u.jsx("g",{className:gt(["react-flow__connection",Eg(f)]),children:u.jsx(jy,{style:r,type:o,CustomComponent:s,isValid:f})})})}const jy=({style:e,type:r=to.Bezier,CustomComponent:o,isValid:s})=>{const{inProgress:a,from:l,fromNode:c,fromHandle:f,fromPosition:p,to:h,toNode:g,toHandle:y,toPosition:x,pointer:w}=GC();if(!a)return;if(o)return u.jsx(o,{connectionLineType:r,connectionLineStyle:e,fromNode:c,fromHandle:f,fromX:l.x,fromY:l.y,toX:h.x,toY:h.y,fromPosition:p,toPosition:x,connectionStatus:Eg(s),toNode:g,toHandle:y,pointer:w});let N="";const C={sourceX:l.x,sourceY:l.y,sourcePosition:p,targetX:h.x,targetY:h.y,targetPosition:x};switch(r){case to.Bezier:[N]=Ag(C);break;case to.SimpleBezier:[N]=my(C);break;case to.Step:[N]=kl({...C,borderRadius:0});break;case to.SmoothStep:[N]=kl(C);break;default:[N]=Og(C)}return u.jsx("path",{d:N,fill:"none",className:"react-flow__connection-path",style:e})};jy.displayName="ConnectionLine";const QC={};function t0(e=QC){S.useRef(e),it(),S.useEffect(()=>{},[e])}function qC(){it(),S.useRef(!1),S.useEffect(()=>{},[])}function Ry({nodeTypes:e,edgeTypes:r,onInit:o,onNodeClick:s,onEdgeClick:a,onNodeDoubleClick:l,onEdgeDoubleClick:c,onNodeMouseEnter:f,onNodeMouseMove:p,onNodeMouseLeave:h,onNodeContextMenu:g,onSelectionContextMenu:y,onSelectionStart:x,onSelectionEnd:w,connectionLineType:N,connectionLineStyle:C,connectionLineComponent:E,connectionLineContainerStyle:_,selectionKeyCode:R,selectionOnDrag:b,selectionMode:j,multiSelectionKeyCode:A,panActivationKeyCode:T,zoomActivationKeyCode:P,deleteKeyCode:O,onlyRenderVisibleElements:G,elementsSelectable:D,defaultViewport:F,translateExtent:H,minZoom:W,maxZoom:M,preventScrolling:z,defaultMarkerColor:Y,zoomOnScroll:Q,zoomOnPinch:I,panOnScroll:K,panOnScrollSpeed:U,panOnScrollMode:L,zoomOnDoubleClick:B,panOnDrag:oe,onPaneClick:re,onPaneMouseEnter:ce,onPaneMouseMove:me,onPaneMouseLeave:he,onPaneScroll:ie,onPaneContextMenu:pe,paneClickDistance:De,nodeClickDistance:ze,onEdgeContextMenu:ye,onEdgeMouseEnter:Re,onEdgeMouseMove:Be,onEdgeMouseLeave:Ze,reconnectRadius:He,onReconnect:ut,onReconnectStart:qt,onReconnectEnd:Rt,noDragClassName:zt,noWheelClassName:Ot,noPanClassName:En,disableKeyboardA11y:Hn,nodeExtent:Ht,rfId:Jt,viewport:un,onViewportChange:en}){return t0(e),t0(r),qC(),BC(o),WC(un),u.jsx(hC,{onPaneClick:re,onPaneMouseEnter:ce,onPaneMouseMove:me,onPaneMouseLeave:he,onPaneContextMenu:pe,onPaneScroll:ie,paneClickDistance:De,deleteKeyCode:O,selectionKeyCode:R,selectionOnDrag:b,selectionMode:j,onSelectionStart:x,onSelectionEnd:w,multiSelectionKeyCode:A,panActivationKeyCode:T,zoomActivationKeyCode:P,elementsSelectable:D,zoomOnScroll:Q,zoomOnPinch:I,zoomOnDoubleClick:B,panOnScroll:K,panOnScrollSpeed:U,panOnScrollMode:L,panOnDrag:oe,defaultViewport:F,translateExtent:H,minZoom:W,maxZoom:M,onSelectionContextMenu:y,preventScrolling:z,noDragClassName:zt,noWheelClassName:Ot,noPanClassName:En,disableKeyboardA11y:Hn,onViewportChange:en,isControlledViewport:!!un,children:u.jsxs(VC,{children:[u.jsx(OC,{edgeTypes:r,onEdgeClick:a,onEdgeDoubleClick:c,onReconnect:ut,onReconnectStart:qt,onReconnectEnd:Rt,onlyRenderVisibleElements:G,onEdgeContextMenu:ye,onEdgeMouseEnter:Re,onEdgeMouseMove:Be,onEdgeMouseLeave:Ze,reconnectRadius:He,defaultMarkerColor:Y,noPanClassName:En,disableKeyboardA11y:Hn,rfId:Jt}),u.jsx(ZC,{style:C,type:N,component:E,containerStyle:_}),u.jsx("div",{className:"react-flow__edgelabel-renderer"}),u.jsx(_C,{nodeTypes:e,onNodeClick:s,onNodeDoubleClick:l,onNodeMouseEnter:f,onNodeMouseMove:p,onNodeMouseLeave:h,onNodeContextMenu:g,nodeClickDistance:ze,onlyRenderVisibleElements:G,noPanClassName:En,noDragClassName:zt,disableKeyboardA11y:Hn,nodeExtent:Ht,rfId:Jt}),u.jsx("div",{className:"react-flow__viewport-portal"})]})})}Ry.displayName="GraphView";const JC=S.memo(Ry),n0=({nodes:e,edges:r,defaultNodes:o,defaultEdges:s,width:a,height:l,fitView:c,fitViewOptions:f,minZoom:p=.5,maxZoom:h=2,nodeOrigin:g,nodeExtent:y,zIndexMode:x="basic"}={})=>{const w=new Map,N=new Map,C=new Map,E=new Map,_=s??r??[],R=o??e??[],b=g??[0,0],j=y??Cs;Bg(C,E,_);const A=sd(R,w,N,{nodeOrigin:b,nodeExtent:j,zIndexMode:x});let T=[0,0,1];if(c&&a&&l){const P=Hs(w,{filter:F=>!!((F.width||F.initialWidth)&&(F.height||F.initialHeight))}),{x:O,y:G,zoom:D}=Td(P,a,l,p,h,f?.padding??.1);T=[O,G,D]}return{rfId:"1",width:a??0,height:l??0,transform:T,nodes:R,nodesInitialized:A,nodeLookup:w,parentLookup:N,edges:_,edgeLookup:E,connectionLookup:C,onNodesChange:null,onEdgesChange:null,hasDefaultNodes:o!==void 0,hasDefaultEdges:s!==void 0,panZoom:null,minZoom:p,maxZoom:h,translateExtent:Cs,nodeExtent:j,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionMode:bi.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:b,nodeDragThreshold:1,connectionDragThreshold:1,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesReconnectable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,elevateEdgesOnSelect:!0,selectNodesOnDrag:!0,multiSelectionActive:!1,fitViewQueued:c??!1,fitViewOptions:f,fitViewResolver:null,connection:{...Sg},connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,autoPanOnNodeFocus:!0,autoPanSpeed:15,connectionRadius:20,onError:mS,isValidConnection:void 0,onSelectionChangeHandlers:[],lib:"react",debug:!1,ariaLabelConfig:Ng,zIndexMode:x,onNodesChangeMiddlewareMap:new Map,onEdgesChangeMiddlewareMap:new Map}},ek=({nodes:e,edges:r,defaultNodes:o,defaultEdges:s,width:a,height:l,fitView:c,fitViewOptions:f,minZoom:p,maxZoom:h,nodeOrigin:g,nodeExtent:y,zIndexMode:x})=>xE((w,N)=>{async function C(){const{nodeLookup:E,panZoom:_,fitViewOptions:R,fitViewResolver:b,width:j,height:A,minZoom:T,maxZoom:P}=N();_&&(await hS({nodes:E,width:j,height:A,panZoom:_,minZoom:T,maxZoom:P},R),b?.resolve(!0),w({fitViewResolver:null}))}return{...n0({nodes:e,edges:r,width:a,height:l,fitView:c,fitViewOptions:f,minZoom:p,maxZoom:h,nodeOrigin:g,nodeExtent:y,defaultNodes:o,defaultEdges:s,zIndexMode:x}),setNodes:E=>{const{nodeLookup:_,parentLookup:R,nodeOrigin:b,elevateNodesOnSelect:j,fitViewQueued:A,zIndexMode:T}=N(),P=sd(E,_,R,{nodeOrigin:b,nodeExtent:y,elevateNodesOnSelect:j,checkEquality:!0,zIndexMode:T});A&&P?(C(),w({nodes:E,nodesInitialized:P,fitViewQueued:!1,fitViewOptions:void 0})):w({nodes:E,nodesInitialized:P})},setEdges:E=>{const{connectionLookup:_,edgeLookup:R}=N();Bg(_,R,E),w({edges:E})},setDefaultNodesAndEdges:(E,_)=>{if(E){const{setNodes:R}=N();R(E),w({hasDefaultNodes:!0})}if(_){const{setEdges:R}=N();R(_),w({hasDefaultEdges:!0})}},updateNodeInternals:E=>{const{triggerNodeChanges:_,nodeLookup:R,parentLookup:b,domNode:j,nodeOrigin:A,nodeExtent:T,debug:P,fitViewQueued:O,zIndexMode:G}=N(),{changes:D,updatedInternals:F}=IS(E,R,b,j,A,T,G);F&&(TS(R,b,{nodeOrigin:A,nodeExtent:T,zIndexMode:G}),O?(C(),w({fitViewQueued:!1,fitViewOptions:void 0})):w({}),D?.length>0&&(P&&console.log("React Flow: trigger node changes",D),_?.(D)))},updateNodePositions:(E,_=!1)=>{const R=[];let b=[];const{nodeLookup:j,triggerNodeChanges:A,connection:T,updateConnection:P,onNodesChangeMiddlewareMap:O}=N();for(const[G,D]of E){const F=j.get(G),H=!!(F?.expandParent&&F?.parentId&&D?.position),W={id:G,type:"position",position:H?{x:Math.max(0,D.position.x),y:Math.max(0,D.position.y)}:D.position,dragging:_};if(F&&T.inProgress&&T.fromNode.id===F.id){const M=Lo(F,T.fromHandle,je.Left,!0);P({...T,from:M})}H&&F.parentId&&R.push({id:G,parentId:F.parentId,rect:{...D.internals.positionAbsolute,width:D.measured.width??0,height:D.measured.height??0}}),b.push(W)}if(R.length>0){const{parentLookup:G,nodeOrigin:D}=N(),F=$d(R,j,G,D);b.push(...F)}for(const G of O.values())b=G(b);A(b)},triggerNodeChanges:E=>{const{onNodesChange:_,setNodes:R,nodes:b,hasDefaultNodes:j,debug:A}=N();if(E?.length){if(j){const T=oy(E,b);R(T)}A&&console.log("React Flow: trigger node changes",E),_?.(E)}},triggerEdgeChanges:E=>{const{onEdgesChange:_,setEdges:R,edges:b,hasDefaultEdges:j,debug:A}=N();if(E?.length){if(j){const T=iy(E,b);R(T)}A&&console.log("React Flow: trigger edge changes",E),_?.(E)}},addSelectedNodes:E=>{const{multiSelectionActive:_,edgeLookup:R,nodeLookup:b,triggerNodeChanges:j,triggerEdgeChanges:A}=N();if(_){const T=E.map(P=>So(P,!0));j(T);return}j(mi(b,new Set([...E]),!0)),A(mi(R))},addSelectedEdges:E=>{const{multiSelectionActive:_,edgeLookup:R,nodeLookup:b,triggerNodeChanges:j,triggerEdgeChanges:A}=N();if(_){const T=E.map(P=>So(P,!0));A(T);return}A(mi(R,new Set([...E]))),j(mi(b,new Set,!0))},unselectNodesAndEdges:({nodes:E,edges:_}={})=>{const{edges:R,nodes:b,nodeLookup:j,triggerNodeChanges:A,triggerEdgeChanges:T}=N(),P=E||b,O=_||R,G=P.map(F=>{const H=j.get(F.id);return H&&(H.selected=!1),So(F.id,!1)}),D=O.map(F=>So(F.id,!1));A(G),T(D)},setMinZoom:E=>{const{panZoom:_,maxZoom:R}=N();_?.setScaleExtent([E,R]),w({minZoom:E})},setMaxZoom:E=>{const{panZoom:_,minZoom:R}=N();_?.setScaleExtent([R,E]),w({maxZoom:E})},setTranslateExtent:E=>{N().panZoom?.setTranslateExtent(E),w({translateExtent:E})},resetSelectedElements:()=>{const{edges:E,nodes:_,triggerNodeChanges:R,triggerEdgeChanges:b,elementsSelectable:j}=N();if(!j)return;const A=_.reduce((P,O)=>O.selected?[...P,So(O.id,!1)]:P,[]),T=E.reduce((P,O)=>O.selected?[...P,So(O.id,!1)]:P,[]);R(A),b(T)},setNodeExtent:E=>{const{nodes:_,nodeLookup:R,parentLookup:b,nodeOrigin:j,elevateNodesOnSelect:A,nodeExtent:T,zIndexMode:P}=N();E[0][0]===T[0][0]&&E[0][1]===T[0][1]&&E[1][0]===T[1][0]&&E[1][1]===T[1][1]||(sd(_,R,b,{nodeOrigin:j,nodeExtent:E,elevateNodesOnSelect:A,checkEquality:!1,zIndexMode:P}),w({nodeExtent:E}))},panBy:E=>{const{transform:_,width:R,height:b,panZoom:j,translateExtent:A}=N();return AS({delta:E,panZoom:j,transform:_,translateExtent:A,width:R,height:b})},setCenter:async(E,_,R)=>{const{width:b,height:j,maxZoom:A,panZoom:T}=N();if(!T)return Promise.resolve(!1);const P=typeof R?.zoom<"u"?R.zoom:A;return await T.setViewport({x:b/2-E*P,y:j/2-_*P,zoom:P},{duration:R?.duration,ease:R?.ease,interpolate:R?.interpolate}),Promise.resolve(!0)},cancelConnection:()=>{w({connection:{...Sg}})},updateConnection:E=>{w({connection:E})},reset:()=>w({...n0()})}},Object.is);function tk({initialNodes:e,initialEdges:r,defaultNodes:o,defaultEdges:s,initialWidth:a,initialHeight:l,initialMinZoom:c,initialMaxZoom:f,initialFitViewOptions:p,fitView:h,nodeOrigin:g,nodeExtent:y,zIndexMode:x,children:w}){const[N]=S.useState(()=>ek({nodes:e,edges:r,defaultNodes:o,defaultEdges:s,width:a,height:l,fitView:h,minZoom:c,maxZoom:f,fitViewOptions:p,nodeOrigin:g,nodeExtent:y,zIndexMode:x}));return u.jsx(vE,{value:N,children:u.jsx(VE,{children:w})})}function nk({children:e,nodes:r,edges:o,defaultNodes:s,defaultEdges:a,width:l,height:c,fitView:f,fitViewOptions:p,minZoom:h,maxZoom:g,nodeOrigin:y,nodeExtent:x,zIndexMode:w}){return S.useContext(Ol)?u.jsx(u.Fragment,{children:e}):u.jsx(tk,{initialNodes:r,initialEdges:o,defaultNodes:s,defaultEdges:a,initialWidth:l,initialHeight:c,fitView:f,initialFitViewOptions:p,initialMinZoom:h,initialMaxZoom:g,nodeOrigin:y,nodeExtent:x,zIndexMode:w,children:e})}const rk={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0};function ok({nodes:e,edges:r,defaultNodes:o,defaultEdges:s,className:a,nodeTypes:l,edgeTypes:c,onNodeClick:f,onEdgeClick:p,onInit:h,onMove:g,onMoveStart:y,onMoveEnd:x,onConnect:w,onConnectStart:N,onConnectEnd:C,onClickConnectStart:E,onClickConnectEnd:_,onNodeMouseEnter:R,onNodeMouseMove:b,onNodeMouseLeave:j,onNodeContextMenu:A,onNodeDoubleClick:T,onNodeDragStart:P,onNodeDrag:O,onNodeDragStop:G,onNodesDelete:D,onEdgesDelete:F,onDelete:H,onSelectionChange:W,onSelectionDragStart:M,onSelectionDrag:z,onSelectionDragStop:Y,onSelectionContextMenu:Q,onSelectionStart:I,onSelectionEnd:K,onBeforeDelete:U,connectionMode:L,connectionLineType:B=to.Bezier,connectionLineStyle:oe,connectionLineComponent:re,connectionLineContainerStyle:ce,deleteKeyCode:me="Backspace",selectionKeyCode:he="Shift",selectionOnDrag:ie=!1,selectionMode:pe=ks.Full,panActivationKeyCode:De="Space",multiSelectionKeyCode:ze=Rs()?"Meta":"Control",zoomActivationKeyCode:ye=Rs()?"Meta":"Control",snapToGrid:Re,snapGrid:Be,onlyRenderVisibleElements:Ze=!1,selectNodesOnDrag:He,nodesDraggable:ut,autoPanOnNodeFocus:qt,nodesConnectable:Rt,nodesFocusable:zt,nodeOrigin:Ot=ny,edgesFocusable:En,edgesReconnectable:Hn,elementsSelectable:Ht=!0,defaultViewport:Jt=TE,minZoom:un=.5,maxZoom:en=2,translateExtent:St=Cs,preventScrolling:Vt=!0,nodeExtent:cn,defaultMarkerColor:ar="#b1b1b7",zoomOnScroll:oo=!0,zoomOnPinch:Ao=!0,panOnScroll:Bt=!1,panOnScrollSpeed:$o=.5,panOnScrollMode:jr=jo.Free,zoomOnDoubleClick:Rr=!0,panOnDrag:io=!0,onPaneClick:Pr,onPaneMouseEnter:Vn,onPaneMouseMove:Cn,onPaneMouseLeave:dn,onPaneScroll:Fo,onPaneContextMenu:so,paneClickDistance:Oo=1,nodeClickDistance:ao=0,children:lr,onReconnect:Bn,onReconnectStart:lo,onReconnectEnd:ur,onEdgeContextMenu:uo,onEdgeDoubleClick:V,onEdgeMouseEnter:q,onEdgeMouseMove:te,onEdgeMouseLeave:ae,reconnectRadius:de=10,onNodesChange:Ne,onEdgesChange:xe,noDragClassName:_e="nodrag",noWheelClassName:Ce="nowheel",noPanClassName:we="nopan",fitView:Pe,fitViewOptions:Ee,connectOnClick:Ve,attributionPosition:Fe,proOptions:ct,defaultEdgeOptions:st,elevateNodesOnSelect:ht=!0,elevateEdgesOnSelect:Ye=!1,disableKeyboardA11y:Et=!1,autoPanOnConnect:Ge,autoPanOnNodeDrag:cr,autoPanSpeed:Ut,connectionRadius:It,isValidConnection:Un,onError:dr,style:fn,id:hn,nodeDragThreshold:Ct,connectionDragThreshold:Oe,viewport:Ke,onViewportChange:Wn,width:kn,height:Je,colorMode:jn="light",debug:fr,onScroll:Yn,ariaLabelConfig:Ho,zIndexMode:Ws="basic",...Bl},ki){const Vo=hn||"1",ji=IE(jn),co=S.useCallback(Ys=>{Ys.currentTarget.scrollTo({top:0,left:0,behavior:"instant"}),Yn?.(Ys)},[Yn]);return u.jsx("div",{"data-testid":"rf__wrapper",...Bl,onScroll:co,style:{...fn,...rk},ref:ki,className:gt(["react-flow",a,ji]),id:hn,role:"application",children:u.jsxs(nk,{nodes:e,edges:r,width:kn,height:Je,fitView:Pe,fitViewOptions:Ee,minZoom:un,maxZoom:en,nodeOrigin:Ot,nodeExtent:cn,zIndexMode:Ws,children:[u.jsx(JC,{onInit:h,onNodeClick:f,onEdgeClick:p,onNodeMouseEnter:R,onNodeMouseMove:b,onNodeMouseLeave:j,onNodeContextMenu:A,onNodeDoubleClick:T,nodeTypes:l,edgeTypes:c,connectionLineType:B,connectionLineStyle:oe,connectionLineComponent:re,connectionLineContainerStyle:ce,selectionKeyCode:he,selectionOnDrag:ie,selectionMode:pe,deleteKeyCode:me,multiSelectionKeyCode:ze,panActivationKeyCode:De,zoomActivationKeyCode:ye,onlyRenderVisibleElements:Ze,defaultViewport:Jt,translateExtent:St,minZoom:un,maxZoom:en,preventScrolling:Vt,zoomOnScroll:oo,zoomOnPinch:Ao,zoomOnDoubleClick:Rr,panOnScroll:Bt,panOnScrollSpeed:$o,panOnScrollMode:jr,panOnDrag:io,onPaneClick:Pr,onPaneMouseEnter:Vn,onPaneMouseMove:Cn,onPaneMouseLeave:dn,onPaneScroll:Fo,onPaneContextMenu:so,paneClickDistance:Oo,nodeClickDistance:ao,onSelectionContextMenu:Q,onSelectionStart:I,onSelectionEnd:K,onReconnect:Bn,onReconnectStart:lo,onReconnectEnd:ur,onEdgeContextMenu:uo,onEdgeDoubleClick:V,onEdgeMouseEnter:q,onEdgeMouseMove:te,onEdgeMouseLeave:ae,reconnectRadius:de,defaultMarkerColor:ar,noDragClassName:_e,noWheelClassName:Ce,noPanClassName:we,rfId:Vo,disableKeyboardA11y:Et,nodeExtent:cn,viewport:Ke,onViewportChange:Wn}),u.jsx(zE,{nodes:e,edges:r,defaultNodes:o,defaultEdges:s,onConnect:w,onConnectStart:N,onConnectEnd:C,onClickConnectStart:E,onClickConnectEnd:_,nodesDraggable:ut,autoPanOnNodeFocus:qt,nodesConnectable:Rt,nodesFocusable:zt,edgesFocusable:En,edgesReconnectable:Hn,elementsSelectable:Ht,elevateNodesOnSelect:ht,elevateEdgesOnSelect:Ye,minZoom:un,maxZoom:en,nodeExtent:cn,onNodesChange:Ne,onEdgesChange:xe,snapToGrid:Re,snapGrid:Be,connectionMode:L,translateExtent:St,connectOnClick:Ve,defaultEdgeOptions:st,fitView:Pe,fitViewOptions:Ee,onNodesDelete:D,onEdgesDelete:F,onDelete:H,onNodeDragStart:P,onNodeDrag:O,onNodeDragStop:G,onSelectionDrag:z,onSelectionDragStart:M,onSelectionDragStop:Y,onMove:g,onMoveStart:y,onMoveEnd:x,noPanClassName:we,nodeOrigin:Ot,rfId:Vo,autoPanOnConnect:Ge,autoPanOnNodeDrag:cr,autoPanSpeed:Ut,onError:dr,connectionRadius:It,isValidConnection:Un,selectNodesOnDrag:He,nodeDragThreshold:Ct,connectionDragThreshold:Oe,onBeforeDelete:U,debug:fr,ariaLabelConfig:Ho,zIndexMode:Ws}),u.jsx(ME,{onSelectionChange:W}),lr,u.jsx(CE,{proOptions:ct,position:Fe}),u.jsx(EE,{rfId:Vo,disableKeyboardA11y:Et})]})})}var ik=sy(ok);const sk=e=>e.domNode?.querySelector(".react-flow__edgelabel-renderer");function ak({children:e}){const r=Ue(sk);return r?W0.createPortal(e,r):null}function lk(e){const[r,o]=S.useState(e),s=S.useCallback(a=>o(l=>oy(a,l)),[]);return[r,o,s]}function uk(e){const[r,o]=S.useState(e),s=S.useCallback(a=>o(l=>iy(a,l)),[]);return[r,o,s]}function ck({dimensions:e,lineWidth:r,variant:o,className:s}){return u.jsx("path",{strokeWidth:r,d:`M${e[0]/2} 0 V${e[1]} M0 ${e[1]/2} H${e[0]}`,className:gt(["react-flow__background-pattern",o,s])})}function dk({radius:e,className:r}){return u.jsx("circle",{cx:e,cy:e,r:e,className:gt(["react-flow__background-pattern","dots",r])})}var Sr;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(Sr||(Sr={}));const fk={[Sr.Dots]:1,[Sr.Lines]:1,[Sr.Cross]:6},hk=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function Py({id:e,variant:r=Sr.Dots,gap:o=20,size:s,lineWidth:a=1,offset:l=0,color:c,bgColor:f,style:p,className:h,patternClassName:g}){const y=S.useRef(null),{transform:x,patternId:w}=Ue(hk,ot),N=s||fk[r],C=r===Sr.Dots,E=r===Sr.Cross,_=Array.isArray(o)?o:[o,o],R=[_[0]*x[2]||1,_[1]*x[2]||1],b=N*x[2],j=Array.isArray(l)?l:[l,l],A=E?[b,b]:R,T=[j[0]*x[2]||1+A[0]/2,j[1]*x[2]||1+A[1]/2],P=`${w}${e||""}`;return u.jsxs("svg",{className:gt(["react-flow__background",h]),style:{...p,...Vl,"--xy-background-color-props":f,"--xy-background-pattern-color-props":c},ref:y,"data-testid":"rf__background",children:[u.jsx("pattern",{id:P,x:x[0]%R[0],y:x[1]%R[1],width:R[0],height:R[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${T[0]},-${T[1]})`,children:C?u.jsx(dk,{radius:b/2,className:g}):u.jsx(ck,{dimensions:A,lineWidth:a,variant:r,className:g})}),u.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${P})`})]})}Py.displayName="Background";const pk=S.memo(Py);function mk(){return u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:u.jsx("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function gk(){return u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:u.jsx("path",{d:"M0 0h32v4.2H0z"})})}function yk(){return u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:u.jsx("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function xk(){return u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:u.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function vk(){return u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:u.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}function al({children:e,className:r,...o}){return u.jsx("button",{type:"button",className:gt(["react-flow__controls-button",r]),...o,children:e})}const wk=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom,ariaLabelConfig:e.ariaLabelConfig});function My({style:e,showZoom:r=!0,showFitView:o=!0,showInteractive:s=!0,fitViewOptions:a,onZoomIn:l,onZoomOut:c,onFitView:f,onInteractiveChange:p,className:h,children:g,position:y="bottom-left",orientation:x="vertical","aria-label":w}){const N=it(),{isInteractive:C,minZoomReached:E,maxZoomReached:_,ariaLabelConfig:R}=Ue(wk,ot),{zoomIn:b,zoomOut:j,fitView:A}=Fd(),T=()=>{b(),l?.()},P=()=>{j(),c?.()},O=()=>{A(a),f?.()},G=()=>{N.setState({nodesDraggable:!C,nodesConnectable:!C,elementsSelectable:!C}),p?.(!C)},D=x==="horizontal"?"horizontal":"vertical";return u.jsxs(Hl,{className:gt(["react-flow__controls",D,h]),position:y,style:e,"data-testid":"rf__controls","aria-label":w??R["controls.ariaLabel"],children:[r&&u.jsxs(u.Fragment,{children:[u.jsx(al,{onClick:T,className:"react-flow__controls-zoomin",title:R["controls.zoomIn.ariaLabel"],"aria-label":R["controls.zoomIn.ariaLabel"],disabled:_,children:u.jsx(mk,{})}),u.jsx(al,{onClick:P,className:"react-flow__controls-zoomout",title:R["controls.zoomOut.ariaLabel"],"aria-label":R["controls.zoomOut.ariaLabel"],disabled:E,children:u.jsx(gk,{})})]}),o&&u.jsx(al,{className:"react-flow__controls-fitview",onClick:O,title:R["controls.fitView.ariaLabel"],"aria-label":R["controls.fitView.ariaLabel"],children:u.jsx(yk,{})}),s&&u.jsx(al,{className:"react-flow__controls-interactive",onClick:G,title:R["controls.interactive.ariaLabel"],"aria-label":R["controls.interactive.ariaLabel"],children:C?u.jsx(vk,{}):u.jsx(xk,{})}),g]})}My.displayName="Controls";const bk=S.memo(My);function _k({id:e,x:r,y:o,width:s,height:a,style:l,color:c,strokeColor:f,strokeWidth:p,className:h,borderRadius:g,shapeRendering:y,selected:x,onClick:w}){const{background:N,backgroundColor:C}=l||{},E=c||N||C;return u.jsx("rect",{className:gt(["react-flow__minimap-node",{selected:x},h]),x:r,y:o,rx:g,ry:g,width:s,height:a,style:{fill:E,stroke:f,strokeWidth:p},shapeRendering:y,onClick:w?_=>w(_,e):void 0})}const Nk=S.memo(_k),Sk=e=>e.nodes.map(r=>r.id),Uc=e=>e instanceof Function?e:()=>e;function Ek({nodeStrokeColor:e,nodeColor:r,nodeClassName:o="",nodeBorderRadius:s=5,nodeStrokeWidth:a,nodeComponent:l=Nk,onClick:c}){const f=Ue(Sk,ot),p=Uc(r),h=Uc(e),g=Uc(o),y=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return u.jsx(u.Fragment,{children:f.map(x=>u.jsx(kk,{id:x,nodeColorFunc:p,nodeStrokeColorFunc:h,nodeClassNameFunc:g,nodeBorderRadius:s,nodeStrokeWidth:a,NodeComponent:l,onClick:c,shapeRendering:y},x))})}function Ck({id:e,nodeColorFunc:r,nodeStrokeColorFunc:o,nodeClassNameFunc:s,nodeBorderRadius:a,nodeStrokeWidth:l,shapeRendering:c,NodeComponent:f,onClick:p}){const{node:h,x:g,y,width:x,height:w}=Ue(N=>{const{internals:C}=N.nodeLookup.get(e),E=C.userNode,{x:_,y:R}=C.positionAbsolute,{width:b,height:j}=kr(E);return{node:E,x:_,y:R,width:b,height:j}},ot);return!h||h.hidden||!Mg(h)?null:u.jsx(f,{x:g,y,width:x,height:w,style:h.style,selected:!!h.selected,className:s(h),color:r(h),borderRadius:a,strokeColor:o(h),strokeWidth:l,shapeRendering:c,onClick:p,id:h.id})}const kk=S.memo(Ck);var jk=S.memo(Ek);const Rk=200,Pk=150,Mk=e=>!e.hidden,Tk=e=>{const r={x:-e.transform[0]/e.transform[2],y:-e.transform[1]/e.transform[2],width:e.width/e.transform[2],height:e.height/e.transform[2]};return{viewBB:r,boundingRect:e.nodeLookup.size>0?Pg(Hs(e.nodeLookup,{filter:Mk}),r):r,rfId:e.rfId,panZoom:e.panZoom,translateExtent:e.translateExtent,flowWidth:e.width,flowHeight:e.height,ariaLabelConfig:e.ariaLabelConfig}},Dk="react-flow__minimap-desc";function Ty({style:e,className:r,nodeStrokeColor:o,nodeColor:s,nodeClassName:a="",nodeBorderRadius:l=5,nodeStrokeWidth:c,nodeComponent:f,bgColor:p,maskColor:h,maskStrokeColor:g,maskStrokeWidth:y,position:x="bottom-right",onClick:w,onNodeClick:N,pannable:C=!1,zoomable:E=!1,ariaLabel:_,inversePan:R,zoomStep:b=1,offsetScale:j=5}){const A=it(),T=S.useRef(null),{boundingRect:P,viewBB:O,rfId:G,panZoom:D,translateExtent:F,flowWidth:H,flowHeight:W,ariaLabelConfig:M}=Ue(Tk,ot),z=e?.width??Rk,Y=e?.height??Pk,Q=P.width/z,I=P.height/Y,K=Math.max(Q,I),U=K*z,L=K*Y,B=j*K,oe=P.x-(U-P.width)/2-B,re=P.y-(L-P.height)/2-B,ce=U+B*2,me=L+B*2,he=`${Dk}-${G}`,ie=S.useRef(0),pe=S.useRef();ie.current=K,S.useEffect(()=>{if(T.current&&D)return pe.current=YS({domNode:T.current,panZoom:D,getTransform:()=>A.getState().transform,getViewScale:()=>ie.current}),()=>{pe.current?.destroy()}},[D]),S.useEffect(()=>{pe.current?.update({translateExtent:F,width:H,height:W,inversePan:R,pannable:C,zoomStep:b,zoomable:E})},[C,E,R,b,F,H,W]);const De=w?Re=>{const[Be,Ze]=pe.current?.pointer(Re)||[0,0];w(Re,{x:Be,y:Ze})}:void 0,ze=N?S.useCallback((Re,Be)=>{const Ze=A.getState().nodeLookup.get(Be).internals.userNode;N(Re,Ze)},[]):void 0,ye=_??M["minimap.ariaLabel"];return u.jsx(Hl,{position:x,style:{...e,"--xy-minimap-background-color-props":typeof p=="string"?p:void 0,"--xy-minimap-mask-background-color-props":typeof h=="string"?h:void 0,"--xy-minimap-mask-stroke-color-props":typeof g=="string"?g:void 0,"--xy-minimap-mask-stroke-width-props":typeof y=="number"?y*K:void 0,"--xy-minimap-node-background-color-props":typeof s=="string"?s:void 0,"--xy-minimap-node-stroke-color-props":typeof o=="string"?o:void 0,"--xy-minimap-node-stroke-width-props":typeof c=="number"?c:void 0},className:gt(["react-flow__minimap",r]),"data-testid":"rf__minimap",children:u.jsxs("svg",{width:z,height:Y,viewBox:`${oe} ${re} ${ce} ${me}`,className:"react-flow__minimap-svg",role:"img","aria-labelledby":he,ref:T,onClick:De,children:[ye&&u.jsx("title",{id:he,children:ye}),u.jsx(jk,{onClick:ze,nodeColor:s,nodeStrokeColor:o,nodeBorderRadius:l,nodeClassName:a,nodeStrokeWidth:c,nodeComponent:f}),u.jsx("path",{className:"react-flow__minimap-mask",d:`M${oe-B},${re-B}h${ce+B*2}v${me+B*2}h${-ce-B*2}z
        M${O.x},${O.y}h${O.width}v${O.height}h${-O.width}z`,fillRule:"evenodd",pointerEvents:"none"})]})})}Ty.displayName="MiniMap";const Lk=S.memo(Ty),zk=e=>r=>e?`${Math.max(1/r.transform[2],1)}`:void 0,Ik={[Ei.Line]:"right",[Ei.Handle]:"bottom-right"};function Ak({nodeId:e,position:r,variant:o=Ei.Handle,className:s,style:a=void 0,children:l,color:c,minWidth:f=10,minHeight:p=10,maxWidth:h=Number.MAX_VALUE,maxHeight:g=Number.MAX_VALUE,keepAspectRatio:y=!1,resizeDirection:x,autoScale:w=!0,shouldResize:N,onResizeStart:C,onResize:E,onResizeEnd:_}){const R=cy(),b=typeof e=="string"?e:R,j=it(),A=S.useRef(null),T=o===Ei.Handle,P=Ue(S.useCallback(zk(T&&w),[T,w]),ot),O=S.useRef(null),G=r??Ik[o];S.useEffect(()=>{if(!(!A.current||!b))return O.current||(O.current=sE({domNode:A.current,nodeId:b,getStoreItems:()=>{const{nodeLookup:F,transform:H,snapGrid:W,snapToGrid:M,nodeOrigin:z,domNode:Y}=j.getState();return{nodeLookup:F,transform:H,snapGrid:W,snapToGrid:M,nodeOrigin:z,paneDomNode:Y}},onChange:(F,H)=>{const{triggerNodeChanges:W,nodeLookup:M,parentLookup:z,nodeOrigin:Y}=j.getState(),Q=[],I={x:F.x,y:F.y},K=M.get(b);if(K&&K.expandParent&&K.parentId){const U=K.origin??Y,L=F.width??K.measured.width??0,B=F.height??K.measured.height??0,oe={id:K.id,parentId:K.parentId,rect:{width:L,height:B,...Tg({x:F.x??K.position.x,y:F.y??K.position.y},{width:L,height:B},K.parentId,M,U)}},re=$d([oe],M,z,Y);Q.push(...re),I.x=F.x?Math.max(U[0]*L,F.x):void 0,I.y=F.y?Math.max(U[1]*B,F.y):void 0}if(I.x!==void 0&&I.y!==void 0){const U={id:b,type:"position",position:{...I}};Q.push(U)}if(F.width!==void 0&&F.height!==void 0){const L={id:b,type:"dimensions",resizing:!0,setAttributes:x?x==="horizontal"?"width":"height":!0,dimensions:{width:F.width,height:F.height}};Q.push(L)}for(const U of H){const L={...U,type:"position"};Q.push(L)}W(Q)},onEnd:({width:F,height:H})=>{const W={id:b,type:"dimensions",resizing:!1,dimensions:{width:F,height:H}};j.getState().triggerNodeChanges([W])}})),O.current.update({controlPosition:G,boundaries:{minWidth:f,minHeight:p,maxWidth:h,maxHeight:g},keepAspectRatio:y,resizeDirection:x,onResizeStart:C,onResize:E,onResizeEnd:_,shouldResize:N}),()=>{O.current?.destroy()}},[G,f,p,h,g,y,C,E,_,N]);const D=G.split("-");return u.jsx("div",{className:gt(["react-flow__resize-control","nodrag",...D,o,s]),ref:A,style:{...a,scale:P,...c&&{[T?"backgroundColor":"borderColor"]:c}},children:l})}S.memo(Ak);const Dy=[{type:"inbound_number",label:"Inbound Number",description:"Entry point  one or more DIDs mapped to it",entityType:"inbound_number",outputs:1,outputHandles:[{id:"next",label:"Next"}],iconPath:"M2 3a1 1 0 011-1h2.153a1 1 0 01.986.836l.74 4.435a1 1 0 01-.54 1.06l-1.548.773a11.037 11.037 0 006.105 6.105l.774-1.548a1 1 0 011.059-.54l4.435.74a1 1 0 01.836.986V17a1 1 0 01-1 1h-2C7.82 18 2 12.18 2 5V3z",color:"emerald"},{type:"time_switch",label:"Time Switch",description:"Route calls based on day/time rules",entityType:"time_switch",outputs:"dynamic",iconPath:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z",color:"amber"},{type:"ivr_menu",label:"IVR Menu",description:"Play prompt, collect DTMF digits",entityType:"ivr_menu",outputs:"dynamic",iconPath:"M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 5a1 1 0 011-1h6a1 1 0 110 2H4a1 1 0 01-1-1z",color:"violet"},{type:"ring_group",label:"Ring Group",description:"Ring a group of extensions",entityType:"ring_group",outputs:2,outputHandles:[{id:"answered",label:"Answered"},{id:"no_answer",label:"No Answer"}],iconPath:"M13 6a3 3 0 11-6 0 3 3 0 016 0zm5 2a2 2 0 11-4 0 2 2 0 014 0zm-4 7a4 4 0 00-8 0v3h8v-3zM6 8a2 2 0 11-4 0 2 2 0 014 0zm10 10v-3a5.972 5.972 0 00-.75-2.906A3.005 3.005 0 0119 15v3h-3zM4.75 12.094A5.973 5.973 0 004 15v3H1v-3a3 3 0 013.75-2.906z",color:"blue"},{type:"extension",label:"Extension",description:"Ring a single extension",entityType:"extension",outputs:2,outputHandles:[{id:"answered",label:"Answered"},{id:"no_answer",label:"No Answer"}],iconPath:"M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z",color:"sky"},{type:"voicemail",label:"Voicemail",description:"Record voicemail into a mailbox",entityType:"voicemail_box",outputs:1,outputHandles:[{id:"after_recording",label:"After Recording"}],iconPath:"M18 10c0 3.866-3.582 7-8 7a8.841 8.841 0 01-4.083-.98L2 17l1.338-3.123C2.493 12.767 2 11.434 2 10c0-3.866 3.582-7 8-7s8 3.134 8 7z",color:"orange"},{type:"play_message",label:"Play Message",description:"Play an audio file or TTS",outputs:1,outputHandles:[{id:"after_playback",label:"After Playback"}],iconPath:"M9.383 3.076A1 1 0 0110 4v12a1 1 0 01-1.707.707L4.586 13H2a1 1 0 01-1-1V8a1 1 0 011-1h2.586l3.707-3.707a1 1 0 011.09-.217zM14.657 2.929a1 1 0 011.414 0A9.972 9.972 0 0119 10a9.972 9.972 0 01-2.929 7.071 1 1 0 01-1.414-1.414A7.971 7.971 0 0017 10c0-2.21-.894-4.208-2.343-5.657a1 1 0 010-1.414z",color:"teal"},{type:"conference",label:"Conference",description:"Join caller into a conference bridge",entityType:"conference",outputs:1,outputHandles:[{id:"after_leave",label:"After Leave"}],iconPath:"M7 4a3 3 0 016 0v4a3 3 0 11-6 0V4zm4 10.93A7.001 7.001 0 0017 8a1 1 0 10-2 0A5 5 0 015 8a1 1 0 00-2 0 7.001 7.001 0 006 6.93V17H6a1 1 0 100 2h8a1 1 0 100-2h-3v-2.07z",color:"indigo"},{type:"transfer",label:"Transfer",description:"Transfer call to external number or extension",outputs:0,iconPath:"M10.293 3.293a1 1 0 011.414 0l6 6a1 1 0 010 1.414l-6 6a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-4.293-4.293a1 1 0 010-1.414z",color:"cyan"},{type:"hangup",label:"Hangup",description:"Terminate the call",outputs:0,iconPath:"M3.707 2.293a1 1 0 00-1.414 1.414l6.921 6.922c.05.062.105.118.168.167l6.91 6.911a1 1 0 001.415-1.414l-.354-.354A8 8 0 003.707 2.293zM2 10a8 8 0 0011.953 6.953l-1.5-1.5A6 6 0 014 10a1 1 0 00-2 0zm14-1a1 1 0 10-2 0 4 4 0 01-.32 1.564l1.492 1.492A6 6 0 0016 10v-1z",color:"red"},{type:"set_caller_id",label:"Set Caller ID",description:"Override caller ID name/number",outputs:1,outputHandles:[{id:"next",label:"Next"}],iconPath:"M17.414 2.586a2 2 0 00-2.828 0L7 10.172V13h2.828l7.586-7.586a2 2 0 000-2.828z M2 6a2 2 0 012-2h4a1 1 0 010 2H4v10h10v-4a1 1 0 112 0v4a2 2 0 01-2 2H4a2 2 0 01-2-2V6z",color:"pink"}];function Hd(e){return Dy.find(r=>r.type===e)}const Po={emerald:{bg:"bg-emerald-50",border:"border-emerald-300",text:"text-emerald-700",handle:"bg-emerald-500"},amber:{bg:"bg-amber-50",border:"border-amber-300",text:"text-amber-700",handle:"bg-amber-500"},violet:{bg:"bg-violet-50",border:"border-violet-300",text:"text-violet-700",handle:"bg-violet-500"},blue:{bg:"bg-blue-50",border:"border-blue-300",text:"text-blue-700",handle:"bg-blue-500"},sky:{bg:"bg-sky-50",border:"border-sky-300",text:"text-sky-700",handle:"bg-sky-500"},orange:{bg:"bg-orange-50",border:"border-orange-300",text:"text-orange-700",handle:"bg-orange-500"},teal:{bg:"bg-teal-50",border:"border-teal-300",text:"text-teal-700",handle:"bg-teal-500"},indigo:{bg:"bg-indigo-50",border:"border-indigo-300",text:"text-indigo-700",handle:"bg-indigo-500"},cyan:{bg:"bg-cyan-50",border:"border-cyan-300",text:"text-cyan-700",handle:"bg-cyan-500"},red:{bg:"bg-red-50",border:"border-red-300",text:"text-red-700",handle:"bg-red-500"},pink:{bg:"bg-pink-50",border:"border-pink-300",text:"text-pink-700",handle:"bg-pink-500"}};function $k({data:e,type:r,selected:o}){const s=Hd(r??"");if(!s)return null;const a=Po[s.color]??Po.blue,l=e.validationIssues?.some(g=>g.severity==="error"),c=e.validationIssues?.some(g=>g.severity==="warning"),f=e.outputHandles??s.outputHandles??[],p=s.outputs===0,h=s.type==="inbound_number";return u.jsxs("div",{className:`rounded-lg border-2 shadow-sm min-w-[180px] max-w-[220px] ${a.bg} ${l?"border-red-500":c?"border-amber-500":o?"border-blue-500":a.border} transition-colors`,children:[!h&&u.jsx(Ro,{type:"target",position:je.Left,id:"incoming",className:"!w-3 !h-3 !bg-gray-400 !border-2 !border-white"}),u.jsxs("div",{className:`flex items-center gap-2 px-3 py-2 ${a.text}`,children:[u.jsx("svg",{className:"w-4 h-4 shrink-0",viewBox:"0 0 20 20",fill:"currentColor",children:u.jsx("path",{fillRule:"evenodd",d:s.iconPath,clipRule:"evenodd"})}),u.jsxs("div",{className:"min-w-0 flex-1",children:[u.jsx("div",{className:"text-[11px] font-semibold uppercase tracking-wider opacity-60",children:s.label}),u.jsx("div",{className:"text-sm font-medium truncate text-gray-900",children:e.label||"Untitled"})]})]}),!p&&f.length>0&&u.jsx("div",{className:"border-t border-gray-200/60 px-3 py-1.5 space-y-1",children:f.map(g=>u.jsxs("div",{className:"relative flex items-center justify-end pr-1",children:[u.jsx("span",{className:"text-[10px] text-gray-500 mr-1",children:g.label}),u.jsx(Ro,{type:"source",position:je.Right,id:g.id,className:`!w-2.5 !h-2.5 ${a.handle} !border-2 !border-white`,style:{top:"auto",position:"relative",transform:"none"}})]},g.id))}),!p&&f.length===0&&s.outputs!==0&&u.jsx(Ro,{type:"source",position:je.Right,id:"next",className:`!w-3 !h-3 ${a.handle} !border-2 !border-white`}),p&&u.jsx("div",{className:"border-t border-gray-200/60 px-3 py-1 text-center",children:u.jsx("span",{className:"text-[10px] text-gray-400 uppercase tracking-wider",children:"End"})}),l&&u.jsx("div",{className:"absolute -top-2 -right-2 w-5 h-5 rounded-full bg-red-500 flex items-center justify-center",children:u.jsx("span",{className:"text-white text-[10px] font-bold",children:"!"})}),!l&&c&&u.jsx("div",{className:"absolute -top-2 -right-2 w-5 h-5 rounded-full bg-amber-500 flex items-center justify-center",children:u.jsx("span",{className:"text-white text-[10px] font-bold",children:"!"})})]})}const zn=S.memo($k);function Fk({id:e,sourceX:r,sourceY:o,targetX:s,targetY:a,sourcePosition:l,targetPosition:c,data:f,selected:p}){const[h,g,y]=kl({sourceX:r,sourceY:o,targetX:s,targetY:a,sourcePosition:l,targetPosition:c,borderRadius:8}),x=f?.label;return u.jsxs(u.Fragment,{children:[u.jsx(Us,{id:e,path:h,style:{stroke:p?"#3b82f6":"#94a3b8",strokeWidth:p?2:1.5}}),x&&u.jsx(ak,{children:u.jsx("div",{className:"absolute bg-white border border-gray-200 rounded px-1.5 py-0.5 text-[10px] text-gray-600 font-medium shadow-sm pointer-events-none",style:{transform:`translate(-50%, -50%) translate(${g}px, ${y}px)`},children:x})})]})}const Ok=S.memo(Fk);function Hk(){function e(r,o){r.dataTransfer.setData("application/reactflow-type",o),r.dataTransfer.effectAllowed="move"}return u.jsxs("div",{className:"w-52 bg-white border-r border-gray-200 flex flex-col shrink-0",children:[u.jsx("div",{className:"px-3 py-2 border-b border-gray-200",children:u.jsx("h3",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Nodes"})}),u.jsx("div",{className:"flex-1 overflow-y-auto p-2 space-y-1",children:Dy.map(r=>{const o=Po[r.color]??Po.blue;return u.jsxs("div",{draggable:!0,onDragStart:s=>e(s,r.type),className:`flex items-center gap-2 px-2.5 py-2 rounded-md border ${o.border} ${o.bg} cursor-grab active:cursor-grabbing hover:shadow-sm transition-shadow select-none`,title:r.description,children:[u.jsx("svg",{className:`w-4 h-4 shrink-0 ${o.text}`,viewBox:"0 0 20 20",fill:"currentColor",children:u.jsx("path",{fillRule:"evenodd",d:r.iconPath,clipRule:"evenodd"})}),u.jsx("span",{className:"text-sm font-medium text-gray-700",children:r.label})]},r.type)})})]})}function Vd(e){return As("/extensions",e)}function Vk(e){return Sn("/extensions",e)}function Bk(e,r){return rr(`/extensions/${e}`,r)}function Uk(e){return or(`/extensions/${e}`)}function Ly(e){return As("/trunks",e)}function Wk(e){return Sn("/trunks",e)}function Yk(e,r){return rr(`/trunks/${e}`,r)}function Xk(e){return or(`/trunks/${e}`)}function Gk(){return Nn("/trunks/status")}function zy(e){return As("/voicemail-boxes",e)}function Kk(e){return Sn("/voicemail-boxes",e)}function Zk(e,r){return rr(`/voicemail-boxes/${e}`,r)}function Qk(e){return or(`/voicemail-boxes/${e}`)}function qk(e){return Nn(`/voicemail-boxes/${e}/messages`)}function Jk(e,r){return or(`/voicemail-boxes/${e}/messages/${r}`)}function ej(e,r){return rr(`/voicemail-boxes/${e}/messages/${r}/read`)}function r0(e,r){return`/api/v1/voicemail-boxes/${e}/messages/${r}/audio`}function Iy(e){return As("/numbers",e)}function tj(e){return Sn("/numbers",e)}function nj(e,r){return rr(`/numbers/${e}`,r)}function rj(e){return or(`/numbers/${e}`)}function oj(e){return As("/cdrs",e)}function ij(e){const r=new URL("/api/v1/cdrs/export",window.location.origin);if(e)for(const[o,s]of Object.entries(e))s!==void 0&&s!==""&&r.searchParams.set(o,String(s));return r.toString()}function Ay(){return Nn("/prompts")}async function $y(e,r){const o=new FormData;o.append("file",e);const s=document.cookie.split("; ").find(p=>p.startsWith("flowpbx_csrf=")),a=s?s.split("=")[1]:null,l={Accept:"application/json"};a&&(l["X-CSRF-Token"]=a);const c=await fetch("/api/v1/prompts",{method:"POST",headers:l,credentials:"same-origin",body:o});if(c.status===401)throw window.location.href="/login",new Error("authentication required");const f=await c.json();if(!c.ok||f.error)throw new Error(f.error??`upload failed with status ${c.status}`);return f.data}function sj(e){return or(`/prompts/${e}`)}function Fy(e){return`/api/v1/prompts/${e}/audio`}function aj(){return Nn("/settings")}function lj(e){return rr("/settings",e)}function uj(){return Nn("/flows")}function cj(e){return Nn(`/flows/${e}`)}function dj(e){return Sn("/flows",e)}function fj(e,r){return rr(`/flows/${e}`,r)}function hj(e){return or(`/flows/${e}`)}function pj(e){return Sn(`/flows/${e}/publish`)}function mj(e){return Sn(`/flows/${e}/validate`)}function Oy(){return Nn("/ring-groups")}function gj(e){return Sn("/ring-groups",e)}function yj(e,r){return rr(`/ring-groups/${e}`,r)}function xj(e){return or(`/ring-groups/${e}`)}function vj(){return Nn("/ivr-menus")}function wj(e){return Sn("/ivr-menus",e)}function bj(e,r){return rr(`/ivr-menus/${e}`,r)}function _j(e){return or(`/ivr-menus/${e}`)}function Nj(){return Nn("/time-switches")}function Sj(e){return Sn("/time-switches",e)}function Ej(e,r){return rr(`/time-switches/${e}`,r)}function Cj(e){return or(`/time-switches/${e}`)}const kj={extension:"Extension",voicemail_box:"Voicemail Box",inbound_number:"Inbound Number",ring_group:"Ring Group",ivr_menu:"IVR Menu",time_switch:"Time Switch",conference:"Conference"};function jj({entityType:e,selectedId:r,onSelect:o,onCreateNew:s}){const[a,l]=S.useState([]),[c,f]=S.useState(!1),[p,h]=S.useState(!1),[g,y]=S.useState(""),x=S.useRef(null);S.useEffect(()=>{w()},[e]),S.useEffect(()=>{function _(R){x.current&&!x.current.contains(R.target)&&h(!1)}return document.addEventListener("mousedown",_),()=>document.removeEventListener("mousedown",_)},[]);async function w(){f(!0);try{const _=await Rj(e);l(_)}catch{l([])}finally{f(!1)}}const N=a.find(_=>_.id===r),C=a.filter(_=>_.label.toLowerCase().includes(g.toLowerCase())||_.sublabel?.toLowerCase().includes(g.toLowerCase())),E=kj[e]??e;return u.jsxs("div",{ref:x,className:"relative",children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:E}),u.jsxs("button",{type:"button",onClick:()=>h(!p),className:"w-full flex items-center justify-between rounded-md border border-gray-300 bg-white px-3 py-2 text-sm text-left focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500",children:[u.jsx("span",{className:N?"text-gray-900":"text-gray-400",children:c?"Loading...":N?N.label:`Select ${E}...`}),u.jsx("svg",{className:"w-4 h-4 text-gray-400",viewBox:"0 0 20 20",fill:"currentColor",children:u.jsx("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})})]}),p&&u.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg max-h-60 flex flex-col",children:[u.jsx("div",{className:"p-2 border-b border-gray-100",children:u.jsx("input",{type:"text",value:g,onChange:_=>y(_.target.value),placeholder:"Search...",className:"w-full text-sm rounded border border-gray-200 px-2 py-1 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500",autoFocus:!0})}),s&&u.jsxs("button",{type:"button",onClick:()=>{s(),h(!1)},className:"flex items-center gap-2 px-3 py-2 text-sm text-blue-600 hover:bg-blue-50 border-b border-gray-100",children:[u.jsx("svg",{className:"w-4 h-4",viewBox:"0 0 20 20",fill:"currentColor",children:u.jsx("path",{fillRule:"evenodd",d:"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z",clipRule:"evenodd"})}),"New ",E,"..."]}),u.jsxs("div",{className:"flex-1 overflow-y-auto",children:[u.jsx("button",{type:"button",onClick:()=>{o(null),h(!1)},className:"w-full text-left px-3 py-2 text-sm text-gray-400 hover:bg-gray-50",children:"None"}),C.map(_=>u.jsxs("button",{type:"button",onClick:()=>{o(_.id),h(!1),y("")},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${_.id===r?"bg-blue-50 text-blue-700":"text-gray-900"}`,children:[u.jsx("div",{className:"font-medium",children:_.label}),_.sublabel&&u.jsx("div",{className:"text-xs text-gray-500",children:_.sublabel})]},_.id)),C.length===0&&!c&&u.jsx("div",{className:"px-3 py-2 text-sm text-gray-400",children:"No results"})]})]})]})}async function Rj(e){switch(e){case"extension":return(await Vd({limit:200})).items.map(o=>({id:o.id,label:`${o.extension} - ${o.name}`,sublabel:o.email||void 0}));case"voicemail_box":return(await zy({limit:200})).items.map(o=>({id:o.id,label:`${o.mailbox_number} - ${o.name}`,sublabel:o.email_address||void 0}));case"inbound_number":return(await Iy({limit:200})).items.map(o=>({id:o.id,label:o.number,sublabel:o.name||void 0}));case"ring_group":return(await Oy()).map(o=>({id:o.id,label:o.name,sublabel:o.strategy}));case"ivr_menu":case"time_switch":case"conference":return[];default:return[]}}const Bd="block w-full rounded-md border border-gray-300 px-3 py-2 text-sm text-gray-900 placeholder-gray-400 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500",Ud="block text-sm font-medium text-gray-700 mb-1";function Ae({label:e,id:r,...o}){return u.jsxs("div",{children:[u.jsx("label",{htmlFor:r,className:Ud,children:e}),u.jsx("input",{id:r,className:Bd,...o})]})}function Ft({label:e,id:r,...o}){return u.jsxs("div",{children:[u.jsx("label",{htmlFor:r,className:Ud,children:e}),u.jsx("input",{id:r,type:"number",className:Bd,...o})]})}function Cr({label:e,id:r,children:o,...s}){return u.jsxs("div",{children:[u.jsx("label",{htmlFor:r,className:Ud,children:e}),u.jsx("select",{id:r,className:Bd,...s,children:o})]})}function Ci({label:e,checked:r,onChange:o}){return u.jsxs("label",{className:"flex items-center gap-2 text-sm text-gray-700 cursor-pointer",children:[u.jsx("button",{type:"button",role:"switch","aria-checked":r,onClick:()=>o(!r),className:`relative inline-flex h-5 w-9 shrink-0 rounded-full border-2 border-transparent transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 ${r?"bg-blue-600":"bg-gray-200"}`,children:u.jsx("span",{className:`pointer-events-none inline-block h-4 w-4 rounded-full bg-white shadow transform transition-transform ${r?"translate-x-4":"translate-x-0"}`})}),e]})}function Pj({node:e,onUpdate:r,onClose:o}){const s=Hd(e.type??""),a=s?Po[s.color]??Po.blue:Po.blue,l=e.data,[c,f]=S.useState(l.label??"");S.useEffect(()=>{f(e.data.label??"")},[e.id,e.data]);function p(w){f(w),r(e.id,{label:w})}function h(w){r(e.id,{entity_id:w})}function g(w,N){r(e.id,{config:{...l.config,[w]:N}})}function y(w,N){const C=l.outputHandles??[];C.some(E=>E.id===w)||r(e.id,{outputHandles:[...C,{id:w,label:N}]})}function x(w){const N=l.outputHandles??[];r(e.id,{outputHandles:N.filter(C=>C.id!==w)})}return u.jsxs("div",{className:"w-80 bg-white border-l border-gray-200 flex flex-col shrink-0",children:[u.jsxs("div",{className:`flex items-center justify-between px-4 py-3 border-b border-gray-200 ${a.bg}`,children:[u.jsxs("div",{className:"flex items-center gap-2",children:[s&&u.jsx("svg",{className:`w-4 h-4 ${a.text}`,viewBox:"0 0 20 20",fill:"currentColor",children:u.jsx("path",{fillRule:"evenodd",d:s.iconPath,clipRule:"evenodd"})}),u.jsx("h3",{className:"text-sm font-semibold text-gray-900",children:s?.label??"Node"})]}),u.jsx("button",{type:"button",onClick:o,className:"text-gray-400 hover:text-gray-600 transition-colors",children:u.jsx("svg",{className:"w-5 h-5",viewBox:"0 0 20 20",fill:"currentColor",children:u.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),u.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[u.jsx(Ae,{label:"Label",id:"node-label",value:c,onChange:w=>p(w.currentTarget.value),placeholder:"Enter label..."}),s?.entityType&&u.jsx(jj,{entityType:s.entityType,selectedId:l.entity_id??null,onSelect:h}),e.type==="transfer"&&u.jsx(Ae,{label:"Transfer To",id:"transfer-to",value:l.config?.transfer_to??"",onChange:w=>g("transfer_to",w.currentTarget.value),placeholder:"Number or extension"}),e.type==="hangup"&&u.jsx(Ae,{label:"Cause Code",id:"hangup-cause",value:l.config?.cause_code??"",onChange:w=>g("cause_code",w.currentTarget.value),placeholder:"Normal (default)"}),e.type==="set_caller_id"&&u.jsxs(u.Fragment,{children:[u.jsx(Ae,{label:"Caller ID Name",id:"cid-name",value:l.config?.caller_id_name??"",onChange:w=>g("caller_id_name",w.currentTarget.value),placeholder:"Display name"}),u.jsx(Ae,{label:"Caller ID Number",id:"cid-number",value:l.config?.caller_id_num??"",onChange:w=>g("caller_id_num",w.currentTarget.value),placeholder:"Number"})]}),e.type==="play_message"&&u.jsx(Ae,{label:"Audio Prompt",id:"prompt-file",value:l.config?.prompt??"",onChange:w=>g("prompt",w.currentTarget.value),placeholder:"Prompt filename"}),e.type==="time_switch"&&u.jsx(o0,{handles:l.outputHandles??[{id:"default",label:"Default"}],onAdd:y,onRemove:x,addLabel:"Add Time Rule",idPrefix:"rule_"}),e.type==="ivr_menu"&&u.jsx(o0,{handles:l.outputHandles??[{id:"timeout",label:"Timeout"},{id:"invalid",label:"Invalid"}],onAdd:y,onRemove:x,addLabel:"Add Digit",idPrefix:"digit_",protectedIds:["timeout","invalid"]}),l.validationIssues&&l.validationIssues.length>0&&u.jsxs("div",{className:"space-y-1",children:[u.jsx("p",{className:"text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Issues"}),l.validationIssues.map((w,N)=>u.jsx("div",{className:`text-xs px-2 py-1 rounded ${w.severity==="error"?"bg-red-50 text-red-700":"bg-amber-50 text-amber-700"}`,children:w.message},N))]})]})]})}function o0({handles:e,onAdd:r,onRemove:o,addLabel:s,idPrefix:a,protectedIds:l=[]}){const[c,f]=S.useState("");function p(){if(!c.trim())return;const h=a+c.trim().toLowerCase().replace(/[^a-z0-9]/g,"_");r(h,c.trim()),f("")}return u.jsxs("div",{className:"space-y-2",children:[u.jsx("p",{className:"text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Outputs"}),u.jsx("div",{className:"space-y-1",children:e.map(h=>u.jsxs("div",{className:"flex items-center justify-between text-sm",children:[u.jsx("span",{className:"text-gray-700",children:h.label}),!l.includes(h.id)&&u.jsx("button",{type:"button",onClick:()=>o(h.id),className:"text-xs text-red-500 hover:text-red-700",children:"Remove"})]},h.id))}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("input",{type:"text",value:c,onChange:h=>f(h.target.value),onKeyDown:h=>h.key==="Enter"&&p(),placeholder:"Label...",className:"flex-1 text-sm rounded border border-gray-300 px-2 py-1 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500"}),u.jsx("button",{type:"button",onClick:p,className:"text-xs text-blue-600 hover:text-blue-800 font-medium whitespace-nowrap",children:s})]})]})}const Mj={inbound_number:zn,time_switch:zn,ivr_menu:zn,ring_group:zn,extension:zn,voicemail:zn,play_message:zn,conference:zn,transfer:zn,hangup:zn,set_caller_id:zn},Tj={flow:Ok},Dj={type:"flow",animated:!1};let Lj=0;function zj(){return`node_${Date.now()}_${++Lj}`}function Ij({initialNodes:e,initialEdges:r,onChange:o,validationIssues:s}){const a=S.useRef(null),[l,c]=S.useState(null),[f,p,h]=lk(e),[g,y,x]=uk(r),[w,N]=S.useState(null),C=S.useCallback((O,G)=>{o?.(O,G)},[o]),E=S.useCallback(O=>{const G=f.find(H=>H.id===O.source);let D="";if(G){const W=G.data.outputHandles?.find(M=>M.id===O.sourceHandle);W&&W.id!=="next"&&(D=W.label)}const F={...O,type:"flow",data:{label:D}};y(H=>{const W=Fg(F,H);return C(f,W),W})},[f,y,C]),_=S.useCallback(O=>{h(O),queueMicrotask(()=>{p(G=>(C(G,g),G))})},[h,p,g,C]),R=S.useCallback(O=>{x(O),queueMicrotask(()=>{y(G=>(C(f,G),G))})},[x,y,f,C]),b=S.useCallback(({nodes:O})=>{O.length===1?N(O[0]):N(null)},[]),j=S.useCallback((O,G)=>{p(D=>{const F=D.map(H=>{if(H.id===O){const W=H.data,M={...W,...G};G.config&&W.config&&(M.config={...W.config,...G.config});const z={...H,data:M};return N(z),z}return H});return C(F,g),F})},[p,g,C]),A=S.useCallback(O=>{O.preventDefault(),O.dataTransfer.dropEffect="move"},[]),T=S.useCallback(O=>{O.preventDefault();const G=O.dataTransfer.getData("application/reactflow-type");if(!G||!l||!a.current)return;const D=Hd(G);if(!D)return;const F=a.current.getBoundingClientRect(),H=l.screenToFlowPosition({x:O.clientX-F.left,y:O.clientY-F.top});let W;G==="time_switch"?W=[{id:"default",label:"Default"}]:G==="ivr_menu"&&(W=[{id:"timeout",label:"Timeout"},{id:"invalid",label:"Invalid"}]);const M={label:D.label,entity_type:D.entityType,outputHandles:W},z={id:zj(),type:G,position:H,data:M};p(Y=>{const Q=[...Y,z];return C(Q,g),Q}),N(z)},[l,p,g,C]),P=s?f.map(O=>({...O,data:{...O.data,validationIssues:s[O.id]}})):f;return u.jsxs("div",{className:"flex flex-1 h-full",children:[u.jsx(Hk,{}),u.jsx("div",{ref:a,className:"flex-1 h-full",children:u.jsxs(ik,{nodes:P,edges:g,onNodesChange:_,onEdgesChange:R,onConnect:E,onInit:c,onDrop:T,onDragOver:A,onSelectionChange:b,nodeTypes:Mj,edgeTypes:Tj,defaultEdgeOptions:Dj,fitView:!0,deleteKeyCode:"Delete",multiSelectionKeyCode:"Shift",snapToGrid:!0,snapGrid:[16,16],children:[u.jsx(pk,{variant:Sr.Dots,gap:16,size:1,color:"#e5e7eb"}),u.jsx(bk,{}),u.jsx(Lk,{nodeStrokeWidth:3,zoomable:!0,pannable:!0,className:"!bg-gray-50 !border-gray-200"})]})}),w&&u.jsx(Pj,{node:w,onUpdate:j,onClose:()=>N(null)})]})}function Aj(e,r){return JSON.stringify({nodes:e.map(o=>{const s=o.data;return{id:o.id,type:o.type,position:o.position,data:{label:s.label,entity_id:s.entity_id??void 0,entity_type:s.entity_type??void 0,config:s.config??void 0,outputHandles:s.outputHandles??void 0}}}),edges:r.map(o=>({id:o.id,source:o.source,target:o.target,sourceHandle:o.sourceHandle,targetHandle:o.targetHandle,label:o.data?.label??void 0}))})}function i0(e){try{const r=JSON.parse(e),o=(r.nodes??[]).map(a=>{const l=a.data,c={label:l?.label??"",entity_id:l?.entity_id,entity_type:l?.entity_type,config:l?.config,outputHandles:l?.outputHandles};return{id:a.id,type:a.type,position:a.position,data:c}}),s=(r.edges??[]).map(a=>({id:a.id,source:a.source,target:a.target,sourceHandle:a.sourceHandle,targetHandle:a.targetHandle,type:"flow",data:{label:a.label??""}}));return{nodes:o,edges:s}}catch{return{nodes:[],edges:[]}}}function $j(){const[e,r]=S.useState("list"),[o,s]=S.useState([]),[a,l]=S.useState(!0),[c,f]=S.useState(null),[p,h]=S.useState(""),[g,y]=S.useState(!1),[x,w]=S.useState(!1),[N,C]=S.useState(!1),[E,_]=S.useState(""),[R,b]=S.useState(""),[j,A]=S.useState({}),[T,P]=S.useState(null),O=S.useRef([]),G=S.useRef([]),D=S.useRef(null);function F(){l(!0),uj().then(U=>s(U)).catch(()=>s([])).finally(()=>l(!1))}S.useEffect(()=>{F()},[]);async function H(U){try{const L=await cj(U.id);f(L),h(L.name);const{nodes:B,edges:oe}=i0(L.flow_data);O.current=B,G.current=oe,A({}),P(null),_(""),b(""),r("editor")}catch(L){_(L instanceof qe?L.message:"failed to load flow")}}async function W(){_("");try{const U=await dj({name:"New Flow"});await H(U)}catch(U){_(U instanceof qe?U.message:"failed to create flow")}}async function M(U){if(confirm(`Delete flow "${U.name}"? This cannot be undone.`))try{await hj(U.id),F()}catch(L){alert(L instanceof qe?L.message:"failed to delete flow")}}const z=S.useCallback(async(U=!1)=>{if(c){y(!0),_("");try{const L=Aj(O.current,G.current),B=await fj(c.id,{name:p||c.name,flow_data:L});f(B),U||b("Flow saved"),U||setTimeout(()=>b(""),2e3)}catch(L){_(L instanceof qe?L.message:"failed to save flow")}finally{y(!1)}}},[c,p]),Y=S.useCallback((U,L)=>{O.current=U,G.current=L,D.current&&clearTimeout(D.current),D.current=setTimeout(()=>z(!0),2e3)},[z]);async function Q(){if(c){await z(),w(!0),_("");try{const U=await pj(c.id);f(U),b("Flow published successfully"),setTimeout(()=>b(""),3e3)}catch(U){_(U instanceof qe?U.message:"failed to publish flow")}finally{w(!1)}}}async function I(){if(c){await z(),C(!0),_("");try{const U=await mj(c.id);P(U);const L={};for(const B of U.issues)B.node_id&&(L[B.node_id]||(L[B.node_id]=[]),L[B.node_id].push({severity:B.severity,message:B.message}));A(L),U.valid&&(b("Flow is valid"),setTimeout(()=>b(""),2e3))}catch(U){_(U instanceof qe?U.message:"failed to validate flow")}finally{C(!1)}}}function K(){D.current&&clearTimeout(D.current),z(!0),r("list"),f(null),F()}if(e==="editor"&&c){const{nodes:U,edges:L}=i0(c.flow_data);return u.jsxs("div",{className:"flex flex-col h-[calc(100vh-theme(spacing.14)-theme(spacing.12))]",children:[u.jsxs("div",{className:"flex items-center justify-between px-4 py-2 bg-white border-b border-gray-200 shrink-0",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsxs("button",{type:"button",onClick:K,className:"text-sm text-gray-500 hover:text-gray-700 flex items-center gap-1",children:[u.jsx("svg",{className:"w-4 h-4",viewBox:"0 0 20 20",fill:"currentColor",children:u.jsx("path",{fillRule:"evenodd",d:"M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z",clipRule:"evenodd"})}),"Back"]}),u.jsx("input",{type:"text",value:p,onChange:B=>h(B.target.value),onBlur:()=>z(!0),className:"text-lg font-semibold text-gray-900 bg-transparent border-none focus:outline-none focus:ring-0 p-0",placeholder:"Flow name..."}),c.published&&u.jsxs("span",{className:"inline-flex items-center rounded-full bg-green-50 px-2 py-0.5 text-xs font-medium text-green-700",children:["Published v",c.version]}),g&&u.jsx("span",{className:"text-xs text-gray-400",children:"Saving..."})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[E&&u.jsx("span",{className:"text-xs text-red-600",children:E}),R&&u.jsx("span",{className:"text-xs text-green-600",children:R}),u.jsx("button",{type:"button",onClick:()=>z(),disabled:g,className:"rounded-md border border-gray-300 bg-white px-3 py-1.5 text-sm font-medium text-gray-700 hover:bg-gray-50 disabled:opacity-50 transition-colors",children:"Save"}),u.jsx("button",{type:"button",onClick:I,disabled:N,className:"rounded-md border border-gray-300 bg-white px-3 py-1.5 text-sm font-medium text-gray-700 hover:bg-gray-50 disabled:opacity-50 transition-colors",children:N?"Validating...":"Validate"}),u.jsx("button",{type:"button",onClick:Q,disabled:x,className:"rounded-md bg-blue-600 px-3 py-1.5 text-sm font-medium text-white hover:bg-blue-700 disabled:opacity-50 transition-colors",children:x?"Publishing...":"Publish"})]})]}),T&&!T.valid&&u.jsxs("div",{className:"bg-red-50 border-b border-red-200 px-4 py-2 flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("svg",{className:"w-4 h-4 text-red-500",viewBox:"0 0 20 20",fill:"currentColor",children:u.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),u.jsxs("span",{className:"text-sm text-red-700",children:[T.issues.length," issue",T.issues.length!==1?"s":""," found"]})]}),u.jsx("button",{type:"button",onClick:()=>{P(null),A({})},className:"text-xs text-red-500 hover:text-red-700",children:"Dismiss"})]}),u.jsx(Ij,{initialNodes:U,initialEdges:L,onChange:Y,validationIssues:Object.keys(j).length>0?j:void 0})]})}return u.jsxs("div",{children:[u.jsxs("div",{className:"flex items-center justify-between mb-6",children:[u.jsxs("div",{children:[u.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Call Flows"}),u.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Visual call flow editor. Create and manage call routing logic."})]}),u.jsx("button",{type:"button",onClick:W,className:"rounded-md bg-blue-600 px-4 py-2 text-sm font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors",children:"New Flow"})]}),E&&u.jsx("div",{className:"rounded-md bg-red-50 border border-red-200 px-3 py-2 mb-4",children:u.jsx("p",{className:"text-sm text-red-700",children:E})}),a?u.jsx("p",{className:"text-sm text-gray-400",children:"Loading..."}):o.length===0?u.jsxs("div",{className:"text-center py-12",children:[u.jsx("svg",{className:"mx-auto w-12 h-12 text-gray-300",viewBox:"0 0 20 20",fill:"currentColor",children:u.jsx("path",{fillRule:"evenodd",d:"M6 2a2 2 0 00-2 2v1a2 2 0 002 2h1v2H5a2 2 0 00-2 2v1a2 2 0 002 2h1v2a2 2 0 002 2h4a2 2 0 002-2v-2h1a2 2 0 002-2v-1a2 2 0 00-2-2h-2V7h1a2 2 0 002-2V4a2 2 0 00-2-2H6zm0 2h8v1H6V4zm-1 7h10v1H5v-1zm3 5h4v1H8v-1z",clipRule:"evenodd"})}),u.jsx("h3",{className:"mt-4 text-sm font-medium text-gray-900",children:"No call flows"}),u.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Get started by creating your first call flow."}),u.jsx("button",{type:"button",onClick:W,className:"mt-4 rounded-md bg-blue-600 px-4 py-2 text-sm font-medium text-white hover:bg-blue-700 transition-colors",children:"New Flow"})]}):u.jsx("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3",children:o.map(U=>u.jsxs("div",{onClick:()=>H(U),className:"bg-white rounded-lg border border-gray-200 p-4 hover:border-blue-300 hover:shadow-sm cursor-pointer transition-all",children:[u.jsxs("div",{className:"flex items-start justify-between",children:[u.jsxs("div",{className:"min-w-0 flex-1",children:[u.jsx("h3",{className:"text-sm font-semibold text-gray-900 truncate",children:U.name}),u.jsxs("p",{className:"mt-1 text-xs text-gray-500",children:["Version ",U.version,U.published_at&&`  Published ${new Date(U.published_at).toLocaleDateString()}`]})]}),u.jsx("div",{className:"flex items-center gap-2 ml-2",children:U.published?u.jsx("span",{className:"inline-flex items-center rounded-full bg-green-50 px-2 py-0.5 text-xs font-medium text-green-700",children:"Live"}):u.jsx("span",{className:"inline-flex items-center rounded-full bg-gray-100 px-2 py-0.5 text-xs font-medium text-gray-500",children:"Draft"})})]}),u.jsxs("div",{className:"mt-3 flex items-center justify-between",children:[u.jsxs("span",{className:"text-xs text-gray-400",children:["Updated ",new Date(U.updated_at).toLocaleDateString()]}),u.jsx("button",{type:"button",onClick:L=>{L.stopPropagation(),M(U)},className:"text-xs text-red-500 hover:text-red-700",children:"Delete"})]})]},U.id))})]})}function sr({columns:e,rows:r,keyFn:o,total:s,limit:a,offset:l,onPageChange:c,onRowClick:f,emptyMessage:p="No records found."}){const h=Math.floor(l/a)+1,g=Math.max(1,Math.ceil(s/a)),y=l>0,x=l+a<s;return u.jsxs("div",{children:[u.jsx("div",{className:"overflow-x-auto border border-gray-200 rounded-lg",children:u.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[u.jsx("thead",{className:"bg-gray-50",children:u.jsx("tr",{children:e.map(w=>u.jsx("th",{className:`px-4 py-2.5 text-left text-xs font-medium text-gray-500 uppercase tracking-wider ${w.className??""}`,children:w.header},w.key))})}),u.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:r.length===0?u.jsx("tr",{children:u.jsx("td",{colSpan:e.length,className:"px-4 py-8 text-center text-sm text-gray-400",children:p})}):r.map(w=>u.jsx("tr",{onClick:f?()=>f(w):void 0,className:f?"cursor-pointer hover:bg-gray-50":"",children:e.map(N=>u.jsx("td",{className:`px-4 py-2.5 text-sm text-gray-900 ${N.className??""}`,children:N.render(w)},N.key))},o(w)))})]})}),s>0&&u.jsxs("div",{className:"flex items-center justify-between mt-3",children:[u.jsxs("p",{className:"text-sm text-gray-500",children:["Showing ",l+1,"",Math.min(l+a,s)," of ",s]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("button",{type:"button",disabled:!y,onClick:()=>c(Math.max(0,l-a)),className:"rounded-md border border-gray-300 bg-white px-3 py-1.5 text-sm font-medium text-gray-700 hover:bg-gray-50 disabled:opacity-30 disabled:cursor-not-allowed transition-colors",children:"Previous"}),u.jsxs("span",{className:"text-sm text-gray-500",children:["Page ",h," of ",g]}),u.jsx("button",{type:"button",disabled:!x,onClick:()=>c(l+a),className:"rounded-md border border-gray-300 bg-white px-3 py-1.5 text-sm font-medium text-gray-700 hover:bg-gray-50 disabled:opacity-30 disabled:cursor-not-allowed transition-colors",children:"Next"})]})]})]})}const s0=20;function Fj(){const[e,r]=S.useState([]),[o,s]=S.useState(0),[a,l]=S.useState(0),[c,f]=S.useState(!0),[p,h]=S.useState(null),[g,y]=S.useState(!1),[x,w]=S.useState(""),[N,C]=S.useState(!1),[E,_]=S.useState({}),R=S.useRef(null),[b,j]=S.useState(A());function A(){return{name:"",type:"register",enabled:!0,host:"",port:5060,transport:"udp",username:"",password:"",auth_username:"",register_expiry:300,remote_hosts:"",local_host:"",codecs:"",max_channels:0,caller_id_name:"",caller_id_num:"",prefix_strip:0,prefix_add:"",priority:10}}const T=S.useCallback(()=>{Gk().then(M=>{const z={};for(const Y of M)z[Y.trunk_id]=Y;_(z)}).catch(()=>{})},[]);function P(M){f(!0),Ly({limit:s0,offset:M}).then(z=>{r(z.items),s(z.total),l(M)}).catch(()=>{r([]),s(0)}).finally(()=>f(!1))}S.useEffect(()=>(P(0),T(),R.current=setInterval(T,1e4),()=>{R.current&&clearInterval(R.current)}),[T]);function O(){j(A()),h(null),y(!0),w("")}function G(M){j({name:M.name,type:M.type,enabled:M.enabled,host:M.host,port:M.port,transport:M.transport,username:M.username,password:"",auth_username:M.auth_username,register_expiry:M.register_expiry,remote_hosts:M.remote_hosts,local_host:M.local_host,codecs:M.codecs,max_channels:M.max_channels,caller_id_name:M.caller_id_name,caller_id_num:M.caller_id_num,prefix_strip:M.prefix_strip,prefix_add:M.prefix_add,priority:M.priority}),h(M),y(!0),w("")}function D(){y(!1),h(null),w("")}async function F(M){M.preventDefault(),w(""),C(!0);try{p?await Yk(p.id,b):await Wk(b),D(),P(p?a:0)}catch(z){w(z instanceof qe?z.message:"unable to save trunk")}finally{C(!1)}}async function H(M){if(confirm(`Delete trunk "${M.name}"?`))try{await Xk(M.id),P(a)}catch(z){alert(z instanceof qe?z.message:"unable to delete trunk")}}const W=[{key:"name",header:"Name",render:M=>M.name},{key:"type",header:"Type",render:M=>M.type==="register"?"Registration":"IP Auth"},{key:"host",header:"Host",render:M=>M.type==="register"?`${M.host}:${M.port}`:M.remote_hosts||""},{key:"transport",header:"Transport",render:M=>(M.transport||"udp").toUpperCase()},{key:"enabled",header:"Status",render:M=>{if(!M.enabled)return u.jsxs("div",{className:"flex items-center gap-1.5",children:[u.jsx("span",{className:"inline-block w-2 h-2 rounded-full bg-gray-300"}),u.jsx("span",{className:"text-sm text-gray-500",children:"Disabled"})]});const z=E[M.id],Y=z?.status??"unknown",Q={registered:{dot:"bg-green-500",text:"text-green-700",label:"Registered"},registering:{dot:"bg-yellow-400",text:"text-yellow-700",label:"Registering"},failed:{dot:"bg-red-500",text:"text-red-700",label:"Failed"},unregistered:{dot:"bg-gray-400",text:"text-gray-600",label:"Unregistered"},unknown:{dot:"bg-gray-400",text:"text-gray-600",label:"Unknown"}};if(M.type==="ip"&&z){const K=z.options_healthy?{dot:"bg-green-500",text:"text-green-700",label:"Healthy"}:{dot:"bg-gray-400",text:"text-gray-600",label:"IP Auth"};return u.jsxs("div",{className:"flex items-center gap-1.5",children:[u.jsx("span",{className:`inline-block w-2 h-2 rounded-full ${K.dot}`}),u.jsx("span",{className:`text-sm ${K.text}`,children:K.label})]})}const I=Q[Y]??Q.unknown;return u.jsxs("div",{className:"flex items-center gap-1.5",title:z?.last_error||void 0,children:[u.jsx("span",{className:`inline-block w-2 h-2 rounded-full ${I.dot}`}),u.jsx("span",{className:`text-sm ${I.text}`,children:I.label})]})}},{key:"actions",header:"",className:"w-24",render:M=>u.jsxs("div",{className:"flex gap-2",children:[u.jsx("button",{type:"button",onClick:z=>{z.stopPropagation(),G(M)},className:"text-sm text-blue-600 hover:text-blue-800",children:"Edit"}),u.jsx("button",{type:"button",onClick:z=>{z.stopPropagation(),H(M)},className:"text-sm text-red-600 hover:text-red-800",children:"Delete"})]})}];if(g){const M=b.type==="register";return u.jsxs("div",{children:[u.jsxs("div",{className:"flex items-center justify-between mb-6",children:[u.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:p?"Edit Trunk":"New Trunk"}),u.jsx("button",{type:"button",onClick:D,className:"text-sm text-gray-500 hover:text-gray-700",children:"Cancel"})]}),u.jsxs("form",{onSubmit:F,className:"max-w-lg space-y-4",children:[x&&u.jsx("div",{className:"rounded-md bg-red-50 border border-red-200 px-3 py-2",children:u.jsx("p",{className:"text-sm text-red-700",children:x})}),u.jsx(Ae,{label:"Trunk Name",id:"trunk_name",required:!0,value:b.name,onChange:z=>j({...b,name:z.currentTarget.value}),placeholder:"My SIP Provider"}),u.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.jsxs(Cr,{label:"Type",id:"trunk_type",value:b.type,onChange:z=>j({...b,type:z.currentTarget.value}),children:[u.jsx("option",{value:"register",children:"Registration"}),u.jsx("option",{value:"ip",children:"IP Auth"})]}),u.jsxs(Cr,{label:"Transport",id:"trunk_transport",value:b.transport??"udp",onChange:z=>j({...b,transport:z.currentTarget.value}),children:[u.jsx("option",{value:"udp",children:"UDP"}),u.jsx("option",{value:"tcp",children:"TCP"}),u.jsx("option",{value:"tls",children:"TLS"})]})]}),M?u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.jsx(Ae,{label:"Host",id:"trunk_host",required:!0,value:b.host??"",onChange:z=>j({...b,host:z.currentTarget.value}),placeholder:"sip.provider.com"}),u.jsx(Ft,{label:"Port",id:"trunk_port",min:1,max:65535,value:b.port??5060,onChange:z=>j({...b,port:Number(z.currentTarget.value)})})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.jsx(Ae,{label:"Username",id:"trunk_username",value:b.username??"",onChange:z=>j({...b,username:z.currentTarget.value}),autoComplete:"off"}),u.jsx(Ae,{label:p?"Password (leave blank to keep)":"Password",id:"trunk_password",type:"password",value:b.password??"",onChange:z=>j({...b,password:z.currentTarget.value}),autoComplete:"off"})]}),u.jsx(Ae,{label:"Auth Username (if different)",id:"trunk_auth_username",value:b.auth_username??"",onChange:z=>j({...b,auth_username:z.currentTarget.value}),autoComplete:"off"}),u.jsx(Ft,{label:"Register Expiry (s)",id:"trunk_expiry",min:60,max:3600,value:b.register_expiry??300,onChange:z=>j({...b,register_expiry:Number(z.currentTarget.value)})})]}):u.jsxs(u.Fragment,{children:[u.jsx(Ae,{label:"Remote Hosts (comma-separated IPs/CIDRs)",id:"trunk_remote_hosts",value:b.remote_hosts??"",onChange:z=>j({...b,remote_hosts:z.currentTarget.value}),placeholder:"203.0.113.10, 198.51.100.0/24"}),u.jsx(Ae,{label:"Local Bind Address (optional)",id:"trunk_local_host",value:b.local_host??"",onChange:z=>j({...b,local_host:z.currentTarget.value})})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.jsx(Ae,{label:"Caller ID Name",id:"trunk_cid_name",value:b.caller_id_name??"",onChange:z=>j({...b,caller_id_name:z.currentTarget.value})}),u.jsx(Ae,{label:"Caller ID Number",id:"trunk_cid_num",value:b.caller_id_num??"",onChange:z=>j({...b,caller_id_num:z.currentTarget.value})})]}),u.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[u.jsx(Ft,{label:"Max Channels",id:"trunk_max_channels",min:0,value:b.max_channels??0,onChange:z=>j({...b,max_channels:Number(z.currentTarget.value)})}),u.jsx(Ft,{label:"Priority",id:"trunk_priority",min:1,max:100,value:b.priority??10,onChange:z=>j({...b,priority:Number(z.currentTarget.value)})}),u.jsx(Ft,{label:"Prefix Strip",id:"trunk_prefix_strip",min:0,max:10,value:b.prefix_strip??0,onChange:z=>j({...b,prefix_strip:Number(z.currentTarget.value)})})]}),u.jsx(Ae,{label:"Prefix Add",id:"trunk_prefix_add",value:b.prefix_add??"",onChange:z=>j({...b,prefix_add:z.currentTarget.value})}),u.jsx(Ci,{label:"Enabled",checked:b.enabled??!0,onChange:z=>j({...b,enabled:z})}),u.jsx("div",{className:"pt-4 border-t border-gray-100",children:u.jsx("button",{type:"submit",disabled:N,className:"rounded-md bg-blue-600 px-4 py-2 text-sm font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:N?"Saving...":p?"Update Trunk":"Create Trunk"})})]})]})}return u.jsxs("div",{children:[u.jsxs("div",{className:"flex items-center justify-between mb-6",children:[u.jsxs("div",{children:[u.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Trunks"}),u.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Manage SIP trunk connections to upstream providers."})]}),u.jsx("button",{type:"button",onClick:O,className:"rounded-md bg-blue-600 px-4 py-2 text-sm font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors",children:"Add Trunk"})]}),c?u.jsx("p",{className:"text-sm text-gray-400",children:"Loading..."}):u.jsx(sr,{columns:W,rows:e,keyFn:M=>M.id,total:o,limit:s0,offset:a,onPageChange:P,onRowClick:G,emptyMessage:"No trunks configured yet."})]})}const a0=20;function Oj(){const[e,r]=S.useState([]),[o,s]=S.useState(0),[a,l]=S.useState(0),[c,f]=S.useState(!0),[p,h]=S.useState(null),[g,y]=S.useState(!1),[x,w]=S.useState(""),[N,C]=S.useState(!1),[E,_]=S.useState([]),[R,b]=S.useState(j());function j(){return{number:"",name:"",trunk_id:null,flow_id:null,flow_entry_node:"",enabled:!0}}function A(W){f(!0),Iy({limit:a0,offset:W}).then(M=>{r(M.items),s(M.total),l(W)}).catch(()=>{r([]),s(0)}).finally(()=>f(!1))}S.useEffect(()=>{A(0),Ly({limit:100}).then(W=>_(W.items)).catch(()=>{})},[]);function T(){b(j()),h(null),y(!0),w("")}function P(W){b({number:W.number,name:W.name,trunk_id:W.trunk_id,flow_id:W.flow_id,flow_entry_node:W.flow_entry_node,enabled:W.enabled}),h(W),y(!0),w("")}function O(){y(!1),h(null),w("")}async function G(W){W.preventDefault(),w(""),C(!0);try{p?await nj(p.id,R):await tj(R),O(),A(p?a:0)}catch(M){w(M instanceof qe?M.message:"unable to save inbound number")}finally{C(!1)}}async function D(W){if(confirm(`Delete inbound number ${W.number} (${W.name})?`))try{await rj(W.id),A(a)}catch(M){alert(M instanceof qe?M.message:"unable to delete inbound number")}}function F(W){if(W==null)return"";const M=E.find(z=>z.id===W);return M?M.name:`#${W}`}const H=[{key:"number",header:"Number",render:W=>W.number},{key:"name",header:"Name",render:W=>W.name||""},{key:"trunk_id",header:"Trunk",render:W=>F(W.trunk_id)},{key:"enabled",header:"Status",render:W=>u.jsx("span",{className:`inline-flex items-center rounded-full px-2 py-0.5 text-xs font-medium ${W.enabled?"bg-green-50 text-green-700":"bg-gray-100 text-gray-500"}`,children:W.enabled?"Enabled":"Disabled"})},{key:"actions",header:"",className:"w-24",render:W=>u.jsxs("div",{className:"flex gap-2",children:[u.jsx("button",{type:"button",onClick:M=>{M.stopPropagation(),P(W)},className:"text-sm text-blue-600 hover:text-blue-800",children:"Edit"}),u.jsx("button",{type:"button",onClick:M=>{M.stopPropagation(),D(W)},className:"text-sm text-red-600 hover:text-red-800",children:"Delete"})]})}];return g?u.jsxs("div",{children:[u.jsxs("div",{className:"flex items-center justify-between mb-6",children:[u.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:p?"Edit Inbound Number":"New Inbound Number"}),u.jsx("button",{type:"button",onClick:O,className:"text-sm text-gray-500 hover:text-gray-700",children:"Cancel"})]}),u.jsxs("form",{onSubmit:G,className:"max-w-lg space-y-4",children:[x&&u.jsx("div",{className:"rounded-md bg-red-50 border border-red-200 px-3 py-2",children:u.jsx("p",{className:"text-sm text-red-700",children:x})}),u.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.jsx(Ae,{label:"Number",id:"number",required:!0,value:R.number,onChange:W=>b({...R,number:W.currentTarget.value}),placeholder:"+14155551234"}),u.jsx(Ae,{label:"Name",id:"name",value:R.name,onChange:W=>b({...R,name:W.currentTarget.value}),placeholder:"Main Office"})]}),u.jsxs(Cr,{label:"Trunk",id:"trunk_id",value:R.trunk_id??"",onChange:W=>b({...R,trunk_id:W.currentTarget.value?Number(W.currentTarget.value):null}),children:[u.jsx("option",{value:"",children:"None"}),E.map(W=>u.jsx("option",{value:W.id,children:W.name},W.id))]}),u.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.jsx(Ft,{label:"Flow ID",id:"flow_id",min:0,value:R.flow_id??"",onChange:W=>b({...R,flow_id:W.currentTarget.value?Number(W.currentTarget.value):null})}),u.jsx(Ae,{label:"Flow Entry Node",id:"flow_entry_node",value:R.flow_entry_node??"",onChange:W=>b({...R,flow_entry_node:W.currentTarget.value}),placeholder:"start"})]}),u.jsx("p",{className:"text-xs text-gray-400",children:"Optional: route this number to a specific call flow and entry node."}),u.jsx(Ci,{label:"Enabled",checked:R.enabled??!0,onChange:W=>b({...R,enabled:W})}),u.jsx("div",{className:"pt-4 border-t border-gray-100",children:u.jsx("button",{type:"submit",disabled:N,className:"rounded-md bg-blue-600 px-4 py-2 text-sm font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:N?"Saving...":p?"Update Number":"Create Number"})})]})]}):u.jsxs("div",{children:[u.jsxs("div",{className:"flex items-center justify-between mb-6",children:[u.jsxs("div",{children:[u.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Inbound Numbers"}),u.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Manage DID numbers and route them to call flows."})]}),u.jsx("button",{type:"button",onClick:T,className:"rounded-md bg-blue-600 px-4 py-2 text-sm font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors",children:"Add Number"})]}),c?u.jsx("p",{className:"text-sm text-gray-400",children:"Loading..."}):u.jsx(sr,{columns:H,rows:e,keyFn:W=>W.id,total:o,limit:a0,offset:a,onPageChange:A,onRowClick:P,emptyMessage:"No inbound numbers configured yet."})]})}const l0=20;function Hj(){const[e,r]=S.useState([]),[o,s]=S.useState(0),[a,l]=S.useState(0),[c,f]=S.useState(!0),[p,h]=S.useState(null),[g,y]=S.useState(!1),[x,w]=S.useState(""),[N,C]=S.useState(!1),[E,_]=S.useState(R());function R(){return{extension:"",name:"",email:"",sip_username:"",sip_password:"",ring_timeout:30,dnd:!1,follow_me_enabled:!1,recording_mode:"off",max_registrations:5}}function b(D){f(!0),Vd({limit:l0,offset:D}).then(F=>{r(F.items),s(F.total),l(D)}).catch(()=>{r([]),s(0)}).finally(()=>f(!1))}S.useEffect(()=>{b(0)},[]);function j(){_(R()),h(null),y(!0),w("")}function A(D){_({extension:D.extension,name:D.name,email:D.email,sip_username:D.sip_username,sip_password:"",ring_timeout:D.ring_timeout,dnd:D.dnd,follow_me_enabled:D.follow_me_enabled,recording_mode:D.recording_mode,max_registrations:D.max_registrations}),h(D),y(!0),w("")}function T(){y(!1),h(null),w("")}async function P(D){D.preventDefault(),w(""),C(!0);try{p?await Bk(p.id,E):await Vk(E),T(),b(p?a:0)}catch(F){w(F instanceof qe?F.message:"unable to save extension")}finally{C(!1)}}async function O(D){if(confirm(`Delete extension ${D.extension} (${D.name})?`))try{await Uk(D.id),b(a)}catch(F){alert(F instanceof qe?F.message:"unable to delete extension")}}const G=[{key:"extension",header:"Extension",render:D=>D.extension},{key:"name",header:"Name",render:D=>D.name},{key:"email",header:"Email",render:D=>D.email||""},{key:"sip_username",header:"SIP Username",render:D=>D.sip_username},{key:"dnd",header:"DND",render:D=>u.jsx("span",{className:`inline-flex items-center rounded-full px-2 py-0.5 text-xs font-medium ${D.dnd?"bg-red-50 text-red-700":"bg-gray-100 text-gray-500"}`,children:D.dnd?"On":"Off"})},{key:"actions",header:"",className:"w-24",render:D=>u.jsxs("div",{className:"flex gap-2",children:[u.jsx("button",{type:"button",onClick:F=>{F.stopPropagation(),A(D)},className:"text-sm text-blue-600 hover:text-blue-800",children:"Edit"}),u.jsx("button",{type:"button",onClick:F=>{F.stopPropagation(),O(D)},className:"text-sm text-red-600 hover:text-red-800",children:"Delete"})]})}];return g?u.jsxs("div",{children:[u.jsxs("div",{className:"flex items-center justify-between mb-6",children:[u.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:p?"Edit Extension":"New Extension"}),u.jsx("button",{type:"button",onClick:T,className:"text-sm text-gray-500 hover:text-gray-700",children:"Cancel"})]}),u.jsxs("form",{onSubmit:P,className:"max-w-lg space-y-4",children:[x&&u.jsx("div",{className:"rounded-md bg-red-50 border border-red-200 px-3 py-2",children:u.jsx("p",{className:"text-sm text-red-700",children:x})}),u.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.jsx(Ae,{label:"Extension Number",id:"ext_number",required:!0,value:E.extension,onChange:D=>_({...E,extension:D.currentTarget.value}),placeholder:"101"}),u.jsx(Ae,{label:"Display Name",id:"ext_name",required:!0,value:E.name,onChange:D=>_({...E,name:D.currentTarget.value}),placeholder:"John Smith"})]}),u.jsx(Ae,{label:"Email",id:"ext_email",type:"email",value:E.email??"",onChange:D=>_({...E,email:D.currentTarget.value}),placeholder:"john@example.com"}),u.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.jsx(Ae,{label:"SIP Username",id:"sip_username",required:!0,value:E.sip_username,onChange:D=>_({...E,sip_username:D.currentTarget.value})}),u.jsx(Ae,{label:p?"SIP Password (leave blank to keep)":"SIP Password",id:"sip_password",type:"password",required:!p,value:E.sip_password??"",onChange:D=>_({...E,sip_password:D.currentTarget.value}),autoComplete:"off"})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.jsx(Ft,{label:"Ring Timeout (s)",id:"ring_timeout",min:5,max:300,value:E.ring_timeout??30,onChange:D=>_({...E,ring_timeout:Number(D.currentTarget.value)})}),u.jsx(Ft,{label:"Max Registrations",id:"max_registrations",min:1,max:20,value:E.max_registrations??5,onChange:D=>_({...E,max_registrations:Number(D.currentTarget.value)})})]}),u.jsxs(Cr,{label:"Recording Mode",id:"recording_mode",value:E.recording_mode??"off",onChange:D=>_({...E,recording_mode:D.currentTarget.value}),children:[u.jsx("option",{value:"off",children:"Off"}),u.jsx("option",{value:"always",children:"Always"}),u.jsx("option",{value:"on_demand",children:"On Demand"})]}),u.jsxs("div",{className:"flex gap-6",children:[u.jsx(Ci,{label:"Do Not Disturb",checked:E.dnd??!1,onChange:D=>_({...E,dnd:D})}),u.jsx(Ci,{label:"Follow Me",checked:E.follow_me_enabled??!1,onChange:D=>_({...E,follow_me_enabled:D})})]}),u.jsx("div",{className:"pt-4 border-t border-gray-100",children:u.jsx("button",{type:"submit",disabled:N,className:"rounded-md bg-blue-600 px-4 py-2 text-sm font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:N?"Saving...":p?"Update Extension":"Create Extension"})})]})]}):u.jsxs("div",{children:[u.jsxs("div",{className:"flex items-center justify-between mb-6",children:[u.jsxs("div",{children:[u.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Extensions"}),u.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Manage SIP extensions and user accounts."})]}),u.jsx("button",{type:"button",onClick:j,className:"rounded-md bg-blue-600 px-4 py-2 text-sm font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors",children:"Add Extension"})]}),c?u.jsx("p",{className:"text-sm text-gray-400",children:"Loading..."}):u.jsx(sr,{columns:G,rows:e,keyFn:D=>D.id,total:o,limit:l0,offset:a,onPageChange:b,onRowClick:A,emptyMessage:"No extensions configured yet."})]})}const u0=20;function Vj(e){return new Date(e).toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}function Bj(e){const r=Math.floor(e/60),o=e%60;return r>0?`${r}m ${o}s`:`${o}s`}function Uj({box:e,onBack:r}){const[o,s]=S.useState([]),[a,l]=S.useState(!0),[c,f]=S.useState(null),p=S.useRef(null);function h(){l(!0),qk(e.id).then(E=>s(E)).catch(()=>s([])).finally(()=>l(!1))}S.useEffect(()=>(h(),()=>y()),[e.id]);function g(E){if(c===E.id){y();return}y();const _=new Audio(r0(e.id,E.id));_.addEventListener("ended",()=>f(null)),_.addEventListener("error",()=>f(null)),_.play(),p.current=_,f(E.id)}function y(){p.current&&(p.current.pause(),p.current=null),f(null)}async function x(E){try{const _=await ej(e.id,E.id);s(R=>R.map(b=>b.id===E.id?_:b))}catch(_){alert(_ instanceof qe?_.message:"unable to mark message as read")}}async function w(E){if(confirm("Delete this voicemail message?")){y();try{await Jk(e.id,E.id),s(_=>_.filter(R=>R.id!==E.id))}catch(_){alert(_ instanceof qe?_.message:"unable to delete message")}}}const N=[{key:"status",header:"",className:"w-8",render:E=>u.jsx("span",{className:`inline-block h-2 w-2 rounded-full ${E.read?"bg-gray-300":"bg-blue-500"}`,title:E.read?"Read":"Unread"})},{key:"caller",header:"Caller",render:E=>u.jsxs("div",{children:[u.jsx("span",{className:`${E.read?"text-gray-700":"font-medium text-gray-900"}`,children:E.caller_id_name||"Unknown"}),E.caller_id_num&&u.jsx("span",{className:"ml-2 text-gray-400 text-xs",children:E.caller_id_num})]})},{key:"timestamp",header:"Date",render:E=>Vj(E.timestamp)},{key:"duration",header:"Duration",render:E=>Bj(E.duration)},{key:"actions",header:"",className:"w-48",render:E=>u.jsxs("div",{className:"flex gap-2",children:[u.jsx("button",{type:"button",onClick:_=>{_.stopPropagation(),g(E)},className:"text-sm text-blue-600 hover:text-blue-800",children:c===E.id?"Stop":"Play"}),u.jsx("a",{href:r0(e.id,E.id),download:!0,onClick:_=>_.stopPropagation(),className:"text-sm text-blue-600 hover:text-blue-800",children:"Download"}),!E.read&&u.jsx("button",{type:"button",onClick:_=>{_.stopPropagation(),x(E)},className:"text-sm text-gray-500 hover:text-gray-700",children:"Mark Read"}),u.jsx("button",{type:"button",onClick:_=>{_.stopPropagation(),w(E)},className:"text-sm text-red-600 hover:text-red-800",children:"Delete"})]})}],C=o.filter(E=>!E.read).length;return u.jsxs("div",{children:[u.jsx("div",{className:"flex items-center justify-between mb-6",children:u.jsxs("div",{children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("button",{type:"button",onClick:r,className:"text-sm text-gray-500 hover:text-gray-700",children:" Back"}),u.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:e.name})]}),u.jsxs("p",{className:"mt-1 text-sm text-gray-500",children:[o.length," message",o.length!==1?"s":"",C>0&&u.jsxs("span",{className:"ml-1 text-blue-600",children:["(",C," unread)"]})]})]})}),a?u.jsx("p",{className:"text-sm text-gray-400",children:"Loading messages..."}):u.jsx(sr,{columns:N,rows:o,keyFn:E=>E.id,total:o.length,limit:o.length||1,offset:0,onPageChange:()=>{},emptyMessage:"No voicemail messages in this box."})]})}function Wj(){const[e,r]=S.useState([]),[o,s]=S.useState(0),[a,l]=S.useState(0),[c,f]=S.useState(!0),[p,h]=S.useState(null),[g,y]=S.useState(!1),[x,w]=S.useState(null),[N,C]=S.useState(""),[E,_]=S.useState(!1),[R,b]=S.useState(j());function j(){return{name:"",mailbox_number:"",pin:"",greeting_type:"default",email_notify:!1,email_address:"",email_attach_audio:!0,max_message_duration:120,max_messages:50,retention_days:90,notify_extension_id:null}}function A(H){f(!0),zy({limit:u0,offset:H}).then(W=>{r(W.items),s(W.total),l(H)}).catch(()=>{r([]),s(0)}).finally(()=>f(!1))}S.useEffect(()=>{A(0)},[]);function T(){b(j()),h(null),y(!0),C("")}function P(H){b({name:H.name,mailbox_number:H.mailbox_number,pin:"",greeting_type:H.greeting_type,email_notify:H.email_notify,email_address:H.email_address,email_attach_audio:H.email_attach_audio,max_message_duration:H.max_message_duration,max_messages:H.max_messages,retention_days:H.retention_days,notify_extension_id:H.notify_extension_id}),h(H),y(!0),C("")}function O(){y(!1),h(null),C("")}async function G(H){H.preventDefault(),C(""),_(!0);try{p?await Zk(p.id,R):await Kk(R),O(),A(p?a:0)}catch(W){C(W instanceof qe?W.message:"unable to save voicemail box")}finally{_(!1)}}async function D(H){if(confirm(`Delete voicemail box "${H.name}"?`))try{await Qk(H.id),A(a)}catch(W){alert(W instanceof qe?W.message:"unable to delete voicemail box")}}const F=[{key:"name",header:"Name",render:H=>H.name},{key:"mailbox_number",header:"Mailbox #",render:H=>H.mailbox_number||""},{key:"greeting_type",header:"Greeting",render:H=>H.greeting_type},{key:"email_notify",header:"Email Notify",render:H=>u.jsx("span",{className:`inline-flex items-center rounded-full px-2 py-0.5 text-xs font-medium ${H.email_notify?"bg-green-50 text-green-700":"bg-gray-100 text-gray-500"}`,children:H.email_notify?"On":"Off"})},{key:"max_messages",header:"Max Msgs",render:H=>H.max_messages},{key:"retention",header:"Retention",render:H=>H.retention_days===0?"Forever":`${H.retention_days}d`},{key:"actions",header:"",className:"w-36",render:H=>u.jsxs("div",{className:"flex gap-2",children:[u.jsx("button",{type:"button",onClick:W=>{W.stopPropagation(),w(H)},className:"text-sm text-blue-600 hover:text-blue-800",children:"Messages"}),u.jsx("button",{type:"button",onClick:W=>{W.stopPropagation(),P(H)},className:"text-sm text-blue-600 hover:text-blue-800",children:"Edit"}),u.jsx("button",{type:"button",onClick:W=>{W.stopPropagation(),D(H)},className:"text-sm text-red-600 hover:text-red-800",children:"Delete"})]})}];return x?u.jsx(Uj,{box:x,onBack:()=>w(null)}):g?u.jsxs("div",{children:[u.jsxs("div",{className:"flex items-center justify-between mb-6",children:[u.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:p?"Edit Voicemail Box":"New Voicemail Box"}),u.jsx("button",{type:"button",onClick:O,className:"text-sm text-gray-500 hover:text-gray-700",children:"Cancel"})]}),u.jsxs("form",{onSubmit:G,className:"max-w-lg space-y-4",children:[N&&u.jsx("div",{className:"rounded-md bg-red-50 border border-red-200 px-3 py-2",children:u.jsx("p",{className:"text-sm text-red-700",children:N})}),u.jsx(Ae,{label:"Name",id:"vm_name",required:!0,value:R.name,onChange:H=>b({...R,name:H.currentTarget.value}),placeholder:"Sales Voicemail"}),u.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.jsx(Ae,{label:"Mailbox Number (optional)",id:"vm_number",value:R.mailbox_number??"",onChange:H=>b({...R,mailbox_number:H.currentTarget.value}),placeholder:"901"}),u.jsx(Ae,{label:p?"PIN (leave blank to keep)":"PIN (optional)",id:"vm_pin",type:"password",value:R.pin??"",onChange:H=>b({...R,pin:H.currentTarget.value}),autoComplete:"off"})]}),u.jsxs(Cr,{label:"Greeting Type",id:"vm_greeting_type",value:R.greeting_type??"default",onChange:H=>b({...R,greeting_type:H.currentTarget.value}),children:[u.jsx("option",{value:"default",children:"Default"}),u.jsx("option",{value:"custom",children:"Custom"}),u.jsx("option",{value:"name_only",children:"Name Only"})]}),u.jsxs("div",{className:"space-y-3",children:[u.jsx(Ci,{label:"Email Notifications",checked:R.email_notify??!1,onChange:H=>b({...R,email_notify:H})}),R.email_notify&&u.jsxs(u.Fragment,{children:[u.jsx(Ae,{label:"Notification Email",id:"vm_email",type:"email",value:R.email_address??"",onChange:H=>b({...R,email_address:H.currentTarget.value}),placeholder:"user@example.com"}),u.jsx(Ci,{label:"Attach Audio to Email",checked:R.email_attach_audio??!0,onChange:H=>b({...R,email_attach_audio:H})})]})]}),u.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[u.jsx(Ft,{label:"Max Duration (s)",id:"vm_max_duration",min:10,max:600,value:R.max_message_duration??120,onChange:H=>b({...R,max_message_duration:Number(H.currentTarget.value)})}),u.jsx(Ft,{label:"Max Messages",id:"vm_max_messages",min:1,max:999,value:R.max_messages??50,onChange:H=>b({...R,max_messages:Number(H.currentTarget.value)})}),u.jsx(Ft,{label:"Retention (days)",id:"vm_retention",min:0,value:R.retention_days??90,onChange:H=>b({...R,retention_days:Number(H.currentTarget.value)})})]}),u.jsx("p",{className:"text-xs text-gray-400",children:"Set retention to 0 for no automatic deletion."}),u.jsx("div",{className:"pt-4 border-t border-gray-100",children:u.jsx("button",{type:"submit",disabled:E,className:"rounded-md bg-blue-600 px-4 py-2 text-sm font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:E?"Saving...":p?"Update Voicemail Box":"Create Voicemail Box"})})]})]}):u.jsxs("div",{children:[u.jsxs("div",{className:"flex items-center justify-between mb-6",children:[u.jsxs("div",{children:[u.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Voicemail Boxes"}),u.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Manage voicemail boxes and message settings."})]}),u.jsx("button",{type:"button",onClick:T,className:"rounded-md bg-blue-600 px-4 py-2 text-sm font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors",children:"Add Voicemail Box"})]}),c?u.jsx("p",{className:"text-sm text-gray-400",children:"Loading..."}):u.jsx(sr,{columns:F,rows:e,keyFn:H=>H.id,total:o,limit:u0,offset:a,onPageChange:A,onRowClick:P,emptyMessage:"No voicemail boxes configured yet."})]})}const Yj={ring_all:"Ring All",round_robin:"Round Robin",random:"Random",longest_idle:"Longest Idle"};function Xj(){const[e,r]=S.useState([]),[o,s]=S.useState(!0),[a,l]=S.useState(null),[c,f]=S.useState(!1),[p,h]=S.useState(""),[g,y]=S.useState(!1),[x,w]=S.useState([]),[N,C]=S.useState(E());function E(){return{name:"",strategy:"ring_all",ring_timeout:30,members:[],caller_id_mode:"pass"}}function _(){s(!0),Oy().then(D=>r(D)).catch(()=>r([])).finally(()=>s(!1))}function R(){Vd({limit:100,offset:0}).then(D=>w(D.items)).catch(()=>w([]))}S.useEffect(()=>{_(),R()},[]);function b(){C(E()),l(null),f(!0),h("")}function j(D){C({name:D.name,strategy:D.strategy,ring_timeout:D.ring_timeout,members:D.members??[],caller_id_mode:D.caller_id_mode}),l(D),f(!0),h("")}function A(){f(!1),l(null),h("")}async function T(D){D.preventDefault(),h(""),y(!0);try{a?await yj(a.id,N):await gj(N),A(),_()}catch(F){h(F instanceof qe?F.message:"unable to save ring group")}finally{y(!1)}}async function P(D){if(confirm(`Delete ring group "${D.name}"?`))try{await xj(D.id),_()}catch(F){alert(F instanceof qe?F.message:"unable to delete ring group")}}function O(D){C(F=>{const H=F.members.includes(D)?F.members.filter(W=>W!==D):[...F.members,D];return{...F,members:H}})}const G=[{key:"name",header:"Name",render:D=>D.name},{key:"strategy",header:"Strategy",render:D=>u.jsx("span",{className:"inline-flex items-center rounded-full bg-blue-50 px-2 py-0.5 text-xs font-medium text-blue-700",children:Yj[D.strategy]??D.strategy})},{key:"ring_timeout",header:"Timeout",render:D=>`${D.ring_timeout}s`},{key:"members",header:"Members",render:D=>{const F=D.members?.length??0;return u.jsxs("span",{className:"text-gray-600",children:[F," extension",F!==1?"s":""]})}},{key:"actions",header:"",className:"w-24",render:D=>u.jsxs("div",{className:"flex gap-2",children:[u.jsx("button",{type:"button",onClick:F=>{F.stopPropagation(),j(D)},className:"text-sm text-blue-600 hover:text-blue-800",children:"Edit"}),u.jsx("button",{type:"button",onClick:F=>{F.stopPropagation(),P(D)},className:"text-sm text-red-600 hover:text-red-800",children:"Delete"})]})}];return c?u.jsxs("div",{children:[u.jsxs("div",{className:"flex items-center justify-between mb-6",children:[u.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:a?"Edit Ring Group":"New Ring Group"}),u.jsx("button",{type:"button",onClick:A,className:"text-sm text-gray-500 hover:text-gray-700",children:"Cancel"})]}),u.jsxs("form",{onSubmit:T,className:"max-w-lg space-y-4",children:[p&&u.jsx("div",{className:"rounded-md bg-red-50 border border-red-200 px-3 py-2",children:u.jsx("p",{className:"text-sm text-red-700",children:p})}),u.jsx(Ae,{label:"Group Name",id:"rg_name",required:!0,value:N.name,onChange:D=>C({...N,name:D.currentTarget.value}),placeholder:"Sales Team"}),u.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.jsxs(Cr,{label:"Ring Strategy",id:"rg_strategy",value:N.strategy??"ring_all",onChange:D=>C({...N,strategy:D.currentTarget.value}),children:[u.jsx("option",{value:"ring_all",children:"Ring All"}),u.jsx("option",{value:"round_robin",children:"Round Robin"}),u.jsx("option",{value:"random",children:"Random"}),u.jsx("option",{value:"longest_idle",children:"Longest Idle"})]}),u.jsx(Ft,{label:"Ring Timeout (s)",id:"rg_timeout",min:5,max:300,value:N.ring_timeout??30,onChange:D=>C({...N,ring_timeout:Number(D.currentTarget.value)})})]}),u.jsxs(Cr,{label:"Caller ID Mode",id:"rg_caller_id",value:N.caller_id_mode??"pass",onChange:D=>C({...N,caller_id_mode:D.currentTarget.value}),children:[u.jsx("option",{value:"pass",children:"Pass Through"}),u.jsx("option",{value:"prepend",children:"Prepend Group Name"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Members"}),x.length===0?u.jsx("p",{className:"text-sm text-gray-400",children:"No extensions available."}):u.jsx("div",{className:"border border-gray-200 rounded-md max-h-48 overflow-y-auto",children:x.map(D=>u.jsxs("label",{className:"flex items-center gap-3 px-3 py-2 hover:bg-gray-50 cursor-pointer border-b border-gray-100 last:border-b-0",children:[u.jsx("input",{type:"checkbox",checked:N.members.includes(D.id),onChange:()=>O(D.id),className:"h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),u.jsxs("span",{className:"text-sm text-gray-900",children:[D.extension,"  ",D.name]})]},D.id))}),N.members.length>0&&u.jsxs("p",{className:"mt-1 text-xs text-gray-500",children:[N.members.length," member",N.members.length!==1?"s":""," selected"]})]}),u.jsx("div",{className:"pt-4 border-t border-gray-100",children:u.jsx("button",{type:"submit",disabled:g,className:"rounded-md bg-blue-600 px-4 py-2 text-sm font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:g?"Saving...":a?"Update Ring Group":"Create Ring Group"})})]})]}):u.jsxs("div",{children:[u.jsxs("div",{className:"flex items-center justify-between mb-6",children:[u.jsxs("div",{children:[u.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Ring Groups"}),u.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Manage ring groups for simultaneous or sequential ringing."})]}),u.jsx("button",{type:"button",onClick:b,className:"rounded-md bg-blue-600 px-4 py-2 text-sm font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors",children:"Add Ring Group"})]}),o?u.jsx("p",{className:"text-sm text-gray-400",children:"Loading..."}):u.jsx(sr,{columns:G,rows:e,keyFn:D=>D.id,total:e.length,limit:e.length||1,offset:0,onPageChange:()=>{},onRowClick:j,emptyMessage:"No ring groups configured yet."})]})}const Gj=[["1","2","3"],["4","5","6"],["7","8","9"],["*","0","#"]],Kj=[{key:"t",label:"Timeout",description:"No input received within the timeout period"},{key:"i",label:"Invalid",description:"Caller pressed an unmapped digit (after max retries)"}];function Zj({options:e,onChange:r}){const o=Object.keys(e).filter(s=>e[s]).length;return u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Digit Mappings"}),u.jsx("p",{className:"text-xs text-gray-500 mb-3",children:"Assign a destination for each digit callers can press. Leave blank to ignore that digit."}),u.jsxs("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:[u.jsx("div",{className:"bg-gray-50 px-3 py-2 border-b border-gray-200",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("span",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide",children:"Keypad Digits"}),u.jsxs("span",{className:"text-xs text-gray-400",children:[o," mapping",o!==1?"s":""," configured"]})]})}),u.jsx("div",{className:"p-3 space-y-2",children:Gj.map((s,a)=>u.jsx("div",{className:"grid grid-cols-3 gap-2",children:s.map(l=>u.jsx(Qj,{label:l,value:e[l]??"",onChange:c=>r(l,c)},l))},a))}),u.jsx("div",{className:"border-t border-gray-200 bg-gray-50 px-3 py-2",children:u.jsx("span",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide",children:"Special Handlers"})}),u.jsx("div",{className:"p-3 space-y-2",children:Kj.map(({key:s,label:a,description:l})=>u.jsx(qj,{digitKey:s,label:a,description:l,value:e[s]??"",onChange:c=>r(s,c)},s))})]})]})}function Qj({label:e,value:r,onChange:o}){const s=r.length>0;return u.jsxs("div",{className:`flex items-center gap-2 rounded-md border px-2 py-1.5 transition-colors ${s?"border-blue-200 bg-blue-50/50":"border-gray-200 bg-white"}`,children:[u.jsx("span",{className:`w-7 h-7 flex items-center justify-center rounded text-sm font-semibold shrink-0 ${s?"bg-blue-600 text-white":"bg-gray-100 text-gray-500"}`,children:e}),u.jsx("input",{type:"text",value:r,onChange:a=>o(a.currentTarget.value),placeholder:"destination",className:"flex-1 min-w-0 bg-transparent text-sm text-gray-900 placeholder-gray-400 focus:outline-none"}),s&&u.jsx("button",{type:"button",onClick:()=>o(""),className:"shrink-0 text-gray-400 hover:text-gray-600",title:"Clear",children:u.jsx("svg",{className:"w-3.5 h-3.5",viewBox:"0 0 20 20",fill:"currentColor",children:u.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]})}function qj({digitKey:e,label:r,description:o,value:s,onChange:a}){const l=s.length>0;return u.jsxs("div",{className:`flex items-center gap-3 rounded-md border px-3 py-2 transition-colors ${l?"border-amber-200 bg-amber-50/50":"border-gray-200 bg-white"}`,children:[u.jsxs("div",{className:"shrink-0 w-24",children:[u.jsx("span",{className:`inline-flex items-center rounded-full px-2 py-0.5 text-xs font-medium ${l?e==="t"?"bg-amber-100 text-amber-700":"bg-red-100 text-red-700":"bg-gray-100 text-gray-500"}`,children:r}),u.jsx("p",{className:"text-[10px] text-gray-400 mt-0.5 leading-tight",children:o})]}),u.jsx("input",{type:"text",value:s,onChange:c=>a(c.currentTarget.value),placeholder:"destination",className:"flex-1 min-w-0 rounded-md border border-gray-300 bg-white px-2 py-1 text-sm text-gray-900 placeholder-gray-400 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500"}),l&&u.jsx("button",{type:"button",onClick:()=>a(""),className:"shrink-0 text-gray-400 hover:text-gray-600",title:"Clear",children:u.jsx("svg",{className:"w-3.5 h-3.5",viewBox:"0 0 20 20",fill:"currentColor",children:u.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]})}function Jj({value:e,onChange:r}){const[o,s]=S.useState([]),[a,l]=S.useState(!0),[c,f]=S.useState(!1),[p,h]=S.useState(""),[g,y]=S.useState(null),x=S.useRef(null),w=S.useRef(null);function N(){l(!0),Ay().then(b=>s(b)).catch(()=>s([])).finally(()=>l(!1))}S.useEffect(()=>{N()},[]);async function C(b){if(!(!b||b.length===0)){h(""),f(!0);try{const j=await $y(b[0]);N(),r(j.filename)}catch(j){h(j instanceof Error?j.message:"upload failed")}finally{f(!1),w.current&&(w.current.value="")}}}function E(b){if(g===b.id){_();return}_();const j=new Audio(Fy(b.id));j.addEventListener("ended",()=>y(null)),j.addEventListener("error",()=>y(null)),j.play(),x.current=j,y(b.id)}function _(){x.current&&(x.current.pause(),x.current=null),y(null)}const R=o.find(b=>b.filename===e);return u.jsxs("div",{className:"space-y-2",children:[p&&u.jsx("p",{className:"text-xs text-red-600",children:p}),R&&u.jsxs("div",{className:"flex items-center gap-2 rounded-md border border-green-200 bg-green-50 px-3 py-2",children:[u.jsx("svg",{className:"h-4 w-4 text-green-600 shrink-0",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.114 5.636a9 9 0 010 12.728M16.463 8.288a5.25 5.25 0 010 7.424M6.75 8.25l4.72-4.72a.75.75 0 011.28.53v15.88a.75.75 0 01-1.28.53l-4.72-4.72H4.51c-.88 0-1.704-.507-1.938-1.354A9.01 9.01 0 012.25 12c0-.83.112-1.633.322-2.396C2.806 8.756 3.63 8.25 4.51 8.25H6.75z"})}),u.jsx("span",{className:"text-sm text-green-800 font-medium truncate flex-1",children:R.name}),u.jsx("button",{type:"button",onClick:()=>E(R),className:"text-xs text-green-700 hover:text-green-900 font-medium",children:g===R.id?"Stop":"Play"}),u.jsx("button",{type:"button",onClick:()=>{_(),r("")},className:"text-xs text-gray-500 hover:text-gray-700",children:"Clear"})]}),!R&&u.jsx(u.Fragment,{children:a?u.jsx("p",{className:"text-xs text-gray-400 py-2",children:"Loading prompts..."}):o.length===0?u.jsx("p",{className:"text-xs text-gray-500 py-2",children:"No audio prompts in library. Upload one below."}):u.jsx("div",{className:"max-h-40 overflow-y-auto rounded-md border border-gray-200",children:o.map(b=>u.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 hover:bg-gray-50 cursor-pointer border-b border-gray-100 last:border-b-0",onClick:()=>r(b.filename),children:[u.jsx("span",{className:"text-sm text-gray-800 flex-1 truncate",children:b.name}),u.jsx("span",{className:"text-xs text-gray-400",children:b.format.toUpperCase()}),u.jsx("button",{type:"button",onClick:j=>{j.stopPropagation(),E(b)},className:"text-xs text-blue-600 hover:text-blue-800",children:g===b.id?"Stop":"Play"})]},b.id))})}),u.jsxs("div",{children:[u.jsx("input",{ref:w,type:"file",accept:".wav,.alaw,.al,.ulaw,.ul",className:"hidden",onChange:b=>C(b.target.files)}),u.jsx("button",{type:"button",disabled:c,onClick:()=>w.current?.click(),className:"text-xs text-blue-600 hover:text-blue-800 font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:c?"Uploading...":"Upload new prompt"})]})]})}function e4(){const[e,r]=S.useState([]),[o,s]=S.useState(!0),[a,l]=S.useState(null),[c,f]=S.useState(!1),[p,h]=S.useState(""),[g,y]=S.useState(!1),[x,w]=S.useState(E()),[N,C]=S.useState("none");function E(){return{name:"",greeting_file:"",greeting_tts:"",timeout:10,max_retries:3,digit_timeout:3,options:{}}}function _(){s(!0),vj().then(D=>r(D)).catch(()=>r([])).finally(()=>s(!1))}S.useEffect(()=>{_()},[]);function R(){w(E()),C("none"),l(null),f(!0),h("")}function b(D){w({name:D.name,greeting_file:D.greeting_file??"",greeting_tts:D.greeting_tts??"",timeout:D.timeout,max_retries:D.max_retries,digit_timeout:D.digit_timeout,options:D.options??{}}),C(D.greeting_file?"audio":D.greeting_tts?"tts":"none"),l(D),f(!0),h("")}function j(){f(!1),l(null),h("")}async function A(D){D.preventDefault(),h(""),y(!0);try{a?await bj(a.id,x):await wj(x),j(),_()}catch(F){h(F instanceof qe?F.message:"unable to save ivr menu")}finally{y(!1)}}async function T(D){if(confirm(`Delete IVR menu "${D.name}"?`))try{await _j(D.id),_()}catch(F){alert(F instanceof qe?F.message:"unable to delete ivr menu")}}function P(D,F){w(H=>{const W={...H.options};return F===""?delete W[D]:W[D]=F,{...H,options:W}})}function O(D){return D?Object.keys(D).length:0}const G=[{key:"name",header:"Name",render:D=>D.name},{key:"timeout",header:"Timeout",render:D=>`${D.timeout}s`},{key:"max_retries",header:"Max Retries",render:D=>String(D.max_retries)},{key:"options",header:"Options",render:D=>{const F=O(D.options);return u.jsxs("span",{className:"text-gray-600",children:[F," mapping",F!==1?"s":""]})}},{key:"greeting",header:"Greeting",render:D=>D.greeting_file?u.jsx("span",{className:"inline-flex items-center rounded-full bg-green-50 px-2 py-0.5 text-xs font-medium text-green-700",children:"Audio"}):D.greeting_tts?u.jsx("span",{className:"inline-flex items-center rounded-full bg-blue-50 px-2 py-0.5 text-xs font-medium text-blue-700",children:"TTS"}):u.jsx("span",{className:"text-gray-400",children:"None"})},{key:"actions",header:"",className:"w-24",render:D=>u.jsxs("div",{className:"flex gap-2",children:[u.jsx("button",{type:"button",onClick:F=>{F.stopPropagation(),b(D)},className:"text-sm text-blue-600 hover:text-blue-800",children:"Edit"}),u.jsx("button",{type:"button",onClick:F=>{F.stopPropagation(),T(D)},className:"text-sm text-red-600 hover:text-red-800",children:"Delete"})]})}];return c?u.jsxs("div",{children:[u.jsxs("div",{className:"flex items-center justify-between mb-6",children:[u.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:a?"Edit IVR Menu":"New IVR Menu"}),u.jsx("button",{type:"button",onClick:j,className:"text-sm text-gray-500 hover:text-gray-700",children:"Cancel"})]}),u.jsxs("form",{onSubmit:A,className:"max-w-lg space-y-4",children:[p&&u.jsx("div",{className:"rounded-md bg-red-50 border border-red-200 px-3 py-2",children:u.jsx("p",{className:"text-sm text-red-700",children:p})}),u.jsx(Ae,{label:"Menu Name",id:"ivr_name",required:!0,value:x.name,onChange:D=>w({...x,name:D.currentTarget.value}),placeholder:"Main Menu"}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Greeting"}),u.jsx("div",{className:"flex gap-1 mb-2",children:["none","tts","audio"].map(D=>u.jsx("button",{type:"button",onClick:()=>{C(D),D!=="audio"&&w(F=>({...F,greeting_file:""})),D!=="tts"&&w(F=>({...F,greeting_tts:""}))},className:`px-3 py-1 text-xs font-medium rounded-md border transition-colors ${N===D?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"}`,children:D==="none"?"None":D==="tts"?"TTS Text":"Audio File"},D))}),N==="tts"&&u.jsx(Ae,{label:"",id:"ivr_greeting_tts",value:x.greeting_tts??"",onChange:D=>w({...x,greeting_tts:D.currentTarget.value}),placeholder:"Press 1 for Sales, Press 2 for Support..."}),N==="audio"&&u.jsx(Jj,{value:x.greeting_file??"",onChange:D=>w({...x,greeting_file:D})})]}),u.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[u.jsx(Ft,{label:"Timeout (s)",id:"ivr_timeout",min:1,max:60,value:x.timeout??10,onChange:D=>w({...x,timeout:Number(D.currentTarget.value)})}),u.jsx(Ft,{label:"Max Retries",id:"ivr_max_retries",min:0,max:10,value:x.max_retries??3,onChange:D=>w({...x,max_retries:Number(D.currentTarget.value)})}),u.jsx(Ft,{label:"Digit Timeout (s)",id:"ivr_digit_timeout",min:1,max:30,value:x.digit_timeout??3,onChange:D=>w({...x,digit_timeout:Number(D.currentTarget.value)})})]}),u.jsx(Zj,{options:x.options,onChange:P}),u.jsx("div",{className:"pt-4 border-t border-gray-100",children:u.jsx("button",{type:"submit",disabled:g,className:"rounded-md bg-blue-600 px-4 py-2 text-sm font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:g?"Saving...":a?"Update IVR Menu":"Create IVR Menu"})})]})]}):u.jsxs("div",{children:[u.jsxs("div",{className:"flex items-center justify-between mb-6",children:[u.jsxs("div",{children:[u.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"IVR Menus"}),u.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Manage interactive voice response menus for caller self-service."})]}),u.jsx("button",{type:"button",onClick:R,className:"rounded-md bg-blue-600 px-4 py-2 text-sm font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors",children:"Add IVR Menu"})]}),o?u.jsx("p",{className:"text-sm text-gray-400",children:"Loading..."}):u.jsx(sr,{columns:G,rows:e,keyFn:D=>D.id,total:e.length,limit:e.length||1,offset:0,onPageChange:()=>{},onRowClick:b,emptyMessage:"No IVR menus configured yet."})]})}const t4=["mon","tue","wed","thu","fri","sat","sun"],n4={mon:"Mon",tue:"Tue",wed:"Wed",thu:"Thu",fri:"Fri",sat:"Sat",sun:"Sun"},r4=[{label:"Weekdays",days:["mon","tue","wed","thu","fri"]},{label:"Weekend",days:["sat","sun"]},{label:"All",days:["mon","tue","wed","thu","fri","sat","sun"]}];function o4(){return{label:"",days:["mon","tue","wed","thu","fri"],start:"08:30",end:"17:00",dest_node:""}}function c0(e){const r=e.split(":");if(r.length!==2)return 0;const o=parseInt(r[0],10),s=parseInt(r[1],10);return isNaN(o)||isNaN(s)?0:(o*60+s)/1440}function i4({rules:e,onChange:r}){function o(p,h){r(e.map((g,y)=>y===p?{...g,...h}:g))}function s(p,h){r(e.map((g,y)=>{if(y!==p)return g;const x=g.days.includes(h)?g.days.filter(w=>w!==h):[...g.days,h];return{...g,days:x}}))}function a(p,h){r(e.map((g,y)=>y===p?{...g,days:[...h]}:g))}function l(){r([...e,o4()])}function c(p){r(e.filter((h,g)=>g!==p))}function f(p,h){const g=p+h;if(g<0||g>=e.length)return;const y=[...e];[y[p],y[g]]=[y[g],y[p]],r(y)}return u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Rules"}),u.jsx("p",{className:"text-xs text-gray-500 mb-3",children:"Evaluated top to bottom  first matching rule wins. Drag to reorder or use the arrows."}),u.jsxs("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:[u.jsx("div",{className:"bg-gray-50 px-3 py-2 border-b border-gray-200",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("span",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide",children:"Time Rules"}),u.jsxs("span",{className:"text-xs text-gray-400",children:[e.length," rule",e.length!==1?"s":""]})]})}),u.jsx("div",{className:"divide-y divide-gray-100",children:e.map((p,h)=>u.jsxs("div",{className:"p-4 space-y-3 bg-white hover:bg-gray-50/50 transition-colors",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsxs("div",{className:"flex flex-col shrink-0",children:[u.jsx("button",{type:"button",onClick:()=>f(h,-1),disabled:h===0,className:"text-gray-400 hover:text-gray-600 disabled:opacity-25 disabled:cursor-not-allowed p-0.5",title:"Move up",children:u.jsx("svg",{className:"w-3.5 h-3.5",viewBox:"0 0 20 20",fill:"currentColor",children:u.jsx("path",{fillRule:"evenodd",d:"M14.707 12.707a1 1 0 01-1.414 0L10 9.414l-3.293 3.293a1 1 0 01-1.414-1.414l4-4a1 1 0 011.414 0l4 4a1 1 0 010 1.414z",clipRule:"evenodd"})})}),u.jsx("button",{type:"button",onClick:()=>f(h,1),disabled:h===e.length-1,className:"text-gray-400 hover:text-gray-600 disabled:opacity-25 disabled:cursor-not-allowed p-0.5",title:"Move down",children:u.jsx("svg",{className:"w-3.5 h-3.5",viewBox:"0 0 20 20",fill:"currentColor",children:u.jsx("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),u.jsx("span",{className:"flex-shrink-0 inline-flex items-center justify-center w-5 h-5 rounded bg-blue-100 text-xs font-semibold text-blue-700",children:h+1}),u.jsx("input",{type:"text",value:p.label,onChange:g=>o(h,{label:g.currentTarget.value}),placeholder:"Rule label (e.g. Business Hours)",className:"flex-1 min-w-0 rounded-md border border-gray-300 px-3 py-1.5 text-sm text-gray-900 placeholder-gray-400 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500"}),e.length>1&&u.jsx("button",{type:"button",onClick:()=>c(h),className:"shrink-0 text-gray-400 hover:text-red-500 transition-colors p-1",title:"Remove rule",children:u.jsx("svg",{className:"w-4 h-4",viewBox:"0 0 20 20",fill:"currentColor",children:u.jsx("path",{fillRule:"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z",clipRule:"evenodd"})})})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("span",{className:"text-xs text-gray-500 shrink-0",children:"Days"}),u.jsx("div",{className:"flex gap-1",children:r4.map(g=>{const y=g.days.length===p.days.length&&g.days.every(x=>p.days.includes(x));return u.jsx("button",{type:"button",onClick:()=>a(h,g.days),className:`px-2 py-0.5 rounded text-[10px] font-medium transition-colors ${y?"bg-blue-100 text-blue-700":"bg-gray-50 text-gray-400 hover:bg-gray-100 hover:text-gray-600"}`,children:g.label},g.label)})})]}),u.jsx("div",{className:"flex gap-1.5",children:t4.map(g=>{const y=p.days.includes(g),x=g==="sat"||g==="sun";return u.jsx("button",{type:"button",onClick:()=>s(h,g),className:`w-10 py-1.5 rounded text-xs font-medium transition-colors ${y?x?"bg-indigo-600 text-white":"bg-blue-600 text-white":x?"bg-gray-50 text-gray-400 hover:bg-gray-100 border border-dashed border-gray-300":"bg-gray-100 text-gray-500 hover:bg-gray-200"}`,children:n4[g]},g)})})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsxs("div",{className:"flex items-end gap-3",children:[u.jsxs("div",{className:"flex-1",children:[u.jsx("label",{className:"block text-xs text-gray-500 mb-0.5",children:"Start Time"}),u.jsx("input",{type:"time",value:p.start,onChange:g=>o(h,{start:g.currentTarget.value}),className:"block w-full rounded-md border border-gray-300 px-3 py-1.5 text-sm text-gray-900 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500"})]}),u.jsx("span",{className:"pb-2 text-gray-400 text-sm",children:"to"}),u.jsxs("div",{className:"flex-1",children:[u.jsx("label",{className:"block text-xs text-gray-500 mb-0.5",children:"End Time"}),u.jsx("input",{type:"time",value:p.end,onChange:g=>o(h,{end:g.currentTarget.value}),className:"block w-full rounded-md border border-gray-300 px-3 py-1.5 text-sm text-gray-900 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500"})]})]}),u.jsx(s4,{start:p.start,end:p.end})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs text-gray-500 mb-0.5",children:"Destination"}),u.jsx("input",{type:"text",value:p.dest_node,onChange:g=>o(h,{dest_node:g.currentTarget.value}),placeholder:"Node ID  the flow node to route to when this rule matches",className:"block w-full rounded-md border border-gray-300 px-3 py-1.5 text-sm text-gray-900 placeholder-gray-400 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500"})]})]},h))}),u.jsx("div",{className:"border-t border-gray-200 bg-gray-50 px-3 py-2",children:u.jsxs("button",{type:"button",onClick:l,className:"inline-flex items-center gap-1.5 text-sm text-blue-600 hover:text-blue-800 transition-colors",children:[u.jsx("svg",{className:"w-4 h-4",viewBox:"0 0 20 20",fill:"currentColor",children:u.jsx("path",{fillRule:"evenodd",d:"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z",clipRule:"evenodd"})}),"Add Rule"]})})]})]})}function s4({start:e,end:r}){const o=c0(e),s=c0(r),a=s<=o,l=[0,6,12,18,24];return u.jsxs("div",{className:"relative",children:[u.jsx("div",{className:"relative h-5 bg-gray-100 rounded-full overflow-hidden",children:a?u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"absolute inset-y-0 bg-blue-200 rounded-l-full",style:{left:0,width:`${s*100}%`}}),u.jsx("div",{className:"absolute inset-y-0 bg-blue-200 rounded-r-full",style:{left:`${o*100}%`,right:0}})]}):u.jsx("div",{className:"absolute inset-y-0 bg-blue-200 rounded-full",style:{left:`${o*100}%`,width:`${(s-o)*100}%`}})}),u.jsx("div",{className:"relative h-3 mt-0.5",children:l.map(c=>u.jsx("span",{className:"absolute text-[9px] text-gray-400 -translate-x-1/2",style:{left:`${c/24*100}%`},children:c.toString().padStart(2,"0")},c))})]})}const a4=[{group:"Australia",zones:["Australia/Sydney","Australia/Melbourne","Australia/Brisbane","Australia/Perth","Australia/Adelaide"]},{group:"Pacific",zones:["Pacific/Auckland"]},{group:"Asia",zones:["Asia/Tokyo","Asia/Shanghai","Asia/Singapore","Asia/Kolkata"]},{group:"Europe",zones:["Europe/London","Europe/Berlin","Europe/Paris"]},{group:"Americas",zones:["America/New_York","America/Chicago","America/Denver","America/Los_Angeles"]},{group:"Other",zones:["UTC"]}];function l4(){const[e,r]=S.useState([]),[o,s]=S.useState(!0),[a,l]=S.useState(null),[c,f]=S.useState(!1),[p,h]=S.useState(""),[g,y]=S.useState(!1),[x,w]=S.useState(N());function N(){return{name:"",timezone:"Australia/Sydney",rules:[{label:"",days:["mon","tue","wed","thu","fri"],start:"08:30",end:"17:00",dest_node:""}],default_dest:""}}function C(){s(!0),Nj().then(T=>r(T)).catch(()=>r([])).finally(()=>s(!1))}S.useEffect(()=>{C()},[]);function E(){w(N()),l(null),f(!0),h("")}function _(T){w({name:T.name,timezone:T.timezone,rules:T.rules??[],default_dest:T.default_dest??""}),l(T),f(!0),h("")}function R(){f(!1),l(null),h("")}async function b(T){T.preventDefault(),h(""),y(!0);try{a?await Ej(a.id,x):await Sj(x),R(),C()}catch(P){h(P instanceof qe?P.message:"unable to save time switch")}finally{y(!1)}}async function j(T){if(confirm(`Delete time switch "${T.name}"?`))try{await Cj(T.id),C()}catch(P){alert(P instanceof qe?P.message:"unable to delete time switch")}}const A=[{key:"name",header:"Name",render:T=>T.name},{key:"timezone",header:"Timezone",render:T=>u.jsx("span",{className:"inline-flex items-center rounded-full bg-blue-50 px-2 py-0.5 text-xs font-medium text-blue-700",children:T.timezone})},{key:"rules",header:"Rules",render:T=>{const P=T.rules?.length??0;return u.jsxs("span",{className:"text-gray-600",children:[P," rule",P!==1?"s":""]})}},{key:"actions",header:"",className:"w-24",render:T=>u.jsxs("div",{className:"flex gap-2",children:[u.jsx("button",{type:"button",onClick:P=>{P.stopPropagation(),_(T)},className:"text-sm text-blue-600 hover:text-blue-800",children:"Edit"}),u.jsx("button",{type:"button",onClick:P=>{P.stopPropagation(),j(T)},className:"text-sm text-red-600 hover:text-red-800",children:"Delete"})]})}];return c?u.jsxs("div",{children:[u.jsxs("div",{className:"flex items-center justify-between mb-6",children:[u.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:a?"Edit Time Switch":"New Time Switch"}),u.jsx("button",{type:"button",onClick:R,className:"text-sm text-gray-500 hover:text-gray-700",children:"Cancel"})]}),u.jsxs("form",{onSubmit:b,className:"max-w-2xl space-y-4",children:[p&&u.jsx("div",{className:"rounded-md bg-red-50 border border-red-200 px-3 py-2",children:u.jsx("p",{className:"text-sm text-red-700",children:p})}),u.jsx(Ae,{label:"Name",id:"ts_name",required:!0,value:x.name,onChange:T=>w({...x,name:T.currentTarget.value}),placeholder:"Business Hours"}),u.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.jsx(Cr,{label:"Timezone",id:"ts_timezone",value:x.timezone??"Australia/Sydney",onChange:T=>w({...x,timezone:T.currentTarget.value}),children:a4.map(T=>u.jsx("optgroup",{label:T.group,children:T.zones.map(P=>u.jsx("option",{value:P,children:P},P))},T.group))}),u.jsx(Ae,{label:"Default Destination",id:"ts_default_dest",value:x.default_dest??"",onChange:T=>w({...x,default_dest:T.currentTarget.value}),placeholder:"Node ID for after-hours"})]}),u.jsx(i4,{rules:x.rules,onChange:T=>w({...x,rules:T})}),u.jsx("div",{className:"pt-4 border-t border-gray-100",children:u.jsx("button",{type:"submit",disabled:g,className:"rounded-md bg-blue-600 px-4 py-2 text-sm font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:g?"Saving...":a?"Update Time Switch":"Create Time Switch"})})]})]}):u.jsxs("div",{children:[u.jsxs("div",{className:"flex items-center justify-between mb-6",children:[u.jsxs("div",{children:[u.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Time Switches"}),u.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Time-based routing rules for business hours, holidays, and schedules."})]}),u.jsx("button",{type:"button",onClick:E,className:"rounded-md bg-blue-600 px-4 py-2 text-sm font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors",children:"Add Time Switch"})]}),o?u.jsx("p",{className:"text-sm text-gray-400",children:"Loading..."}):u.jsx(sr,{columns:A,rows:e,keyFn:T=>T.id,total:e.length,limit:e.length||1,offset:0,onPageChange:()=>{},onRowClick:_,emptyMessage:"No time switches configured yet."})]})}function u4(){return u.jsxs("div",{children:[u.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Conference Bridges"}),u.jsx("p",{className:"mt-2 text-gray-600",children:"Conference bridge management and active participants."})]})}function c4(){const[e,r]=S.useState([]),[o,s]=S.useState(!0),[a,l]=S.useState(!1),[c,f]=S.useState(""),[p,h]=S.useState(null),g=S.useRef(null),y=S.useRef(null);function x(){s(!0),Ay().then(j=>r(j)).catch(()=>r([])).finally(()=>s(!1))}S.useEffect(()=>{x()},[]);async function w(j){if(!(!j||j.length===0)){f(""),l(!0);try{for(let A=0;A<j.length;A++)await $y(j[A]);x()}catch(A){f(A instanceof Error?A.message:"upload failed")}finally{l(!1),y.current&&(y.current.value="")}}}async function N(j){if(confirm(`Delete prompt "${j.name}"?`))try{await sj(j.id),E(),x()}catch(A){alert(A instanceof Error?A.message:"unable to delete prompt")}}function C(j){if(p===j.id){E();return}E();const A=new Audio(Fy(j.id));A.addEventListener("ended",()=>h(null)),A.addEventListener("error",()=>h(null)),A.play(),g.current=A,h(j.id)}function E(){g.current&&(g.current.pause(),g.current=null),h(null)}function _(j){return j<1024?`${j} B`:j<1024*1024?`${(j/1024).toFixed(1)} KB`:`${(j/(1024*1024)).toFixed(1)} MB`}function R(j){return new Date(j).toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}const b=[{key:"name",header:"Name",render:j=>j.name},{key:"filename",header:"Filename",render:j=>j.filename},{key:"format",header:"Format",render:j=>u.jsx("span",{className:"inline-flex items-center rounded-full px-2 py-0.5 text-xs font-medium bg-gray-100 text-gray-700",children:j.format.toUpperCase()})},{key:"file_size",header:"Size",render:j=>_(j.file_size)},{key:"created_at",header:"Uploaded",render:j=>R(j.created_at)},{key:"actions",header:"",className:"w-28",render:j=>u.jsxs("div",{className:"flex gap-2",children:[u.jsx("button",{type:"button",onClick:A=>{A.stopPropagation(),C(j)},className:"text-sm text-blue-600 hover:text-blue-800",children:p===j.id?"Stop":"Play"}),u.jsx("button",{type:"button",onClick:A=>{A.stopPropagation(),N(j)},className:"text-sm text-red-600 hover:text-red-800",children:"Delete"})]})}];return u.jsxs("div",{children:[u.jsxs("div",{className:"flex items-center justify-between mb-6",children:[u.jsxs("div",{children:[u.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Audio Prompts"}),u.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Upload and manage audio prompts for IVR menus and call flows."})]}),u.jsxs("div",{children:[u.jsx("input",{ref:y,type:"file",accept:".wav,.alaw,.al,.ulaw,.ul",multiple:!0,className:"hidden",onChange:j=>w(j.target.files)}),u.jsx("button",{type:"button",disabled:a,onClick:()=>y.current?.click(),className:"rounded-md bg-blue-600 px-4 py-2 text-sm font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:a?"Uploading...":"Upload Prompt"})]})]}),c&&u.jsx("div",{className:"rounded-md bg-red-50 border border-red-200 px-3 py-2 mb-4",children:u.jsx("p",{className:"text-sm text-red-700",children:c})}),o?u.jsx("p",{className:"text-sm text-gray-400",children:"Loading..."}):u.jsx(sr,{columns:b,rows:e,keyFn:j=>j.id,total:e.length,limit:e.length||1,offset:0,onPageChange:()=>{},emptyMessage:"No audio prompts uploaded yet."})]})}function d4(){return u.jsxs("div",{children:[u.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Recordings"}),u.jsx("p",{className:"mt-2 text-gray-600",children:"Call recording browser with playback and storage usage."})]})}const d0=20;function f4(){const[e,r]=S.useState([]),[o,s]=S.useState(0),[a,l]=S.useState(0),[c,f]=S.useState(!0),[p,h]=S.useState(""),[g,y]=S.useState(""),[x,w]=S.useState(""),[N,C]=S.useState("");function E(T){f(!0),oj({limit:d0,offset:T,search:p||void 0,direction:g||void 0,start_date:x||void 0,end_date:N||void 0}).then(P=>{r(P.items),s(P.total),l(T)}).catch(()=>{r([]),s(0)}).finally(()=>f(!1))}S.useEffect(()=>{E(0)},[]);function _(){E(0)}function R(){const T=ij({search:p||void 0,direction:g||void 0,start_date:x||void 0,end_date:N||void 0});window.open(T,"_blank")}function b(T){if(T==null)return"";const P=Math.floor(T/60),O=T%60;return`${P}:${O.toString().padStart(2,"0")}`}function j(T){return new Date(T).toLocaleString()}const A=[{key:"start_time",header:"Time",render:T=>u.jsx("span",{className:"whitespace-nowrap",children:j(T.start_time)})},{key:"direction",header:"Direction",render:T=>u.jsx(h4,{direction:T.direction})},{key:"caller",header:"From",render:T=>T.caller_id_name?u.jsxs("span",{children:[u.jsx("span",{className:"font-medium",children:T.caller_id_name})," ",u.jsx("span",{className:"text-gray-500",children:T.caller_id_num})]}):T.caller_id_num||""},{key:"callee",header:"To",render:T=>T.callee||""},{key:"duration",header:"Duration",render:T=>b(T.duration)},{key:"disposition",header:"Status",render:T=>u.jsx(p4,{disposition:T.disposition})},{key:"hangup_cause",header:"Cause",render:T=>u.jsx("span",{className:"text-xs text-gray-500",children:T.hangup_cause||""})}];return u.jsxs("div",{children:[u.jsxs("div",{className:"flex items-center justify-between mb-6",children:[u.jsxs("div",{children:[u.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Call History"}),u.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Searchable and filterable call detail records."})]}),u.jsx("button",{type:"button",onClick:R,className:"rounded-md border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50 transition-colors",children:"Export CSV"})]}),u.jsxs("div",{className:"flex flex-wrap items-end gap-3 mb-4",children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:"cdr_search",className:"block text-xs font-medium text-gray-500 mb-1",children:"Search"}),u.jsx("input",{id:"cdr_search",type:"text",value:p,onChange:T=>h(T.currentTarget.value),onKeyDown:T=>T.key==="Enter"&&_(),placeholder:"Name, number, or callee",className:"block w-56 rounded-md border border-gray-300 px-3 py-1.5 text-sm focus:border-blue-500 focus:ring-1 focus:ring-blue-500"})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"cdr_direction",className:"block text-xs font-medium text-gray-500 mb-1",children:"Direction"}),u.jsxs("select",{id:"cdr_direction",value:g,onChange:T=>y(T.currentTarget.value),className:"block w-32 rounded-md border border-gray-300 px-3 py-1.5 text-sm focus:border-blue-500 focus:ring-1 focus:ring-blue-500",children:[u.jsx("option",{value:"",children:"All"}),u.jsx("option",{value:"inbound",children:"Inbound"}),u.jsx("option",{value:"outbound",children:"Outbound"}),u.jsx("option",{value:"internal",children:"Internal"})]})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"cdr_start",className:"block text-xs font-medium text-gray-500 mb-1",children:"From"}),u.jsx("input",{id:"cdr_start",type:"date",value:x,onChange:T=>w(T.currentTarget.value),className:"block rounded-md border border-gray-300 px-3 py-1.5 text-sm focus:border-blue-500 focus:ring-1 focus:ring-blue-500"})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"cdr_end",className:"block text-xs font-medium text-gray-500 mb-1",children:"To"}),u.jsx("input",{id:"cdr_end",type:"date",value:N,onChange:T=>C(T.currentTarget.value),className:"block rounded-md border border-gray-300 px-3 py-1.5 text-sm focus:border-blue-500 focus:ring-1 focus:ring-blue-500"})]}),u.jsx("button",{type:"button",onClick:_,className:"rounded-md bg-blue-600 px-4 py-1.5 text-sm font-medium text-white hover:bg-blue-700 transition-colors",children:"Filter"}),(p||g||x||N)&&u.jsx("button",{type:"button",onClick:()=>{h(""),y(""),w(""),C(""),setTimeout(()=>E(0),0)},className:"text-sm text-gray-500 hover:text-gray-700",children:"Clear"})]}),c?u.jsx("p",{className:"text-sm text-gray-400",children:"Loading..."}):u.jsx(sr,{columns:A,rows:e,keyFn:T=>T.id,total:o,limit:d0,offset:a,onPageChange:E,emptyMessage:"No call records found."})]})}function h4({direction:e}){const r={inbound:"bg-blue-50 text-blue-700",outbound:"bg-emerald-50 text-emerald-700",internal:"bg-gray-100 text-gray-700"},o={inbound:"In",outbound:"Out",internal:"Int"};return u.jsx("span",{className:`inline-flex items-center rounded-full px-2 py-0.5 text-xs font-medium ${r[e]??"bg-gray-100 text-gray-700"}`,children:o[e]??e})}function p4({disposition:e}){const r={answered:"bg-green-50 text-green-700",no_answer:"bg-yellow-50 text-yellow-700",busy:"bg-orange-50 text-orange-700",cancelled:"bg-gray-100 text-gray-500",failed:"bg-red-50 text-red-700",in_progress:"bg-blue-50 text-blue-700"},o={answered:"Answered",no_answer:"No Answer",busy:"Busy",cancelled:"Cancelled",failed:"Failed",in_progress:"In Progress"};return u.jsx("span",{className:`inline-flex items-center rounded-full px-2 py-0.5 text-xs font-medium ${r[e]??"bg-gray-100 text-gray-700"}`,children:o[e]??e})}function m4(){const[e,r]=S.useState(!0),[o,s]=S.useState(!1),[a,l]=S.useState(""),[c,f]=S.useState(""),[p,h]=S.useState(!1),[g,y]=S.useState({host:"",port:"587",from:"",username:"",password:"",tls:"starttls"});S.useEffect(()=>{r(!0),aj().then(w=>{y({host:w.smtp.host,port:w.smtp.port||"587",from:w.smtp.from,username:w.smtp.username,password:"",tls:w.smtp.tls||"starttls"}),h(w.smtp.has_password)}).catch(()=>{l("Failed to load settings")}).finally(()=>r(!1))},[]);async function x(w){w.preventDefault(),l(""),f(""),s(!0);try{const N=await lj({smtp:g});h(N.smtp.has_password),y(C=>({...C,password:""})),f("SMTP settings saved")}catch(N){l(N instanceof qe?N.message:"failed to save settings")}finally{s(!1)}}return e?u.jsxs("div",{children:[u.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Settings"}),u.jsx("p",{className:"mt-4 text-sm text-gray-400",children:"Loading..."})]}):u.jsxs("div",{children:[u.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Settings"}),u.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"System configuration."}),u.jsxs("div",{className:"mt-8 max-w-lg",children:[u.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"SMTP / Email"}),u.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Configure the outgoing mail server used for voicemail email notifications."}),u.jsxs("form",{onSubmit:x,className:"mt-4 space-y-4",children:[a&&u.jsx("div",{className:"rounded-md bg-red-50 border border-red-200 px-3 py-2",children:u.jsx("p",{className:"text-sm text-red-700",children:a})}),c&&u.jsx("div",{className:"rounded-md bg-green-50 border border-green-200 px-3 py-2",children:u.jsx("p",{className:"text-sm text-green-700",children:c})}),u.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.jsx(Ae,{label:"SMTP Host",id:"smtp_host",value:g.host,onChange:w=>y({...g,host:w.currentTarget.value}),placeholder:"smtp.example.com"}),u.jsx(Ae,{label:"Port",id:"smtp_port",value:g.port,onChange:w=>y({...g,port:w.currentTarget.value}),placeholder:"587"})]}),u.jsx(Ae,{label:"From Address",id:"smtp_from",type:"email",value:g.from,onChange:w=>y({...g,from:w.currentTarget.value}),placeholder:"pbx@example.com"}),u.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.jsx(Ae,{label:"Username",id:"smtp_username",value:g.username,onChange:w=>y({...g,username:w.currentTarget.value}),placeholder:"user@example.com",autoComplete:"off"}),u.jsx(Ae,{label:p?"Password (leave blank to keep)":"Password",id:"smtp_password",type:"password",value:g.password,onChange:w=>y({...g,password:w.currentTarget.value}),autoComplete:"off"})]}),u.jsxs(Cr,{label:"Encryption",id:"smtp_tls",value:g.tls,onChange:w=>y({...g,tls:w.currentTarget.value}),children:[u.jsx("option",{value:"starttls",children:"STARTTLS (port 587)"}),u.jsx("option",{value:"tls",children:"Implicit TLS (port 465)"}),u.jsx("option",{value:"none",children:"None (port 25)"})]}),u.jsx("div",{className:"pt-4 border-t border-gray-100",children:u.jsx("button",{type:"submit",disabled:o,className:"rounded-md bg-blue-600 px-4 py-2 text-sm font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:o?"Saving...":"Save SMTP Settings"})})]})]})]})}function g4(){return u.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:u.jsxs("div",{className:"text-center",children:[u.jsx("h1",{className:"text-4xl font-bold text-gray-900",children:"404"}),u.jsx("p",{className:"mt-2 text-gray-600",children:"Page not found."}),u.jsx(_d,{to:"/",className:"mt-4 inline-block text-blue-600 hover:text-blue-800",children:"Go to Dashboard"})]})})}const y4=Vw([{path:"/login",element:u.jsx(Nb,{})},{path:"/setup",element:u.jsx(Eb,{})},{element:u.jsx(tb,{}),children:[{path:"/",element:u.jsx(kb,{})},{path:"/call-flows",element:u.jsx($j,{})},{path:"/trunks",element:u.jsx(Fj,{})},{path:"/inbound-numbers",element:u.jsx(Oj,{})},{path:"/extensions",element:u.jsx(Hj,{})},{path:"/voicemail",element:u.jsx(Wj,{})},{path:"/ring-groups",element:u.jsx(Xj,{})},{path:"/ivr-menus",element:u.jsx(e4,{})},{path:"/time-switches",element:u.jsx(l4,{})},{path:"/conferences",element:u.jsx(u4,{})},{path:"/prompts",element:u.jsx(c4,{})},{path:"/recordings",element:u.jsx(d4,{})},{path:"/call-history",element:u.jsx(f4,{})},{path:"/settings",element:u.jsx(m4,{})}]},{path:"*",element:u.jsx(g4,{})}]);function x4(){return u.jsx(Jw,{router:y4})}jv.createRoot(document.getElementById("root")).render(u.jsx(S.StrictMode,{children:u.jsx(x4,{})}));
