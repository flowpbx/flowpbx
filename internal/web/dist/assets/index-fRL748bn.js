function kv(e,r){for(var o=0;o<r.length;o++){const a=r[o];if(typeof a!="string"&&!Array.isArray(a)){for(const l in a)if(l!=="default"&&!(l in e)){const u=Object.getOwnPropertyDescriptor(a,l);u&&Object.defineProperty(e,l,u.get?u:{enumerable:!0,get:()=>a[l]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))a(l);new MutationObserver(l=>{for(const u of l)if(u.type==="childList")for(const c of u.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&a(c)}).observe(document,{childList:!0,subtree:!0});function o(l){const u={};return l.integrity&&(u.integrity=l.integrity),l.referrerPolicy&&(u.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?u.credentials="include":l.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function a(l){if(l.ep)return;l.ep=!0;const u=o(l);fetch(l.href,u)}})();function v0(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Nc={exports:{}},la={},Sc={exports:{}},Ae={};var gm;function Ev(){if(gm)return Ae;gm=1;var e=Symbol.for("react.element"),r=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),c=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),y=Symbol.iterator;function g(T){return T===null||typeof T!="object"?null:(T=y&&T[y]||T["@@iterator"],typeof T=="function"?T:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},j=Object.assign,E={};function S(T,U,re){this.props=T,this.context=U,this.refs=E,this.updater=re||w}S.prototype.isReactComponent={},S.prototype.setState=function(T,U){if(typeof T!="object"&&typeof T!="function"&&T!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,T,U,"setState")},S.prototype.forceUpdate=function(T){this.updater.enqueueForceUpdate(this,T,"forceUpdate")};function _(){}_.prototype=S.prototype;function R(T,U,re){this.props=T,this.context=U,this.refs=E,this.updater=re||w}var b=R.prototype=new _;b.constructor=R,j(b,S.prototype),b.isPureReactComponent=!0;var P=Array.isArray,$=Object.prototype.hasOwnProperty,D={current:null},M={key:!0,ref:!0,__self:!0,__source:!0};function H(T,U,re){var oe,ue={},pe=null,he=null;if(U!=null)for(oe in U.ref!==void 0&&(he=U.ref),U.key!==void 0&&(pe=""+U.key),U)$.call(U,oe)&&!M.hasOwnProperty(oe)&&(ue[oe]=U[oe]);var ie=arguments.length-2;if(ie===1)ue.children=re;else if(1<ie){for(var me=Array(ie),Le=0;Le<ie;Le++)me[Le]=arguments[Le+2];ue.children=me}if(T&&T.defaultProps)for(oe in ie=T.defaultProps,ie)ue[oe]===void 0&&(ue[oe]=ie[oe]);return{$$typeof:e,type:T,key:pe,ref:he,props:ue,_owner:D.current}}function Y(T,U){return{$$typeof:e,type:T.type,key:U,ref:T.ref,props:T.props,_owner:T._owner}}function B(T){return typeof T=="object"&&T!==null&&T.$$typeof===e}function I(T){var U={"=":"=0",":":"=2"};return"$"+T.replace(/[=:]/g,function(re){return U[re]})}var F=/\/+/g;function L(T,U){return typeof T=="object"&&T!==null&&T.key!=null?I(""+T.key):U.toString(36)}function k(T,U,re,oe,ue){var pe=typeof T;(pe==="undefined"||pe==="boolean")&&(T=null);var he=!1;if(T===null)he=!0;else switch(pe){case"string":case"number":he=!0;break;case"object":switch(T.$$typeof){case e:case r:he=!0}}if(he)return he=T,ue=ue(he),T=oe===""?"."+L(he,0):oe,P(ue)?(re="",T!=null&&(re=T.replace(F,"$&/")+"/"),k(ue,U,re,"",function(Le){return Le})):ue!=null&&(B(ue)&&(ue=Y(ue,re+(!ue.key||he&&he.key===ue.key?"":(""+ue.key).replace(F,"$&/")+"/")+T)),U.push(ue)),1;if(he=0,oe=oe===""?".":oe+":",P(T))for(var ie=0;ie<T.length;ie++){pe=T[ie];var me=oe+L(pe,ie);he+=k(pe,U,re,me,ue)}else if(me=g(T),typeof me=="function")for(T=me.call(T),ie=0;!(pe=T.next()).done;)pe=pe.value,me=oe+L(pe,ie++),he+=k(pe,U,re,me,ue);else if(pe==="object")throw U=String(T),Error("Objects are not valid as a React child (found: "+(U==="[object Object]"?"object with keys {"+Object.keys(T).join(", ")+"}":U)+"). If you meant to render a collection of children, use an array instead.");return he}function A(T,U,re){if(T==null)return T;var oe=[],ue=0;return k(T,oe,"","",function(pe){return U.call(re,pe,ue++)}),oe}function X(T){if(T._status===-1){var U=T._result;U=U(),U.then(function(re){(T._status===0||T._status===-1)&&(T._status=1,T._result=re)},function(re){(T._status===0||T._status===-1)&&(T._status=2,T._result=re)}),T._status===-1&&(T._status=0,T._result=U)}if(T._status===1)return T._result.default;throw T._result}var Q={current:null},O={transition:null},K={ReactCurrentDispatcher:Q,ReactCurrentBatchConfig:O,ReactCurrentOwner:D};function z(){throw Error("act(...) is not supported in production builds of React.")}return Ae.Children={map:A,forEach:function(T,U,re){A(T,function(){U.apply(this,arguments)},re)},count:function(T){var U=0;return A(T,function(){U++}),U},toArray:function(T){return A(T,function(U){return U})||[]},only:function(T){if(!B(T))throw Error("React.Children.only expected to receive a single React element child.");return T}},Ae.Component=S,Ae.Fragment=o,Ae.Profiler=l,Ae.PureComponent=R,Ae.StrictMode=a,Ae.Suspense=m,Ae.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=K,Ae.act=z,Ae.cloneElement=function(T,U,re){if(T==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+T+".");var oe=j({},T.props),ue=T.key,pe=T.ref,he=T._owner;if(U!=null){if(U.ref!==void 0&&(pe=U.ref,he=D.current),U.key!==void 0&&(ue=""+U.key),T.type&&T.type.defaultProps)var ie=T.type.defaultProps;for(me in U)$.call(U,me)&&!M.hasOwnProperty(me)&&(oe[me]=U[me]===void 0&&ie!==void 0?ie[me]:U[me])}var me=arguments.length-2;if(me===1)oe.children=re;else if(1<me){ie=Array(me);for(var Le=0;Le<me;Le++)ie[Le]=arguments[Le+2];oe.children=ie}return{$$typeof:e,type:T.type,key:ue,ref:pe,props:oe,_owner:he}},Ae.createContext=function(T){return T={$$typeof:c,_currentValue:T,_currentValue2:T,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},T.Provider={$$typeof:u,_context:T},T.Consumer=T},Ae.createElement=H,Ae.createFactory=function(T){var U=H.bind(null,T);return U.type=T,U},Ae.createRef=function(){return{current:null}},Ae.forwardRef=function(T){return{$$typeof:f,render:T}},Ae.isValidElement=B,Ae.lazy=function(T){return{$$typeof:x,_payload:{_status:-1,_result:T},_init:X}},Ae.memo=function(T,U){return{$$typeof:h,type:T,compare:U===void 0?null:U}},Ae.startTransition=function(T){var U=O.transition;O.transition={};try{T()}finally{O.transition=U}},Ae.unstable_act=z,Ae.useCallback=function(T,U){return Q.current.useCallback(T,U)},Ae.useContext=function(T){return Q.current.useContext(T)},Ae.useDebugValue=function(){},Ae.useDeferredValue=function(T){return Q.current.useDeferredValue(T)},Ae.useEffect=function(T,U){return Q.current.useEffect(T,U)},Ae.useId=function(){return Q.current.useId()},Ae.useImperativeHandle=function(T,U,re){return Q.current.useImperativeHandle(T,U,re)},Ae.useInsertionEffect=function(T,U){return Q.current.useInsertionEffect(T,U)},Ae.useLayoutEffect=function(T,U){return Q.current.useLayoutEffect(T,U)},Ae.useMemo=function(T,U){return Q.current.useMemo(T,U)},Ae.useReducer=function(T,U,re){return Q.current.useReducer(T,U,re)},Ae.useRef=function(T){return Q.current.useRef(T)},Ae.useState=function(T){return Q.current.useState(T)},Ae.useSyncExternalStore=function(T,U,re){return Q.current.useSyncExternalStore(T,U,re)},Ae.useTransition=function(){return Q.current.useTransition()},Ae.version="18.3.1",Ae}var xm;function Da(){return xm||(xm=1,Sc.exports=Ev()),Sc.exports}var ym;function Cv(){if(ym)return la;ym=1;var e=Da(),r=Symbol.for("react.element"),o=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,l=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u={key:!0,ref:!0,__self:!0,__source:!0};function c(f,m,h){var x,y={},g=null,w=null;h!==void 0&&(g=""+h),m.key!==void 0&&(g=""+m.key),m.ref!==void 0&&(w=m.ref);for(x in m)a.call(m,x)&&!u.hasOwnProperty(x)&&(y[x]=m[x]);if(f&&f.defaultProps)for(x in m=f.defaultProps,m)y[x]===void 0&&(y[x]=m[x]);return{$$typeof:r,type:f,key:g,ref:w,props:y,_owner:l.current}}return la.Fragment=o,la.jsx=c,la.jsxs=c,la}var vm;function Pv(){return vm||(vm=1,Nc.exports=Cv()),Nc.exports}var s=Pv(),N=Da();const w0=v0(N),Rv=kv({__proto__:null,default:w0},[N]);var Ks={},jc={exports:{}},Zt={},kc={exports:{}},Ec={};var wm;function Mv(){return wm||(wm=1,(function(e){function r(O,K){var z=O.length;O.push(K);e:for(;0<z;){var T=z-1>>>1,U=O[T];if(0<l(U,K))O[T]=K,O[z]=U,z=T;else break e}}function o(O){return O.length===0?null:O[0]}function a(O){if(O.length===0)return null;var K=O[0],z=O.pop();if(z!==K){O[0]=z;e:for(var T=0,U=O.length,re=U>>>1;T<re;){var oe=2*(T+1)-1,ue=O[oe],pe=oe+1,he=O[pe];if(0>l(ue,z))pe<U&&0>l(he,ue)?(O[T]=he,O[pe]=z,T=pe):(O[T]=ue,O[oe]=z,T=oe);else if(pe<U&&0>l(he,z))O[T]=he,O[pe]=z,T=pe;else break e}}return K}function l(O,K){var z=O.sortIndex-K.sortIndex;return z!==0?z:O.id-K.id}if(typeof performance=="object"&&typeof performance.now=="function"){var u=performance;e.unstable_now=function(){return u.now()}}else{var c=Date,f=c.now();e.unstable_now=function(){return c.now()-f}}var m=[],h=[],x=1,y=null,g=3,w=!1,j=!1,E=!1,S=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,R=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(O){for(var K=o(h);K!==null;){if(K.callback===null)a(h);else if(K.startTime<=O)a(h),K.sortIndex=K.expirationTime,r(m,K);else break;K=o(h)}}function P(O){if(E=!1,b(O),!j)if(o(m)!==null)j=!0,X($);else{var K=o(h);K!==null&&Q(P,K.startTime-O)}}function $(O,K){j=!1,E&&(E=!1,_(H),H=-1),w=!0;var z=g;try{for(b(K),y=o(m);y!==null&&(!(y.expirationTime>K)||O&&!I());){var T=y.callback;if(typeof T=="function"){y.callback=null,g=y.priorityLevel;var U=T(y.expirationTime<=K);K=e.unstable_now(),typeof U=="function"?y.callback=U:y===o(m)&&a(m),b(K)}else a(m);y=o(m)}if(y!==null)var re=!0;else{var oe=o(h);oe!==null&&Q(P,oe.startTime-K),re=!1}return re}finally{y=null,g=z,w=!1}}var D=!1,M=null,H=-1,Y=5,B=-1;function I(){return!(e.unstable_now()-B<Y)}function F(){if(M!==null){var O=e.unstable_now();B=O;var K=!0;try{K=M(!0,O)}finally{K?L():(D=!1,M=null)}}else D=!1}var L;if(typeof R=="function")L=function(){R(F)};else if(typeof MessageChannel<"u"){var k=new MessageChannel,A=k.port2;k.port1.onmessage=F,L=function(){A.postMessage(null)}}else L=function(){S(F,0)};function X(O){M=O,D||(D=!0,L())}function Q(O,K){H=S(function(){O(e.unstable_now())},K)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(O){O.callback=null},e.unstable_continueExecution=function(){j||w||(j=!0,X($))},e.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Y=0<O?Math.floor(1e3/O):5},e.unstable_getCurrentPriorityLevel=function(){return g},e.unstable_getFirstCallbackNode=function(){return o(m)},e.unstable_next=function(O){switch(g){case 1:case 2:case 3:var K=3;break;default:K=g}var z=g;g=K;try{return O()}finally{g=z}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(O,K){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var z=g;g=O;try{return K()}finally{g=z}},e.unstable_scheduleCallback=function(O,K,z){var T=e.unstable_now();switch(typeof z=="object"&&z!==null?(z=z.delay,z=typeof z=="number"&&0<z?T+z:T):z=T,O){case 1:var U=-1;break;case 2:U=250;break;case 5:U=1073741823;break;case 4:U=1e4;break;default:U=5e3}return U=z+U,O={id:x++,callback:K,priorityLevel:O,startTime:z,expirationTime:U,sortIndex:-1},z>T?(O.sortIndex=z,r(h,O),o(m)===null&&O===o(h)&&(E?(_(H),H=-1):E=!0,Q(P,z-T))):(O.sortIndex=U,r(m,O),j||w||(j=!0,X($))),O},e.unstable_shouldYield=I,e.unstable_wrapCallback=function(O){var K=g;return function(){var z=g;g=K;try{return O.apply(this,arguments)}finally{g=z}}}})(Ec)),Ec}var bm;function Tv(){return bm||(bm=1,kc.exports=Mv()),kc.exports}var _m;function Dv(){if(_m)return Zt;_m=1;var e=Da(),r=Tv();function o(t){for(var n="https://reactjs.org/docs/error-decoder.html?invariant="+t,i=1;i<arguments.length;i++)n+="&args[]="+encodeURIComponent(arguments[i]);return"Minified React error #"+t+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,l={};function u(t,n){c(t,n),c(t+"Capture",n)}function c(t,n){for(l[t]=n,t=0;t<n.length;t++)a.add(n[t])}var f=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),m=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,x={},y={};function g(t){return m.call(y,t)?!0:m.call(x,t)?!1:h.test(t)?y[t]=!0:(x[t]=!0,!1)}function w(t,n,i,d){if(i!==null&&i.type===0)return!1;switch(typeof n){case"function":case"symbol":return!0;case"boolean":return d?!1:i!==null?!i.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function j(t,n,i,d){if(n===null||typeof n>"u"||w(t,n,i,d))return!0;if(d)return!1;if(i!==null)switch(i.type){case 3:return!n;case 4:return n===!1;case 5:return isNaN(n);case 6:return isNaN(n)||1>n}return!1}function E(t,n,i,d,p,v,C){this.acceptsBooleans=n===2||n===3||n===4,this.attributeName=d,this.attributeNamespace=p,this.mustUseProperty=i,this.propertyName=t,this.type=n,this.sanitizeURL=v,this.removeEmptyString=C}var S={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){S[t]=new E(t,0,!1,t,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var n=t[0];S[n]=new E(n,1,!1,t[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(t){S[t]=new E(t,2,!1,t.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){S[t]=new E(t,2,!1,t,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){S[t]=new E(t,3,!1,t.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(t){S[t]=new E(t,3,!0,t,null,!1,!1)}),["capture","download"].forEach(function(t){S[t]=new E(t,4,!1,t,null,!1,!1)}),["cols","rows","size","span"].forEach(function(t){S[t]=new E(t,6,!1,t,null,!1,!1)}),["rowSpan","start"].forEach(function(t){S[t]=new E(t,5,!1,t.toLowerCase(),null,!1,!1)});var _=/[\-:]([a-z])/g;function R(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var n=t.replace(_,R);S[n]=new E(n,1,!1,t,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var n=t.replace(_,R);S[n]=new E(n,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(t){var n=t.replace(_,R);S[n]=new E(n,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(t){S[t]=new E(t,1,!1,t.toLowerCase(),null,!1,!1)}),S.xlinkHref=new E("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(t){S[t]=new E(t,1,!1,t.toLowerCase(),null,!0,!0)});function b(t,n,i,d){var p=S.hasOwnProperty(n)?S[n]:null;(p!==null?p.type!==0:d||!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(j(n,i,p,d)&&(i=null),d||p===null?g(n)&&(i===null?t.removeAttribute(n):t.setAttribute(n,""+i)):p.mustUseProperty?t[p.propertyName]=i===null?p.type===3?!1:"":i:(n=p.attributeName,d=p.attributeNamespace,i===null?t.removeAttribute(n):(p=p.type,i=p===3||p===4&&i===!0?"":""+i,d?t.setAttributeNS(d,n,i):t.setAttribute(n,i))))}var P=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,$=Symbol.for("react.element"),D=Symbol.for("react.portal"),M=Symbol.for("react.fragment"),H=Symbol.for("react.strict_mode"),Y=Symbol.for("react.profiler"),B=Symbol.for("react.provider"),I=Symbol.for("react.context"),F=Symbol.for("react.forward_ref"),L=Symbol.for("react.suspense"),k=Symbol.for("react.suspense_list"),A=Symbol.for("react.memo"),X=Symbol.for("react.lazy"),Q=Symbol.for("react.offscreen"),O=Symbol.iterator;function K(t){return t===null||typeof t!="object"?null:(t=O&&t[O]||t["@@iterator"],typeof t=="function"?t:null)}var z=Object.assign,T;function U(t){if(T===void 0)try{throw Error()}catch(i){var n=i.stack.trim().match(/\n( *(at )?)/);T=n&&n[1]||""}return`
`+T+t}var re=!1;function oe(t,n){if(!t||re)return"";re=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(n)if(n=function(){throw Error()},Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(n,[])}catch(ne){var d=ne}Reflect.construct(t,[],n)}else{try{n.call()}catch(ne){d=ne}t.call(n.prototype)}else{try{throw Error()}catch(ne){d=ne}t()}}catch(ne){if(ne&&d&&typeof ne.stack=="string"){for(var p=ne.stack.split(`
`),v=d.stack.split(`
`),C=p.length-1,V=v.length-1;1<=C&&0<=V&&p[C]!==v[V];)V--;for(;1<=C&&0<=V;C--,V--)if(p[C]!==v[V]){if(C!==1||V!==1)do if(C--,V--,0>V||p[C]!==v[V]){var G=`
`+p[C].replace(" at new "," at ");return t.displayName&&G.includes("<anonymous>")&&(G=G.replace("<anonymous>",t.displayName)),G}while(1<=C&&0<=V);break}}}finally{re=!1,Error.prepareStackTrace=i}return(t=t?t.displayName||t.name:"")?U(t):""}function ue(t){switch(t.tag){case 5:return U(t.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return t=oe(t.type,!1),t;case 11:return t=oe(t.type.render,!1),t;case 1:return t=oe(t.type,!0),t;default:return""}}function pe(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case M:return"Fragment";case D:return"Portal";case Y:return"Profiler";case H:return"StrictMode";case L:return"Suspense";case k:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case I:return(t.displayName||"Context")+".Consumer";case B:return(t._context.displayName||"Context")+".Provider";case F:var n=t.render;return t=t.displayName,t||(t=n.displayName||n.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case A:return n=t.displayName||null,n!==null?n:pe(t.type)||"Memo";case X:n=t._payload,t=t._init;try{return pe(t(n))}catch{}}return null}function he(t){var n=t.type;switch(t.tag){case 24:return"Cache";case 9:return(n.displayName||"Context")+".Consumer";case 10:return(n._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=n.render,t=t.displayName||t.name||"",n.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return n;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return pe(n);case 8:return n===H?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n}return null}function ie(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function me(t){var n=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function Le(t){var n=me(t)?"checked":"value",i=Object.getOwnPropertyDescriptor(t.constructor.prototype,n),d=""+t[n];if(!t.hasOwnProperty(n)&&typeof i<"u"&&typeof i.get=="function"&&typeof i.set=="function"){var p=i.get,v=i.set;return Object.defineProperty(t,n,{configurable:!0,get:function(){return p.call(this)},set:function(C){d=""+C,v.call(this,C)}}),Object.defineProperty(t,n,{enumerable:i.enumerable}),{getValue:function(){return d},setValue:function(C){d=""+C},stopTracking:function(){t._valueTracker=null,delete t[n]}}}}function ze(t){t._valueTracker||(t._valueTracker=Le(t))}function xe(t){if(!t)return!1;var n=t._valueTracker;if(!n)return!0;var i=n.getValue(),d="";return t&&(d=me(t)?t.checked?"true":"false":t.value),t=d,t!==i?(n.setValue(t),!0):!1}function Pe(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Ve(t,n){var i=n.checked;return z({},n,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:i??t._wrapperState.initialChecked})}function Qe(t,n){var i=n.defaultValue==null?"":n.defaultValue,d=n.checked!=null?n.checked:n.defaultChecked;i=ie(n.value!=null?n.value:i),t._wrapperState={initialChecked:d,initialValue:i,controlled:n.type==="checkbox"||n.type==="radio"?n.checked!=null:n.value!=null}}function He(t,n){n=n.checked,n!=null&&b(t,"checked",n,!1)}function ut(t,n){He(t,n);var i=ie(n.value),d=n.type;if(i!=null)d==="number"?(i===0&&t.value===""||t.value!=i)&&(t.value=""+i):t.value!==""+i&&(t.value=""+i);else if(d==="submit"||d==="reset"){t.removeAttribute("value");return}n.hasOwnProperty("value")?Pt(t,n.type,i):n.hasOwnProperty("defaultValue")&&Pt(t,n.type,ie(n.defaultValue)),n.checked==null&&n.defaultChecked!=null&&(t.defaultChecked=!!n.defaultChecked)}function en(t,n,i){if(n.hasOwnProperty("value")||n.hasOwnProperty("defaultValue")){var d=n.type;if(!(d!=="submit"&&d!=="reset"||n.value!==void 0&&n.value!==null))return;n=""+t._wrapperState.initialValue,i||n===t.value||(t.value=n),t.defaultValue=n}i=t.name,i!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,i!==""&&(t.name=i)}function Pt(t,n,i){(n!=="number"||Pe(t.ownerDocument)!==t)&&(i==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+i&&(t.defaultValue=""+i))}var zt=Array.isArray;function Ot(t,n,i,d){if(t=t.options,n){n={};for(var p=0;p<i.length;p++)n["$"+i[p]]=!0;for(i=0;i<t.length;i++)p=n.hasOwnProperty("$"+t[i].value),t[i].selected!==p&&(t[i].selected=p),p&&d&&(t[i].defaultSelected=!0)}else{for(i=""+ie(i),n=null,p=0;p<t.length;p++){if(t[p].value===i){t[p].selected=!0,d&&(t[p].defaultSelected=!0);return}n!==null||t[p].disabled||(n=t[p])}n!==null&&(n.selected=!0)}}function Cn(t,n){if(n.dangerouslySetInnerHTML!=null)throw Error(o(91));return z({},n,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Un(t,n){var i=n.value;if(i==null){if(i=n.children,n=n.defaultValue,i!=null){if(n!=null)throw Error(o(92));if(zt(i)){if(1<i.length)throw Error(o(93));i=i[0]}n=i}n==null&&(n=""),i=n}t._wrapperState={initialValue:ie(i)}}function Ht(t,n){var i=ie(n.value),d=ie(n.defaultValue);i!=null&&(i=""+i,i!==t.value&&(t.value=i),n.defaultValue==null&&t.defaultValue!==i&&(t.defaultValue=i)),d!=null&&(t.defaultValue=""+d)}function tn(t){var n=t.textContent;n===t._wrapperState.initialValue&&n!==""&&n!==null&&(t.value=n)}function fn(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function nn(t,n){return t==null||t==="http://www.w3.org/1999/xhtml"?fn(n):t==="http://www.w3.org/2000/svg"&&n==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var St,Bt=(function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(n,i,d,p){MSApp.execUnsafeLocalFunction(function(){return t(n,i,d,p)})}:t})(function(t,n){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=n;else{for(St=St||document.createElement("div"),St.innerHTML="<svg>"+n.valueOf().toString()+"</svg>",n=St.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;n.firstChild;)t.appendChild(n.firstChild)}});function hn(t,n){if(n){var i=t.firstChild;if(i&&i===t.lastChild&&i.nodeType===3){i.nodeValue=n;return}}t.textContent=n}var ur={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},io=["Webkit","ms","Moz","O"];Object.keys(ur).forEach(function(t){io.forEach(function(n){n=n+t.charAt(0).toUpperCase()+t.substring(1),ur[n]=ur[t]})});function $o(t,n,i){return n==null||typeof n=="boolean"||n===""?"":i||typeof n!="number"||n===0||ur.hasOwnProperty(t)&&ur[t]?(""+n).trim():n+"px"}function Vt(t,n){t=t.style;for(var i in n)if(n.hasOwnProperty(i)){var d=i.indexOf("--")===0,p=$o(i,n[i],d);i==="float"&&(i="cssFloat"),d?t.setProperty(i,p):t[i]=p}}var Fo=z({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Pr(t,n){if(n){if(Fo[t]&&(n.children!=null||n.dangerouslySetInnerHTML!=null))throw Error(o(137,t));if(n.dangerouslySetInnerHTML!=null){if(n.children!=null)throw Error(o(60));if(typeof n.dangerouslySetInnerHTML!="object"||!("__html"in n.dangerouslySetInnerHTML))throw Error(o(61))}if(n.style!=null&&typeof n.style!="object")throw Error(o(62))}}function Rr(t,n){if(t.indexOf("-")===-1)return typeof n.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ao=null;function Mr(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Wn=null,Pn=null,mn=null;function Oo(t){if(t=Yi(t)){if(typeof Wn!="function")throw Error(o(280));var n=t.stateNode;n&&(n=us(n),Wn(t.stateNode,t.type,n))}}function so(t){Pn?mn?mn.push(t):mn=[t]:Pn=t}function Ho(){if(Pn){var t=Pn,n=mn;if(mn=Pn=null,Oo(t),n)for(t=0;t<n.length;t++)Oo(n[t])}}function lo(t,n){return t(n)}function cr(){}var Xn=!1;function uo(t,n,i){if(Xn)return t(n,i);Xn=!0;try{return lo(t,n,i)}finally{Xn=!1,(Pn!==null||mn!==null)&&(cr(),Ho())}}function dr(t,n){var i=t.stateNode;if(i===null)return null;var d=us(i);if(d===null)return null;i=d[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(t=t.type,d=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!d;break e;default:t=!1}if(t)return null;if(i&&typeof i!="function")throw Error(o(231,n,typeof i));return i}var co=!1;if(f)try{var W={};Object.defineProperty(W,"passive",{get:function(){co=!0}}),window.addEventListener("test",W,W),window.removeEventListener("test",W,W)}catch{co=!1}function q(t,n,i,d,p,v,C,V,G){var ne=Array.prototype.slice.call(arguments,3);try{n.apply(i,ne)}catch(le){this.onError(le)}}var te=!1,se=null,de=!1,Ne=null,ye={onError:function(t){te=!0,se=t}};function _e(t,n,i,d,p,v,C,V,G){te=!1,se=null,q.apply(ye,arguments)}function ke(t,n,i,d,p,v,C,V,G){if(_e.apply(this,arguments),te){if(te){var ne=se;te=!1,se=null}else throw Error(o(198));de||(de=!0,Ne=ne)}}function we(t){var n=t,i=t;if(t.alternate)for(;n.return;)n=n.return;else{t=n;do n=t,(n.flags&4098)!==0&&(i=n.return),t=n.return;while(t)}return n.tag===3?i:null}function Re(t){if(t.tag===13){var n=t.memoizedState;if(n===null&&(t=t.alternate,t!==null&&(n=t.memoizedState)),n!==null)return n.dehydrated}return null}function je(t){if(we(t)!==t)throw Error(o(188))}function Be(t){var n=t.alternate;if(!n){if(n=we(t),n===null)throw Error(o(188));return n!==t?null:t}for(var i=t,d=n;;){var p=i.return;if(p===null)break;var v=p.alternate;if(v===null){if(d=p.return,d!==null){i=d;continue}break}if(p.child===v.child){for(v=p.child;v;){if(v===i)return je(p),t;if(v===d)return je(p),n;v=v.sibling}throw Error(o(188))}if(i.return!==d.return)i=p,d=v;else{for(var C=!1,V=p.child;V;){if(V===i){C=!0,i=p,d=v;break}if(V===d){C=!0,d=p,i=v;break}V=V.sibling}if(!C){for(V=v.child;V;){if(V===i){C=!0,i=v,d=p;break}if(V===d){C=!0,d=v,i=p;break}V=V.sibling}if(!C)throw Error(o(189))}}if(i.alternate!==d)throw Error(o(190))}if(i.tag!==3)throw Error(o(188));return i.stateNode.current===i?t:n}function Fe(t){return t=Be(t),t!==null?ct(t):null}function ct(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var n=ct(t);if(n!==null)return n;t=t.sibling}return null}var at=r.unstable_scheduleCallback,ht=r.unstable_cancelCallback,Ye=r.unstable_shouldYield,jt=r.unstable_requestPaint,Ge=r.unstable_now,fr=r.unstable_getCurrentPriorityLevel,Ut=r.unstable_ImmediatePriority,At=r.unstable_UserBlockingPriority,Yn=r.unstable_NormalPriority,hr=r.unstable_LowPriority,pn=r.unstable_IdlePriority,gn=null,kt=null;function Oe(t){if(kt&&typeof kt.onCommitFiberRoot=="function")try{kt.onCommitFiberRoot(gn,t,void 0,(t.current.flags&128)===128)}catch{}}var Ze=Math.clz32?Math.clz32:Je,Kn=Math.log,Rn=Math.LN2;function Je(t){return t>>>=0,t===0?32:31-(Kn(t)/Rn|0)|0}var Mn=64,mr=4194304;function Gn(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Bo(t,n){var i=t.pendingLanes;if(i===0)return 0;var d=0,p=t.suspendedLanes,v=t.pingedLanes,C=i&268435455;if(C!==0){var V=C&~p;V!==0?d=Gn(V):(v&=C,v!==0&&(d=Gn(v)))}else C=i&~p,C!==0?d=Gn(C):v!==0&&(d=Gn(v));if(d===0)return 0;if(n!==0&&n!==d&&(n&p)===0&&(p=d&-d,v=n&-n,p>=v||p===16&&(v&4194240)!==0))return n;if((d&4)!==0&&(d|=i&16),n=t.entangledLanes,n!==0)for(t=t.entanglements,n&=d;0<n;)i=31-Ze(n),p=1<<i,d|=t[i],n&=~p;return d}function Xa(t,n){switch(t){case 1:case 2:case 4:return n+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Wl(t,n){for(var i=t.suspendedLanes,d=t.pingedLanes,p=t.expirationTimes,v=t.pendingLanes;0<v;){var C=31-Ze(v),V=1<<C,G=p[C];G===-1?((V&i)===0||(V&d)!==0)&&(p[C]=Xa(V,n)):G<=n&&(t.expiredLanes|=V),v&=~V}}function Pi(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Vo(){var t=Mn;return Mn<<=1,(Mn&4194240)===0&&(Mn=64),t}function Ri(t){for(var n=[],i=0;31>i;i++)n.push(t);return n}function fo(t,n,i){t.pendingLanes|=n,n!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,n=31-Ze(n),t[n]=i}function Ya(t,n){var i=t.pendingLanes&~n;t.pendingLanes=n,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=n,t.mutableReadLanes&=n,t.entangledLanes&=n,n=t.entanglements;var d=t.eventTimes;for(t=t.expirationTimes;0<i;){var p=31-Ze(i),v=1<<p;n[p]=0,d[p]=-1,t[p]=-1,i&=~v}}function Xl(t,n){var i=t.entangledLanes|=n;for(t=t.entanglements;i;){var d=31-Ze(i),p=1<<d;p&n|t[d]&n&&(t[d]|=n),i&=~p}}var qe=0;function Yd(t){return t&=-t,1<t?4<t?(t&268435455)!==0?16:536870912:4:1}var Kd,Yl,Gd,Zd,Qd,Kl=!1,Ka=[],Tr=null,Dr=null,Lr=null,Mi=new Map,Ti=new Map,Ir=[],Kx="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function qd(t,n){switch(t){case"focusin":case"focusout":Tr=null;break;case"dragenter":case"dragleave":Dr=null;break;case"mouseover":case"mouseout":Lr=null;break;case"pointerover":case"pointerout":Mi.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ti.delete(n.pointerId)}}function Di(t,n,i,d,p,v){return t===null||t.nativeEvent!==v?(t={blockedOn:n,domEventName:i,eventSystemFlags:d,nativeEvent:v,targetContainers:[p]},n!==null&&(n=Yi(n),n!==null&&Yl(n)),t):(t.eventSystemFlags|=d,n=t.targetContainers,p!==null&&n.indexOf(p)===-1&&n.push(p),t)}function Gx(t,n,i,d,p){switch(n){case"focusin":return Tr=Di(Tr,t,n,i,d,p),!0;case"dragenter":return Dr=Di(Dr,t,n,i,d,p),!0;case"mouseover":return Lr=Di(Lr,t,n,i,d,p),!0;case"pointerover":var v=p.pointerId;return Mi.set(v,Di(Mi.get(v)||null,t,n,i,d,p)),!0;case"gotpointercapture":return v=p.pointerId,Ti.set(v,Di(Ti.get(v)||null,t,n,i,d,p)),!0}return!1}function Jd(t){var n=ho(t.target);if(n!==null){var i=we(n);if(i!==null){if(n=i.tag,n===13){if(n=Re(i),n!==null){t.blockedOn=n,Qd(t.priority,function(){Gd(i)});return}}else if(n===3&&i.stateNode.current.memoizedState.isDehydrated){t.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ga(t){if(t.blockedOn!==null)return!1;for(var n=t.targetContainers;0<n.length;){var i=Zl(t.domEventName,t.eventSystemFlags,n[0],t.nativeEvent);if(i===null){i=t.nativeEvent;var d=new i.constructor(i.type,i);ao=d,i.target.dispatchEvent(d),ao=null}else return n=Yi(i),n!==null&&Yl(n),t.blockedOn=i,!1;n.shift()}return!0}function ef(t,n,i){Ga(t)&&i.delete(n)}function Zx(){Kl=!1,Tr!==null&&Ga(Tr)&&(Tr=null),Dr!==null&&Ga(Dr)&&(Dr=null),Lr!==null&&Ga(Lr)&&(Lr=null),Mi.forEach(ef),Ti.forEach(ef)}function Li(t,n){t.blockedOn===n&&(t.blockedOn=null,Kl||(Kl=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Zx)))}function Ii(t){function n(p){return Li(p,t)}if(0<Ka.length){Li(Ka[0],t);for(var i=1;i<Ka.length;i++){var d=Ka[i];d.blockedOn===t&&(d.blockedOn=null)}}for(Tr!==null&&Li(Tr,t),Dr!==null&&Li(Dr,t),Lr!==null&&Li(Lr,t),Mi.forEach(n),Ti.forEach(n),i=0;i<Ir.length;i++)d=Ir[i],d.blockedOn===t&&(d.blockedOn=null);for(;0<Ir.length&&(i=Ir[0],i.blockedOn===null);)Jd(i),i.blockedOn===null&&Ir.shift()}var Uo=P.ReactCurrentBatchConfig,Za=!0;function Qx(t,n,i,d){var p=qe,v=Uo.transition;Uo.transition=null;try{qe=1,Gl(t,n,i,d)}finally{qe=p,Uo.transition=v}}function qx(t,n,i,d){var p=qe,v=Uo.transition;Uo.transition=null;try{qe=4,Gl(t,n,i,d)}finally{qe=p,Uo.transition=v}}function Gl(t,n,i,d){if(Za){var p=Zl(t,n,i,d);if(p===null)hu(t,n,d,Qa,i),qd(t,d);else if(Gx(p,t,n,i,d))d.stopPropagation();else if(qd(t,d),n&4&&-1<Kx.indexOf(t)){for(;p!==null;){var v=Yi(p);if(v!==null&&Kd(v),v=Zl(t,n,i,d),v===null&&hu(t,n,d,Qa,i),v===p)break;p=v}p!==null&&d.stopPropagation()}else hu(t,n,d,null,i)}}var Qa=null;function Zl(t,n,i,d){if(Qa=null,t=Mr(d),t=ho(t),t!==null)if(n=we(t),n===null)t=null;else if(i=n.tag,i===13){if(t=Re(n),t!==null)return t;t=null}else if(i===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;t=null}else n!==t&&(t=null);return Qa=t,null}function tf(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(fr()){case Ut:return 1;case At:return 4;case Yn:case hr:return 16;case pn:return 536870912;default:return 16}default:return 16}}var zr=null,Ql=null,qa=null;function nf(){if(qa)return qa;var t,n=Ql,i=n.length,d,p="value"in zr?zr.value:zr.textContent,v=p.length;for(t=0;t<i&&n[t]===p[t];t++);var C=i-t;for(d=1;d<=C&&n[i-d]===p[v-d];d++);return qa=p.slice(t,1<d?1-d:void 0)}function Ja(t){var n=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&n===13&&(t=13)):t=n,t===10&&(t=13),32<=t||t===13?t:0}function es(){return!0}function rf(){return!1}function rn(t){function n(i,d,p,v,C){this._reactName=i,this._targetInst=p,this.type=d,this.nativeEvent=v,this.target=C,this.currentTarget=null;for(var V in t)t.hasOwnProperty(V)&&(i=t[V],this[V]=i?i(v):v[V]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?es:rf,this.isPropagationStopped=rf,this}return z(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=es)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=es)},persist:function(){},isPersistent:es}),n}var Wo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ql=rn(Wo),zi=z({},Wo,{view:0,detail:0}),Jx=rn(zi),Jl,eu,Ai,ts=z({},zi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:nu,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ai&&(Ai&&t.type==="mousemove"?(Jl=t.screenX-Ai.screenX,eu=t.screenY-Ai.screenY):eu=Jl=0,Ai=t),Jl)},movementY:function(t){return"movementY"in t?t.movementY:eu}}),of=rn(ts),ey=z({},ts,{dataTransfer:0}),ty=rn(ey),ny=z({},zi,{relatedTarget:0}),tu=rn(ny),ry=z({},Wo,{animationName:0,elapsedTime:0,pseudoElement:0}),oy=rn(ry),iy=z({},Wo,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),ay=rn(iy),sy=z({},Wo,{data:0}),af=rn(sy),ly={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},uy={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},cy={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function dy(t){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(t):(t=cy[t])?!!n[t]:!1}function nu(){return dy}var fy=z({},zi,{key:function(t){if(t.key){var n=ly[t.key]||t.key;if(n!=="Unidentified")return n}return t.type==="keypress"?(t=Ja(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?uy[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:nu,charCode:function(t){return t.type==="keypress"?Ja(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ja(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),hy=rn(fy),my=z({},ts,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),sf=rn(my),py=z({},zi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:nu}),gy=rn(py),xy=z({},Wo,{propertyName:0,elapsedTime:0,pseudoElement:0}),yy=rn(xy),vy=z({},ts,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),wy=rn(vy),by=[9,13,27,32],ru=f&&"CompositionEvent"in window,$i=null;f&&"documentMode"in document&&($i=document.documentMode);var _y=f&&"TextEvent"in window&&!$i,lf=f&&(!ru||$i&&8<$i&&11>=$i),uf=" ",cf=!1;function df(t,n){switch(t){case"keyup":return by.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ff(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Xo=!1;function Ny(t,n){switch(t){case"compositionend":return ff(n);case"keypress":return n.which!==32?null:(cf=!0,uf);case"textInput":return t=n.data,t===uf&&cf?null:t;default:return null}}function Sy(t,n){if(Xo)return t==="compositionend"||!ru&&df(t,n)?(t=nf(),qa=Ql=zr=null,Xo=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return lf&&n.locale!=="ko"?null:n.data;default:return null}}var jy={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function hf(t){var n=t&&t.nodeName&&t.nodeName.toLowerCase();return n==="input"?!!jy[t.type]:n==="textarea"}function mf(t,n,i,d){so(d),n=as(n,"onChange"),0<n.length&&(i=new ql("onChange","change",null,i,d),t.push({event:i,listeners:n}))}var Fi=null,Oi=null;function ky(t){Tf(t,0)}function ns(t){var n=Qo(t);if(xe(n))return t}function Ey(t,n){if(t==="change")return n}var pf=!1;if(f){var ou;if(f){var iu="oninput"in document;if(!iu){var gf=document.createElement("div");gf.setAttribute("oninput","return;"),iu=typeof gf.oninput=="function"}ou=iu}else ou=!1;pf=ou&&(!document.documentMode||9<document.documentMode)}function xf(){Fi&&(Fi.detachEvent("onpropertychange",yf),Oi=Fi=null)}function yf(t){if(t.propertyName==="value"&&ns(Oi)){var n=[];mf(n,Oi,t,Mr(t)),uo(ky,n)}}function Cy(t,n,i){t==="focusin"?(xf(),Fi=n,Oi=i,Fi.attachEvent("onpropertychange",yf)):t==="focusout"&&xf()}function Py(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return ns(Oi)}function Ry(t,n){if(t==="click")return ns(n)}function My(t,n){if(t==="input"||t==="change")return ns(n)}function Ty(t,n){return t===n&&(t!==0||1/t===1/n)||t!==t&&n!==n}var Tn=typeof Object.is=="function"?Object.is:Ty;function Hi(t,n){if(Tn(t,n))return!0;if(typeof t!="object"||t===null||typeof n!="object"||n===null)return!1;var i=Object.keys(t),d=Object.keys(n);if(i.length!==d.length)return!1;for(d=0;d<i.length;d++){var p=i[d];if(!m.call(n,p)||!Tn(t[p],n[p]))return!1}return!0}function vf(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function wf(t,n){var i=vf(t);t=0;for(var d;i;){if(i.nodeType===3){if(d=t+i.textContent.length,t<=n&&d>=n)return{node:i,offset:n-t};t=d}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=vf(i)}}function bf(t,n){return t&&n?t===n?!0:t&&t.nodeType===3?!1:n&&n.nodeType===3?bf(t,n.parentNode):"contains"in t?t.contains(n):t.compareDocumentPosition?!!(t.compareDocumentPosition(n)&16):!1:!1}function _f(){for(var t=window,n=Pe();n instanceof t.HTMLIFrameElement;){try{var i=typeof n.contentWindow.location.href=="string"}catch{i=!1}if(i)t=n.contentWindow;else break;n=Pe(t.document)}return n}function au(t){var n=t&&t.nodeName&&t.nodeName.toLowerCase();return n&&(n==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||n==="textarea"||t.contentEditable==="true")}function Dy(t){var n=_f(),i=t.focusedElem,d=t.selectionRange;if(n!==i&&i&&i.ownerDocument&&bf(i.ownerDocument.documentElement,i)){if(d!==null&&au(i)){if(n=d.start,t=d.end,t===void 0&&(t=n),"selectionStart"in i)i.selectionStart=n,i.selectionEnd=Math.min(t,i.value.length);else if(t=(n=i.ownerDocument||document)&&n.defaultView||window,t.getSelection){t=t.getSelection();var p=i.textContent.length,v=Math.min(d.start,p);d=d.end===void 0?v:Math.min(d.end,p),!t.extend&&v>d&&(p=d,d=v,v=p),p=wf(i,v);var C=wf(i,d);p&&C&&(t.rangeCount!==1||t.anchorNode!==p.node||t.anchorOffset!==p.offset||t.focusNode!==C.node||t.focusOffset!==C.offset)&&(n=n.createRange(),n.setStart(p.node,p.offset),t.removeAllRanges(),v>d?(t.addRange(n),t.extend(C.node,C.offset)):(n.setEnd(C.node,C.offset),t.addRange(n)))}}for(n=[],t=i;t=t.parentNode;)t.nodeType===1&&n.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof i.focus=="function"&&i.focus(),i=0;i<n.length;i++)t=n[i],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Ly=f&&"documentMode"in document&&11>=document.documentMode,Yo=null,su=null,Bi=null,lu=!1;function Nf(t,n,i){var d=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;lu||Yo==null||Yo!==Pe(d)||(d=Yo,"selectionStart"in d&&au(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),Bi&&Hi(Bi,d)||(Bi=d,d=as(su,"onSelect"),0<d.length&&(n=new ql("onSelect","select",null,n,i),t.push({event:n,listeners:d}),n.target=Yo)))}function rs(t,n){var i={};return i[t.toLowerCase()]=n.toLowerCase(),i["Webkit"+t]="webkit"+n,i["Moz"+t]="moz"+n,i}var Ko={animationend:rs("Animation","AnimationEnd"),animationiteration:rs("Animation","AnimationIteration"),animationstart:rs("Animation","AnimationStart"),transitionend:rs("Transition","TransitionEnd")},uu={},Sf={};f&&(Sf=document.createElement("div").style,"AnimationEvent"in window||(delete Ko.animationend.animation,delete Ko.animationiteration.animation,delete Ko.animationstart.animation),"TransitionEvent"in window||delete Ko.transitionend.transition);function os(t){if(uu[t])return uu[t];if(!Ko[t])return t;var n=Ko[t],i;for(i in n)if(n.hasOwnProperty(i)&&i in Sf)return uu[t]=n[i];return t}var jf=os("animationend"),kf=os("animationiteration"),Ef=os("animationstart"),Cf=os("transitionend"),Pf=new Map,Rf="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ar(t,n){Pf.set(t,n),u(n,[t])}for(var cu=0;cu<Rf.length;cu++){var du=Rf[cu],Iy=du.toLowerCase(),zy=du[0].toUpperCase()+du.slice(1);Ar(Iy,"on"+zy)}Ar(jf,"onAnimationEnd"),Ar(kf,"onAnimationIteration"),Ar(Ef,"onAnimationStart"),Ar("dblclick","onDoubleClick"),Ar("focusin","onFocus"),Ar("focusout","onBlur"),Ar(Cf,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),u("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),u("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),u("onBeforeInput",["compositionend","keypress","textInput","paste"]),u("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Vi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ay=new Set("cancel close invalid load scroll toggle".split(" ").concat(Vi));function Mf(t,n,i){var d=t.type||"unknown-event";t.currentTarget=i,ke(d,n,void 0,t),t.currentTarget=null}function Tf(t,n){n=(n&4)!==0;for(var i=0;i<t.length;i++){var d=t[i],p=d.event;d=d.listeners;e:{var v=void 0;if(n)for(var C=d.length-1;0<=C;C--){var V=d[C],G=V.instance,ne=V.currentTarget;if(V=V.listener,G!==v&&p.isPropagationStopped())break e;Mf(p,V,ne),v=G}else for(C=0;C<d.length;C++){if(V=d[C],G=V.instance,ne=V.currentTarget,V=V.listener,G!==v&&p.isPropagationStopped())break e;Mf(p,V,ne),v=G}}}if(de)throw t=Ne,de=!1,Ne=null,t}function tt(t,n){var i=n[vu];i===void 0&&(i=n[vu]=new Set);var d=t+"__bubble";i.has(d)||(Df(n,t,2,!1),i.add(d))}function fu(t,n,i){var d=0;n&&(d|=4),Df(i,t,d,n)}var is="_reactListening"+Math.random().toString(36).slice(2);function Ui(t){if(!t[is]){t[is]=!0,a.forEach(function(i){i!=="selectionchange"&&(Ay.has(i)||fu(i,!1,t),fu(i,!0,t))});var n=t.nodeType===9?t:t.ownerDocument;n===null||n[is]||(n[is]=!0,fu("selectionchange",!1,n))}}function Df(t,n,i,d){switch(tf(n)){case 1:var p=Qx;break;case 4:p=qx;break;default:p=Gl}i=p.bind(null,n,i,t),p=void 0,!co||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(p=!0),d?p!==void 0?t.addEventListener(n,i,{capture:!0,passive:p}):t.addEventListener(n,i,!0):p!==void 0?t.addEventListener(n,i,{passive:p}):t.addEventListener(n,i,!1)}function hu(t,n,i,d,p){var v=d;if((n&1)===0&&(n&2)===0&&d!==null)e:for(;;){if(d===null)return;var C=d.tag;if(C===3||C===4){var V=d.stateNode.containerInfo;if(V===p||V.nodeType===8&&V.parentNode===p)break;if(C===4)for(C=d.return;C!==null;){var G=C.tag;if((G===3||G===4)&&(G=C.stateNode.containerInfo,G===p||G.nodeType===8&&G.parentNode===p))return;C=C.return}for(;V!==null;){if(C=ho(V),C===null)return;if(G=C.tag,G===5||G===6){d=v=C;continue e}V=V.parentNode}}d=d.return}uo(function(){var ne=v,le=Mr(i),ce=[];e:{var ae=Pf.get(t);if(ae!==void 0){var ge=ql,be=t;switch(t){case"keypress":if(Ja(i)===0)break e;case"keydown":case"keyup":ge=hy;break;case"focusin":be="focus",ge=tu;break;case"focusout":be="blur",ge=tu;break;case"beforeblur":case"afterblur":ge=tu;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ge=of;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ge=ty;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ge=gy;break;case jf:case kf:case Ef:ge=oy;break;case Cf:ge=yy;break;case"scroll":ge=Jx;break;case"wheel":ge=wy;break;case"copy":case"cut":case"paste":ge=ay;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ge=sf}var Se=(n&4)!==0,ft=!Se&&t==="scroll",J=Se?ae!==null?ae+"Capture":null:ae;Se=[];for(var Z=ne,ee;Z!==null;){ee=Z;var fe=ee.stateNode;if(ee.tag===5&&fe!==null&&(ee=fe,J!==null&&(fe=dr(Z,J),fe!=null&&Se.push(Wi(Z,fe,ee)))),ft)break;Z=Z.return}0<Se.length&&(ae=new ge(ae,be,null,i,le),ce.push({event:ae,listeners:Se}))}}if((n&7)===0){e:{if(ae=t==="mouseover"||t==="pointerover",ge=t==="mouseout"||t==="pointerout",ae&&i!==ao&&(be=i.relatedTarget||i.fromElement)&&(ho(be)||be[pr]))break e;if((ge||ae)&&(ae=le.window===le?le:(ae=le.ownerDocument)?ae.defaultView||ae.parentWindow:window,ge?(be=i.relatedTarget||i.toElement,ge=ne,be=be?ho(be):null,be!==null&&(ft=we(be),be!==ft||be.tag!==5&&be.tag!==6)&&(be=null)):(ge=null,be=ne),ge!==be)){if(Se=of,fe="onMouseLeave",J="onMouseEnter",Z="mouse",(t==="pointerout"||t==="pointerover")&&(Se=sf,fe="onPointerLeave",J="onPointerEnter",Z="pointer"),ft=ge==null?ae:Qo(ge),ee=be==null?ae:Qo(be),ae=new Se(fe,Z+"leave",ge,i,le),ae.target=ft,ae.relatedTarget=ee,fe=null,ho(le)===ne&&(Se=new Se(J,Z+"enter",be,i,le),Se.target=ee,Se.relatedTarget=ft,fe=Se),ft=fe,ge&&be)t:{for(Se=ge,J=be,Z=0,ee=Se;ee;ee=Go(ee))Z++;for(ee=0,fe=J;fe;fe=Go(fe))ee++;for(;0<Z-ee;)Se=Go(Se),Z--;for(;0<ee-Z;)J=Go(J),ee--;for(;Z--;){if(Se===J||J!==null&&Se===J.alternate)break t;Se=Go(Se),J=Go(J)}Se=null}else Se=null;ge!==null&&Lf(ce,ae,ge,Se,!1),be!==null&&ft!==null&&Lf(ce,ft,be,Se,!0)}}e:{if(ae=ne?Qo(ne):window,ge=ae.nodeName&&ae.nodeName.toLowerCase(),ge==="select"||ge==="input"&&ae.type==="file")var Ee=Ey;else if(hf(ae))if(pf)Ee=My;else{Ee=Py;var Te=Cy}else(ge=ae.nodeName)&&ge.toLowerCase()==="input"&&(ae.type==="checkbox"||ae.type==="radio")&&(Ee=Ry);if(Ee&&(Ee=Ee(t,ne))){mf(ce,Ee,i,le);break e}Te&&Te(t,ae,ne),t==="focusout"&&(Te=ae._wrapperState)&&Te.controlled&&ae.type==="number"&&Pt(ae,"number",ae.value)}switch(Te=ne?Qo(ne):window,t){case"focusin":(hf(Te)||Te.contentEditable==="true")&&(Yo=Te,su=ne,Bi=null);break;case"focusout":Bi=su=Yo=null;break;case"mousedown":lu=!0;break;case"contextmenu":case"mouseup":case"dragend":lu=!1,Nf(ce,i,le);break;case"selectionchange":if(Ly)break;case"keydown":case"keyup":Nf(ce,i,le)}var De;if(ru)e:{switch(t){case"compositionstart":var Ie="onCompositionStart";break e;case"compositionend":Ie="onCompositionEnd";break e;case"compositionupdate":Ie="onCompositionUpdate";break e}Ie=void 0}else Xo?df(t,i)&&(Ie="onCompositionEnd"):t==="keydown"&&i.keyCode===229&&(Ie="onCompositionStart");Ie&&(lf&&i.locale!=="ko"&&(Xo||Ie!=="onCompositionStart"?Ie==="onCompositionEnd"&&Xo&&(De=nf()):(zr=le,Ql="value"in zr?zr.value:zr.textContent,Xo=!0)),Te=as(ne,Ie),0<Te.length&&(Ie=new af(Ie,t,null,i,le),ce.push({event:Ie,listeners:Te}),De?Ie.data=De:(De=ff(i),De!==null&&(Ie.data=De)))),(De=_y?Ny(t,i):Sy(t,i))&&(ne=as(ne,"onBeforeInput"),0<ne.length&&(le=new af("onBeforeInput","beforeinput",null,i,le),ce.push({event:le,listeners:ne}),le.data=De))}Tf(ce,n)})}function Wi(t,n,i){return{instance:t,listener:n,currentTarget:i}}function as(t,n){for(var i=n+"Capture",d=[];t!==null;){var p=t,v=p.stateNode;p.tag===5&&v!==null&&(p=v,v=dr(t,i),v!=null&&d.unshift(Wi(t,v,p)),v=dr(t,n),v!=null&&d.push(Wi(t,v,p))),t=t.return}return d}function Go(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Lf(t,n,i,d,p){for(var v=n._reactName,C=[];i!==null&&i!==d;){var V=i,G=V.alternate,ne=V.stateNode;if(G!==null&&G===d)break;V.tag===5&&ne!==null&&(V=ne,p?(G=dr(i,v),G!=null&&C.unshift(Wi(i,G,V))):p||(G=dr(i,v),G!=null&&C.push(Wi(i,G,V)))),i=i.return}C.length!==0&&t.push({event:n,listeners:C})}var $y=/\r\n?/g,Fy=/\u0000|\uFFFD/g;function If(t){return(typeof t=="string"?t:""+t).replace($y,`
`).replace(Fy,"")}function ss(t,n,i){if(n=If(n),If(t)!==n&&i)throw Error(o(425))}function ls(){}var mu=null,pu=null;function gu(t,n){return t==="textarea"||t==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var xu=typeof setTimeout=="function"?setTimeout:void 0,Oy=typeof clearTimeout=="function"?clearTimeout:void 0,zf=typeof Promise=="function"?Promise:void 0,Hy=typeof queueMicrotask=="function"?queueMicrotask:typeof zf<"u"?function(t){return zf.resolve(null).then(t).catch(By)}:xu;function By(t){setTimeout(function(){throw t})}function yu(t,n){var i=n,d=0;do{var p=i.nextSibling;if(t.removeChild(i),p&&p.nodeType===8)if(i=p.data,i==="/$"){if(d===0){t.removeChild(p),Ii(n);return}d--}else i!=="$"&&i!=="$?"&&i!=="$!"||d++;i=p}while(i);Ii(n)}function $r(t){for(;t!=null;t=t.nextSibling){var n=t.nodeType;if(n===1||n===3)break;if(n===8){if(n=t.data,n==="$"||n==="$!"||n==="$?")break;if(n==="/$")return null}}return t}function Af(t){t=t.previousSibling;for(var n=0;t;){if(t.nodeType===8){var i=t.data;if(i==="$"||i==="$!"||i==="$?"){if(n===0)return t;n--}else i==="/$"&&n++}t=t.previousSibling}return null}var Zo=Math.random().toString(36).slice(2),Zn="__reactFiber$"+Zo,Xi="__reactProps$"+Zo,pr="__reactContainer$"+Zo,vu="__reactEvents$"+Zo,Vy="__reactListeners$"+Zo,Uy="__reactHandles$"+Zo;function ho(t){var n=t[Zn];if(n)return n;for(var i=t.parentNode;i;){if(n=i[pr]||i[Zn]){if(i=n.alternate,n.child!==null||i!==null&&i.child!==null)for(t=Af(t);t!==null;){if(i=t[Zn])return i;t=Af(t)}return n}t=i,i=t.parentNode}return null}function Yi(t){return t=t[Zn]||t[pr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Qo(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(o(33))}function us(t){return t[Xi]||null}var wu=[],qo=-1;function Fr(t){return{current:t}}function nt(t){0>qo||(t.current=wu[qo],wu[qo]=null,qo--)}function et(t,n){qo++,wu[qo]=t.current,t.current=n}var Or={},Rt=Fr(Or),Wt=Fr(!1),mo=Or;function Jo(t,n){var i=t.type.contextTypes;if(!i)return Or;var d=t.stateNode;if(d&&d.__reactInternalMemoizedUnmaskedChildContext===n)return d.__reactInternalMemoizedMaskedChildContext;var p={},v;for(v in i)p[v]=n[v];return d&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=n,t.__reactInternalMemoizedMaskedChildContext=p),p}function Xt(t){return t=t.childContextTypes,t!=null}function cs(){nt(Wt),nt(Rt)}function $f(t,n,i){if(Rt.current!==Or)throw Error(o(168));et(Rt,n),et(Wt,i)}function Ff(t,n,i){var d=t.stateNode;if(n=n.childContextTypes,typeof d.getChildContext!="function")return i;d=d.getChildContext();for(var p in d)if(!(p in n))throw Error(o(108,he(t)||"Unknown",p));return z({},i,d)}function ds(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Or,mo=Rt.current,et(Rt,t),et(Wt,Wt.current),!0}function Of(t,n,i){var d=t.stateNode;if(!d)throw Error(o(169));i?(t=Ff(t,n,mo),d.__reactInternalMemoizedMergedChildContext=t,nt(Wt),nt(Rt),et(Rt,t)):nt(Wt),et(Wt,i)}var gr=null,fs=!1,bu=!1;function Hf(t){gr===null?gr=[t]:gr.push(t)}function Wy(t){fs=!0,Hf(t)}function Hr(){if(!bu&&gr!==null){bu=!0;var t=0,n=qe;try{var i=gr;for(qe=1;t<i.length;t++){var d=i[t];do d=d(!0);while(d!==null)}gr=null,fs=!1}catch(p){throw gr!==null&&(gr=gr.slice(t+1)),at(Ut,Hr),p}finally{qe=n,bu=!1}}return null}var ei=[],ti=0,hs=null,ms=0,xn=[],yn=0,po=null,xr=1,yr="";function go(t,n){ei[ti++]=ms,ei[ti++]=hs,hs=t,ms=n}function Bf(t,n,i){xn[yn++]=xr,xn[yn++]=yr,xn[yn++]=po,po=t;var d=xr;t=yr;var p=32-Ze(d)-1;d&=~(1<<p),i+=1;var v=32-Ze(n)+p;if(30<v){var C=p-p%5;v=(d&(1<<C)-1).toString(32),d>>=C,p-=C,xr=1<<32-Ze(n)+p|i<<p|d,yr=v+t}else xr=1<<v|i<<p|d,yr=t}function _u(t){t.return!==null&&(go(t,1),Bf(t,1,0))}function Nu(t){for(;t===hs;)hs=ei[--ti],ei[ti]=null,ms=ei[--ti],ei[ti]=null;for(;t===po;)po=xn[--yn],xn[yn]=null,yr=xn[--yn],xn[yn]=null,xr=xn[--yn],xn[yn]=null}var on=null,an=null,rt=!1,Dn=null;function Vf(t,n){var i=_n(5,null,null,0);i.elementType="DELETED",i.stateNode=n,i.return=t,n=t.deletions,n===null?(t.deletions=[i],t.flags|=16):n.push(i)}function Uf(t,n){switch(t.tag){case 5:var i=t.type;return n=n.nodeType!==1||i.toLowerCase()!==n.nodeName.toLowerCase()?null:n,n!==null?(t.stateNode=n,on=t,an=$r(n.firstChild),!0):!1;case 6:return n=t.pendingProps===""||n.nodeType!==3?null:n,n!==null?(t.stateNode=n,on=t,an=null,!0):!1;case 13:return n=n.nodeType!==8?null:n,n!==null?(i=po!==null?{id:xr,overflow:yr}:null,t.memoizedState={dehydrated:n,treeContext:i,retryLane:1073741824},i=_n(18,null,null,0),i.stateNode=n,i.return=t,t.child=i,on=t,an=null,!0):!1;default:return!1}}function Su(t){return(t.mode&1)!==0&&(t.flags&128)===0}function ju(t){if(rt){var n=an;if(n){var i=n;if(!Uf(t,n)){if(Su(t))throw Error(o(418));n=$r(i.nextSibling);var d=on;n&&Uf(t,n)?Vf(d,i):(t.flags=t.flags&-4097|2,rt=!1,on=t)}}else{if(Su(t))throw Error(o(418));t.flags=t.flags&-4097|2,rt=!1,on=t}}}function Wf(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;on=t}function ps(t){if(t!==on)return!1;if(!rt)return Wf(t),rt=!0,!1;var n;if((n=t.tag!==3)&&!(n=t.tag!==5)&&(n=t.type,n=n!=="head"&&n!=="body"&&!gu(t.type,t.memoizedProps)),n&&(n=an)){if(Su(t))throw Xf(),Error(o(418));for(;n;)Vf(t,n),n=$r(n.nextSibling)}if(Wf(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(o(317));e:{for(t=t.nextSibling,n=0;t;){if(t.nodeType===8){var i=t.data;if(i==="/$"){if(n===0){an=$r(t.nextSibling);break e}n--}else i!=="$"&&i!=="$!"&&i!=="$?"||n++}t=t.nextSibling}an=null}}else an=on?$r(t.stateNode.nextSibling):null;return!0}function Xf(){for(var t=an;t;)t=$r(t.nextSibling)}function ni(){an=on=null,rt=!1}function ku(t){Dn===null?Dn=[t]:Dn.push(t)}var Xy=P.ReactCurrentBatchConfig;function Ki(t,n,i){if(t=i.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(i._owner){if(i=i._owner,i){if(i.tag!==1)throw Error(o(309));var d=i.stateNode}if(!d)throw Error(o(147,t));var p=d,v=""+t;return n!==null&&n.ref!==null&&typeof n.ref=="function"&&n.ref._stringRef===v?n.ref:(n=function(C){var V=p.refs;C===null?delete V[v]:V[v]=C},n._stringRef=v,n)}if(typeof t!="string")throw Error(o(284));if(!i._owner)throw Error(o(290,t))}return t}function gs(t,n){throw t=Object.prototype.toString.call(n),Error(o(31,t==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":t))}function Yf(t){var n=t._init;return n(t._payload)}function Kf(t){function n(J,Z){if(t){var ee=J.deletions;ee===null?(J.deletions=[Z],J.flags|=16):ee.push(Z)}}function i(J,Z){if(!t)return null;for(;Z!==null;)n(J,Z),Z=Z.sibling;return null}function d(J,Z){for(J=new Map;Z!==null;)Z.key!==null?J.set(Z.key,Z):J.set(Z.index,Z),Z=Z.sibling;return J}function p(J,Z){return J=Gr(J,Z),J.index=0,J.sibling=null,J}function v(J,Z,ee){return J.index=ee,t?(ee=J.alternate,ee!==null?(ee=ee.index,ee<Z?(J.flags|=2,Z):ee):(J.flags|=2,Z)):(J.flags|=1048576,Z)}function C(J){return t&&J.alternate===null&&(J.flags|=2),J}function V(J,Z,ee,fe){return Z===null||Z.tag!==6?(Z=xc(ee,J.mode,fe),Z.return=J,Z):(Z=p(Z,ee),Z.return=J,Z)}function G(J,Z,ee,fe){var Ee=ee.type;return Ee===M?le(J,Z,ee.props.children,fe,ee.key):Z!==null&&(Z.elementType===Ee||typeof Ee=="object"&&Ee!==null&&Ee.$$typeof===X&&Yf(Ee)===Z.type)?(fe=p(Z,ee.props),fe.ref=Ki(J,Z,ee),fe.return=J,fe):(fe=Os(ee.type,ee.key,ee.props,null,J.mode,fe),fe.ref=Ki(J,Z,ee),fe.return=J,fe)}function ne(J,Z,ee,fe){return Z===null||Z.tag!==4||Z.stateNode.containerInfo!==ee.containerInfo||Z.stateNode.implementation!==ee.implementation?(Z=yc(ee,J.mode,fe),Z.return=J,Z):(Z=p(Z,ee.children||[]),Z.return=J,Z)}function le(J,Z,ee,fe,Ee){return Z===null||Z.tag!==7?(Z=So(ee,J.mode,fe,Ee),Z.return=J,Z):(Z=p(Z,ee),Z.return=J,Z)}function ce(J,Z,ee){if(typeof Z=="string"&&Z!==""||typeof Z=="number")return Z=xc(""+Z,J.mode,ee),Z.return=J,Z;if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case $:return ee=Os(Z.type,Z.key,Z.props,null,J.mode,ee),ee.ref=Ki(J,null,Z),ee.return=J,ee;case D:return Z=yc(Z,J.mode,ee),Z.return=J,Z;case X:var fe=Z._init;return ce(J,fe(Z._payload),ee)}if(zt(Z)||K(Z))return Z=So(Z,J.mode,ee,null),Z.return=J,Z;gs(J,Z)}return null}function ae(J,Z,ee,fe){var Ee=Z!==null?Z.key:null;if(typeof ee=="string"&&ee!==""||typeof ee=="number")return Ee!==null?null:V(J,Z,""+ee,fe);if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case $:return ee.key===Ee?G(J,Z,ee,fe):null;case D:return ee.key===Ee?ne(J,Z,ee,fe):null;case X:return Ee=ee._init,ae(J,Z,Ee(ee._payload),fe)}if(zt(ee)||K(ee))return Ee!==null?null:le(J,Z,ee,fe,null);gs(J,ee)}return null}function ge(J,Z,ee,fe,Ee){if(typeof fe=="string"&&fe!==""||typeof fe=="number")return J=J.get(ee)||null,V(Z,J,""+fe,Ee);if(typeof fe=="object"&&fe!==null){switch(fe.$$typeof){case $:return J=J.get(fe.key===null?ee:fe.key)||null,G(Z,J,fe,Ee);case D:return J=J.get(fe.key===null?ee:fe.key)||null,ne(Z,J,fe,Ee);case X:var Te=fe._init;return ge(J,Z,ee,Te(fe._payload),Ee)}if(zt(fe)||K(fe))return J=J.get(ee)||null,le(Z,J,fe,Ee,null);gs(Z,fe)}return null}function be(J,Z,ee,fe){for(var Ee=null,Te=null,De=Z,Ie=Z=0,bt=null;De!==null&&Ie<ee.length;Ie++){De.index>Ie?(bt=De,De=null):bt=De.sibling;var Ke=ae(J,De,ee[Ie],fe);if(Ke===null){De===null&&(De=bt);break}t&&De&&Ke.alternate===null&&n(J,De),Z=v(Ke,Z,Ie),Te===null?Ee=Ke:Te.sibling=Ke,Te=Ke,De=bt}if(Ie===ee.length)return i(J,De),rt&&go(J,Ie),Ee;if(De===null){for(;Ie<ee.length;Ie++)De=ce(J,ee[Ie],fe),De!==null&&(Z=v(De,Z,Ie),Te===null?Ee=De:Te.sibling=De,Te=De);return rt&&go(J,Ie),Ee}for(De=d(J,De);Ie<ee.length;Ie++)bt=ge(De,J,Ie,ee[Ie],fe),bt!==null&&(t&&bt.alternate!==null&&De.delete(bt.key===null?Ie:bt.key),Z=v(bt,Z,Ie),Te===null?Ee=bt:Te.sibling=bt,Te=bt);return t&&De.forEach(function(Zr){return n(J,Zr)}),rt&&go(J,Ie),Ee}function Se(J,Z,ee,fe){var Ee=K(ee);if(typeof Ee!="function")throw Error(o(150));if(ee=Ee.call(ee),ee==null)throw Error(o(151));for(var Te=Ee=null,De=Z,Ie=Z=0,bt=null,Ke=ee.next();De!==null&&!Ke.done;Ie++,Ke=ee.next()){De.index>Ie?(bt=De,De=null):bt=De.sibling;var Zr=ae(J,De,Ke.value,fe);if(Zr===null){De===null&&(De=bt);break}t&&De&&Zr.alternate===null&&n(J,De),Z=v(Zr,Z,Ie),Te===null?Ee=Zr:Te.sibling=Zr,Te=Zr,De=bt}if(Ke.done)return i(J,De),rt&&go(J,Ie),Ee;if(De===null){for(;!Ke.done;Ie++,Ke=ee.next())Ke=ce(J,Ke.value,fe),Ke!==null&&(Z=v(Ke,Z,Ie),Te===null?Ee=Ke:Te.sibling=Ke,Te=Ke);return rt&&go(J,Ie),Ee}for(De=d(J,De);!Ke.done;Ie++,Ke=ee.next())Ke=ge(De,J,Ie,Ke.value,fe),Ke!==null&&(t&&Ke.alternate!==null&&De.delete(Ke.key===null?Ie:Ke.key),Z=v(Ke,Z,Ie),Te===null?Ee=Ke:Te.sibling=Ke,Te=Ke);return t&&De.forEach(function(jv){return n(J,jv)}),rt&&go(J,Ie),Ee}function ft(J,Z,ee,fe){if(typeof ee=="object"&&ee!==null&&ee.type===M&&ee.key===null&&(ee=ee.props.children),typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case $:e:{for(var Ee=ee.key,Te=Z;Te!==null;){if(Te.key===Ee){if(Ee=ee.type,Ee===M){if(Te.tag===7){i(J,Te.sibling),Z=p(Te,ee.props.children),Z.return=J,J=Z;break e}}else if(Te.elementType===Ee||typeof Ee=="object"&&Ee!==null&&Ee.$$typeof===X&&Yf(Ee)===Te.type){i(J,Te.sibling),Z=p(Te,ee.props),Z.ref=Ki(J,Te,ee),Z.return=J,J=Z;break e}i(J,Te);break}else n(J,Te);Te=Te.sibling}ee.type===M?(Z=So(ee.props.children,J.mode,fe,ee.key),Z.return=J,J=Z):(fe=Os(ee.type,ee.key,ee.props,null,J.mode,fe),fe.ref=Ki(J,Z,ee),fe.return=J,J=fe)}return C(J);case D:e:{for(Te=ee.key;Z!==null;){if(Z.key===Te)if(Z.tag===4&&Z.stateNode.containerInfo===ee.containerInfo&&Z.stateNode.implementation===ee.implementation){i(J,Z.sibling),Z=p(Z,ee.children||[]),Z.return=J,J=Z;break e}else{i(J,Z);break}else n(J,Z);Z=Z.sibling}Z=yc(ee,J.mode,fe),Z.return=J,J=Z}return C(J);case X:return Te=ee._init,ft(J,Z,Te(ee._payload),fe)}if(zt(ee))return be(J,Z,ee,fe);if(K(ee))return Se(J,Z,ee,fe);gs(J,ee)}return typeof ee=="string"&&ee!==""||typeof ee=="number"?(ee=""+ee,Z!==null&&Z.tag===6?(i(J,Z.sibling),Z=p(Z,ee),Z.return=J,J=Z):(i(J,Z),Z=xc(ee,J.mode,fe),Z.return=J,J=Z),C(J)):i(J,Z)}return ft}var ri=Kf(!0),Gf=Kf(!1),xs=Fr(null),ys=null,oi=null,Eu=null;function Cu(){Eu=oi=ys=null}function Pu(t){var n=xs.current;nt(xs),t._currentValue=n}function Ru(t,n,i){for(;t!==null;){var d=t.alternate;if((t.childLanes&n)!==n?(t.childLanes|=n,d!==null&&(d.childLanes|=n)):d!==null&&(d.childLanes&n)!==n&&(d.childLanes|=n),t===i)break;t=t.return}}function ii(t,n){ys=t,Eu=oi=null,t=t.dependencies,t!==null&&t.firstContext!==null&&((t.lanes&n)!==0&&(Yt=!0),t.firstContext=null)}function vn(t){var n=t._currentValue;if(Eu!==t)if(t={context:t,memoizedValue:n,next:null},oi===null){if(ys===null)throw Error(o(308));oi=t,ys.dependencies={lanes:0,firstContext:t}}else oi=oi.next=t;return n}var xo=null;function Mu(t){xo===null?xo=[t]:xo.push(t)}function Zf(t,n,i,d){var p=n.interleaved;return p===null?(i.next=i,Mu(n)):(i.next=p.next,p.next=i),n.interleaved=i,vr(t,d)}function vr(t,n){t.lanes|=n;var i=t.alternate;for(i!==null&&(i.lanes|=n),i=t,t=t.return;t!==null;)t.childLanes|=n,i=t.alternate,i!==null&&(i.childLanes|=n),i=t,t=t.return;return i.tag===3?i.stateNode:null}var Br=!1;function Tu(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Qf(t,n){t=t.updateQueue,n.updateQueue===t&&(n.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function wr(t,n){return{eventTime:t,lane:n,tag:0,payload:null,callback:null,next:null}}function Vr(t,n,i){var d=t.updateQueue;if(d===null)return null;if(d=d.shared,(Xe&2)!==0){var p=d.pending;return p===null?n.next=n:(n.next=p.next,p.next=n),d.pending=n,vr(t,i)}return p=d.interleaved,p===null?(n.next=n,Mu(d)):(n.next=p.next,p.next=n),d.interleaved=n,vr(t,i)}function vs(t,n,i){if(n=n.updateQueue,n!==null&&(n=n.shared,(i&4194240)!==0)){var d=n.lanes;d&=t.pendingLanes,i|=d,n.lanes=i,Xl(t,i)}}function qf(t,n){var i=t.updateQueue,d=t.alternate;if(d!==null&&(d=d.updateQueue,i===d)){var p=null,v=null;if(i=i.firstBaseUpdate,i!==null){do{var C={eventTime:i.eventTime,lane:i.lane,tag:i.tag,payload:i.payload,callback:i.callback,next:null};v===null?p=v=C:v=v.next=C,i=i.next}while(i!==null);v===null?p=v=n:v=v.next=n}else p=v=n;i={baseState:d.baseState,firstBaseUpdate:p,lastBaseUpdate:v,shared:d.shared,effects:d.effects},t.updateQueue=i;return}t=i.lastBaseUpdate,t===null?i.firstBaseUpdate=n:t.next=n,i.lastBaseUpdate=n}function ws(t,n,i,d){var p=t.updateQueue;Br=!1;var v=p.firstBaseUpdate,C=p.lastBaseUpdate,V=p.shared.pending;if(V!==null){p.shared.pending=null;var G=V,ne=G.next;G.next=null,C===null?v=ne:C.next=ne,C=G;var le=t.alternate;le!==null&&(le=le.updateQueue,V=le.lastBaseUpdate,V!==C&&(V===null?le.firstBaseUpdate=ne:V.next=ne,le.lastBaseUpdate=G))}if(v!==null){var ce=p.baseState;C=0,le=ne=G=null,V=v;do{var ae=V.lane,ge=V.eventTime;if((d&ae)===ae){le!==null&&(le=le.next={eventTime:ge,lane:0,tag:V.tag,payload:V.payload,callback:V.callback,next:null});e:{var be=t,Se=V;switch(ae=n,ge=i,Se.tag){case 1:if(be=Se.payload,typeof be=="function"){ce=be.call(ge,ce,ae);break e}ce=be;break e;case 3:be.flags=be.flags&-65537|128;case 0:if(be=Se.payload,ae=typeof be=="function"?be.call(ge,ce,ae):be,ae==null)break e;ce=z({},ce,ae);break e;case 2:Br=!0}}V.callback!==null&&V.lane!==0&&(t.flags|=64,ae=p.effects,ae===null?p.effects=[V]:ae.push(V))}else ge={eventTime:ge,lane:ae,tag:V.tag,payload:V.payload,callback:V.callback,next:null},le===null?(ne=le=ge,G=ce):le=le.next=ge,C|=ae;if(V=V.next,V===null){if(V=p.shared.pending,V===null)break;ae=V,V=ae.next,ae.next=null,p.lastBaseUpdate=ae,p.shared.pending=null}}while(!0);if(le===null&&(G=ce),p.baseState=G,p.firstBaseUpdate=ne,p.lastBaseUpdate=le,n=p.shared.interleaved,n!==null){p=n;do C|=p.lane,p=p.next;while(p!==n)}else v===null&&(p.shared.lanes=0);wo|=C,t.lanes=C,t.memoizedState=ce}}function Jf(t,n,i){if(t=n.effects,n.effects=null,t!==null)for(n=0;n<t.length;n++){var d=t[n],p=d.callback;if(p!==null){if(d.callback=null,d=i,typeof p!="function")throw Error(o(191,p));p.call(d)}}}var Gi={},Qn=Fr(Gi),Zi=Fr(Gi),Qi=Fr(Gi);function yo(t){if(t===Gi)throw Error(o(174));return t}function Du(t,n){switch(et(Qi,n),et(Zi,t),et(Qn,Gi),t=n.nodeType,t){case 9:case 11:n=(n=n.documentElement)?n.namespaceURI:nn(null,"");break;default:t=t===8?n.parentNode:n,n=t.namespaceURI||null,t=t.tagName,n=nn(n,t)}nt(Qn),et(Qn,n)}function ai(){nt(Qn),nt(Zi),nt(Qi)}function eh(t){yo(Qi.current);var n=yo(Qn.current),i=nn(n,t.type);n!==i&&(et(Zi,t),et(Qn,i))}function Lu(t){Zi.current===t&&(nt(Qn),nt(Zi))}var st=Fr(0);function bs(t){for(var n=t;n!==null;){if(n.tag===13){var i=n.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||i.data==="$?"||i.data==="$!"))return n}else if(n.tag===19&&n.memoizedProps.revealOrder!==void 0){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var Iu=[];function zu(){for(var t=0;t<Iu.length;t++)Iu[t]._workInProgressVersionPrimary=null;Iu.length=0}var _s=P.ReactCurrentDispatcher,Au=P.ReactCurrentBatchConfig,vo=0,lt=null,xt=null,vt=null,Ns=!1,qi=!1,Ji=0,Yy=0;function Mt(){throw Error(o(321))}function $u(t,n){if(n===null)return!1;for(var i=0;i<n.length&&i<t.length;i++)if(!Tn(t[i],n[i]))return!1;return!0}function Fu(t,n,i,d,p,v){if(vo=v,lt=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,_s.current=t===null||t.memoizedState===null?Qy:qy,t=i(d,p),qi){v=0;do{if(qi=!1,Ji=0,25<=v)throw Error(o(301));v+=1,vt=xt=null,n.updateQueue=null,_s.current=Jy,t=i(d,p)}while(qi)}if(_s.current=ks,n=xt!==null&&xt.next!==null,vo=0,vt=xt=lt=null,Ns=!1,n)throw Error(o(300));return t}function Ou(){var t=Ji!==0;return Ji=0,t}function qn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return vt===null?lt.memoizedState=vt=t:vt=vt.next=t,vt}function wn(){if(xt===null){var t=lt.alternate;t=t!==null?t.memoizedState:null}else t=xt.next;var n=vt===null?lt.memoizedState:vt.next;if(n!==null)vt=n,xt=t;else{if(t===null)throw Error(o(310));xt=t,t={memoizedState:xt.memoizedState,baseState:xt.baseState,baseQueue:xt.baseQueue,queue:xt.queue,next:null},vt===null?lt.memoizedState=vt=t:vt=vt.next=t}return vt}function ea(t,n){return typeof n=="function"?n(t):n}function Hu(t){var n=wn(),i=n.queue;if(i===null)throw Error(o(311));i.lastRenderedReducer=t;var d=xt,p=d.baseQueue,v=i.pending;if(v!==null){if(p!==null){var C=p.next;p.next=v.next,v.next=C}d.baseQueue=p=v,i.pending=null}if(p!==null){v=p.next,d=d.baseState;var V=C=null,G=null,ne=v;do{var le=ne.lane;if((vo&le)===le)G!==null&&(G=G.next={lane:0,action:ne.action,hasEagerState:ne.hasEagerState,eagerState:ne.eagerState,next:null}),d=ne.hasEagerState?ne.eagerState:t(d,ne.action);else{var ce={lane:le,action:ne.action,hasEagerState:ne.hasEagerState,eagerState:ne.eagerState,next:null};G===null?(V=G=ce,C=d):G=G.next=ce,lt.lanes|=le,wo|=le}ne=ne.next}while(ne!==null&&ne!==v);G===null?C=d:G.next=V,Tn(d,n.memoizedState)||(Yt=!0),n.memoizedState=d,n.baseState=C,n.baseQueue=G,i.lastRenderedState=d}if(t=i.interleaved,t!==null){p=t;do v=p.lane,lt.lanes|=v,wo|=v,p=p.next;while(p!==t)}else p===null&&(i.lanes=0);return[n.memoizedState,i.dispatch]}function Bu(t){var n=wn(),i=n.queue;if(i===null)throw Error(o(311));i.lastRenderedReducer=t;var d=i.dispatch,p=i.pending,v=n.memoizedState;if(p!==null){i.pending=null;var C=p=p.next;do v=t(v,C.action),C=C.next;while(C!==p);Tn(v,n.memoizedState)||(Yt=!0),n.memoizedState=v,n.baseQueue===null&&(n.baseState=v),i.lastRenderedState=v}return[v,d]}function th(){}function nh(t,n){var i=lt,d=wn(),p=n(),v=!Tn(d.memoizedState,p);if(v&&(d.memoizedState=p,Yt=!0),d=d.queue,Vu(ih.bind(null,i,d,t),[t]),d.getSnapshot!==n||v||vt!==null&&vt.memoizedState.tag&1){if(i.flags|=2048,ta(9,oh.bind(null,i,d,p,n),void 0,null),wt===null)throw Error(o(349));(vo&30)!==0||rh(i,n,p)}return p}function rh(t,n,i){t.flags|=16384,t={getSnapshot:n,value:i},n=lt.updateQueue,n===null?(n={lastEffect:null,stores:null},lt.updateQueue=n,n.stores=[t]):(i=n.stores,i===null?n.stores=[t]:i.push(t))}function oh(t,n,i,d){n.value=i,n.getSnapshot=d,ah(n)&&sh(t)}function ih(t,n,i){return i(function(){ah(n)&&sh(t)})}function ah(t){var n=t.getSnapshot;t=t.value;try{var i=n();return!Tn(t,i)}catch{return!0}}function sh(t){var n=vr(t,1);n!==null&&An(n,t,1,-1)}function lh(t){var n=qn();return typeof t=="function"&&(t=t()),n.memoizedState=n.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ea,lastRenderedState:t},n.queue=t,t=t.dispatch=Zy.bind(null,lt,t),[n.memoizedState,t]}function ta(t,n,i,d){return t={tag:t,create:n,destroy:i,deps:d,next:null},n=lt.updateQueue,n===null?(n={lastEffect:null,stores:null},lt.updateQueue=n,n.lastEffect=t.next=t):(i=n.lastEffect,i===null?n.lastEffect=t.next=t:(d=i.next,i.next=t,t.next=d,n.lastEffect=t)),t}function uh(){return wn().memoizedState}function Ss(t,n,i,d){var p=qn();lt.flags|=t,p.memoizedState=ta(1|n,i,void 0,d===void 0?null:d)}function js(t,n,i,d){var p=wn();d=d===void 0?null:d;var v=void 0;if(xt!==null){var C=xt.memoizedState;if(v=C.destroy,d!==null&&$u(d,C.deps)){p.memoizedState=ta(n,i,v,d);return}}lt.flags|=t,p.memoizedState=ta(1|n,i,v,d)}function ch(t,n){return Ss(8390656,8,t,n)}function Vu(t,n){return js(2048,8,t,n)}function dh(t,n){return js(4,2,t,n)}function fh(t,n){return js(4,4,t,n)}function hh(t,n){if(typeof n=="function")return t=t(),n(t),function(){n(null)};if(n!=null)return t=t(),n.current=t,function(){n.current=null}}function mh(t,n,i){return i=i!=null?i.concat([t]):null,js(4,4,hh.bind(null,n,t),i)}function Uu(){}function ph(t,n){var i=wn();n=n===void 0?null:n;var d=i.memoizedState;return d!==null&&n!==null&&$u(n,d[1])?d[0]:(i.memoizedState=[t,n],t)}function gh(t,n){var i=wn();n=n===void 0?null:n;var d=i.memoizedState;return d!==null&&n!==null&&$u(n,d[1])?d[0]:(t=t(),i.memoizedState=[t,n],t)}function xh(t,n,i){return(vo&21)===0?(t.baseState&&(t.baseState=!1,Yt=!0),t.memoizedState=i):(Tn(i,n)||(i=Vo(),lt.lanes|=i,wo|=i,t.baseState=!0),n)}function Ky(t,n){var i=qe;qe=i!==0&&4>i?i:4,t(!0);var d=Au.transition;Au.transition={};try{t(!1),n()}finally{qe=i,Au.transition=d}}function yh(){return wn().memoizedState}function Gy(t,n,i){var d=Yr(t);if(i={lane:d,action:i,hasEagerState:!1,eagerState:null,next:null},vh(t))wh(n,i);else if(i=Zf(t,n,i,d),i!==null){var p=Ft();An(i,t,d,p),bh(i,n,d)}}function Zy(t,n,i){var d=Yr(t),p={lane:d,action:i,hasEagerState:!1,eagerState:null,next:null};if(vh(t))wh(n,p);else{var v=t.alternate;if(t.lanes===0&&(v===null||v.lanes===0)&&(v=n.lastRenderedReducer,v!==null))try{var C=n.lastRenderedState,V=v(C,i);if(p.hasEagerState=!0,p.eagerState=V,Tn(V,C)){var G=n.interleaved;G===null?(p.next=p,Mu(n)):(p.next=G.next,G.next=p),n.interleaved=p;return}}catch{}i=Zf(t,n,p,d),i!==null&&(p=Ft(),An(i,t,d,p),bh(i,n,d))}}function vh(t){var n=t.alternate;return t===lt||n!==null&&n===lt}function wh(t,n){qi=Ns=!0;var i=t.pending;i===null?n.next=n:(n.next=i.next,i.next=n),t.pending=n}function bh(t,n,i){if((i&4194240)!==0){var d=n.lanes;d&=t.pendingLanes,i|=d,n.lanes=i,Xl(t,i)}}var ks={readContext:vn,useCallback:Mt,useContext:Mt,useEffect:Mt,useImperativeHandle:Mt,useInsertionEffect:Mt,useLayoutEffect:Mt,useMemo:Mt,useReducer:Mt,useRef:Mt,useState:Mt,useDebugValue:Mt,useDeferredValue:Mt,useTransition:Mt,useMutableSource:Mt,useSyncExternalStore:Mt,useId:Mt,unstable_isNewReconciler:!1},Qy={readContext:vn,useCallback:function(t,n){return qn().memoizedState=[t,n===void 0?null:n],t},useContext:vn,useEffect:ch,useImperativeHandle:function(t,n,i){return i=i!=null?i.concat([t]):null,Ss(4194308,4,hh.bind(null,n,t),i)},useLayoutEffect:function(t,n){return Ss(4194308,4,t,n)},useInsertionEffect:function(t,n){return Ss(4,2,t,n)},useMemo:function(t,n){var i=qn();return n=n===void 0?null:n,t=t(),i.memoizedState=[t,n],t},useReducer:function(t,n,i){var d=qn();return n=i!==void 0?i(n):n,d.memoizedState=d.baseState=n,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:n},d.queue=t,t=t.dispatch=Gy.bind(null,lt,t),[d.memoizedState,t]},useRef:function(t){var n=qn();return t={current:t},n.memoizedState=t},useState:lh,useDebugValue:Uu,useDeferredValue:function(t){return qn().memoizedState=t},useTransition:function(){var t=lh(!1),n=t[0];return t=Ky.bind(null,t[1]),qn().memoizedState=t,[n,t]},useMutableSource:function(){},useSyncExternalStore:function(t,n,i){var d=lt,p=qn();if(rt){if(i===void 0)throw Error(o(407));i=i()}else{if(i=n(),wt===null)throw Error(o(349));(vo&30)!==0||rh(d,n,i)}p.memoizedState=i;var v={value:i,getSnapshot:n};return p.queue=v,ch(ih.bind(null,d,v,t),[t]),d.flags|=2048,ta(9,oh.bind(null,d,v,i,n),void 0,null),i},useId:function(){var t=qn(),n=wt.identifierPrefix;if(rt){var i=yr,d=xr;i=(d&~(1<<32-Ze(d)-1)).toString(32)+i,n=":"+n+"R"+i,i=Ji++,0<i&&(n+="H"+i.toString(32)),n+=":"}else i=Yy++,n=":"+n+"r"+i.toString(32)+":";return t.memoizedState=n},unstable_isNewReconciler:!1},qy={readContext:vn,useCallback:ph,useContext:vn,useEffect:Vu,useImperativeHandle:mh,useInsertionEffect:dh,useLayoutEffect:fh,useMemo:gh,useReducer:Hu,useRef:uh,useState:function(){return Hu(ea)},useDebugValue:Uu,useDeferredValue:function(t){var n=wn();return xh(n,xt.memoizedState,t)},useTransition:function(){var t=Hu(ea)[0],n=wn().memoizedState;return[t,n]},useMutableSource:th,useSyncExternalStore:nh,useId:yh,unstable_isNewReconciler:!1},Jy={readContext:vn,useCallback:ph,useContext:vn,useEffect:Vu,useImperativeHandle:mh,useInsertionEffect:dh,useLayoutEffect:fh,useMemo:gh,useReducer:Bu,useRef:uh,useState:function(){return Bu(ea)},useDebugValue:Uu,useDeferredValue:function(t){var n=wn();return xt===null?n.memoizedState=t:xh(n,xt.memoizedState,t)},useTransition:function(){var t=Bu(ea)[0],n=wn().memoizedState;return[t,n]},useMutableSource:th,useSyncExternalStore:nh,useId:yh,unstable_isNewReconciler:!1};function Ln(t,n){if(t&&t.defaultProps){n=z({},n),t=t.defaultProps;for(var i in t)n[i]===void 0&&(n[i]=t[i]);return n}return n}function Wu(t,n,i,d){n=t.memoizedState,i=i(d,n),i=i==null?n:z({},n,i),t.memoizedState=i,t.lanes===0&&(t.updateQueue.baseState=i)}var Es={isMounted:function(t){return(t=t._reactInternals)?we(t)===t:!1},enqueueSetState:function(t,n,i){t=t._reactInternals;var d=Ft(),p=Yr(t),v=wr(d,p);v.payload=n,i!=null&&(v.callback=i),n=Vr(t,v,p),n!==null&&(An(n,t,p,d),vs(n,t,p))},enqueueReplaceState:function(t,n,i){t=t._reactInternals;var d=Ft(),p=Yr(t),v=wr(d,p);v.tag=1,v.payload=n,i!=null&&(v.callback=i),n=Vr(t,v,p),n!==null&&(An(n,t,p,d),vs(n,t,p))},enqueueForceUpdate:function(t,n){t=t._reactInternals;var i=Ft(),d=Yr(t),p=wr(i,d);p.tag=2,n!=null&&(p.callback=n),n=Vr(t,p,d),n!==null&&(An(n,t,d,i),vs(n,t,d))}};function _h(t,n,i,d,p,v,C){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(d,v,C):n.prototype&&n.prototype.isPureReactComponent?!Hi(i,d)||!Hi(p,v):!0}function Nh(t,n,i){var d=!1,p=Or,v=n.contextType;return typeof v=="object"&&v!==null?v=vn(v):(p=Xt(n)?mo:Rt.current,d=n.contextTypes,v=(d=d!=null)?Jo(t,p):Or),n=new n(i,v),t.memoizedState=n.state!==null&&n.state!==void 0?n.state:null,n.updater=Es,t.stateNode=n,n._reactInternals=t,d&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=p,t.__reactInternalMemoizedMaskedChildContext=v),n}function Sh(t,n,i,d){t=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(i,d),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(i,d),n.state!==t&&Es.enqueueReplaceState(n,n.state,null)}function Xu(t,n,i,d){var p=t.stateNode;p.props=i,p.state=t.memoizedState,p.refs={},Tu(t);var v=n.contextType;typeof v=="object"&&v!==null?p.context=vn(v):(v=Xt(n)?mo:Rt.current,p.context=Jo(t,v)),p.state=t.memoizedState,v=n.getDerivedStateFromProps,typeof v=="function"&&(Wu(t,n,v,i),p.state=t.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(n=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),n!==p.state&&Es.enqueueReplaceState(p,p.state,null),ws(t,i,p,d),p.state=t.memoizedState),typeof p.componentDidMount=="function"&&(t.flags|=4194308)}function si(t,n){try{var i="",d=n;do i+=ue(d),d=d.return;while(d);var p=i}catch(v){p=`
Error generating stack: `+v.message+`
`+v.stack}return{value:t,source:n,stack:p,digest:null}}function Yu(t,n,i){return{value:t,source:null,stack:i??null,digest:n??null}}function Ku(t,n){try{console.error(n.value)}catch(i){setTimeout(function(){throw i})}}var ev=typeof WeakMap=="function"?WeakMap:Map;function jh(t,n,i){i=wr(-1,i),i.tag=3,i.payload={element:null};var d=n.value;return i.callback=function(){Ls||(Ls=!0,uc=d),Ku(t,n)},i}function kh(t,n,i){i=wr(-1,i),i.tag=3;var d=t.type.getDerivedStateFromError;if(typeof d=="function"){var p=n.value;i.payload=function(){return d(p)},i.callback=function(){Ku(t,n)}}var v=t.stateNode;return v!==null&&typeof v.componentDidCatch=="function"&&(i.callback=function(){Ku(t,n),typeof d!="function"&&(Wr===null?Wr=new Set([this]):Wr.add(this));var C=n.stack;this.componentDidCatch(n.value,{componentStack:C!==null?C:""})}),i}function Eh(t,n,i){var d=t.pingCache;if(d===null){d=t.pingCache=new ev;var p=new Set;d.set(n,p)}else p=d.get(n),p===void 0&&(p=new Set,d.set(n,p));p.has(i)||(p.add(i),t=mv.bind(null,t,n,i),n.then(t,t))}function Ch(t){do{var n;if((n=t.tag===13)&&(n=t.memoizedState,n=n!==null?n.dehydrated!==null:!0),n)return t;t=t.return}while(t!==null);return null}function Ph(t,n,i,d,p){return(t.mode&1)===0?(t===n?t.flags|=65536:(t.flags|=128,i.flags|=131072,i.flags&=-52805,i.tag===1&&(i.alternate===null?i.tag=17:(n=wr(-1,1),n.tag=2,Vr(i,n,1))),i.lanes|=1),t):(t.flags|=65536,t.lanes=p,t)}var tv=P.ReactCurrentOwner,Yt=!1;function $t(t,n,i,d){n.child=t===null?Gf(n,null,i,d):ri(n,t.child,i,d)}function Rh(t,n,i,d,p){i=i.render;var v=n.ref;return ii(n,p),d=Fu(t,n,i,d,v,p),i=Ou(),t!==null&&!Yt?(n.updateQueue=t.updateQueue,n.flags&=-2053,t.lanes&=~p,br(t,n,p)):(rt&&i&&_u(n),n.flags|=1,$t(t,n,d,p),n.child)}function Mh(t,n,i,d,p){if(t===null){var v=i.type;return typeof v=="function"&&!gc(v)&&v.defaultProps===void 0&&i.compare===null&&i.defaultProps===void 0?(n.tag=15,n.type=v,Th(t,n,v,d,p)):(t=Os(i.type,null,d,n,n.mode,p),t.ref=n.ref,t.return=n,n.child=t)}if(v=t.child,(t.lanes&p)===0){var C=v.memoizedProps;if(i=i.compare,i=i!==null?i:Hi,i(C,d)&&t.ref===n.ref)return br(t,n,p)}return n.flags|=1,t=Gr(v,d),t.ref=n.ref,t.return=n,n.child=t}function Th(t,n,i,d,p){if(t!==null){var v=t.memoizedProps;if(Hi(v,d)&&t.ref===n.ref)if(Yt=!1,n.pendingProps=d=v,(t.lanes&p)!==0)(t.flags&131072)!==0&&(Yt=!0);else return n.lanes=t.lanes,br(t,n,p)}return Gu(t,n,i,d,p)}function Dh(t,n,i){var d=n.pendingProps,p=d.children,v=t!==null?t.memoizedState:null;if(d.mode==="hidden")if((n.mode&1)===0)n.memoizedState={baseLanes:0,cachePool:null,transitions:null},et(ui,sn),sn|=i;else{if((i&1073741824)===0)return t=v!==null?v.baseLanes|i:i,n.lanes=n.childLanes=1073741824,n.memoizedState={baseLanes:t,cachePool:null,transitions:null},n.updateQueue=null,et(ui,sn),sn|=t,null;n.memoizedState={baseLanes:0,cachePool:null,transitions:null},d=v!==null?v.baseLanes:i,et(ui,sn),sn|=d}else v!==null?(d=v.baseLanes|i,n.memoizedState=null):d=i,et(ui,sn),sn|=d;return $t(t,n,p,i),n.child}function Lh(t,n){var i=n.ref;(t===null&&i!==null||t!==null&&t.ref!==i)&&(n.flags|=512,n.flags|=2097152)}function Gu(t,n,i,d,p){var v=Xt(i)?mo:Rt.current;return v=Jo(n,v),ii(n,p),i=Fu(t,n,i,d,v,p),d=Ou(),t!==null&&!Yt?(n.updateQueue=t.updateQueue,n.flags&=-2053,t.lanes&=~p,br(t,n,p)):(rt&&d&&_u(n),n.flags|=1,$t(t,n,i,p),n.child)}function Ih(t,n,i,d,p){if(Xt(i)){var v=!0;ds(n)}else v=!1;if(ii(n,p),n.stateNode===null)Ps(t,n),Nh(n,i,d),Xu(n,i,d,p),d=!0;else if(t===null){var C=n.stateNode,V=n.memoizedProps;C.props=V;var G=C.context,ne=i.contextType;typeof ne=="object"&&ne!==null?ne=vn(ne):(ne=Xt(i)?mo:Rt.current,ne=Jo(n,ne));var le=i.getDerivedStateFromProps,ce=typeof le=="function"||typeof C.getSnapshotBeforeUpdate=="function";ce||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(V!==d||G!==ne)&&Sh(n,C,d,ne),Br=!1;var ae=n.memoizedState;C.state=ae,ws(n,d,C,p),G=n.memoizedState,V!==d||ae!==G||Wt.current||Br?(typeof le=="function"&&(Wu(n,i,le,d),G=n.memoizedState),(V=Br||_h(n,i,V,d,ae,G,ne))?(ce||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount()),typeof C.componentDidMount=="function"&&(n.flags|=4194308)):(typeof C.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=d,n.memoizedState=G),C.props=d,C.state=G,C.context=ne,d=V):(typeof C.componentDidMount=="function"&&(n.flags|=4194308),d=!1)}else{C=n.stateNode,Qf(t,n),V=n.memoizedProps,ne=n.type===n.elementType?V:Ln(n.type,V),C.props=ne,ce=n.pendingProps,ae=C.context,G=i.contextType,typeof G=="object"&&G!==null?G=vn(G):(G=Xt(i)?mo:Rt.current,G=Jo(n,G));var ge=i.getDerivedStateFromProps;(le=typeof ge=="function"||typeof C.getSnapshotBeforeUpdate=="function")||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(V!==ce||ae!==G)&&Sh(n,C,d,G),Br=!1,ae=n.memoizedState,C.state=ae,ws(n,d,C,p);var be=n.memoizedState;V!==ce||ae!==be||Wt.current||Br?(typeof ge=="function"&&(Wu(n,i,ge,d),be=n.memoizedState),(ne=Br||_h(n,i,ne,d,ae,be,G)||!1)?(le||typeof C.UNSAFE_componentWillUpdate!="function"&&typeof C.componentWillUpdate!="function"||(typeof C.componentWillUpdate=="function"&&C.componentWillUpdate(d,be,G),typeof C.UNSAFE_componentWillUpdate=="function"&&C.UNSAFE_componentWillUpdate(d,be,G)),typeof C.componentDidUpdate=="function"&&(n.flags|=4),typeof C.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof C.componentDidUpdate!="function"||V===t.memoizedProps&&ae===t.memoizedState||(n.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||V===t.memoizedProps&&ae===t.memoizedState||(n.flags|=1024),n.memoizedProps=d,n.memoizedState=be),C.props=d,C.state=be,C.context=G,d=ne):(typeof C.componentDidUpdate!="function"||V===t.memoizedProps&&ae===t.memoizedState||(n.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||V===t.memoizedProps&&ae===t.memoizedState||(n.flags|=1024),d=!1)}return Zu(t,n,i,d,v,p)}function Zu(t,n,i,d,p,v){Lh(t,n);var C=(n.flags&128)!==0;if(!d&&!C)return p&&Of(n,i,!1),br(t,n,v);d=n.stateNode,tv.current=n;var V=C&&typeof i.getDerivedStateFromError!="function"?null:d.render();return n.flags|=1,t!==null&&C?(n.child=ri(n,t.child,null,v),n.child=ri(n,null,V,v)):$t(t,n,V,v),n.memoizedState=d.state,p&&Of(n,i,!0),n.child}function zh(t){var n=t.stateNode;n.pendingContext?$f(t,n.pendingContext,n.pendingContext!==n.context):n.context&&$f(t,n.context,!1),Du(t,n.containerInfo)}function Ah(t,n,i,d,p){return ni(),ku(p),n.flags|=256,$t(t,n,i,d),n.child}var Qu={dehydrated:null,treeContext:null,retryLane:0};function qu(t){return{baseLanes:t,cachePool:null,transitions:null}}function $h(t,n,i){var d=n.pendingProps,p=st.current,v=!1,C=(n.flags&128)!==0,V;if((V=C)||(V=t!==null&&t.memoizedState===null?!1:(p&2)!==0),V?(v=!0,n.flags&=-129):(t===null||t.memoizedState!==null)&&(p|=1),et(st,p&1),t===null)return ju(n),t=n.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?((n.mode&1)===0?n.lanes=1:t.data==="$!"?n.lanes=8:n.lanes=1073741824,null):(C=d.children,t=d.fallback,v?(d=n.mode,v=n.child,C={mode:"hidden",children:C},(d&1)===0&&v!==null?(v.childLanes=0,v.pendingProps=C):v=Hs(C,d,0,null),t=So(t,d,i,null),v.return=n,t.return=n,v.sibling=t,n.child=v,n.child.memoizedState=qu(i),n.memoizedState=Qu,t):Ju(n,C));if(p=t.memoizedState,p!==null&&(V=p.dehydrated,V!==null))return nv(t,n,C,d,V,p,i);if(v){v=d.fallback,C=n.mode,p=t.child,V=p.sibling;var G={mode:"hidden",children:d.children};return(C&1)===0&&n.child!==p?(d=n.child,d.childLanes=0,d.pendingProps=G,n.deletions=null):(d=Gr(p,G),d.subtreeFlags=p.subtreeFlags&14680064),V!==null?v=Gr(V,v):(v=So(v,C,i,null),v.flags|=2),v.return=n,d.return=n,d.sibling=v,n.child=d,d=v,v=n.child,C=t.child.memoizedState,C=C===null?qu(i):{baseLanes:C.baseLanes|i,cachePool:null,transitions:C.transitions},v.memoizedState=C,v.childLanes=t.childLanes&~i,n.memoizedState=Qu,d}return v=t.child,t=v.sibling,d=Gr(v,{mode:"visible",children:d.children}),(n.mode&1)===0&&(d.lanes=i),d.return=n,d.sibling=null,t!==null&&(i=n.deletions,i===null?(n.deletions=[t],n.flags|=16):i.push(t)),n.child=d,n.memoizedState=null,d}function Ju(t,n){return n=Hs({mode:"visible",children:n},t.mode,0,null),n.return=t,t.child=n}function Cs(t,n,i,d){return d!==null&&ku(d),ri(n,t.child,null,i),t=Ju(n,n.pendingProps.children),t.flags|=2,n.memoizedState=null,t}function nv(t,n,i,d,p,v,C){if(i)return n.flags&256?(n.flags&=-257,d=Yu(Error(o(422))),Cs(t,n,C,d)):n.memoizedState!==null?(n.child=t.child,n.flags|=128,null):(v=d.fallback,p=n.mode,d=Hs({mode:"visible",children:d.children},p,0,null),v=So(v,p,C,null),v.flags|=2,d.return=n,v.return=n,d.sibling=v,n.child=d,(n.mode&1)!==0&&ri(n,t.child,null,C),n.child.memoizedState=qu(C),n.memoizedState=Qu,v);if((n.mode&1)===0)return Cs(t,n,C,null);if(p.data==="$!"){if(d=p.nextSibling&&p.nextSibling.dataset,d)var V=d.dgst;return d=V,v=Error(o(419)),d=Yu(v,d,void 0),Cs(t,n,C,d)}if(V=(C&t.childLanes)!==0,Yt||V){if(d=wt,d!==null){switch(C&-C){case 4:p=2;break;case 16:p=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:p=32;break;case 536870912:p=268435456;break;default:p=0}p=(p&(d.suspendedLanes|C))!==0?0:p,p!==0&&p!==v.retryLane&&(v.retryLane=p,vr(t,p),An(d,t,p,-1))}return pc(),d=Yu(Error(o(421))),Cs(t,n,C,d)}return p.data==="$?"?(n.flags|=128,n.child=t.child,n=pv.bind(null,t),p._reactRetry=n,null):(t=v.treeContext,an=$r(p.nextSibling),on=n,rt=!0,Dn=null,t!==null&&(xn[yn++]=xr,xn[yn++]=yr,xn[yn++]=po,xr=t.id,yr=t.overflow,po=n),n=Ju(n,d.children),n.flags|=4096,n)}function Fh(t,n,i){t.lanes|=n;var d=t.alternate;d!==null&&(d.lanes|=n),Ru(t.return,n,i)}function ec(t,n,i,d,p){var v=t.memoizedState;v===null?t.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:d,tail:i,tailMode:p}:(v.isBackwards=n,v.rendering=null,v.renderingStartTime=0,v.last=d,v.tail=i,v.tailMode=p)}function Oh(t,n,i){var d=n.pendingProps,p=d.revealOrder,v=d.tail;if($t(t,n,d.children,i),d=st.current,(d&2)!==0)d=d&1|2,n.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=n.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Fh(t,i,n);else if(t.tag===19)Fh(t,i,n);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===n)break e;for(;t.sibling===null;){if(t.return===null||t.return===n)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}d&=1}if(et(st,d),(n.mode&1)===0)n.memoizedState=null;else switch(p){case"forwards":for(i=n.child,p=null;i!==null;)t=i.alternate,t!==null&&bs(t)===null&&(p=i),i=i.sibling;i=p,i===null?(p=n.child,n.child=null):(p=i.sibling,i.sibling=null),ec(n,!1,p,i,v);break;case"backwards":for(i=null,p=n.child,n.child=null;p!==null;){if(t=p.alternate,t!==null&&bs(t)===null){n.child=p;break}t=p.sibling,p.sibling=i,i=p,p=t}ec(n,!0,i,null,v);break;case"together":ec(n,!1,null,null,void 0);break;default:n.memoizedState=null}return n.child}function Ps(t,n){(n.mode&1)===0&&t!==null&&(t.alternate=null,n.alternate=null,n.flags|=2)}function br(t,n,i){if(t!==null&&(n.dependencies=t.dependencies),wo|=n.lanes,(i&n.childLanes)===0)return null;if(t!==null&&n.child!==t.child)throw Error(o(153));if(n.child!==null){for(t=n.child,i=Gr(t,t.pendingProps),n.child=i,i.return=n;t.sibling!==null;)t=t.sibling,i=i.sibling=Gr(t,t.pendingProps),i.return=n;i.sibling=null}return n.child}function rv(t,n,i){switch(n.tag){case 3:zh(n),ni();break;case 5:eh(n);break;case 1:Xt(n.type)&&ds(n);break;case 4:Du(n,n.stateNode.containerInfo);break;case 10:var d=n.type._context,p=n.memoizedProps.value;et(xs,d._currentValue),d._currentValue=p;break;case 13:if(d=n.memoizedState,d!==null)return d.dehydrated!==null?(et(st,st.current&1),n.flags|=128,null):(i&n.child.childLanes)!==0?$h(t,n,i):(et(st,st.current&1),t=br(t,n,i),t!==null?t.sibling:null);et(st,st.current&1);break;case 19:if(d=(i&n.childLanes)!==0,(t.flags&128)!==0){if(d)return Oh(t,n,i);n.flags|=128}if(p=n.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),et(st,st.current),d)break;return null;case 22:case 23:return n.lanes=0,Dh(t,n,i)}return br(t,n,i)}var Hh,tc,Bh,Vh;Hh=function(t,n){for(var i=n.child;i!==null;){if(i.tag===5||i.tag===6)t.appendChild(i.stateNode);else if(i.tag!==4&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return;i=i.return}i.sibling.return=i.return,i=i.sibling}},tc=function(){},Bh=function(t,n,i,d){var p=t.memoizedProps;if(p!==d){t=n.stateNode,yo(Qn.current);var v=null;switch(i){case"input":p=Ve(t,p),d=Ve(t,d),v=[];break;case"select":p=z({},p,{value:void 0}),d=z({},d,{value:void 0}),v=[];break;case"textarea":p=Cn(t,p),d=Cn(t,d),v=[];break;default:typeof p.onClick!="function"&&typeof d.onClick=="function"&&(t.onclick=ls)}Pr(i,d);var C;i=null;for(ne in p)if(!d.hasOwnProperty(ne)&&p.hasOwnProperty(ne)&&p[ne]!=null)if(ne==="style"){var V=p[ne];for(C in V)V.hasOwnProperty(C)&&(i||(i={}),i[C]="")}else ne!=="dangerouslySetInnerHTML"&&ne!=="children"&&ne!=="suppressContentEditableWarning"&&ne!=="suppressHydrationWarning"&&ne!=="autoFocus"&&(l.hasOwnProperty(ne)?v||(v=[]):(v=v||[]).push(ne,null));for(ne in d){var G=d[ne];if(V=p?.[ne],d.hasOwnProperty(ne)&&G!==V&&(G!=null||V!=null))if(ne==="style")if(V){for(C in V)!V.hasOwnProperty(C)||G&&G.hasOwnProperty(C)||(i||(i={}),i[C]="");for(C in G)G.hasOwnProperty(C)&&V[C]!==G[C]&&(i||(i={}),i[C]=G[C])}else i||(v||(v=[]),v.push(ne,i)),i=G;else ne==="dangerouslySetInnerHTML"?(G=G?G.__html:void 0,V=V?V.__html:void 0,G!=null&&V!==G&&(v=v||[]).push(ne,G)):ne==="children"?typeof G!="string"&&typeof G!="number"||(v=v||[]).push(ne,""+G):ne!=="suppressContentEditableWarning"&&ne!=="suppressHydrationWarning"&&(l.hasOwnProperty(ne)?(G!=null&&ne==="onScroll"&&tt("scroll",t),v||V===G||(v=[])):(v=v||[]).push(ne,G))}i&&(v=v||[]).push("style",i);var ne=v;(n.updateQueue=ne)&&(n.flags|=4)}},Vh=function(t,n,i,d){i!==d&&(n.flags|=4)};function na(t,n){if(!rt)switch(t.tailMode){case"hidden":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?t.tail=null:i.sibling=null;break;case"collapsed":i=t.tail;for(var d=null;i!==null;)i.alternate!==null&&(d=i),i=i.sibling;d===null?n||t.tail===null?t.tail=null:t.tail.sibling=null:d.sibling=null}}function Tt(t){var n=t.alternate!==null&&t.alternate.child===t.child,i=0,d=0;if(n)for(var p=t.child;p!==null;)i|=p.lanes|p.childLanes,d|=p.subtreeFlags&14680064,d|=p.flags&14680064,p.return=t,p=p.sibling;else for(p=t.child;p!==null;)i|=p.lanes|p.childLanes,d|=p.subtreeFlags,d|=p.flags,p.return=t,p=p.sibling;return t.subtreeFlags|=d,t.childLanes=i,n}function ov(t,n,i){var d=n.pendingProps;switch(Nu(n),n.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Tt(n),null;case 1:return Xt(n.type)&&cs(),Tt(n),null;case 3:return d=n.stateNode,ai(),nt(Wt),nt(Rt),zu(),d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null),(t===null||t.child===null)&&(ps(n)?n.flags|=4:t===null||t.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,Dn!==null&&(fc(Dn),Dn=null))),tc(t,n),Tt(n),null;case 5:Lu(n);var p=yo(Qi.current);if(i=n.type,t!==null&&n.stateNode!=null)Bh(t,n,i,d,p),t.ref!==n.ref&&(n.flags|=512,n.flags|=2097152);else{if(!d){if(n.stateNode===null)throw Error(o(166));return Tt(n),null}if(t=yo(Qn.current),ps(n)){d=n.stateNode,i=n.type;var v=n.memoizedProps;switch(d[Zn]=n,d[Xi]=v,t=(n.mode&1)!==0,i){case"dialog":tt("cancel",d),tt("close",d);break;case"iframe":case"object":case"embed":tt("load",d);break;case"video":case"audio":for(p=0;p<Vi.length;p++)tt(Vi[p],d);break;case"source":tt("error",d);break;case"img":case"image":case"link":tt("error",d),tt("load",d);break;case"details":tt("toggle",d);break;case"input":Qe(d,v),tt("invalid",d);break;case"select":d._wrapperState={wasMultiple:!!v.multiple},tt("invalid",d);break;case"textarea":Un(d,v),tt("invalid",d)}Pr(i,v),p=null;for(var C in v)if(v.hasOwnProperty(C)){var V=v[C];C==="children"?typeof V=="string"?d.textContent!==V&&(v.suppressHydrationWarning!==!0&&ss(d.textContent,V,t),p=["children",V]):typeof V=="number"&&d.textContent!==""+V&&(v.suppressHydrationWarning!==!0&&ss(d.textContent,V,t),p=["children",""+V]):l.hasOwnProperty(C)&&V!=null&&C==="onScroll"&&tt("scroll",d)}switch(i){case"input":ze(d),en(d,v,!0);break;case"textarea":ze(d),tn(d);break;case"select":case"option":break;default:typeof v.onClick=="function"&&(d.onclick=ls)}d=p,n.updateQueue=d,d!==null&&(n.flags|=4)}else{C=p.nodeType===9?p:p.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=fn(i)),t==="http://www.w3.org/1999/xhtml"?i==="script"?(t=C.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof d.is=="string"?t=C.createElement(i,{is:d.is}):(t=C.createElement(i),i==="select"&&(C=t,d.multiple?C.multiple=!0:d.size&&(C.size=d.size))):t=C.createElementNS(t,i),t[Zn]=n,t[Xi]=d,Hh(t,n,!1,!1),n.stateNode=t;e:{switch(C=Rr(i,d),i){case"dialog":tt("cancel",t),tt("close",t),p=d;break;case"iframe":case"object":case"embed":tt("load",t),p=d;break;case"video":case"audio":for(p=0;p<Vi.length;p++)tt(Vi[p],t);p=d;break;case"source":tt("error",t),p=d;break;case"img":case"image":case"link":tt("error",t),tt("load",t),p=d;break;case"details":tt("toggle",t),p=d;break;case"input":Qe(t,d),p=Ve(t,d),tt("invalid",t);break;case"option":p=d;break;case"select":t._wrapperState={wasMultiple:!!d.multiple},p=z({},d,{value:void 0}),tt("invalid",t);break;case"textarea":Un(t,d),p=Cn(t,d),tt("invalid",t);break;default:p=d}Pr(i,p),V=p;for(v in V)if(V.hasOwnProperty(v)){var G=V[v];v==="style"?Vt(t,G):v==="dangerouslySetInnerHTML"?(G=G?G.__html:void 0,G!=null&&Bt(t,G)):v==="children"?typeof G=="string"?(i!=="textarea"||G!=="")&&hn(t,G):typeof G=="number"&&hn(t,""+G):v!=="suppressContentEditableWarning"&&v!=="suppressHydrationWarning"&&v!=="autoFocus"&&(l.hasOwnProperty(v)?G!=null&&v==="onScroll"&&tt("scroll",t):G!=null&&b(t,v,G,C))}switch(i){case"input":ze(t),en(t,d,!1);break;case"textarea":ze(t),tn(t);break;case"option":d.value!=null&&t.setAttribute("value",""+ie(d.value));break;case"select":t.multiple=!!d.multiple,v=d.value,v!=null?Ot(t,!!d.multiple,v,!1):d.defaultValue!=null&&Ot(t,!!d.multiple,d.defaultValue,!0);break;default:typeof p.onClick=="function"&&(t.onclick=ls)}switch(i){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break e;case"img":d=!0;break e;default:d=!1}}d&&(n.flags|=4)}n.ref!==null&&(n.flags|=512,n.flags|=2097152)}return Tt(n),null;case 6:if(t&&n.stateNode!=null)Vh(t,n,t.memoizedProps,d);else{if(typeof d!="string"&&n.stateNode===null)throw Error(o(166));if(i=yo(Qi.current),yo(Qn.current),ps(n)){if(d=n.stateNode,i=n.memoizedProps,d[Zn]=n,(v=d.nodeValue!==i)&&(t=on,t!==null))switch(t.tag){case 3:ss(d.nodeValue,i,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&ss(d.nodeValue,i,(t.mode&1)!==0)}v&&(n.flags|=4)}else d=(i.nodeType===9?i:i.ownerDocument).createTextNode(d),d[Zn]=n,n.stateNode=d}return Tt(n),null;case 13:if(nt(st),d=n.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(rt&&an!==null&&(n.mode&1)!==0&&(n.flags&128)===0)Xf(),ni(),n.flags|=98560,v=!1;else if(v=ps(n),d!==null&&d.dehydrated!==null){if(t===null){if(!v)throw Error(o(318));if(v=n.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(o(317));v[Zn]=n}else ni(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;Tt(n),v=!1}else Dn!==null&&(fc(Dn),Dn=null),v=!0;if(!v)return n.flags&65536?n:null}return(n.flags&128)!==0?(n.lanes=i,n):(d=d!==null,d!==(t!==null&&t.memoizedState!==null)&&d&&(n.child.flags|=8192,(n.mode&1)!==0&&(t===null||(st.current&1)!==0?yt===0&&(yt=3):pc())),n.updateQueue!==null&&(n.flags|=4),Tt(n),null);case 4:return ai(),tc(t,n),t===null&&Ui(n.stateNode.containerInfo),Tt(n),null;case 10:return Pu(n.type._context),Tt(n),null;case 17:return Xt(n.type)&&cs(),Tt(n),null;case 19:if(nt(st),v=n.memoizedState,v===null)return Tt(n),null;if(d=(n.flags&128)!==0,C=v.rendering,C===null)if(d)na(v,!1);else{if(yt!==0||t!==null&&(t.flags&128)!==0)for(t=n.child;t!==null;){if(C=bs(t),C!==null){for(n.flags|=128,na(v,!1),d=C.updateQueue,d!==null&&(n.updateQueue=d,n.flags|=4),n.subtreeFlags=0,d=i,i=n.child;i!==null;)v=i,t=d,v.flags&=14680066,C=v.alternate,C===null?(v.childLanes=0,v.lanes=t,v.child=null,v.subtreeFlags=0,v.memoizedProps=null,v.memoizedState=null,v.updateQueue=null,v.dependencies=null,v.stateNode=null):(v.childLanes=C.childLanes,v.lanes=C.lanes,v.child=C.child,v.subtreeFlags=0,v.deletions=null,v.memoizedProps=C.memoizedProps,v.memoizedState=C.memoizedState,v.updateQueue=C.updateQueue,v.type=C.type,t=C.dependencies,v.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),i=i.sibling;return et(st,st.current&1|2),n.child}t=t.sibling}v.tail!==null&&Ge()>ci&&(n.flags|=128,d=!0,na(v,!1),n.lanes=4194304)}else{if(!d)if(t=bs(C),t!==null){if(n.flags|=128,d=!0,i=t.updateQueue,i!==null&&(n.updateQueue=i,n.flags|=4),na(v,!0),v.tail===null&&v.tailMode==="hidden"&&!C.alternate&&!rt)return Tt(n),null}else 2*Ge()-v.renderingStartTime>ci&&i!==1073741824&&(n.flags|=128,d=!0,na(v,!1),n.lanes=4194304);v.isBackwards?(C.sibling=n.child,n.child=C):(i=v.last,i!==null?i.sibling=C:n.child=C,v.last=C)}return v.tail!==null?(n=v.tail,v.rendering=n,v.tail=n.sibling,v.renderingStartTime=Ge(),n.sibling=null,i=st.current,et(st,d?i&1|2:i&1),n):(Tt(n),null);case 22:case 23:return mc(),d=n.memoizedState!==null,t!==null&&t.memoizedState!==null!==d&&(n.flags|=8192),d&&(n.mode&1)!==0?(sn&1073741824)!==0&&(Tt(n),n.subtreeFlags&6&&(n.flags|=8192)):Tt(n),null;case 24:return null;case 25:return null}throw Error(o(156,n.tag))}function iv(t,n){switch(Nu(n),n.tag){case 1:return Xt(n.type)&&cs(),t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 3:return ai(),nt(Wt),nt(Rt),zu(),t=n.flags,(t&65536)!==0&&(t&128)===0?(n.flags=t&-65537|128,n):null;case 5:return Lu(n),null;case 13:if(nt(st),t=n.memoizedState,t!==null&&t.dehydrated!==null){if(n.alternate===null)throw Error(o(340));ni()}return t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 19:return nt(st),null;case 4:return ai(),null;case 10:return Pu(n.type._context),null;case 22:case 23:return mc(),null;case 24:return null;default:return null}}var Rs=!1,Dt=!1,av=typeof WeakSet=="function"?WeakSet:Set,ve=null;function li(t,n){var i=t.ref;if(i!==null)if(typeof i=="function")try{i(null)}catch(d){dt(t,n,d)}else i.current=null}function nc(t,n,i){try{i()}catch(d){dt(t,n,d)}}var Uh=!1;function sv(t,n){if(mu=Za,t=_f(),au(t)){if("selectionStart"in t)var i={start:t.selectionStart,end:t.selectionEnd};else e:{i=(i=t.ownerDocument)&&i.defaultView||window;var d=i.getSelection&&i.getSelection();if(d&&d.rangeCount!==0){i=d.anchorNode;var p=d.anchorOffset,v=d.focusNode;d=d.focusOffset;try{i.nodeType,v.nodeType}catch{i=null;break e}var C=0,V=-1,G=-1,ne=0,le=0,ce=t,ae=null;t:for(;;){for(var ge;ce!==i||p!==0&&ce.nodeType!==3||(V=C+p),ce!==v||d!==0&&ce.nodeType!==3||(G=C+d),ce.nodeType===3&&(C+=ce.nodeValue.length),(ge=ce.firstChild)!==null;)ae=ce,ce=ge;for(;;){if(ce===t)break t;if(ae===i&&++ne===p&&(V=C),ae===v&&++le===d&&(G=C),(ge=ce.nextSibling)!==null)break;ce=ae,ae=ce.parentNode}ce=ge}i=V===-1||G===-1?null:{start:V,end:G}}else i=null}i=i||{start:0,end:0}}else i=null;for(pu={focusedElem:t,selectionRange:i},Za=!1,ve=n;ve!==null;)if(n=ve,t=n.child,(n.subtreeFlags&1028)!==0&&t!==null)t.return=n,ve=t;else for(;ve!==null;){n=ve;try{var be=n.alternate;if((n.flags&1024)!==0)switch(n.tag){case 0:case 11:case 15:break;case 1:if(be!==null){var Se=be.memoizedProps,ft=be.memoizedState,J=n.stateNode,Z=J.getSnapshotBeforeUpdate(n.elementType===n.type?Se:Ln(n.type,Se),ft);J.__reactInternalSnapshotBeforeUpdate=Z}break;case 3:var ee=n.stateNode.containerInfo;ee.nodeType===1?ee.textContent="":ee.nodeType===9&&ee.documentElement&&ee.removeChild(ee.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(o(163))}}catch(fe){dt(n,n.return,fe)}if(t=n.sibling,t!==null){t.return=n.return,ve=t;break}ve=n.return}return be=Uh,Uh=!1,be}function ra(t,n,i){var d=n.updateQueue;if(d=d!==null?d.lastEffect:null,d!==null){var p=d=d.next;do{if((p.tag&t)===t){var v=p.destroy;p.destroy=void 0,v!==void 0&&nc(n,i,v)}p=p.next}while(p!==d)}}function Ms(t,n){if(n=n.updateQueue,n=n!==null?n.lastEffect:null,n!==null){var i=n=n.next;do{if((i.tag&t)===t){var d=i.create;i.destroy=d()}i=i.next}while(i!==n)}}function rc(t){var n=t.ref;if(n!==null){var i=t.stateNode;t.tag,t=i,typeof n=="function"?n(t):n.current=t}}function Wh(t){var n=t.alternate;n!==null&&(t.alternate=null,Wh(n)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(n=t.stateNode,n!==null&&(delete n[Zn],delete n[Xi],delete n[vu],delete n[Vy],delete n[Uy])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Xh(t){return t.tag===5||t.tag===3||t.tag===4}function Yh(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Xh(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function oc(t,n,i){var d=t.tag;if(d===5||d===6)t=t.stateNode,n?i.nodeType===8?i.parentNode.insertBefore(t,n):i.insertBefore(t,n):(i.nodeType===8?(n=i.parentNode,n.insertBefore(t,i)):(n=i,n.appendChild(t)),i=i._reactRootContainer,i!=null||n.onclick!==null||(n.onclick=ls));else if(d!==4&&(t=t.child,t!==null))for(oc(t,n,i),t=t.sibling;t!==null;)oc(t,n,i),t=t.sibling}function ic(t,n,i){var d=t.tag;if(d===5||d===6)t=t.stateNode,n?i.insertBefore(t,n):i.appendChild(t);else if(d!==4&&(t=t.child,t!==null))for(ic(t,n,i),t=t.sibling;t!==null;)ic(t,n,i),t=t.sibling}var Et=null,In=!1;function Ur(t,n,i){for(i=i.child;i!==null;)Kh(t,n,i),i=i.sibling}function Kh(t,n,i){if(kt&&typeof kt.onCommitFiberUnmount=="function")try{kt.onCommitFiberUnmount(gn,i)}catch{}switch(i.tag){case 5:Dt||li(i,n);case 6:var d=Et,p=In;Et=null,Ur(t,n,i),Et=d,In=p,Et!==null&&(In?(t=Et,i=i.stateNode,t.nodeType===8?t.parentNode.removeChild(i):t.removeChild(i)):Et.removeChild(i.stateNode));break;case 18:Et!==null&&(In?(t=Et,i=i.stateNode,t.nodeType===8?yu(t.parentNode,i):t.nodeType===1&&yu(t,i),Ii(t)):yu(Et,i.stateNode));break;case 4:d=Et,p=In,Et=i.stateNode.containerInfo,In=!0,Ur(t,n,i),Et=d,In=p;break;case 0:case 11:case 14:case 15:if(!Dt&&(d=i.updateQueue,d!==null&&(d=d.lastEffect,d!==null))){p=d=d.next;do{var v=p,C=v.destroy;v=v.tag,C!==void 0&&((v&2)!==0||(v&4)!==0)&&nc(i,n,C),p=p.next}while(p!==d)}Ur(t,n,i);break;case 1:if(!Dt&&(li(i,n),d=i.stateNode,typeof d.componentWillUnmount=="function"))try{d.props=i.memoizedProps,d.state=i.memoizedState,d.componentWillUnmount()}catch(V){dt(i,n,V)}Ur(t,n,i);break;case 21:Ur(t,n,i);break;case 22:i.mode&1?(Dt=(d=Dt)||i.memoizedState!==null,Ur(t,n,i),Dt=d):Ur(t,n,i);break;default:Ur(t,n,i)}}function Gh(t){var n=t.updateQueue;if(n!==null){t.updateQueue=null;var i=t.stateNode;i===null&&(i=t.stateNode=new av),n.forEach(function(d){var p=gv.bind(null,t,d);i.has(d)||(i.add(d),d.then(p,p))})}}function zn(t,n){var i=n.deletions;if(i!==null)for(var d=0;d<i.length;d++){var p=i[d];try{var v=t,C=n,V=C;e:for(;V!==null;){switch(V.tag){case 5:Et=V.stateNode,In=!1;break e;case 3:Et=V.stateNode.containerInfo,In=!0;break e;case 4:Et=V.stateNode.containerInfo,In=!0;break e}V=V.return}if(Et===null)throw Error(o(160));Kh(v,C,p),Et=null,In=!1;var G=p.alternate;G!==null&&(G.return=null),p.return=null}catch(ne){dt(p,n,ne)}}if(n.subtreeFlags&12854)for(n=n.child;n!==null;)Zh(n,t),n=n.sibling}function Zh(t,n){var i=t.alternate,d=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(zn(n,t),Jn(t),d&4){try{ra(3,t,t.return),Ms(3,t)}catch(Se){dt(t,t.return,Se)}try{ra(5,t,t.return)}catch(Se){dt(t,t.return,Se)}}break;case 1:zn(n,t),Jn(t),d&512&&i!==null&&li(i,i.return);break;case 5:if(zn(n,t),Jn(t),d&512&&i!==null&&li(i,i.return),t.flags&32){var p=t.stateNode;try{hn(p,"")}catch(Se){dt(t,t.return,Se)}}if(d&4&&(p=t.stateNode,p!=null)){var v=t.memoizedProps,C=i!==null?i.memoizedProps:v,V=t.type,G=t.updateQueue;if(t.updateQueue=null,G!==null)try{V==="input"&&v.type==="radio"&&v.name!=null&&He(p,v),Rr(V,C);var ne=Rr(V,v);for(C=0;C<G.length;C+=2){var le=G[C],ce=G[C+1];le==="style"?Vt(p,ce):le==="dangerouslySetInnerHTML"?Bt(p,ce):le==="children"?hn(p,ce):b(p,le,ce,ne)}switch(V){case"input":ut(p,v);break;case"textarea":Ht(p,v);break;case"select":var ae=p._wrapperState.wasMultiple;p._wrapperState.wasMultiple=!!v.multiple;var ge=v.value;ge!=null?Ot(p,!!v.multiple,ge,!1):ae!==!!v.multiple&&(v.defaultValue!=null?Ot(p,!!v.multiple,v.defaultValue,!0):Ot(p,!!v.multiple,v.multiple?[]:"",!1))}p[Xi]=v}catch(Se){dt(t,t.return,Se)}}break;case 6:if(zn(n,t),Jn(t),d&4){if(t.stateNode===null)throw Error(o(162));p=t.stateNode,v=t.memoizedProps;try{p.nodeValue=v}catch(Se){dt(t,t.return,Se)}}break;case 3:if(zn(n,t),Jn(t),d&4&&i!==null&&i.memoizedState.isDehydrated)try{Ii(n.containerInfo)}catch(Se){dt(t,t.return,Se)}break;case 4:zn(n,t),Jn(t);break;case 13:zn(n,t),Jn(t),p=t.child,p.flags&8192&&(v=p.memoizedState!==null,p.stateNode.isHidden=v,!v||p.alternate!==null&&p.alternate.memoizedState!==null||(lc=Ge())),d&4&&Gh(t);break;case 22:if(le=i!==null&&i.memoizedState!==null,t.mode&1?(Dt=(ne=Dt)||le,zn(n,t),Dt=ne):zn(n,t),Jn(t),d&8192){if(ne=t.memoizedState!==null,(t.stateNode.isHidden=ne)&&!le&&(t.mode&1)!==0)for(ve=t,le=t.child;le!==null;){for(ce=ve=le;ve!==null;){switch(ae=ve,ge=ae.child,ae.tag){case 0:case 11:case 14:case 15:ra(4,ae,ae.return);break;case 1:li(ae,ae.return);var be=ae.stateNode;if(typeof be.componentWillUnmount=="function"){d=ae,i=ae.return;try{n=d,be.props=n.memoizedProps,be.state=n.memoizedState,be.componentWillUnmount()}catch(Se){dt(d,i,Se)}}break;case 5:li(ae,ae.return);break;case 22:if(ae.memoizedState!==null){Jh(ce);continue}}ge!==null?(ge.return=ae,ve=ge):Jh(ce)}le=le.sibling}e:for(le=null,ce=t;;){if(ce.tag===5){if(le===null){le=ce;try{p=ce.stateNode,ne?(v=p.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none"):(V=ce.stateNode,G=ce.memoizedProps.style,C=G!=null&&G.hasOwnProperty("display")?G.display:null,V.style.display=$o("display",C))}catch(Se){dt(t,t.return,Se)}}}else if(ce.tag===6){if(le===null)try{ce.stateNode.nodeValue=ne?"":ce.memoizedProps}catch(Se){dt(t,t.return,Se)}}else if((ce.tag!==22&&ce.tag!==23||ce.memoizedState===null||ce===t)&&ce.child!==null){ce.child.return=ce,ce=ce.child;continue}if(ce===t)break e;for(;ce.sibling===null;){if(ce.return===null||ce.return===t)break e;le===ce&&(le=null),ce=ce.return}le===ce&&(le=null),ce.sibling.return=ce.return,ce=ce.sibling}}break;case 19:zn(n,t),Jn(t),d&4&&Gh(t);break;case 21:break;default:zn(n,t),Jn(t)}}function Jn(t){var n=t.flags;if(n&2){try{e:{for(var i=t.return;i!==null;){if(Xh(i)){var d=i;break e}i=i.return}throw Error(o(160))}switch(d.tag){case 5:var p=d.stateNode;d.flags&32&&(hn(p,""),d.flags&=-33);var v=Yh(t);ic(t,v,p);break;case 3:case 4:var C=d.stateNode.containerInfo,V=Yh(t);oc(t,V,C);break;default:throw Error(o(161))}}catch(G){dt(t,t.return,G)}t.flags&=-3}n&4096&&(t.flags&=-4097)}function lv(t,n,i){ve=t,Qh(t)}function Qh(t,n,i){for(var d=(t.mode&1)!==0;ve!==null;){var p=ve,v=p.child;if(p.tag===22&&d){var C=p.memoizedState!==null||Rs;if(!C){var V=p.alternate,G=V!==null&&V.memoizedState!==null||Dt;V=Rs;var ne=Dt;if(Rs=C,(Dt=G)&&!ne)for(ve=p;ve!==null;)C=ve,G=C.child,C.tag===22&&C.memoizedState!==null?em(p):G!==null?(G.return=C,ve=G):em(p);for(;v!==null;)ve=v,Qh(v),v=v.sibling;ve=p,Rs=V,Dt=ne}qh(t)}else(p.subtreeFlags&8772)!==0&&v!==null?(v.return=p,ve=v):qh(t)}}function qh(t){for(;ve!==null;){var n=ve;if((n.flags&8772)!==0){var i=n.alternate;try{if((n.flags&8772)!==0)switch(n.tag){case 0:case 11:case 15:Dt||Ms(5,n);break;case 1:var d=n.stateNode;if(n.flags&4&&!Dt)if(i===null)d.componentDidMount();else{var p=n.elementType===n.type?i.memoizedProps:Ln(n.type,i.memoizedProps);d.componentDidUpdate(p,i.memoizedState,d.__reactInternalSnapshotBeforeUpdate)}var v=n.updateQueue;v!==null&&Jf(n,v,d);break;case 3:var C=n.updateQueue;if(C!==null){if(i=null,n.child!==null)switch(n.child.tag){case 5:i=n.child.stateNode;break;case 1:i=n.child.stateNode}Jf(n,C,i)}break;case 5:var V=n.stateNode;if(i===null&&n.flags&4){i=V;var G=n.memoizedProps;switch(n.type){case"button":case"input":case"select":case"textarea":G.autoFocus&&i.focus();break;case"img":G.src&&(i.src=G.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(n.memoizedState===null){var ne=n.alternate;if(ne!==null){var le=ne.memoizedState;if(le!==null){var ce=le.dehydrated;ce!==null&&Ii(ce)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(o(163))}Dt||n.flags&512&&rc(n)}catch(ae){dt(n,n.return,ae)}}if(n===t){ve=null;break}if(i=n.sibling,i!==null){i.return=n.return,ve=i;break}ve=n.return}}function Jh(t){for(;ve!==null;){var n=ve;if(n===t){ve=null;break}var i=n.sibling;if(i!==null){i.return=n.return,ve=i;break}ve=n.return}}function em(t){for(;ve!==null;){var n=ve;try{switch(n.tag){case 0:case 11:case 15:var i=n.return;try{Ms(4,n)}catch(G){dt(n,i,G)}break;case 1:var d=n.stateNode;if(typeof d.componentDidMount=="function"){var p=n.return;try{d.componentDidMount()}catch(G){dt(n,p,G)}}var v=n.return;try{rc(n)}catch(G){dt(n,v,G)}break;case 5:var C=n.return;try{rc(n)}catch(G){dt(n,C,G)}}}catch(G){dt(n,n.return,G)}if(n===t){ve=null;break}var V=n.sibling;if(V!==null){V.return=n.return,ve=V;break}ve=n.return}}var uv=Math.ceil,Ts=P.ReactCurrentDispatcher,ac=P.ReactCurrentOwner,bn=P.ReactCurrentBatchConfig,Xe=0,wt=null,mt=null,Ct=0,sn=0,ui=Fr(0),yt=0,oa=null,wo=0,Ds=0,sc=0,ia=null,Kt=null,lc=0,ci=1/0,_r=null,Ls=!1,uc=null,Wr=null,Is=!1,Xr=null,zs=0,aa=0,cc=null,As=-1,$s=0;function Ft(){return(Xe&6)!==0?Ge():As!==-1?As:As=Ge()}function Yr(t){return(t.mode&1)===0?1:(Xe&2)!==0&&Ct!==0?Ct&-Ct:Xy.transition!==null?($s===0&&($s=Vo()),$s):(t=qe,t!==0||(t=window.event,t=t===void 0?16:tf(t.type)),t)}function An(t,n,i,d){if(50<aa)throw aa=0,cc=null,Error(o(185));fo(t,i,d),((Xe&2)===0||t!==wt)&&(t===wt&&((Xe&2)===0&&(Ds|=i),yt===4&&Kr(t,Ct)),Gt(t,d),i===1&&Xe===0&&(n.mode&1)===0&&(ci=Ge()+500,fs&&Hr()))}function Gt(t,n){var i=t.callbackNode;Wl(t,n);var d=Bo(t,t===wt?Ct:0);if(d===0)i!==null&&ht(i),t.callbackNode=null,t.callbackPriority=0;else if(n=d&-d,t.callbackPriority!==n){if(i!=null&&ht(i),n===1)t.tag===0?Wy(nm.bind(null,t)):Hf(nm.bind(null,t)),Hy(function(){(Xe&6)===0&&Hr()}),i=null;else{switch(Yd(d)){case 1:i=Ut;break;case 4:i=At;break;case 16:i=Yn;break;case 536870912:i=pn;break;default:i=Yn}i=cm(i,tm.bind(null,t))}t.callbackPriority=n,t.callbackNode=i}}function tm(t,n){if(As=-1,$s=0,(Xe&6)!==0)throw Error(o(327));var i=t.callbackNode;if(di()&&t.callbackNode!==i)return null;var d=Bo(t,t===wt?Ct:0);if(d===0)return null;if((d&30)!==0||(d&t.expiredLanes)!==0||n)n=Fs(t,d);else{n=d;var p=Xe;Xe|=2;var v=om();(wt!==t||Ct!==n)&&(_r=null,ci=Ge()+500,_o(t,n));do try{fv();break}catch(V){rm(t,V)}while(!0);Cu(),Ts.current=v,Xe=p,mt!==null?n=0:(wt=null,Ct=0,n=yt)}if(n!==0){if(n===2&&(p=Pi(t),p!==0&&(d=p,n=dc(t,p))),n===1)throw i=oa,_o(t,0),Kr(t,d),Gt(t,Ge()),i;if(n===6)Kr(t,d);else{if(p=t.current.alternate,(d&30)===0&&!cv(p)&&(n=Fs(t,d),n===2&&(v=Pi(t),v!==0&&(d=v,n=dc(t,v))),n===1))throw i=oa,_o(t,0),Kr(t,d),Gt(t,Ge()),i;switch(t.finishedWork=p,t.finishedLanes=d,n){case 0:case 1:throw Error(o(345));case 2:No(t,Kt,_r);break;case 3:if(Kr(t,d),(d&130023424)===d&&(n=lc+500-Ge(),10<n)){if(Bo(t,0)!==0)break;if(p=t.suspendedLanes,(p&d)!==d){Ft(),t.pingedLanes|=t.suspendedLanes&p;break}t.timeoutHandle=xu(No.bind(null,t,Kt,_r),n);break}No(t,Kt,_r);break;case 4:if(Kr(t,d),(d&4194240)===d)break;for(n=t.eventTimes,p=-1;0<d;){var C=31-Ze(d);v=1<<C,C=n[C],C>p&&(p=C),d&=~v}if(d=p,d=Ge()-d,d=(120>d?120:480>d?480:1080>d?1080:1920>d?1920:3e3>d?3e3:4320>d?4320:1960*uv(d/1960))-d,10<d){t.timeoutHandle=xu(No.bind(null,t,Kt,_r),d);break}No(t,Kt,_r);break;case 5:No(t,Kt,_r);break;default:throw Error(o(329))}}}return Gt(t,Ge()),t.callbackNode===i?tm.bind(null,t):null}function dc(t,n){var i=ia;return t.current.memoizedState.isDehydrated&&(_o(t,n).flags|=256),t=Fs(t,n),t!==2&&(n=Kt,Kt=i,n!==null&&fc(n)),t}function fc(t){Kt===null?Kt=t:Kt.push.apply(Kt,t)}function cv(t){for(var n=t;;){if(n.flags&16384){var i=n.updateQueue;if(i!==null&&(i=i.stores,i!==null))for(var d=0;d<i.length;d++){var p=i[d],v=p.getSnapshot;p=p.value;try{if(!Tn(v(),p))return!1}catch{return!1}}}if(i=n.child,n.subtreeFlags&16384&&i!==null)i.return=n,n=i;else{if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function Kr(t,n){for(n&=~sc,n&=~Ds,t.suspendedLanes|=n,t.pingedLanes&=~n,t=t.expirationTimes;0<n;){var i=31-Ze(n),d=1<<i;t[i]=-1,n&=~d}}function nm(t){if((Xe&6)!==0)throw Error(o(327));di();var n=Bo(t,0);if((n&1)===0)return Gt(t,Ge()),null;var i=Fs(t,n);if(t.tag!==0&&i===2){var d=Pi(t);d!==0&&(n=d,i=dc(t,d))}if(i===1)throw i=oa,_o(t,0),Kr(t,n),Gt(t,Ge()),i;if(i===6)throw Error(o(345));return t.finishedWork=t.current.alternate,t.finishedLanes=n,No(t,Kt,_r),Gt(t,Ge()),null}function hc(t,n){var i=Xe;Xe|=1;try{return t(n)}finally{Xe=i,Xe===0&&(ci=Ge()+500,fs&&Hr())}}function bo(t){Xr!==null&&Xr.tag===0&&(Xe&6)===0&&di();var n=Xe;Xe|=1;var i=bn.transition,d=qe;try{if(bn.transition=null,qe=1,t)return t()}finally{qe=d,bn.transition=i,Xe=n,(Xe&6)===0&&Hr()}}function mc(){sn=ui.current,nt(ui)}function _o(t,n){t.finishedWork=null,t.finishedLanes=0;var i=t.timeoutHandle;if(i!==-1&&(t.timeoutHandle=-1,Oy(i)),mt!==null)for(i=mt.return;i!==null;){var d=i;switch(Nu(d),d.tag){case 1:d=d.type.childContextTypes,d!=null&&cs();break;case 3:ai(),nt(Wt),nt(Rt),zu();break;case 5:Lu(d);break;case 4:ai();break;case 13:nt(st);break;case 19:nt(st);break;case 10:Pu(d.type._context);break;case 22:case 23:mc()}i=i.return}if(wt=t,mt=t=Gr(t.current,null),Ct=sn=n,yt=0,oa=null,sc=Ds=wo=0,Kt=ia=null,xo!==null){for(n=0;n<xo.length;n++)if(i=xo[n],d=i.interleaved,d!==null){i.interleaved=null;var p=d.next,v=i.pending;if(v!==null){var C=v.next;v.next=p,d.next=C}i.pending=d}xo=null}return t}function rm(t,n){do{var i=mt;try{if(Cu(),_s.current=ks,Ns){for(var d=lt.memoizedState;d!==null;){var p=d.queue;p!==null&&(p.pending=null),d=d.next}Ns=!1}if(vo=0,vt=xt=lt=null,qi=!1,Ji=0,ac.current=null,i===null||i.return===null){yt=1,oa=n,mt=null;break}e:{var v=t,C=i.return,V=i,G=n;if(n=Ct,V.flags|=32768,G!==null&&typeof G=="object"&&typeof G.then=="function"){var ne=G,le=V,ce=le.tag;if((le.mode&1)===0&&(ce===0||ce===11||ce===15)){var ae=le.alternate;ae?(le.updateQueue=ae.updateQueue,le.memoizedState=ae.memoizedState,le.lanes=ae.lanes):(le.updateQueue=null,le.memoizedState=null)}var ge=Ch(C);if(ge!==null){ge.flags&=-257,Ph(ge,C,V,v,n),ge.mode&1&&Eh(v,ne,n),n=ge,G=ne;var be=n.updateQueue;if(be===null){var Se=new Set;Se.add(G),n.updateQueue=Se}else be.add(G);break e}else{if((n&1)===0){Eh(v,ne,n),pc();break e}G=Error(o(426))}}else if(rt&&V.mode&1){var ft=Ch(C);if(ft!==null){(ft.flags&65536)===0&&(ft.flags|=256),Ph(ft,C,V,v,n),ku(si(G,V));break e}}v=G=si(G,V),yt!==4&&(yt=2),ia===null?ia=[v]:ia.push(v),v=C;do{switch(v.tag){case 3:v.flags|=65536,n&=-n,v.lanes|=n;var J=jh(v,G,n);qf(v,J);break e;case 1:V=G;var Z=v.type,ee=v.stateNode;if((v.flags&128)===0&&(typeof Z.getDerivedStateFromError=="function"||ee!==null&&typeof ee.componentDidCatch=="function"&&(Wr===null||!Wr.has(ee)))){v.flags|=65536,n&=-n,v.lanes|=n;var fe=kh(v,V,n);qf(v,fe);break e}}v=v.return}while(v!==null)}am(i)}catch(Ee){n=Ee,mt===i&&i!==null&&(mt=i=i.return);continue}break}while(!0)}function om(){var t=Ts.current;return Ts.current=ks,t===null?ks:t}function pc(){(yt===0||yt===3||yt===2)&&(yt=4),wt===null||(wo&268435455)===0&&(Ds&268435455)===0||Kr(wt,Ct)}function Fs(t,n){var i=Xe;Xe|=2;var d=om();(wt!==t||Ct!==n)&&(_r=null,_o(t,n));do try{dv();break}catch(p){rm(t,p)}while(!0);if(Cu(),Xe=i,Ts.current=d,mt!==null)throw Error(o(261));return wt=null,Ct=0,yt}function dv(){for(;mt!==null;)im(mt)}function fv(){for(;mt!==null&&!Ye();)im(mt)}function im(t){var n=um(t.alternate,t,sn);t.memoizedProps=t.pendingProps,n===null?am(t):mt=n,ac.current=null}function am(t){var n=t;do{var i=n.alternate;if(t=n.return,(n.flags&32768)===0){if(i=ov(i,n,sn),i!==null){mt=i;return}}else{if(i=iv(i,n),i!==null){i.flags&=32767,mt=i;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{yt=6,mt=null;return}}if(n=n.sibling,n!==null){mt=n;return}mt=n=t}while(n!==null);yt===0&&(yt=5)}function No(t,n,i){var d=qe,p=bn.transition;try{bn.transition=null,qe=1,hv(t,n,i,d)}finally{bn.transition=p,qe=d}return null}function hv(t,n,i,d){do di();while(Xr!==null);if((Xe&6)!==0)throw Error(o(327));i=t.finishedWork;var p=t.finishedLanes;if(i===null)return null;if(t.finishedWork=null,t.finishedLanes=0,i===t.current)throw Error(o(177));t.callbackNode=null,t.callbackPriority=0;var v=i.lanes|i.childLanes;if(Ya(t,v),t===wt&&(mt=wt=null,Ct=0),(i.subtreeFlags&2064)===0&&(i.flags&2064)===0||Is||(Is=!0,cm(Yn,function(){return di(),null})),v=(i.flags&15990)!==0,(i.subtreeFlags&15990)!==0||v){v=bn.transition,bn.transition=null;var C=qe;qe=1;var V=Xe;Xe|=4,ac.current=null,sv(t,i),Zh(i,t),Dy(pu),Za=!!mu,pu=mu=null,t.current=i,lv(i),jt(),Xe=V,qe=C,bn.transition=v}else t.current=i;if(Is&&(Is=!1,Xr=t,zs=p),v=t.pendingLanes,v===0&&(Wr=null),Oe(i.stateNode),Gt(t,Ge()),n!==null)for(d=t.onRecoverableError,i=0;i<n.length;i++)p=n[i],d(p.value,{componentStack:p.stack,digest:p.digest});if(Ls)throw Ls=!1,t=uc,uc=null,t;return(zs&1)!==0&&t.tag!==0&&di(),v=t.pendingLanes,(v&1)!==0?t===cc?aa++:(aa=0,cc=t):aa=0,Hr(),null}function di(){if(Xr!==null){var t=Yd(zs),n=bn.transition,i=qe;try{if(bn.transition=null,qe=16>t?16:t,Xr===null)var d=!1;else{if(t=Xr,Xr=null,zs=0,(Xe&6)!==0)throw Error(o(331));var p=Xe;for(Xe|=4,ve=t.current;ve!==null;){var v=ve,C=v.child;if((ve.flags&16)!==0){var V=v.deletions;if(V!==null){for(var G=0;G<V.length;G++){var ne=V[G];for(ve=ne;ve!==null;){var le=ve;switch(le.tag){case 0:case 11:case 15:ra(8,le,v)}var ce=le.child;if(ce!==null)ce.return=le,ve=ce;else for(;ve!==null;){le=ve;var ae=le.sibling,ge=le.return;if(Wh(le),le===ne){ve=null;break}if(ae!==null){ae.return=ge,ve=ae;break}ve=ge}}}var be=v.alternate;if(be!==null){var Se=be.child;if(Se!==null){be.child=null;do{var ft=Se.sibling;Se.sibling=null,Se=ft}while(Se!==null)}}ve=v}}if((v.subtreeFlags&2064)!==0&&C!==null)C.return=v,ve=C;else e:for(;ve!==null;){if(v=ve,(v.flags&2048)!==0)switch(v.tag){case 0:case 11:case 15:ra(9,v,v.return)}var J=v.sibling;if(J!==null){J.return=v.return,ve=J;break e}ve=v.return}}var Z=t.current;for(ve=Z;ve!==null;){C=ve;var ee=C.child;if((C.subtreeFlags&2064)!==0&&ee!==null)ee.return=C,ve=ee;else e:for(C=Z;ve!==null;){if(V=ve,(V.flags&2048)!==0)try{switch(V.tag){case 0:case 11:case 15:Ms(9,V)}}catch(Ee){dt(V,V.return,Ee)}if(V===C){ve=null;break e}var fe=V.sibling;if(fe!==null){fe.return=V.return,ve=fe;break e}ve=V.return}}if(Xe=p,Hr(),kt&&typeof kt.onPostCommitFiberRoot=="function")try{kt.onPostCommitFiberRoot(gn,t)}catch{}d=!0}return d}finally{qe=i,bn.transition=n}}return!1}function sm(t,n,i){n=si(i,n),n=jh(t,n,1),t=Vr(t,n,1),n=Ft(),t!==null&&(fo(t,1,n),Gt(t,n))}function dt(t,n,i){if(t.tag===3)sm(t,t,i);else for(;n!==null;){if(n.tag===3){sm(n,t,i);break}else if(n.tag===1){var d=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(Wr===null||!Wr.has(d))){t=si(i,t),t=kh(n,t,1),n=Vr(n,t,1),t=Ft(),n!==null&&(fo(n,1,t),Gt(n,t));break}}n=n.return}}function mv(t,n,i){var d=t.pingCache;d!==null&&d.delete(n),n=Ft(),t.pingedLanes|=t.suspendedLanes&i,wt===t&&(Ct&i)===i&&(yt===4||yt===3&&(Ct&130023424)===Ct&&500>Ge()-lc?_o(t,0):sc|=i),Gt(t,n)}function lm(t,n){n===0&&((t.mode&1)===0?n=1:(n=mr,mr<<=1,(mr&130023424)===0&&(mr=4194304)));var i=Ft();t=vr(t,n),t!==null&&(fo(t,n,i),Gt(t,i))}function pv(t){var n=t.memoizedState,i=0;n!==null&&(i=n.retryLane),lm(t,i)}function gv(t,n){var i=0;switch(t.tag){case 13:var d=t.stateNode,p=t.memoizedState;p!==null&&(i=p.retryLane);break;case 19:d=t.stateNode;break;default:throw Error(o(314))}d!==null&&d.delete(n),lm(t,i)}var um;um=function(t,n,i){if(t!==null)if(t.memoizedProps!==n.pendingProps||Wt.current)Yt=!0;else{if((t.lanes&i)===0&&(n.flags&128)===0)return Yt=!1,rv(t,n,i);Yt=(t.flags&131072)!==0}else Yt=!1,rt&&(n.flags&1048576)!==0&&Bf(n,ms,n.index);switch(n.lanes=0,n.tag){case 2:var d=n.type;Ps(t,n),t=n.pendingProps;var p=Jo(n,Rt.current);ii(n,i),p=Fu(null,n,d,t,p,i);var v=Ou();return n.flags|=1,typeof p=="object"&&p!==null&&typeof p.render=="function"&&p.$$typeof===void 0?(n.tag=1,n.memoizedState=null,n.updateQueue=null,Xt(d)?(v=!0,ds(n)):v=!1,n.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,Tu(n),p.updater=Es,n.stateNode=p,p._reactInternals=n,Xu(n,d,t,i),n=Zu(null,n,d,!0,v,i)):(n.tag=0,rt&&v&&_u(n),$t(null,n,p,i),n=n.child),n;case 16:d=n.elementType;e:{switch(Ps(t,n),t=n.pendingProps,p=d._init,d=p(d._payload),n.type=d,p=n.tag=yv(d),t=Ln(d,t),p){case 0:n=Gu(null,n,d,t,i);break e;case 1:n=Ih(null,n,d,t,i);break e;case 11:n=Rh(null,n,d,t,i);break e;case 14:n=Mh(null,n,d,Ln(d.type,t),i);break e}throw Error(o(306,d,""))}return n;case 0:return d=n.type,p=n.pendingProps,p=n.elementType===d?p:Ln(d,p),Gu(t,n,d,p,i);case 1:return d=n.type,p=n.pendingProps,p=n.elementType===d?p:Ln(d,p),Ih(t,n,d,p,i);case 3:e:{if(zh(n),t===null)throw Error(o(387));d=n.pendingProps,v=n.memoizedState,p=v.element,Qf(t,n),ws(n,d,null,i);var C=n.memoizedState;if(d=C.element,v.isDehydrated)if(v={element:d,isDehydrated:!1,cache:C.cache,pendingSuspenseBoundaries:C.pendingSuspenseBoundaries,transitions:C.transitions},n.updateQueue.baseState=v,n.memoizedState=v,n.flags&256){p=si(Error(o(423)),n),n=Ah(t,n,d,i,p);break e}else if(d!==p){p=si(Error(o(424)),n),n=Ah(t,n,d,i,p);break e}else for(an=$r(n.stateNode.containerInfo.firstChild),on=n,rt=!0,Dn=null,i=Gf(n,null,d,i),n.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling;else{if(ni(),d===p){n=br(t,n,i);break e}$t(t,n,d,i)}n=n.child}return n;case 5:return eh(n),t===null&&ju(n),d=n.type,p=n.pendingProps,v=t!==null?t.memoizedProps:null,C=p.children,gu(d,p)?C=null:v!==null&&gu(d,v)&&(n.flags|=32),Lh(t,n),$t(t,n,C,i),n.child;case 6:return t===null&&ju(n),null;case 13:return $h(t,n,i);case 4:return Du(n,n.stateNode.containerInfo),d=n.pendingProps,t===null?n.child=ri(n,null,d,i):$t(t,n,d,i),n.child;case 11:return d=n.type,p=n.pendingProps,p=n.elementType===d?p:Ln(d,p),Rh(t,n,d,p,i);case 7:return $t(t,n,n.pendingProps,i),n.child;case 8:return $t(t,n,n.pendingProps.children,i),n.child;case 12:return $t(t,n,n.pendingProps.children,i),n.child;case 10:e:{if(d=n.type._context,p=n.pendingProps,v=n.memoizedProps,C=p.value,et(xs,d._currentValue),d._currentValue=C,v!==null)if(Tn(v.value,C)){if(v.children===p.children&&!Wt.current){n=br(t,n,i);break e}}else for(v=n.child,v!==null&&(v.return=n);v!==null;){var V=v.dependencies;if(V!==null){C=v.child;for(var G=V.firstContext;G!==null;){if(G.context===d){if(v.tag===1){G=wr(-1,i&-i),G.tag=2;var ne=v.updateQueue;if(ne!==null){ne=ne.shared;var le=ne.pending;le===null?G.next=G:(G.next=le.next,le.next=G),ne.pending=G}}v.lanes|=i,G=v.alternate,G!==null&&(G.lanes|=i),Ru(v.return,i,n),V.lanes|=i;break}G=G.next}}else if(v.tag===10)C=v.type===n.type?null:v.child;else if(v.tag===18){if(C=v.return,C===null)throw Error(o(341));C.lanes|=i,V=C.alternate,V!==null&&(V.lanes|=i),Ru(C,i,n),C=v.sibling}else C=v.child;if(C!==null)C.return=v;else for(C=v;C!==null;){if(C===n){C=null;break}if(v=C.sibling,v!==null){v.return=C.return,C=v;break}C=C.return}v=C}$t(t,n,p.children,i),n=n.child}return n;case 9:return p=n.type,d=n.pendingProps.children,ii(n,i),p=vn(p),d=d(p),n.flags|=1,$t(t,n,d,i),n.child;case 14:return d=n.type,p=Ln(d,n.pendingProps),p=Ln(d.type,p),Mh(t,n,d,p,i);case 15:return Th(t,n,n.type,n.pendingProps,i);case 17:return d=n.type,p=n.pendingProps,p=n.elementType===d?p:Ln(d,p),Ps(t,n),n.tag=1,Xt(d)?(t=!0,ds(n)):t=!1,ii(n,i),Nh(n,d,p),Xu(n,d,p,i),Zu(null,n,d,!0,t,i);case 19:return Oh(t,n,i);case 22:return Dh(t,n,i)}throw Error(o(156,n.tag))};function cm(t,n){return at(t,n)}function xv(t,n,i,d){this.tag=t,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function _n(t,n,i,d){return new xv(t,n,i,d)}function gc(t){return t=t.prototype,!(!t||!t.isReactComponent)}function yv(t){if(typeof t=="function")return gc(t)?1:0;if(t!=null){if(t=t.$$typeof,t===F)return 11;if(t===A)return 14}return 2}function Gr(t,n){var i=t.alternate;return i===null?(i=_n(t.tag,n,t.key,t.mode),i.elementType=t.elementType,i.type=t.type,i.stateNode=t.stateNode,i.alternate=t,t.alternate=i):(i.pendingProps=n,i.type=t.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=t.flags&14680064,i.childLanes=t.childLanes,i.lanes=t.lanes,i.child=t.child,i.memoizedProps=t.memoizedProps,i.memoizedState=t.memoizedState,i.updateQueue=t.updateQueue,n=t.dependencies,i.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},i.sibling=t.sibling,i.index=t.index,i.ref=t.ref,i}function Os(t,n,i,d,p,v){var C=2;if(d=t,typeof t=="function")gc(t)&&(C=1);else if(typeof t=="string")C=5;else e:switch(t){case M:return So(i.children,p,v,n);case H:C=8,p|=8;break;case Y:return t=_n(12,i,n,p|2),t.elementType=Y,t.lanes=v,t;case L:return t=_n(13,i,n,p),t.elementType=L,t.lanes=v,t;case k:return t=_n(19,i,n,p),t.elementType=k,t.lanes=v,t;case Q:return Hs(i,p,v,n);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case B:C=10;break e;case I:C=9;break e;case F:C=11;break e;case A:C=14;break e;case X:C=16,d=null;break e}throw Error(o(130,t==null?t:typeof t,""))}return n=_n(C,i,n,p),n.elementType=t,n.type=d,n.lanes=v,n}function So(t,n,i,d){return t=_n(7,t,d,n),t.lanes=i,t}function Hs(t,n,i,d){return t=_n(22,t,d,n),t.elementType=Q,t.lanes=i,t.stateNode={isHidden:!1},t}function xc(t,n,i){return t=_n(6,t,null,n),t.lanes=i,t}function yc(t,n,i){return n=_n(4,t.children!==null?t.children:[],t.key,n),n.lanes=i,n.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},n}function vv(t,n,i,d,p){this.tag=n,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ri(0),this.expirationTimes=Ri(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ri(0),this.identifierPrefix=d,this.onRecoverableError=p,this.mutableSourceEagerHydrationData=null}function vc(t,n,i,d,p,v,C,V,G){return t=new vv(t,n,i,V,G),n===1?(n=1,v===!0&&(n|=8)):n=0,v=_n(3,null,null,n),t.current=v,v.stateNode=t,v.memoizedState={element:d,isDehydrated:i,cache:null,transitions:null,pendingSuspenseBoundaries:null},Tu(v),t}function wv(t,n,i){var d=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:D,key:d==null?null:""+d,children:t,containerInfo:n,implementation:i}}function dm(t){if(!t)return Or;t=t._reactInternals;e:{if(we(t)!==t||t.tag!==1)throw Error(o(170));var n=t;do{switch(n.tag){case 3:n=n.stateNode.context;break e;case 1:if(Xt(n.type)){n=n.stateNode.__reactInternalMemoizedMergedChildContext;break e}}n=n.return}while(n!==null);throw Error(o(171))}if(t.tag===1){var i=t.type;if(Xt(i))return Ff(t,i,n)}return n}function fm(t,n,i,d,p,v,C,V,G){return t=vc(i,d,!0,t,p,v,C,V,G),t.context=dm(null),i=t.current,d=Ft(),p=Yr(i),v=wr(d,p),v.callback=n??null,Vr(i,v,p),t.current.lanes=p,fo(t,p,d),Gt(t,d),t}function Bs(t,n,i,d){var p=n.current,v=Ft(),C=Yr(p);return i=dm(i),n.context===null?n.context=i:n.pendingContext=i,n=wr(v,C),n.payload={element:t},d=d===void 0?null:d,d!==null&&(n.callback=d),t=Vr(p,n,C),t!==null&&(An(t,p,C,v),vs(t,p,C)),C}function Vs(t){return t=t.current,t.child?(t.child.tag===5,t.child.stateNode):null}function hm(t,n){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var i=t.retryLane;t.retryLane=i!==0&&i<n?i:n}}function wc(t,n){hm(t,n),(t=t.alternate)&&hm(t,n)}function bv(){return null}var mm=typeof reportError=="function"?reportError:function(t){console.error(t)};function bc(t){this._internalRoot=t}Us.prototype.render=bc.prototype.render=function(t){var n=this._internalRoot;if(n===null)throw Error(o(409));Bs(t,n,null,null)},Us.prototype.unmount=bc.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var n=t.containerInfo;bo(function(){Bs(null,t,null,null)}),n[pr]=null}};function Us(t){this._internalRoot=t}Us.prototype.unstable_scheduleHydration=function(t){if(t){var n=Zd();t={blockedOn:null,target:t,priority:n};for(var i=0;i<Ir.length&&n!==0&&n<Ir[i].priority;i++);Ir.splice(i,0,t),i===0&&Jd(t)}};function _c(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Ws(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function pm(){}function _v(t,n,i,d,p){if(p){if(typeof d=="function"){var v=d;d=function(){var ne=Vs(C);v.call(ne)}}var C=fm(n,d,t,0,null,!1,!1,"",pm);return t._reactRootContainer=C,t[pr]=C.current,Ui(t.nodeType===8?t.parentNode:t),bo(),C}for(;p=t.lastChild;)t.removeChild(p);if(typeof d=="function"){var V=d;d=function(){var ne=Vs(G);V.call(ne)}}var G=vc(t,0,!1,null,null,!1,!1,"",pm);return t._reactRootContainer=G,t[pr]=G.current,Ui(t.nodeType===8?t.parentNode:t),bo(function(){Bs(n,G,i,d)}),G}function Xs(t,n,i,d,p){var v=i._reactRootContainer;if(v){var C=v;if(typeof p=="function"){var V=p;p=function(){var G=Vs(C);V.call(G)}}Bs(n,C,t,p)}else C=_v(i,n,t,p,d);return Vs(C)}Kd=function(t){switch(t.tag){case 3:var n=t.stateNode;if(n.current.memoizedState.isDehydrated){var i=Gn(n.pendingLanes);i!==0&&(Xl(n,i|1),Gt(n,Ge()),(Xe&6)===0&&(ci=Ge()+500,Hr()))}break;case 13:bo(function(){var d=vr(t,1);if(d!==null){var p=Ft();An(d,t,1,p)}}),wc(t,1)}},Yl=function(t){if(t.tag===13){var n=vr(t,134217728);if(n!==null){var i=Ft();An(n,t,134217728,i)}wc(t,134217728)}},Gd=function(t){if(t.tag===13){var n=Yr(t),i=vr(t,n);if(i!==null){var d=Ft();An(i,t,n,d)}wc(t,n)}},Zd=function(){return qe},Qd=function(t,n){var i=qe;try{return qe=t,n()}finally{qe=i}},Wn=function(t,n,i){switch(n){case"input":if(ut(t,i),n=i.name,i.type==="radio"&&n!=null){for(i=t;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll("input[name="+JSON.stringify(""+n)+'][type="radio"]'),n=0;n<i.length;n++){var d=i[n];if(d!==t&&d.form===t.form){var p=us(d);if(!p)throw Error(o(90));xe(d),ut(d,p)}}}break;case"textarea":Ht(t,i);break;case"select":n=i.value,n!=null&&Ot(t,!!i.multiple,n,!1)}},lo=hc,cr=bo;var Nv={usingClientEntryPoint:!1,Events:[Yi,Qo,us,so,Ho,hc]},sa={findFiberByHostInstance:ho,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Sv={bundleType:sa.bundleType,version:sa.version,rendererPackageName:sa.rendererPackageName,rendererConfig:sa.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:P.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Fe(t),t===null?null:t.stateNode},findFiberByHostInstance:sa.findFiberByHostInstance||bv,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ys=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ys.isDisabled&&Ys.supportsFiber)try{gn=Ys.inject(Sv),kt=Ys}catch{}}return Zt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Nv,Zt.createPortal=function(t,n){var i=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!_c(n))throw Error(o(200));return wv(t,n,null,i)},Zt.createRoot=function(t,n){if(!_c(t))throw Error(o(299));var i=!1,d="",p=mm;return n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(d=n.identifierPrefix),n.onRecoverableError!==void 0&&(p=n.onRecoverableError)),n=vc(t,1,!1,null,null,i,!1,d,p),t[pr]=n.current,Ui(t.nodeType===8?t.parentNode:t),new bc(n)},Zt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var n=t._reactInternals;if(n===void 0)throw typeof t.render=="function"?Error(o(188)):(t=Object.keys(t).join(","),Error(o(268,t)));return t=Fe(n),t=t===null?null:t.stateNode,t},Zt.flushSync=function(t){return bo(t)},Zt.hydrate=function(t,n,i){if(!Ws(n))throw Error(o(200));return Xs(null,t,n,!0,i)},Zt.hydrateRoot=function(t,n,i){if(!_c(t))throw Error(o(405));var d=i!=null&&i.hydratedSources||null,p=!1,v="",C=mm;if(i!=null&&(i.unstable_strictMode===!0&&(p=!0),i.identifierPrefix!==void 0&&(v=i.identifierPrefix),i.onRecoverableError!==void 0&&(C=i.onRecoverableError)),n=fm(n,null,t,1,i??null,p,!1,v,C),t[pr]=n.current,Ui(t),d)for(t=0;t<d.length;t++)i=d[t],p=i._getVersion,p=p(i._source),n.mutableSourceEagerHydrationData==null?n.mutableSourceEagerHydrationData=[i,p]:n.mutableSourceEagerHydrationData.push(i,p);return new Us(n)},Zt.render=function(t,n,i){if(!Ws(n))throw Error(o(200));return Xs(null,t,n,!1,i)},Zt.unmountComponentAtNode=function(t){if(!Ws(t))throw Error(o(40));return t._reactRootContainer?(bo(function(){Xs(null,null,t,!1,function(){t._reactRootContainer=null,t[pr]=null})}),!0):!1},Zt.unstable_batchedUpdates=hc,Zt.unstable_renderSubtreeIntoContainer=function(t,n,i,d){if(!Ws(i))throw Error(o(200));if(t==null||t._reactInternals===void 0)throw Error(o(38));return Xs(t,n,i,!1,d)},Zt.version="18.3.1-next-f1338f8080-20240426",Zt}var Nm;function b0(){if(Nm)return jc.exports;Nm=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(r){console.error(r)}}return e(),jc.exports=Dv(),jc.exports}var Sm;function Lv(){if(Sm)return Ks;Sm=1;var e=b0();return Ks.createRoot=e.createRoot,Ks.hydrateRoot=e.hydrateRoot,Ks}var Iv=Lv();var _0=e=>{throw TypeError(e)},zv=(e,r,o)=>r.has(e)||_0("Cannot "+o),Cc=(e,r,o)=>(zv(e,r,"read from private field"),o?o.call(e):r.get(e)),Av=(e,r,o)=>r.has(e)?_0("Cannot add the same private member more than once"):r instanceof WeakSet?r.add(e):r.set(e,o),jm="popstate";function $v(e={}){function r(a,l){let{pathname:u,search:c,hash:f}=a.location;return ba("",{pathname:u,search:c,hash:f},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function o(a,l){return typeof l=="string"?l:or(l)}return Ov(r,o,null,e)}function $e(e,r){if(e===!1||e===null||typeof e>"u")throw new Error(r)}function pt(e,r){if(!e){typeof console<"u"&&console.warn(r);try{throw new Error(r)}catch{}}}function Fv(){return Math.random().toString(36).substring(2,10)}function km(e,r){return{usr:e.state,key:e.key,idx:r}}function ba(e,r,o=null,a){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof r=="string"?oo(r):r,state:o,key:r&&r.key||a||Fv()}}function or({pathname:e="/",search:r="",hash:o=""}){return r&&r!=="?"&&(e+=r.charAt(0)==="?"?r:"?"+r),o&&o!=="#"&&(e+=o.charAt(0)==="#"?o:"#"+o),e}function oo(e){let r={};if(e){let o=e.indexOf("#");o>=0&&(r.hash=e.substring(o),e=e.substring(0,o));let a=e.indexOf("?");a>=0&&(r.search=e.substring(a),e=e.substring(0,a)),e&&(r.pathname=e)}return r}function Ov(e,r,o,a={}){let{window:l=document.defaultView,v5Compat:u=!1}=a,c=l.history,f="POP",m=null,h=x();h==null&&(h=0,c.replaceState({...c.state,idx:h},""));function x(){return(c.state||{idx:null}).idx}function y(){f="POP";let S=x(),_=S==null?null:S-h;h=S,m&&m({action:f,location:E.location,delta:_})}function g(S,_){f="PUSH";let R=ba(E.location,S,_);h=x()+1;let b=km(R,h),P=E.createHref(R);try{c.pushState(b,"",P)}catch($){if($ instanceof DOMException&&$.name==="DataCloneError")throw $;l.location.assign(P)}u&&m&&m({action:f,location:E.location,delta:1})}function w(S,_){f="REPLACE";let R=ba(E.location,S,_);h=x();let b=km(R,h),P=E.createHref(R);c.replaceState(b,"",P),u&&m&&m({action:f,location:E.location,delta:0})}function j(S){return N0(S)}let E={get action(){return f},get location(){return e(l,c)},listen(S){if(m)throw new Error("A history only accepts one active listener");return l.addEventListener(jm,y),m=S,()=>{l.removeEventListener(jm,y),m=null}},createHref(S){return r(l,S)},createURL:j,encodeLocation(S){let _=j(S);return{pathname:_.pathname,search:_.search,hash:_.hash}},push:g,replace:w,go(S){return c.go(S)}};return E}function N0(e,r=!1){let o="http://localhost";typeof window<"u"&&(o=window.location.origin!=="null"?window.location.origin:window.location.href),$e(o,"No window.location.(origin|href) available to create URL");let a=typeof e=="string"?e:or(e);return a=a.replace(/ $/,"%20"),!r&&a.startsWith("//")&&(a=o+a),new URL(a,o)}var ma,Em=class{constructor(e){if(Av(this,ma,new Map),e)for(let[r,o]of e)this.set(r,o)}get(e){if(Cc(this,ma).has(e))return Cc(this,ma).get(e);if(e.defaultValue!==void 0)return e.defaultValue;throw new Error("No value found for context")}set(e,r){Cc(this,ma).set(e,r)}};ma=new WeakMap;var Hv=new Set(["lazy","caseSensitive","path","id","index","children"]);function Bv(e){return Hv.has(e)}var Vv=new Set(["lazy","caseSensitive","path","id","index","middleware","children"]);function Uv(e){return Vv.has(e)}function Wv(e){return e.index===!0}function _a(e,r,o=[],a={},l=!1){return e.map((u,c)=>{let f=[...o,String(c)],m=typeof u.id=="string"?u.id:f.join("-");if($e(u.index!==!0||!u.children,"Cannot specify children on an index route"),$e(l||!a[m],`Found a route id collision on id "${m}".  Route id's must be globally unique within Data Router usages`),Wv(u)){let h={...u,id:m};return a[m]=Cm(h,r(h)),h}else{let h={...u,id:m,children:void 0};return a[m]=Cm(h,r(h)),u.children&&(h.children=_a(u.children,r,f,a,l)),h}})}function Cm(e,r){return Object.assign(e,{...r,...typeof r.lazy=="object"&&r.lazy!=null?{lazy:{...e.lazy,...r.lazy}}:{}})}function eo(e,r,o="/"){return pa(e,r,o,!1)}function pa(e,r,o,a){let l=typeof r=="string"?oo(r):r,u=Sn(l.pathname||"/",o);if(u==null)return null;let c=S0(e);Yv(c);let f=null;for(let m=0;f==null&&m<c.length;++m){let h=o1(u);f=n1(c[m],h,a)}return f}function Xv(e,r){let{route:o,pathname:a,params:l}=e;return{id:o.id,pathname:a,params:l,data:r[o.id],loaderData:r[o.id],handle:o.handle}}function S0(e,r=[],o=[],a="",l=!1){let u=(c,f,m=l,h)=>{let x={relativePath:h===void 0?c.path||"":h,caseSensitive:c.caseSensitive===!0,childrenIndex:f,route:c};if(x.relativePath.startsWith("/")){if(!x.relativePath.startsWith(a)&&m)return;$e(x.relativePath.startsWith(a),`Absolute route path "${x.relativePath}" nested under path "${a}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),x.relativePath=x.relativePath.slice(a.length)}let y=tr([a,x.relativePath]),g=o.concat(x);c.children&&c.children.length>0&&($e(c.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${y}".`),S0(c.children,r,g,y,m)),!(c.path==null&&!c.index)&&r.push({path:y,score:e1(y,c.index),routesMeta:g})};return e.forEach((c,f)=>{if(c.path===""||!c.path?.includes("?"))u(c,f);else for(let m of j0(c.path))u(c,f,!0,m)}),r}function j0(e){let r=e.split("/");if(r.length===0)return[];let[o,...a]=r,l=o.endsWith("?"),u=o.replace(/\?$/,"");if(a.length===0)return l?[u,""]:[u];let c=j0(a.join("/")),f=[];return f.push(...c.map(m=>m===""?u:[u,m].join("/"))),l&&f.push(...c),f.map(m=>e.startsWith("/")&&m===""?"/":m)}function Yv(e){e.sort((r,o)=>r.score!==o.score?o.score-r.score:t1(r.routesMeta.map(a=>a.childrenIndex),o.routesMeta.map(a=>a.childrenIndex)))}var Kv=/^:[\w-]+$/,Gv=3,Zv=2,Qv=1,qv=10,Jv=-2,Pm=e=>e==="*";function e1(e,r){let o=e.split("/"),a=o.length;return o.some(Pm)&&(a+=Jv),r&&(a+=Zv),o.filter(l=>!Pm(l)).reduce((l,u)=>l+(Kv.test(u)?Gv:u===""?Qv:qv),a)}function t1(e,r){return e.length===r.length&&e.slice(0,-1).every((a,l)=>a===r[l])?e[e.length-1]-r[r.length-1]:0}function n1(e,r,o=!1){let{routesMeta:a}=e,l={},u="/",c=[];for(let f=0;f<a.length;++f){let m=a[f],h=f===a.length-1,x=u==="/"?r:r.slice(u.length)||"/",y=yl({path:m.relativePath,caseSensitive:m.caseSensitive,end:h},x),g=m.route;if(!y&&h&&o&&!a[a.length-1].route.index&&(y=yl({path:m.relativePath,caseSensitive:m.caseSensitive,end:!1},x)),!y)return null;Object.assign(l,y.params),c.push({params:l,pathname:tr([u,y.pathname]),pathnameBase:s1(tr([u,y.pathnameBase])),route:g}),y.pathnameBase!=="/"&&(u=tr([u,y.pathnameBase]))}return c}function yl(e,r){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[o,a]=r1(e.path,e.caseSensitive,e.end),l=r.match(o);if(!l)return null;let u=l[0],c=u.replace(/(.)\/+$/,"$1"),f=l.slice(1);return{params:a.reduce((h,{paramName:x,isOptional:y},g)=>{if(x==="*"){let j=f[g]||"";c=u.slice(0,u.length-j.length).replace(/(.)\/+$/,"$1")}const w=f[g];return y&&!w?h[x]=void 0:h[x]=(w||"").replace(/%2F/g,"/"),h},{}),pathname:u,pathnameBase:c,pattern:e}}function r1(e,r=!1,o=!0){pt(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let a=[],l="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,f,m)=>(a.push({paramName:f,isOptional:m!=null}),m?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(a.push({paramName:"*"}),l+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):o?l+="\\/*$":e!==""&&e!=="/"&&(l+="(?:(?=\\/|$))"),[new RegExp(l,r?void 0:"i"),a]}function o1(e){try{return e.split("/").map(r=>decodeURIComponent(r).replace(/\//g,"%2F")).join("/")}catch(r){return pt(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${r}).`),e}}function Sn(e,r){if(r==="/")return e;if(!e.toLowerCase().startsWith(r.toLowerCase()))return null;let o=r.endsWith("/")?r.length-1:r.length,a=e.charAt(o);return a&&a!=="/"?null:e.slice(o)||"/"}function i1({basename:e,pathname:r}){return r==="/"?e:tr([e,r])}var k0=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,dd=e=>k0.test(e);function a1(e,r="/"){let{pathname:o,search:a="",hash:l=""}=typeof e=="string"?oo(e):e,u;return o?(o=o.replace(/\/\/+/g,"/"),o.startsWith("/")?u=Rm(o.substring(1),"/"):u=Rm(o,r)):u=r,{pathname:u,search:l1(a),hash:u1(l)}}function Rm(e,r){let o=r.replace(/\/+$/,"").split("/");return e.split("/").forEach(l=>{l===".."?o.length>1&&o.pop():l!=="."&&o.push(l)}),o.length>1?o.join("/"):"/"}function Pc(e,r,o,a){return`Cannot include a '${e}' character in a manually specified \`to.${r}\` field [${JSON.stringify(a)}].  Please separate it out to the \`to.${o}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function E0(e){return e.filter((r,o)=>o===0||r.route.path&&r.route.path.length>0)}function fd(e){let r=E0(e);return r.map((o,a)=>a===r.length-1?o.pathname:o.pathnameBase)}function hd(e,r,o,a=!1){let l;typeof e=="string"?l=oo(e):(l={...e},$e(!l.pathname||!l.pathname.includes("?"),Pc("?","pathname","search",l)),$e(!l.pathname||!l.pathname.includes("#"),Pc("#","pathname","hash",l)),$e(!l.search||!l.search.includes("#"),Pc("#","search","hash",l)));let u=e===""||l.pathname==="",c=u?"/":l.pathname,f;if(c==null)f=o;else{let y=r.length-1;if(!a&&c.startsWith("..")){let g=c.split("/");for(;g[0]==="..";)g.shift(),y-=1;l.pathname=g.join("/")}f=y>=0?r[y]:"/"}let m=a1(l,f),h=c&&c!=="/"&&c.endsWith("/"),x=(u||c===".")&&o.endsWith("/");return!m.pathname.endsWith("/")&&(h||x)&&(m.pathname+="/"),m}var tr=e=>e.join("/").replace(/\/\/+/g,"/"),s1=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),l1=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,u1=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e,La=class{constructor(e,r,o,a=!1){this.status=e,this.statusText=r||"",this.internal=a,o instanceof Error?(this.data=o.toString(),this.error=o):this.data=o}};function Na(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}function Ia(e){return e.map(r=>r.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var C0=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function P0(e,r){let o=e;if(typeof o!="string"||!k0.test(o))return{absoluteURL:void 0,isExternal:!1,to:o};let a=o,l=!1;if(C0)try{let u=new URL(window.location.href),c=o.startsWith("//")?new URL(u.protocol+o):new URL(o),f=Sn(c.pathname,r);c.origin===u.origin&&f!=null?o=f+c.search+c.hash:l=!0}catch{pt(!1,`<Link to="${o}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:a,isExternal:l,to:o}}var ro=Symbol("Uninstrumented");function c1(e,r){let o={lazy:[],"lazy.loader":[],"lazy.action":[],"lazy.middleware":[],middleware:[],loader:[],action:[]};e.forEach(l=>l({id:r.id,index:r.index,path:r.path,instrument(u){let c=Object.keys(o);for(let f of c)u[f]&&o[f].push(u[f])}}));let a={};if(typeof r.lazy=="function"&&o.lazy.length>0){let l=pi(o.lazy,r.lazy,()=>{});l&&(a.lazy=l)}if(typeof r.lazy=="object"){let l=r.lazy;["middleware","loader","action"].forEach(u=>{let c=l[u],f=o[`lazy.${u}`];if(typeof c=="function"&&f.length>0){let m=pi(f,c,()=>{});m&&(a.lazy=Object.assign(a.lazy||{},{[u]:m}))}})}return["loader","action"].forEach(l=>{let u=r[l];if(typeof u=="function"&&o[l].length>0){let c=u[ro]??u,f=pi(o[l],c,(...m)=>Mm(m[0]));f&&(l==="loader"&&c.hydrate===!0&&(f.hydrate=!0),f[ro]=c,a[l]=f)}}),r.middleware&&r.middleware.length>0&&o.middleware.length>0&&(a.middleware=r.middleware.map(l=>{let u=l[ro]??l,c=pi(o.middleware,u,(...f)=>Mm(f[0]));return c?(c[ro]=u,c):l})),a}function d1(e,r){let o={navigate:[],fetch:[]};if(r.forEach(a=>a({instrument(l){let u=Object.keys(l);for(let c of u)l[c]&&o[c].push(l[c])}})),o.navigate.length>0){let a=e.navigate[ro]??e.navigate,l=pi(o.navigate,a,(...u)=>{let[c,f]=u;return{to:typeof c=="number"||typeof c=="string"?c:c?or(c):".",...Tm(e,f??{})}});l&&(l[ro]=a,e.navigate=l)}if(o.fetch.length>0){let a=e.fetch[ro]??e.fetch,l=pi(o.fetch,a,(...u)=>{let[c,,f,m]=u;return{href:f??".",fetcherKey:c,...Tm(e,m??{})}});l&&(l[ro]=a,e.fetch=l)}return e}function pi(e,r,o){return e.length===0?null:async(...a)=>{let l=await R0(e,o(...a),()=>r(...a),e.length-1);if(l.type==="error")throw l.value;return l.value}}async function R0(e,r,o,a){let l=e[a],u;if(l){let c,f=async()=>(c?console.error("You cannot call instrumented handlers more than once"):c=R0(e,r,o,a-1),u=await c,$e(u,"Expected a result"),u.type==="error"&&u.value instanceof Error?{status:"error",error:u.value}:{status:"success",error:void 0});try{await l(f,r)}catch(m){console.error("An instrumentation function threw an error:",m)}c||await f(),await c}else try{u={type:"success",value:await o()}}catch(c){u={type:"error",value:c}}return u||{type:"error",value:new Error("No result assigned in instrumentation chain.")}}function Mm(e){let{request:r,context:o,params:a,unstable_pattern:l}=e;return{request:f1(r),params:{...a},unstable_pattern:l,context:h1(o)}}function Tm(e,r){return{currentUrl:or(e.state.location),..."formMethod"in r?{formMethod:r.formMethod}:{},..."formEncType"in r?{formEncType:r.formEncType}:{},..."formData"in r?{formData:r.formData}:{},..."body"in r?{body:r.body}:{}}}function f1(e){return{method:e.method,url:e.url,headers:{get:(...r)=>e.headers.get(...r)}}}function h1(e){if(p1(e)){let r={...e};return Object.freeze(r),r}else return{get:r=>e.get(r)}}var m1=Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function p1(e){if(e===null||typeof e!="object")return!1;const r=Object.getPrototypeOf(e);return r===Object.prototype||r===null||Object.getOwnPropertyNames(r).sort().join("\0")===m1}var M0=["POST","PUT","PATCH","DELETE"],g1=new Set(M0),x1=["GET",...M0],y1=new Set(x1),T0=new Set([301,302,303,307,308]),v1=new Set([307,308]),Rc={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},w1={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},ua={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},b1=e=>({hasErrorBoundary:!!e.hasErrorBoundary}),D0="remix-router-transitions",L0=Symbol("ResetLoaderData");function _1(e){const r=e.window?e.window:typeof window<"u"?window:void 0,o=typeof r<"u"&&typeof r.document<"u"&&typeof r.document.createElement<"u";$e(e.routes.length>0,"You must provide a non-empty routes array to createRouter");let a=e.hydrationRouteProperties||[],l=e.mapRouteProperties||b1,u=l;if(e.unstable_instrumentations){let W=e.unstable_instrumentations;u=q=>({...l(q),...c1(W.map(te=>te.route).filter(Boolean),q)})}let c={},f=_a(e.routes,u,void 0,c),m,h=e.basename||"/";h.startsWith("/")||(h=`/${h}`);let x=e.dataStrategy||E1,y={...e.future},g=null,w=new Set,j=null,E=null,S=null,_=e.hydrationData!=null,R=eo(f,e.history.location,h),b=!1,P=null,$;if(R==null&&!e.patchRoutesOnNavigation){let W=Nn(404,{pathname:e.history.location.pathname}),{matches:q,route:te}=Gs(f);$=!0,R=q,P={[te.id]:W}}else if(R&&!e.hydrationData&&cr(R,f,e.history.location.pathname).active&&(R=null),R)if(R.some(W=>W.route.lazy))$=!1;else if(!R.some(W=>md(W.route)))$=!0;else{let W=e.hydrationData?e.hydrationData.loaderData:null,q=e.hydrationData?e.hydrationData.errors:null;if(q){let te=R.findIndex(se=>q[se.route.id]!==void 0);$=R.slice(0,te+1).every(se=>!Kc(se.route,W,q))}else $=R.every(te=>!Kc(te.route,W,q))}else{$=!1,R=[];let W=cr(null,f,e.history.location.pathname);W.active&&W.matches&&(b=!0,R=W.matches)}let D,M={historyAction:e.history.action,location:e.history.location,matches:R,initialized:$,navigation:Rc,restoreScrollPosition:e.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:e.hydrationData&&e.hydrationData.loaderData||{},actionData:e.hydrationData&&e.hydrationData.actionData||null,errors:e.hydrationData&&e.hydrationData.errors||P,fetchers:new Map,blockers:new Map},H="POP",Y=null,B=!1,I,F=!1,L=new Map,k=null,A=!1,X=!1,Q=new Set,O=new Map,K=0,z=-1,T=new Map,U=new Set,re=new Map,oe=new Map,ue=new Set,pe=new Map,he,ie=null;function me(){if(g=e.history.listen(({action:W,location:q,delta:te})=>{if(he){he(),he=void 0;return}pt(pe.size===0||te!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let se=Pn({currentLocation:M.location,nextLocation:q,historyAction:W});if(se&&te!=null){let de=new Promise(Ne=>{he=Ne});e.history.go(te*-1),Wn(se,{state:"blocked",location:q,proceed(){Wn(se,{state:"proceeding",proceed:void 0,reset:void 0,location:q}),de.then(()=>e.history.go(te))},reset(){let Ne=new Map(M.blockers);Ne.set(se,ua),xe({blockers:Ne})}}),Y?.resolve(),Y=null;return}return He(W,q)}),o){W1(r,L);let W=()=>X1(r,L);r.addEventListener("pagehide",W),k=()=>r.removeEventListener("pagehide",W)}return M.initialized||He("POP",M.location,{initialHydration:!0}),D}function Le(){g&&g(),k&&k(),w.clear(),I&&I.abort(),M.fetchers.forEach((W,q)=>io(q)),M.blockers.forEach((W,q)=>Mr(q))}function ze(W){return w.add(W),()=>w.delete(W)}function xe(W,q={}){W.matches&&(W.matches=W.matches.map(de=>{let Ne=c[de.route.id],ye=de.route;return ye.element!==Ne.element||ye.errorElement!==Ne.errorElement||ye.hydrateFallbackElement!==Ne.hydrateFallbackElement?{...de,route:Ne}:de})),M={...M,...W};let te=[],se=[];M.fetchers.forEach((de,Ne)=>{de.state==="idle"&&(ue.has(Ne)?te.push(Ne):se.push(Ne))}),ue.forEach(de=>{!M.fetchers.has(de)&&!O.has(de)&&te.push(de)}),[...w].forEach(de=>de(M,{deletedFetchers:te,newErrors:W.errors??null,viewTransitionOpts:q.viewTransitionOpts,flushSync:q.flushSync===!0})),te.forEach(de=>io(de)),se.forEach(de=>M.fetchers.delete(de))}function Pe(W,q,{flushSync:te}={}){let se=M.actionData!=null&&M.navigation.formMethod!=null&&Lt(M.navigation.formMethod)&&M.navigation.state==="loading"&&W.state?._isRedirect!==!0,de;q.actionData?Object.keys(q.actionData).length>0?de=q.actionData:de=null:se?de=M.actionData:de=null;let Ne=q.loaderData?Bm(M.loaderData,q.loaderData,q.matches||[],q.errors):M.loaderData,ye=M.blockers;ye.size>0&&(ye=new Map(ye),ye.forEach((Re,je)=>ye.set(je,ua)));let _e=A?!1:lo(W,q.matches||M.matches),ke=B===!0||M.navigation.formMethod!=null&&Lt(M.navigation.formMethod)&&W.state?._isRedirect!==!0;m&&(f=m,m=void 0),A||H==="POP"||(H==="PUSH"?e.history.push(W,W.state):H==="REPLACE"&&e.history.replace(W,W.state));let we;if(H==="POP"){let Re=L.get(M.location.pathname);Re&&Re.has(W.pathname)?we={currentLocation:M.location,nextLocation:W}:L.has(W.pathname)&&(we={currentLocation:W,nextLocation:M.location})}else if(F){let Re=L.get(M.location.pathname);Re?Re.add(W.pathname):(Re=new Set([W.pathname]),L.set(M.location.pathname,Re)),we={currentLocation:M.location,nextLocation:W}}xe({...q,actionData:de,loaderData:Ne,historyAction:H,location:W,initialized:!0,navigation:Rc,revalidation:"idle",restoreScrollPosition:_e,preventScrollReset:ke,blockers:ye},{viewTransitionOpts:we,flushSync:te===!0}),H="POP",B=!1,F=!1,A=!1,X=!1,Y?.resolve(),Y=null,ie?.resolve(),ie=null}async function Ve(W,q){if(Y?.resolve(),Y=null,typeof W=="number"){Y||(Y=Xm());let Fe=Y.promise;return e.history.go(W),Fe}let te=Yc(M.location,M.matches,h,W,q?.fromRouteId,q?.relative),{path:se,submission:de,error:Ne}=Dm(!1,te,q),ye=M.location,_e=ba(M.location,se,q&&q.state);_e={..._e,...e.history.encodeLocation(_e)};let ke=q&&q.replace!=null?q.replace:void 0,we="PUSH";ke===!0?we="REPLACE":ke===!1||de!=null&&Lt(de.formMethod)&&de.formAction===M.location.pathname+M.location.search&&(we="REPLACE");let Re=q&&"preventScrollReset"in q?q.preventScrollReset===!0:void 0,je=(q&&q.flushSync)===!0,Be=Pn({currentLocation:ye,nextLocation:_e,historyAction:we});if(Be){Wn(Be,{state:"blocked",location:_e,proceed(){Wn(Be,{state:"proceeding",proceed:void 0,reset:void 0,location:_e}),Ve(W,q)},reset(){let Fe=new Map(M.blockers);Fe.set(Be,ua),xe({blockers:Fe})}});return}await He(we,_e,{submission:de,pendingError:Ne,preventScrollReset:Re,replace:q&&q.replace,enableViewTransition:q&&q.viewTransition,flushSync:je,callSiteDefaultShouldRevalidate:q&&q.unstable_defaultShouldRevalidate})}function Qe(){ie||(ie=Xm()),nn(),xe({revalidation:"loading"});let W=ie.promise;return M.navigation.state==="submitting"?W:M.navigation.state==="idle"?(He(M.historyAction,M.location,{startUninterruptedRevalidation:!0}),W):(He(H||M.historyAction,M.navigation.location,{overrideNavigation:M.navigation,enableViewTransition:F===!0}),W)}async function He(W,q,te){I&&I.abort(),I=null,H=W,A=(te&&te.startUninterruptedRevalidation)===!0,Ho(M.location,M.matches),B=(te&&te.preventScrollReset)===!0,F=(te&&te.enableViewTransition)===!0;let se=m||f,de=te&&te.overrideNavigation,Ne=te?.initialHydration&&M.matches&&M.matches.length>0&&!b?M.matches:eo(se,q,h),ye=(te&&te.flushSync)===!0;if(Ne&&M.initialized&&!X&&I1(M.location,q)&&!(te&&te.submission&&Lt(te.submission.formMethod))){Pe(q,{matches:Ne},{flushSync:ye});return}let _e=cr(Ne,se,q.pathname);if(_e.active&&_e.matches&&(Ne=_e.matches),!Ne){let{error:at,notFoundMatches:ht,route:Ye}=mn(q.pathname);Pe(q,{matches:ht,loaderData:{},errors:{[Ye.id]:at}},{flushSync:ye});return}I=new AbortController;let ke=mi(e.history,q,I.signal,te&&te.submission),we=e.getContext?await e.getContext():new Em,Re;if(te&&te.pendingError)Re=[to(Ne).route.id,{type:"error",error:te.pendingError}];else if(te&&te.submission&&Lt(te.submission.formMethod)){let at=await ut(ke,q,te.submission,Ne,we,_e.active,te&&te.initialHydration===!0,{replace:te.replace,flushSync:ye});if(at.shortCircuited)return;if(at.pendingActionResult){let[ht,Ye]=at.pendingActionResult;if(ln(Ye)&&Na(Ye.error)&&Ye.error.status===404){I=null,Pe(q,{matches:at.matches,loaderData:{},errors:{[ht]:Ye.error}});return}}Ne=at.matches||Ne,Re=at.pendingActionResult,de=Mc(q,te.submission),ye=!1,_e.active=!1,ke=mi(e.history,ke.url,ke.signal)}let{shortCircuited:je,matches:Be,loaderData:Fe,errors:ct}=await en(ke,q,Ne,we,_e.active,de,te&&te.submission,te&&te.fetcherSubmission,te&&te.replace,te&&te.initialHydration===!0,ye,Re,te&&te.callSiteDefaultShouldRevalidate);je||(I=null,Pe(q,{matches:Be||Ne,...Vm(Re),loaderData:Fe,errors:ct}))}async function ut(W,q,te,se,de,Ne,ye,_e={}){nn();let ke=V1(q,te);if(xe({navigation:ke},{flushSync:_e.flushSync===!0}),Ne){let je=await Xn(se,q.pathname,W.signal);if(je.type==="aborted")return{shortCircuited:!0};if(je.type==="error"){if(je.partialMatches.length===0){let{matches:Fe,route:ct}=Gs(f);return{matches:Fe,pendingActionResult:[ct.id,{type:"error",error:je.error}]}}let Be=to(je.partialMatches).route.id;return{matches:je.partialMatches,pendingActionResult:[Be,{type:"error",error:je.error}]}}else if(je.matches)se=je.matches;else{let{notFoundMatches:Be,error:Fe,route:ct}=mn(q.pathname);return{matches:Be,pendingActionResult:[ct.id,{type:"error",error:Fe}]}}}let we,Re=cl(se,q);if(!Re.route.action&&!Re.route.lazy)we={type:"error",error:Nn(405,{method:W.method,pathname:q.pathname,routeId:Re.route.id})};else{let je=yi(u,c,W,se,Re,ye?[]:a,de),Be=await tn(W,je,de,null);if(we=Be[Re.route.id],!we){for(let Fe of se)if(Be[Fe.route.id]){we=Be[Fe.route.id];break}}if(W.signal.aborted)return{shortCircuited:!0}}if(ko(we)){let je;return _e&&_e.replace!=null?je=_e.replace:je=Fm(we.response.headers.get("Location"),new URL(W.url),h,e.history)===M.location.pathname+M.location.search,await Ht(W,we,!0,{submission:te,replace:je}),{shortCircuited:!0}}if(ln(we)){let je=to(se,Re.route.id);return(_e&&_e.replace)!==!0&&(H="PUSH"),{matches:se,pendingActionResult:[je.route.id,we,Re.route.id]}}return{matches:se,pendingActionResult:[Re.route.id,we]}}async function en(W,q,te,se,de,Ne,ye,_e,ke,we,Re,je,Be){let Fe=Ne||Mc(q,ye),ct=ye||_e||Wm(Fe),at=!A&&!we;if(de){if(at){let Ze=Pt(je);xe({navigation:Fe,...Ze!==void 0?{actionData:Ze}:{}},{flushSync:Re})}let Oe=await Xn(te,q.pathname,W.signal);if(Oe.type==="aborted")return{shortCircuited:!0};if(Oe.type==="error"){if(Oe.partialMatches.length===0){let{matches:Kn,route:Rn}=Gs(f);return{matches:Kn,loaderData:{},errors:{[Rn.id]:Oe.error}}}let Ze=to(Oe.partialMatches).route.id;return{matches:Oe.partialMatches,loaderData:{},errors:{[Ze]:Oe.error}}}else if(Oe.matches)te=Oe.matches;else{let{error:Ze,notFoundMatches:Kn,route:Rn}=mn(q.pathname);return{matches:Kn,loaderData:{},errors:{[Rn.id]:Ze}}}}let ht=m||f,{dsMatches:Ye,revalidatingFetchers:jt}=Lm(W,se,u,c,e.history,M,te,ct,q,we?[]:a,we===!0,X,Q,ue,re,U,ht,h,e.patchRoutesOnNavigation!=null,je,Be);if(z=++K,!e.dataStrategy&&!Ye.some(Oe=>Oe.shouldLoad)&&!Ye.some(Oe=>Oe.route.middleware&&Oe.route.middleware.length>0)&&jt.length===0){let Oe=Pr();return Pe(q,{matches:te,loaderData:{},errors:je&&ln(je[1])?{[je[0]]:je[1].error}:null,...Vm(je),...Oe?{fetchers:new Map(M.fetchers)}:{}},{flushSync:Re}),{shortCircuited:!0}}if(at){let Oe={};if(!de){Oe.navigation=Fe;let Ze=Pt(je);Ze!==void 0&&(Oe.actionData=Ze)}jt.length>0&&(Oe.fetchers=zt(jt)),xe(Oe,{flushSync:Re})}jt.forEach(Oe=>{Vt(Oe.key),Oe.controller&&O.set(Oe.key,Oe.controller)});let Ge=()=>jt.forEach(Oe=>Vt(Oe.key));I&&I.signal.addEventListener("abort",Ge);let{loaderResults:fr,fetcherResults:Ut}=await fn(Ye,jt,W,se);if(W.signal.aborted)return{shortCircuited:!0};I&&I.signal.removeEventListener("abort",Ge),jt.forEach(Oe=>O.delete(Oe.key));let At=Zs(fr);if(At)return await Ht(W,At.result,!0,{replace:ke}),{shortCircuited:!0};if(At=Zs(Ut),At)return U.add(At.key),await Ht(W,At.result,!0,{replace:ke}),{shortCircuited:!0};let{loaderData:Yn,errors:hr}=Hm(M,te,fr,je,jt,Ut);we&&M.errors&&(hr={...M.errors,...hr});let pn=Pr(),gn=Rr(z),kt=pn||gn||jt.length>0;return{matches:te,loaderData:Yn,errors:hr,...kt?{fetchers:new Map(M.fetchers)}:{}}}function Pt(W){if(W&&!ln(W[1]))return{[W[0]]:W[1].data};if(M.actionData)return Object.keys(M.actionData).length===0?null:M.actionData}function zt(W){return W.forEach(q=>{let te=M.fetchers.get(q.key),se=ca(void 0,te?te.data:void 0);M.fetchers.set(q.key,se)}),new Map(M.fetchers)}async function Ot(W,q,te,se){Vt(W);let de=(se&&se.flushSync)===!0,Ne=m||f,ye=Yc(M.location,M.matches,h,te,q,se?.relative),_e=eo(Ne,ye,h),ke=cr(_e,Ne,ye);if(ke.active&&ke.matches&&(_e=ke.matches),!_e){Bt(W,q,Nn(404,{pathname:ye}),{flushSync:de});return}let{path:we,submission:Re,error:je}=Dm(!0,ye,se);if(je){Bt(W,q,je,{flushSync:de});return}let Be=e.getContext?await e.getContext():new Em,Fe=(se&&se.preventScrollReset)===!0;if(Re&&Lt(Re.formMethod)){await Cn(W,q,we,_e,Be,ke.active,de,Fe,Re,se&&se.unstable_defaultShouldRevalidate);return}re.set(W,{routeId:q,path:we}),await Un(W,q,we,_e,Be,ke.active,de,Fe,Re)}async function Cn(W,q,te,se,de,Ne,ye,_e,ke,we){nn(),re.delete(W);let Re=M.fetchers.get(W);St(W,U1(ke,Re),{flushSync:ye});let je=new AbortController,Be=mi(e.history,te,je.signal,ke);if(Ne){let Je=await Xn(se,new URL(Be.url).pathname,Be.signal,W);if(Je.type==="aborted")return;if(Je.type==="error"){Bt(W,q,Je.error,{flushSync:ye});return}else if(Je.matches)se=Je.matches;else{Bt(W,q,Nn(404,{pathname:te}),{flushSync:ye});return}}let Fe=cl(se,te);if(!Fe.route.action&&!Fe.route.lazy){let Je=Nn(405,{method:ke.formMethod,pathname:te,routeId:q});Bt(W,q,Je,{flushSync:ye});return}O.set(W,je);let ct=K,at=yi(u,c,Be,se,Fe,a,de),ht=await tn(Be,at,de,W),Ye=ht[Fe.route.id];if(!Ye){for(let Je of at)if(ht[Je.route.id]){Ye=ht[Je.route.id];break}}if(Be.signal.aborted){O.get(W)===je&&O.delete(W);return}if(ue.has(W)){if(ko(Ye)||ln(Ye)){St(W,Sr(void 0));return}}else{if(ko(Ye))if(O.delete(W),z>ct){St(W,Sr(void 0));return}else return U.add(W),St(W,ca(ke)),Ht(Be,Ye,!1,{fetcherSubmission:ke,preventScrollReset:_e});if(ln(Ye)){Bt(W,q,Ye.error);return}}let jt=M.navigation.location||M.location,Ge=mi(e.history,jt,je.signal),fr=m||f,Ut=M.navigation.state!=="idle"?eo(fr,M.navigation.location,h):M.matches;$e(Ut,"Didn't find any matches after fetcher action");let At=++K;T.set(W,At);let Yn=ca(ke,Ye.data);M.fetchers.set(W,Yn);let{dsMatches:hr,revalidatingFetchers:pn}=Lm(Ge,de,u,c,e.history,M,Ut,ke,jt,a,!1,X,Q,ue,re,U,fr,h,e.patchRoutesOnNavigation!=null,[Fe.route.id,Ye],we);pn.filter(Je=>Je.key!==W).forEach(Je=>{let Mn=Je.key,mr=M.fetchers.get(Mn),Gn=ca(void 0,mr?mr.data:void 0);M.fetchers.set(Mn,Gn),Vt(Mn),Je.controller&&O.set(Mn,Je.controller)}),xe({fetchers:new Map(M.fetchers)});let gn=()=>pn.forEach(Je=>Vt(Je.key));je.signal.addEventListener("abort",gn);let{loaderResults:kt,fetcherResults:Oe}=await fn(hr,pn,Ge,de);if(je.signal.aborted)return;if(je.signal.removeEventListener("abort",gn),T.delete(W),O.delete(W),pn.forEach(Je=>O.delete(Je.key)),M.fetchers.has(W)){let Je=Sr(Ye.data);M.fetchers.set(W,Je)}let Ze=Zs(kt);if(Ze)return Ht(Ge,Ze.result,!1,{preventScrollReset:_e});if(Ze=Zs(Oe),Ze)return U.add(Ze.key),Ht(Ge,Ze.result,!1,{preventScrollReset:_e});let{loaderData:Kn,errors:Rn}=Hm(M,Ut,kt,void 0,pn,Oe);Rr(At),M.navigation.state==="loading"&&At>z?($e(H,"Expected pending action"),I&&I.abort(),Pe(M.navigation.location,{matches:Ut,loaderData:Kn,errors:Rn,fetchers:new Map(M.fetchers)})):(xe({errors:Rn,loaderData:Bm(M.loaderData,Kn,Ut,Rn),fetchers:new Map(M.fetchers)}),X=!1)}async function Un(W,q,te,se,de,Ne,ye,_e,ke){let we=M.fetchers.get(W);St(W,ca(ke,we?we.data:void 0),{flushSync:ye});let Re=new AbortController,je=mi(e.history,te,Re.signal);if(Ne){let Ye=await Xn(se,new URL(je.url).pathname,je.signal,W);if(Ye.type==="aborted")return;if(Ye.type==="error"){Bt(W,q,Ye.error,{flushSync:ye});return}else if(Ye.matches)se=Ye.matches;else{Bt(W,q,Nn(404,{pathname:te}),{flushSync:ye});return}}let Be=cl(se,te);O.set(W,Re);let Fe=K,ct=yi(u,c,je,se,Be,a,de),ht=(await tn(je,ct,de,W))[Be.route.id];if(O.get(W)===Re&&O.delete(W),!je.signal.aborted){if(ue.has(W)){St(W,Sr(void 0));return}if(ko(ht))if(z>Fe){St(W,Sr(void 0));return}else{U.add(W),await Ht(je,ht,!1,{preventScrollReset:_e});return}if(ln(ht)){Bt(W,q,ht.error);return}St(W,Sr(ht.data))}}async function Ht(W,q,te,{submission:se,fetcherSubmission:de,preventScrollReset:Ne,replace:ye}={}){te||(Y?.resolve(),Y=null),q.response.headers.has("X-Remix-Revalidate")&&(X=!0);let _e=q.response.headers.get("Location");$e(_e,"Expected a Location header on the redirect Response"),_e=Fm(_e,new URL(W.url),h,e.history);let ke=ba(M.location,_e,{_isRedirect:!0});if(o){let ct=!1;if(q.response.headers.has("X-Remix-Reload-Document"))ct=!0;else if(dd(_e)){const at=N0(_e,!0);ct=at.origin!==r.location.origin||Sn(at.pathname,h)==null}if(ct){ye?r.location.replace(_e):r.location.assign(_e);return}}I=null;let we=ye===!0||q.response.headers.has("X-Remix-Replace")?"REPLACE":"PUSH",{formMethod:Re,formAction:je,formEncType:Be}=M.navigation;!se&&!de&&Re&&je&&Be&&(se=Wm(M.navigation));let Fe=se||de;if(v1.has(q.response.status)&&Fe&&Lt(Fe.formMethod))await He(we,ke,{submission:{...Fe,formAction:_e},preventScrollReset:Ne||B,enableViewTransition:te?F:void 0});else{let ct=Mc(ke,se);await He(we,ke,{overrideNavigation:ct,fetcherSubmission:de,preventScrollReset:Ne||B,enableViewTransition:te?F:void 0})}}async function tn(W,q,te,se){let de,Ne={};try{de=await P1(x,W,q,se,te,!1)}catch(ye){return q.filter(_e=>_e.shouldLoad).forEach(_e=>{Ne[_e.route.id]={type:"error",error:ye}}),Ne}if(W.signal.aborted)return Ne;if(!Lt(W.method))for(let ye of q){if(de[ye.route.id]?.type==="error")break;!de.hasOwnProperty(ye.route.id)&&!M.loaderData.hasOwnProperty(ye.route.id)&&(!M.errors||!M.errors.hasOwnProperty(ye.route.id))&&ye.shouldCallHandler()&&(de[ye.route.id]={type:"error",result:new Error(`No result returned from dataStrategy for route ${ye.route.id}`)})}for(let[ye,_e]of Object.entries(de))if(F1(_e)){let ke=_e.result;Ne[ye]={type:"redirect",response:D1(ke,W,ye,q,h)}}else Ne[ye]=await T1(_e);return Ne}async function fn(W,q,te,se){let de=tn(te,W,se,null),Ne=Promise.all(q.map(async ke=>{if(ke.matches&&ke.match&&ke.request&&ke.controller){let Re=(await tn(ke.request,ke.matches,se,ke.key))[ke.match.route.id];return{[ke.key]:Re}}else return Promise.resolve({[ke.key]:{type:"error",error:Nn(404,{pathname:ke.path})}})})),ye=await de,_e=(await Ne).reduce((ke,we)=>Object.assign(ke,we),{});return{loaderResults:ye,fetcherResults:_e}}function nn(){X=!0,re.forEach((W,q)=>{O.has(q)&&Q.add(q),Vt(q)})}function St(W,q,te={}){M.fetchers.set(W,q),xe({fetchers:new Map(M.fetchers)},{flushSync:(te&&te.flushSync)===!0})}function Bt(W,q,te,se={}){let de=to(M.matches,q);io(W),xe({errors:{[de.route.id]:te},fetchers:new Map(M.fetchers)},{flushSync:(se&&se.flushSync)===!0})}function hn(W){return oe.set(W,(oe.get(W)||0)+1),ue.has(W)&&ue.delete(W),M.fetchers.get(W)||w1}function ur(W,q){Vt(W,q?.reason),St(W,Sr(null))}function io(W){let q=M.fetchers.get(W);O.has(W)&&!(q&&q.state==="loading"&&T.has(W))&&Vt(W),re.delete(W),T.delete(W),U.delete(W),ue.delete(W),Q.delete(W),M.fetchers.delete(W)}function $o(W){let q=(oe.get(W)||0)-1;q<=0?(oe.delete(W),ue.add(W)):oe.set(W,q),xe({fetchers:new Map(M.fetchers)})}function Vt(W,q){let te=O.get(W);te&&(te.abort(q),O.delete(W))}function Fo(W){for(let q of W){let te=hn(q),se=Sr(te.data);M.fetchers.set(q,se)}}function Pr(){let W=[],q=!1;for(let te of U){let se=M.fetchers.get(te);$e(se,`Expected fetcher: ${te}`),se.state==="loading"&&(U.delete(te),W.push(te),q=!0)}return Fo(W),q}function Rr(W){let q=[];for(let[te,se]of T)if(se<W){let de=M.fetchers.get(te);$e(de,`Expected fetcher: ${te}`),de.state==="loading"&&(Vt(te),T.delete(te),q.push(te))}return Fo(q),q.length>0}function ao(W,q){let te=M.blockers.get(W)||ua;return pe.get(W)!==q&&pe.set(W,q),te}function Mr(W){M.blockers.delete(W),pe.delete(W)}function Wn(W,q){let te=M.blockers.get(W)||ua;$e(te.state==="unblocked"&&q.state==="blocked"||te.state==="blocked"&&q.state==="blocked"||te.state==="blocked"&&q.state==="proceeding"||te.state==="blocked"&&q.state==="unblocked"||te.state==="proceeding"&&q.state==="unblocked",`Invalid blocker state transition: ${te.state} -> ${q.state}`);let se=new Map(M.blockers);se.set(W,q),xe({blockers:se})}function Pn({currentLocation:W,nextLocation:q,historyAction:te}){if(pe.size===0)return;pe.size>1&&pt(!1,"A router only supports one blocker at a time");let se=Array.from(pe.entries()),[de,Ne]=se[se.length-1],ye=M.blockers.get(de);if(!(ye&&ye.state==="proceeding")&&Ne({currentLocation:W,nextLocation:q,historyAction:te}))return de}function mn(W){let q=Nn(404,{pathname:W}),te=m||f,{matches:se,route:de}=Gs(te);return{notFoundMatches:se,route:de,error:q}}function Oo(W,q,te){if(j=W,S=q,E=te||null,!_&&M.navigation===Rc){_=!0;let se=lo(M.location,M.matches);se!=null&&xe({restoreScrollPosition:se})}return()=>{j=null,S=null,E=null}}function so(W,q){return E&&E(W,q.map(se=>Xv(se,M.loaderData)))||W.key}function Ho(W,q){if(j&&S){let te=so(W,q);j[te]=S()}}function lo(W,q){if(j){let te=so(W,q),se=j[te];if(typeof se=="number")return se}return null}function cr(W,q,te){if(e.patchRoutesOnNavigation)if(W){if(Object.keys(W[0].params).length>0)return{active:!0,matches:pa(q,te,h,!0)}}else return{active:!0,matches:pa(q,te,h,!0)||[]};return{active:!1,matches:null}}async function Xn(W,q,te,se){if(!e.patchRoutesOnNavigation)return{type:"success",matches:W};let de=W;for(;;){let Ne=m==null,ye=m||f,_e=c;try{await e.patchRoutesOnNavigation({signal:te,path:q,matches:de,fetcherKey:se,patch:(Re,je)=>{te.aborted||Im(Re,je,ye,_e,u,!1)}})}catch(Re){return{type:"error",error:Re,partialMatches:de}}finally{Ne&&!te.aborted&&(f=[...f])}if(te.aborted)return{type:"aborted"};let ke=eo(ye,q,h),we=null;if(ke){if(Object.keys(ke[0].params).length===0)return{type:"success",matches:ke};if(we=pa(ye,q,h,!0),!(we&&de.length<we.length&&uo(de,we.slice(0,de.length))))return{type:"success",matches:ke}}if(we||(we=pa(ye,q,h,!0)),!we||uo(de,we))return{type:"success",matches:null};de=we}}function uo(W,q){return W.length===q.length&&W.every((te,se)=>te.route.id===q[se].route.id)}function dr(W){c={},m=_a(W,u,void 0,c)}function co(W,q,te=!1){let se=m==null;Im(W,q,m||f,c,u,te),se&&(f=[...f],xe({}))}return D={get basename(){return h},get future(){return y},get state(){return M},get routes(){return f},get window(){return r},initialize:me,subscribe:ze,enableScrollRestoration:Oo,navigate:Ve,fetch:Ot,revalidate:Qe,createHref:W=>e.history.createHref(W),encodeLocation:W=>e.history.encodeLocation(W),getFetcher:hn,resetFetcher:ur,deleteFetcher:$o,dispose:Le,getBlocker:ao,deleteBlocker:Mr,patchRoutes:co,_internalFetchControllers:O,_internalSetRoutes:dr,_internalSetStateDoNotUseOrYouWillBreakYourApp(W){xe(W)}},e.unstable_instrumentations&&(D=d1(D,e.unstable_instrumentations.map(W=>W.router).filter(Boolean))),D}function N1(e){return e!=null&&("formData"in e&&e.formData!=null||"body"in e&&e.body!==void 0)}function Yc(e,r,o,a,l,u){let c,f;if(l){c=[];for(let h of r)if(c.push(h),h.route.id===l){f=h;break}}else c=r,f=r[r.length-1];let m=hd(a||".",fd(c),Sn(e.pathname,o)||e.pathname,u==="path");if(a==null&&(m.search=e.search,m.hash=e.hash),(a==null||a===""||a===".")&&f){let h=gd(m.search);if(f.route.index&&!h)m.search=m.search?m.search.replace(/^\?/,"?index&"):"?index";else if(!f.route.index&&h){let x=new URLSearchParams(m.search),y=x.getAll("index");x.delete("index"),y.filter(w=>w).forEach(w=>x.append("index",w));let g=x.toString();m.search=g?`?${g}`:""}}return o!=="/"&&(m.pathname=i1({basename:o,pathname:m.pathname})),or(m)}function Dm(e,r,o){if(!o||!N1(o))return{path:r};if(o.formMethod&&!B1(o.formMethod))return{path:r,error:Nn(405,{method:o.formMethod})};let a=()=>({path:r,error:Nn(400,{type:"invalid-body"})}),u=(o.formMethod||"get").toUpperCase(),c=O0(r);if(o.body!==void 0){if(o.formEncType==="text/plain"){if(!Lt(u))return a();let y=typeof o.body=="string"?o.body:o.body instanceof FormData||o.body instanceof URLSearchParams?Array.from(o.body.entries()).reduce((g,[w,j])=>`${g}${w}=${j}
`,""):String(o.body);return{path:r,submission:{formMethod:u,formAction:c,formEncType:o.formEncType,formData:void 0,json:void 0,text:y}}}else if(o.formEncType==="application/json"){if(!Lt(u))return a();try{let y=typeof o.body=="string"?JSON.parse(o.body):o.body;return{path:r,submission:{formMethod:u,formAction:c,formEncType:o.formEncType,formData:void 0,json:y,text:void 0}}}catch{return a()}}}$e(typeof FormData=="function","FormData is not available in this environment");let f,m;if(o.formData)f=Zc(o.formData),m=o.formData;else if(o.body instanceof FormData)f=Zc(o.body),m=o.body;else if(o.body instanceof URLSearchParams)f=o.body,m=Om(f);else if(o.body==null)f=new URLSearchParams,m=new FormData;else try{f=new URLSearchParams(o.body),m=Om(f)}catch{return a()}let h={formMethod:u,formAction:c,formEncType:o&&o.formEncType||"application/x-www-form-urlencoded",formData:m,json:void 0,text:void 0};if(Lt(h.formMethod))return{path:r,submission:h};let x=oo(r);return e&&x.search&&gd(x.search)&&f.append("index",""),x.search=`?${f}`,{path:or(x),submission:h}}function Lm(e,r,o,a,l,u,c,f,m,h,x,y,g,w,j,E,S,_,R,b,P){let $=b?ln(b[1])?b[1].error:b[1].data:void 0,D=l.createURL(u.location),M=l.createURL(m),H;if(x&&u.errors){let A=Object.keys(u.errors)[0];H=c.findIndex(X=>X.route.id===A)}else if(b&&ln(b[1])){let A=b[0];H=c.findIndex(X=>X.route.id===A)-1}let Y=b?b[1].statusCode:void 0,B=Y&&Y>=400,I={currentUrl:D,currentParams:u.matches[0]?.params||{},nextUrl:M,nextParams:c[0].params,...f,actionResult:$,actionStatus:Y},F=Ia(c),L=c.map((A,X)=>{let{route:Q}=A,O=null;if(H!=null&&X>H?O=!1:Q.lazy?O=!0:md(Q)?x?O=Kc(Q,u.loaderData,u.errors):S1(u.loaderData,u.matches[X],A)&&(O=!0):O=!1,O!==null)return Gc(o,a,e,F,A,h,r,O);let K=!1;typeof P=="boolean"?K=P:B?K=!1:(y||D.pathname+D.search===M.pathname+M.search||D.search!==M.search||j1(u.matches[X],A))&&(K=!0);let z={...I,defaultShouldRevalidate:K},T=ya(A,z);return Gc(o,a,e,F,A,h,r,T,z,P)}),k=[];return j.forEach((A,X)=>{if(x||!c.some(oe=>oe.route.id===A.routeId)||w.has(X))return;let Q=u.fetchers.get(X),O=Q&&Q.state!=="idle"&&Q.data===void 0,K=eo(S,A.path,_);if(!K){if(R&&O)return;k.push({key:X,routeId:A.routeId,path:A.path,matches:null,match:null,request:null,controller:null});return}if(E.has(X))return;let z=cl(K,A.path),T=new AbortController,U=mi(l,A.path,T.signal),re=null;if(g.has(X))g.delete(X),re=yi(o,a,U,K,z,h,r);else if(O)y&&(re=yi(o,a,U,K,z,h,r));else{let oe;typeof P=="boolean"?oe=P:B?oe=!1:oe=y;let ue={...I,defaultShouldRevalidate:oe};ya(z,ue)&&(re=yi(o,a,U,K,z,h,r,ue))}re&&k.push({key:X,routeId:A.routeId,path:A.path,matches:re,match:z,request:U,controller:T})}),{dsMatches:L,revalidatingFetchers:k}}function md(e){return e.loader!=null||e.middleware!=null&&e.middleware.length>0}function Kc(e,r,o){if(e.lazy)return!0;if(!md(e))return!1;let a=r!=null&&e.id in r,l=o!=null&&o[e.id]!==void 0;return!a&&l?!1:typeof e.loader=="function"&&e.loader.hydrate===!0?!0:!a&&!l}function S1(e,r,o){let a=!r||o.route.id!==r.route.id,l=!e.hasOwnProperty(o.route.id);return a||l}function j1(e,r){let o=e.route.path;return e.pathname!==r.pathname||o!=null&&o.endsWith("*")&&e.params["*"]!==r.params["*"]}function ya(e,r){if(e.route.shouldRevalidate){let o=e.route.shouldRevalidate(r);if(typeof o=="boolean")return o}return r.defaultShouldRevalidate}function Im(e,r,o,a,l,u){let c;if(e){let h=a[e];$e(h,`No route found to patch children into: routeId = ${e}`),h.children||(h.children=[]),c=h.children}else c=o;let f=[],m=[];if(r.forEach(h=>{let x=c.find(y=>I0(h,y));x?m.push({existingRoute:x,newRoute:h}):f.push(h)}),f.length>0){let h=_a(f,l,[e||"_","patch",String(c?.length||"0")],a);c.push(...h)}if(u&&m.length>0)for(let h=0;h<m.length;h++){let{existingRoute:x,newRoute:y}=m[h],g=x,[w]=_a([y],l,[],{},!0);Object.assign(g,{element:w.element?w.element:g.element,errorElement:w.errorElement?w.errorElement:g.errorElement,hydrateFallbackElement:w.hydrateFallbackElement?w.hydrateFallbackElement:g.hydrateFallbackElement})}}function I0(e,r){return"id"in e&&"id"in r&&e.id===r.id?!0:e.index===r.index&&e.path===r.path&&e.caseSensitive===r.caseSensitive?(!e.children||e.children.length===0)&&(!r.children||r.children.length===0)?!0:e.children.every((o,a)=>r.children?.some(l=>I0(o,l))):!1}var zm=new WeakMap,z0=({key:e,route:r,manifest:o,mapRouteProperties:a})=>{let l=o[r.id];if($e(l,"No route found in manifest"),!l.lazy||typeof l.lazy!="object")return;let u=l.lazy[e];if(!u)return;let c=zm.get(l);c||(c={},zm.set(l,c));let f=c[e];if(f)return f;let m=(async()=>{let h=Bv(e),y=l[e]!==void 0&&e!=="hasErrorBoundary";if(h)pt(!h,"Route property "+e+" is not a supported lazy route property. This property will be ignored."),c[e]=Promise.resolve();else if(y)pt(!1,`Route "${l.id}" has a static property "${e}" defined. The lazy property will be ignored.`);else{let g=await u();g!=null&&(Object.assign(l,{[e]:g}),Object.assign(l,a(l)))}typeof l.lazy=="object"&&(l.lazy[e]=void 0,Object.values(l.lazy).every(g=>g===void 0)&&(l.lazy=void 0))})();return c[e]=m,m},Am=new WeakMap;function k1(e,r,o,a,l){let u=o[e.id];if($e(u,"No route found in manifest"),!e.lazy)return{lazyRoutePromise:void 0,lazyHandlerPromise:void 0};if(typeof e.lazy=="function"){let x=Am.get(u);if(x)return{lazyRoutePromise:x,lazyHandlerPromise:x};let y=(async()=>{$e(typeof e.lazy=="function","No lazy route function found");let g=await e.lazy(),w={};for(let j in g){let E=g[j];if(E===void 0)continue;let S=Uv(j),R=u[j]!==void 0&&j!=="hasErrorBoundary";S?pt(!S,"Route property "+j+" is not a supported property to be returned from a lazy route function. This property will be ignored."):R?pt(!R,`Route "${u.id}" has a static property "${j}" defined but its lazy function is also returning a value for this property. The lazy route property "${j}" will be ignored.`):w[j]=E}Object.assign(u,w),Object.assign(u,{...a(u),lazy:void 0})})();return Am.set(u,y),y.catch(()=>{}),{lazyRoutePromise:y,lazyHandlerPromise:y}}let c=Object.keys(e.lazy),f=[],m;for(let x of c){if(l&&l.includes(x))continue;let y=z0({key:x,route:e,manifest:o,mapRouteProperties:a});y&&(f.push(y),x===r&&(m=y))}let h=f.length>0?Promise.all(f).then(()=>{}):void 0;return h?.catch(()=>{}),m?.catch(()=>{}),{lazyRoutePromise:h,lazyHandlerPromise:m}}async function $m(e){let r=e.matches.filter(l=>l.shouldLoad),o={};return(await Promise.all(r.map(l=>l.resolve()))).forEach((l,u)=>{o[r[u].route.id]=l}),o}async function E1(e){return e.matches.some(r=>r.route.middleware)?A0(e,()=>$m(e)):$m(e)}function A0(e,r){return C1(e,r,a=>{if(H1(a))throw a;return a},A1,o);function o(a,l,u){if(u)return Promise.resolve(Object.assign(u.value,{[l]:{type:"error",result:a}}));{let{matches:c}=e,f=Math.min(Math.max(c.findIndex(h=>h.route.id===l),0),Math.max(c.findIndex(h=>h.shouldCallHandler()),0)),m=to(c,c[f].route.id).route.id;return Promise.resolve({[m]:{type:"error",result:a}})}}}async function C1(e,r,o,a,l){let{matches:u,request:c,params:f,context:m,unstable_pattern:h}=e,x=u.flatMap(g=>g.route.middleware?g.route.middleware.map(w=>[g.route.id,w]):[]);return await $0({request:c,params:f,context:m,unstable_pattern:h},x,r,o,a,l)}async function $0(e,r,o,a,l,u,c=0){let{request:f}=e;if(f.signal.aborted)throw f.signal.reason??new Error(`Request aborted: ${f.method} ${f.url}`);let m=r[c];if(!m)return await o();let[h,x]=m,y,g=async()=>{if(y)throw new Error("You may only call `next()` once per middleware");try{return y={value:await $0(e,r,o,a,l,u,c+1)},y.value}catch(w){return y={value:await u(w,h,y)},y.value}};try{let w=await x(e,g),j=w!=null?a(w):void 0;return l(j)?j:y?j??y.value:(y={value:await g()},y.value)}catch(w){return await u(w,h,y)}}function F0(e,r,o,a,l){let u=z0({key:"middleware",route:a.route,manifest:r,mapRouteProperties:e}),c=k1(a.route,Lt(o.method)?"action":"loader",r,e,l);return{middleware:u,route:c.lazyRoutePromise,handler:c.lazyHandlerPromise}}function Gc(e,r,o,a,l,u,c,f,m=null,h){let x=!1,y=F0(e,r,o,l,u);return{...l,_lazyPromises:y,shouldLoad:f,shouldRevalidateArgs:m,shouldCallHandler(g){return x=!0,m?typeof h=="boolean"?ya(l,{...m,defaultShouldRevalidate:h}):typeof g=="boolean"?ya(l,{...m,defaultShouldRevalidate:g}):ya(l,m):f},resolve(g){let{lazy:w,loader:j,middleware:E}=l.route,S=x||f||g&&!Lt(o.method)&&(w||j),_=E&&E.length>0&&!j&&!w;return S&&(Lt(o.method)||!_)?R1({request:o,unstable_pattern:a,match:l,lazyHandlerPromise:y?.handler,lazyRoutePromise:y?.route,handlerOverride:g,scopedContext:c}):Promise.resolve({type:"data",result:void 0})}}}function yi(e,r,o,a,l,u,c,f=null){return a.map(m=>m.route.id!==l.route.id?{...m,shouldLoad:!1,shouldRevalidateArgs:f,shouldCallHandler:()=>!1,_lazyPromises:F0(e,r,o,m,u),resolve:()=>Promise.resolve({type:"data",result:void 0})}:Gc(e,r,o,Ia(a),m,u,c,!0,f))}async function P1(e,r,o,a,l,u){o.some(h=>h._lazyPromises?.middleware)&&await Promise.all(o.map(h=>h._lazyPromises?.middleware));let c={request:r,unstable_pattern:Ia(o),params:o[0].params,context:l,matches:o},m=await e({...c,fetcherKey:a,runClientMiddleware:h=>{let x=c;return A0(x,()=>h({...x,fetcherKey:a,runClientMiddleware:()=>{throw new Error("Cannot call `runClientMiddleware()` from within an `runClientMiddleware` handler")}}))}});try{await Promise.all(o.flatMap(h=>[h._lazyPromises?.handler,h._lazyPromises?.route]))}catch{}return m}async function R1({request:e,unstable_pattern:r,match:o,lazyHandlerPromise:a,lazyRoutePromise:l,handlerOverride:u,scopedContext:c}){let f,m,h=Lt(e.method),x=h?"action":"loader",y=g=>{let w,j=new Promise((_,R)=>w=R);m=()=>w(),e.signal.addEventListener("abort",m);let E=_=>typeof g!="function"?Promise.reject(new Error(`You cannot call the handler for a route which defines a boolean "${x}" [routeId: ${o.route.id}]`)):g({request:e,unstable_pattern:r,params:o.params,context:c},..._!==void 0?[_]:[]),S=(async()=>{try{return{type:"data",result:await(u?u(R=>E(R)):E())}}catch(_){return{type:"error",result:_}}})();return Promise.race([S,j])};try{let g=h?o.route.action:o.route.loader;if(a||l)if(g){let w,[j]=await Promise.all([y(g).catch(E=>{w=E}),a,l]);if(w!==void 0)throw w;f=j}else{await a;let w=h?o.route.action:o.route.loader;if(w)[f]=await Promise.all([y(w),l]);else if(x==="action"){let j=new URL(e.url),E=j.pathname+j.search;throw Nn(405,{method:e.method,pathname:E,routeId:o.route.id})}else return{type:"data",result:void 0}}else if(g)f=await y(g);else{let w=new URL(e.url),j=w.pathname+w.search;throw Nn(404,{pathname:j})}}catch(g){return{type:"error",result:g}}finally{m&&e.signal.removeEventListener("abort",m)}return f}async function M1(e){let r=e.headers.get("Content-Type");return r&&/\bapplication\/json\b/.test(r)?e.body==null?null:e.json():e.text()}async function T1(e){let{result:r,type:o}=e;if(pd(r)){let a;try{a=await M1(r)}catch(l){return{type:"error",error:l}}return o==="error"?{type:"error",error:new La(r.status,r.statusText,a),statusCode:r.status,headers:r.headers}:{type:"data",data:a,statusCode:r.status,headers:r.headers}}return o==="error"?Um(r)?r.data instanceof Error?{type:"error",error:r.data,statusCode:r.init?.status,headers:r.init?.headers?new Headers(r.init.headers):void 0}:{type:"error",error:z1(r),statusCode:Na(r)?r.status:void 0,headers:r.init?.headers?new Headers(r.init.headers):void 0}:{type:"error",error:r,statusCode:Na(r)?r.status:void 0}:Um(r)?{type:"data",data:r.data,statusCode:r.init?.status,headers:r.init?.headers?new Headers(r.init.headers):void 0}:{type:"data",data:r}}function D1(e,r,o,a,l){let u=e.headers.get("Location");if($e(u,"Redirects returned/thrown from loaders/actions must have a Location header"),!dd(u)){let c=a.slice(0,a.findIndex(f=>f.route.id===o)+1);u=Yc(new URL(r.url),c,l,u),e.headers.set("Location",u)}return e}function Fm(e,r,o,a){let l=["about:","blob:","chrome:","chrome-untrusted:","content:","data:","devtools:","file:","filesystem:","javascript:"];if(dd(e)){let u=e,c=u.startsWith("//")?new URL(r.protocol+u):new URL(u);if(l.includes(c.protocol))throw new Error("Invalid redirect location");let f=Sn(c.pathname,o)!=null;if(c.origin===r.origin&&f)return c.pathname+c.search+c.hash}try{let u=a.createURL(e);if(l.includes(u.protocol))throw new Error("Invalid redirect location")}catch{}return e}function mi(e,r,o,a){let l=e.createURL(O0(r)).toString(),u={signal:o};if(a&&Lt(a.formMethod)){let{formMethod:c,formEncType:f}=a;u.method=c.toUpperCase(),f==="application/json"?(u.headers=new Headers({"Content-Type":f}),u.body=JSON.stringify(a.json)):f==="text/plain"?u.body=a.text:f==="application/x-www-form-urlencoded"&&a.formData?u.body=Zc(a.formData):u.body=a.formData}return new Request(l,u)}function Zc(e){let r=new URLSearchParams;for(let[o,a]of e.entries())r.append(o,typeof a=="string"?a:a.name);return r}function Om(e){let r=new FormData;for(let[o,a]of e.entries())r.append(o,a);return r}function L1(e,r,o,a=!1,l=!1){let u={},c=null,f,m=!1,h={},x=o&&ln(o[1])?o[1].error:void 0;return e.forEach(y=>{if(!(y.route.id in r))return;let g=y.route.id,w=r[g];if($e(!ko(w),"Cannot handle redirect results in processLoaderData"),ln(w)){let j=w.error;if(x!==void 0&&(j=x,x=void 0),c=c||{},l)c[g]=j;else{let E=to(e,g);c[E.route.id]==null&&(c[E.route.id]=j)}a||(u[g]=L0),m||(m=!0,f=Na(w.error)?w.error.status:500),w.headers&&(h[g]=w.headers)}else u[g]=w.data,w.statusCode&&w.statusCode!==200&&!m&&(f=w.statusCode),w.headers&&(h[g]=w.headers)}),x!==void 0&&o&&(c={[o[0]]:x},o[2]&&(u[o[2]]=void 0)),{loaderData:u,errors:c,statusCode:f||200,loaderHeaders:h}}function Hm(e,r,o,a,l,u){let{loaderData:c,errors:f}=L1(r,o,a);return l.filter(m=>!m.matches||m.matches.some(h=>h.shouldLoad)).forEach(m=>{let{key:h,match:x,controller:y}=m;if(y&&y.signal.aborted)return;let g=u[h];if($e(g,"Did not find corresponding fetcher result"),ln(g)){let w=to(e.matches,x?.route.id);f&&f[w.route.id]||(f={...f,[w.route.id]:g.error}),e.fetchers.delete(h)}else if(ko(g))$e(!1,"Unhandled fetcher revalidation redirect");else{let w=Sr(g.data);e.fetchers.set(h,w)}}),{loaderData:c,errors:f}}function Bm(e,r,o,a){let l=Object.entries(r).filter(([,u])=>u!==L0).reduce((u,[c,f])=>(u[c]=f,u),{});for(let u of o){let c=u.route.id;if(!r.hasOwnProperty(c)&&e.hasOwnProperty(c)&&u.route.loader&&(l[c]=e[c]),a&&a.hasOwnProperty(c))break}return l}function Vm(e){return e?ln(e[1])?{actionData:{}}:{actionData:{[e[0]]:e[1].data}}:{}}function to(e,r){return(r?e.slice(0,e.findIndex(a=>a.route.id===r)+1):[...e]).reverse().find(a=>a.route.hasErrorBoundary===!0)||e[0]}function Gs(e){let r=e.length===1?e[0]:e.find(o=>o.index||!o.path||o.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:r}],route:r}}function Nn(e,{pathname:r,routeId:o,method:a,type:l,message:u}={}){let c="Unknown Server Error",f="Unknown @remix-run/router error";return e===400?(c="Bad Request",a&&r&&o?f=`You made a ${a} request to "${r}" but did not provide a \`loader\` for route "${o}", so there is no way to handle the request.`:l==="invalid-body"&&(f="Unable to encode submission body")):e===403?(c="Forbidden",f=`Route "${o}" does not match URL "${r}"`):e===404?(c="Not Found",f=`No route matches URL "${r}"`):e===405&&(c="Method Not Allowed",a&&r&&o?f=`You made a ${a.toUpperCase()} request to "${r}" but did not provide an \`action\` for route "${o}", so there is no way to handle the request.`:a&&(f=`Invalid request method "${a.toUpperCase()}"`)),new La(e||500,c,new Error(f),!0)}function Zs(e){let r=Object.entries(e);for(let o=r.length-1;o>=0;o--){let[a,l]=r[o];if(ko(l))return{key:a,result:l}}}function O0(e){let r=typeof e=="string"?oo(e):e;return or({...r,hash:""})}function I1(e,r){return e.pathname!==r.pathname||e.search!==r.search?!1:e.hash===""?r.hash!=="":e.hash===r.hash?!0:r.hash!==""}function z1(e){return new La(e.init?.status??500,e.init?.statusText??"Internal Server Error",e.data)}function A1(e){return e!=null&&typeof e=="object"&&Object.entries(e).every(([r,o])=>typeof r=="string"&&$1(o))}function $1(e){return e!=null&&typeof e=="object"&&"type"in e&&"result"in e&&(e.type==="data"||e.type==="error")}function F1(e){return pd(e.result)&&T0.has(e.result.status)}function ln(e){return e.type==="error"}function ko(e){return(e&&e.type)==="redirect"}function Um(e){return typeof e=="object"&&e!=null&&"type"in e&&"data"in e&&"init"in e&&e.type==="DataWithResponseInit"}function pd(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.headers=="object"&&typeof e.body<"u"}function O1(e){return T0.has(e)}function H1(e){return pd(e)&&O1(e.status)&&e.headers.has("Location")}function B1(e){return y1.has(e.toUpperCase())}function Lt(e){return g1.has(e.toUpperCase())}function gd(e){return new URLSearchParams(e).getAll("index").some(r=>r==="")}function cl(e,r){let o=typeof r=="string"?oo(r).search:r.search;if(e[e.length-1].route.index&&gd(o||""))return e[e.length-1];let a=E0(e);return a[a.length-1]}function Wm(e){let{formMethod:r,formAction:o,formEncType:a,text:l,formData:u,json:c}=e;if(!(!r||!o||!a)){if(l!=null)return{formMethod:r,formAction:o,formEncType:a,formData:void 0,json:void 0,text:l};if(u!=null)return{formMethod:r,formAction:o,formEncType:a,formData:u,json:void 0,text:void 0};if(c!==void 0)return{formMethod:r,formAction:o,formEncType:a,formData:void 0,json:c,text:void 0}}}function Mc(e,r){return r?{state:"loading",location:e,formMethod:r.formMethod,formAction:r.formAction,formEncType:r.formEncType,formData:r.formData,json:r.json,text:r.text}:{state:"loading",location:e,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function V1(e,r){return{state:"submitting",location:e,formMethod:r.formMethod,formAction:r.formAction,formEncType:r.formEncType,formData:r.formData,json:r.json,text:r.text}}function ca(e,r){return e?{state:"loading",formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text,data:r}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:r}}function U1(e,r){return{state:"submitting",formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text,data:r?r.data:void 0}}function Sr(e){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function W1(e,r){try{let o=e.sessionStorage.getItem(D0);if(o){let a=JSON.parse(o);for(let[l,u]of Object.entries(a||{}))u&&Array.isArray(u)&&r.set(l,new Set(u||[]))}}catch{}}function X1(e,r){if(r.size>0){let o={};for(let[a,l]of r)o[a]=[...l];try{e.sessionStorage.setItem(D0,JSON.stringify(o))}catch(a){pt(!1,`Failed to save applied view transitions in sessionStorage (${a}).`)}}}function Xm(){let e,r,o=new Promise((a,l)=>{e=async u=>{a(u);try{await o}catch{}},r=async u=>{l(u);try{await o}catch{}}});return{promise:o,resolve:e,reject:r}}var zo=N.createContext(null);zo.displayName="DataRouter";var za=N.createContext(null);za.displayName="DataRouterState";var H0=N.createContext(!1);function Y1(){return N.useContext(H0)}var xd=N.createContext({isTransitioning:!1});xd.displayName="ViewTransition";var B0=N.createContext(new Map);B0.displayName="Fetchers";var K1=N.createContext(null);K1.displayName="Await";var jn=N.createContext(null);jn.displayName="Navigation";var Ml=N.createContext(null);Ml.displayName="Location";var sr=N.createContext({outlet:null,matches:[],isDataRoute:!1});sr.displayName="Route";var yd=N.createContext(null);yd.displayName="RouteError";var V0="REACT_ROUTER_ERROR",G1="REDIRECT",Z1="ROUTE_ERROR_RESPONSE";function Q1(e){if(e.startsWith(`${V0}:${G1}:{`))try{let r=JSON.parse(e.slice(28));if(typeof r=="object"&&r&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.location=="string"&&typeof r.reloadDocument=="boolean"&&typeof r.replace=="boolean")return r}catch{}}function q1(e){if(e.startsWith(`${V0}:${Z1}:{`))try{let r=JSON.parse(e.slice(40));if(typeof r=="object"&&r&&typeof r.status=="number"&&typeof r.statusText=="string")return new La(r.status,r.statusText,r.data)}catch{}}function J1(e,{relative:r}={}){$e(Aa(),"useHref() may be used only in the context of a <Router> component.");let{basename:o,navigator:a}=N.useContext(jn),{hash:l,pathname:u,search:c}=$a(e,{relative:r}),f=u;return o!=="/"&&(f=u==="/"?o:tr([o,u])),a.createHref({pathname:f,search:c,hash:l})}function Aa(){return N.useContext(Ml)!=null}function Ao(){return $e(Aa(),"useLocation() may be used only in the context of a <Router> component."),N.useContext(Ml).location}var U0="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function W0(e){N.useContext(jn).static||N.useLayoutEffect(e)}function vd(){let{isDataRoute:e}=N.useContext(sr);return e?mw():ew()}function ew(){$e(Aa(),"useNavigate() may be used only in the context of a <Router> component.");let e=N.useContext(zo),{basename:r,navigator:o}=N.useContext(jn),{matches:a}=N.useContext(sr),{pathname:l}=Ao(),u=JSON.stringify(fd(a)),c=N.useRef(!1);return W0(()=>{c.current=!0}),N.useCallback((m,h={})=>{if(pt(c.current,U0),!c.current)return;if(typeof m=="number"){o.go(m);return}let x=hd(m,JSON.parse(u),l,h.relative==="path");e==null&&r!=="/"&&(x.pathname=x.pathname==="/"?r:tr([r,x.pathname])),(h.replace?o.replace:o.push)(x,h.state,h)},[r,o,u,l,e])}var tw=N.createContext(null);function nw(e){let r=N.useContext(sr).outlet;return N.useMemo(()=>r&&N.createElement(tw.Provider,{value:e},r),[r,e])}function $a(e,{relative:r}={}){let{matches:o}=N.useContext(sr),{pathname:a}=Ao(),l=JSON.stringify(fd(o));return N.useMemo(()=>hd(e,JSON.parse(l),a,r==="path"),[e,l,a,r])}function rw(e,r,o,a,l){$e(Aa(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:u}=N.useContext(jn),{matches:c}=N.useContext(sr),f=c[c.length-1],m=f?f.params:{},h=f?f.pathname:"/",x=f?f.pathnameBase:"/",y=f&&f.route;{let R=y&&y.path||"";Y0(h,!y||R.endsWith("*")||R.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${h}" (under <Route path="${R}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${R}"> to <Route path="${R==="/"?"*":`${R}/*`}">.`)}let g=Ao(),w;w=g;let j=w.pathname||"/",E=j;if(x!=="/"){let R=x.replace(/^\//,"").split("/");E="/"+j.replace(/^\//,"").split("/").slice(R.length).join("/")}let S=eo(e,{pathname:E});return pt(y||S!=null,`No routes matched location "${w.pathname}${w.search}${w.hash}" `),pt(S==null||S[S.length-1].route.element!==void 0||S[S.length-1].route.Component!==void 0||S[S.length-1].route.lazy!==void 0,`Matched leaf route at location "${w.pathname}${w.search}${w.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`),lw(S&&S.map(R=>Object.assign({},R,{params:Object.assign({},m,R.params),pathname:tr([x,u.encodeLocation?u.encodeLocation(R.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:R.pathname]),pathnameBase:R.pathnameBase==="/"?x:tr([x,u.encodeLocation?u.encodeLocation(R.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:R.pathnameBase])})),c,o,a,l)}function ow(){let e=hw(),r=Na(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),o=e instanceof Error?e.stack:null,a="rgba(200,200,200, 0.5)",l={padding:"0.5rem",backgroundColor:a},u={padding:"2px 4px",backgroundColor:a},c=null;return console.error("Error handled by React Router default ErrorBoundary:",e),c=N.createElement(N.Fragment,null,N.createElement("p",null," Hey developer "),N.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",N.createElement("code",{style:u},"ErrorBoundary")," or"," ",N.createElement("code",{style:u},"errorElement")," prop on your route.")),N.createElement(N.Fragment,null,N.createElement("h2",null,"Unexpected Application Error!"),N.createElement("h3",{style:{fontStyle:"italic"}},r),o?N.createElement("pre",{style:l},o):null,c)}var iw=N.createElement(ow,null),X0=class extends N.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,r){return r.location!==e.location||r.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:r.error,location:r.location,revalidation:e.revalidation||r.revalidation}}componentDidCatch(e,r){this.props.onError?this.props.onError(e,r):console.error("React Router caught the following error during render",e)}render(){let e=this.state.error;if(this.context&&typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){const o=q1(e.digest);o&&(e=o)}let r=e!==void 0?N.createElement(sr.Provider,{value:this.props.routeContext},N.createElement(yd.Provider,{value:e,children:this.props.component})):this.props.children;return this.context?N.createElement(aw,{error:e},r):r}};X0.contextType=H0;var Tc=new WeakMap;function aw({children:e,error:r}){let{basename:o}=N.useContext(jn);if(typeof r=="object"&&r&&"digest"in r&&typeof r.digest=="string"){let a=Q1(r.digest);if(a){let l=Tc.get(r);if(l)throw l;let u=P0(a.location,o);if(C0&&!Tc.get(r))if(u.isExternal||a.reloadDocument)window.location.href=u.absoluteURL||u.to;else{const c=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(u.to,{replace:a.replace}));throw Tc.set(r,c),c}return N.createElement("meta",{httpEquiv:"refresh",content:`0;url=${u.absoluteURL||u.to}`})}}return e}function sw({routeContext:e,match:r,children:o}){let a=N.useContext(zo);return a&&a.static&&a.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=r.route.id),N.createElement(sr.Provider,{value:e},o)}function lw(e,r=[],o=null,a=null,l=null){if(e==null){if(!o)return null;if(o.errors)e=o.matches;else if(r.length===0&&!o.initialized&&o.matches.length>0)e=o.matches;else return null}let u=e,c=o?.errors;if(c!=null){let x=u.findIndex(y=>y.route.id&&c?.[y.route.id]!==void 0);$e(x>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(c).join(",")}`),u=u.slice(0,Math.min(u.length,x+1))}let f=!1,m=-1;if(o)for(let x=0;x<u.length;x++){let y=u[x];if((y.route.HydrateFallback||y.route.hydrateFallbackElement)&&(m=x),y.route.id){let{loaderData:g,errors:w}=o,j=y.route.loader&&!g.hasOwnProperty(y.route.id)&&(!w||w[y.route.id]===void 0);if(y.route.lazy||j){f=!0,m>=0?u=u.slice(0,m+1):u=[u[0]];break}}}let h=o&&a?(x,y)=>{a(x,{location:o.location,params:o.matches?.[0]?.params??{},unstable_pattern:Ia(o.matches),errorInfo:y})}:void 0;return u.reduceRight((x,y,g)=>{let w,j=!1,E=null,S=null;o&&(w=c&&y.route.id?c[y.route.id]:void 0,E=y.route.errorElement||iw,f&&(m<0&&g===0?(Y0("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),j=!0,S=null):m===g&&(j=!0,S=y.route.hydrateFallbackElement||null)));let _=r.concat(u.slice(0,g+1)),R=()=>{let b;return w?b=E:j?b=S:y.route.Component?b=N.createElement(y.route.Component,null):y.route.element?b=y.route.element:b=x,N.createElement(sw,{match:y,routeContext:{outlet:x,matches:_,isDataRoute:o!=null},children:b})};return o&&(y.route.ErrorBoundary||y.route.errorElement||g===0)?N.createElement(X0,{location:o.location,revalidation:o.revalidation,component:E,error:w,children:R(),routeContext:{outlet:null,matches:_,isDataRoute:!0},onError:h}):R()},null)}function wd(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function uw(e){let r=N.useContext(zo);return $e(r,wd(e)),r}function cw(e){let r=N.useContext(za);return $e(r,wd(e)),r}function dw(e){let r=N.useContext(sr);return $e(r,wd(e)),r}function bd(e){let r=dw(e),o=r.matches[r.matches.length-1];return $e(o.route.id,`${e} can only be used on routes that contain a unique "id"`),o.route.id}function fw(){return bd("useRouteId")}function hw(){let e=N.useContext(yd),r=cw("useRouteError"),o=bd("useRouteError");return e!==void 0?e:r.errors?.[o]}function mw(){let{router:e}=uw("useNavigate"),r=bd("useNavigate"),o=N.useRef(!1);return W0(()=>{o.current=!0}),N.useCallback(async(l,u={})=>{pt(o.current,U0),o.current&&(typeof l=="number"?await e.navigate(l):await e.navigate(l,{fromRouteId:r,...u}))},[e,r])}var Ym={};function Y0(e,r,o){!r&&!Ym[e]&&(Ym[e]=!0,pt(!1,o))}var Km={};function Gm(e,r){!e&&!Km[r]&&(Km[r]=!0,console.warn(r))}var pw="useOptimistic",Zm=Rv[pw],gw=()=>{};function xw(e){return Zm?Zm(e):[e,gw]}function yw(e){let r={hasErrorBoundary:e.hasErrorBoundary||e.ErrorBoundary!=null||e.errorElement!=null};return e.Component&&(e.element&&pt(!1,"You should not include both `Component` and `element` on your route - `Component` will be used."),Object.assign(r,{element:N.createElement(e.Component),Component:void 0})),e.HydrateFallback&&(e.hydrateFallbackElement&&pt(!1,"You should not include both `HydrateFallback` and `hydrateFallbackElement` on your route - `HydrateFallback` will be used."),Object.assign(r,{hydrateFallbackElement:N.createElement(e.HydrateFallback),HydrateFallback:void 0})),e.ErrorBoundary&&(e.errorElement&&pt(!1,"You should not include both `ErrorBoundary` and `errorElement` on your route - `ErrorBoundary` will be used."),Object.assign(r,{errorElement:N.createElement(e.ErrorBoundary),ErrorBoundary:void 0})),r}var vw=["HydrateFallback","hydrateFallbackElement"],ww=class{constructor(){this.status="pending",this.promise=new Promise((e,r)=>{this.resolve=o=>{this.status==="pending"&&(this.status="resolved",e(o))},this.reject=o=>{this.status==="pending"&&(this.status="rejected",r(o))}})}};function bw({router:e,flushSync:r,onError:o,unstable_useTransitions:a}){a=Y1()||a;let[u,c]=N.useState(e.state),[f,m]=xw(u),[h,x]=N.useState(),[y,g]=N.useState({isTransitioning:!1}),[w,j]=N.useState(),[E,S]=N.useState(),[_,R]=N.useState(),b=N.useRef(new Map),P=N.useCallback((H,{deletedFetchers:Y,newErrors:B,flushSync:I,viewTransitionOpts:F})=>{B&&o&&Object.values(B).forEach(k=>o(k,{location:H.location,params:H.matches[0]?.params??{},unstable_pattern:Ia(H.matches)})),H.fetchers.forEach((k,A)=>{k.data!==void 0&&b.current.set(A,k.data)}),Y.forEach(k=>b.current.delete(k)),Gm(I===!1||r!=null,'You provided the `flushSync` option to a router update, but you are not using the `<RouterProvider>` from `react-router/dom` so `ReactDOM.flushSync()` is unavailable.  Please update your app to `import { RouterProvider } from "react-router/dom"` and ensure you have `react-dom` installed as a dependency to use the `flushSync` option.');let L=e.window!=null&&e.window.document!=null&&typeof e.window.document.startViewTransition=="function";if(Gm(F==null||L,"You provided the `viewTransition` option to a router update, but you do not appear to be running in a DOM environment as `window.startViewTransition` is not available."),!F||!L){r&&I?r(()=>c(H)):a===!1?c(H):N.startTransition(()=>{a===!0&&m(k=>Qm(k,H)),c(H)});return}if(r&&I){r(()=>{E&&(w?.resolve(),E.skipTransition()),g({isTransitioning:!0,flushSync:!0,currentLocation:F.currentLocation,nextLocation:F.nextLocation})});let k=e.window.document.startViewTransition(()=>{r(()=>c(H))});k.finished.finally(()=>{r(()=>{j(void 0),S(void 0),x(void 0),g({isTransitioning:!1})})}),r(()=>S(k));return}E?(w?.resolve(),E.skipTransition(),R({state:H,currentLocation:F.currentLocation,nextLocation:F.nextLocation})):(x(H),g({isTransitioning:!0,flushSync:!1,currentLocation:F.currentLocation,nextLocation:F.nextLocation}))},[e.window,r,E,w,a,m,o]);N.useLayoutEffect(()=>e.subscribe(P),[e,P]),N.useEffect(()=>{y.isTransitioning&&!y.flushSync&&j(new ww)},[y]),N.useEffect(()=>{if(w&&h&&e.window){let H=h,Y=w.promise,B=e.window.document.startViewTransition(async()=>{a===!1?c(H):N.startTransition(()=>{a===!0&&m(I=>Qm(I,H)),c(H)}),await Y});B.finished.finally(()=>{j(void 0),S(void 0),x(void 0),g({isTransitioning:!1})}),S(B)}},[h,w,e.window,a,m]),N.useEffect(()=>{w&&h&&f.location.key===h.location.key&&w.resolve()},[w,E,f.location,h]),N.useEffect(()=>{!y.isTransitioning&&_&&(x(_.state),g({isTransitioning:!0,flushSync:!1,currentLocation:_.currentLocation,nextLocation:_.nextLocation}),R(void 0))},[y.isTransitioning,_]);let $=N.useMemo(()=>({createHref:e.createHref,encodeLocation:e.encodeLocation,go:H=>e.navigate(H),push:(H,Y,B)=>e.navigate(H,{state:Y,preventScrollReset:B?.preventScrollReset}),replace:(H,Y,B)=>e.navigate(H,{replace:!0,state:Y,preventScrollReset:B?.preventScrollReset})}),[e]),D=e.basename||"/",M=N.useMemo(()=>({router:e,navigator:$,static:!1,basename:D,onError:o}),[e,$,D,o]);return N.createElement(N.Fragment,null,N.createElement(zo.Provider,{value:M},N.createElement(za.Provider,{value:f},N.createElement(B0.Provider,{value:b.current},N.createElement(xd.Provider,{value:y},N.createElement(jw,{basename:D,location:f.location,navigationType:f.historyAction,navigator:$,unstable_useTransitions:a},N.createElement(_w,{routes:e.routes,future:e.future,state:f,onError:o})))))),null)}function Qm(e,r){return{...e,navigation:r.navigation.state!=="idle"?r.navigation:e.navigation,revalidation:r.revalidation!=="idle"?r.revalidation:e.revalidation,actionData:r.navigation.state!=="submitting"?r.actionData:e.actionData,fetchers:r.fetchers}}var _w=N.memo(Nw);function Nw({routes:e,future:r,state:o,onError:a}){return rw(e,void 0,o,a,r)}function Sw(e){return nw(e.context)}function jw({basename:e="/",children:r=null,location:o,navigationType:a="POP",navigator:l,static:u=!1,unstable_useTransitions:c}){$e(!Aa(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let f=e.replace(/^\/*/,"/"),m=N.useMemo(()=>({basename:f,navigator:l,static:u,unstable_useTransitions:c,future:{}}),[f,l,u,c]);typeof o=="string"&&(o=oo(o));let{pathname:h="/",search:x="",hash:y="",state:g=null,key:w="default"}=o,j=N.useMemo(()=>{let E=Sn(h,f);return E==null?null:{location:{pathname:E,search:x,hash:y,state:g,key:w},navigationType:a}},[f,h,x,y,g,w,a]);return pt(j!=null,`<Router basename="${f}"> is not able to match the URL "${h}${x}${y}" because it does not start with the basename, so the <Router> won't render anything.`),j==null?null:N.createElement(jn.Provider,{value:m},N.createElement(Ml.Provider,{children:r,value:j}))}var dl="get",fl="application/x-www-form-urlencoded";function Tl(e){return typeof HTMLElement<"u"&&e instanceof HTMLElement}function kw(e){return Tl(e)&&e.tagName.toLowerCase()==="button"}function Ew(e){return Tl(e)&&e.tagName.toLowerCase()==="form"}function Cw(e){return Tl(e)&&e.tagName.toLowerCase()==="input"}function Pw(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function Rw(e,r){return e.button===0&&(!r||r==="_self")&&!Pw(e)}var Qs=null;function Mw(){if(Qs===null)try{new FormData(document.createElement("form"),0),Qs=!1}catch{Qs=!0}return Qs}var Tw=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Dc(e){return e!=null&&!Tw.has(e)?(pt(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${fl}"`),null):e}function Dw(e,r){let o,a,l,u,c;if(Ew(e)){let f=e.getAttribute("action");a=f?Sn(f,r):null,o=e.getAttribute("method")||dl,l=Dc(e.getAttribute("enctype"))||fl,u=new FormData(e)}else if(kw(e)||Cw(e)&&(e.type==="submit"||e.type==="image")){let f=e.form;if(f==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let m=e.getAttribute("formaction")||f.getAttribute("action");if(a=m?Sn(m,r):null,o=e.getAttribute("formmethod")||f.getAttribute("method")||dl,l=Dc(e.getAttribute("formenctype"))||Dc(f.getAttribute("enctype"))||fl,u=new FormData(f,e),!Mw()){let{name:h,type:x,value:y}=e;if(x==="image"){let g=h?`${h}.`:"";u.append(`${g}x`,"0"),u.append(`${g}y`,"0")}else h&&u.append(h,y)}}else{if(Tl(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');o=dl,a=null,l=fl,c=e}return u&&l==="text/plain"&&(c=u,u=void 0),{action:a,method:o.toLowerCase(),encType:l,formData:u,body:c}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function _d(e,r){if(e===!1||e===null||typeof e>"u")throw new Error(r)}function Lw(e,r,o,a){let l=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return o?l.pathname.endsWith("/")?l.pathname=`${l.pathname}_.${a}`:l.pathname=`${l.pathname}.${a}`:l.pathname==="/"?l.pathname=`_root.${a}`:r&&Sn(l.pathname,r)==="/"?l.pathname=`${r.replace(/\/$/,"")}/_root.${a}`:l.pathname=`${l.pathname.replace(/\/$/,"")}.${a}`,l}async function Iw(e,r){if(e.id in r)return r[e.id];try{let o=await import(e.module);return r[e.id]=o,o}catch(o){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(o),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function zw(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function Aw(e,r,o){let a=await Promise.all(e.map(async l=>{let u=r.routes[l.route.id];if(u){let c=await Iw(u,o);return c.links?c.links():[]}return[]}));return Hw(a.flat(1).filter(zw).filter(l=>l.rel==="stylesheet"||l.rel==="preload").map(l=>l.rel==="stylesheet"?{...l,rel:"prefetch",as:"style"}:{...l,rel:"prefetch"}))}function qm(e,r,o,a,l,u){let c=(m,h)=>o[h]?m.route.id!==o[h].route.id:!0,f=(m,h)=>o[h].pathname!==m.pathname||o[h].route.path?.endsWith("*")&&o[h].params["*"]!==m.params["*"];return u==="assets"?r.filter((m,h)=>c(m,h)||f(m,h)):u==="data"?r.filter((m,h)=>{let x=a.routes[m.route.id];if(!x||!x.hasLoader)return!1;if(c(m,h)||f(m,h))return!0;if(m.route.shouldRevalidate){let y=m.route.shouldRevalidate({currentUrl:new URL(l.pathname+l.search+l.hash,window.origin),currentParams:o[0]?.params||{},nextUrl:new URL(e,window.origin),nextParams:m.params,defaultShouldRevalidate:!0});if(typeof y=="boolean")return y}return!0}):[]}function $w(e,r,{includeHydrateFallback:o}={}){return Fw(e.map(a=>{let l=r.routes[a.route.id];if(!l)return[];let u=[l.module];return l.clientActionModule&&(u=u.concat(l.clientActionModule)),l.clientLoaderModule&&(u=u.concat(l.clientLoaderModule)),o&&l.hydrateFallbackModule&&(u=u.concat(l.hydrateFallbackModule)),l.imports&&(u=u.concat(l.imports)),u}).flat(1))}function Fw(e){return[...new Set(e)]}function Ow(e){let r={},o=Object.keys(e).sort();for(let a of o)r[a]=e[a];return r}function Hw(e,r){let o=new Set;return new Set(r),e.reduce((a,l)=>{let u=JSON.stringify(Ow(l));return o.has(u)||(o.add(u),a.push({key:u,link:l})),a},[])}function K0(){let e=N.useContext(zo);return _d(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function Bw(){let e=N.useContext(za);return _d(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var Nd=N.createContext(void 0);Nd.displayName="FrameworkContext";function G0(){let e=N.useContext(Nd);return _d(e,"You must render this element inside a <HydratedRouter> element"),e}function Vw(e,r){let o=N.useContext(Nd),[a,l]=N.useState(!1),[u,c]=N.useState(!1),{onFocus:f,onBlur:m,onMouseEnter:h,onMouseLeave:x,onTouchStart:y}=r,g=N.useRef(null);N.useEffect(()=>{if(e==="render"&&c(!0),e==="viewport"){let E=_=>{_.forEach(R=>{c(R.isIntersecting)})},S=new IntersectionObserver(E,{threshold:.5});return g.current&&S.observe(g.current),()=>{S.disconnect()}}},[e]),N.useEffect(()=>{if(a){let E=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(E)}}},[a]);let w=()=>{l(!0)},j=()=>{l(!1),c(!1)};return o?e!=="intent"?[u,g,{}]:[u,g,{onFocus:da(f,w),onBlur:da(m,j),onMouseEnter:da(h,w),onMouseLeave:da(x,j),onTouchStart:da(y,w)}]:[!1,g,{}]}function da(e,r){return o=>{e&&e(o),o.defaultPrevented||r(o)}}function Uw({page:e,...r}){let{router:o}=K0(),a=N.useMemo(()=>eo(o.routes,e,o.basename),[o.routes,e,o.basename]);return a?N.createElement(Xw,{page:e,matches:a,...r}):null}function Ww(e){let{manifest:r,routeModules:o}=G0(),[a,l]=N.useState([]);return N.useEffect(()=>{let u=!1;return Aw(e,r,o).then(c=>{u||l(c)}),()=>{u=!0}},[e,r,o]),a}function Xw({page:e,matches:r,...o}){let a=Ao(),{future:l,manifest:u,routeModules:c}=G0(),{basename:f}=K0(),{loaderData:m,matches:h}=Bw(),x=N.useMemo(()=>qm(e,r,h,u,a,"data"),[e,r,h,u,a]),y=N.useMemo(()=>qm(e,r,h,u,a,"assets"),[e,r,h,u,a]),g=N.useMemo(()=>{if(e===a.pathname+a.search+a.hash)return[];let E=new Set,S=!1;if(r.forEach(R=>{let b=u.routes[R.route.id];!b||!b.hasLoader||(!x.some(P=>P.route.id===R.route.id)&&R.route.id in m&&c[R.route.id]?.shouldRevalidate||b.hasClientLoader?S=!0:E.add(R.route.id))}),E.size===0)return[];let _=Lw(e,f,l.unstable_trailingSlashAwareDataRequests,"data");return S&&E.size>0&&_.searchParams.set("_routes",r.filter(R=>E.has(R.route.id)).map(R=>R.route.id).join(",")),[_.pathname+_.search]},[f,l.unstable_trailingSlashAwareDataRequests,m,a,u,x,r,e,c]),w=N.useMemo(()=>$w(y,u),[y,u]),j=Ww(y);return N.createElement(N.Fragment,null,g.map(E=>N.createElement("link",{key:E,rel:"prefetch",as:"fetch",href:E,...o})),w.map(E=>N.createElement("link",{key:E,rel:"modulepreload",href:E,...o})),j.map(({key:E,link:S})=>N.createElement("link",{key:E,nonce:o.nonce,...S,crossOrigin:S.crossOrigin??o.crossOrigin})))}function Yw(...e){return r=>{e.forEach(o=>{typeof o=="function"?o(r):o!=null&&(o.current=r)})}}var Kw=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Kw&&(window.__reactRouterVersion="7.13.0")}catch{}function Gw(e,r){return _1({basename:r?.basename,getContext:r?.getContext,future:r?.future,history:$v({window:r?.window}),hydrationData:Zw(),routes:e,mapRouteProperties:yw,hydrationRouteProperties:vw,dataStrategy:r?.dataStrategy,patchRoutesOnNavigation:r?.patchRoutesOnNavigation,window:r?.window,unstable_instrumentations:r?.unstable_instrumentations}).initialize()}function Zw(){let e=window?.__staticRouterHydrationData;return e&&e.errors&&(e={...e,errors:Qw(e.errors)}),e}function Qw(e){if(!e)return null;let r=Object.entries(e),o={};for(let[a,l]of r)if(l&&l.__type==="RouteErrorResponse")o[a]=new La(l.status,l.statusText,l.data,l.internal===!0);else if(l&&l.__type==="Error"){if(l.__subType){let u=window[l.__subType];if(typeof u=="function")try{let c=new u(l.message);c.stack="",o[a]=c}catch{}}if(o[a]==null){let u=new Error(l.message);u.stack="",o[a]=u}}else o[a]=l;return o}var Z0=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Sd=N.forwardRef(function({onClick:r,discover:o="render",prefetch:a="none",relative:l,reloadDocument:u,replace:c,state:f,target:m,to:h,preventScrollReset:x,viewTransition:y,unstable_defaultShouldRevalidate:g,...w},j){let{basename:E,unstable_useTransitions:S}=N.useContext(jn),_=typeof h=="string"&&Z0.test(h),R=P0(h,E);h=R.to;let b=J1(h,{relative:l}),[P,$,D]=Vw(a,w),M=eb(h,{replace:c,state:f,target:m,preventScrollReset:x,relative:l,viewTransition:y,unstable_defaultShouldRevalidate:g,unstable_useTransitions:S});function H(B){r&&r(B),B.defaultPrevented||M(B)}let Y=N.createElement("a",{...w,...D,href:R.absoluteURL||b,onClick:R.isExternal||u?r:H,ref:Yw(j,$),target:m,"data-discover":!_&&o==="render"?"true":void 0});return P&&!_?N.createElement(N.Fragment,null,Y,N.createElement(Uw,{page:b})):Y});Sd.displayName="Link";var Qc=N.forwardRef(function({"aria-current":r="page",caseSensitive:o=!1,className:a="",end:l=!1,style:u,to:c,viewTransition:f,children:m,...h},x){let y=$a(c,{relative:h.relative}),g=Ao(),w=N.useContext(za),{navigator:j,basename:E}=N.useContext(jn),S=w!=null&&ib(y)&&f===!0,_=j.encodeLocation?j.encodeLocation(y).pathname:y.pathname,R=g.pathname,b=w&&w.navigation&&w.navigation.location?w.navigation.location.pathname:null;o||(R=R.toLowerCase(),b=b?b.toLowerCase():null,_=_.toLowerCase()),b&&E&&(b=Sn(b,E)||b);const P=_!=="/"&&_.endsWith("/")?_.length-1:_.length;let $=R===_||!l&&R.startsWith(_)&&R.charAt(P)==="/",D=b!=null&&(b===_||!l&&b.startsWith(_)&&b.charAt(_.length)==="/"),M={isActive:$,isPending:D,isTransitioning:S},H=$?r:void 0,Y;typeof a=="function"?Y=a(M):Y=[a,$?"active":null,D?"pending":null,S?"transitioning":null].filter(Boolean).join(" ");let B=typeof u=="function"?u(M):u;return N.createElement(Sd,{...h,"aria-current":H,className:Y,ref:x,style:B,to:c,viewTransition:f},typeof m=="function"?m(M):m)});Qc.displayName="NavLink";var qw=N.forwardRef(({discover:e="render",fetcherKey:r,navigate:o,reloadDocument:a,replace:l,state:u,method:c=dl,action:f,onSubmit:m,relative:h,preventScrollReset:x,viewTransition:y,unstable_defaultShouldRevalidate:g,...w},j)=>{let{unstable_useTransitions:E}=N.useContext(jn),S=rb(),_=ob(f,{relative:h}),R=c.toLowerCase()==="get"?"get":"post",b=typeof f=="string"&&Z0.test(f),P=$=>{if(m&&m($),$.defaultPrevented)return;$.preventDefault();let D=$.nativeEvent.submitter,M=D?.getAttribute("formmethod")||c,H=()=>S(D||$.currentTarget,{fetcherKey:r,method:M,navigate:o,replace:l,state:u,relative:h,preventScrollReset:x,viewTransition:y,unstable_defaultShouldRevalidate:g});E&&o!==!1?N.startTransition(()=>H()):H()};return N.createElement("form",{ref:j,method:R,action:_,onSubmit:a?m:P,...w,"data-discover":!b&&e==="render"?"true":void 0})});qw.displayName="Form";function Jw(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Q0(e){let r=N.useContext(zo);return $e(r,Jw(e)),r}function eb(e,{target:r,replace:o,state:a,preventScrollReset:l,relative:u,viewTransition:c,unstable_defaultShouldRevalidate:f,unstable_useTransitions:m}={}){let h=vd(),x=Ao(),y=$a(e,{relative:u});return N.useCallback(g=>{if(Rw(g,r)){g.preventDefault();let w=o!==void 0?o:or(x)===or(y),j=()=>h(e,{replace:w,state:a,preventScrollReset:l,relative:u,viewTransition:c,unstable_defaultShouldRevalidate:f});m?N.startTransition(()=>j()):j()}},[x,h,y,o,a,r,e,l,u,c,f,m])}var tb=0,nb=()=>`__${String(++tb)}__`;function rb(){let{router:e}=Q0("useSubmit"),{basename:r}=N.useContext(jn),o=fw(),a=e.fetch,l=e.navigate;return N.useCallback(async(u,c={})=>{let{action:f,method:m,encType:h,formData:x,body:y}=Dw(u,r);if(c.navigate===!1){let g=c.fetcherKey||nb();await a(g,o,c.action||f,{unstable_defaultShouldRevalidate:c.unstable_defaultShouldRevalidate,preventScrollReset:c.preventScrollReset,formData:x,body:y,formMethod:c.method||m,formEncType:c.encType||h,flushSync:c.flushSync})}else await l(c.action||f,{unstable_defaultShouldRevalidate:c.unstable_defaultShouldRevalidate,preventScrollReset:c.preventScrollReset,formData:x,body:y,formMethod:c.method||m,formEncType:c.encType||h,replace:c.replace,state:c.state,fromRouteId:o,flushSync:c.flushSync,viewTransition:c.viewTransition})},[a,l,r,o])}function ob(e,{relative:r}={}){let{basename:o}=N.useContext(jn),a=N.useContext(sr);$e(a,"useFormAction must be used inside a RouteContext");let[l]=a.matches.slice(-1),u={...$a(e||".",{relative:r})},c=Ao();if(e==null){u.search=c.search;let f=new URLSearchParams(u.search),m=f.getAll("index");if(m.some(x=>x==="")){f.delete("index"),m.filter(y=>y).forEach(y=>f.append("index",y));let x=f.toString();u.search=x?`?${x}`:""}}return(!e||e===".")&&l.route.index&&(u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index"),o!=="/"&&(u.pathname=u.pathname==="/"?o:tr([o,u.pathname])),or(u)}function ib(e,{relative:r}={}){let o=N.useContext(xd);$e(o!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:a}=Q0("useViewTransitionState"),l=$a(e,{relative:r});if(!o.isTransitioning)return!1;let u=Sn(o.currentLocation.pathname,a)||o.currentLocation.pathname,c=Sn(o.nextLocation.pathname,a)||o.nextLocation.pathname;return yl(l.pathname,c)!=null||yl(l.pathname,u)!=null}var q0=b0();function ab(e){return N.createElement(bw,{flushSync:q0.flushSync,...e})}const sb=[{label:"Overview",items:[{to:"/",label:"Dashboard",icon:ub}]},{label:"Call Routing",items:[{to:"/call-flows",label:"Call Flows",icon:cb},{to:"/inbound-numbers",label:"Inbound Numbers",icon:db},{to:"/time-switches",label:"Time Switches",icon:fb},{to:"/ivr-menus",label:"IVR Menus",icon:hb},{to:"/ring-groups",label:"Ring Groups",icon:mb}]},{label:"Resources",items:[{to:"/extensions",label:"Extensions",icon:pb},{to:"/trunks",label:"Trunks",icon:gb},{to:"/voicemail",label:"Voicemail Boxes",icon:xb},{to:"/conferences",label:"Conferences",icon:yb},{to:"/prompts",label:"Audio Prompts",icon:_b}]},{label:"History",items:[{to:"/call-history",label:"Call History",icon:vb},{to:"/recordings",label:"Recordings",icon:wb}]}];function lb(){const[e,r]=N.useState(!1);return s.jsxs("div",{className:"min-h-screen bg-gray-50 flex",children:[e&&s.jsx("div",{className:"fixed inset-0 bg-black/30 z-20 lg:hidden",onClick:()=>r(!1)}),s.jsxs("aside",{className:`fixed inset-y-0 left-0 z-30 w-60 bg-gray-900 text-gray-300 flex flex-col transform transition-transform duration-200 lg:translate-x-0 lg:static lg:z-auto ${e?"translate-x-0":"-translate-x-full"}`,children:[s.jsx("div",{className:"flex items-center gap-2 px-4 h-14 border-b border-gray-800 shrink-0",children:s.jsx("span",{className:"text-lg font-bold text-white tracking-tight",children:"FlowPBX"})}),s.jsx("nav",{className:"flex-1 overflow-y-auto py-3 px-2 space-y-4",children:sb.map(o=>s.jsxs("div",{children:[s.jsx("p",{className:"px-2 mb-1 text-xs font-semibold uppercase tracking-wider text-gray-500",children:o.label}),s.jsx("ul",{className:"space-y-0.5",children:o.items.map(a=>s.jsx("li",{children:s.jsxs(Qc,{to:a.to,end:a.to==="/",onClick:()=>r(!1),className:({isActive:l})=>`flex items-center gap-2.5 px-2 py-1.5 text-sm rounded-md transition-colors ${l?"bg-gray-800 text-white font-medium":"hover:bg-gray-800/60 hover:text-white"}`,children:[s.jsx(a.icon,{className:"w-4 h-4 shrink-0"}),a.label]})},a.to))})]},o.label))}),s.jsx("div",{className:"border-t border-gray-800 p-2 shrink-0",children:s.jsxs(Qc,{to:"/settings",onClick:()=>r(!1),className:({isActive:o})=>`flex items-center gap-2.5 px-2 py-1.5 text-sm rounded-md transition-colors ${o?"bg-gray-800 text-white font-medium":"hover:bg-gray-800/60 hover:text-white"}`,children:[s.jsx(bb,{className:"w-4 h-4 shrink-0"}),"Settings"]})})]}),s.jsxs("div",{className:"flex-1 flex flex-col min-w-0",children:[s.jsxs("header",{className:"h-14 bg-white border-b border-gray-200 flex items-center justify-between px-4 shrink-0",children:[s.jsx("button",{type:"button",className:"lg:hidden p-1.5 -ml-1.5 rounded-md text-gray-500 hover:text-gray-700 hover:bg-gray-100",onClick:()=>r(!0),children:s.jsx(Nb,{className:"w-5 h-5"})}),s.jsx("div",{className:"lg:hidden"}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("span",{className:"text-sm text-gray-500",children:"Admin"}),s.jsx("a",{href:"/api/v1/auth/logout",onClick:o=>{o.preventDefault(),fetch("/api/v1/auth/logout",{method:"POST",credentials:"same-origin"}).then(()=>{window.location.href="/login"})},className:"text-sm text-gray-500 hover:text-gray-700",children:"Logout"})]})]}),s.jsx("main",{className:"flex-1 overflow-y-auto p-6",children:s.jsx(Sw,{})})]})]})}function ub({className:e}){return s.jsx("svg",{className:e,viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{d:"M3 4a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1H4a1 1 0 01-1-1V4zm8 0a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1h-4a1 1 0 01-1-1V4zM3 12a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1H4a1 1 0 01-1-1v-4zm8 0a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1h-4a1 1 0 01-1-1v-4z"})})}function cb({className:e}){return s.jsx("svg",{className:e,viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M6 2a2 2 0 00-2 2v1a2 2 0 002 2h1v2H5a2 2 0 00-2 2v1a2 2 0 002 2h1v2a2 2 0 002 2h4a2 2 0 002-2v-2h1a2 2 0 002-2v-1a2 2 0 00-2-2h-2V7h1a2 2 0 002-2V4a2 2 0 00-2-2H6zm0 2h8v1H6V4zm-1 7h10v1H5v-1zm3 5h4v1H8v-1z",clipRule:"evenodd"})})}function db({className:e}){return s.jsx("svg",{className:e,viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{d:"M2 3a1 1 0 011-1h2.153a1 1 0 01.986.836l.74 4.435a1 1 0 01-.54 1.06l-1.548.773a11.037 11.037 0 006.105 6.105l.774-1.548a1 1 0 011.059-.54l4.435.74a1 1 0 01.836.986V17a1 1 0 01-1 1h-2C7.82 18 2 12.18 2 5V3z"})})}function fb({className:e}){return s.jsx("svg",{className:e,viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z",clipRule:"evenodd"})})}function hb({className:e}){return s.jsx("svg",{className:e,viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 5a1 1 0 011-1h6a1 1 0 110 2H4a1 1 0 01-1-1z",clipRule:"evenodd"})})}function mb({className:e}){return s.jsx("svg",{className:e,viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{d:"M13 6a3 3 0 11-6 0 3 3 0 016 0zm5 2a2 2 0 11-4 0 2 2 0 014 0zm-4 7a4 4 0 00-8 0v3h8v-3zM6 8a2 2 0 11-4 0 2 2 0 014 0zm10 10v-3a5.972 5.972 0 00-.75-2.906A3.005 3.005 0 0119 15v3h-3zM4.75 12.094A5.973 5.973 0 004 15v3H1v-3a3 3 0 013.75-2.906z"})})}function pb({className:e}){return s.jsx("svg",{className:e,viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z",clipRule:"evenodd"})})}function gb({className:e}){return s.jsx("svg",{className:e,viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M2 5a2 2 0 012-2h12a2 2 0 012 2v2a2 2 0 01-2 2H4a2 2 0 01-2-2V5zm14 1a1 1 0 11-2 0 1 1 0 012 0zM2 13a2 2 0 012-2h12a2 2 0 012 2v2a2 2 0 01-2 2H4a2 2 0 01-2-2v-2zm14 1a1 1 0 11-2 0 1 1 0 012 0z",clipRule:"evenodd"})})}function xb({className:e}){return s.jsx("svg",{className:e,viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{d:"M18 10c0 3.866-3.582 7-8 7a8.841 8.841 0 01-4.083-.98L2 17l1.338-3.123C2.493 12.767 2 11.434 2 10c0-3.866 3.582-7 8-7s8 3.134 8 7z"})})}function yb({className:e}){return s.jsx("svg",{className:e,viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M7 4a3 3 0 016 0v4a3 3 0 11-6 0V4zm4 10.93A7.001 7.001 0 0017 8a1 1 0 10-2 0A5 5 0 015 8a1 1 0 00-2 0 7.001 7.001 0 006 6.93V17H6a1 1 0 100 2h8a1 1 0 100-2h-3v-2.07z",clipRule:"evenodd"})})}function vb({className:e}){return s.jsx("svg",{className:e,viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M3 3a1 1 0 000 2v8a2 2 0 002 2h2.586l-1.293 1.293a1 1 0 101.414 1.414L10 15.414l2.293 2.293a1 1 0 001.414-1.414L12.414 15H15a2 2 0 002-2V5a1 1 0 100-2H3zm11 4a1 1 0 10-2 0v4a1 1 0 102 0V7zm-3 1a1 1 0 10-2 0v3a1 1 0 102 0V8zM8 9a1 1 0 00-2 0v2a1 1 0 102 0V9z",clipRule:"evenodd"})})}function wb({className:e}){return s.jsx("svg",{className:e,viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z",clipRule:"evenodd"})})}function bb({className:e}){return s.jsx("svg",{className:e,viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M11.49 3.17c-.38-1.56-2.6-1.56-2.98 0a1.532 1.532 0 01-2.286.948c-1.372-.836-2.942.734-2.106 2.106.54.886.061 2.042-.947 2.287-1.561.379-1.561 2.6 0 2.978a1.532 1.532 0 01.947 2.287c-.836 1.372.734 2.942 2.106 2.106a1.532 1.532 0 012.287.947c.379 1.561 2.6 1.561 2.978 0a1.533 1.533 0 012.287-.947c1.372.836 2.942-.734 2.106-2.106a1.533 1.533 0 01.947-2.287c1.561-.379 1.561-2.6 0-2.978a1.532 1.532 0 01-.947-2.287c.836-1.372-.734-2.942-2.106-2.106a1.532 1.532 0 01-2.287-.947zM10 13a3 3 0 100-6 3 3 0 000 6z",clipRule:"evenodd"})})}function _b({className:e}){return s.jsx("svg",{className:e,viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M9.383 3.076A1 1 0 0110 4v12a1 1 0 01-1.707.707L4.586 13H2a1 1 0 01-1-1V8a1 1 0 011-1h2.586l3.707-3.707a1 1 0 011.09-.217zM14.657 2.929a1 1 0 011.414 0A9.972 9.972 0 0119 10a9.972 9.972 0 01-2.929 7.071 1 1 0 01-1.414-1.414A7.971 7.971 0 0017 10c0-2.21-.894-4.208-2.343-5.657a1 1 0 010-1.414zm-2.829 2.828a1 1 0 011.415 0A5.983 5.983 0 0115 10a5.984 5.984 0 01-1.757 4.243 1 1 0 01-1.415-1.415A3.984 3.984 0 0013 10a3.983 3.983 0 00-1.172-2.828 1 1 0 010-1.415z",clipRule:"evenodd"})})}function Nb({className:e}){return s.jsx("svg",{className:e,viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z",clipRule:"evenodd"})})}const Sb="/api/v1";class Ue extends Error{status;constructor(r,o){super(o),this.name="ApiError",this.status=r}}function jb(){const e=document.cookie.split("; ").find(r=>r.startsWith("flowpbx_csrf="));return e?e.split("=")[1]:null}function kb(e,r){const o=new URL(Sb+e,window.location.origin);if(r)for(const[a,l]of Object.entries(r))l!==void 0&&o.searchParams.set(a,String(l));return o.pathname+o.search}async function Dl(e,r,o){const a=kb(r,o?.params),l={Accept:"application/json"};if(o?.body!==void 0&&(l["Content-Type"]="application/json"),e!=="GET"&&e!=="HEAD"){const f=jb();f&&(l["X-CSRF-Token"]=f)}const u=await fetch(a,{method:e,headers:l,credentials:"same-origin",body:o?.body!==void 0?JSON.stringify(o.body):void 0});if(u.status===401){const f=window.location.pathname;throw f!=="/login"&&f!=="/setup"&&(window.location.href="/login"),new Ue(u.status,"authentication required")}const c=await u.json();if(!u.ok||c.error)throw new Ue(u.status,c.error??`request failed with status ${u.status}`);return c.data}function qt(e,r){return Dl("GET",e,{params:r})}function Jt(e,r){return Dl("POST",e,{body:r})}function kn(e,r){return Dl("PUT",e,{body:r})}function dn(e){return Dl("DELETE",e)}function Ci(e,r){return qt(e,r)}function Eb(){return qt("/health")}function Cb(e){return Jt("/auth/login",e)}function Pb(e){return Jt("/setup",e)}function Rb(){const e=vd(),[r,o]=N.useState(""),[a,l]=N.useState(""),[u,c]=N.useState(""),[f,m]=N.useState(!1),[h,x]=N.useState(!0);N.useEffect(()=>{let g=!1;return Eb().then(w=>{!g&&w.needs_setup&&e("/setup",{replace:!0})}).catch(()=>{}).finally(()=>{g||x(!1)}),()=>{g=!0}},[e]);async function y(g){g.preventDefault(),c(""),m(!0);try{await Cb({username:r,password:a}),e("/",{replace:!0})}catch(w){w instanceof Ue?c(w.message):c("unable to connect to server")}finally{m(!1)}}return h?s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:s.jsx("p",{className:"text-sm text-gray-400",children:"Loading"})}):s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center px-4",children:s.jsxs("div",{className:"w-full max-w-sm",children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900 tracking-tight",children:"FlowPBX"}),s.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Sign in to your account"})]}),s.jsxs("form",{onSubmit:y,className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 space-y-4",children:[u&&s.jsx("div",{className:"rounded-md bg-red-50 border border-red-200 px-3 py-2",children:s.jsx("p",{className:"text-sm text-red-700",children:u})}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-700 mb-1",children:"Username"}),s.jsx("input",{id:"username",type:"text",required:!0,autoComplete:"username",autoFocus:!0,value:r,onChange:g=>o(g.target.value),className:"block w-full rounded-md border border-gray-300 px-3 py-2 text-sm text-gray-900 placeholder-gray-400 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500",placeholder:"admin"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),s.jsx("input",{id:"password",type:"password",required:!0,autoComplete:"current-password",value:a,onChange:g=>l(g.target.value),className:"block w-full rounded-md border border-gray-300 px-3 py-2 text-sm text-gray-900 placeholder-gray-400 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500"})]}),s.jsx("button",{type:"submit",disabled:f,className:"w-full rounded-md bg-blue-600 px-3 py-2 text-sm font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:f?"Signing in":"Sign in"})]})]})})}const qs=["Admin Account","Hostname","SIP Ports","First Trunk","First Extension","License Key","Review"],Mb={admin_username:"admin",admin_password:"",admin_password_confirm:"",hostname:"",sip_port:5060,sip_tls_port:5061,rtp_port_min:1e4,rtp_port_max:2e4,trunk_name:"",trunk_host:"",trunk_port:5060,trunk_username:"",trunk_password:"",trunk_transport:"udp",skip_trunk:!1,ext_number:"100",ext_name:"",ext_password:"",skip_extension:!1,license_key:"",skip_license:!1},_t="block w-full rounded-md border border-gray-300 px-3 py-2 text-sm text-gray-900 placeholder-gray-400 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500",Nt="block text-sm font-medium text-gray-700 mb-1";function Tb(){const e=vd(),[r,o]=N.useState(0),[a,l]=N.useState(Mb),[u,c]=N.useState(""),[f,m]=N.useState(!1);function h(_,R){l(b=>({...b,[_]:R}))}function x(){switch(r){case 0:return a.admin_username.trim()?a.admin_password.length<8?"Password must be at least 8 characters":a.admin_password!==a.admin_password_confirm?"Passwords do not match":null:"Username is required";case 1:return a.hostname.trim()?null:"Hostname or IP address is required";case 2:return a.sip_port<1||a.sip_port>65535?"SIP port must be 1-65535":a.sip_tls_port<1||a.sip_tls_port>65535?"SIP TLS port must be 1-65535":a.rtp_port_min<1024?"RTP port min must be at least 1024":a.rtp_port_max>65535?"RTP port max must be at most 65535":a.rtp_port_min>=a.rtp_port_max?"RTP port min must be less than max":null;case 3:{if(!a.skip_trunk){if(!a.trunk_name.trim())return"Trunk name is required";if(!a.trunk_host.trim())return"Trunk host is required"}return null}case 4:{if(!a.skip_extension){if(!a.ext_number.trim())return"Extension number is required";if(!a.ext_name.trim())return"Display name is required";if(a.ext_password.length<8)return"SIP password must be at least 8 characters"}return null}default:return null}}function y(_){_.preventDefault();const R=x();if(R){c(R);return}c(""),o(b=>b+1)}function g(){c(""),o(_=>_-1)}async function w(_){_.preventDefault(),c(""),m(!0);try{await Pb({admin_username:a.admin_username.trim(),admin_password:a.admin_password,hostname:a.hostname.trim(),sip_port:a.sip_port,sip_tls_port:a.sip_tls_port,rtp_port_min:a.rtp_port_min,rtp_port_max:a.rtp_port_max}),e("/login",{replace:!0})}catch(R){R instanceof Ue?c(R.message):c("unable to connect to server")}finally{m(!1)}}function j(){switch(r){case 0:return s.jsxs("div",{className:"space-y-4",children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Create the initial administrator account."}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"admin_username",className:Nt,children:"Username"}),s.jsx("input",{id:"admin_username",type:"text",required:!0,autoComplete:"username",autoFocus:!0,value:a.admin_username,onChange:_=>h("admin_username",_.target.value),className:_t})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"admin_password",className:Nt,children:"Password"}),s.jsx("input",{id:"admin_password",type:"password",required:!0,autoComplete:"new-password",value:a.admin_password,onChange:_=>h("admin_password",_.target.value),className:_t,placeholder:"Minimum 8 characters"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"admin_password_confirm",className:Nt,children:"Confirm Password"}),s.jsx("input",{id:"admin_password_confirm",type:"password",required:!0,autoComplete:"new-password",value:a.admin_password_confirm,onChange:_=>h("admin_password_confirm",_.target.value),className:_t})]})]});case 1:return s.jsxs("div",{className:"space-y-4",children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Enter the hostname or public IP address that SIP devices and trunks will use to reach this PBX."}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"hostname",className:Nt,children:"Hostname / External IP"}),s.jsx("input",{id:"hostname",type:"text",required:!0,autoFocus:!0,value:a.hostname,onChange:_=>h("hostname",_.target.value),className:_t,placeholder:"pbx.example.com or 203.0.113.10"})]})]});case 2:return s.jsxs("div",{className:"space-y-4",children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Configure SIP signaling and RTP media port ranges. Defaults work for most installations."}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"sip_port",className:Nt,children:"SIP UDP/TCP Port"}),s.jsx("input",{id:"sip_port",type:"number",required:!0,autoFocus:!0,min:1,max:65535,value:a.sip_port,onChange:_=>h("sip_port",Number(_.target.value)),className:_t})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"sip_tls_port",className:Nt,children:"SIP TLS Port"}),s.jsx("input",{id:"sip_tls_port",type:"number",required:!0,min:1,max:65535,value:a.sip_tls_port,onChange:_=>h("sip_tls_port",Number(_.target.value)),className:_t})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"rtp_port_min",className:Nt,children:"RTP Port Min"}),s.jsx("input",{id:"rtp_port_min",type:"number",required:!0,min:1024,max:65535,value:a.rtp_port_min,onChange:_=>h("rtp_port_min",Number(_.target.value)),className:_t})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"rtp_port_max",className:Nt,children:"RTP Port Max"}),s.jsx("input",{id:"rtp_port_max",type:"number",required:!0,min:1024,max:65535,value:a.rtp_port_max,onChange:_=>h("rtp_port_max",Number(_.target.value)),className:_t})]})]})]});case 3:return s.jsxs("div",{className:"space-y-4",children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Optionally configure your first SIP trunk to connect to an upstream provider."}),s.jsxs("label",{className:"flex items-center gap-2 text-sm text-gray-700",children:[s.jsx("input",{type:"checkbox",checked:a.skip_trunk,onChange:_=>h("skip_trunk",_.target.checked),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),"Skip  I'll add a trunk later"]}),!a.skip_trunk&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"trunk_name",className:Nt,children:"Trunk Name"}),s.jsx("input",{id:"trunk_name",type:"text",value:a.trunk_name,onChange:_=>h("trunk_name",_.target.value),className:_t,placeholder:"My SIP Provider"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"trunk_host",className:Nt,children:"Host"}),s.jsx("input",{id:"trunk_host",type:"text",value:a.trunk_host,onChange:_=>h("trunk_host",_.target.value),className:_t,placeholder:"sip.provider.com"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"trunk_port",className:Nt,children:"Port"}),s.jsx("input",{id:"trunk_port",type:"number",min:1,max:65535,value:a.trunk_port,onChange:_=>h("trunk_port",Number(_.target.value)),className:_t})]})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"trunk_transport",className:Nt,children:"Transport"}),s.jsxs("select",{id:"trunk_transport",value:a.trunk_transport,onChange:_=>h("trunk_transport",_.target.value),className:_t,children:[s.jsx("option",{value:"udp",children:"UDP"}),s.jsx("option",{value:"tcp",children:"TCP"}),s.jsx("option",{value:"tls",children:"TLS"})]})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"trunk_username",className:Nt,children:"Username"}),s.jsx("input",{id:"trunk_username",type:"text",value:a.trunk_username,onChange:_=>h("trunk_username",_.target.value),className:_t,autoComplete:"off"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"trunk_password",className:Nt,children:"Password"}),s.jsx("input",{id:"trunk_password",type:"password",value:a.trunk_password,onChange:_=>h("trunk_password",_.target.value),className:_t,autoComplete:"off"})]})]})]});case 4:return s.jsxs("div",{className:"space-y-4",children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Optionally create your first extension so a phone can register immediately."}),s.jsxs("label",{className:"flex items-center gap-2 text-sm text-gray-700",children:[s.jsx("input",{type:"checkbox",checked:a.skip_extension,onChange:_=>h("skip_extension",_.target.checked),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),"Skip  I'll add extensions later"]}),!a.skip_extension&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"ext_number",className:Nt,children:"Extension Number"}),s.jsx("input",{id:"ext_number",type:"text",value:a.ext_number,onChange:_=>h("ext_number",_.target.value),className:_t,placeholder:"100"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"ext_name",className:Nt,children:"Display Name"}),s.jsx("input",{id:"ext_name",type:"text",value:a.ext_name,onChange:_=>h("ext_name",_.target.value),className:_t,placeholder:"John Smith"})]})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"ext_password",className:Nt,children:"SIP Password"}),s.jsx("input",{id:"ext_password",type:"password",value:a.ext_password,onChange:_=>h("ext_password",_.target.value),className:_t,placeholder:"Minimum 8 characters",autoComplete:"off"})]})]})]});case 5:return s.jsxs("div",{className:"space-y-4",children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Enter your FlowPBX license key, or skip to use the free tier."}),s.jsxs("label",{className:"flex items-center gap-2 text-sm text-gray-700",children:[s.jsx("input",{type:"checkbox",checked:a.skip_license,onChange:_=>h("skip_license",_.target.checked),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),"Skip  use free tier"]}),!a.skip_license&&s.jsxs("div",{children:[s.jsx("label",{htmlFor:"license_key",className:Nt,children:"License Key"}),s.jsx("input",{id:"license_key",type:"text",value:a.license_key,onChange:_=>h("license_key",_.target.value),className:_t,placeholder:"XXXX-XXXX-XXXX-XXXX",autoComplete:"off"})]})]});case 6:return s.jsxs("div",{className:"space-y-4",children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Review your settings before completing setup."}),s.jsxs("dl",{className:"divide-y divide-gray-100 text-sm",children:[s.jsx(Qr,{label:"Admin Username",value:a.admin_username}),s.jsx(Qr,{label:"Hostname",value:a.hostname}),s.jsx(Qr,{label:"SIP Port",value:String(a.sip_port)}),s.jsx(Qr,{label:"SIP TLS Port",value:String(a.sip_tls_port)}),s.jsx(Qr,{label:"RTP Ports",value:`${a.rtp_port_min}  ${a.rtp_port_max}`}),s.jsx(Qr,{label:"First Trunk",value:a.skip_trunk?"Skipped":`${a.trunk_name} (${a.trunk_host})`}),s.jsx(Qr,{label:"First Extension",value:a.skip_extension?"Skipped":`${a.ext_number}  ${a.ext_name}`}),s.jsx(Qr,{label:"License",value:a.skip_license?"Free tier":a.license_key||"(empty)"})]})]})}}const E=r===qs.length-1,S=E?w:y;return s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center px-4",children:s.jsxs("div",{className:"w-full max-w-lg",children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900 tracking-tight",children:"FlowPBX Setup"}),s.jsxs("p",{className:"mt-1 text-sm text-gray-500",children:["Step ",r+1," of ",qs.length]})]}),s.jsx("div",{className:"mb-6",children:s.jsx("div",{className:"flex gap-1",children:qs.map((_,R)=>s.jsx("div",{className:`h-1 flex-1 rounded-full transition-colors ${R<=r?"bg-blue-600":"bg-gray-200"}`},R))})}),s.jsxs("form",{onSubmit:S,className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:qs[r]}),u&&s.jsx("div",{className:"rounded-md bg-red-50 border border-red-200 px-3 py-2 mb-4",children:s.jsx("p",{className:"text-sm text-red-700",children:u})}),j(),s.jsxs("div",{className:"flex justify-between mt-6 pt-4 border-t border-gray-100",children:[s.jsx("button",{type:"button",onClick:g,disabled:r===0,className:"rounded-md border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50 disabled:opacity-30 disabled:cursor-not-allowed transition-colors",children:"Back"}),s.jsx("button",{type:"submit",disabled:f,className:"rounded-md bg-blue-600 px-4 py-2 text-sm font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:E?f?"Finishing":"Finish Setup":"Next"})]})]})]})})}function Qr({label:e,value:r}){return s.jsxs("div",{className:"flex justify-between py-2",children:[s.jsx("dt",{className:"text-gray-500",children:e}),s.jsx("dd",{className:"font-medium text-gray-900",children:r})]})}const Db={active_calls:0,registered_devices:0,total_extensions:0,total_trunks:0,recent_cdrs:[]};function Lb(){const[e,r]=N.useState(Db),[o,a]=N.useState(!0);N.useEffect(()=>{let u=!1;return qt("/dashboard/stats").then(c=>{u||r(c)}).catch(()=>{}).finally(()=>{u||a(!1)}),()=>{u=!0}},[]);function l(u){const c=Math.floor(u/60),f=u%60;return`${c}:${f.toString().padStart(2,"0")}`}return s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Dashboard"}),s.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"System overview and recent activity."}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mt-6",children:[s.jsx(Js,{label:"Active Calls",value:e.active_calls,loading:o,color:"blue"}),s.jsx(Js,{label:"Registered Devices",value:e.registered_devices,loading:o,color:"green"}),s.jsx(Js,{label:"Extensions",value:e.total_extensions,loading:o,color:"gray"}),s.jsx(Js,{label:"Trunks",value:e.total_trunks,loading:o,color:"gray"})]}),s.jsxs("div",{className:"mt-8",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Recent Calls"}),s.jsx("div",{className:"overflow-x-auto border border-gray-200 rounded-lg",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-2.5 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Time"}),s.jsx("th",{className:"px-4 py-2.5 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Direction"}),s.jsx("th",{className:"px-4 py-2.5 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"From"}),s.jsx("th",{className:"px-4 py-2.5 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"To"}),s.jsx("th",{className:"px-4 py-2.5 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Duration"}),s.jsx("th",{className:"px-4 py-2.5 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:o?s.jsx("tr",{children:s.jsx("td",{colSpan:6,className:"px-4 py-8 text-center text-sm text-gray-400",children:"Loading..."})}):e.recent_cdrs.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:6,className:"px-4 py-8 text-center text-sm text-gray-400",children:"No recent calls."})}):e.recent_cdrs.map(u=>s.jsxs("tr",{children:[s.jsx("td",{className:"px-4 py-2.5 text-sm text-gray-900 whitespace-nowrap",children:new Date(u.timestamp).toLocaleString()}),s.jsx("td",{className:"px-4 py-2.5 text-sm text-gray-900",children:s.jsx(Ib,{direction:u.direction})}),s.jsx("td",{className:"px-4 py-2.5 text-sm text-gray-900",children:u.caller}),s.jsx("td",{className:"px-4 py-2.5 text-sm text-gray-900",children:u.callee}),s.jsx("td",{className:"px-4 py-2.5 text-sm text-gray-900",children:l(u.duration)}),s.jsx("td",{className:"px-4 py-2.5 text-sm",children:s.jsx(zb,{status:u.status})})]},u.id))})]})})]})]})}function Js({label:e,value:r,loading:o,color:a}){const l={blue:"text-blue-600",green:"text-green-600",gray:"text-gray-900"};return s.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:e}),s.jsx("p",{className:`mt-1 text-2xl font-bold ${l[a]}`,children:o?"":r})]})}function Ib({direction:e}){const r=e==="inbound";return s.jsx("span",{className:`inline-flex items-center rounded-full px-2 py-0.5 text-xs font-medium ${r?"bg-blue-50 text-blue-700":"bg-gray-100 text-gray-700"}`,children:r?"In":"Out"})}function zb({status:e}){const r={answered:"bg-green-50 text-green-700",missed:"bg-red-50 text-red-700",busy:"bg-yellow-50 text-yellow-700",failed:"bg-red-50 text-red-700"};return s.jsx("span",{className:`inline-flex items-center rounded-full px-2 py-0.5 text-xs font-medium ${r[e]??"bg-gray-100 text-gray-700"}`,children:e})}function gt(e){if(typeof e=="string"||typeof e=="number")return""+e;let r="";if(Array.isArray(e))for(let o=0,a;o<e.length;o++)(a=gt(e[o]))!==""&&(r+=(r&&" ")+a);else for(let o in e)e[o]&&(r+=(r&&" ")+o);return r}var Ab={value:()=>{}};function Ll(){for(var e=0,r=arguments.length,o={},a;e<r;++e){if(!(a=arguments[e]+"")||a in o||/[\s.]/.test(a))throw new Error("illegal type: "+a);o[a]=[]}return new hl(o)}function hl(e){this._=e}function $b(e,r){return e.trim().split(/^|\s+/).map(function(o){var a="",l=o.indexOf(".");if(l>=0&&(a=o.slice(l+1),o=o.slice(0,l)),o&&!r.hasOwnProperty(o))throw new Error("unknown type: "+o);return{type:o,name:a}})}hl.prototype=Ll.prototype={constructor:hl,on:function(e,r){var o=this._,a=$b(e+"",o),l,u=-1,c=a.length;if(arguments.length<2){for(;++u<c;)if((l=(e=a[u]).type)&&(l=Fb(o[l],e.name)))return l;return}if(r!=null&&typeof r!="function")throw new Error("invalid callback: "+r);for(;++u<c;)if(l=(e=a[u]).type)o[l]=Jm(o[l],e.name,r);else if(r==null)for(l in o)o[l]=Jm(o[l],e.name,null);return this},copy:function(){var e={},r=this._;for(var o in r)e[o]=r[o].slice();return new hl(e)},call:function(e,r){if((l=arguments.length-2)>0)for(var o=new Array(l),a=0,l,u;a<l;++a)o[a]=arguments[a+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(u=this._[e],a=0,l=u.length;a<l;++a)u[a].value.apply(r,o)},apply:function(e,r,o){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var a=this._[e],l=0,u=a.length;l<u;++l)a[l].value.apply(r,o)}};function Fb(e,r){for(var o=0,a=e.length,l;o<a;++o)if((l=e[o]).name===r)return l.value}function Jm(e,r,o){for(var a=0,l=e.length;a<l;++a)if(e[a].name===r){e[a]=Ab,e=e.slice(0,a).concat(e.slice(a+1));break}return o!=null&&e.push({name:r,value:o}),e}var qc="http://www.w3.org/1999/xhtml";const ep={svg:"http://www.w3.org/2000/svg",xhtml:qc,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Il(e){var r=e+="",o=r.indexOf(":");return o>=0&&(r=e.slice(0,o))!=="xmlns"&&(e=e.slice(o+1)),ep.hasOwnProperty(r)?{space:ep[r],local:e}:e}function Ob(e){return function(){var r=this.ownerDocument,o=this.namespaceURI;return o===qc&&r.documentElement.namespaceURI===qc?r.createElement(e):r.createElementNS(o,e)}}function Hb(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function J0(e){var r=Il(e);return(r.local?Hb:Ob)(r)}function Bb(){}function jd(e){return e==null?Bb:function(){return this.querySelector(e)}}function Vb(e){typeof e!="function"&&(e=jd(e));for(var r=this._groups,o=r.length,a=new Array(o),l=0;l<o;++l)for(var u=r[l],c=u.length,f=a[l]=new Array(c),m,h,x=0;x<c;++x)(m=u[x])&&(h=e.call(m,m.__data__,x,u))&&("__data__"in m&&(h.__data__=m.__data__),f[x]=h);return new cn(a,this._parents)}function Ub(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function Wb(){return[]}function eg(e){return e==null?Wb:function(){return this.querySelectorAll(e)}}function Xb(e){return function(){return Ub(e.apply(this,arguments))}}function Yb(e){typeof e=="function"?e=Xb(e):e=eg(e);for(var r=this._groups,o=r.length,a=[],l=[],u=0;u<o;++u)for(var c=r[u],f=c.length,m,h=0;h<f;++h)(m=c[h])&&(a.push(e.call(m,m.__data__,h,c)),l.push(m));return new cn(a,l)}function tg(e){return function(){return this.matches(e)}}function ng(e){return function(r){return r.matches(e)}}var Kb=Array.prototype.find;function Gb(e){return function(){return Kb.call(this.children,e)}}function Zb(){return this.firstElementChild}function Qb(e){return this.select(e==null?Zb:Gb(typeof e=="function"?e:ng(e)))}var qb=Array.prototype.filter;function Jb(){return Array.from(this.children)}function e2(e){return function(){return qb.call(this.children,e)}}function t2(e){return this.selectAll(e==null?Jb:e2(typeof e=="function"?e:ng(e)))}function n2(e){typeof e!="function"&&(e=tg(e));for(var r=this._groups,o=r.length,a=new Array(o),l=0;l<o;++l)for(var u=r[l],c=u.length,f=a[l]=[],m,h=0;h<c;++h)(m=u[h])&&e.call(m,m.__data__,h,u)&&f.push(m);return new cn(a,this._parents)}function rg(e){return new Array(e.length)}function r2(){return new cn(this._enter||this._groups.map(rg),this._parents)}function vl(e,r){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=r}vl.prototype={constructor:vl,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,r){return this._parent.insertBefore(e,r)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function o2(e){return function(){return e}}function i2(e,r,o,a,l,u){for(var c=0,f,m=r.length,h=u.length;c<h;++c)(f=r[c])?(f.__data__=u[c],a[c]=f):o[c]=new vl(e,u[c]);for(;c<m;++c)(f=r[c])&&(l[c]=f)}function a2(e,r,o,a,l,u,c){var f,m,h=new Map,x=r.length,y=u.length,g=new Array(x),w;for(f=0;f<x;++f)(m=r[f])&&(g[f]=w=c.call(m,m.__data__,f,r)+"",h.has(w)?l[f]=m:h.set(w,m));for(f=0;f<y;++f)w=c.call(e,u[f],f,u)+"",(m=h.get(w))?(a[f]=m,m.__data__=u[f],h.delete(w)):o[f]=new vl(e,u[f]);for(f=0;f<x;++f)(m=r[f])&&h.get(g[f])===m&&(l[f]=m)}function s2(e){return e.__data__}function l2(e,r){if(!arguments.length)return Array.from(this,s2);var o=r?a2:i2,a=this._parents,l=this._groups;typeof e!="function"&&(e=o2(e));for(var u=l.length,c=new Array(u),f=new Array(u),m=new Array(u),h=0;h<u;++h){var x=a[h],y=l[h],g=y.length,w=u2(e.call(x,x&&x.__data__,h,a)),j=w.length,E=f[h]=new Array(j),S=c[h]=new Array(j),_=m[h]=new Array(g);o(x,y,E,S,_,w,r);for(var R=0,b=0,P,$;R<j;++R)if(P=E[R]){for(R>=b&&(b=R+1);!($=S[b])&&++b<j;);P._next=$||null}}return c=new cn(c,a),c._enter=f,c._exit=m,c}function u2(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function c2(){return new cn(this._exit||this._groups.map(rg),this._parents)}function d2(e,r,o){var a=this.enter(),l=this,u=this.exit();return typeof e=="function"?(a=e(a),a&&(a=a.selection())):a=a.append(e+""),r!=null&&(l=r(l),l&&(l=l.selection())),o==null?u.remove():o(u),a&&l?a.merge(l).order():l}function f2(e){for(var r=e.selection?e.selection():e,o=this._groups,a=r._groups,l=o.length,u=a.length,c=Math.min(l,u),f=new Array(l),m=0;m<c;++m)for(var h=o[m],x=a[m],y=h.length,g=f[m]=new Array(y),w,j=0;j<y;++j)(w=h[j]||x[j])&&(g[j]=w);for(;m<l;++m)f[m]=o[m];return new cn(f,this._parents)}function h2(){for(var e=this._groups,r=-1,o=e.length;++r<o;)for(var a=e[r],l=a.length-1,u=a[l],c;--l>=0;)(c=a[l])&&(u&&c.compareDocumentPosition(u)^4&&u.parentNode.insertBefore(c,u),u=c);return this}function m2(e){e||(e=p2);function r(y,g){return y&&g?e(y.__data__,g.__data__):!y-!g}for(var o=this._groups,a=o.length,l=new Array(a),u=0;u<a;++u){for(var c=o[u],f=c.length,m=l[u]=new Array(f),h,x=0;x<f;++x)(h=c[x])&&(m[x]=h);m.sort(r)}return new cn(l,this._parents).order()}function p2(e,r){return e<r?-1:e>r?1:e>=r?0:NaN}function g2(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function x2(){return Array.from(this)}function y2(){for(var e=this._groups,r=0,o=e.length;r<o;++r)for(var a=e[r],l=0,u=a.length;l<u;++l){var c=a[l];if(c)return c}return null}function v2(){let e=0;for(const r of this)++e;return e}function w2(){return!this.node()}function b2(e){for(var r=this._groups,o=0,a=r.length;o<a;++o)for(var l=r[o],u=0,c=l.length,f;u<c;++u)(f=l[u])&&e.call(f,f.__data__,u,l);return this}function _2(e){return function(){this.removeAttribute(e)}}function N2(e){return function(){this.removeAttributeNS(e.space,e.local)}}function S2(e,r){return function(){this.setAttribute(e,r)}}function j2(e,r){return function(){this.setAttributeNS(e.space,e.local,r)}}function k2(e,r){return function(){var o=r.apply(this,arguments);o==null?this.removeAttribute(e):this.setAttribute(e,o)}}function E2(e,r){return function(){var o=r.apply(this,arguments);o==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,o)}}function C2(e,r){var o=Il(e);if(arguments.length<2){var a=this.node();return o.local?a.getAttributeNS(o.space,o.local):a.getAttribute(o)}return this.each((r==null?o.local?N2:_2:typeof r=="function"?o.local?E2:k2:o.local?j2:S2)(o,r))}function og(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function P2(e){return function(){this.style.removeProperty(e)}}function R2(e,r,o){return function(){this.style.setProperty(e,r,o)}}function M2(e,r,o){return function(){var a=r.apply(this,arguments);a==null?this.style.removeProperty(e):this.style.setProperty(e,a,o)}}function T2(e,r,o){return arguments.length>1?this.each((r==null?P2:typeof r=="function"?M2:R2)(e,r,o??"")):bi(this.node(),e)}function bi(e,r){return e.style.getPropertyValue(r)||og(e).getComputedStyle(e,null).getPropertyValue(r)}function D2(e){return function(){delete this[e]}}function L2(e,r){return function(){this[e]=r}}function I2(e,r){return function(){var o=r.apply(this,arguments);o==null?delete this[e]:this[e]=o}}function z2(e,r){return arguments.length>1?this.each((r==null?D2:typeof r=="function"?I2:L2)(e,r)):this.node()[e]}function ig(e){return e.trim().split(/^|\s+/)}function kd(e){return e.classList||new ag(e)}function ag(e){this._node=e,this._names=ig(e.getAttribute("class")||"")}ag.prototype={add:function(e){var r=this._names.indexOf(e);r<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var r=this._names.indexOf(e);r>=0&&(this._names.splice(r,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function sg(e,r){for(var o=kd(e),a=-1,l=r.length;++a<l;)o.add(r[a])}function lg(e,r){for(var o=kd(e),a=-1,l=r.length;++a<l;)o.remove(r[a])}function A2(e){return function(){sg(this,e)}}function $2(e){return function(){lg(this,e)}}function F2(e,r){return function(){(r.apply(this,arguments)?sg:lg)(this,e)}}function O2(e,r){var o=ig(e+"");if(arguments.length<2){for(var a=kd(this.node()),l=-1,u=o.length;++l<u;)if(!a.contains(o[l]))return!1;return!0}return this.each((typeof r=="function"?F2:r?A2:$2)(o,r))}function H2(){this.textContent=""}function B2(e){return function(){this.textContent=e}}function V2(e){return function(){var r=e.apply(this,arguments);this.textContent=r??""}}function U2(e){return arguments.length?this.each(e==null?H2:(typeof e=="function"?V2:B2)(e)):this.node().textContent}function W2(){this.innerHTML=""}function X2(e){return function(){this.innerHTML=e}}function Y2(e){return function(){var r=e.apply(this,arguments);this.innerHTML=r??""}}function K2(e){return arguments.length?this.each(e==null?W2:(typeof e=="function"?Y2:X2)(e)):this.node().innerHTML}function G2(){this.nextSibling&&this.parentNode.appendChild(this)}function Z2(){return this.each(G2)}function Q2(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function q2(){return this.each(Q2)}function J2(e){var r=typeof e=="function"?e:J0(e);return this.select(function(){return this.appendChild(r.apply(this,arguments))})}function e_(){return null}function t_(e,r){var o=typeof e=="function"?e:J0(e),a=r==null?e_:typeof r=="function"?r:jd(r);return this.select(function(){return this.insertBefore(o.apply(this,arguments),a.apply(this,arguments)||null)})}function n_(){var e=this.parentNode;e&&e.removeChild(this)}function r_(){return this.each(n_)}function o_(){var e=this.cloneNode(!1),r=this.parentNode;return r?r.insertBefore(e,this.nextSibling):e}function i_(){var e=this.cloneNode(!0),r=this.parentNode;return r?r.insertBefore(e,this.nextSibling):e}function a_(e){return this.select(e?i_:o_)}function s_(e){return arguments.length?this.property("__data__",e):this.node().__data__}function l_(e){return function(r){e.call(this,r,this.__data__)}}function u_(e){return e.trim().split(/^|\s+/).map(function(r){var o="",a=r.indexOf(".");return a>=0&&(o=r.slice(a+1),r=r.slice(0,a)),{type:r,name:o}})}function c_(e){return function(){var r=this.__on;if(r){for(var o=0,a=-1,l=r.length,u;o<l;++o)u=r[o],(!e.type||u.type===e.type)&&u.name===e.name?this.removeEventListener(u.type,u.listener,u.options):r[++a]=u;++a?r.length=a:delete this.__on}}}function d_(e,r,o){return function(){var a=this.__on,l,u=l_(r);if(a){for(var c=0,f=a.length;c<f;++c)if((l=a[c]).type===e.type&&l.name===e.name){this.removeEventListener(l.type,l.listener,l.options),this.addEventListener(l.type,l.listener=u,l.options=o),l.value=r;return}}this.addEventListener(e.type,u,o),l={type:e.type,name:e.name,value:r,listener:u,options:o},a?a.push(l):this.__on=[l]}}function f_(e,r,o){var a=u_(e+""),l,u=a.length,c;if(arguments.length<2){var f=this.node().__on;if(f){for(var m=0,h=f.length,x;m<h;++m)for(l=0,x=f[m];l<u;++l)if((c=a[l]).type===x.type&&c.name===x.name)return x.value}return}for(f=r?d_:c_,l=0;l<u;++l)this.each(f(a[l],r,o));return this}function ug(e,r,o){var a=og(e),l=a.CustomEvent;typeof l=="function"?l=new l(r,o):(l=a.document.createEvent("Event"),o?(l.initEvent(r,o.bubbles,o.cancelable),l.detail=o.detail):l.initEvent(r,!1,!1)),e.dispatchEvent(l)}function h_(e,r){return function(){return ug(this,e,r)}}function m_(e,r){return function(){return ug(this,e,r.apply(this,arguments))}}function p_(e,r){return this.each((typeof r=="function"?m_:h_)(e,r))}function*g_(){for(var e=this._groups,r=0,o=e.length;r<o;++r)for(var a=e[r],l=0,u=a.length,c;l<u;++l)(c=a[l])&&(yield c)}var cg=[null];function cn(e,r){this._groups=e,this._parents=r}function Fa(){return new cn([[document.documentElement]],cg)}function x_(){return this}cn.prototype=Fa.prototype={constructor:cn,select:Vb,selectAll:Yb,selectChild:Qb,selectChildren:t2,filter:n2,data:l2,enter:r2,exit:c2,join:d2,merge:f2,selection:x_,order:h2,sort:m2,call:g2,nodes:x2,node:y2,size:v2,empty:w2,each:b2,attr:C2,style:T2,property:z2,classed:O2,text:U2,html:K2,raise:Z2,lower:q2,append:J2,insert:t_,remove:r_,clone:a_,datum:s_,on:f_,dispatch:p_,[Symbol.iterator]:g_};function un(e){return typeof e=="string"?new cn([[document.querySelector(e)]],[document.documentElement]):new cn([[e]],cg)}function y_(e){let r;for(;r=e.sourceEvent;)e=r;return e}function Fn(e,r){if(e=y_(e),r===void 0&&(r=e.currentTarget),r){var o=r.ownerSVGElement||r;if(o.createSVGPoint){var a=o.createSVGPoint();return a.x=e.clientX,a.y=e.clientY,a=a.matrixTransform(r.getScreenCTM().inverse()),[a.x,a.y]}if(r.getBoundingClientRect){var l=r.getBoundingClientRect();return[e.clientX-l.left-r.clientLeft,e.clientY-l.top-r.clientTop]}}return[e.pageX,e.pageY]}const v_={passive:!1},Sa={capture:!0,passive:!1};function Lc(e){e.stopImmediatePropagation()}function vi(e){e.preventDefault(),e.stopImmediatePropagation()}function dg(e){var r=e.document.documentElement,o=un(e).on("dragstart.drag",vi,Sa);"onselectstart"in r?o.on("selectstart.drag",vi,Sa):(r.__noselect=r.style.MozUserSelect,r.style.MozUserSelect="none")}function fg(e,r){var o=e.document.documentElement,a=un(e).on("dragstart.drag",null);r&&(a.on("click.drag",vi,Sa),setTimeout(function(){a.on("click.drag",null)},0)),"onselectstart"in o?a.on("selectstart.drag",null):(o.style.MozUserSelect=o.__noselect,delete o.__noselect)}const el=e=>()=>e;function Jc(e,{sourceEvent:r,subject:o,target:a,identifier:l,active:u,x:c,y:f,dx:m,dy:h,dispatch:x}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:r,enumerable:!0,configurable:!0},subject:{value:o,enumerable:!0,configurable:!0},target:{value:a,enumerable:!0,configurable:!0},identifier:{value:l,enumerable:!0,configurable:!0},active:{value:u,enumerable:!0,configurable:!0},x:{value:c,enumerable:!0,configurable:!0},y:{value:f,enumerable:!0,configurable:!0},dx:{value:m,enumerable:!0,configurable:!0},dy:{value:h,enumerable:!0,configurable:!0},_:{value:x}})}Jc.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function w_(e){return!e.ctrlKey&&!e.button}function b_(){return this.parentNode}function __(e,r){return r??{x:e.x,y:e.y}}function N_(){return navigator.maxTouchPoints||"ontouchstart"in this}function hg(){var e=w_,r=b_,o=__,a=N_,l={},u=Ll("start","drag","end"),c=0,f,m,h,x,y=0;function g(P){P.on("mousedown.drag",w).filter(a).on("touchstart.drag",S).on("touchmove.drag",_,v_).on("touchend.drag touchcancel.drag",R).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function w(P,$){if(!(x||!e.call(this,P,$))){var D=b(this,r.call(this,P,$),P,$,"mouse");D&&(un(P.view).on("mousemove.drag",j,Sa).on("mouseup.drag",E,Sa),dg(P.view),Lc(P),h=!1,f=P.clientX,m=P.clientY,D("start",P))}}function j(P){if(vi(P),!h){var $=P.clientX-f,D=P.clientY-m;h=$*$+D*D>y}l.mouse("drag",P)}function E(P){un(P.view).on("mousemove.drag mouseup.drag",null),fg(P.view,h),vi(P),l.mouse("end",P)}function S(P,$){if(e.call(this,P,$)){var D=P.changedTouches,M=r.call(this,P,$),H=D.length,Y,B;for(Y=0;Y<H;++Y)(B=b(this,M,P,$,D[Y].identifier,D[Y]))&&(Lc(P),B("start",P,D[Y]))}}function _(P){var $=P.changedTouches,D=$.length,M,H;for(M=0;M<D;++M)(H=l[$[M].identifier])&&(vi(P),H("drag",P,$[M]))}function R(P){var $=P.changedTouches,D=$.length,M,H;for(x&&clearTimeout(x),x=setTimeout(function(){x=null},500),M=0;M<D;++M)(H=l[$[M].identifier])&&(Lc(P),H("end",P,$[M]))}function b(P,$,D,M,H,Y){var B=u.copy(),I=Fn(Y||D,$),F,L,k;if((k=o.call(P,new Jc("beforestart",{sourceEvent:D,target:g,identifier:H,active:c,x:I[0],y:I[1],dx:0,dy:0,dispatch:B}),M))!=null)return F=k.x-I[0]||0,L=k.y-I[1]||0,function A(X,Q,O){var K=I,z;switch(X){case"start":l[H]=A,z=c++;break;case"end":delete l[H],--c;case"drag":I=Fn(O||Q,$),z=c;break}B.call(X,P,new Jc(X,{sourceEvent:Q,subject:k,target:g,identifier:H,active:z,x:I[0]+F,y:I[1]+L,dx:I[0]-K[0],dy:I[1]-K[1],dispatch:B}),M)}}return g.filter=function(P){return arguments.length?(e=typeof P=="function"?P:el(!!P),g):e},g.container=function(P){return arguments.length?(r=typeof P=="function"?P:el(P),g):r},g.subject=function(P){return arguments.length?(o=typeof P=="function"?P:el(P),g):o},g.touchable=function(P){return arguments.length?(a=typeof P=="function"?P:el(!!P),g):a},g.on=function(){var P=u.on.apply(u,arguments);return P===u?g:P},g.clickDistance=function(P){return arguments.length?(y=(P=+P)*P,g):Math.sqrt(y)},g}function Ed(e,r,o){e.prototype=r.prototype=o,o.constructor=e}function mg(e,r){var o=Object.create(e.prototype);for(var a in r)o[a]=r[a];return o}function Oa(){}var ja=.7,wl=1/ja,wi="\\s*([+-]?\\d+)\\s*",ka="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",nr="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",S_=/^#([0-9a-f]{3,8})$/,j_=new RegExp(`^rgb\\(${wi},${wi},${wi}\\)$`),k_=new RegExp(`^rgb\\(${nr},${nr},${nr}\\)$`),E_=new RegExp(`^rgba\\(${wi},${wi},${wi},${ka}\\)$`),C_=new RegExp(`^rgba\\(${nr},${nr},${nr},${ka}\\)$`),P_=new RegExp(`^hsl\\(${ka},${nr},${nr}\\)$`),R_=new RegExp(`^hsla\\(${ka},${nr},${nr},${ka}\\)$`),tp={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Ed(Oa,To,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:np,formatHex:np,formatHex8:M_,formatHsl:T_,formatRgb:rp,toString:rp});function np(){return this.rgb().formatHex()}function M_(){return this.rgb().formatHex8()}function T_(){return pg(this).formatHsl()}function rp(){return this.rgb().formatRgb()}function To(e){var r,o;return e=(e+"").trim().toLowerCase(),(r=S_.exec(e))?(o=r[1].length,r=parseInt(r[1],16),o===6?op(r):o===3?new Qt(r>>8&15|r>>4&240,r>>4&15|r&240,(r&15)<<4|r&15,1):o===8?tl(r>>24&255,r>>16&255,r>>8&255,(r&255)/255):o===4?tl(r>>12&15|r>>8&240,r>>8&15|r>>4&240,r>>4&15|r&240,((r&15)<<4|r&15)/255):null):(r=j_.exec(e))?new Qt(r[1],r[2],r[3],1):(r=k_.exec(e))?new Qt(r[1]*255/100,r[2]*255/100,r[3]*255/100,1):(r=E_.exec(e))?tl(r[1],r[2],r[3],r[4]):(r=C_.exec(e))?tl(r[1]*255/100,r[2]*255/100,r[3]*255/100,r[4]):(r=P_.exec(e))?sp(r[1],r[2]/100,r[3]/100,1):(r=R_.exec(e))?sp(r[1],r[2]/100,r[3]/100,r[4]):tp.hasOwnProperty(e)?op(tp[e]):e==="transparent"?new Qt(NaN,NaN,NaN,0):null}function op(e){return new Qt(e>>16&255,e>>8&255,e&255,1)}function tl(e,r,o,a){return a<=0&&(e=r=o=NaN),new Qt(e,r,o,a)}function D_(e){return e instanceof Oa||(e=To(e)),e?(e=e.rgb(),new Qt(e.r,e.g,e.b,e.opacity)):new Qt}function ed(e,r,o,a){return arguments.length===1?D_(e):new Qt(e,r,o,a??1)}function Qt(e,r,o,a){this.r=+e,this.g=+r,this.b=+o,this.opacity=+a}Ed(Qt,ed,mg(Oa,{brighter(e){return e=e==null?wl:Math.pow(wl,e),new Qt(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?ja:Math.pow(ja,e),new Qt(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Qt(Co(this.r),Co(this.g),Co(this.b),bl(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:ip,formatHex:ip,formatHex8:L_,formatRgb:ap,toString:ap}));function ip(){return`#${Eo(this.r)}${Eo(this.g)}${Eo(this.b)}`}function L_(){return`#${Eo(this.r)}${Eo(this.g)}${Eo(this.b)}${Eo((isNaN(this.opacity)?1:this.opacity)*255)}`}function ap(){const e=bl(this.opacity);return`${e===1?"rgb(":"rgba("}${Co(this.r)}, ${Co(this.g)}, ${Co(this.b)}${e===1?")":`, ${e})`}`}function bl(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Co(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Eo(e){return e=Co(e),(e<16?"0":"")+e.toString(16)}function sp(e,r,o,a){return a<=0?e=r=o=NaN:o<=0||o>=1?e=r=NaN:r<=0&&(e=NaN),new On(e,r,o,a)}function pg(e){if(e instanceof On)return new On(e.h,e.s,e.l,e.opacity);if(e instanceof Oa||(e=To(e)),!e)return new On;if(e instanceof On)return e;e=e.rgb();var r=e.r/255,o=e.g/255,a=e.b/255,l=Math.min(r,o,a),u=Math.max(r,o,a),c=NaN,f=u-l,m=(u+l)/2;return f?(r===u?c=(o-a)/f+(o<a)*6:o===u?c=(a-r)/f+2:c=(r-o)/f+4,f/=m<.5?u+l:2-u-l,c*=60):f=m>0&&m<1?0:c,new On(c,f,m,e.opacity)}function I_(e,r,o,a){return arguments.length===1?pg(e):new On(e,r,o,a??1)}function On(e,r,o,a){this.h=+e,this.s=+r,this.l=+o,this.opacity=+a}Ed(On,I_,mg(Oa,{brighter(e){return e=e==null?wl:Math.pow(wl,e),new On(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?ja:Math.pow(ja,e),new On(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,r=isNaN(e)||isNaN(this.s)?0:this.s,o=this.l,a=o+(o<.5?o:1-o)*r,l=2*o-a;return new Qt(Ic(e>=240?e-240:e+120,l,a),Ic(e,l,a),Ic(e<120?e+240:e-120,l,a),this.opacity)},clamp(){return new On(lp(this.h),nl(this.s),nl(this.l),bl(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=bl(this.opacity);return`${e===1?"hsl(":"hsla("}${lp(this.h)}, ${nl(this.s)*100}%, ${nl(this.l)*100}%${e===1?")":`, ${e})`}`}}));function lp(e){return e=(e||0)%360,e<0?e+360:e}function nl(e){return Math.max(0,Math.min(1,e||0))}function Ic(e,r,o){return(e<60?r+(o-r)*e/60:e<180?o:e<240?r+(o-r)*(240-e)/60:r)*255}const Cd=e=>()=>e;function z_(e,r){return function(o){return e+o*r}}function A_(e,r,o){return e=Math.pow(e,o),r=Math.pow(r,o)-e,o=1/o,function(a){return Math.pow(e+a*r,o)}}function $_(e){return(e=+e)==1?gg:function(r,o){return o-r?A_(r,o,e):Cd(isNaN(r)?o:r)}}function gg(e,r){var o=r-e;return o?z_(e,o):Cd(isNaN(e)?r:e)}const _l=(function e(r){var o=$_(r);function a(l,u){var c=o((l=ed(l)).r,(u=ed(u)).r),f=o(l.g,u.g),m=o(l.b,u.b),h=gg(l.opacity,u.opacity);return function(x){return l.r=c(x),l.g=f(x),l.b=m(x),l.opacity=h(x),l+""}}return a.gamma=e,a})(1);function F_(e,r){r||(r=[]);var o=e?Math.min(r.length,e.length):0,a=r.slice(),l;return function(u){for(l=0;l<o;++l)a[l]=e[l]*(1-u)+r[l]*u;return a}}function O_(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function H_(e,r){var o=r?r.length:0,a=e?Math.min(o,e.length):0,l=new Array(a),u=new Array(o),c;for(c=0;c<a;++c)l[c]=va(e[c],r[c]);for(;c<o;++c)u[c]=r[c];return function(f){for(c=0;c<a;++c)u[c]=l[c](f);return u}}function B_(e,r){var o=new Date;return e=+e,r=+r,function(a){return o.setTime(e*(1-a)+r*a),o}}function er(e,r){return e=+e,r=+r,function(o){return e*(1-o)+r*o}}function V_(e,r){var o={},a={},l;(e===null||typeof e!="object")&&(e={}),(r===null||typeof r!="object")&&(r={});for(l in r)l in e?o[l]=va(e[l],r[l]):a[l]=r[l];return function(u){for(l in o)a[l]=o[l](u);return a}}var td=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,zc=new RegExp(td.source,"g");function U_(e){return function(){return e}}function W_(e){return function(r){return e(r)+""}}function xg(e,r){var o=td.lastIndex=zc.lastIndex=0,a,l,u,c=-1,f=[],m=[];for(e=e+"",r=r+"";(a=td.exec(e))&&(l=zc.exec(r));)(u=l.index)>o&&(u=r.slice(o,u),f[c]?f[c]+=u:f[++c]=u),(a=a[0])===(l=l[0])?f[c]?f[c]+=l:f[++c]=l:(f[++c]=null,m.push({i:c,x:er(a,l)})),o=zc.lastIndex;return o<r.length&&(u=r.slice(o),f[c]?f[c]+=u:f[++c]=u),f.length<2?m[0]?W_(m[0].x):U_(r):(r=m.length,function(h){for(var x=0,y;x<r;++x)f[(y=m[x]).i]=y.x(h);return f.join("")})}function va(e,r){var o=typeof r,a;return r==null||o==="boolean"?Cd(r):(o==="number"?er:o==="string"?(a=To(r))?(r=a,_l):xg:r instanceof To?_l:r instanceof Date?B_:O_(r)?F_:Array.isArray(r)?H_:typeof r.valueOf!="function"&&typeof r.toString!="function"||isNaN(r)?V_:er)(e,r)}var up=180/Math.PI,nd={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function yg(e,r,o,a,l,u){var c,f,m;return(c=Math.sqrt(e*e+r*r))&&(e/=c,r/=c),(m=e*o+r*a)&&(o-=e*m,a-=r*m),(f=Math.sqrt(o*o+a*a))&&(o/=f,a/=f,m/=f),e*a<r*o&&(e=-e,r=-r,m=-m,c=-c),{translateX:l,translateY:u,rotate:Math.atan2(r,e)*up,skewX:Math.atan(m)*up,scaleX:c,scaleY:f}}var rl;function X_(e){const r=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return r.isIdentity?nd:yg(r.a,r.b,r.c,r.d,r.e,r.f)}function Y_(e){return e==null||(rl||(rl=document.createElementNS("http://www.w3.org/2000/svg","g")),rl.setAttribute("transform",e),!(e=rl.transform.baseVal.consolidate()))?nd:(e=e.matrix,yg(e.a,e.b,e.c,e.d,e.e,e.f))}function vg(e,r,o,a){function l(h){return h.length?h.pop()+" ":""}function u(h,x,y,g,w,j){if(h!==y||x!==g){var E=w.push("translate(",null,r,null,o);j.push({i:E-4,x:er(h,y)},{i:E-2,x:er(x,g)})}else(y||g)&&w.push("translate("+y+r+g+o)}function c(h,x,y,g){h!==x?(h-x>180?x+=360:x-h>180&&(h+=360),g.push({i:y.push(l(y)+"rotate(",null,a)-2,x:er(h,x)})):x&&y.push(l(y)+"rotate("+x+a)}function f(h,x,y,g){h!==x?g.push({i:y.push(l(y)+"skewX(",null,a)-2,x:er(h,x)}):x&&y.push(l(y)+"skewX("+x+a)}function m(h,x,y,g,w,j){if(h!==y||x!==g){var E=w.push(l(w)+"scale(",null,",",null,")");j.push({i:E-4,x:er(h,y)},{i:E-2,x:er(x,g)})}else(y!==1||g!==1)&&w.push(l(w)+"scale("+y+","+g+")")}return function(h,x){var y=[],g=[];return h=e(h),x=e(x),u(h.translateX,h.translateY,x.translateX,x.translateY,y,g),c(h.rotate,x.rotate,y,g),f(h.skewX,x.skewX,y,g),m(h.scaleX,h.scaleY,x.scaleX,x.scaleY,y,g),h=x=null,function(w){for(var j=-1,E=g.length,S;++j<E;)y[(S=g[j]).i]=S.x(w);return y.join("")}}}var K_=vg(X_,"px, ","px)","deg)"),G_=vg(Y_,", ",")",")"),Z_=1e-12;function cp(e){return((e=Math.exp(e))+1/e)/2}function Q_(e){return((e=Math.exp(e))-1/e)/2}function q_(e){return((e=Math.exp(2*e))-1)/(e+1)}const ml=(function e(r,o,a){function l(u,c){var f=u[0],m=u[1],h=u[2],x=c[0],y=c[1],g=c[2],w=x-f,j=y-m,E=w*w+j*j,S,_;if(E<Z_)_=Math.log(g/h)/r,S=function(M){return[f+M*w,m+M*j,h*Math.exp(r*M*_)]};else{var R=Math.sqrt(E),b=(g*g-h*h+a*E)/(2*h*o*R),P=(g*g-h*h-a*E)/(2*g*o*R),$=Math.log(Math.sqrt(b*b+1)-b),D=Math.log(Math.sqrt(P*P+1)-P);_=(D-$)/r,S=function(M){var H=M*_,Y=cp($),B=h/(o*R)*(Y*q_(r*H+$)-Q_($));return[f+B*w,m+B*j,h*Y/cp(r*H+$)]}}return S.duration=_*1e3*r/Math.SQRT2,S}return l.rho=function(u){var c=Math.max(.001,+u),f=c*c,m=f*f;return e(c,f,m)},l})(Math.SQRT2,2,4);var _i=0,ga=0,fa=0,wg=1e3,Nl,xa,Sl=0,Do=0,zl=0,Ea=typeof performance=="object"&&performance.now?performance:Date,bg=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Pd(){return Do||(bg(J_),Do=Ea.now()+zl)}function J_(){Do=0}function jl(){this._call=this._time=this._next=null}jl.prototype=_g.prototype={constructor:jl,restart:function(e,r,o){if(typeof e!="function")throw new TypeError("callback is not a function");o=(o==null?Pd():+o)+(r==null?0:+r),!this._next&&xa!==this&&(xa?xa._next=this:Nl=this,xa=this),this._call=e,this._time=o,rd()},stop:function(){this._call&&(this._call=null,this._time=1/0,rd())}};function _g(e,r,o){var a=new jl;return a.restart(e,r,o),a}function eN(){Pd(),++_i;for(var e=Nl,r;e;)(r=Do-e._time)>=0&&e._call.call(void 0,r),e=e._next;--_i}function dp(){Do=(Sl=Ea.now())+zl,_i=ga=0;try{eN()}finally{_i=0,nN(),Do=0}}function tN(){var e=Ea.now(),r=e-Sl;r>wg&&(zl-=r,Sl=e)}function nN(){for(var e,r=Nl,o,a=1/0;r;)r._call?(a>r._time&&(a=r._time),e=r,r=r._next):(o=r._next,r._next=null,r=e?e._next=o:Nl=o);xa=e,rd(a)}function rd(e){if(!_i){ga&&(ga=clearTimeout(ga));var r=e-Do;r>24?(e<1/0&&(ga=setTimeout(dp,e-Ea.now()-zl)),fa&&(fa=clearInterval(fa))):(fa||(Sl=Ea.now(),fa=setInterval(tN,wg)),_i=1,bg(dp))}}function fp(e,r,o){var a=new jl;return r=r==null?0:+r,a.restart(l=>{a.stop(),e(l+r)},r,o),a}var rN=Ll("start","end","cancel","interrupt"),oN=[],Ng=0,hp=1,od=2,pl=3,mp=4,id=5,gl=6;function Al(e,r,o,a,l,u){var c=e.__transition;if(!c)e.__transition={};else if(o in c)return;iN(e,o,{name:r,index:a,group:l,on:rN,tween:oN,time:u.time,delay:u.delay,duration:u.duration,ease:u.ease,timer:null,state:Ng})}function Rd(e,r){var o=Vn(e,r);if(o.state>Ng)throw new Error("too late; already scheduled");return o}function lr(e,r){var o=Vn(e,r);if(o.state>pl)throw new Error("too late; already running");return o}function Vn(e,r){var o=e.__transition;if(!o||!(o=o[r]))throw new Error("transition not found");return o}function iN(e,r,o){var a=e.__transition,l;a[r]=o,o.timer=_g(u,0,o.time);function u(h){o.state=hp,o.timer.restart(c,o.delay,o.time),o.delay<=h&&c(h-o.delay)}function c(h){var x,y,g,w;if(o.state!==hp)return m();for(x in a)if(w=a[x],w.name===o.name){if(w.state===pl)return fp(c);w.state===mp?(w.state=gl,w.timer.stop(),w.on.call("interrupt",e,e.__data__,w.index,w.group),delete a[x]):+x<r&&(w.state=gl,w.timer.stop(),w.on.call("cancel",e,e.__data__,w.index,w.group),delete a[x])}if(fp(function(){o.state===pl&&(o.state=mp,o.timer.restart(f,o.delay,o.time),f(h))}),o.state=od,o.on.call("start",e,e.__data__,o.index,o.group),o.state===od){for(o.state=pl,l=new Array(g=o.tween.length),x=0,y=-1;x<g;++x)(w=o.tween[x].value.call(e,e.__data__,o.index,o.group))&&(l[++y]=w);l.length=y+1}}function f(h){for(var x=h<o.duration?o.ease.call(null,h/o.duration):(o.timer.restart(m),o.state=id,1),y=-1,g=l.length;++y<g;)l[y].call(e,x);o.state===id&&(o.on.call("end",e,e.__data__,o.index,o.group),m())}function m(){o.state=gl,o.timer.stop(),delete a[r];for(var h in a)return;delete e.__transition}}function xl(e,r){var o=e.__transition,a,l,u=!0,c;if(o){r=r==null?null:r+"";for(c in o){if((a=o[c]).name!==r){u=!1;continue}l=a.state>od&&a.state<id,a.state=gl,a.timer.stop(),a.on.call(l?"interrupt":"cancel",e,e.__data__,a.index,a.group),delete o[c]}u&&delete e.__transition}}function aN(e){return this.each(function(){xl(this,e)})}function sN(e,r){var o,a;return function(){var l=lr(this,e),u=l.tween;if(u!==o){a=o=u;for(var c=0,f=a.length;c<f;++c)if(a[c].name===r){a=a.slice(),a.splice(c,1);break}}l.tween=a}}function lN(e,r,o){var a,l;if(typeof o!="function")throw new Error;return function(){var u=lr(this,e),c=u.tween;if(c!==a){l=(a=c).slice();for(var f={name:r,value:o},m=0,h=l.length;m<h;++m)if(l[m].name===r){l[m]=f;break}m===h&&l.push(f)}u.tween=l}}function uN(e,r){var o=this._id;if(e+="",arguments.length<2){for(var a=Vn(this.node(),o).tween,l=0,u=a.length,c;l<u;++l)if((c=a[l]).name===e)return c.value;return null}return this.each((r==null?sN:lN)(o,e,r))}function Md(e,r,o){var a=e._id;return e.each(function(){var l=lr(this,a);(l.value||(l.value={}))[r]=o.apply(this,arguments)}),function(l){return Vn(l,a).value[r]}}function Sg(e,r){var o;return(typeof r=="number"?er:r instanceof To?_l:(o=To(r))?(r=o,_l):xg)(e,r)}function cN(e){return function(){this.removeAttribute(e)}}function dN(e){return function(){this.removeAttributeNS(e.space,e.local)}}function fN(e,r,o){var a,l=o+"",u;return function(){var c=this.getAttribute(e);return c===l?null:c===a?u:u=r(a=c,o)}}function hN(e,r,o){var a,l=o+"",u;return function(){var c=this.getAttributeNS(e.space,e.local);return c===l?null:c===a?u:u=r(a=c,o)}}function mN(e,r,o){var a,l,u;return function(){var c,f=o(this),m;return f==null?void this.removeAttribute(e):(c=this.getAttribute(e),m=f+"",c===m?null:c===a&&m===l?u:(l=m,u=r(a=c,f)))}}function pN(e,r,o){var a,l,u;return function(){var c,f=o(this),m;return f==null?void this.removeAttributeNS(e.space,e.local):(c=this.getAttributeNS(e.space,e.local),m=f+"",c===m?null:c===a&&m===l?u:(l=m,u=r(a=c,f)))}}function gN(e,r){var o=Il(e),a=o==="transform"?G_:Sg;return this.attrTween(e,typeof r=="function"?(o.local?pN:mN)(o,a,Md(this,"attr."+e,r)):r==null?(o.local?dN:cN)(o):(o.local?hN:fN)(o,a,r))}function xN(e,r){return function(o){this.setAttribute(e,r.call(this,o))}}function yN(e,r){return function(o){this.setAttributeNS(e.space,e.local,r.call(this,o))}}function vN(e,r){var o,a;function l(){var u=r.apply(this,arguments);return u!==a&&(o=(a=u)&&yN(e,u)),o}return l._value=r,l}function wN(e,r){var o,a;function l(){var u=r.apply(this,arguments);return u!==a&&(o=(a=u)&&xN(e,u)),o}return l._value=r,l}function bN(e,r){var o="attr."+e;if(arguments.length<2)return(o=this.tween(o))&&o._value;if(r==null)return this.tween(o,null);if(typeof r!="function")throw new Error;var a=Il(e);return this.tween(o,(a.local?vN:wN)(a,r))}function _N(e,r){return function(){Rd(this,e).delay=+r.apply(this,arguments)}}function NN(e,r){return r=+r,function(){Rd(this,e).delay=r}}function SN(e){var r=this._id;return arguments.length?this.each((typeof e=="function"?_N:NN)(r,e)):Vn(this.node(),r).delay}function jN(e,r){return function(){lr(this,e).duration=+r.apply(this,arguments)}}function kN(e,r){return r=+r,function(){lr(this,e).duration=r}}function EN(e){var r=this._id;return arguments.length?this.each((typeof e=="function"?jN:kN)(r,e)):Vn(this.node(),r).duration}function CN(e,r){if(typeof r!="function")throw new Error;return function(){lr(this,e).ease=r}}function PN(e){var r=this._id;return arguments.length?this.each(CN(r,e)):Vn(this.node(),r).ease}function RN(e,r){return function(){var o=r.apply(this,arguments);if(typeof o!="function")throw new Error;lr(this,e).ease=o}}function MN(e){if(typeof e!="function")throw new Error;return this.each(RN(this._id,e))}function TN(e){typeof e!="function"&&(e=tg(e));for(var r=this._groups,o=r.length,a=new Array(o),l=0;l<o;++l)for(var u=r[l],c=u.length,f=a[l]=[],m,h=0;h<c;++h)(m=u[h])&&e.call(m,m.__data__,h,u)&&f.push(m);return new Er(a,this._parents,this._name,this._id)}function DN(e){if(e._id!==this._id)throw new Error;for(var r=this._groups,o=e._groups,a=r.length,l=o.length,u=Math.min(a,l),c=new Array(a),f=0;f<u;++f)for(var m=r[f],h=o[f],x=m.length,y=c[f]=new Array(x),g,w=0;w<x;++w)(g=m[w]||h[w])&&(y[w]=g);for(;f<a;++f)c[f]=r[f];return new Er(c,this._parents,this._name,this._id)}function LN(e){return(e+"").trim().split(/^|\s+/).every(function(r){var o=r.indexOf(".");return o>=0&&(r=r.slice(0,o)),!r||r==="start"})}function IN(e,r,o){var a,l,u=LN(r)?Rd:lr;return function(){var c=u(this,e),f=c.on;f!==a&&(l=(a=f).copy()).on(r,o),c.on=l}}function zN(e,r){var o=this._id;return arguments.length<2?Vn(this.node(),o).on.on(e):this.each(IN(o,e,r))}function AN(e){return function(){var r=this.parentNode;for(var o in this.__transition)if(+o!==e)return;r&&r.removeChild(this)}}function $N(){return this.on("end.remove",AN(this._id))}function FN(e){var r=this._name,o=this._id;typeof e!="function"&&(e=jd(e));for(var a=this._groups,l=a.length,u=new Array(l),c=0;c<l;++c)for(var f=a[c],m=f.length,h=u[c]=new Array(m),x,y,g=0;g<m;++g)(x=f[g])&&(y=e.call(x,x.__data__,g,f))&&("__data__"in x&&(y.__data__=x.__data__),h[g]=y,Al(h[g],r,o,g,h,Vn(x,o)));return new Er(u,this._parents,r,o)}function ON(e){var r=this._name,o=this._id;typeof e!="function"&&(e=eg(e));for(var a=this._groups,l=a.length,u=[],c=[],f=0;f<l;++f)for(var m=a[f],h=m.length,x,y=0;y<h;++y)if(x=m[y]){for(var g=e.call(x,x.__data__,y,m),w,j=Vn(x,o),E=0,S=g.length;E<S;++E)(w=g[E])&&Al(w,r,o,E,g,j);u.push(g),c.push(x)}return new Er(u,c,r,o)}var HN=Fa.prototype.constructor;function BN(){return new HN(this._groups,this._parents)}function VN(e,r){var o,a,l;return function(){var u=bi(this,e),c=(this.style.removeProperty(e),bi(this,e));return u===c?null:u===o&&c===a?l:l=r(o=u,a=c)}}function jg(e){return function(){this.style.removeProperty(e)}}function UN(e,r,o){var a,l=o+"",u;return function(){var c=bi(this,e);return c===l?null:c===a?u:u=r(a=c,o)}}function WN(e,r,o){var a,l,u;return function(){var c=bi(this,e),f=o(this),m=f+"";return f==null&&(m=f=(this.style.removeProperty(e),bi(this,e))),c===m?null:c===a&&m===l?u:(l=m,u=r(a=c,f))}}function XN(e,r){var o,a,l,u="style."+r,c="end."+u,f;return function(){var m=lr(this,e),h=m.on,x=m.value[u]==null?f||(f=jg(r)):void 0;(h!==o||l!==x)&&(a=(o=h).copy()).on(c,l=x),m.on=a}}function YN(e,r,o){var a=(e+="")=="transform"?K_:Sg;return r==null?this.styleTween(e,VN(e,a)).on("end.style."+e,jg(e)):typeof r=="function"?this.styleTween(e,WN(e,a,Md(this,"style."+e,r))).each(XN(this._id,e)):this.styleTween(e,UN(e,a,r),o).on("end.style."+e,null)}function KN(e,r,o){return function(a){this.style.setProperty(e,r.call(this,a),o)}}function GN(e,r,o){var a,l;function u(){var c=r.apply(this,arguments);return c!==l&&(a=(l=c)&&KN(e,c,o)),a}return u._value=r,u}function ZN(e,r,o){var a="style."+(e+="");if(arguments.length<2)return(a=this.tween(a))&&a._value;if(r==null)return this.tween(a,null);if(typeof r!="function")throw new Error;return this.tween(a,GN(e,r,o??""))}function QN(e){return function(){this.textContent=e}}function qN(e){return function(){var r=e(this);this.textContent=r??""}}function JN(e){return this.tween("text",typeof e=="function"?qN(Md(this,"text",e)):QN(e==null?"":e+""))}function eS(e){return function(r){this.textContent=e.call(this,r)}}function tS(e){var r,o;function a(){var l=e.apply(this,arguments);return l!==o&&(r=(o=l)&&eS(l)),r}return a._value=e,a}function nS(e){var r="text";if(arguments.length<1)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,tS(e))}function rS(){for(var e=this._name,r=this._id,o=kg(),a=this._groups,l=a.length,u=0;u<l;++u)for(var c=a[u],f=c.length,m,h=0;h<f;++h)if(m=c[h]){var x=Vn(m,r);Al(m,e,o,h,c,{time:x.time+x.delay+x.duration,delay:0,duration:x.duration,ease:x.ease})}return new Er(a,this._parents,e,o)}function oS(){var e,r,o=this,a=o._id,l=o.size();return new Promise(function(u,c){var f={value:c},m={value:function(){--l===0&&u()}};o.each(function(){var h=lr(this,a),x=h.on;x!==e&&(r=(e=x).copy(),r._.cancel.push(f),r._.interrupt.push(f),r._.end.push(m)),h.on=r}),l===0&&u()})}var iS=0;function Er(e,r,o,a){this._groups=e,this._parents=r,this._name=o,this._id=a}function kg(){return++iS}var Nr=Fa.prototype;Er.prototype={constructor:Er,select:FN,selectAll:ON,selectChild:Nr.selectChild,selectChildren:Nr.selectChildren,filter:TN,merge:DN,selection:BN,transition:rS,call:Nr.call,nodes:Nr.nodes,node:Nr.node,size:Nr.size,empty:Nr.empty,each:Nr.each,on:zN,attr:gN,attrTween:bN,style:YN,styleTween:ZN,text:JN,textTween:nS,remove:$N,tween:uN,delay:SN,duration:EN,ease:PN,easeVarying:MN,end:oS,[Symbol.iterator]:Nr[Symbol.iterator]};function aS(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var sS={time:null,delay:0,duration:250,ease:aS};function lS(e,r){for(var o;!(o=e.__transition)||!(o=o[r]);)if(!(e=e.parentNode))throw new Error(`transition ${r} not found`);return o}function uS(e){var r,o;e instanceof Er?(r=e._id,e=e._name):(r=kg(),(o=sS).time=Pd(),e=e==null?null:e+"");for(var a=this._groups,l=a.length,u=0;u<l;++u)for(var c=a[u],f=c.length,m,h=0;h<f;++h)(m=c[h])&&Al(m,e,r,h,c,o||lS(m,r));return new Er(a,this._parents,e,r)}Fa.prototype.interrupt=aN;Fa.prototype.transition=uS;const ol=e=>()=>e;function cS(e,{sourceEvent:r,target:o,transform:a,dispatch:l}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:r,enumerable:!0,configurable:!0},target:{value:o,enumerable:!0,configurable:!0},transform:{value:a,enumerable:!0,configurable:!0},_:{value:l}})}function jr(e,r,o){this.k=e,this.x=r,this.y=o}jr.prototype={constructor:jr,scale:function(e){return e===1?this:new jr(this.k*e,this.x,this.y)},translate:function(e,r){return e===0&r===0?this:new jr(this.k,this.x+this.k*e,this.y+this.k*r)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var $l=new jr(1,0,0);Eg.prototype=jr.prototype;function Eg(e){for(;!e.__zoom;)if(!(e=e.parentNode))return $l;return e.__zoom}function Ac(e){e.stopImmediatePropagation()}function ha(e){e.preventDefault(),e.stopImmediatePropagation()}function dS(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function fS(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function pp(){return this.__zoom||$l}function hS(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function mS(){return navigator.maxTouchPoints||"ontouchstart"in this}function pS(e,r,o){var a=e.invertX(r[0][0])-o[0][0],l=e.invertX(r[1][0])-o[1][0],u=e.invertY(r[0][1])-o[0][1],c=e.invertY(r[1][1])-o[1][1];return e.translate(l>a?(a+l)/2:Math.min(0,a)||Math.max(0,l),c>u?(u+c)/2:Math.min(0,u)||Math.max(0,c))}function Cg(){var e=dS,r=fS,o=pS,a=hS,l=mS,u=[0,1/0],c=[[-1/0,-1/0],[1/0,1/0]],f=250,m=ml,h=Ll("start","zoom","end"),x,y,g,w=500,j=150,E=0,S=10;function _(k){k.property("__zoom",pp).on("wheel.zoom",H,{passive:!1}).on("mousedown.zoom",Y).on("dblclick.zoom",B).filter(l).on("touchstart.zoom",I).on("touchmove.zoom",F).on("touchend.zoom touchcancel.zoom",L).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}_.transform=function(k,A,X,Q){var O=k.selection?k.selection():k;O.property("__zoom",pp),k!==O?$(k,A,X,Q):O.interrupt().each(function(){D(this,arguments).event(Q).start().zoom(null,typeof A=="function"?A.apply(this,arguments):A).end()})},_.scaleBy=function(k,A,X,Q){_.scaleTo(k,function(){var O=this.__zoom.k,K=typeof A=="function"?A.apply(this,arguments):A;return O*K},X,Q)},_.scaleTo=function(k,A,X,Q){_.transform(k,function(){var O=r.apply(this,arguments),K=this.__zoom,z=X==null?P(O):typeof X=="function"?X.apply(this,arguments):X,T=K.invert(z),U=typeof A=="function"?A.apply(this,arguments):A;return o(b(R(K,U),z,T),O,c)},X,Q)},_.translateBy=function(k,A,X,Q){_.transform(k,function(){return o(this.__zoom.translate(typeof A=="function"?A.apply(this,arguments):A,typeof X=="function"?X.apply(this,arguments):X),r.apply(this,arguments),c)},null,Q)},_.translateTo=function(k,A,X,Q,O){_.transform(k,function(){var K=r.apply(this,arguments),z=this.__zoom,T=Q==null?P(K):typeof Q=="function"?Q.apply(this,arguments):Q;return o($l.translate(T[0],T[1]).scale(z.k).translate(typeof A=="function"?-A.apply(this,arguments):-A,typeof X=="function"?-X.apply(this,arguments):-X),K,c)},Q,O)};function R(k,A){return A=Math.max(u[0],Math.min(u[1],A)),A===k.k?k:new jr(A,k.x,k.y)}function b(k,A,X){var Q=A[0]-X[0]*k.k,O=A[1]-X[1]*k.k;return Q===k.x&&O===k.y?k:new jr(k.k,Q,O)}function P(k){return[(+k[0][0]+ +k[1][0])/2,(+k[0][1]+ +k[1][1])/2]}function $(k,A,X,Q){k.on("start.zoom",function(){D(this,arguments).event(Q).start()}).on("interrupt.zoom end.zoom",function(){D(this,arguments).event(Q).end()}).tween("zoom",function(){var O=this,K=arguments,z=D(O,K).event(Q),T=r.apply(O,K),U=X==null?P(T):typeof X=="function"?X.apply(O,K):X,re=Math.max(T[1][0]-T[0][0],T[1][1]-T[0][1]),oe=O.__zoom,ue=typeof A=="function"?A.apply(O,K):A,pe=m(oe.invert(U).concat(re/oe.k),ue.invert(U).concat(re/ue.k));return function(he){if(he===1)he=ue;else{var ie=pe(he),me=re/ie[2];he=new jr(me,U[0]-ie[0]*me,U[1]-ie[1]*me)}z.zoom(null,he)}})}function D(k,A,X){return!X&&k.__zooming||new M(k,A)}function M(k,A){this.that=k,this.args=A,this.active=0,this.sourceEvent=null,this.extent=r.apply(k,A),this.taps=0}M.prototype={event:function(k){return k&&(this.sourceEvent=k),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(k,A){return this.mouse&&k!=="mouse"&&(this.mouse[1]=A.invert(this.mouse[0])),this.touch0&&k!=="touch"&&(this.touch0[1]=A.invert(this.touch0[0])),this.touch1&&k!=="touch"&&(this.touch1[1]=A.invert(this.touch1[0])),this.that.__zoom=A,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(k){var A=un(this.that).datum();h.call(k,this.that,new cS(k,{sourceEvent:this.sourceEvent,target:_,transform:this.that.__zoom,dispatch:h}),A)}};function H(k,...A){if(!e.apply(this,arguments))return;var X=D(this,A).event(k),Q=this.__zoom,O=Math.max(u[0],Math.min(u[1],Q.k*Math.pow(2,a.apply(this,arguments)))),K=Fn(k);if(X.wheel)(X.mouse[0][0]!==K[0]||X.mouse[0][1]!==K[1])&&(X.mouse[1]=Q.invert(X.mouse[0]=K)),clearTimeout(X.wheel);else{if(Q.k===O)return;X.mouse=[K,Q.invert(K)],xl(this),X.start()}ha(k),X.wheel=setTimeout(z,j),X.zoom("mouse",o(b(R(Q,O),X.mouse[0],X.mouse[1]),X.extent,c));function z(){X.wheel=null,X.end()}}function Y(k,...A){if(g||!e.apply(this,arguments))return;var X=k.currentTarget,Q=D(this,A,!0).event(k),O=un(k.view).on("mousemove.zoom",U,!0).on("mouseup.zoom",re,!0),K=Fn(k,X),z=k.clientX,T=k.clientY;dg(k.view),Ac(k),Q.mouse=[K,this.__zoom.invert(K)],xl(this),Q.start();function U(oe){if(ha(oe),!Q.moved){var ue=oe.clientX-z,pe=oe.clientY-T;Q.moved=ue*ue+pe*pe>E}Q.event(oe).zoom("mouse",o(b(Q.that.__zoom,Q.mouse[0]=Fn(oe,X),Q.mouse[1]),Q.extent,c))}function re(oe){O.on("mousemove.zoom mouseup.zoom",null),fg(oe.view,Q.moved),ha(oe),Q.event(oe).end()}}function B(k,...A){if(e.apply(this,arguments)){var X=this.__zoom,Q=Fn(k.changedTouches?k.changedTouches[0]:k,this),O=X.invert(Q),K=X.k*(k.shiftKey?.5:2),z=o(b(R(X,K),Q,O),r.apply(this,A),c);ha(k),f>0?un(this).transition().duration(f).call($,z,Q,k):un(this).call(_.transform,z,Q,k)}}function I(k,...A){if(e.apply(this,arguments)){var X=k.touches,Q=X.length,O=D(this,A,k.changedTouches.length===Q).event(k),K,z,T,U;for(Ac(k),z=0;z<Q;++z)T=X[z],U=Fn(T,this),U=[U,this.__zoom.invert(U),T.identifier],O.touch0?!O.touch1&&O.touch0[2]!==U[2]&&(O.touch1=U,O.taps=0):(O.touch0=U,K=!0,O.taps=1+!!x);x&&(x=clearTimeout(x)),K&&(O.taps<2&&(y=U[0],x=setTimeout(function(){x=null},w)),xl(this),O.start())}}function F(k,...A){if(this.__zooming){var X=D(this,A).event(k),Q=k.changedTouches,O=Q.length,K,z,T,U;for(ha(k),K=0;K<O;++K)z=Q[K],T=Fn(z,this),X.touch0&&X.touch0[2]===z.identifier?X.touch0[0]=T:X.touch1&&X.touch1[2]===z.identifier&&(X.touch1[0]=T);if(z=X.that.__zoom,X.touch1){var re=X.touch0[0],oe=X.touch0[1],ue=X.touch1[0],pe=X.touch1[1],he=(he=ue[0]-re[0])*he+(he=ue[1]-re[1])*he,ie=(ie=pe[0]-oe[0])*ie+(ie=pe[1]-oe[1])*ie;z=R(z,Math.sqrt(he/ie)),T=[(re[0]+ue[0])/2,(re[1]+ue[1])/2],U=[(oe[0]+pe[0])/2,(oe[1]+pe[1])/2]}else if(X.touch0)T=X.touch0[0],U=X.touch0[1];else return;X.zoom("touch",o(b(z,T,U),X.extent,c))}}function L(k,...A){if(this.__zooming){var X=D(this,A).event(k),Q=k.changedTouches,O=Q.length,K,z;for(Ac(k),g&&clearTimeout(g),g=setTimeout(function(){g=null},w),K=0;K<O;++K)z=Q[K],X.touch0&&X.touch0[2]===z.identifier?delete X.touch0:X.touch1&&X.touch1[2]===z.identifier&&delete X.touch1;if(X.touch1&&!X.touch0&&(X.touch0=X.touch1,delete X.touch1),X.touch0)X.touch0[1]=this.__zoom.invert(X.touch0[0]);else if(X.end(),X.taps===2&&(z=Fn(z,this),Math.hypot(y[0]-z[0],y[1]-z[1])<S)){var T=un(this).on("dblclick.zoom");T&&T.apply(this,arguments)}}}return _.wheelDelta=function(k){return arguments.length?(a=typeof k=="function"?k:ol(+k),_):a},_.filter=function(k){return arguments.length?(e=typeof k=="function"?k:ol(!!k),_):e},_.touchable=function(k){return arguments.length?(l=typeof k=="function"?k:ol(!!k),_):l},_.extent=function(k){return arguments.length?(r=typeof k=="function"?k:ol([[+k[0][0],+k[0][1]],[+k[1][0],+k[1][1]]]),_):r},_.scaleExtent=function(k){return arguments.length?(u[0]=+k[0],u[1]=+k[1],_):[u[0],u[1]]},_.translateExtent=function(k){return arguments.length?(c[0][0]=+k[0][0],c[1][0]=+k[1][0],c[0][1]=+k[0][1],c[1][1]=+k[1][1],_):[[c[0][0],c[0][1]],[c[1][0],c[1][1]]]},_.constrain=function(k){return arguments.length?(o=k,_):o},_.duration=function(k){return arguments.length?(f=+k,_):f},_.interpolate=function(k){return arguments.length?(m=k,_):m},_.on=function(){var k=h.on.apply(h,arguments);return k===h?_:k},_.clickDistance=function(k){return arguments.length?(E=(k=+k)*k,_):Math.sqrt(E)},_.tapDistance=function(k){return arguments.length?(S=+k,_):S},_}const ir={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,{id:r,sourceHandle:o,targetHandle:a})=>`Couldn't create edge for ${e} handle id: "${e==="source"?o:a}", edge id: ${r}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(e="react")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${e}/dist/style.css' or base.css to make sure everything is working properly.`,error014:()=>"useNodeConnections: No node ID found. Call useNodeConnections inside a custom Node or provide a node ID.",error015:()=>"It seems that you are trying to drag a node that is not initialized. Please use onNodesChange as explained in the docs."},Ca=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],Pg=["Enter"," ","Escape"],Rg={"node.a11yDescription.default":"Press enter or space to select a node. Press delete to remove it and escape to cancel.","node.a11yDescription.keyboardDisabled":"Press enter or space to select a node. You can then use the arrow keys to move the node around. Press delete to remove it and escape to cancel.","node.a11yDescription.ariaLiveMessage":({direction:e,x:r,y:o})=>`Moved selected node ${e}. New position, x: ${r}, y: ${o}`,"edge.a11yDescription.default":"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel.","controls.ariaLabel":"Control Panel","controls.zoomIn.ariaLabel":"Zoom In","controls.zoomOut.ariaLabel":"Zoom Out","controls.fitView.ariaLabel":"Fit View","controls.interactive.ariaLabel":"Toggle Interactivity","minimap.ariaLabel":"Mini Map","handle.ariaLabel":"Handle"};var Ni;(function(e){e.Strict="strict",e.Loose="loose"})(Ni||(Ni={}));var Po;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(Po||(Po={}));var Pa;(function(e){e.Partial="partial",e.Full="full"})(Pa||(Pa={}));const Mg={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null,pointer:null};var no;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(no||(no={}));var kl;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(kl||(kl={}));var Ce;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(Ce||(Ce={}));const gp={[Ce.Left]:Ce.Right,[Ce.Right]:Ce.Left,[Ce.Top]:Ce.Bottom,[Ce.Bottom]:Ce.Top};function Tg(e){return e===null?null:e?"valid":"invalid"}const Dg=e=>"id"in e&&"source"in e&&"target"in e,gS=e=>"id"in e&&"position"in e&&!("source"in e)&&!("target"in e),Td=e=>"id"in e&&"internals"in e&&!("source"in e)&&!("target"in e),Ha=(e,r=[0,0])=>{const{width:o,height:a}=Cr(e),l=e.origin??r,u=o*l[0],c=a*l[1];return{x:e.position.x-u,y:e.position.y-c}},xS=(e,r={nodeOrigin:[0,0]})=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const o=e.reduce((a,l)=>{const u=typeof l=="string";let c=!r.nodeLookup&&!u?l:void 0;r.nodeLookup&&(c=u?r.nodeLookup.get(l):Td(l)?l:r.nodeLookup.get(l.id));const f=c?El(c,r.nodeOrigin):{x:0,y:0,x2:0,y2:0};return Fl(a,f)},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return Ol(o)},Ba=(e,r={})=>{let o={x:1/0,y:1/0,x2:-1/0,y2:-1/0},a=!1;return e.forEach(l=>{(r.filter===void 0||r.filter(l))&&(o=Fl(o,El(l)),a=!0)}),a?Ol(o):{x:0,y:0,width:0,height:0}},Dd=(e,r,[o,a,l]=[0,0,1],u=!1,c=!1)=>{const f={...Ua(r,[o,a,l]),width:r.width/l,height:r.height/l},m=[];for(const h of e.values()){const{measured:x,selectable:y=!0,hidden:g=!1}=h;if(c&&!y||g)continue;const w=x.width??h.width??h.initialWidth??null,j=x.height??h.height??h.initialHeight??null,E=Ra(f,ji(h)),S=(w??0)*(j??0),_=u&&E>0;(!h.internals.handleBounds||_||E>=S||h.dragging)&&m.push(h)}return m},yS=(e,r)=>{const o=new Set;return e.forEach(a=>{o.add(a.id)}),r.filter(a=>o.has(a.source)||o.has(a.target))};function vS(e,r){const o=new Map,a=r?.nodes?new Set(r.nodes.map(l=>l.id)):null;return e.forEach(l=>{l.measured.width&&l.measured.height&&(r?.includeHiddenNodes||!l.hidden)&&(!a||a.has(l.id))&&o.set(l.id,l)}),o}async function wS({nodes:e,width:r,height:o,panZoom:a,minZoom:l,maxZoom:u},c){if(e.size===0)return Promise.resolve(!0);const f=vS(e,c),m=Ba(f),h=Ld(m,r,o,c?.minZoom??l,c?.maxZoom??u,c?.padding??.1);return await a.setViewport(h,{duration:c?.duration,ease:c?.ease,interpolate:c?.interpolate}),Promise.resolve(!0)}function Lg({nodeId:e,nextPosition:r,nodeLookup:o,nodeOrigin:a=[0,0],nodeExtent:l,onError:u}){const c=o.get(e),f=c.parentId?o.get(c.parentId):void 0,{x:m,y:h}=f?f.internals.positionAbsolute:{x:0,y:0},x=c.origin??a;let y=c.extent||l;if(c.extent==="parent"&&!c.expandParent)if(!f)u?.("005",ir.error005());else{const w=f.measured.width,j=f.measured.height;w&&j&&(y=[[m,h],[m+w,h+j]])}else f&&ki(c.extent)&&(y=[[c.extent[0][0]+m,c.extent[0][1]+h],[c.extent[1][0]+m,c.extent[1][1]+h]]);const g=ki(y)?Lo(r,y,c.measured):r;return(c.measured.width===void 0||c.measured.height===void 0)&&u?.("015",ir.error015()),{position:{x:g.x-m+(c.measured.width??0)*x[0],y:g.y-h+(c.measured.height??0)*x[1]},positionAbsolute:g}}async function bS({nodesToRemove:e=[],edgesToRemove:r=[],nodes:o,edges:a,onBeforeDelete:l}){const u=new Set(e.map(g=>g.id)),c=[];for(const g of o){if(g.deletable===!1)continue;const w=u.has(g.id),j=!w&&g.parentId&&c.find(E=>E.id===g.parentId);(w||j)&&c.push(g)}const f=new Set(r.map(g=>g.id)),m=a.filter(g=>g.deletable!==!1),x=yS(c,m);for(const g of m)f.has(g.id)&&!x.find(j=>j.id===g.id)&&x.push(g);if(!l)return{edges:x,nodes:c};const y=await l({nodes:c,edges:x});return typeof y=="boolean"?y?{edges:x,nodes:c}:{edges:[],nodes:[]}:y}const Si=(e,r=0,o=1)=>Math.min(Math.max(e,r),o),Lo=(e={x:0,y:0},r,o)=>({x:Si(e.x,r[0][0],r[1][0]-(o?.width??0)),y:Si(e.y,r[0][1],r[1][1]-(o?.height??0))});function Ig(e,r,o){const{width:a,height:l}=Cr(o),{x:u,y:c}=o.internals.positionAbsolute;return Lo(e,[[u,c],[u+a,c+l]],r)}const xp=(e,r,o)=>e<r?Si(Math.abs(e-r),1,r)/r:e>o?-Si(Math.abs(e-o),1,r)/r:0,zg=(e,r,o=15,a=40)=>{const l=xp(e.x,a,r.width-a)*o,u=xp(e.y,a,r.height-a)*o;return[l,u]},Fl=(e,r)=>({x:Math.min(e.x,r.x),y:Math.min(e.y,r.y),x2:Math.max(e.x2,r.x2),y2:Math.max(e.y2,r.y2)}),ad=({x:e,y:r,width:o,height:a})=>({x:e,y:r,x2:e+o,y2:r+a}),Ol=({x:e,y:r,x2:o,y2:a})=>({x:e,y:r,width:o-e,height:a-r}),ji=(e,r=[0,0])=>{const{x:o,y:a}=Td(e)?e.internals.positionAbsolute:Ha(e,r);return{x:o,y:a,width:e.measured?.width??e.width??e.initialWidth??0,height:e.measured?.height??e.height??e.initialHeight??0}},El=(e,r=[0,0])=>{const{x:o,y:a}=Td(e)?e.internals.positionAbsolute:Ha(e,r);return{x:o,y:a,x2:o+(e.measured?.width??e.width??e.initialWidth??0),y2:a+(e.measured?.height??e.height??e.initialHeight??0)}},Ag=(e,r)=>Ol(Fl(ad(e),ad(r))),Ra=(e,r)=>{const o=Math.max(0,Math.min(e.x+e.width,r.x+r.width)-Math.max(e.x,r.x)),a=Math.max(0,Math.min(e.y+e.height,r.y+r.height)-Math.max(e.y,r.y));return Math.ceil(o*a)},yp=e=>Hn(e.width)&&Hn(e.height)&&Hn(e.x)&&Hn(e.y),Hn=e=>!isNaN(e)&&isFinite(e),_S=(e,r)=>{},Va=(e,r=[1,1])=>({x:r[0]*Math.round(e.x/r[0]),y:r[1]*Math.round(e.y/r[1])}),Ua=({x:e,y:r},[o,a,l],u=!1,c=[1,1])=>{const f={x:(e-o)/l,y:(r-a)/l};return u?Va(f,c):f},Cl=({x:e,y:r},[o,a,l])=>({x:e*l+o,y:r*l+a});function fi(e,r){if(typeof e=="number")return Math.floor((r-r/(1+e))*.5);if(typeof e=="string"&&e.endsWith("px")){const o=parseFloat(e);if(!Number.isNaN(o))return Math.floor(o)}if(typeof e=="string"&&e.endsWith("%")){const o=parseFloat(e);if(!Number.isNaN(o))return Math.floor(r*o*.01)}return console.error(`[React Flow] The padding value "${e}" is invalid. Please provide a number or a string with a valid unit (px or %).`),0}function NS(e,r,o){if(typeof e=="string"||typeof e=="number"){const a=fi(e,o),l=fi(e,r);return{top:a,right:l,bottom:a,left:l,x:l*2,y:a*2}}if(typeof e=="object"){const a=fi(e.top??e.y??0,o),l=fi(e.bottom??e.y??0,o),u=fi(e.left??e.x??0,r),c=fi(e.right??e.x??0,r);return{top:a,right:c,bottom:l,left:u,x:u+c,y:a+l}}return{top:0,right:0,bottom:0,left:0,x:0,y:0}}function SS(e,r,o,a,l,u){const{x:c,y:f}=Cl(e,[r,o,a]),{x:m,y:h}=Cl({x:e.x+e.width,y:e.y+e.height},[r,o,a]),x=l-m,y=u-h;return{left:Math.floor(c),top:Math.floor(f),right:Math.floor(x),bottom:Math.floor(y)}}const Ld=(e,r,o,a,l,u)=>{const c=NS(u,r,o),f=(r-c.x)/e.width,m=(o-c.y)/e.height,h=Math.min(f,m),x=Si(h,a,l),y=e.x+e.width/2,g=e.y+e.height/2,w=r/2-y*x,j=o/2-g*x,E=SS(e,w,j,x,r,o),S={left:Math.min(E.left-c.left,0),top:Math.min(E.top-c.top,0),right:Math.min(E.right-c.right,0),bottom:Math.min(E.bottom-c.bottom,0)};return{x:w-S.left+S.right,y:j-S.top+S.bottom,zoom:x}},Ma=()=>typeof navigator<"u"&&navigator?.userAgent?.indexOf("Mac")>=0;function ki(e){return e!=null&&e!=="parent"}function Cr(e){return{width:e.measured?.width??e.width??e.initialWidth??0,height:e.measured?.height??e.height??e.initialHeight??0}}function $g(e){return(e.measured?.width??e.width??e.initialWidth)!==void 0&&(e.measured?.height??e.height??e.initialHeight)!==void 0}function Fg(e,r={width:0,height:0},o,a,l){const u={...e},c=a.get(o);if(c){const f=c.origin||l;u.x+=c.internals.positionAbsolute.x-(r.width??0)*f[0],u.y+=c.internals.positionAbsolute.y-(r.height??0)*f[1]}return u}function vp(e,r){if(e.size!==r.size)return!1;for(const o of e)if(!r.has(o))return!1;return!0}function jS(){let e,r;return{promise:new Promise((a,l)=>{e=a,r=l}),resolve:e,reject:r}}function kS(e){return{...Rg,...e||{}}}function wa(e,{snapGrid:r=[0,0],snapToGrid:o=!1,transform:a,containerBounds:l}){const{x:u,y:c}=Bn(e),f=Ua({x:u-(l?.left??0),y:c-(l?.top??0)},a),{x:m,y:h}=o?Va(f,r):f;return{xSnapped:m,ySnapped:h,...f}}const Id=e=>({width:e.offsetWidth,height:e.offsetHeight}),Og=e=>e?.getRootNode?.()||window?.document,ES=["INPUT","SELECT","TEXTAREA"];function Hg(e){const r=e.composedPath?.()?.[0]||e.target;return r?.nodeType!==1?!1:ES.includes(r.nodeName)||r.hasAttribute("contenteditable")||!!r.closest(".nokey")}const Bg=e=>"clientX"in e,Bn=(e,r)=>{const o=Bg(e),a=o?e.clientX:e.touches?.[0].clientX,l=o?e.clientY:e.touches?.[0].clientY;return{x:a-(r?.left??0),y:l-(r?.top??0)}},wp=(e,r,o,a,l)=>{const u=r.querySelectorAll(`.${e}`);return!u||!u.length?null:Array.from(u).map(c=>{const f=c.getBoundingClientRect();return{id:c.getAttribute("data-handleid"),type:e,nodeId:l,position:c.getAttribute("data-handlepos"),x:(f.left-o.left)/a,y:(f.top-o.top)/a,...Id(c)}})};function Vg({sourceX:e,sourceY:r,targetX:o,targetY:a,sourceControlX:l,sourceControlY:u,targetControlX:c,targetControlY:f}){const m=e*.125+l*.375+c*.375+o*.125,h=r*.125+u*.375+f*.375+a*.125,x=Math.abs(m-e),y=Math.abs(h-r);return[m,h,x,y]}function il(e,r){return e>=0?.5*e:r*25*Math.sqrt(-e)}function bp({pos:e,x1:r,y1:o,x2:a,y2:l,c:u}){switch(e){case Ce.Left:return[r-il(r-a,u),o];case Ce.Right:return[r+il(a-r,u),o];case Ce.Top:return[r,o-il(o-l,u)];case Ce.Bottom:return[r,o+il(l-o,u)]}}function Ug({sourceX:e,sourceY:r,sourcePosition:o=Ce.Bottom,targetX:a,targetY:l,targetPosition:u=Ce.Top,curvature:c=.25}){const[f,m]=bp({pos:o,x1:e,y1:r,x2:a,y2:l,c}),[h,x]=bp({pos:u,x1:a,y1:l,x2:e,y2:r,c}),[y,g,w,j]=Vg({sourceX:e,sourceY:r,targetX:a,targetY:l,sourceControlX:f,sourceControlY:m,targetControlX:h,targetControlY:x});return[`M${e},${r} C${f},${m} ${h},${x} ${a},${l}`,y,g,w,j]}function Wg({sourceX:e,sourceY:r,targetX:o,targetY:a}){const l=Math.abs(o-e)/2,u=o<e?o+l:o-l,c=Math.abs(a-r)/2,f=a<r?a+c:a-c;return[u,f,l,c]}function CS({sourceNode:e,targetNode:r,selected:o=!1,zIndex:a=0,elevateOnSelect:l=!1,zIndexMode:u="basic"}){if(u==="manual")return a;const c=l&&o?a+1e3:a,f=Math.max(e.parentId||l&&e.selected?e.internals.z:0,r.parentId||l&&r.selected?r.internals.z:0);return c+f}function PS({sourceNode:e,targetNode:r,width:o,height:a,transform:l}){const u=Fl(El(e),El(r));u.x===u.x2&&(u.x2+=1),u.y===u.y2&&(u.y2+=1);const c={x:-l[0]/l[2],y:-l[1]/l[2],width:o/l[2],height:a/l[2]};return Ra(c,Ol(u))>0}const RS=({source:e,sourceHandle:r,target:o,targetHandle:a})=>`xy-edge__${e}${r||""}-${o}${a||""}`,MS=(e,r)=>r.some(o=>o.source===e.source&&o.target===e.target&&(o.sourceHandle===e.sourceHandle||!o.sourceHandle&&!e.sourceHandle)&&(o.targetHandle===e.targetHandle||!o.targetHandle&&!e.targetHandle)),Xg=(e,r,o={})=>{if(!e.source||!e.target)return r;const a=o.getEdgeId||RS;let l;return Dg(e)?l={...e}:l={...e,id:a(e)},MS(l,r)?r:(l.sourceHandle===null&&delete l.sourceHandle,l.targetHandle===null&&delete l.targetHandle,r.concat(l))};function Yg({sourceX:e,sourceY:r,targetX:o,targetY:a}){const[l,u,c,f]=Wg({sourceX:e,sourceY:r,targetX:o,targetY:a});return[`M ${e},${r}L ${o},${a}`,l,u,c,f]}const _p={[Ce.Left]:{x:-1,y:0},[Ce.Right]:{x:1,y:0},[Ce.Top]:{x:0,y:-1},[Ce.Bottom]:{x:0,y:1}},TS=({source:e,sourcePosition:r=Ce.Bottom,target:o})=>r===Ce.Left||r===Ce.Right?e.x<o.x?{x:1,y:0}:{x:-1,y:0}:e.y<o.y?{x:0,y:1}:{x:0,y:-1},Np=(e,r)=>Math.sqrt(Math.pow(r.x-e.x,2)+Math.pow(r.y-e.y,2));function DS({source:e,sourcePosition:r=Ce.Bottom,target:o,targetPosition:a=Ce.Top,center:l,offset:u,stepPosition:c}){const f=_p[r],m=_p[a],h={x:e.x+f.x*u,y:e.y+f.y*u},x={x:o.x+m.x*u,y:o.y+m.y*u},y=TS({source:h,sourcePosition:r,target:x}),g=y.x!==0?"x":"y",w=y[g];let j=[],E,S;const _={x:0,y:0},R={x:0,y:0},[,,b,P]=Wg({sourceX:e.x,sourceY:e.y,targetX:o.x,targetY:o.y});if(f[g]*m[g]===-1){g==="x"?(E=l.x??h.x+(x.x-h.x)*c,S=l.y??(h.y+x.y)/2):(E=l.x??(h.x+x.x)/2,S=l.y??h.y+(x.y-h.y)*c);const D=[{x:E,y:h.y},{x:E,y:x.y}],M=[{x:h.x,y:S},{x:x.x,y:S}];f[g]===w?j=g==="x"?D:M:j=g==="x"?M:D}else{const D=[{x:h.x,y:x.y}],M=[{x:x.x,y:h.y}];if(g==="x"?j=f.x===w?M:D:j=f.y===w?D:M,r===a){const F=Math.abs(e[g]-o[g]);if(F<=u){const L=Math.min(u-1,u-F);f[g]===w?_[g]=(h[g]>e[g]?-1:1)*L:R[g]=(x[g]>o[g]?-1:1)*L}}if(r!==a){const F=g==="x"?"y":"x",L=f[g]===m[F],k=h[F]>x[F],A=h[F]<x[F];(f[g]===1&&(!L&&k||L&&A)||f[g]!==1&&(!L&&A||L&&k))&&(j=g==="x"?D:M)}const H={x:h.x+_.x,y:h.y+_.y},Y={x:x.x+R.x,y:x.y+R.y},B=Math.max(Math.abs(H.x-j[0].x),Math.abs(Y.x-j[0].x)),I=Math.max(Math.abs(H.y-j[0].y),Math.abs(Y.y-j[0].y));B>=I?(E=(H.x+Y.x)/2,S=j[0].y):(E=j[0].x,S=(H.y+Y.y)/2)}return[[e,{x:h.x+_.x,y:h.y+_.y},...j,{x:x.x+R.x,y:x.y+R.y},o],E,S,b,P]}function LS(e,r,o,a){const l=Math.min(Np(e,r)/2,Np(r,o)/2,a),{x:u,y:c}=r;if(e.x===u&&u===o.x||e.y===c&&c===o.y)return`L${u} ${c}`;if(e.y===c){const h=e.x<o.x?-1:1,x=e.y<o.y?1:-1;return`L ${u+l*h},${c}Q ${u},${c} ${u},${c+l*x}`}const f=e.x<o.x?1:-1,m=e.y<o.y?-1:1;return`L ${u},${c+l*m}Q ${u},${c} ${u+l*f},${c}`}function Pl({sourceX:e,sourceY:r,sourcePosition:o=Ce.Bottom,targetX:a,targetY:l,targetPosition:u=Ce.Top,borderRadius:c=5,centerX:f,centerY:m,offset:h=20,stepPosition:x=.5}){const[y,g,w,j,E]=DS({source:{x:e,y:r},sourcePosition:o,target:{x:a,y:l},targetPosition:u,center:{x:f,y:m},offset:h,stepPosition:x});return[y.reduce((_,R,b)=>{let P="";return b>0&&b<y.length-1?P=LS(y[b-1],R,y[b+1],c):P=`${b===0?"M":"L"}${R.x} ${R.y}`,_+=P,_},""),g,w,j,E]}function Sp(e){return e&&!!(e.internals.handleBounds||e.handles?.length)&&!!(e.measured.width||e.width||e.initialWidth)}function IS(e){const{sourceNode:r,targetNode:o}=e;if(!Sp(r)||!Sp(o))return null;const a=r.internals.handleBounds||jp(r.handles),l=o.internals.handleBounds||jp(o.handles),u=kp(a?.source??[],e.sourceHandle),c=kp(e.connectionMode===Ni.Strict?l?.target??[]:(l?.target??[]).concat(l?.source??[]),e.targetHandle);if(!u||!c)return e.onError?.("008",ir.error008(u?"target":"source",{id:e.id,sourceHandle:e.sourceHandle,targetHandle:e.targetHandle})),null;const f=u?.position||Ce.Bottom,m=c?.position||Ce.Top,h=Io(r,u,f),x=Io(o,c,m);return{sourceX:h.x,sourceY:h.y,targetX:x.x,targetY:x.y,sourcePosition:f,targetPosition:m}}function jp(e){if(!e)return null;const r=[],o=[];for(const a of e)a.width=a.width??1,a.height=a.height??1,a.type==="source"?r.push(a):a.type==="target"&&o.push(a);return{source:r,target:o}}function Io(e,r,o=Ce.Left,a=!1){const l=(r?.x??0)+e.internals.positionAbsolute.x,u=(r?.y??0)+e.internals.positionAbsolute.y,{width:c,height:f}=r??Cr(e);if(a)return{x:l+c/2,y:u+f/2};switch(r?.position??o){case Ce.Top:return{x:l+c/2,y:u};case Ce.Right:return{x:l+c,y:u+f/2};case Ce.Bottom:return{x:l+c/2,y:u+f};case Ce.Left:return{x:l,y:u+f/2}}}function kp(e,r){return e&&(r?e.find(o=>o.id===r):e[0])||null}function sd(e,r){return e?typeof e=="string"?e:`${r?`${r}__`:""}${Object.keys(e).sort().map(a=>`${a}=${e[a]}`).join("&")}`:""}function zS(e,{id:r,defaultColor:o,defaultMarkerStart:a,defaultMarkerEnd:l}){const u=new Set;return e.reduce((c,f)=>([f.markerStart||a,f.markerEnd||l].forEach(m=>{if(m&&typeof m=="object"){const h=sd(m,r);u.has(h)||(c.push({id:h,color:m.color||o,...m}),u.add(h))}}),c),[]).sort((c,f)=>c.id.localeCompare(f.id))}const Kg=1e3,AS=10,zd={nodeOrigin:[0,0],nodeExtent:Ca,elevateNodesOnSelect:!0,zIndexMode:"basic",defaults:{}},$S={...zd,checkEquality:!0};function Ad(e,r){const o={...e};for(const a in r)r[a]!==void 0&&(o[a]=r[a]);return o}function FS(e,r,o){const a=Ad(zd,o);for(const l of e.values())if(l.parentId)Fd(l,e,r,a);else{const u=Ha(l,a.nodeOrigin),c=ki(l.extent)?l.extent:a.nodeExtent,f=Lo(u,c,Cr(l));l.internals.positionAbsolute=f}}function OS(e,r){if(!e.handles)return e.measured?r?.internals.handleBounds:void 0;const o=[],a=[];for(const l of e.handles){const u={id:l.id,width:l.width??1,height:l.height??1,nodeId:e.id,x:l.x,y:l.y,position:l.position,type:l.type};l.type==="source"?o.push(u):l.type==="target"&&a.push(u)}return{source:o,target:a}}function $d(e){return e==="manual"}function ld(e,r,o,a={}){const l=Ad($S,a),u={i:0},c=new Map(r),f=l?.elevateNodesOnSelect&&!$d(l.zIndexMode)?Kg:0;let m=e.length>0;r.clear(),o.clear();for(const h of e){let x=c.get(h.id);if(l.checkEquality&&h===x?.internals.userNode)r.set(h.id,x);else{const y=Ha(h,l.nodeOrigin),g=ki(h.extent)?h.extent:l.nodeExtent,w=Lo(y,g,Cr(h));x={...l.defaults,...h,measured:{width:h.measured?.width,height:h.measured?.height},internals:{positionAbsolute:w,handleBounds:OS(h,x),z:Gg(h,f,l.zIndexMode),userNode:h}},r.set(h.id,x)}(x.measured===void 0||x.measured.width===void 0||x.measured.height===void 0)&&!x.hidden&&(m=!1),h.parentId&&Fd(x,r,o,a,u)}return m}function HS(e,r){if(!e.parentId)return;const o=r.get(e.parentId);o?o.set(e.id,e):r.set(e.parentId,new Map([[e.id,e]]))}function Fd(e,r,o,a,l){const{elevateNodesOnSelect:u,nodeOrigin:c,nodeExtent:f,zIndexMode:m}=Ad(zd,a),h=e.parentId,x=r.get(h);if(!x){console.warn(`Parent node ${h} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);return}HS(e,o),l&&!x.parentId&&x.internals.rootParentIndex===void 0&&m==="auto"&&(x.internals.rootParentIndex=++l.i,x.internals.z=x.internals.z+l.i*AS),l&&x.internals.rootParentIndex!==void 0&&(l.i=x.internals.rootParentIndex);const y=u&&!$d(m)?Kg:0,{x:g,y:w,z:j}=BS(e,x,c,f,y,m),{positionAbsolute:E}=e.internals,S=g!==E.x||w!==E.y;(S||j!==e.internals.z)&&r.set(e.id,{...e,internals:{...e.internals,positionAbsolute:S?{x:g,y:w}:E,z:j}})}function Gg(e,r,o){const a=Hn(e.zIndex)?e.zIndex:0;return $d(o)?a:a+(e.selected?r:0)}function BS(e,r,o,a,l,u){const{x:c,y:f}=r.internals.positionAbsolute,m=Cr(e),h=Ha(e,o),x=ki(e.extent)?Lo(h,e.extent,m):h;let y=Lo({x:c+x.x,y:f+x.y},a,m);e.extent==="parent"&&(y=Ig(y,m,r));const g=Gg(e,l,u),w=r.internals.z??0;return{x:y.x,y:y.y,z:w>=g?w+1:g}}function Od(e,r,o,a=[0,0]){const l=[],u=new Map;for(const c of e){const f=r.get(c.parentId);if(!f)continue;const m=u.get(c.parentId)?.expandedRect??ji(f),h=Ag(m,c.rect);u.set(c.parentId,{expandedRect:h,parent:f})}return u.size>0&&u.forEach(({expandedRect:c,parent:f},m)=>{const h=f.internals.positionAbsolute,x=Cr(f),y=f.origin??a,g=c.x<h.x?Math.round(Math.abs(h.x-c.x)):0,w=c.y<h.y?Math.round(Math.abs(h.y-c.y)):0,j=Math.max(x.width,Math.round(c.width)),E=Math.max(x.height,Math.round(c.height)),S=(j-x.width)*y[0],_=(E-x.height)*y[1];(g>0||w>0||S||_)&&(l.push({id:m,type:"position",position:{x:f.position.x-g+S,y:f.position.y-w+_}}),o.get(m)?.forEach(R=>{e.some(b=>b.id===R.id)||l.push({id:R.id,type:"position",position:{x:R.position.x+g,y:R.position.y+w}})})),(x.width<c.width||x.height<c.height||g||w)&&l.push({id:m,type:"dimensions",setAttributes:!0,dimensions:{width:j+(g?y[0]*g-S:0),height:E+(w?y[1]*w-_:0)}})}),l}function VS(e,r,o,a,l,u,c){const f=a?.querySelector(".xyflow__viewport");let m=!1;if(!f)return{changes:[],updatedInternals:m};const h=[],x=window.getComputedStyle(f),{m22:y}=new window.DOMMatrixReadOnly(x.transform),g=[];for(const w of e.values()){const j=r.get(w.id);if(!j)continue;if(j.hidden){r.set(j.id,{...j,internals:{...j.internals,handleBounds:void 0}}),m=!0;continue}const E=Id(w.nodeElement),S=j.measured.width!==E.width||j.measured.height!==E.height;if(!!(E.width&&E.height&&(S||!j.internals.handleBounds||w.force))){const R=w.nodeElement.getBoundingClientRect(),b=ki(j.extent)?j.extent:u;let{positionAbsolute:P}=j.internals;j.parentId&&j.extent==="parent"?P=Ig(P,E,r.get(j.parentId)):b&&(P=Lo(P,b,E));const $={...j,measured:E,internals:{...j.internals,positionAbsolute:P,handleBounds:{source:wp("source",w.nodeElement,R,y,j.id),target:wp("target",w.nodeElement,R,y,j.id)}}};r.set(j.id,$),j.parentId&&Fd($,r,o,{nodeOrigin:l,zIndexMode:c}),m=!0,S&&(h.push({id:j.id,type:"dimensions",dimensions:E}),j.expandParent&&j.parentId&&g.push({id:j.id,parentId:j.parentId,rect:ji($,l)}))}}if(g.length>0){const w=Od(g,r,o,l);h.push(...w)}return{changes:h,updatedInternals:m}}async function US({delta:e,panZoom:r,transform:o,translateExtent:a,width:l,height:u}){if(!r||!e.x&&!e.y)return Promise.resolve(!1);const c=await r.setViewportConstrained({x:o[0]+e.x,y:o[1]+e.y,zoom:o[2]},[[0,0],[l,u]],a),f=!!c&&(c.x!==o[0]||c.y!==o[1]||c.k!==o[2]);return Promise.resolve(f)}function Ep(e,r,o,a,l,u){let c=l;const f=a.get(c)||new Map;a.set(c,f.set(o,r)),c=`${l}-${e}`;const m=a.get(c)||new Map;if(a.set(c,m.set(o,r)),u){c=`${l}-${e}-${u}`;const h=a.get(c)||new Map;a.set(c,h.set(o,r))}}function Zg(e,r,o){e.clear(),r.clear();for(const a of o){const{source:l,target:u,sourceHandle:c=null,targetHandle:f=null}=a,m={edgeId:a.id,source:l,target:u,sourceHandle:c,targetHandle:f},h=`${l}-${c}--${u}-${f}`,x=`${u}-${f}--${l}-${c}`;Ep("source",m,x,e,l,c),Ep("target",m,h,e,u,f),r.set(a.id,a)}}function Qg(e,r){if(!e.parentId)return!1;const o=r.get(e.parentId);return o?o.selected?!0:Qg(o,r):!1}function Cp(e,r,o){let a=e;do{if(a?.matches?.(r))return!0;if(a===o)return!1;a=a?.parentElement}while(a);return!1}function WS(e,r,o,a){const l=new Map;for(const[u,c]of e)if((c.selected||c.id===a)&&(!c.parentId||!Qg(c,e))&&(c.draggable||r&&typeof c.draggable>"u")){const f=e.get(u);f&&l.set(u,{id:u,position:f.position||{x:0,y:0},distance:{x:o.x-f.internals.positionAbsolute.x,y:o.y-f.internals.positionAbsolute.y},extent:f.extent,parentId:f.parentId,origin:f.origin,expandParent:f.expandParent,internals:{positionAbsolute:f.internals.positionAbsolute||{x:0,y:0}},measured:{width:f.measured.width??0,height:f.measured.height??0}})}return l}function $c({nodeId:e,dragItems:r,nodeLookup:o,dragging:a=!0}){const l=[];for(const[c,f]of r){const m=o.get(c)?.internals.userNode;m&&l.push({...m,position:f.position,dragging:a})}if(!e)return[l[0],l];const u=o.get(e)?.internals.userNode;return[u?{...u,position:r.get(e)?.position||u.position,dragging:a}:l[0],l]}function XS({dragItems:e,snapGrid:r,x:o,y:a}){const l=e.values().next().value;if(!l)return null;const u={x:o-l.distance.x,y:a-l.distance.y},c=Va(u,r);return{x:c.x-u.x,y:c.y-u.y}}function YS({onNodeMouseDown:e,getStoreItems:r,onDragStart:o,onDrag:a,onDragStop:l}){let u={x:null,y:null},c=0,f=new Map,m=!1,h={x:0,y:0},x=null,y=!1,g=null,w=!1,j=!1,E=null;function S({noDragClassName:R,handleSelector:b,domNode:P,isSelectable:$,nodeId:D,nodeClickDistance:M=0}){g=un(P);function H({x:F,y:L}){const{nodeLookup:k,nodeExtent:A,snapGrid:X,snapToGrid:Q,nodeOrigin:O,onNodeDrag:K,onSelectionDrag:z,onError:T,updateNodePositions:U}=r();u={x:F,y:L};let re=!1;const oe=f.size>1,ue=oe&&A?ad(Ba(f)):null,pe=oe&&Q?XS({dragItems:f,snapGrid:X,x:F,y:L}):null;for(const[he,ie]of f){if(!k.has(he))continue;let me={x:F-ie.distance.x,y:L-ie.distance.y};Q&&(me=pe?{x:Math.round(me.x+pe.x),y:Math.round(me.y+pe.y)}:Va(me,X));let Le=null;if(oe&&A&&!ie.extent&&ue){const{positionAbsolute:Pe}=ie.internals,Ve=Pe.x-ue.x+A[0][0],Qe=Pe.x+ie.measured.width-ue.x2+A[1][0],He=Pe.y-ue.y+A[0][1],ut=Pe.y+ie.measured.height-ue.y2+A[1][1];Le=[[Ve,He],[Qe,ut]]}const{position:ze,positionAbsolute:xe}=Lg({nodeId:he,nextPosition:me,nodeLookup:k,nodeExtent:Le||A,nodeOrigin:O,onError:T});re=re||ie.position.x!==ze.x||ie.position.y!==ze.y,ie.position=ze,ie.internals.positionAbsolute=xe}if(j=j||re,!!re&&(U(f,!0),E&&(a||K||!D&&z))){const[he,ie]=$c({nodeId:D,dragItems:f,nodeLookup:k});a?.(E,f,he,ie),K?.(E,he,ie),D||z?.(E,ie)}}async function Y(){if(!x)return;const{transform:F,panBy:L,autoPanSpeed:k,autoPanOnNodeDrag:A}=r();if(!A){m=!1,cancelAnimationFrame(c);return}const[X,Q]=zg(h,x,k);(X!==0||Q!==0)&&(u.x=(u.x??0)-X/F[2],u.y=(u.y??0)-Q/F[2],await L({x:X,y:Q})&&H(u)),c=requestAnimationFrame(Y)}function B(F){const{nodeLookup:L,multiSelectionActive:k,nodesDraggable:A,transform:X,snapGrid:Q,snapToGrid:O,selectNodesOnDrag:K,onNodeDragStart:z,onSelectionDragStart:T,unselectNodesAndEdges:U}=r();y=!0,(!K||!$)&&!k&&D&&(L.get(D)?.selected||U()),$&&K&&D&&e?.(D);const re=wa(F.sourceEvent,{transform:X,snapGrid:Q,snapToGrid:O,containerBounds:x});if(u=re,f=WS(L,A,re,D),f.size>0&&(o||z||!D&&T)){const[oe,ue]=$c({nodeId:D,dragItems:f,nodeLookup:L});o?.(F.sourceEvent,f,oe,ue),z?.(F.sourceEvent,oe,ue),D||T?.(F.sourceEvent,ue)}}const I=hg().clickDistance(M).on("start",F=>{const{domNode:L,nodeDragThreshold:k,transform:A,snapGrid:X,snapToGrid:Q}=r();x=L?.getBoundingClientRect()||null,w=!1,j=!1,E=F.sourceEvent,k===0&&B(F),u=wa(F.sourceEvent,{transform:A,snapGrid:X,snapToGrid:Q,containerBounds:x}),h=Bn(F.sourceEvent,x)}).on("drag",F=>{const{autoPanOnNodeDrag:L,transform:k,snapGrid:A,snapToGrid:X,nodeDragThreshold:Q,nodeLookup:O}=r(),K=wa(F.sourceEvent,{transform:k,snapGrid:A,snapToGrid:X,containerBounds:x});if(E=F.sourceEvent,(F.sourceEvent.type==="touchmove"&&F.sourceEvent.touches.length>1||D&&!O.has(D))&&(w=!0),!w){if(!m&&L&&y&&(m=!0,Y()),!y){const z=Bn(F.sourceEvent,x),T=z.x-h.x,U=z.y-h.y;Math.sqrt(T*T+U*U)>Q&&B(F)}(u.x!==K.xSnapped||u.y!==K.ySnapped)&&f&&y&&(h=Bn(F.sourceEvent,x),H(K))}}).on("end",F=>{if(!(!y||w)&&(m=!1,y=!1,cancelAnimationFrame(c),f.size>0)){const{nodeLookup:L,updateNodePositions:k,onNodeDragStop:A,onSelectionDragStop:X}=r();if(j&&(k(f,!1),j=!1),l||A||!D&&X){const[Q,O]=$c({nodeId:D,dragItems:f,nodeLookup:L,dragging:!1});l?.(F.sourceEvent,f,Q,O),A?.(F.sourceEvent,Q,O),D||X?.(F.sourceEvent,O)}}}).filter(F=>{const L=F.target;return!F.button&&(!R||!Cp(L,`.${R}`,P))&&(!b||Cp(L,b,P))});g.call(I)}function _(){g?.on(".drag",null)}return{update:S,destroy:_}}function KS(e,r,o){const a=[],l={x:e.x-o,y:e.y-o,width:o*2,height:o*2};for(const u of r.values())Ra(l,ji(u))>0&&a.push(u);return a}const GS=250;function ZS(e,r,o,a){let l=[],u=1/0;const c=KS(e,o,r+GS);for(const f of c){const m=[...f.internals.handleBounds?.source??[],...f.internals.handleBounds?.target??[]];for(const h of m){if(a.nodeId===h.nodeId&&a.type===h.type&&a.id===h.id)continue;const{x,y}=Io(f,h,h.position,!0),g=Math.sqrt(Math.pow(x-e.x,2)+Math.pow(y-e.y,2));g>r||(g<u?(l=[{...h,x,y}],u=g):g===u&&l.push({...h,x,y}))}}if(!l.length)return null;if(l.length>1){const f=a.type==="source"?"target":"source";return l.find(m=>m.type===f)??l[0]}return l[0]}function qg(e,r,o,a,l,u=!1){const c=a.get(e);if(!c)return null;const f=l==="strict"?c.internals.handleBounds?.[r]:[...c.internals.handleBounds?.source??[],...c.internals.handleBounds?.target??[]],m=(o?f?.find(h=>h.id===o):f?.[0])??null;return m&&u?{...m,...Io(c,m,m.position,!0)}:m}function Jg(e,r){return e||(r?.classList.contains("target")?"target":r?.classList.contains("source")?"source":null)}function QS(e,r){let o=null;return r?o=!0:e&&!r&&(o=!1),o}const ex=()=>!0;function qS(e,{connectionMode:r,connectionRadius:o,handleId:a,nodeId:l,edgeUpdaterType:u,isTarget:c,domNode:f,nodeLookup:m,lib:h,autoPanOnConnect:x,flowId:y,panBy:g,cancelConnection:w,onConnectStart:j,onConnect:E,onConnectEnd:S,isValidConnection:_=ex,onReconnectEnd:R,updateConnection:b,getTransform:P,getFromHandle:$,autoPanSpeed:D,dragThreshold:M=1,handleDomNode:H}){const Y=Og(e.target);let B=0,I;const{x:F,y:L}=Bn(e),k=Jg(u,H),A=f?.getBoundingClientRect();let X=!1;if(!A||!k)return;const Q=qg(l,k,a,m,r);if(!Q)return;let O=Bn(e,A),K=!1,z=null,T=!1,U=null;function re(){if(!x||!A)return;const[ze,xe]=zg(O,A,D);g({x:ze,y:xe}),B=requestAnimationFrame(re)}const oe={...Q,nodeId:l,type:k,position:Q.position},ue=m.get(l);let he={inProgress:!0,isValid:null,from:Io(ue,oe,Ce.Left,!0),fromHandle:oe,fromPosition:oe.position,fromNode:ue,to:O,toHandle:null,toPosition:gp[oe.position],toNode:null,pointer:O};function ie(){X=!0,b(he),j?.(e,{nodeId:l,handleId:a,handleType:k})}M===0&&ie();function me(ze){if(!X){const{x:ut,y:en}=Bn(ze),Pt=ut-F,zt=en-L;if(!(Pt*Pt+zt*zt>M*M))return;ie()}if(!$()||!oe){Le(ze);return}const xe=P();O=Bn(ze,A),I=ZS(Ua(O,xe,!1,[1,1]),o,m,oe),K||(re(),K=!0);const Pe=tx(ze,{handle:I,connectionMode:r,fromNodeId:l,fromHandleId:a,fromType:c?"target":"source",isValidConnection:_,doc:Y,lib:h,flowId:y,nodeLookup:m});U=Pe.handleDomNode,z=Pe.connection,T=QS(!!I,Pe.isValid);const Ve=m.get(l),Qe=Ve?Io(Ve,oe,Ce.Left,!0):he.from,He={...he,from:Qe,isValid:T,to:Pe.toHandle&&T?Cl({x:Pe.toHandle.x,y:Pe.toHandle.y},xe):O,toHandle:Pe.toHandle,toPosition:T&&Pe.toHandle?Pe.toHandle.position:gp[oe.position],toNode:Pe.toHandle?m.get(Pe.toHandle.nodeId):null,pointer:O};b(He),he=He}function Le(ze){if(!("touches"in ze&&ze.touches.length>0)){if(X){(I||U)&&z&&T&&E?.(z);const{inProgress:xe,...Pe}=he,Ve={...Pe,toPosition:he.toHandle?he.toPosition:null};S?.(ze,Ve),u&&R?.(ze,Ve)}w(),cancelAnimationFrame(B),K=!1,T=!1,z=null,U=null,Y.removeEventListener("mousemove",me),Y.removeEventListener("mouseup",Le),Y.removeEventListener("touchmove",me),Y.removeEventListener("touchend",Le)}}Y.addEventListener("mousemove",me),Y.addEventListener("mouseup",Le),Y.addEventListener("touchmove",me),Y.addEventListener("touchend",Le)}function tx(e,{handle:r,connectionMode:o,fromNodeId:a,fromHandleId:l,fromType:u,doc:c,lib:f,flowId:m,isValidConnection:h=ex,nodeLookup:x}){const y=u==="target",g=r?c.querySelector(`.${f}-flow__handle[data-id="${m}-${r?.nodeId}-${r?.id}-${r?.type}"]`):null,{x:w,y:j}=Bn(e),E=c.elementFromPoint(w,j),S=E?.classList.contains(`${f}-flow__handle`)?E:g,_={handleDomNode:S,isValid:!1,connection:null,toHandle:null};if(S){const R=Jg(void 0,S),b=S.getAttribute("data-nodeid"),P=S.getAttribute("data-handleid"),$=S.classList.contains("connectable"),D=S.classList.contains("connectableend");if(!b||!R)return _;const M={source:y?b:a,sourceHandle:y?P:l,target:y?a:b,targetHandle:y?l:P};_.connection=M;const Y=$&&D&&(o===Ni.Strict?y&&R==="source"||!y&&R==="target":b!==a||P!==l);_.isValid=Y&&h(M),_.toHandle=qg(b,R,P,x,o,!0)}return _}const ud={onPointerDown:qS,isValid:tx};function JS({domNode:e,panZoom:r,getTransform:o,getViewScale:a}){const l=un(e);function u({translateExtent:f,width:m,height:h,zoomStep:x=1,pannable:y=!0,zoomable:g=!0,inversePan:w=!1}){const j=b=>{if(b.sourceEvent.type!=="wheel"||!r)return;const P=o(),$=b.sourceEvent.ctrlKey&&Ma()?10:1,D=-b.sourceEvent.deltaY*(b.sourceEvent.deltaMode===1?.05:b.sourceEvent.deltaMode?1:.002)*x,M=P[2]*Math.pow(2,D*$);r.scaleTo(M)};let E=[0,0];const S=b=>{(b.sourceEvent.type==="mousedown"||b.sourceEvent.type==="touchstart")&&(E=[b.sourceEvent.clientX??b.sourceEvent.touches[0].clientX,b.sourceEvent.clientY??b.sourceEvent.touches[0].clientY])},_=b=>{const P=o();if(b.sourceEvent.type!=="mousemove"&&b.sourceEvent.type!=="touchmove"||!r)return;const $=[b.sourceEvent.clientX??b.sourceEvent.touches[0].clientX,b.sourceEvent.clientY??b.sourceEvent.touches[0].clientY],D=[$[0]-E[0],$[1]-E[1]];E=$;const M=a()*Math.max(P[2],Math.log(P[2]))*(w?-1:1),H={x:P[0]-D[0]*M,y:P[1]-D[1]*M},Y=[[0,0],[m,h]];r.setViewportConstrained({x:H.x,y:H.y,zoom:P[2]},Y,f)},R=Cg().on("start",S).on("zoom",y?_:null).on("zoom.wheel",g?j:null);l.call(R,{})}function c(){l.on("zoom",null)}return{update:u,destroy:c,pointer:Fn}}const Hl=e=>({x:e.x,y:e.y,zoom:e.k}),Fc=({x:e,y:r,zoom:o})=>$l.translate(e,r).scale(o),gi=(e,r)=>e.target.closest(`.${r}`),nx=(e,r)=>r===2&&Array.isArray(e)&&e.includes(2),ej=e=>((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2,Oc=(e,r=0,o=ej,a=()=>{})=>{const l=typeof r=="number"&&r>0;return l||a(),l?e.transition().duration(r).ease(o).on("end",a):e},rx=e=>{const r=e.ctrlKey&&Ma()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*r};function tj({zoomPanValues:e,noWheelClassName:r,d3Selection:o,d3Zoom:a,panOnScrollMode:l,panOnScrollSpeed:u,zoomOnPinch:c,onPanZoomStart:f,onPanZoom:m,onPanZoomEnd:h}){return x=>{if(gi(x,r))return x.ctrlKey&&x.preventDefault(),!1;x.preventDefault(),x.stopImmediatePropagation();const y=o.property("__zoom").k||1;if(x.ctrlKey&&c){const S=Fn(x),_=rx(x),R=y*Math.pow(2,_);a.scaleTo(o,R,S,x);return}const g=x.deltaMode===1?20:1;let w=l===Po.Vertical?0:x.deltaX*g,j=l===Po.Horizontal?0:x.deltaY*g;!Ma()&&x.shiftKey&&l!==Po.Vertical&&(w=x.deltaY*g,j=0),a.translateBy(o,-(w/y)*u,-(j/y)*u,{internal:!0});const E=Hl(o.property("__zoom"));clearTimeout(e.panScrollTimeout),e.isPanScrolling?(m?.(x,E),e.panScrollTimeout=setTimeout(()=>{h?.(x,E),e.isPanScrolling=!1},150)):(e.isPanScrolling=!0,f?.(x,E))}}function nj({noWheelClassName:e,preventScrolling:r,d3ZoomHandler:o}){return function(a,l){const u=a.type==="wheel",c=!r&&u&&!a.ctrlKey,f=gi(a,e);if(a.ctrlKey&&u&&f&&a.preventDefault(),c||f)return null;a.preventDefault(),o.call(this,a,l)}}function rj({zoomPanValues:e,onDraggingChange:r,onPanZoomStart:o}){return a=>{if(a.sourceEvent?.internal)return;const l=Hl(a.transform);e.mouseButton=a.sourceEvent?.button||0,e.isZoomingOrPanning=!0,e.prevViewport=l,a.sourceEvent?.type==="mousedown"&&r(!0),o&&o?.(a.sourceEvent,l)}}function oj({zoomPanValues:e,panOnDrag:r,onPaneContextMenu:o,onTransformChange:a,onPanZoom:l}){return u=>{e.usedRightMouseButton=!!(o&&nx(r,e.mouseButton??0)),u.sourceEvent?.sync||a([u.transform.x,u.transform.y,u.transform.k]),l&&!u.sourceEvent?.internal&&l?.(u.sourceEvent,Hl(u.transform))}}function ij({zoomPanValues:e,panOnDrag:r,panOnScroll:o,onDraggingChange:a,onPanZoomEnd:l,onPaneContextMenu:u}){return c=>{if(!c.sourceEvent?.internal&&(e.isZoomingOrPanning=!1,u&&nx(r,e.mouseButton??0)&&!e.usedRightMouseButton&&c.sourceEvent&&u(c.sourceEvent),e.usedRightMouseButton=!1,a(!1),l)){const f=Hl(c.transform);e.prevViewport=f,clearTimeout(e.timerId),e.timerId=setTimeout(()=>{l?.(c.sourceEvent,f)},o?150:0)}}}function aj({zoomActivationKeyPressed:e,zoomOnScroll:r,zoomOnPinch:o,panOnDrag:a,panOnScroll:l,zoomOnDoubleClick:u,userSelectionActive:c,noWheelClassName:f,noPanClassName:m,lib:h,connectionInProgress:x}){return y=>{const g=e||r,w=o&&y.ctrlKey,j=y.type==="wheel";if(y.button===1&&y.type==="mousedown"&&(gi(y,`${h}-flow__node`)||gi(y,`${h}-flow__edge`)))return!0;if(!a&&!g&&!l&&!u&&!o||c||x&&!j||gi(y,f)&&j||gi(y,m)&&(!j||l&&j&&!e)||!o&&y.ctrlKey&&j)return!1;if(!o&&y.type==="touchstart"&&y.touches?.length>1)return y.preventDefault(),!1;if(!g&&!l&&!w&&j||!a&&(y.type==="mousedown"||y.type==="touchstart")||Array.isArray(a)&&!a.includes(y.button)&&y.type==="mousedown")return!1;const E=Array.isArray(a)&&a.includes(y.button)||!y.button||y.button<=1;return(!y.ctrlKey||j)&&E}}function sj({domNode:e,minZoom:r,maxZoom:o,translateExtent:a,viewport:l,onPanZoom:u,onPanZoomStart:c,onPanZoomEnd:f,onDraggingChange:m}){const h={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},x=e.getBoundingClientRect(),y=Cg().scaleExtent([r,o]).translateExtent(a),g=un(e).call(y);R({x:l.x,y:l.y,zoom:Si(l.zoom,r,o)},[[0,0],[x.width,x.height]],a);const w=g.on("wheel.zoom"),j=g.on("dblclick.zoom");y.wheelDelta(rx);function E(I,F){return g?new Promise(L=>{y?.interpolate(F?.interpolate==="linear"?va:ml).transform(Oc(g,F?.duration,F?.ease,()=>L(!0)),I)}):Promise.resolve(!1)}function S({noWheelClassName:I,noPanClassName:F,onPaneContextMenu:L,userSelectionActive:k,panOnScroll:A,panOnDrag:X,panOnScrollMode:Q,panOnScrollSpeed:O,preventScrolling:K,zoomOnPinch:z,zoomOnScroll:T,zoomOnDoubleClick:U,zoomActivationKeyPressed:re,lib:oe,onTransformChange:ue,connectionInProgress:pe,paneClickDistance:he,selectionOnDrag:ie}){k&&!h.isZoomingOrPanning&&_();const me=A&&!re&&!k;y.clickDistance(ie?1/0:!Hn(he)||he<0?0:he);const Le=me?tj({zoomPanValues:h,noWheelClassName:I,d3Selection:g,d3Zoom:y,panOnScrollMode:Q,panOnScrollSpeed:O,zoomOnPinch:z,onPanZoomStart:c,onPanZoom:u,onPanZoomEnd:f}):nj({noWheelClassName:I,preventScrolling:K,d3ZoomHandler:w});if(g.on("wheel.zoom",Le,{passive:!1}),!k){const xe=rj({zoomPanValues:h,onDraggingChange:m,onPanZoomStart:c});y.on("start",xe);const Pe=oj({zoomPanValues:h,panOnDrag:X,onPaneContextMenu:!!L,onPanZoom:u,onTransformChange:ue});y.on("zoom",Pe);const Ve=ij({zoomPanValues:h,panOnDrag:X,panOnScroll:A,onPaneContextMenu:L,onPanZoomEnd:f,onDraggingChange:m});y.on("end",Ve)}const ze=aj({zoomActivationKeyPressed:re,panOnDrag:X,zoomOnScroll:T,panOnScroll:A,zoomOnDoubleClick:U,zoomOnPinch:z,userSelectionActive:k,noPanClassName:F,noWheelClassName:I,lib:oe,connectionInProgress:pe});y.filter(ze),U?g.on("dblclick.zoom",j):g.on("dblclick.zoom",null)}function _(){y.on("zoom",null)}async function R(I,F,L){const k=Fc(I),A=y?.constrain()(k,F,L);return A&&await E(A),new Promise(X=>X(A))}async function b(I,F){const L=Fc(I);return await E(L,F),new Promise(k=>k(L))}function P(I){if(g){const F=Fc(I),L=g.property("__zoom");(L.k!==I.zoom||L.x!==I.x||L.y!==I.y)&&y?.transform(g,F,null,{sync:!0})}}function $(){const I=g?Eg(g.node()):{x:0,y:0,k:1};return{x:I.x,y:I.y,zoom:I.k}}function D(I,F){return g?new Promise(L=>{y?.interpolate(F?.interpolate==="linear"?va:ml).scaleTo(Oc(g,F?.duration,F?.ease,()=>L(!0)),I)}):Promise.resolve(!1)}function M(I,F){return g?new Promise(L=>{y?.interpolate(F?.interpolate==="linear"?va:ml).scaleBy(Oc(g,F?.duration,F?.ease,()=>L(!0)),I)}):Promise.resolve(!1)}function H(I){y?.scaleExtent(I)}function Y(I){y?.translateExtent(I)}function B(I){const F=!Hn(I)||I<0?0:I;y?.clickDistance(F)}return{update:S,destroy:_,setViewport:b,setViewportConstrained:R,getViewport:$,scaleTo:D,scaleBy:M,setScaleExtent:H,setTranslateExtent:Y,syncViewport:P,setClickDistance:B}}var Ei;(function(e){e.Line="line",e.Handle="handle"})(Ei||(Ei={}));function lj({width:e,prevWidth:r,height:o,prevHeight:a,affectsX:l,affectsY:u}){const c=e-r,f=o-a,m=[c>0?1:c<0?-1:0,f>0?1:f<0?-1:0];return c&&l&&(m[0]=m[0]*-1),f&&u&&(m[1]=m[1]*-1),m}function Pp(e){const r=e.includes("right")||e.includes("left"),o=e.includes("bottom")||e.includes("top"),a=e.includes("left"),l=e.includes("top");return{isHorizontal:r,isVertical:o,affectsX:a,affectsY:l}}function qr(e,r){return Math.max(0,r-e)}function Jr(e,r){return Math.max(0,e-r)}function al(e,r,o){return Math.max(0,r-e,e-o)}function Rp(e,r){return e?!r:r}function uj(e,r,o,a,l,u,c,f){let{affectsX:m,affectsY:h}=r;const{isHorizontal:x,isVertical:y}=r,g=x&&y,{xSnapped:w,ySnapped:j}=o,{minWidth:E,maxWidth:S,minHeight:_,maxHeight:R}=a,{x:b,y:P,width:$,height:D,aspectRatio:M}=e;let H=Math.floor(x?w-e.pointerX:0),Y=Math.floor(y?j-e.pointerY:0);const B=$+(m?-H:H),I=D+(h?-Y:Y),F=-u[0]*$,L=-u[1]*D;let k=al(B,E,S),A=al(I,_,R);if(c){let O=0,K=0;m&&H<0?O=qr(b+H+F,c[0][0]):!m&&H>0&&(O=Jr(b+B+F,c[1][0])),h&&Y<0?K=qr(P+Y+L,c[0][1]):!h&&Y>0&&(K=Jr(P+I+L,c[1][1])),k=Math.max(k,O),A=Math.max(A,K)}if(f){let O=0,K=0;m&&H>0?O=Jr(b+H,f[0][0]):!m&&H<0&&(O=qr(b+B,f[1][0])),h&&Y>0?K=Jr(P+Y,f[0][1]):!h&&Y<0&&(K=qr(P+I,f[1][1])),k=Math.max(k,O),A=Math.max(A,K)}if(l){if(x){const O=al(B/M,_,R)*M;if(k=Math.max(k,O),c){let K=0;!m&&!h||m&&!h&&g?K=Jr(P+L+B/M,c[1][1])*M:K=qr(P+L+(m?H:-H)/M,c[0][1])*M,k=Math.max(k,K)}if(f){let K=0;!m&&!h||m&&!h&&g?K=qr(P+B/M,f[1][1])*M:K=Jr(P+(m?H:-H)/M,f[0][1])*M,k=Math.max(k,K)}}if(y){const O=al(I*M,E,S)/M;if(A=Math.max(A,O),c){let K=0;!m&&!h||h&&!m&&g?K=Jr(b+I*M+F,c[1][0])/M:K=qr(b+(h?Y:-Y)*M+F,c[0][0])/M,A=Math.max(A,K)}if(f){let K=0;!m&&!h||h&&!m&&g?K=qr(b+I*M,f[1][0])/M:K=Jr(b+(h?Y:-Y)*M,f[0][0])/M,A=Math.max(A,K)}}}Y=Y+(Y<0?A:-A),H=H+(H<0?k:-k),l&&(g?B>I*M?Y=(Rp(m,h)?-H:H)/M:H=(Rp(m,h)?-Y:Y)*M:x?(Y=H/M,h=m):(H=Y*M,m=h));const X=m?b+H:b,Q=h?P+Y:P;return{width:$+(m?-H:H),height:D+(h?-Y:Y),x:u[0]*H*(m?-1:1)+X,y:u[1]*Y*(h?-1:1)+Q}}const ox={width:0,height:0,x:0,y:0},cj={...ox,pointerX:0,pointerY:0,aspectRatio:1};function dj(e){return[[0,0],[e.measured.width,e.measured.height]]}function fj(e,r,o){const a=r.position.x+e.position.x,l=r.position.y+e.position.y,u=e.measured.width??0,c=e.measured.height??0,f=o[0]*u,m=o[1]*c;return[[a-f,l-m],[a+u-f,l+c-m]]}function hj({domNode:e,nodeId:r,getStoreItems:o,onChange:a,onEnd:l}){const u=un(e);let c={controlDirection:Pp("bottom-right"),boundaries:{minWidth:0,minHeight:0,maxWidth:Number.MAX_VALUE,maxHeight:Number.MAX_VALUE},resizeDirection:void 0,keepAspectRatio:!1};function f({controlPosition:h,boundaries:x,keepAspectRatio:y,resizeDirection:g,onResizeStart:w,onResize:j,onResizeEnd:E,shouldResize:S}){let _={...ox},R={...cj};c={boundaries:x,resizeDirection:g,keepAspectRatio:y,controlDirection:Pp(h)};let b,P=null,$=[],D,M,H,Y=!1;const B=hg().on("start",I=>{const{nodeLookup:F,transform:L,snapGrid:k,snapToGrid:A,nodeOrigin:X,paneDomNode:Q}=o();if(b=F.get(r),!b)return;P=Q?.getBoundingClientRect()??null;const{xSnapped:O,ySnapped:K}=wa(I.sourceEvent,{transform:L,snapGrid:k,snapToGrid:A,containerBounds:P});_={width:b.measured.width??0,height:b.measured.height??0,x:b.position.x??0,y:b.position.y??0},R={..._,pointerX:O,pointerY:K,aspectRatio:_.width/_.height},D=void 0,b.parentId&&(b.extent==="parent"||b.expandParent)&&(D=F.get(b.parentId),M=D&&b.extent==="parent"?dj(D):void 0),$=[],H=void 0;for(const[z,T]of F)if(T.parentId===r&&($.push({id:z,position:{...T.position},extent:T.extent}),T.extent==="parent"||T.expandParent)){const U=fj(T,b,T.origin??X);H?H=[[Math.min(U[0][0],H[0][0]),Math.min(U[0][1],H[0][1])],[Math.max(U[1][0],H[1][0]),Math.max(U[1][1],H[1][1])]]:H=U}w?.(I,{..._})}).on("drag",I=>{const{transform:F,snapGrid:L,snapToGrid:k,nodeOrigin:A}=o(),X=wa(I.sourceEvent,{transform:F,snapGrid:L,snapToGrid:k,containerBounds:P}),Q=[];if(!b)return;const{x:O,y:K,width:z,height:T}=_,U={},re=b.origin??A,{width:oe,height:ue,x:pe,y:he}=uj(R,c.controlDirection,X,c.boundaries,c.keepAspectRatio,re,M,H),ie=oe!==z,me=ue!==T,Le=pe!==O&&ie,ze=he!==K&&me;if(!Le&&!ze&&!ie&&!me)return;if((Le||ze||re[0]===1||re[1]===1)&&(U.x=Le?pe:_.x,U.y=ze?he:_.y,_.x=U.x,_.y=U.y,$.length>0)){const Qe=pe-O,He=he-K;for(const ut of $)ut.position={x:ut.position.x-Qe+re[0]*(oe-z),y:ut.position.y-He+re[1]*(ue-T)},Q.push(ut)}if((ie||me)&&(U.width=ie&&(!c.resizeDirection||c.resizeDirection==="horizontal")?oe:_.width,U.height=me&&(!c.resizeDirection||c.resizeDirection==="vertical")?ue:_.height,_.width=U.width,_.height=U.height),D&&b.expandParent){const Qe=re[0]*(U.width??0);U.x&&U.x<Qe&&(_.x=Qe,R.x=R.x-(U.x-Qe));const He=re[1]*(U.height??0);U.y&&U.y<He&&(_.y=He,R.y=R.y-(U.y-He))}const xe=lj({width:_.width,prevWidth:z,height:_.height,prevHeight:T,affectsX:c.controlDirection.affectsX,affectsY:c.controlDirection.affectsY}),Pe={..._,direction:xe};S?.(I,Pe)!==!1&&(Y=!0,j?.(I,Pe),a(U,Q))}).on("end",I=>{Y&&(E?.(I,{..._}),l?.({..._}),Y=!1)});u.call(B)}function m(){u.on(".drag",null)}return{update:f,destroy:m}}var Hc={exports:{}},Bc={},Vc={exports:{}},Uc={};var Mp;function mj(){if(Mp)return Uc;Mp=1;var e=Da();function r(y,g){return y===g&&(y!==0||1/y===1/g)||y!==y&&g!==g}var o=typeof Object.is=="function"?Object.is:r,a=e.useState,l=e.useEffect,u=e.useLayoutEffect,c=e.useDebugValue;function f(y,g){var w=g(),j=a({inst:{value:w,getSnapshot:g}}),E=j[0].inst,S=j[1];return u(function(){E.value=w,E.getSnapshot=g,m(E)&&S({inst:E})},[y,w,g]),l(function(){return m(E)&&S({inst:E}),y(function(){m(E)&&S({inst:E})})},[y]),c(w),w}function m(y){var g=y.getSnapshot;y=y.value;try{var w=g();return!o(y,w)}catch{return!0}}function h(y,g){return g()}var x=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?h:f;return Uc.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:x,Uc}var Tp;function pj(){return Tp||(Tp=1,Vc.exports=mj()),Vc.exports}var Dp;function gj(){if(Dp)return Bc;Dp=1;var e=Da(),r=pj();function o(h,x){return h===x&&(h!==0||1/h===1/x)||h!==h&&x!==x}var a=typeof Object.is=="function"?Object.is:o,l=r.useSyncExternalStore,u=e.useRef,c=e.useEffect,f=e.useMemo,m=e.useDebugValue;return Bc.useSyncExternalStoreWithSelector=function(h,x,y,g,w){var j=u(null);if(j.current===null){var E={hasValue:!1,value:null};j.current=E}else E=j.current;j=f(function(){function _(D){if(!R){if(R=!0,b=D,D=g(D),w!==void 0&&E.hasValue){var M=E.value;if(w(M,D))return P=M}return P=D}if(M=P,a(b,D))return M;var H=g(D);return w!==void 0&&w(M,H)?(b=D,M):(b=D,P=H)}var R=!1,b,P,$=y===void 0?null:y;return[function(){return _(x())},$===null?void 0:function(){return _($())}]},[x,y,g,w]);var S=l(h,j[0],j[1]);return c(function(){E.hasValue=!0,E.value=S},[S]),m(S),S},Bc}var Lp;function xj(){return Lp||(Lp=1,Hc.exports=gj()),Hc.exports}var yj=xj();const vj=v0(yj),wj={},Ip=e=>{let r;const o=new Set,a=(x,y)=>{const g=typeof x=="function"?x(r):x;if(!Object.is(g,r)){const w=r;r=y??(typeof g!="object"||g===null)?g:Object.assign({},r,g),o.forEach(j=>j(r,w))}},l=()=>r,m={setState:a,getState:l,getInitialState:()=>h,subscribe:x=>(o.add(x),()=>o.delete(x)),destroy:()=>{(wj?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),o.clear()}},h=r=e(a,l,m);return m},bj=e=>e?Ip(e):Ip,{useDebugValue:_j}=w0,{useSyncExternalStoreWithSelector:Nj}=vj,Sj=e=>e;function ix(e,r=Sj,o){const a=Nj(e.subscribe,e.getState,e.getServerState||e.getInitialState,r,o);return _j(a),a}const zp=(e,r)=>{const o=bj(e),a=(l,u=r)=>ix(o,l,u);return Object.assign(a,o),a},jj=(e,r)=>e?zp(e,r):zp;function ot(e,r){if(Object.is(e,r))return!0;if(typeof e!="object"||e===null||typeof r!="object"||r===null)return!1;if(e instanceof Map&&r instanceof Map){if(e.size!==r.size)return!1;for(const[a,l]of e)if(!Object.is(l,r.get(a)))return!1;return!0}if(e instanceof Set&&r instanceof Set){if(e.size!==r.size)return!1;for(const a of e)if(!r.has(a))return!1;return!0}const o=Object.keys(e);if(o.length!==Object.keys(r).length)return!1;for(const a of o)if(!Object.prototype.hasOwnProperty.call(r,a)||!Object.is(e[a],r[a]))return!1;return!0}const Bl=N.createContext(null),kj=Bl.Provider,ax=ir.error001();function We(e,r){const o=N.useContext(Bl);if(o===null)throw new Error(ax);return ix(o,e,r)}function it(){const e=N.useContext(Bl);if(e===null)throw new Error(ax);return N.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe}),[e])}const Ap={display:"none"},Ej={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},sx="react-flow__node-desc",lx="react-flow__edge-desc",Cj="react-flow__aria-live",Pj=e=>e.ariaLiveMessage,Rj=e=>e.ariaLabelConfig;function Mj({rfId:e}){const r=We(Pj);return s.jsx("div",{id:`${Cj}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:Ej,children:r})}function Tj({rfId:e,disableKeyboardA11y:r}){const o=We(Rj);return s.jsxs(s.Fragment,{children:[s.jsx("div",{id:`${sx}-${e}`,style:Ap,children:r?o["node.a11yDescription.default"]:o["node.a11yDescription.keyboardDisabled"]}),s.jsx("div",{id:`${lx}-${e}`,style:Ap,children:o["edge.a11yDescription.default"]}),!r&&s.jsx(Mj,{rfId:e})]})}const Vl=N.forwardRef(({position:e="top-left",children:r,className:o,style:a,...l},u)=>{const c=`${e}`.split("-");return s.jsx("div",{className:gt(["react-flow__panel",o,...c]),style:a,ref:u,...l,children:r})});Vl.displayName="Panel";function Dj({proOptions:e,position:r="bottom-right"}){return e?.hideAttribution?null:s.jsx(Vl,{position:r,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev",children:s.jsx("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution",children:"React Flow"})})}const Lj=e=>{const r=[],o=[];for(const[,a]of e.nodeLookup)a.selected&&r.push(a.internals.userNode);for(const[,a]of e.edgeLookup)a.selected&&o.push(a);return{selectedNodes:r,selectedEdges:o}},sl=e=>e.id;function Ij(e,r){return ot(e.selectedNodes.map(sl),r.selectedNodes.map(sl))&&ot(e.selectedEdges.map(sl),r.selectedEdges.map(sl))}function zj({onSelectionChange:e}){const r=it(),{selectedNodes:o,selectedEdges:a}=We(Lj,Ij);return N.useEffect(()=>{const l={nodes:o,edges:a};e?.(l),r.getState().onSelectionChangeHandlers.forEach(u=>u(l))},[o,a,e]),null}const Aj=e=>!!e.onSelectionChangeHandlers;function $j({onSelectionChange:e}){const r=We(Aj);return e||r?s.jsx(zj,{onSelectionChange:e}):null}const ux=[0,0],Fj={x:0,y:0,zoom:1},Oj=["nodes","edges","defaultNodes","defaultEdges","onConnect","onConnectStart","onConnectEnd","onClickConnectStart","onClickConnectEnd","nodesDraggable","autoPanOnNodeFocus","nodesConnectable","nodesFocusable","edgesFocusable","edgesReconnectable","elevateNodesOnSelect","elevateEdgesOnSelect","minZoom","maxZoom","nodeExtent","onNodesChange","onEdgesChange","elementsSelectable","connectionMode","snapGrid","snapToGrid","translateExtent","connectOnClick","defaultEdgeOptions","fitView","fitViewOptions","onNodesDelete","onEdgesDelete","onDelete","onNodeDrag","onNodeDragStart","onNodeDragStop","onSelectionDrag","onSelectionDragStart","onSelectionDragStop","onMoveStart","onMove","onMoveEnd","noPanClassName","nodeOrigin","autoPanOnConnect","autoPanOnNodeDrag","onError","connectionRadius","isValidConnection","selectNodesOnDrag","nodeDragThreshold","connectionDragThreshold","onBeforeDelete","debug","autoPanSpeed","ariaLabelConfig","zIndexMode"],$p=[...Oj,"rfId"],Hj=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges}),Fp={translateExtent:Ca,nodeOrigin:ux,minZoom:.5,maxZoom:2,elementsSelectable:!0,noPanClassName:"nopan",rfId:"1"};function Bj(e){const{setNodes:r,setEdges:o,setMinZoom:a,setMaxZoom:l,setTranslateExtent:u,setNodeExtent:c,reset:f,setDefaultNodesAndEdges:m}=We(Hj,ot),h=it();N.useEffect(()=>(m(e.defaultNodes,e.defaultEdges),()=>{x.current=Fp,f()}),[]);const x=N.useRef(Fp);return N.useEffect(()=>{for(const y of $p){const g=e[y],w=x.current[y];g!==w&&(typeof e[y]>"u"||(y==="nodes"?r(g):y==="edges"?o(g):y==="minZoom"?a(g):y==="maxZoom"?l(g):y==="translateExtent"?u(g):y==="nodeExtent"?c(g):y==="ariaLabelConfig"?h.setState({ariaLabelConfig:kS(g)}):y==="fitView"?h.setState({fitViewQueued:g}):y==="fitViewOptions"?h.setState({fitViewOptions:g}):h.setState({[y]:g})))}x.current=e},$p.map(y=>e[y])),null}function Op(){return typeof window>"u"||!window.matchMedia?null:window.matchMedia("(prefers-color-scheme: dark)")}function Vj(e){const[r,o]=N.useState(e==="system"?null:e);return N.useEffect(()=>{if(e!=="system"){o(e);return}const a=Op(),l=()=>o(a?.matches?"dark":"light");return l(),a?.addEventListener("change",l),()=>{a?.removeEventListener("change",l)}},[e]),r!==null?r:Op()?.matches?"dark":"light"}const Hp=typeof document<"u"?document:null;function Ta(e=null,r={target:Hp,actInsideInputWithModifier:!0}){const[o,a]=N.useState(!1),l=N.useRef(!1),u=N.useRef(new Set([])),[c,f]=N.useMemo(()=>{if(e!==null){const h=(Array.isArray(e)?e:[e]).filter(y=>typeof y=="string").map(y=>y.replace("+",`
`).replace(`

`,`
+`).split(`
`)),x=h.reduce((y,g)=>y.concat(...g),[]);return[h,x]}return[[],[]]},[e]);return N.useEffect(()=>{const m=r?.target??Hp,h=r?.actInsideInputWithModifier??!0;if(e!==null){const x=w=>{if(l.current=w.ctrlKey||w.metaKey||w.shiftKey||w.altKey,(!l.current||l.current&&!h)&&Hg(w))return!1;const E=Vp(w.code,f);if(u.current.add(w[E]),Bp(c,u.current,!1)){const S=w.composedPath?.()?.[0]||w.target,_=S?.nodeName==="BUTTON"||S?.nodeName==="A";r.preventDefault!==!1&&(l.current||!_)&&w.preventDefault(),a(!0)}},y=w=>{const j=Vp(w.code,f);Bp(c,u.current,!0)?(a(!1),u.current.clear()):u.current.delete(w[j]),w.key==="Meta"&&u.current.clear(),l.current=!1},g=()=>{u.current.clear(),a(!1)};return m?.addEventListener("keydown",x),m?.addEventListener("keyup",y),window.addEventListener("blur",g),window.addEventListener("contextmenu",g),()=>{m?.removeEventListener("keydown",x),m?.removeEventListener("keyup",y),window.removeEventListener("blur",g),window.removeEventListener("contextmenu",g)}}},[e,a]),o}function Bp(e,r,o){return e.filter(a=>o||a.length===r.size).some(a=>a.every(l=>r.has(l)))}function Vp(e,r){return r.includes(e)?"code":"key"}const Uj=()=>{const e=it();return N.useMemo(()=>({zoomIn:r=>{const{panZoom:o}=e.getState();return o?o.scaleBy(1.2,{duration:r?.duration}):Promise.resolve(!1)},zoomOut:r=>{const{panZoom:o}=e.getState();return o?o.scaleBy(1/1.2,{duration:r?.duration}):Promise.resolve(!1)},zoomTo:(r,o)=>{const{panZoom:a}=e.getState();return a?a.scaleTo(r,{duration:o?.duration}):Promise.resolve(!1)},getZoom:()=>e.getState().transform[2],setViewport:async(r,o)=>{const{transform:[a,l,u],panZoom:c}=e.getState();return c?(await c.setViewport({x:r.x??a,y:r.y??l,zoom:r.zoom??u},o),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>{const[r,o,a]=e.getState().transform;return{x:r,y:o,zoom:a}},setCenter:async(r,o,a)=>e.getState().setCenter(r,o,a),fitBounds:async(r,o)=>{const{width:a,height:l,minZoom:u,maxZoom:c,panZoom:f}=e.getState(),m=Ld(r,a,l,u,c,o?.padding??.1);return f?(await f.setViewport(m,{duration:o?.duration,ease:o?.ease,interpolate:o?.interpolate}),Promise.resolve(!0)):Promise.resolve(!1)},screenToFlowPosition:(r,o={})=>{const{transform:a,snapGrid:l,snapToGrid:u,domNode:c}=e.getState();if(!c)return r;const{x:f,y:m}=c.getBoundingClientRect(),h={x:r.x-f,y:r.y-m},x=o.snapGrid??l,y=o.snapToGrid??u;return Ua(h,a,y,x)},flowToScreenPosition:r=>{const{transform:o,domNode:a}=e.getState();if(!a)return r;const{x:l,y:u}=a.getBoundingClientRect(),c=Cl(r,o);return{x:c.x+l,y:c.y+u}}}),[])};function cx(e,r){const o=[],a=new Map,l=[];for(const u of e)if(u.type==="add"){l.push(u);continue}else if(u.type==="remove"||u.type==="replace")a.set(u.id,[u]);else{const c=a.get(u.id);c?c.push(u):a.set(u.id,[u])}for(const u of r){const c=a.get(u.id);if(!c){o.push(u);continue}if(c[0].type==="remove")continue;if(c[0].type==="replace"){o.push({...c[0].item});continue}const f={...u};for(const m of c)Wj(m,f);o.push(f)}return l.length&&l.forEach(u=>{u.index!==void 0?o.splice(u.index,0,{...u.item}):o.push({...u.item})}),o}function Wj(e,r){switch(e.type){case"select":{r.selected=e.selected;break}case"position":{typeof e.position<"u"&&(r.position=e.position),typeof e.dragging<"u"&&(r.dragging=e.dragging);break}case"dimensions":{typeof e.dimensions<"u"&&(r.measured={...e.dimensions},e.setAttributes&&((e.setAttributes===!0||e.setAttributes==="width")&&(r.width=e.dimensions.width),(e.setAttributes===!0||e.setAttributes==="height")&&(r.height=e.dimensions.height))),typeof e.resizing=="boolean"&&(r.resizing=e.resizing);break}}}function dx(e,r){return cx(e,r)}function fx(e,r){return cx(e,r)}function jo(e,r){return{id:e,type:"select",selected:r}}function xi(e,r=new Set,o=!1){const a=[];for(const[l,u]of e){const c=r.has(l);!(u.selected===void 0&&!c)&&u.selected!==c&&(o&&(u.selected=c),a.push(jo(u.id,c)))}return a}function Up({items:e=[],lookup:r}){const o=[],a=new Map(e.map(l=>[l.id,l]));for(const[l,u]of e.entries()){const c=r.get(u.id),f=c?.internals?.userNode??c;f!==void 0&&f!==u&&o.push({id:u.id,item:u,type:"replace"}),f===void 0&&o.push({item:u,type:"add",index:l})}for(const[l]of r)a.get(l)===void 0&&o.push({id:l,type:"remove"});return o}function Wp(e){return{id:e.id,type:"remove"}}const Xp=e=>gS(e),Xj=e=>Dg(e);function hx(e){return N.forwardRef(e)}const Yj=typeof window<"u"?N.useLayoutEffect:N.useEffect;function Yp(e){const[r,o]=N.useState(BigInt(0)),[a]=N.useState(()=>Kj(()=>o(l=>l+BigInt(1))));return Yj(()=>{const l=a.get();l.length&&(e(l),a.reset())},[r]),a}function Kj(e){let r=[];return{get:()=>r,reset:()=>{r=[]},push:o=>{r.push(o),e()}}}const mx=N.createContext(null);function Gj({children:e}){const r=it(),o=N.useCallback(f=>{const{nodes:m=[],setNodes:h,hasDefaultNodes:x,onNodesChange:y,nodeLookup:g,fitViewQueued:w,onNodesChangeMiddlewareMap:j}=r.getState();let E=m;for(const _ of f)E=typeof _=="function"?_(E):_;let S=Up({items:E,lookup:g});for(const _ of j.values())S=_(S);x&&h(E),S.length>0?y?.(S):w&&window.requestAnimationFrame(()=>{const{fitViewQueued:_,nodes:R,setNodes:b}=r.getState();_&&b(R)})},[]),a=Yp(o),l=N.useCallback(f=>{const{edges:m=[],setEdges:h,hasDefaultEdges:x,onEdgesChange:y,edgeLookup:g}=r.getState();let w=m;for(const j of f)w=typeof j=="function"?j(w):j;x?h(w):y&&y(Up({items:w,lookup:g}))},[]),u=Yp(l),c=N.useMemo(()=>({nodeQueue:a,edgeQueue:u}),[]);return s.jsx(mx.Provider,{value:c,children:e})}function Zj(){const e=N.useContext(mx);if(!e)throw new Error("useBatchContext must be used within a BatchProvider");return e}const Qj=e=>!!e.panZoom;function Hd(){const e=Uj(),r=it(),o=Zj(),a=We(Qj),l=N.useMemo(()=>{const u=y=>r.getState().nodeLookup.get(y),c=y=>{o.nodeQueue.push(y)},f=y=>{o.edgeQueue.push(y)},m=y=>{const{nodeLookup:g,nodeOrigin:w}=r.getState(),j=Xp(y)?y:g.get(y.id),E=j.parentId?Fg(j.position,j.measured,j.parentId,g,w):j.position,S={...j,position:E,width:j.measured?.width??j.width,height:j.measured?.height??j.height};return ji(S)},h=(y,g,w={replace:!1})=>{c(j=>j.map(E=>{if(E.id===y){const S=typeof g=="function"?g(E):g;return w.replace&&Xp(S)?S:{...E,...S}}return E}))},x=(y,g,w={replace:!1})=>{f(j=>j.map(E=>{if(E.id===y){const S=typeof g=="function"?g(E):g;return w.replace&&Xj(S)?S:{...E,...S}}return E}))};return{getNodes:()=>r.getState().nodes.map(y=>({...y})),getNode:y=>u(y)?.internals.userNode,getInternalNode:u,getEdges:()=>{const{edges:y=[]}=r.getState();return y.map(g=>({...g}))},getEdge:y=>r.getState().edgeLookup.get(y),setNodes:c,setEdges:f,addNodes:y=>{const g=Array.isArray(y)?y:[y];o.nodeQueue.push(w=>[...w,...g])},addEdges:y=>{const g=Array.isArray(y)?y:[y];o.edgeQueue.push(w=>[...w,...g])},toObject:()=>{const{nodes:y=[],edges:g=[],transform:w}=r.getState(),[j,E,S]=w;return{nodes:y.map(_=>({..._})),edges:g.map(_=>({..._})),viewport:{x:j,y:E,zoom:S}}},deleteElements:async({nodes:y=[],edges:g=[]})=>{const{nodes:w,edges:j,onNodesDelete:E,onEdgesDelete:S,triggerNodeChanges:_,triggerEdgeChanges:R,onDelete:b,onBeforeDelete:P}=r.getState(),{nodes:$,edges:D}=await bS({nodesToRemove:y,edgesToRemove:g,nodes:w,edges:j,onBeforeDelete:P}),M=D.length>0,H=$.length>0;if(M){const Y=D.map(Wp);S?.(D),R(Y)}if(H){const Y=$.map(Wp);E?.($),_(Y)}return(H||M)&&b?.({nodes:$,edges:D}),{deletedNodes:$,deletedEdges:D}},getIntersectingNodes:(y,g=!0,w)=>{const j=yp(y),E=j?y:m(y),S=w!==void 0;return E?(w||r.getState().nodes).filter(_=>{const R=r.getState().nodeLookup.get(_.id);if(R&&!j&&(_.id===y.id||!R.internals.positionAbsolute))return!1;const b=ji(S?_:R),P=Ra(b,E);return g&&P>0||P>=b.width*b.height||P>=E.width*E.height}):[]},isNodeIntersecting:(y,g,w=!0)=>{const E=yp(y)?y:m(y);if(!E)return!1;const S=Ra(E,g);return w&&S>0||S>=g.width*g.height||S>=E.width*E.height},updateNode:h,updateNodeData:(y,g,w={replace:!1})=>{h(y,j=>{const E=typeof g=="function"?g(j):g;return w.replace?{...j,data:E}:{...j,data:{...j.data,...E}}},w)},updateEdge:x,updateEdgeData:(y,g,w={replace:!1})=>{x(y,j=>{const E=typeof g=="function"?g(j):g;return w.replace?{...j,data:E}:{...j,data:{...j.data,...E}}},w)},getNodesBounds:y=>{const{nodeLookup:g,nodeOrigin:w}=r.getState();return xS(y,{nodeLookup:g,nodeOrigin:w})},getHandleConnections:({type:y,id:g,nodeId:w})=>Array.from(r.getState().connectionLookup.get(`${w}-${y}${g?`-${g}`:""}`)?.values()??[]),getNodeConnections:({type:y,handleId:g,nodeId:w})=>Array.from(r.getState().connectionLookup.get(`${w}${y?g?`-${y}-${g}`:`-${y}`:""}`)?.values()??[]),fitView:async y=>{const g=r.getState().fitViewResolver??jS();return r.setState({fitViewQueued:!0,fitViewOptions:y,fitViewResolver:g}),o.nodeQueue.push(w=>[...w]),g.promise}}},[]);return N.useMemo(()=>({...l,...e,viewportInitialized:a}),[a])}const Kp=e=>e.selected,qj=typeof window<"u"?window:void 0;function Jj({deleteKeyCode:e,multiSelectionKeyCode:r}){const o=it(),{deleteElements:a}=Hd(),l=Ta(e,{actInsideInputWithModifier:!1}),u=Ta(r,{target:qj});N.useEffect(()=>{if(l){const{edges:c,nodes:f}=o.getState();a({nodes:f.filter(Kp),edges:c.filter(Kp)}),o.setState({nodesSelectionActive:!1})}},[l]),N.useEffect(()=>{o.setState({multiSelectionActive:u})},[u])}function ek(e){const r=it();N.useEffect(()=>{const o=()=>{if(!e.current||!(e.current.checkVisibility?.()??!0))return!1;const a=Id(e.current);(a.height===0||a.width===0)&&r.getState().onError?.("004",ir.error004()),r.setState({width:a.width||500,height:a.height||500})};if(e.current){o(),window.addEventListener("resize",o);const a=new ResizeObserver(()=>o());return a.observe(e.current),()=>{window.removeEventListener("resize",o),a&&e.current&&a.unobserve(e.current)}}},[])}const Ul={position:"absolute",width:"100%",height:"100%",top:0,left:0},tk=e=>({userSelectionActive:e.userSelectionActive,lib:e.lib,connectionInProgress:e.connection.inProgress});function nk({onPaneContextMenu:e,zoomOnScroll:r=!0,zoomOnPinch:o=!0,panOnScroll:a=!1,panOnScrollSpeed:l=.5,panOnScrollMode:u=Po.Free,zoomOnDoubleClick:c=!0,panOnDrag:f=!0,defaultViewport:m,translateExtent:h,minZoom:x,maxZoom:y,zoomActivationKeyCode:g,preventScrolling:w=!0,children:j,noWheelClassName:E,noPanClassName:S,onViewportChange:_,isControlledViewport:R,paneClickDistance:b,selectionOnDrag:P}){const $=it(),D=N.useRef(null),{userSelectionActive:M,lib:H,connectionInProgress:Y}=We(tk,ot),B=Ta(g),I=N.useRef();ek(D);const F=N.useCallback(L=>{_?.({x:L[0],y:L[1],zoom:L[2]}),R||$.setState({transform:L})},[_,R]);return N.useEffect(()=>{if(D.current){I.current=sj({domNode:D.current,minZoom:x,maxZoom:y,translateExtent:h,viewport:m,onDraggingChange:X=>$.setState({paneDragging:X}),onPanZoomStart:(X,Q)=>{const{onViewportChangeStart:O,onMoveStart:K}=$.getState();K?.(X,Q),O?.(Q)},onPanZoom:(X,Q)=>{const{onViewportChange:O,onMove:K}=$.getState();K?.(X,Q),O?.(Q)},onPanZoomEnd:(X,Q)=>{const{onViewportChangeEnd:O,onMoveEnd:K}=$.getState();K?.(X,Q),O?.(Q)}});const{x:L,y:k,zoom:A}=I.current.getViewport();return $.setState({panZoom:I.current,transform:[L,k,A],domNode:D.current.closest(".react-flow")}),()=>{I.current?.destroy()}}},[]),N.useEffect(()=>{I.current?.update({onPaneContextMenu:e,zoomOnScroll:r,zoomOnPinch:o,panOnScroll:a,panOnScrollSpeed:l,panOnScrollMode:u,zoomOnDoubleClick:c,panOnDrag:f,zoomActivationKeyPressed:B,preventScrolling:w,noPanClassName:S,userSelectionActive:M,noWheelClassName:E,lib:H,onTransformChange:F,connectionInProgress:Y,selectionOnDrag:P,paneClickDistance:b})},[e,r,o,a,l,u,c,f,B,w,S,M,E,H,F,Y,P,b]),s.jsx("div",{className:"react-flow__renderer",ref:D,style:Ul,children:j})}const rk=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function ok(){const{userSelectionActive:e,userSelectionRect:r}=We(rk,ot);return e&&r?s.jsx("div",{className:"react-flow__selection react-flow__container",style:{width:r.width,height:r.height,transform:`translate(${r.x}px, ${r.y}px)`}}):null}const Wc=(e,r)=>o=>{o.target===r.current&&e?.(o)},ik=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,connectionInProgress:e.connection.inProgress,dragging:e.paneDragging});function ak({isSelecting:e,selectionKeyPressed:r,selectionMode:o=Pa.Full,panOnDrag:a,paneClickDistance:l,selectionOnDrag:u,onSelectionStart:c,onSelectionEnd:f,onPaneClick:m,onPaneContextMenu:h,onPaneScroll:x,onPaneMouseEnter:y,onPaneMouseMove:g,onPaneMouseLeave:w,children:j}){const E=it(),{userSelectionActive:S,elementsSelectable:_,dragging:R,connectionInProgress:b}=We(ik,ot),P=_&&(e||S),$=N.useRef(null),D=N.useRef(),M=N.useRef(new Set),H=N.useRef(new Set),Y=N.useRef(!1),B=O=>{if(Y.current||b){Y.current=!1;return}m?.(O),E.getState().resetSelectedElements(),E.setState({nodesSelectionActive:!1})},I=O=>{if(Array.isArray(a)&&a?.includes(2)){O.preventDefault();return}h?.(O)},F=x?O=>x(O):void 0,L=O=>{Y.current&&(O.stopPropagation(),Y.current=!1)},k=O=>{const{domNode:K}=E.getState();if(D.current=K?.getBoundingClientRect(),!D.current)return;const z=O.target===$.current;if(!z&&!!O.target.closest(".nokey")||!e||!(u&&z||r)||O.button!==0||!O.isPrimary)return;O.target?.setPointerCapture?.(O.pointerId),Y.current=!1;const{x:re,y:oe}=Bn(O.nativeEvent,D.current);E.setState({userSelectionRect:{width:0,height:0,startX:re,startY:oe,x:re,y:oe}}),z||(O.stopPropagation(),O.preventDefault())},A=O=>{const{userSelectionRect:K,transform:z,nodeLookup:T,edgeLookup:U,connectionLookup:re,triggerNodeChanges:oe,triggerEdgeChanges:ue,defaultEdgeOptions:pe,resetSelectedElements:he}=E.getState();if(!D.current||!K)return;const{x:ie,y:me}=Bn(O.nativeEvent,D.current),{startX:Le,startY:ze}=K;if(!Y.current){const He=r?0:l;if(Math.hypot(ie-Le,me-ze)<=He)return;he(),c?.(O)}Y.current=!0;const xe={startX:Le,startY:ze,x:ie<Le?ie:Le,y:me<ze?me:ze,width:Math.abs(ie-Le),height:Math.abs(me-ze)},Pe=M.current,Ve=H.current;M.current=new Set(Dd(T,xe,z,o===Pa.Partial,!0).map(He=>He.id)),H.current=new Set;const Qe=pe?.selectable??!0;for(const He of M.current){const ut=re.get(He);if(ut)for(const{edgeId:en}of ut.values()){const Pt=U.get(en);Pt&&(Pt.selectable??Qe)&&H.current.add(en)}}if(!vp(Pe,M.current)){const He=xi(T,M.current,!0);oe(He)}if(!vp(Ve,H.current)){const He=xi(U,H.current);ue(He)}E.setState({userSelectionRect:xe,userSelectionActive:!0,nodesSelectionActive:!1})},X=O=>{O.button===0&&(O.target?.releasePointerCapture?.(O.pointerId),!S&&O.target===$.current&&E.getState().userSelectionRect&&B?.(O),E.setState({userSelectionActive:!1,userSelectionRect:null}),Y.current&&(f?.(O),E.setState({nodesSelectionActive:M.current.size>0})))},Q=a===!0||Array.isArray(a)&&a.includes(0);return s.jsxs("div",{className:gt(["react-flow__pane",{draggable:Q,dragging:R,selection:e}]),onClick:P?void 0:Wc(B,$),onContextMenu:Wc(I,$),onWheel:Wc(F,$),onPointerEnter:P?void 0:y,onPointerMove:P?A:g,onPointerUp:P?X:void 0,onPointerDownCapture:P?k:void 0,onClickCapture:P?L:void 0,onPointerLeave:w,ref:$,style:Ul,children:[j,s.jsx(ok,{})]})}function cd({id:e,store:r,unselect:o=!1,nodeRef:a}){const{addSelectedNodes:l,unselectNodesAndEdges:u,multiSelectionActive:c,nodeLookup:f,onError:m}=r.getState(),h=f.get(e);if(!h){m?.("012",ir.error012(e));return}r.setState({nodesSelectionActive:!1}),h.selected?(o||h.selected&&c)&&(u({nodes:[h],edges:[]}),requestAnimationFrame(()=>a?.current?.blur())):l([e])}function px({nodeRef:e,disabled:r=!1,noDragClassName:o,handleSelector:a,nodeId:l,isSelectable:u,nodeClickDistance:c}){const f=it(),[m,h]=N.useState(!1),x=N.useRef();return N.useEffect(()=>{x.current=YS({getStoreItems:()=>f.getState(),onNodeMouseDown:y=>{cd({id:y,store:f,nodeRef:e})},onDragStart:()=>{h(!0)},onDragStop:()=>{h(!1)}})},[]),N.useEffect(()=>{if(r)x.current?.destroy();else if(e.current)return x.current?.update({noDragClassName:o,handleSelector:a,domNode:e.current,isSelectable:u,nodeId:l,nodeClickDistance:c}),()=>{x.current?.destroy()}},[o,a,r,u,e,l]),m}const sk=e=>r=>r.selected&&(r.draggable||e&&typeof r.draggable>"u");function gx(){const e=it();return N.useCallback(o=>{const{nodeExtent:a,snapToGrid:l,snapGrid:u,nodesDraggable:c,onError:f,updateNodePositions:m,nodeLookup:h,nodeOrigin:x}=e.getState(),y=new Map,g=sk(c),w=l?u[0]:5,j=l?u[1]:5,E=o.direction.x*w*o.factor,S=o.direction.y*j*o.factor;for(const[,_]of h){if(!g(_))continue;let R={x:_.internals.positionAbsolute.x+E,y:_.internals.positionAbsolute.y+S};l&&(R=Va(R,u));const{position:b,positionAbsolute:P}=Lg({nodeId:_.id,nextPosition:R,nodeLookup:h,nodeExtent:a,nodeOrigin:x,onError:f});_.position=b,_.internals.positionAbsolute=P,y.set(_.id,_)}m(y)},[])}const Bd=N.createContext(null),lk=Bd.Provider;Bd.Consumer;const xx=()=>N.useContext(Bd),uk=e=>({connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName,rfId:e.rfId}),ck=(e,r,o)=>a=>{const{connectionClickStartHandle:l,connectionMode:u,connection:c}=a,{fromHandle:f,toHandle:m,isValid:h}=c,x=m?.nodeId===e&&m?.id===r&&m?.type===o;return{connectingFrom:f?.nodeId===e&&f?.id===r&&f?.type===o,connectingTo:x,clickConnecting:l?.nodeId===e&&l?.id===r&&l?.type===o,isPossibleEndHandle:u===Ni.Strict?f?.type!==o:e!==f?.nodeId||r!==f?.id,connectionInProcess:!!f,clickConnectionInProcess:!!l,valid:x&&h}};function dk({type:e="source",position:r=Ce.Top,isValidConnection:o,isConnectable:a=!0,isConnectableStart:l=!0,isConnectableEnd:u=!0,id:c,onConnect:f,children:m,className:h,onMouseDown:x,onTouchStart:y,...g},w){const j=c||null,E=e==="target",S=it(),_=xx(),{connectOnClick:R,noPanClassName:b,rfId:P}=We(uk,ot),{connectingFrom:$,connectingTo:D,clickConnecting:M,isPossibleEndHandle:H,connectionInProcess:Y,clickConnectionInProcess:B,valid:I}=We(ck(_,j,e),ot);_||S.getState().onError?.("010",ir.error010());const F=A=>{const{defaultEdgeOptions:X,onConnect:Q,hasDefaultEdges:O}=S.getState(),K={...X,...A};if(O){const{edges:z,setEdges:T}=S.getState();T(Xg(K,z))}Q?.(K),f?.(K)},L=A=>{if(!_)return;const X=Bg(A.nativeEvent);if(l&&(X&&A.button===0||!X)){const Q=S.getState();ud.onPointerDown(A.nativeEvent,{handleDomNode:A.currentTarget,autoPanOnConnect:Q.autoPanOnConnect,connectionMode:Q.connectionMode,connectionRadius:Q.connectionRadius,domNode:Q.domNode,nodeLookup:Q.nodeLookup,lib:Q.lib,isTarget:E,handleId:j,nodeId:_,flowId:Q.rfId,panBy:Q.panBy,cancelConnection:Q.cancelConnection,onConnectStart:Q.onConnectStart,onConnectEnd:Q.onConnectEnd,updateConnection:Q.updateConnection,onConnect:F,isValidConnection:o||Q.isValidConnection,getTransform:()=>S.getState().transform,getFromHandle:()=>S.getState().connection.fromHandle,autoPanSpeed:Q.autoPanSpeed,dragThreshold:Q.connectionDragThreshold})}X?x?.(A):y?.(A)},k=A=>{const{onClickConnectStart:X,onClickConnectEnd:Q,connectionClickStartHandle:O,connectionMode:K,isValidConnection:z,lib:T,rfId:U,nodeLookup:re,connection:oe}=S.getState();if(!_||!O&&!l)return;if(!O){X?.(A.nativeEvent,{nodeId:_,handleId:j,handleType:e}),S.setState({connectionClickStartHandle:{nodeId:_,type:e,id:j}});return}const ue=Og(A.target),pe=o||z,{connection:he,isValid:ie}=ud.isValid(A.nativeEvent,{handle:{nodeId:_,id:j,type:e},connectionMode:K,fromNodeId:O.nodeId,fromHandleId:O.id||null,fromType:O.type,isValidConnection:pe,flowId:U,doc:ue,lib:T,nodeLookup:re});ie&&he&&F(he);const me=structuredClone(oe);delete me.inProgress,me.toPosition=me.toHandle?me.toHandle.position:null,Q?.(A,me),S.setState({connectionClickStartHandle:null})};return s.jsx("div",{"data-handleid":j,"data-nodeid":_,"data-handlepos":r,"data-id":`${P}-${_}-${j}-${e}`,className:gt(["react-flow__handle",`react-flow__handle-${r}`,"nodrag",b,h,{source:!E,target:E,connectable:a,connectablestart:l,connectableend:u,clickconnecting:M,connectingfrom:$,connectingto:D,valid:I,connectionindicator:a&&(!Y||H)&&(Y||B?u:l)}]),onMouseDown:L,onTouchStart:L,onClick:R?k:void 0,ref:w,...g,children:m})}const Ro=N.memo(hx(dk));function fk({data:e,isConnectable:r,sourcePosition:o=Ce.Bottom}){return s.jsxs(s.Fragment,{children:[e?.label,s.jsx(Ro,{type:"source",position:o,isConnectable:r})]})}function hk({data:e,isConnectable:r,targetPosition:o=Ce.Top,sourcePosition:a=Ce.Bottom}){return s.jsxs(s.Fragment,{children:[s.jsx(Ro,{type:"target",position:o,isConnectable:r}),e?.label,s.jsx(Ro,{type:"source",position:a,isConnectable:r})]})}function mk(){return null}function pk({data:e,isConnectable:r,targetPosition:o=Ce.Top}){return s.jsxs(s.Fragment,{children:[s.jsx(Ro,{type:"target",position:o,isConnectable:r}),e?.label]})}const Rl={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},Gp={input:fk,default:hk,output:pk,group:mk};function gk(e){return e.internals.handleBounds===void 0?{width:e.width??e.initialWidth??e.style?.width,height:e.height??e.initialHeight??e.style?.height}:{width:e.width??e.style?.width,height:e.height??e.style?.height}}const xk=e=>{const{width:r,height:o,x:a,y:l}=Ba(e.nodeLookup,{filter:u=>!!u.selected});return{width:Hn(r)?r:null,height:Hn(o)?o:null,userSelectionActive:e.userSelectionActive,transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]}) translate(${a}px,${l}px)`}};function yk({onSelectionContextMenu:e,noPanClassName:r,disableKeyboardA11y:o}){const a=it(),{width:l,height:u,transformString:c,userSelectionActive:f}=We(xk,ot),m=gx(),h=N.useRef(null);if(N.useEffect(()=>{o||h.current?.focus({preventScroll:!0})},[o]),px({nodeRef:h}),f||!l||!u)return null;const x=e?g=>{const w=a.getState().nodes.filter(j=>j.selected);e(g,w)}:void 0,y=g=>{Object.prototype.hasOwnProperty.call(Rl,g.key)&&(g.preventDefault(),m({direction:Rl[g.key],factor:g.shiftKey?4:1}))};return s.jsx("div",{className:gt(["react-flow__nodesselection","react-flow__container",r]),style:{transform:c},children:s.jsx("div",{ref:h,className:"react-flow__nodesselection-rect",onContextMenu:x,tabIndex:o?void 0:-1,onKeyDown:o?void 0:y,style:{width:l,height:u}})})}const Zp=typeof window<"u"?window:void 0,vk=e=>({nodesSelectionActive:e.nodesSelectionActive,userSelectionActive:e.userSelectionActive});function yx({children:e,onPaneClick:r,onPaneMouseEnter:o,onPaneMouseMove:a,onPaneMouseLeave:l,onPaneContextMenu:u,onPaneScroll:c,paneClickDistance:f,deleteKeyCode:m,selectionKeyCode:h,selectionOnDrag:x,selectionMode:y,onSelectionStart:g,onSelectionEnd:w,multiSelectionKeyCode:j,panActivationKeyCode:E,zoomActivationKeyCode:S,elementsSelectable:_,zoomOnScroll:R,zoomOnPinch:b,panOnScroll:P,panOnScrollSpeed:$,panOnScrollMode:D,zoomOnDoubleClick:M,panOnDrag:H,defaultViewport:Y,translateExtent:B,minZoom:I,maxZoom:F,preventScrolling:L,onSelectionContextMenu:k,noWheelClassName:A,noPanClassName:X,disableKeyboardA11y:Q,onViewportChange:O,isControlledViewport:K}){const{nodesSelectionActive:z,userSelectionActive:T}=We(vk,ot),U=Ta(h,{target:Zp}),re=Ta(E,{target:Zp}),oe=re||H,ue=re||P,pe=x&&oe!==!0,he=U||T||pe;return Jj({deleteKeyCode:m,multiSelectionKeyCode:j}),s.jsx(nk,{onPaneContextMenu:u,elementsSelectable:_,zoomOnScroll:R,zoomOnPinch:b,panOnScroll:ue,panOnScrollSpeed:$,panOnScrollMode:D,zoomOnDoubleClick:M,panOnDrag:!U&&oe,defaultViewport:Y,translateExtent:B,minZoom:I,maxZoom:F,zoomActivationKeyCode:S,preventScrolling:L,noWheelClassName:A,noPanClassName:X,onViewportChange:O,isControlledViewport:K,paneClickDistance:f,selectionOnDrag:pe,children:s.jsxs(ak,{onSelectionStart:g,onSelectionEnd:w,onPaneClick:r,onPaneMouseEnter:o,onPaneMouseMove:a,onPaneMouseLeave:l,onPaneContextMenu:u,onPaneScroll:c,panOnDrag:oe,isSelecting:!!he,selectionMode:y,selectionKeyPressed:U,paneClickDistance:f,selectionOnDrag:pe,children:[e,z&&s.jsx(yk,{onSelectionContextMenu:k,noPanClassName:X,disableKeyboardA11y:Q})]})})}yx.displayName="FlowRenderer";const wk=N.memo(yx),bk=e=>r=>e?Dd(r.nodeLookup,{x:0,y:0,width:r.width,height:r.height},r.transform,!0).map(o=>o.id):Array.from(r.nodeLookup.keys());function _k(e){return We(N.useCallback(bk(e),[e]),ot)}const Nk=e=>e.updateNodeInternals;function Sk(){const e=We(Nk),[r]=N.useState(()=>typeof ResizeObserver>"u"?null:new ResizeObserver(o=>{const a=new Map;o.forEach(l=>{const u=l.target.getAttribute("data-id");a.set(u,{id:u,nodeElement:l.target,force:!0})}),e(a)}));return N.useEffect(()=>()=>{r?.disconnect()},[r]),r}function jk({node:e,nodeType:r,hasDimensions:o,resizeObserver:a}){const l=it(),u=N.useRef(null),c=N.useRef(null),f=N.useRef(e.sourcePosition),m=N.useRef(e.targetPosition),h=N.useRef(r),x=o&&!!e.internals.handleBounds;return N.useEffect(()=>{u.current&&!e.hidden&&(!x||c.current!==u.current)&&(c.current&&a?.unobserve(c.current),a?.observe(u.current),c.current=u.current)},[x,e.hidden]),N.useEffect(()=>()=>{c.current&&(a?.unobserve(c.current),c.current=null)},[]),N.useEffect(()=>{if(u.current){const y=h.current!==r,g=f.current!==e.sourcePosition,w=m.current!==e.targetPosition;(y||g||w)&&(h.current=r,f.current=e.sourcePosition,m.current=e.targetPosition,l.getState().updateNodeInternals(new Map([[e.id,{id:e.id,nodeElement:u.current,force:!0}]])))}},[e.id,r,e.sourcePosition,e.targetPosition]),u}function kk({id:e,onClick:r,onMouseEnter:o,onMouseMove:a,onMouseLeave:l,onContextMenu:u,onDoubleClick:c,nodesDraggable:f,elementsSelectable:m,nodesConnectable:h,nodesFocusable:x,resizeObserver:y,noDragClassName:g,noPanClassName:w,disableKeyboardA11y:j,rfId:E,nodeTypes:S,nodeClickDistance:_,onError:R}){const{node:b,internals:P,isParent:$}=We(ie=>{const me=ie.nodeLookup.get(e),Le=ie.parentLookup.has(e);return{node:me,internals:me.internals,isParent:Le}},ot);let D=b.type||"default",M=S?.[D]||Gp[D];M===void 0&&(R?.("003",ir.error003(D)),D="default",M=S?.default||Gp.default);const H=!!(b.draggable||f&&typeof b.draggable>"u"),Y=!!(b.selectable||m&&typeof b.selectable>"u"),B=!!(b.connectable||h&&typeof b.connectable>"u"),I=!!(b.focusable||x&&typeof b.focusable>"u"),F=it(),L=$g(b),k=jk({node:b,nodeType:D,hasDimensions:L,resizeObserver:y}),A=px({nodeRef:k,disabled:b.hidden||!H,noDragClassName:g,handleSelector:b.dragHandle,nodeId:e,isSelectable:Y,nodeClickDistance:_}),X=gx();if(b.hidden)return null;const Q=Cr(b),O=gk(b),K=Y||H||r||o||a||l,z=o?ie=>o(ie,{...P.userNode}):void 0,T=a?ie=>a(ie,{...P.userNode}):void 0,U=l?ie=>l(ie,{...P.userNode}):void 0,re=u?ie=>u(ie,{...P.userNode}):void 0,oe=c?ie=>c(ie,{...P.userNode}):void 0,ue=ie=>{const{selectNodesOnDrag:me,nodeDragThreshold:Le}=F.getState();Y&&(!me||!H||Le>0)&&cd({id:e,store:F,nodeRef:k}),r&&r(ie,{...P.userNode})},pe=ie=>{if(!(Hg(ie.nativeEvent)||j)){if(Pg.includes(ie.key)&&Y){const me=ie.key==="Escape";cd({id:e,store:F,unselect:me,nodeRef:k})}else if(H&&b.selected&&Object.prototype.hasOwnProperty.call(Rl,ie.key)){ie.preventDefault();const{ariaLabelConfig:me}=F.getState();F.setState({ariaLiveMessage:me["node.a11yDescription.ariaLiveMessage"]({direction:ie.key.replace("Arrow","").toLowerCase(),x:~~P.positionAbsolute.x,y:~~P.positionAbsolute.y})}),X({direction:Rl[ie.key],factor:ie.shiftKey?4:1})}}},he=()=>{if(j||!k.current?.matches(":focus-visible"))return;const{transform:ie,width:me,height:Le,autoPanOnNodeFocus:ze,setCenter:xe}=F.getState();if(!ze)return;Dd(new Map([[e,b]]),{x:0,y:0,width:me,height:Le},ie,!0).length>0||xe(b.position.x+Q.width/2,b.position.y+Q.height/2,{zoom:ie[2]})};return s.jsx("div",{className:gt(["react-flow__node",`react-flow__node-${D}`,{[w]:H},b.className,{selected:b.selected,selectable:Y,parent:$,draggable:H,dragging:A}]),ref:k,style:{zIndex:P.z,transform:`translate(${P.positionAbsolute.x}px,${P.positionAbsolute.y}px)`,pointerEvents:K?"all":"none",visibility:L?"visible":"hidden",...b.style,...O},"data-id":e,"data-testid":`rf__node-${e}`,onMouseEnter:z,onMouseMove:T,onMouseLeave:U,onContextMenu:re,onClick:ue,onDoubleClick:oe,onKeyDown:I?pe:void 0,tabIndex:I?0:void 0,onFocus:I?he:void 0,role:b.ariaRole??(I?"group":void 0),"aria-roledescription":"node","aria-describedby":j?void 0:`${sx}-${E}`,"aria-label":b.ariaLabel,...b.domAttributes,children:s.jsx(lk,{value:e,children:s.jsx(M,{id:e,data:b.data,type:D,positionAbsoluteX:P.positionAbsolute.x,positionAbsoluteY:P.positionAbsolute.y,selected:b.selected??!1,selectable:Y,draggable:H,deletable:b.deletable??!0,isConnectable:B,sourcePosition:b.sourcePosition,targetPosition:b.targetPosition,dragging:A,dragHandle:b.dragHandle,zIndex:P.z,parentId:b.parentId,...Q})})})}var Ek=N.memo(kk);const Ck=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,onError:e.onError});function vx(e){const{nodesDraggable:r,nodesConnectable:o,nodesFocusable:a,elementsSelectable:l,onError:u}=We(Ck,ot),c=_k(e.onlyRenderVisibleElements),f=Sk();return s.jsx("div",{className:"react-flow__nodes",style:Ul,children:c.map(m=>s.jsx(Ek,{id:m,nodeTypes:e.nodeTypes,nodeExtent:e.nodeExtent,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,resizeObserver:f,nodesDraggable:r,nodesConnectable:o,nodesFocusable:a,elementsSelectable:l,nodeClickDistance:e.nodeClickDistance,onError:u},m))})}vx.displayName="NodeRenderer";const Pk=N.memo(vx);function Rk(e){return We(N.useCallback(o=>{if(!e)return o.edges.map(l=>l.id);const a=[];if(o.width&&o.height)for(const l of o.edges){const u=o.nodeLookup.get(l.source),c=o.nodeLookup.get(l.target);u&&c&&PS({sourceNode:u,targetNode:c,width:o.width,height:o.height,transform:o.transform})&&a.push(l.id)}return a},[e]),ot)}const Mk=({color:e="none",strokeWidth:r=1})=>{const o={strokeWidth:r,...e&&{stroke:e}};return s.jsx("polyline",{className:"arrow",style:o,strokeLinecap:"round",fill:"none",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4"})},Tk=({color:e="none",strokeWidth:r=1})=>{const o={strokeWidth:r,...e&&{stroke:e,fill:e}};return s.jsx("polyline",{className:"arrowclosed",style:o,strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"})},Qp={[kl.Arrow]:Mk,[kl.ArrowClosed]:Tk};function Dk(e){const r=it();return N.useMemo(()=>Object.prototype.hasOwnProperty.call(Qp,e)?Qp[e]:(r.getState().onError?.("009",ir.error009(e)),null),[e])}const Lk=({id:e,type:r,color:o,width:a=12.5,height:l=12.5,markerUnits:u="strokeWidth",strokeWidth:c,orient:f="auto-start-reverse"})=>{const m=Dk(r);return m?s.jsx("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${a}`,markerHeight:`${l}`,viewBox:"-10 -10 20 20",markerUnits:u,orient:f,refX:"0",refY:"0",children:s.jsx(m,{color:o,strokeWidth:c})}):null},wx=({defaultColor:e,rfId:r})=>{const o=We(u=>u.edges),a=We(u=>u.defaultEdgeOptions),l=N.useMemo(()=>zS(o,{id:r,defaultColor:e,defaultMarkerStart:a?.markerStart,defaultMarkerEnd:a?.markerEnd}),[o,a,r,e]);return l.length?s.jsx("svg",{className:"react-flow__marker","aria-hidden":"true",children:s.jsx("defs",{children:l.map(u=>s.jsx(Lk,{id:u.id,type:u.type,color:u.color,width:u.width,height:u.height,markerUnits:u.markerUnits,strokeWidth:u.strokeWidth,orient:u.orient},u.id))})}):null};wx.displayName="MarkerDefinitions";var Ik=N.memo(wx);function bx({x:e,y:r,label:o,labelStyle:a,labelShowBg:l=!0,labelBgStyle:u,labelBgPadding:c=[2,4],labelBgBorderRadius:f=2,children:m,className:h,...x}){const[y,g]=N.useState({x:1,y:0,width:0,height:0}),w=gt(["react-flow__edge-textwrapper",h]),j=N.useRef(null);return N.useEffect(()=>{if(j.current){const E=j.current.getBBox();g({x:E.x,y:E.y,width:E.width,height:E.height})}},[o]),o?s.jsxs("g",{transform:`translate(${e-y.width/2} ${r-y.height/2})`,className:w,visibility:y.width?"visible":"hidden",...x,children:[l&&s.jsx("rect",{width:y.width+2*c[0],x:-c[0],y:-c[1],height:y.height+2*c[1],className:"react-flow__edge-textbg",style:u,rx:f,ry:f}),s.jsx("text",{className:"react-flow__edge-text",y:y.height/2,dy:"0.3em",ref:j,style:a,children:o}),m]}):null}bx.displayName="EdgeText";const zk=N.memo(bx);function Wa({path:e,labelX:r,labelY:o,label:a,labelStyle:l,labelShowBg:u,labelBgStyle:c,labelBgPadding:f,labelBgBorderRadius:m,interactionWidth:h=20,...x}){return s.jsxs(s.Fragment,{children:[s.jsx("path",{...x,d:e,fill:"none",className:gt(["react-flow__edge-path",x.className])}),h?s.jsx("path",{d:e,fill:"none",strokeOpacity:0,strokeWidth:h,className:"react-flow__edge-interaction"}):null,a&&Hn(r)&&Hn(o)?s.jsx(zk,{x:r,y:o,label:a,labelStyle:l,labelShowBg:u,labelBgStyle:c,labelBgPadding:f,labelBgBorderRadius:m}):null]})}function qp({pos:e,x1:r,y1:o,x2:a,y2:l}){return e===Ce.Left||e===Ce.Right?[.5*(r+a),o]:[r,.5*(o+l)]}function _x({sourceX:e,sourceY:r,sourcePosition:o=Ce.Bottom,targetX:a,targetY:l,targetPosition:u=Ce.Top}){const[c,f]=qp({pos:o,x1:e,y1:r,x2:a,y2:l}),[m,h]=qp({pos:u,x1:a,y1:l,x2:e,y2:r}),[x,y,g,w]=Vg({sourceX:e,sourceY:r,targetX:a,targetY:l,sourceControlX:c,sourceControlY:f,targetControlX:m,targetControlY:h});return[`M${e},${r} C${c},${f} ${m},${h} ${a},${l}`,x,y,g,w]}function Nx(e){return N.memo(({id:r,sourceX:o,sourceY:a,targetX:l,targetY:u,sourcePosition:c,targetPosition:f,label:m,labelStyle:h,labelShowBg:x,labelBgStyle:y,labelBgPadding:g,labelBgBorderRadius:w,style:j,markerEnd:E,markerStart:S,interactionWidth:_})=>{const[R,b,P]=_x({sourceX:o,sourceY:a,sourcePosition:c,targetX:l,targetY:u,targetPosition:f}),$=e.isInternal?void 0:r;return s.jsx(Wa,{id:$,path:R,labelX:b,labelY:P,label:m,labelStyle:h,labelShowBg:x,labelBgStyle:y,labelBgPadding:g,labelBgBorderRadius:w,style:j,markerEnd:E,markerStart:S,interactionWidth:_})})}const Ak=Nx({isInternal:!1}),Sx=Nx({isInternal:!0});Ak.displayName="SimpleBezierEdge";Sx.displayName="SimpleBezierEdgeInternal";function jx(e){return N.memo(({id:r,sourceX:o,sourceY:a,targetX:l,targetY:u,label:c,labelStyle:f,labelShowBg:m,labelBgStyle:h,labelBgPadding:x,labelBgBorderRadius:y,style:g,sourcePosition:w=Ce.Bottom,targetPosition:j=Ce.Top,markerEnd:E,markerStart:S,pathOptions:_,interactionWidth:R})=>{const[b,P,$]=Pl({sourceX:o,sourceY:a,sourcePosition:w,targetX:l,targetY:u,targetPosition:j,borderRadius:_?.borderRadius,offset:_?.offset,stepPosition:_?.stepPosition}),D=e.isInternal?void 0:r;return s.jsx(Wa,{id:D,path:b,labelX:P,labelY:$,label:c,labelStyle:f,labelShowBg:m,labelBgStyle:h,labelBgPadding:x,labelBgBorderRadius:y,style:g,markerEnd:E,markerStart:S,interactionWidth:R})})}const kx=jx({isInternal:!1}),Ex=jx({isInternal:!0});kx.displayName="SmoothStepEdge";Ex.displayName="SmoothStepEdgeInternal";function Cx(e){return N.memo(({id:r,...o})=>{const a=e.isInternal?void 0:r;return s.jsx(kx,{...o,id:a,pathOptions:N.useMemo(()=>({borderRadius:0,offset:o.pathOptions?.offset}),[o.pathOptions?.offset])})})}const $k=Cx({isInternal:!1}),Px=Cx({isInternal:!0});$k.displayName="StepEdge";Px.displayName="StepEdgeInternal";function Rx(e){return N.memo(({id:r,sourceX:o,sourceY:a,targetX:l,targetY:u,label:c,labelStyle:f,labelShowBg:m,labelBgStyle:h,labelBgPadding:x,labelBgBorderRadius:y,style:g,markerEnd:w,markerStart:j,interactionWidth:E})=>{const[S,_,R]=Yg({sourceX:o,sourceY:a,targetX:l,targetY:u}),b=e.isInternal?void 0:r;return s.jsx(Wa,{id:b,path:S,labelX:_,labelY:R,label:c,labelStyle:f,labelShowBg:m,labelBgStyle:h,labelBgPadding:x,labelBgBorderRadius:y,style:g,markerEnd:w,markerStart:j,interactionWidth:E})})}const Fk=Rx({isInternal:!1}),Mx=Rx({isInternal:!0});Fk.displayName="StraightEdge";Mx.displayName="StraightEdgeInternal";function Tx(e){return N.memo(({id:r,sourceX:o,sourceY:a,targetX:l,targetY:u,sourcePosition:c=Ce.Bottom,targetPosition:f=Ce.Top,label:m,labelStyle:h,labelShowBg:x,labelBgStyle:y,labelBgPadding:g,labelBgBorderRadius:w,style:j,markerEnd:E,markerStart:S,pathOptions:_,interactionWidth:R})=>{const[b,P,$]=Ug({sourceX:o,sourceY:a,sourcePosition:c,targetX:l,targetY:u,targetPosition:f,curvature:_?.curvature}),D=e.isInternal?void 0:r;return s.jsx(Wa,{id:D,path:b,labelX:P,labelY:$,label:m,labelStyle:h,labelShowBg:x,labelBgStyle:y,labelBgPadding:g,labelBgBorderRadius:w,style:j,markerEnd:E,markerStart:S,interactionWidth:R})})}const Ok=Tx({isInternal:!1}),Dx=Tx({isInternal:!0});Ok.displayName="BezierEdge";Dx.displayName="BezierEdgeInternal";const Jp={default:Dx,straight:Mx,step:Px,smoothstep:Ex,simplebezier:Sx},e0={sourceX:null,sourceY:null,targetX:null,targetY:null,sourcePosition:null,targetPosition:null},Hk=(e,r,o)=>o===Ce.Left?e-r:o===Ce.Right?e+r:e,Bk=(e,r,o)=>o===Ce.Top?e-r:o===Ce.Bottom?e+r:e,t0="react-flow__edgeupdater";function n0({position:e,centerX:r,centerY:o,radius:a=10,onMouseDown:l,onMouseEnter:u,onMouseOut:c,type:f}){return s.jsx("circle",{onMouseDown:l,onMouseEnter:u,onMouseOut:c,className:gt([t0,`${t0}-${f}`]),cx:Hk(r,a,e),cy:Bk(o,a,e),r:a,stroke:"transparent",fill:"transparent"})}function Vk({isReconnectable:e,reconnectRadius:r,edge:o,sourceX:a,sourceY:l,targetX:u,targetY:c,sourcePosition:f,targetPosition:m,onReconnect:h,onReconnectStart:x,onReconnectEnd:y,setReconnecting:g,setUpdateHover:w}){const j=it(),E=(P,$)=>{if(P.button!==0)return;const{autoPanOnConnect:D,domNode:M,isValidConnection:H,connectionMode:Y,connectionRadius:B,lib:I,onConnectStart:F,onConnectEnd:L,cancelConnection:k,nodeLookup:A,rfId:X,panBy:Q,updateConnection:O}=j.getState(),K=$.type==="target",z=(re,oe)=>{g(!1),y?.(re,o,$.type,oe)},T=re=>h?.(o,re),U=(re,oe)=>{g(!0),x?.(P,o,$.type),F?.(re,oe)};ud.onPointerDown(P.nativeEvent,{autoPanOnConnect:D,connectionMode:Y,connectionRadius:B,domNode:M,handleId:$.id,nodeId:$.nodeId,nodeLookup:A,isTarget:K,edgeUpdaterType:$.type,lib:I,flowId:X,cancelConnection:k,panBy:Q,isValidConnection:H,onConnect:T,onConnectStart:U,onConnectEnd:L,onReconnectEnd:z,updateConnection:O,getTransform:()=>j.getState().transform,getFromHandle:()=>j.getState().connection.fromHandle,dragThreshold:j.getState().connectionDragThreshold,handleDomNode:P.currentTarget})},S=P=>E(P,{nodeId:o.target,id:o.targetHandle??null,type:"target"}),_=P=>E(P,{nodeId:o.source,id:o.sourceHandle??null,type:"source"}),R=()=>w(!0),b=()=>w(!1);return s.jsxs(s.Fragment,{children:[(e===!0||e==="source")&&s.jsx(n0,{position:f,centerX:a,centerY:l,radius:r,onMouseDown:S,onMouseEnter:R,onMouseOut:b,type:"source"}),(e===!0||e==="target")&&s.jsx(n0,{position:m,centerX:u,centerY:c,radius:r,onMouseDown:_,onMouseEnter:R,onMouseOut:b,type:"target"})]})}function Uk({id:e,edgesFocusable:r,edgesReconnectable:o,elementsSelectable:a,onClick:l,onDoubleClick:u,onContextMenu:c,onMouseEnter:f,onMouseMove:m,onMouseLeave:h,reconnectRadius:x,onReconnect:y,onReconnectStart:g,onReconnectEnd:w,rfId:j,edgeTypes:E,noPanClassName:S,onError:_,disableKeyboardA11y:R}){let b=We(xe=>xe.edgeLookup.get(e));const P=We(xe=>xe.defaultEdgeOptions);b=P?{...P,...b}:b;let $=b.type||"default",D=E?.[$]||Jp[$];D===void 0&&(_?.("011",ir.error011($)),$="default",D=E?.default||Jp.default);const M=!!(b.focusable||r&&typeof b.focusable>"u"),H=typeof y<"u"&&(b.reconnectable||o&&typeof b.reconnectable>"u"),Y=!!(b.selectable||a&&typeof b.selectable>"u"),B=N.useRef(null),[I,F]=N.useState(!1),[L,k]=N.useState(!1),A=it(),{zIndex:X,sourceX:Q,sourceY:O,targetX:K,targetY:z,sourcePosition:T,targetPosition:U}=We(N.useCallback(xe=>{const Pe=xe.nodeLookup.get(b.source),Ve=xe.nodeLookup.get(b.target);if(!Pe||!Ve)return{zIndex:b.zIndex,...e0};const Qe=IS({id:e,sourceNode:Pe,targetNode:Ve,sourceHandle:b.sourceHandle||null,targetHandle:b.targetHandle||null,connectionMode:xe.connectionMode,onError:_});return{zIndex:CS({selected:b.selected,zIndex:b.zIndex,sourceNode:Pe,targetNode:Ve,elevateOnSelect:xe.elevateEdgesOnSelect,zIndexMode:xe.zIndexMode}),...Qe||e0}},[b.source,b.target,b.sourceHandle,b.targetHandle,b.selected,b.zIndex]),ot),re=N.useMemo(()=>b.markerStart?`url('#${sd(b.markerStart,j)}')`:void 0,[b.markerStart,j]),oe=N.useMemo(()=>b.markerEnd?`url('#${sd(b.markerEnd,j)}')`:void 0,[b.markerEnd,j]);if(b.hidden||Q===null||O===null||K===null||z===null)return null;const ue=xe=>{const{addSelectedEdges:Pe,unselectNodesAndEdges:Ve,multiSelectionActive:Qe}=A.getState();Y&&(A.setState({nodesSelectionActive:!1}),b.selected&&Qe?(Ve({nodes:[],edges:[b]}),B.current?.blur()):Pe([e])),l&&l(xe,b)},pe=u?xe=>{u(xe,{...b})}:void 0,he=c?xe=>{c(xe,{...b})}:void 0,ie=f?xe=>{f(xe,{...b})}:void 0,me=m?xe=>{m(xe,{...b})}:void 0,Le=h?xe=>{h(xe,{...b})}:void 0,ze=xe=>{if(!R&&Pg.includes(xe.key)&&Y){const{unselectNodesAndEdges:Pe,addSelectedEdges:Ve}=A.getState();xe.key==="Escape"?(B.current?.blur(),Pe({edges:[b]})):Ve([e])}};return s.jsx("svg",{style:{zIndex:X},children:s.jsxs("g",{className:gt(["react-flow__edge",`react-flow__edge-${$}`,b.className,S,{selected:b.selected,animated:b.animated,inactive:!Y&&!l,updating:I,selectable:Y}]),onClick:ue,onDoubleClick:pe,onContextMenu:he,onMouseEnter:ie,onMouseMove:me,onMouseLeave:Le,onKeyDown:M?ze:void 0,tabIndex:M?0:void 0,role:b.ariaRole??(M?"group":"img"),"aria-roledescription":"edge","data-id":e,"data-testid":`rf__edge-${e}`,"aria-label":b.ariaLabel===null?void 0:b.ariaLabel||`Edge from ${b.source} to ${b.target}`,"aria-describedby":M?`${lx}-${j}`:void 0,ref:B,...b.domAttributes,children:[!L&&s.jsx(D,{id:e,source:b.source,target:b.target,type:b.type,selected:b.selected,animated:b.animated,selectable:Y,deletable:b.deletable??!0,label:b.label,labelStyle:b.labelStyle,labelShowBg:b.labelShowBg,labelBgStyle:b.labelBgStyle,labelBgPadding:b.labelBgPadding,labelBgBorderRadius:b.labelBgBorderRadius,sourceX:Q,sourceY:O,targetX:K,targetY:z,sourcePosition:T,targetPosition:U,data:b.data,style:b.style,sourceHandleId:b.sourceHandle,targetHandleId:b.targetHandle,markerStart:re,markerEnd:oe,pathOptions:"pathOptions"in b?b.pathOptions:void 0,interactionWidth:b.interactionWidth}),H&&s.jsx(Vk,{edge:b,isReconnectable:H,reconnectRadius:x,onReconnect:y,onReconnectStart:g,onReconnectEnd:w,sourceX:Q,sourceY:O,targetX:K,targetY:z,sourcePosition:T,targetPosition:U,setUpdateHover:F,setReconnecting:k})]})})}var Wk=N.memo(Uk);const Xk=e=>({edgesFocusable:e.edgesFocusable,edgesReconnectable:e.edgesReconnectable,elementsSelectable:e.elementsSelectable,connectionMode:e.connectionMode,onError:e.onError});function Lx({defaultMarkerColor:e,onlyRenderVisibleElements:r,rfId:o,edgeTypes:a,noPanClassName:l,onReconnect:u,onEdgeContextMenu:c,onEdgeMouseEnter:f,onEdgeMouseMove:m,onEdgeMouseLeave:h,onEdgeClick:x,reconnectRadius:y,onEdgeDoubleClick:g,onReconnectStart:w,onReconnectEnd:j,disableKeyboardA11y:E}){const{edgesFocusable:S,edgesReconnectable:_,elementsSelectable:R,onError:b}=We(Xk,ot),P=Rk(r);return s.jsxs("div",{className:"react-flow__edges",children:[s.jsx(Ik,{defaultColor:e,rfId:o}),P.map($=>s.jsx(Wk,{id:$,edgesFocusable:S,edgesReconnectable:_,elementsSelectable:R,noPanClassName:l,onReconnect:u,onContextMenu:c,onMouseEnter:f,onMouseMove:m,onMouseLeave:h,onClick:x,reconnectRadius:y,onDoubleClick:g,onReconnectStart:w,onReconnectEnd:j,rfId:o,onError:b,edgeTypes:a,disableKeyboardA11y:E},$))]})}Lx.displayName="EdgeRenderer";const Yk=N.memo(Lx),Kk=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function Gk({children:e}){const r=We(Kk);return s.jsx("div",{className:"react-flow__viewport xyflow__viewport react-flow__container",style:{transform:r},children:e})}function Zk(e){const r=Hd(),o=N.useRef(!1);N.useEffect(()=>{!o.current&&r.viewportInitialized&&e&&(setTimeout(()=>e(r),1),o.current=!0)},[e,r.viewportInitialized])}const Qk=e=>e.panZoom?.syncViewport;function qk(e){const r=We(Qk),o=it();return N.useEffect(()=>{e&&(r?.(e),o.setState({transform:[e.x,e.y,e.zoom]}))},[e,r]),null}function Jk(e){return e.connection.inProgress?{...e.connection,to:Ua(e.connection.to,e.transform)}:{...e.connection}}function eE(e){return Jk}function tE(e){const r=eE();return We(r,ot)}const nE=e=>({nodesConnectable:e.nodesConnectable,isValid:e.connection.isValid,inProgress:e.connection.inProgress,width:e.width,height:e.height});function rE({containerStyle:e,style:r,type:o,component:a}){const{nodesConnectable:l,width:u,height:c,isValid:f,inProgress:m}=We(nE,ot);return!(u&&l&&m)?null:s.jsx("svg",{style:e,width:u,height:c,className:"react-flow__connectionline react-flow__container",children:s.jsx("g",{className:gt(["react-flow__connection",Tg(f)]),children:s.jsx(Ix,{style:r,type:o,CustomComponent:a,isValid:f})})})}const Ix=({style:e,type:r=no.Bezier,CustomComponent:o,isValid:a})=>{const{inProgress:l,from:u,fromNode:c,fromHandle:f,fromPosition:m,to:h,toNode:x,toHandle:y,toPosition:g,pointer:w}=tE();if(!l)return;if(o)return s.jsx(o,{connectionLineType:r,connectionLineStyle:e,fromNode:c,fromHandle:f,fromX:u.x,fromY:u.y,toX:h.x,toY:h.y,fromPosition:m,toPosition:g,connectionStatus:Tg(a),toNode:x,toHandle:y,pointer:w});let j="";const E={sourceX:u.x,sourceY:u.y,sourcePosition:m,targetX:h.x,targetY:h.y,targetPosition:g};switch(r){case no.Bezier:[j]=Ug(E);break;case no.SimpleBezier:[j]=_x(E);break;case no.Step:[j]=Pl({...E,borderRadius:0});break;case no.SmoothStep:[j]=Pl(E);break;default:[j]=Yg(E)}return s.jsx("path",{d:j,fill:"none",className:"react-flow__connection-path",style:e})};Ix.displayName="ConnectionLine";const oE={};function r0(e=oE){N.useRef(e),it(),N.useEffect(()=>{},[e])}function iE(){it(),N.useRef(!1),N.useEffect(()=>{},[])}function zx({nodeTypes:e,edgeTypes:r,onInit:o,onNodeClick:a,onEdgeClick:l,onNodeDoubleClick:u,onEdgeDoubleClick:c,onNodeMouseEnter:f,onNodeMouseMove:m,onNodeMouseLeave:h,onNodeContextMenu:x,onSelectionContextMenu:y,onSelectionStart:g,onSelectionEnd:w,connectionLineType:j,connectionLineStyle:E,connectionLineComponent:S,connectionLineContainerStyle:_,selectionKeyCode:R,selectionOnDrag:b,selectionMode:P,multiSelectionKeyCode:$,panActivationKeyCode:D,zoomActivationKeyCode:M,deleteKeyCode:H,onlyRenderVisibleElements:Y,elementsSelectable:B,defaultViewport:I,translateExtent:F,minZoom:L,maxZoom:k,preventScrolling:A,defaultMarkerColor:X,zoomOnScroll:Q,zoomOnPinch:O,panOnScroll:K,panOnScrollSpeed:z,panOnScrollMode:T,zoomOnDoubleClick:U,panOnDrag:re,onPaneClick:oe,onPaneMouseEnter:ue,onPaneMouseMove:pe,onPaneMouseLeave:he,onPaneScroll:ie,onPaneContextMenu:me,paneClickDistance:Le,nodeClickDistance:ze,onEdgeContextMenu:xe,onEdgeMouseEnter:Pe,onEdgeMouseMove:Ve,onEdgeMouseLeave:Qe,reconnectRadius:He,onReconnect:ut,onReconnectStart:en,onReconnectEnd:Pt,noDragClassName:zt,noWheelClassName:Ot,noPanClassName:Cn,disableKeyboardA11y:Un,nodeExtent:Ht,rfId:tn,viewport:fn,onViewportChange:nn}){return r0(e),r0(r),iE(),Zk(o),qk(fn),s.jsx(wk,{onPaneClick:oe,onPaneMouseEnter:ue,onPaneMouseMove:pe,onPaneMouseLeave:he,onPaneContextMenu:me,onPaneScroll:ie,paneClickDistance:Le,deleteKeyCode:H,selectionKeyCode:R,selectionOnDrag:b,selectionMode:P,onSelectionStart:g,onSelectionEnd:w,multiSelectionKeyCode:$,panActivationKeyCode:D,zoomActivationKeyCode:M,elementsSelectable:B,zoomOnScroll:Q,zoomOnPinch:O,zoomOnDoubleClick:U,panOnScroll:K,panOnScrollSpeed:z,panOnScrollMode:T,panOnDrag:re,defaultViewport:I,translateExtent:F,minZoom:L,maxZoom:k,onSelectionContextMenu:y,preventScrolling:A,noDragClassName:zt,noWheelClassName:Ot,noPanClassName:Cn,disableKeyboardA11y:Un,onViewportChange:nn,isControlledViewport:!!fn,children:s.jsxs(Gk,{children:[s.jsx(Yk,{edgeTypes:r,onEdgeClick:l,onEdgeDoubleClick:c,onReconnect:ut,onReconnectStart:en,onReconnectEnd:Pt,onlyRenderVisibleElements:Y,onEdgeContextMenu:xe,onEdgeMouseEnter:Pe,onEdgeMouseMove:Ve,onEdgeMouseLeave:Qe,reconnectRadius:He,defaultMarkerColor:X,noPanClassName:Cn,disableKeyboardA11y:Un,rfId:tn}),s.jsx(rE,{style:E,type:j,component:S,containerStyle:_}),s.jsx("div",{className:"react-flow__edgelabel-renderer"}),s.jsx(Pk,{nodeTypes:e,onNodeClick:a,onNodeDoubleClick:u,onNodeMouseEnter:f,onNodeMouseMove:m,onNodeMouseLeave:h,onNodeContextMenu:x,nodeClickDistance:ze,onlyRenderVisibleElements:Y,noPanClassName:Cn,noDragClassName:zt,disableKeyboardA11y:Un,nodeExtent:Ht,rfId:tn}),s.jsx("div",{className:"react-flow__viewport-portal"})]})})}zx.displayName="GraphView";const aE=N.memo(zx),o0=({nodes:e,edges:r,defaultNodes:o,defaultEdges:a,width:l,height:u,fitView:c,fitViewOptions:f,minZoom:m=.5,maxZoom:h=2,nodeOrigin:x,nodeExtent:y,zIndexMode:g="basic"}={})=>{const w=new Map,j=new Map,E=new Map,S=new Map,_=a??r??[],R=o??e??[],b=x??[0,0],P=y??Ca;Zg(E,S,_);const $=ld(R,w,j,{nodeOrigin:b,nodeExtent:P,zIndexMode:g});let D=[0,0,1];if(c&&l&&u){const M=Ba(w,{filter:I=>!!((I.width||I.initialWidth)&&(I.height||I.initialHeight))}),{x:H,y:Y,zoom:B}=Ld(M,l,u,m,h,f?.padding??.1);D=[H,Y,B]}return{rfId:"1",width:l??0,height:u??0,transform:D,nodes:R,nodesInitialized:$,nodeLookup:w,parentLookup:j,edges:_,edgeLookup:S,connectionLookup:E,onNodesChange:null,onEdgesChange:null,hasDefaultNodes:o!==void 0,hasDefaultEdges:a!==void 0,panZoom:null,minZoom:m,maxZoom:h,translateExtent:Ca,nodeExtent:P,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionMode:Ni.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:b,nodeDragThreshold:1,connectionDragThreshold:1,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesReconnectable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,elevateEdgesOnSelect:!0,selectNodesOnDrag:!0,multiSelectionActive:!1,fitViewQueued:c??!1,fitViewOptions:f,fitViewResolver:null,connection:{...Mg},connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,autoPanOnNodeFocus:!0,autoPanSpeed:15,connectionRadius:20,onError:_S,isValidConnection:void 0,onSelectionChangeHandlers:[],lib:"react",debug:!1,ariaLabelConfig:Rg,zIndexMode:g,onNodesChangeMiddlewareMap:new Map,onEdgesChangeMiddlewareMap:new Map}},sE=({nodes:e,edges:r,defaultNodes:o,defaultEdges:a,width:l,height:u,fitView:c,fitViewOptions:f,minZoom:m,maxZoom:h,nodeOrigin:x,nodeExtent:y,zIndexMode:g})=>jj((w,j)=>{async function E(){const{nodeLookup:S,panZoom:_,fitViewOptions:R,fitViewResolver:b,width:P,height:$,minZoom:D,maxZoom:M}=j();_&&(await wS({nodes:S,width:P,height:$,panZoom:_,minZoom:D,maxZoom:M},R),b?.resolve(!0),w({fitViewResolver:null}))}return{...o0({nodes:e,edges:r,width:l,height:u,fitView:c,fitViewOptions:f,minZoom:m,maxZoom:h,nodeOrigin:x,nodeExtent:y,defaultNodes:o,defaultEdges:a,zIndexMode:g}),setNodes:S=>{const{nodeLookup:_,parentLookup:R,nodeOrigin:b,elevateNodesOnSelect:P,fitViewQueued:$,zIndexMode:D}=j(),M=ld(S,_,R,{nodeOrigin:b,nodeExtent:y,elevateNodesOnSelect:P,checkEquality:!0,zIndexMode:D});$&&M?(E(),w({nodes:S,nodesInitialized:M,fitViewQueued:!1,fitViewOptions:void 0})):w({nodes:S,nodesInitialized:M})},setEdges:S=>{const{connectionLookup:_,edgeLookup:R}=j();Zg(_,R,S),w({edges:S})},setDefaultNodesAndEdges:(S,_)=>{if(S){const{setNodes:R}=j();R(S),w({hasDefaultNodes:!0})}if(_){const{setEdges:R}=j();R(_),w({hasDefaultEdges:!0})}},updateNodeInternals:S=>{const{triggerNodeChanges:_,nodeLookup:R,parentLookup:b,domNode:P,nodeOrigin:$,nodeExtent:D,debug:M,fitViewQueued:H,zIndexMode:Y}=j(),{changes:B,updatedInternals:I}=VS(S,R,b,P,$,D,Y);I&&(FS(R,b,{nodeOrigin:$,nodeExtent:D,zIndexMode:Y}),H?(E(),w({fitViewQueued:!1,fitViewOptions:void 0})):w({}),B?.length>0&&(M&&console.log("React Flow: trigger node changes",B),_?.(B)))},updateNodePositions:(S,_=!1)=>{const R=[];let b=[];const{nodeLookup:P,triggerNodeChanges:$,connection:D,updateConnection:M,onNodesChangeMiddlewareMap:H}=j();for(const[Y,B]of S){const I=P.get(Y),F=!!(I?.expandParent&&I?.parentId&&B?.position),L={id:Y,type:"position",position:F?{x:Math.max(0,B.position.x),y:Math.max(0,B.position.y)}:B.position,dragging:_};if(I&&D.inProgress&&D.fromNode.id===I.id){const k=Io(I,D.fromHandle,Ce.Left,!0);M({...D,from:k})}F&&I.parentId&&R.push({id:Y,parentId:I.parentId,rect:{...B.internals.positionAbsolute,width:B.measured.width??0,height:B.measured.height??0}}),b.push(L)}if(R.length>0){const{parentLookup:Y,nodeOrigin:B}=j(),I=Od(R,P,Y,B);b.push(...I)}for(const Y of H.values())b=Y(b);$(b)},triggerNodeChanges:S=>{const{onNodesChange:_,setNodes:R,nodes:b,hasDefaultNodes:P,debug:$}=j();if(S?.length){if(P){const D=dx(S,b);R(D)}$&&console.log("React Flow: trigger node changes",S),_?.(S)}},triggerEdgeChanges:S=>{const{onEdgesChange:_,setEdges:R,edges:b,hasDefaultEdges:P,debug:$}=j();if(S?.length){if(P){const D=fx(S,b);R(D)}$&&console.log("React Flow: trigger edge changes",S),_?.(S)}},addSelectedNodes:S=>{const{multiSelectionActive:_,edgeLookup:R,nodeLookup:b,triggerNodeChanges:P,triggerEdgeChanges:$}=j();if(_){const D=S.map(M=>jo(M,!0));P(D);return}P(xi(b,new Set([...S]),!0)),$(xi(R))},addSelectedEdges:S=>{const{multiSelectionActive:_,edgeLookup:R,nodeLookup:b,triggerNodeChanges:P,triggerEdgeChanges:$}=j();if(_){const D=S.map(M=>jo(M,!0));$(D);return}$(xi(R,new Set([...S]))),P(xi(b,new Set,!0))},unselectNodesAndEdges:({nodes:S,edges:_}={})=>{const{edges:R,nodes:b,nodeLookup:P,triggerNodeChanges:$,triggerEdgeChanges:D}=j(),M=S||b,H=_||R,Y=M.map(I=>{const F=P.get(I.id);return F&&(F.selected=!1),jo(I.id,!1)}),B=H.map(I=>jo(I.id,!1));$(Y),D(B)},setMinZoom:S=>{const{panZoom:_,maxZoom:R}=j();_?.setScaleExtent([S,R]),w({minZoom:S})},setMaxZoom:S=>{const{panZoom:_,minZoom:R}=j();_?.setScaleExtent([R,S]),w({maxZoom:S})},setTranslateExtent:S=>{j().panZoom?.setTranslateExtent(S),w({translateExtent:S})},resetSelectedElements:()=>{const{edges:S,nodes:_,triggerNodeChanges:R,triggerEdgeChanges:b,elementsSelectable:P}=j();if(!P)return;const $=_.reduce((M,H)=>H.selected?[...M,jo(H.id,!1)]:M,[]),D=S.reduce((M,H)=>H.selected?[...M,jo(H.id,!1)]:M,[]);R($),b(D)},setNodeExtent:S=>{const{nodes:_,nodeLookup:R,parentLookup:b,nodeOrigin:P,elevateNodesOnSelect:$,nodeExtent:D,zIndexMode:M}=j();S[0][0]===D[0][0]&&S[0][1]===D[0][1]&&S[1][0]===D[1][0]&&S[1][1]===D[1][1]||(ld(_,R,b,{nodeOrigin:P,nodeExtent:S,elevateNodesOnSelect:$,checkEquality:!1,zIndexMode:M}),w({nodeExtent:S}))},panBy:S=>{const{transform:_,width:R,height:b,panZoom:P,translateExtent:$}=j();return US({delta:S,panZoom:P,transform:_,translateExtent:$,width:R,height:b})},setCenter:async(S,_,R)=>{const{width:b,height:P,maxZoom:$,panZoom:D}=j();if(!D)return Promise.resolve(!1);const M=typeof R?.zoom<"u"?R.zoom:$;return await D.setViewport({x:b/2-S*M,y:P/2-_*M,zoom:M},{duration:R?.duration,ease:R?.ease,interpolate:R?.interpolate}),Promise.resolve(!0)},cancelConnection:()=>{w({connection:{...Mg}})},updateConnection:S=>{w({connection:S})},reset:()=>w({...o0()})}},Object.is);function lE({initialNodes:e,initialEdges:r,defaultNodes:o,defaultEdges:a,initialWidth:l,initialHeight:u,initialMinZoom:c,initialMaxZoom:f,initialFitViewOptions:m,fitView:h,nodeOrigin:x,nodeExtent:y,zIndexMode:g,children:w}){const[j]=N.useState(()=>sE({nodes:e,edges:r,defaultNodes:o,defaultEdges:a,width:l,height:u,fitView:h,minZoom:c,maxZoom:f,fitViewOptions:m,nodeOrigin:x,nodeExtent:y,zIndexMode:g}));return s.jsx(kj,{value:j,children:s.jsx(Gj,{children:w})})}function uE({children:e,nodes:r,edges:o,defaultNodes:a,defaultEdges:l,width:u,height:c,fitView:f,fitViewOptions:m,minZoom:h,maxZoom:x,nodeOrigin:y,nodeExtent:g,zIndexMode:w}){return N.useContext(Bl)?s.jsx(s.Fragment,{children:e}):s.jsx(lE,{initialNodes:r,initialEdges:o,defaultNodes:a,defaultEdges:l,initialWidth:u,initialHeight:c,fitView:f,initialFitViewOptions:m,initialMinZoom:h,initialMaxZoom:x,nodeOrigin:y,nodeExtent:g,zIndexMode:w,children:e})}const cE={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0};function dE({nodes:e,edges:r,defaultNodes:o,defaultEdges:a,className:l,nodeTypes:u,edgeTypes:c,onNodeClick:f,onEdgeClick:m,onInit:h,onMove:x,onMoveStart:y,onMoveEnd:g,onConnect:w,onConnectStart:j,onConnectEnd:E,onClickConnectStart:S,onClickConnectEnd:_,onNodeMouseEnter:R,onNodeMouseMove:b,onNodeMouseLeave:P,onNodeContextMenu:$,onNodeDoubleClick:D,onNodeDragStart:M,onNodeDrag:H,onNodeDragStop:Y,onNodesDelete:B,onEdgesDelete:I,onDelete:F,onSelectionChange:L,onSelectionDragStart:k,onSelectionDrag:A,onSelectionDragStop:X,onSelectionContextMenu:Q,onSelectionStart:O,onSelectionEnd:K,onBeforeDelete:z,connectionMode:T,connectionLineType:U=no.Bezier,connectionLineStyle:re,connectionLineComponent:oe,connectionLineContainerStyle:ue,deleteKeyCode:pe="Backspace",selectionKeyCode:he="Shift",selectionOnDrag:ie=!1,selectionMode:me=Pa.Full,panActivationKeyCode:Le="Space",multiSelectionKeyCode:ze=Ma()?"Meta":"Control",zoomActivationKeyCode:xe=Ma()?"Meta":"Control",snapToGrid:Pe,snapGrid:Ve,onlyRenderVisibleElements:Qe=!1,selectNodesOnDrag:He,nodesDraggable:ut,autoPanOnNodeFocus:en,nodesConnectable:Pt,nodesFocusable:zt,nodeOrigin:Ot=ux,edgesFocusable:Cn,edgesReconnectable:Un,elementsSelectable:Ht=!0,defaultViewport:tn=Fj,minZoom:fn=.5,maxZoom:nn=2,translateExtent:St=Ca,preventScrolling:Bt=!0,nodeExtent:hn,defaultMarkerColor:ur="#b1b1b7",zoomOnScroll:io=!0,zoomOnPinch:$o=!0,panOnScroll:Vt=!1,panOnScrollSpeed:Fo=.5,panOnScrollMode:Pr=Po.Free,zoomOnDoubleClick:Rr=!0,panOnDrag:ao=!0,onPaneClick:Mr,onPaneMouseEnter:Wn,onPaneMouseMove:Pn,onPaneMouseLeave:mn,onPaneScroll:Oo,onPaneContextMenu:so,paneClickDistance:Ho=1,nodeClickDistance:lo=0,children:cr,onReconnect:Xn,onReconnectStart:uo,onReconnectEnd:dr,onEdgeContextMenu:co,onEdgeDoubleClick:W,onEdgeMouseEnter:q,onEdgeMouseMove:te,onEdgeMouseLeave:se,reconnectRadius:de=10,onNodesChange:Ne,onEdgesChange:ye,noDragClassName:_e="nodrag",noWheelClassName:ke="nowheel",noPanClassName:we="nopan",fitView:Re,fitViewOptions:je,connectOnClick:Be,attributionPosition:Fe,proOptions:ct,defaultEdgeOptions:at,elevateNodesOnSelect:ht=!0,elevateEdgesOnSelect:Ye=!1,disableKeyboardA11y:jt=!1,autoPanOnConnect:Ge,autoPanOnNodeDrag:fr,autoPanSpeed:Ut,connectionRadius:At,isValidConnection:Yn,onError:hr,style:pn,id:gn,nodeDragThreshold:kt,connectionDragThreshold:Oe,viewport:Ze,onViewportChange:Kn,width:Rn,height:Je,colorMode:Mn="light",debug:mr,onScroll:Gn,ariaLabelConfig:Bo,zIndexMode:Xa="basic",...Wl},Pi){const Vo=gn||"1",Ri=Vj(Mn),fo=N.useCallback(Ya=>{Ya.currentTarget.scrollTo({top:0,left:0,behavior:"instant"}),Gn?.(Ya)},[Gn]);return s.jsx("div",{"data-testid":"rf__wrapper",...Wl,onScroll:fo,style:{...pn,...cE},ref:Pi,className:gt(["react-flow",l,Ri]),id:gn,role:"application",children:s.jsxs(uE,{nodes:e,edges:r,width:Rn,height:Je,fitView:Re,fitViewOptions:je,minZoom:fn,maxZoom:nn,nodeOrigin:Ot,nodeExtent:hn,zIndexMode:Xa,children:[s.jsx(aE,{onInit:h,onNodeClick:f,onEdgeClick:m,onNodeMouseEnter:R,onNodeMouseMove:b,onNodeMouseLeave:P,onNodeContextMenu:$,onNodeDoubleClick:D,nodeTypes:u,edgeTypes:c,connectionLineType:U,connectionLineStyle:re,connectionLineComponent:oe,connectionLineContainerStyle:ue,selectionKeyCode:he,selectionOnDrag:ie,selectionMode:me,deleteKeyCode:pe,multiSelectionKeyCode:ze,panActivationKeyCode:Le,zoomActivationKeyCode:xe,onlyRenderVisibleElements:Qe,defaultViewport:tn,translateExtent:St,minZoom:fn,maxZoom:nn,preventScrolling:Bt,zoomOnScroll:io,zoomOnPinch:$o,zoomOnDoubleClick:Rr,panOnScroll:Vt,panOnScrollSpeed:Fo,panOnScrollMode:Pr,panOnDrag:ao,onPaneClick:Mr,onPaneMouseEnter:Wn,onPaneMouseMove:Pn,onPaneMouseLeave:mn,onPaneScroll:Oo,onPaneContextMenu:so,paneClickDistance:Ho,nodeClickDistance:lo,onSelectionContextMenu:Q,onSelectionStart:O,onSelectionEnd:K,onReconnect:Xn,onReconnectStart:uo,onReconnectEnd:dr,onEdgeContextMenu:co,onEdgeDoubleClick:W,onEdgeMouseEnter:q,onEdgeMouseMove:te,onEdgeMouseLeave:se,reconnectRadius:de,defaultMarkerColor:ur,noDragClassName:_e,noWheelClassName:ke,noPanClassName:we,rfId:Vo,disableKeyboardA11y:jt,nodeExtent:hn,viewport:Ze,onViewportChange:Kn}),s.jsx(Bj,{nodes:e,edges:r,defaultNodes:o,defaultEdges:a,onConnect:w,onConnectStart:j,onConnectEnd:E,onClickConnectStart:S,onClickConnectEnd:_,nodesDraggable:ut,autoPanOnNodeFocus:en,nodesConnectable:Pt,nodesFocusable:zt,edgesFocusable:Cn,edgesReconnectable:Un,elementsSelectable:Ht,elevateNodesOnSelect:ht,elevateEdgesOnSelect:Ye,minZoom:fn,maxZoom:nn,nodeExtent:hn,onNodesChange:Ne,onEdgesChange:ye,snapToGrid:Pe,snapGrid:Ve,connectionMode:T,translateExtent:St,connectOnClick:Be,defaultEdgeOptions:at,fitView:Re,fitViewOptions:je,onNodesDelete:B,onEdgesDelete:I,onDelete:F,onNodeDragStart:M,onNodeDrag:H,onNodeDragStop:Y,onSelectionDrag:A,onSelectionDragStart:k,onSelectionDragStop:X,onMove:x,onMoveStart:y,onMoveEnd:g,noPanClassName:we,nodeOrigin:Ot,rfId:Vo,autoPanOnConnect:Ge,autoPanOnNodeDrag:fr,autoPanSpeed:Ut,onError:hr,connectionRadius:At,isValidConnection:Yn,selectNodesOnDrag:He,nodeDragThreshold:kt,connectionDragThreshold:Oe,onBeforeDelete:z,debug:mr,ariaLabelConfig:Bo,zIndexMode:Xa}),s.jsx($j,{onSelectionChange:L}),cr,s.jsx(Dj,{proOptions:ct,position:Fe}),s.jsx(Tj,{rfId:Vo,disableKeyboardA11y:jt})]})})}var fE=hx(dE);const hE=e=>e.domNode?.querySelector(".react-flow__edgelabel-renderer");function mE({children:e}){const r=We(hE);return r?q0.createPortal(e,r):null}function pE(e){const[r,o]=N.useState(e),a=N.useCallback(l=>o(u=>dx(l,u)),[]);return[r,o,a]}function gE(e){const[r,o]=N.useState(e),a=N.useCallback(l=>o(u=>fx(l,u)),[]);return[r,o,a]}function xE({dimensions:e,lineWidth:r,variant:o,className:a}){return s.jsx("path",{strokeWidth:r,d:`M${e[0]/2} 0 V${e[1]} M0 ${e[1]/2} H${e[0]}`,className:gt(["react-flow__background-pattern",o,a])})}function yE({radius:e,className:r}){return s.jsx("circle",{cx:e,cy:e,r:e,className:gt(["react-flow__background-pattern","dots",r])})}var kr;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(kr||(kr={}));const vE={[kr.Dots]:1,[kr.Lines]:1,[kr.Cross]:6},wE=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function Ax({id:e,variant:r=kr.Dots,gap:o=20,size:a,lineWidth:l=1,offset:u=0,color:c,bgColor:f,style:m,className:h,patternClassName:x}){const y=N.useRef(null),{transform:g,patternId:w}=We(wE,ot),j=a||vE[r],E=r===kr.Dots,S=r===kr.Cross,_=Array.isArray(o)?o:[o,o],R=[_[0]*g[2]||1,_[1]*g[2]||1],b=j*g[2],P=Array.isArray(u)?u:[u,u],$=S?[b,b]:R,D=[P[0]*g[2]||1+$[0]/2,P[1]*g[2]||1+$[1]/2],M=`${w}${e||""}`;return s.jsxs("svg",{className:gt(["react-flow__background",h]),style:{...m,...Ul,"--xy-background-color-props":f,"--xy-background-pattern-color-props":c},ref:y,"data-testid":"rf__background",children:[s.jsx("pattern",{id:M,x:g[0]%R[0],y:g[1]%R[1],width:R[0],height:R[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${D[0]},-${D[1]})`,children:E?s.jsx(yE,{radius:b/2,className:x}):s.jsx(xE,{dimensions:$,lineWidth:l,variant:r,className:x})}),s.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${M})`})]})}Ax.displayName="Background";const bE=N.memo(Ax);function _E(){return s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:s.jsx("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function NE(){return s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:s.jsx("path",{d:"M0 0h32v4.2H0z"})})}function SE(){return s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:s.jsx("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function jE(){return s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:s.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function kE(){return s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:s.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}function ll({children:e,className:r,...o}){return s.jsx("button",{type:"button",className:gt(["react-flow__controls-button",r]),...o,children:e})}const EE=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom,ariaLabelConfig:e.ariaLabelConfig});function $x({style:e,showZoom:r=!0,showFitView:o=!0,showInteractive:a=!0,fitViewOptions:l,onZoomIn:u,onZoomOut:c,onFitView:f,onInteractiveChange:m,className:h,children:x,position:y="bottom-left",orientation:g="vertical","aria-label":w}){const j=it(),{isInteractive:E,minZoomReached:S,maxZoomReached:_,ariaLabelConfig:R}=We(EE,ot),{zoomIn:b,zoomOut:P,fitView:$}=Hd(),D=()=>{b(),u?.()},M=()=>{P(),c?.()},H=()=>{$(l),f?.()},Y=()=>{j.setState({nodesDraggable:!E,nodesConnectable:!E,elementsSelectable:!E}),m?.(!E)},B=g==="horizontal"?"horizontal":"vertical";return s.jsxs(Vl,{className:gt(["react-flow__controls",B,h]),position:y,style:e,"data-testid":"rf__controls","aria-label":w??R["controls.ariaLabel"],children:[r&&s.jsxs(s.Fragment,{children:[s.jsx(ll,{onClick:D,className:"react-flow__controls-zoomin",title:R["controls.zoomIn.ariaLabel"],"aria-label":R["controls.zoomIn.ariaLabel"],disabled:_,children:s.jsx(_E,{})}),s.jsx(ll,{onClick:M,className:"react-flow__controls-zoomout",title:R["controls.zoomOut.ariaLabel"],"aria-label":R["controls.zoomOut.ariaLabel"],disabled:S,children:s.jsx(NE,{})})]}),o&&s.jsx(ll,{className:"react-flow__controls-fitview",onClick:H,title:R["controls.fitView.ariaLabel"],"aria-label":R["controls.fitView.ariaLabel"],children:s.jsx(SE,{})}),a&&s.jsx(ll,{className:"react-flow__controls-interactive",onClick:Y,title:R["controls.interactive.ariaLabel"],"aria-label":R["controls.interactive.ariaLabel"],children:E?s.jsx(kE,{}):s.jsx(jE,{})}),x]})}$x.displayName="Controls";const CE=N.memo($x);function PE({id:e,x:r,y:o,width:a,height:l,style:u,color:c,strokeColor:f,strokeWidth:m,className:h,borderRadius:x,shapeRendering:y,selected:g,onClick:w}){const{background:j,backgroundColor:E}=u||{},S=c||j||E;return s.jsx("rect",{className:gt(["react-flow__minimap-node",{selected:g},h]),x:r,y:o,rx:x,ry:x,width:a,height:l,style:{fill:S,stroke:f,strokeWidth:m},shapeRendering:y,onClick:w?_=>w(_,e):void 0})}const RE=N.memo(PE),ME=e=>e.nodes.map(r=>r.id),Xc=e=>e instanceof Function?e:()=>e;function TE({nodeStrokeColor:e,nodeColor:r,nodeClassName:o="",nodeBorderRadius:a=5,nodeStrokeWidth:l,nodeComponent:u=RE,onClick:c}){const f=We(ME,ot),m=Xc(r),h=Xc(e),x=Xc(o),y=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return s.jsx(s.Fragment,{children:f.map(g=>s.jsx(LE,{id:g,nodeColorFunc:m,nodeStrokeColorFunc:h,nodeClassNameFunc:x,nodeBorderRadius:a,nodeStrokeWidth:l,NodeComponent:u,onClick:c,shapeRendering:y},g))})}function DE({id:e,nodeColorFunc:r,nodeStrokeColorFunc:o,nodeClassNameFunc:a,nodeBorderRadius:l,nodeStrokeWidth:u,shapeRendering:c,NodeComponent:f,onClick:m}){const{node:h,x,y,width:g,height:w}=We(j=>{const{internals:E}=j.nodeLookup.get(e),S=E.userNode,{x:_,y:R}=E.positionAbsolute,{width:b,height:P}=Cr(S);return{node:S,x:_,y:R,width:b,height:P}},ot);return!h||h.hidden||!$g(h)?null:s.jsx(f,{x,y,width:g,height:w,style:h.style,selected:!!h.selected,className:a(h),color:r(h),borderRadius:l,strokeColor:o(h),strokeWidth:u,shapeRendering:c,onClick:m,id:h.id})}const LE=N.memo(DE);var IE=N.memo(TE);const zE=200,AE=150,$E=e=>!e.hidden,FE=e=>{const r={x:-e.transform[0]/e.transform[2],y:-e.transform[1]/e.transform[2],width:e.width/e.transform[2],height:e.height/e.transform[2]};return{viewBB:r,boundingRect:e.nodeLookup.size>0?Ag(Ba(e.nodeLookup,{filter:$E}),r):r,rfId:e.rfId,panZoom:e.panZoom,translateExtent:e.translateExtent,flowWidth:e.width,flowHeight:e.height,ariaLabelConfig:e.ariaLabelConfig}},OE="react-flow__minimap-desc";function Fx({style:e,className:r,nodeStrokeColor:o,nodeColor:a,nodeClassName:l="",nodeBorderRadius:u=5,nodeStrokeWidth:c,nodeComponent:f,bgColor:m,maskColor:h,maskStrokeColor:x,maskStrokeWidth:y,position:g="bottom-right",onClick:w,onNodeClick:j,pannable:E=!1,zoomable:S=!1,ariaLabel:_,inversePan:R,zoomStep:b=1,offsetScale:P=5}){const $=it(),D=N.useRef(null),{boundingRect:M,viewBB:H,rfId:Y,panZoom:B,translateExtent:I,flowWidth:F,flowHeight:L,ariaLabelConfig:k}=We(FE,ot),A=e?.width??zE,X=e?.height??AE,Q=M.width/A,O=M.height/X,K=Math.max(Q,O),z=K*A,T=K*X,U=P*K,re=M.x-(z-M.width)/2-U,oe=M.y-(T-M.height)/2-U,ue=z+U*2,pe=T+U*2,he=`${OE}-${Y}`,ie=N.useRef(0),me=N.useRef();ie.current=K,N.useEffect(()=>{if(D.current&&B)return me.current=JS({domNode:D.current,panZoom:B,getTransform:()=>$.getState().transform,getViewScale:()=>ie.current}),()=>{me.current?.destroy()}},[B]),N.useEffect(()=>{me.current?.update({translateExtent:I,width:F,height:L,inversePan:R,pannable:E,zoomStep:b,zoomable:S})},[E,S,R,b,I,F,L]);const Le=w?Pe=>{const[Ve,Qe]=me.current?.pointer(Pe)||[0,0];w(Pe,{x:Ve,y:Qe})}:void 0,ze=j?N.useCallback((Pe,Ve)=>{const Qe=$.getState().nodeLookup.get(Ve).internals.userNode;j(Pe,Qe)},[]):void 0,xe=_??k["minimap.ariaLabel"];return s.jsx(Vl,{position:g,style:{...e,"--xy-minimap-background-color-props":typeof m=="string"?m:void 0,"--xy-minimap-mask-background-color-props":typeof h=="string"?h:void 0,"--xy-minimap-mask-stroke-color-props":typeof x=="string"?x:void 0,"--xy-minimap-mask-stroke-width-props":typeof y=="number"?y*K:void 0,"--xy-minimap-node-background-color-props":typeof a=="string"?a:void 0,"--xy-minimap-node-stroke-color-props":typeof o=="string"?o:void 0,"--xy-minimap-node-stroke-width-props":typeof c=="number"?c:void 0},className:gt(["react-flow__minimap",r]),"data-testid":"rf__minimap",children:s.jsxs("svg",{width:A,height:X,viewBox:`${re} ${oe} ${ue} ${pe}`,className:"react-flow__minimap-svg",role:"img","aria-labelledby":he,ref:D,onClick:Le,children:[xe&&s.jsx("title",{id:he,children:xe}),s.jsx(IE,{onClick:ze,nodeColor:a,nodeStrokeColor:o,nodeBorderRadius:u,nodeClassName:l,nodeStrokeWidth:c,nodeComponent:f}),s.jsx("path",{className:"react-flow__minimap-mask",d:`M${re-U},${oe-U}h${ue+U*2}v${pe+U*2}h${-ue-U*2}z
        M${H.x},${H.y}h${H.width}v${H.height}h${-H.width}z`,fillRule:"evenodd",pointerEvents:"none"})]})})}Fx.displayName="MiniMap";const HE=N.memo(Fx),BE=e=>r=>e?`${Math.max(1/r.transform[2],1)}`:void 0,VE={[Ei.Line]:"right",[Ei.Handle]:"bottom-right"};function UE({nodeId:e,position:r,variant:o=Ei.Handle,className:a,style:l=void 0,children:u,color:c,minWidth:f=10,minHeight:m=10,maxWidth:h=Number.MAX_VALUE,maxHeight:x=Number.MAX_VALUE,keepAspectRatio:y=!1,resizeDirection:g,autoScale:w=!0,shouldResize:j,onResizeStart:E,onResize:S,onResizeEnd:_}){const R=xx(),b=typeof e=="string"?e:R,P=it(),$=N.useRef(null),D=o===Ei.Handle,M=We(N.useCallback(BE(D&&w),[D,w]),ot),H=N.useRef(null),Y=r??VE[o];N.useEffect(()=>{if(!(!$.current||!b))return H.current||(H.current=hj({domNode:$.current,nodeId:b,getStoreItems:()=>{const{nodeLookup:I,transform:F,snapGrid:L,snapToGrid:k,nodeOrigin:A,domNode:X}=P.getState();return{nodeLookup:I,transform:F,snapGrid:L,snapToGrid:k,nodeOrigin:A,paneDomNode:X}},onChange:(I,F)=>{const{triggerNodeChanges:L,nodeLookup:k,parentLookup:A,nodeOrigin:X}=P.getState(),Q=[],O={x:I.x,y:I.y},K=k.get(b);if(K&&K.expandParent&&K.parentId){const z=K.origin??X,T=I.width??K.measured.width??0,U=I.height??K.measured.height??0,re={id:K.id,parentId:K.parentId,rect:{width:T,height:U,...Fg({x:I.x??K.position.x,y:I.y??K.position.y},{width:T,height:U},K.parentId,k,z)}},oe=Od([re],k,A,X);Q.push(...oe),O.x=I.x?Math.max(z[0]*T,I.x):void 0,O.y=I.y?Math.max(z[1]*U,I.y):void 0}if(O.x!==void 0&&O.y!==void 0){const z={id:b,type:"position",position:{...O}};Q.push(z)}if(I.width!==void 0&&I.height!==void 0){const T={id:b,type:"dimensions",resizing:!0,setAttributes:g?g==="horizontal"?"width":"height":!0,dimensions:{width:I.width,height:I.height}};Q.push(T)}for(const z of F){const T={...z,type:"position"};Q.push(T)}L(Q)},onEnd:({width:I,height:F})=>{const L={id:b,type:"dimensions",resizing:!1,dimensions:{width:I,height:F}};P.getState().triggerNodeChanges([L])}})),H.current.update({controlPosition:Y,boundaries:{minWidth:f,minHeight:m,maxWidth:h,maxHeight:x},keepAspectRatio:y,resizeDirection:g,onResizeStart:E,onResize:S,onResizeEnd:_,shouldResize:j}),()=>{H.current?.destroy()}},[Y,f,m,h,x,y,E,S,_,j]);const B=Y.split("-");return s.jsx("div",{className:gt(["react-flow__resize-control","nodrag",...B,o,a]),ref:$,style:{...l,scale:M,...c&&{[D?"backgroundColor":"borderColor"]:c}},children:u})}N.memo(UE);const Ox=[{type:"inbound_number",label:"Inbound Number",description:"Entry point  one or more DIDs mapped to it",entityType:"inbound_number",outputs:1,outputHandles:[{id:"next",label:"Next"}],iconPath:"M2 3a1 1 0 011-1h2.153a1 1 0 01.986.836l.74 4.435a1 1 0 01-.54 1.06l-1.548.773a11.037 11.037 0 006.105 6.105l.774-1.548a1 1 0 011.059-.54l4.435.74a1 1 0 01.836.986V17a1 1 0 01-1 1h-2C7.82 18 2 12.18 2 5V3z",color:"emerald"},{type:"time_switch",label:"Time Switch",description:"Route calls based on day/time rules",entityType:"time_switch",outputs:"dynamic",iconPath:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z",color:"amber"},{type:"ivr_menu",label:"IVR Menu",description:"Play prompt, collect DTMF digits",entityType:"ivr_menu",outputs:"dynamic",iconPath:"M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 5a1 1 0 011-1h6a1 1 0 110 2H4a1 1 0 01-1-1z",color:"violet"},{type:"ring_group",label:"Ring Group",description:"Ring a group of extensions",entityType:"ring_group",outputs:2,outputHandles:[{id:"answered",label:"Answered"},{id:"no_answer",label:"No Answer"}],iconPath:"M13 6a3 3 0 11-6 0 3 3 0 016 0zm5 2a2 2 0 11-4 0 2 2 0 014 0zm-4 7a4 4 0 00-8 0v3h8v-3zM6 8a2 2 0 11-4 0 2 2 0 014 0zm10 10v-3a5.972 5.972 0 00-.75-2.906A3.005 3.005 0 0119 15v3h-3zM4.75 12.094A5.973 5.973 0 004 15v3H1v-3a3 3 0 013.75-2.906z",color:"blue"},{type:"extension",label:"Extension",description:"Ring a single extension",entityType:"extension",outputs:2,outputHandles:[{id:"answered",label:"Answered"},{id:"no_answer",label:"No Answer"}],iconPath:"M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z",color:"sky"},{type:"voicemail",label:"Voicemail",description:"Record voicemail into a mailbox",entityType:"voicemail_box",outputs:1,outputHandles:[{id:"after_recording",label:"After Recording"}],iconPath:"M18 10c0 3.866-3.582 7-8 7a8.841 8.841 0 01-4.083-.98L2 17l1.338-3.123C2.493 12.767 2 11.434 2 10c0-3.866 3.582-7 8-7s8 3.134 8 7z",color:"orange"},{type:"play_message",label:"Play Message",description:"Play an audio file or TTS",outputs:1,outputHandles:[{id:"after_playback",label:"After Playback"}],iconPath:"M9.383 3.076A1 1 0 0110 4v12a1 1 0 01-1.707.707L4.586 13H2a1 1 0 01-1-1V8a1 1 0 011-1h2.586l3.707-3.707a1 1 0 011.09-.217zM14.657 2.929a1 1 0 011.414 0A9.972 9.972 0 0119 10a9.972 9.972 0 01-2.929 7.071 1 1 0 01-1.414-1.414A7.971 7.971 0 0017 10c0-2.21-.894-4.208-2.343-5.657a1 1 0 010-1.414z",color:"teal"},{type:"conference",label:"Conference",description:"Join caller into a conference bridge",entityType:"conference",outputs:1,outputHandles:[{id:"after_leave",label:"After Leave"}],iconPath:"M7 4a3 3 0 016 0v4a3 3 0 11-6 0V4zm4 10.93A7.001 7.001 0 0017 8a1 1 0 10-2 0A5 5 0 015 8a1 1 0 00-2 0 7.001 7.001 0 006 6.93V17H6a1 1 0 100 2h8a1 1 0 100-2h-3v-2.07z",color:"indigo"},{type:"transfer",label:"Transfer",description:"Transfer call to external number or extension",outputs:0,iconPath:"M10.293 3.293a1 1 0 011.414 0l6 6a1 1 0 010 1.414l-6 6a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-4.293-4.293a1 1 0 010-1.414z",color:"cyan"},{type:"hangup",label:"Hangup",description:"Terminate the call",outputs:0,iconPath:"M3.707 2.293a1 1 0 00-1.414 1.414l6.921 6.922c.05.062.105.118.168.167l6.91 6.911a1 1 0 001.415-1.414l-.354-.354A8 8 0 003.707 2.293zM2 10a8 8 0 0011.953 6.953l-1.5-1.5A6 6 0 014 10a1 1 0 00-2 0zm14-1a1 1 0 10-2 0 4 4 0 01-.32 1.564l1.492 1.492A6 6 0 0016 10v-1z",color:"red"},{type:"set_caller_id",label:"Set Caller ID",description:"Override caller ID name/number",outputs:1,outputHandles:[{id:"next",label:"Next"}],iconPath:"M17.414 2.586a2 2 0 00-2.828 0L7 10.172V13h2.828l7.586-7.586a2 2 0 000-2.828z M2 6a2 2 0 012-2h4a1 1 0 010 2H4v10h10v-4a1 1 0 112 0v4a2 2 0 01-2 2H4a2 2 0 01-2-2V6z",color:"pink"}];function Vd(e){return Ox.find(r=>r.type===e)}const Mo={emerald:{bg:"bg-emerald-50",border:"border-emerald-300",text:"text-emerald-700",handle:"bg-emerald-500"},amber:{bg:"bg-amber-50",border:"border-amber-300",text:"text-amber-700",handle:"bg-amber-500"},violet:{bg:"bg-violet-50",border:"border-violet-300",text:"text-violet-700",handle:"bg-violet-500"},blue:{bg:"bg-blue-50",border:"border-blue-300",text:"text-blue-700",handle:"bg-blue-500"},sky:{bg:"bg-sky-50",border:"border-sky-300",text:"text-sky-700",handle:"bg-sky-500"},orange:{bg:"bg-orange-50",border:"border-orange-300",text:"text-orange-700",handle:"bg-orange-500"},teal:{bg:"bg-teal-50",border:"border-teal-300",text:"text-teal-700",handle:"bg-teal-500"},indigo:{bg:"bg-indigo-50",border:"border-indigo-300",text:"text-indigo-700",handle:"bg-indigo-500"},cyan:{bg:"bg-cyan-50",border:"border-cyan-300",text:"text-cyan-700",handle:"bg-cyan-500"},red:{bg:"bg-red-50",border:"border-red-300",text:"text-red-700",handle:"bg-red-500"},pink:{bg:"bg-pink-50",border:"border-pink-300",text:"text-pink-700",handle:"bg-pink-500"}};function WE({data:e,type:r,selected:o}){const a=Vd(r??"");if(!a)return null;const l=Mo[a.color]??Mo.blue,u=e.validationIssues?.some(x=>x.severity==="error"),c=e.validationIssues?.some(x=>x.severity==="warning"),f=e.outputHandles??a.outputHandles??[],m=a.outputs===0,h=a.type==="inbound_number";return s.jsxs("div",{className:`rounded-lg border-2 shadow-sm min-w-[180px] max-w-[220px] ${l.bg} ${u?"border-red-500":c?"border-amber-500":o?"border-blue-500":l.border} transition-colors`,children:[!h&&s.jsx(Ro,{type:"target",position:Ce.Left,id:"incoming",className:"!w-3 !h-3 !bg-gray-400 !border-2 !border-white"}),s.jsxs("div",{className:`flex items-center gap-2 px-3 py-2 ${l.text}`,children:[s.jsx("svg",{className:"w-4 h-4 shrink-0",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:a.iconPath,clipRule:"evenodd"})}),s.jsxs("div",{className:"min-w-0 flex-1",children:[s.jsx("div",{className:"text-[11px] font-semibold uppercase tracking-wider opacity-60",children:a.label}),s.jsx("div",{className:"text-sm font-medium truncate text-gray-900",children:e.label||"Untitled"})]})]}),!m&&f.length>0&&s.jsx("div",{className:"border-t border-gray-200/60 px-3 py-1.5 space-y-1",children:f.map(x=>s.jsxs("div",{className:"relative flex items-center justify-end pr-1",children:[s.jsx("span",{className:"text-[10px] text-gray-500 mr-1",children:x.label}),s.jsx(Ro,{type:"source",position:Ce.Right,id:x.id,className:`!w-2.5 !h-2.5 ${l.handle} !border-2 !border-white`,style:{top:"auto",position:"relative",transform:"none"}})]},x.id))}),!m&&f.length===0&&a.outputs!==0&&s.jsx(Ro,{type:"source",position:Ce.Right,id:"next",className:`!w-3 !h-3 ${l.handle} !border-2 !border-white`}),m&&s.jsx("div",{className:"border-t border-gray-200/60 px-3 py-1 text-center",children:s.jsx("span",{className:"text-[10px] text-gray-400 uppercase tracking-wider",children:"End"})}),u&&s.jsx("div",{className:"absolute -top-2 -right-2 w-5 h-5 rounded-full bg-red-500 flex items-center justify-center",children:s.jsx("span",{className:"text-white text-[10px] font-bold",children:"!"})}),!u&&c&&s.jsx("div",{className:"absolute -top-2 -right-2 w-5 h-5 rounded-full bg-amber-500 flex items-center justify-center",children:s.jsx("span",{className:"text-white text-[10px] font-bold",children:"!"})})]})}const $n=N.memo(WE);function XE({id:e,sourceX:r,sourceY:o,targetX:a,targetY:l,sourcePosition:u,targetPosition:c,data:f,selected:m}){const[h,x,y]=Pl({sourceX:r,sourceY:o,targetX:a,targetY:l,sourcePosition:u,targetPosition:c,borderRadius:8}),g=f?.label;return s.jsxs(s.Fragment,{children:[s.jsx(Wa,{id:e,path:h,style:{stroke:m?"#3b82f6":"#94a3b8",strokeWidth:m?2:1.5}}),g&&s.jsx(mE,{children:s.jsx("div",{className:"absolute bg-white border border-gray-200 rounded px-1.5 py-0.5 text-[10px] text-gray-600 font-medium shadow-sm pointer-events-none",style:{transform:`translate(-50%, -50%) translate(${x}px, ${y}px)`},children:g})})]})}const YE=N.memo(XE);function KE(){function e(r,o){r.dataTransfer.setData("application/reactflow-type",o),r.dataTransfer.effectAllowed="move"}return s.jsxs("div",{className:"w-52 bg-white border-r border-gray-200 flex flex-col shrink-0",children:[s.jsx("div",{className:"px-3 py-2 border-b border-gray-200",children:s.jsx("h3",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Nodes"})}),s.jsx("div",{className:"flex-1 overflow-y-auto p-2 space-y-1",children:Ox.map(r=>{const o=Mo[r.color]??Mo.blue;return s.jsxs("div",{draggable:!0,onDragStart:a=>e(a,r.type),className:`flex items-center gap-2 px-2.5 py-2 rounded-md border ${o.border} ${o.bg} cursor-grab active:cursor-grabbing hover:shadow-sm transition-shadow select-none`,title:r.description,children:[s.jsx("svg",{className:`w-4 h-4 shrink-0 ${o.text}`,viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:r.iconPath,clipRule:"evenodd"})}),s.jsx("span",{className:"text-sm font-medium text-gray-700",children:r.label})]},r.type)})})]})}function Ud(e){return Ci("/extensions",e)}function GE(e){return Jt("/extensions",e)}function ZE(e,r){return kn(`/extensions/${e}`,r)}function QE(e){return dn(`/extensions/${e}`)}function Hx(e){return Ci("/trunks",e)}function qE(e){return Jt("/trunks",e)}function JE(e,r){return kn(`/trunks/${e}`,r)}function eC(e){return dn(`/trunks/${e}`)}function tC(){return qt("/trunks/status")}function Bx(e){return Ci("/voicemail-boxes",e)}function nC(e){return Jt("/voicemail-boxes",e)}function rC(e,r){return kn(`/voicemail-boxes/${e}`,r)}function oC(e){return dn(`/voicemail-boxes/${e}`)}function iC(e){return qt(`/voicemail-boxes/${e}/messages`)}function aC(e,r){return dn(`/voicemail-boxes/${e}/messages/${r}`)}function sC(e,r){return kn(`/voicemail-boxes/${e}/messages/${r}/read`)}function i0(e,r){return`/api/v1/voicemail-boxes/${e}/messages/${r}/audio`}function Vx(e){return Ci("/numbers",e)}function lC(e){return Jt("/numbers",e)}function uC(e,r){return kn(`/numbers/${e}`,r)}function cC(e){return dn(`/numbers/${e}`)}function dC(e){return Ci("/cdrs",e)}function fC(e){const r=new URL("/api/v1/cdrs/export",window.location.origin);if(e)for(const[o,a]of Object.entries(e))a!==void 0&&a!==""&&r.searchParams.set(o,String(a));return r.toString()}function Ux(){return qt("/prompts")}async function Wx(e,r){const o=new FormData;o.append("file",e);const a=document.cookie.split("; ").find(m=>m.startsWith("flowpbx_csrf=")),l=a?a.split("=")[1]:null,u={Accept:"application/json"};l&&(u["X-CSRF-Token"]=l);const c=await fetch("/api/v1/prompts",{method:"POST",headers:u,credentials:"same-origin",body:o});if(c.status===401)throw window.location.href="/login",new Error("authentication required");const f=await c.json();if(!c.ok||f.error)throw new Error(f.error??`upload failed with status ${c.status}`);return f.data}function hC(e){return dn(`/prompts/${e}`)}function Xx(e){return`/api/v1/prompts/${e}/audio`}function mC(){return qt("/settings")}function pC(e){return kn("/settings",e)}function gC(){return Jt("/system/reload")}function xC(){return qt("/flows")}function yC(e){return qt(`/flows/${e}`)}function vC(e){return Jt("/flows",e)}function wC(e,r){return kn(`/flows/${e}`,r)}function bC(e){return dn(`/flows/${e}`)}function _C(e){return Jt(`/flows/${e}/publish`)}function NC(e){return Jt(`/flows/${e}/validate`)}function Yx(){return qt("/ring-groups")}function SC(e){return Jt("/ring-groups",e)}function jC(e,r){return kn(`/ring-groups/${e}`,r)}function kC(e){return dn(`/ring-groups/${e}`)}function EC(){return qt("/ivr-menus")}function CC(e){return Jt("/ivr-menus",e)}function PC(e,r){return kn(`/ivr-menus/${e}`,r)}function RC(e){return dn(`/ivr-menus/${e}`)}function MC(){return qt("/time-switches")}function TC(e){return Jt("/time-switches",e)}function DC(e,r){return kn(`/time-switches/${e}`,r)}function LC(e){return dn(`/time-switches/${e}`)}function IC(){return qt("/conferences")}function zC(e){return Jt("/conferences",e)}function AC(e,r){return kn(`/conferences/${e}`,r)}function $C(e){return dn(`/conferences/${e}`)}function a0(e){return qt(`/conferences/${e}/participants`)}function FC(e,r,o){return kn(`/conferences/${e}/participants/${r}/mute`,{muted:o})}function OC(e,r){return dn(`/conferences/${e}/participants/${r}`)}function HC(e){return Ci("/recordings",e)}function BC(e){return dn(`/recordings/${e}`)}function s0(e){return`/api/v1/recordings/${e}/download`}const VC={extension:"Extension",voicemail_box:"Voicemail Box",inbound_number:"Inbound Number",ring_group:"Ring Group",ivr_menu:"IVR Menu",time_switch:"Time Switch",conference:"Conference"};function UC({entityType:e,selectedId:r,onSelect:o,onCreateNew:a}){const[l,u]=N.useState([]),[c,f]=N.useState(!1),[m,h]=N.useState(!1),[x,y]=N.useState(""),g=N.useRef(null);N.useEffect(()=>{w()},[e]),N.useEffect(()=>{function _(R){g.current&&!g.current.contains(R.target)&&h(!1)}return document.addEventListener("mousedown",_),()=>document.removeEventListener("mousedown",_)},[]);async function w(){f(!0);try{const _=await WC(e);u(_)}catch{u([])}finally{f(!1)}}const j=l.find(_=>_.id===r),E=l.filter(_=>_.label.toLowerCase().includes(x.toLowerCase())||_.sublabel?.toLowerCase().includes(x.toLowerCase())),S=VC[e]??e;return s.jsxs("div",{ref:g,className:"relative",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:S}),s.jsxs("button",{type:"button",onClick:()=>h(!m),className:"w-full flex items-center justify-between rounded-md border border-gray-300 bg-white px-3 py-2 text-sm text-left focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500",children:[s.jsx("span",{className:j?"text-gray-900":"text-gray-400",children:c?"Loading...":j?j.label:`Select ${S}...`}),s.jsx("svg",{className:"w-4 h-4 text-gray-400",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})})]}),m&&s.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg max-h-60 flex flex-col",children:[s.jsx("div",{className:"p-2 border-b border-gray-100",children:s.jsx("input",{type:"text",value:x,onChange:_=>y(_.target.value),placeholder:"Search...",className:"w-full text-sm rounded border border-gray-200 px-2 py-1 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500",autoFocus:!0})}),a&&s.jsxs("button",{type:"button",onClick:()=>{a(),h(!1)},className:"flex items-center gap-2 px-3 py-2 text-sm text-blue-600 hover:bg-blue-50 border-b border-gray-100",children:[s.jsx("svg",{className:"w-4 h-4",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z",clipRule:"evenodd"})}),"New ",S,"..."]}),s.jsxs("div",{className:"flex-1 overflow-y-auto",children:[s.jsx("button",{type:"button",onClick:()=>{o(null),h(!1)},className:"w-full text-left px-3 py-2 text-sm text-gray-400 hover:bg-gray-50",children:"None"}),E.map(_=>s.jsxs("button",{type:"button",onClick:()=>{o(_.id),h(!1),y("")},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${_.id===r?"bg-blue-50 text-blue-700":"text-gray-900"}`,children:[s.jsx("div",{className:"font-medium",children:_.label}),_.sublabel&&s.jsx("div",{className:"text-xs text-gray-500",children:_.sublabel})]},_.id)),E.length===0&&!c&&s.jsx("div",{className:"px-3 py-2 text-sm text-gray-400",children:"No results"})]})]})]})}async function WC(e){switch(e){case"extension":return(await Ud({limit:200})).items.map(o=>({id:o.id,label:`${o.extension} - ${o.name}`,sublabel:o.email||void 0}));case"voicemail_box":return(await Bx({limit:200})).items.map(o=>({id:o.id,label:`${o.mailbox_number} - ${o.name}`,sublabel:o.email_address||void 0}));case"inbound_number":return(await Vx({limit:200})).items.map(o=>({id:o.id,label:o.number,sublabel:o.name||void 0}));case"ring_group":return(await Yx()).map(o=>({id:o.id,label:o.name,sublabel:o.strategy}));case"ivr_menu":case"time_switch":case"conference":return[];default:return[]}}const Wd="block w-full rounded-md border border-gray-300 px-3 py-2 text-sm text-gray-900 placeholder-gray-400 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500",Xd="block text-sm font-medium text-gray-700 mb-1";function Me({label:e,id:r,...o}){return s.jsxs("div",{children:[s.jsx("label",{htmlFor:r,className:Xd,children:e}),s.jsx("input",{id:r,className:Wd,...o})]})}function It({label:e,id:r,...o}){return s.jsxs("div",{children:[s.jsx("label",{htmlFor:r,className:Xd,children:e}),s.jsx("input",{id:r,type:"number",className:Wd,...o})]})}function ar({label:e,id:r,children:o,...a}){return s.jsxs("div",{children:[s.jsx("label",{htmlFor:r,className:Xd,children:e}),s.jsx("select",{id:r,className:Wd,...a,children:o})]})}function rr({label:e,checked:r,onChange:o}){return s.jsxs("label",{className:"flex items-center gap-2 text-sm text-gray-700 cursor-pointer",children:[s.jsx("button",{type:"button",role:"switch","aria-checked":r,onClick:()=>o(!r),className:`relative inline-flex h-5 w-9 shrink-0 rounded-full border-2 border-transparent transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 ${r?"bg-blue-600":"bg-gray-200"}`,children:s.jsx("span",{className:`pointer-events-none inline-block h-4 w-4 rounded-full bg-white shadow transform transition-transform ${r?"translate-x-4":"translate-x-0"}`})}),e]})}function XC({node:e,onUpdate:r,onClose:o}){const a=Vd(e.type??""),l=a?Mo[a.color]??Mo.blue:Mo.blue,u=e.data,[c,f]=N.useState(u.label??"");N.useEffect(()=>{f(e.data.label??"")},[e.id,e.data]);function m(w){f(w),r(e.id,{label:w})}function h(w){r(e.id,{entity_id:w})}function x(w,j){r(e.id,{config:{...u.config,[w]:j}})}function y(w,j){const E=u.outputHandles??[];E.some(S=>S.id===w)||r(e.id,{outputHandles:[...E,{id:w,label:j}]})}function g(w){const j=u.outputHandles??[];r(e.id,{outputHandles:j.filter(E=>E.id!==w)})}return s.jsxs("div",{className:"w-80 bg-white border-l border-gray-200 flex flex-col shrink-0",children:[s.jsxs("div",{className:`flex items-center justify-between px-4 py-3 border-b border-gray-200 ${l.bg}`,children:[s.jsxs("div",{className:"flex items-center gap-2",children:[a&&s.jsx("svg",{className:`w-4 h-4 ${l.text}`,viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:a.iconPath,clipRule:"evenodd"})}),s.jsx("h3",{className:"text-sm font-semibold text-gray-900",children:a?.label??"Node"})]}),s.jsx("button",{type:"button",onClick:o,className:"text-gray-400 hover:text-gray-600 transition-colors",children:s.jsx("svg",{className:"w-5 h-5",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[s.jsx(Me,{label:"Label",id:"node-label",value:c,onChange:w=>m(w.currentTarget.value),placeholder:"Enter label..."}),a?.entityType&&s.jsx(UC,{entityType:a.entityType,selectedId:u.entity_id??null,onSelect:h}),e.type==="transfer"&&s.jsx(Me,{label:"Transfer To",id:"transfer-to",value:u.config?.transfer_to??"",onChange:w=>x("transfer_to",w.currentTarget.value),placeholder:"Number or extension"}),e.type==="hangup"&&s.jsx(Me,{label:"Cause Code",id:"hangup-cause",value:u.config?.cause_code??"",onChange:w=>x("cause_code",w.currentTarget.value),placeholder:"Normal (default)"}),e.type==="set_caller_id"&&s.jsxs(s.Fragment,{children:[s.jsx(Me,{label:"Caller ID Name",id:"cid-name",value:u.config?.caller_id_name??"",onChange:w=>x("caller_id_name",w.currentTarget.value),placeholder:"Display name"}),s.jsx(Me,{label:"Caller ID Number",id:"cid-number",value:u.config?.caller_id_num??"",onChange:w=>x("caller_id_num",w.currentTarget.value),placeholder:"Number"})]}),e.type==="play_message"&&s.jsx(Me,{label:"Audio Prompt",id:"prompt-file",value:u.config?.prompt??"",onChange:w=>x("prompt",w.currentTarget.value),placeholder:"Prompt filename"}),e.type==="time_switch"&&s.jsx(l0,{handles:u.outputHandles??[{id:"default",label:"Default"}],onAdd:y,onRemove:g,addLabel:"Add Time Rule",idPrefix:"rule_"}),e.type==="ivr_menu"&&s.jsx(l0,{handles:u.outputHandles??[{id:"timeout",label:"Timeout"},{id:"invalid",label:"Invalid"}],onAdd:y,onRemove:g,addLabel:"Add Digit",idPrefix:"digit_",protectedIds:["timeout","invalid"]}),u.validationIssues&&u.validationIssues.length>0&&s.jsxs("div",{className:"space-y-1",children:[s.jsx("p",{className:"text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Issues"}),u.validationIssues.map((w,j)=>s.jsx("div",{className:`text-xs px-2 py-1 rounded ${w.severity==="error"?"bg-red-50 text-red-700":"bg-amber-50 text-amber-700"}`,children:w.message},j))]})]})]})}function l0({handles:e,onAdd:r,onRemove:o,addLabel:a,idPrefix:l,protectedIds:u=[]}){const[c,f]=N.useState("");function m(){if(!c.trim())return;const h=l+c.trim().toLowerCase().replace(/[^a-z0-9]/g,"_");r(h,c.trim()),f("")}return s.jsxs("div",{className:"space-y-2",children:[s.jsx("p",{className:"text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Outputs"}),s.jsx("div",{className:"space-y-1",children:e.map(h=>s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsx("span",{className:"text-gray-700",children:h.label}),!u.includes(h.id)&&s.jsx("button",{type:"button",onClick:()=>o(h.id),className:"text-xs text-red-500 hover:text-red-700",children:"Remove"})]},h.id))}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"text",value:c,onChange:h=>f(h.target.value),onKeyDown:h=>h.key==="Enter"&&m(),placeholder:"Label...",className:"flex-1 text-sm rounded border border-gray-300 px-2 py-1 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500"}),s.jsx("button",{type:"button",onClick:m,className:"text-xs text-blue-600 hover:text-blue-800 font-medium whitespace-nowrap",children:a})]})]})}const YC={inbound_number:$n,time_switch:$n,ivr_menu:$n,ring_group:$n,extension:$n,voicemail:$n,play_message:$n,conference:$n,transfer:$n,hangup:$n,set_caller_id:$n},KC={flow:YE},GC={type:"flow",animated:!1};let ZC=0;function QC(){return`node_${Date.now()}_${++ZC}`}function qC({initialNodes:e,initialEdges:r,onChange:o,validationIssues:a}){const l=N.useRef(null),[u,c]=N.useState(null),[f,m,h]=pE(e),[x,y,g]=gE(r),[w,j]=N.useState(null),E=N.useCallback((H,Y)=>{o?.(H,Y)},[o]),S=N.useCallback(H=>{const Y=f.find(F=>F.id===H.source);let B="";if(Y){const L=Y.data.outputHandles?.find(k=>k.id===H.sourceHandle);L&&L.id!=="next"&&(B=L.label)}const I={...H,type:"flow",data:{label:B}};y(F=>{const L=Xg(I,F);return E(f,L),L})},[f,y,E]),_=N.useCallback(H=>{h(H),queueMicrotask(()=>{m(Y=>(E(Y,x),Y))})},[h,m,x,E]),R=N.useCallback(H=>{g(H),queueMicrotask(()=>{y(Y=>(E(f,Y),Y))})},[g,y,f,E]),b=N.useCallback(({nodes:H})=>{H.length===1?j(H[0]):j(null)},[]),P=N.useCallback((H,Y)=>{m(B=>{const I=B.map(F=>{if(F.id===H){const L=F.data,k={...L,...Y};Y.config&&L.config&&(k.config={...L.config,...Y.config});const A={...F,data:k};return j(A),A}return F});return E(I,x),I})},[m,x,E]),$=N.useCallback(H=>{H.preventDefault(),H.dataTransfer.dropEffect="move"},[]),D=N.useCallback(H=>{H.preventDefault();const Y=H.dataTransfer.getData("application/reactflow-type");if(!Y||!u||!l.current)return;const B=Vd(Y);if(!B)return;const I=l.current.getBoundingClientRect(),F=u.screenToFlowPosition({x:H.clientX-I.left,y:H.clientY-I.top});let L;Y==="time_switch"?L=[{id:"default",label:"Default"}]:Y==="ivr_menu"&&(L=[{id:"timeout",label:"Timeout"},{id:"invalid",label:"Invalid"}]);const k={label:B.label,entity_type:B.entityType,outputHandles:L},A={id:QC(),type:Y,position:F,data:k};m(X=>{const Q=[...X,A];return E(Q,x),Q}),j(A)},[u,m,x,E]),M=a?f.map(H=>({...H,data:{...H.data,validationIssues:a[H.id]}})):f;return s.jsxs("div",{className:"flex flex-1 h-full",children:[s.jsx(KE,{}),s.jsx("div",{ref:l,className:"flex-1 h-full",children:s.jsxs(fE,{nodes:M,edges:x,onNodesChange:_,onEdgesChange:R,onConnect:S,onInit:c,onDrop:D,onDragOver:$,onSelectionChange:b,nodeTypes:YC,edgeTypes:KC,defaultEdgeOptions:GC,fitView:!0,deleteKeyCode:"Delete",multiSelectionKeyCode:"Shift",snapToGrid:!0,snapGrid:[16,16],children:[s.jsx(bE,{variant:kr.Dots,gap:16,size:1,color:"#e5e7eb"}),s.jsx(CE,{}),s.jsx(HE,{nodeStrokeWidth:3,zoomable:!0,pannable:!0,className:"!bg-gray-50 !border-gray-200"})]})}),w&&s.jsx(XC,{node:w,onUpdate:P,onClose:()=>j(null)})]})}function JC(e,r){return JSON.stringify({nodes:e.map(o=>{const a=o.data;return{id:o.id,type:o.type,position:o.position,data:{label:a.label,entity_id:a.entity_id??void 0,entity_type:a.entity_type??void 0,config:a.config??void 0,outputHandles:a.outputHandles??void 0}}}),edges:r.map(o=>({id:o.id,source:o.source,target:o.target,sourceHandle:o.sourceHandle,targetHandle:o.targetHandle,label:o.data?.label??void 0}))})}function u0(e){try{const r=JSON.parse(e),o=(r.nodes??[]).map(l=>{const u=l.data,c={label:u?.label??"",entity_id:u?.entity_id,entity_type:u?.entity_type,config:u?.config,outputHandles:u?.outputHandles};return{id:l.id,type:l.type,position:l.position,data:c}}),a=(r.edges??[]).map(l=>({id:l.id,source:l.source,target:l.target,sourceHandle:l.sourceHandle,targetHandle:l.targetHandle,type:"flow",data:{label:l.label??""}}));return{nodes:o,edges:a}}catch{return{nodes:[],edges:[]}}}function e4(){const[e,r]=N.useState("list"),[o,a]=N.useState([]),[l,u]=N.useState(!0),[c,f]=N.useState(null),[m,h]=N.useState(""),[x,y]=N.useState(!1),[g,w]=N.useState(!1),[j,E]=N.useState(!1),[S,_]=N.useState(""),[R,b]=N.useState(""),[P,$]=N.useState({}),[D,M]=N.useState(null),H=N.useRef([]),Y=N.useRef([]),B=N.useRef(null);function I(){u(!0),xC().then(z=>a(z)).catch(()=>a([])).finally(()=>u(!1))}N.useEffect(()=>{I()},[]);async function F(z){try{const T=await yC(z.id);f(T),h(T.name);const{nodes:U,edges:re}=u0(T.flow_data);H.current=U,Y.current=re,$({}),M(null),_(""),b(""),r("editor")}catch(T){_(T instanceof Ue?T.message:"failed to load flow")}}async function L(){_("");try{const z=await vC({name:"New Flow"});await F(z)}catch(z){_(z instanceof Ue?z.message:"failed to create flow")}}async function k(z){if(confirm(`Delete flow "${z.name}"? This cannot be undone.`))try{await bC(z.id),I()}catch(T){alert(T instanceof Ue?T.message:"failed to delete flow")}}const A=N.useCallback(async(z=!1)=>{if(c){y(!0),_("");try{const T=JC(H.current,Y.current),U=await wC(c.id,{name:m||c.name,flow_data:T});f(U),z||b("Flow saved"),z||setTimeout(()=>b(""),2e3)}catch(T){_(T instanceof Ue?T.message:"failed to save flow")}finally{y(!1)}}},[c,m]),X=N.useCallback((z,T)=>{H.current=z,Y.current=T,B.current&&clearTimeout(B.current),B.current=setTimeout(()=>A(!0),2e3)},[A]);async function Q(){if(c){await A(),w(!0),_("");try{const z=await _C(c.id);f(z),b("Flow published successfully"),setTimeout(()=>b(""),3e3)}catch(z){_(z instanceof Ue?z.message:"failed to publish flow")}finally{w(!1)}}}async function O(){if(c){await A(),E(!0),_("");try{const z=await NC(c.id);M(z);const T={};for(const U of z.issues)U.node_id&&(T[U.node_id]||(T[U.node_id]=[]),T[U.node_id].push({severity:U.severity,message:U.message}));$(T),z.valid&&(b("Flow is valid"),setTimeout(()=>b(""),2e3))}catch(z){_(z instanceof Ue?z.message:"failed to validate flow")}finally{E(!1)}}}function K(){B.current&&clearTimeout(B.current),A(!0),r("list"),f(null),I()}if(e==="editor"&&c){const{nodes:z,edges:T}=u0(c.flow_data);return s.jsxs("div",{className:"flex flex-col h-[calc(100vh-theme(spacing.14)-theme(spacing.12))]",children:[s.jsxs("div",{className:"flex items-center justify-between px-4 py-2 bg-white border-b border-gray-200 shrink-0",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("button",{type:"button",onClick:K,className:"text-sm text-gray-500 hover:text-gray-700 flex items-center gap-1",children:[s.jsx("svg",{className:"w-4 h-4",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z",clipRule:"evenodd"})}),"Back"]}),s.jsx("input",{type:"text",value:m,onChange:U=>h(U.target.value),onBlur:()=>A(!0),className:"text-lg font-semibold text-gray-900 bg-transparent border-none focus:outline-none focus:ring-0 p-0",placeholder:"Flow name..."}),c.published&&s.jsxs("span",{className:"inline-flex items-center rounded-full bg-green-50 px-2 py-0.5 text-xs font-medium text-green-700",children:["Published v",c.version]}),x&&s.jsx("span",{className:"text-xs text-gray-400",children:"Saving..."})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[S&&s.jsx("span",{className:"text-xs text-red-600",children:S}),R&&s.jsx("span",{className:"text-xs text-green-600",children:R}),s.jsx("button",{type:"button",onClick:()=>A(),disabled:x,className:"rounded-md border border-gray-300 bg-white px-3 py-1.5 text-sm font-medium text-gray-700 hover:bg-gray-50 disabled:opacity-50 transition-colors",children:"Save"}),s.jsx("button",{type:"button",onClick:O,disabled:j,className:"rounded-md border border-gray-300 bg-white px-3 py-1.5 text-sm font-medium text-gray-700 hover:bg-gray-50 disabled:opacity-50 transition-colors",children:j?"Validating...":"Validate"}),s.jsx("button",{type:"button",onClick:Q,disabled:g,className:"rounded-md bg-blue-600 px-3 py-1.5 text-sm font-medium text-white hover:bg-blue-700 disabled:opacity-50 transition-colors",children:g?"Publishing...":"Publish"})]})]}),D&&!D.valid&&s.jsxs("div",{className:"bg-red-50 border-b border-red-200 px-4 py-2 flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("svg",{className:"w-4 h-4 text-red-500",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),s.jsxs("span",{className:"text-sm text-red-700",children:[D.issues.length," issue",D.issues.length!==1?"s":""," found"]})]}),s.jsx("button",{type:"button",onClick:()=>{M(null),$({})},className:"text-xs text-red-500 hover:text-red-700",children:"Dismiss"})]}),s.jsx(qC,{initialNodes:z,initialEdges:T,onChange:X,validationIssues:Object.keys(P).length>0?P:void 0})]})}return s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Call Flows"}),s.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Visual call flow editor. Create and manage call routing logic."})]}),s.jsx("button",{type:"button",onClick:L,className:"rounded-md bg-blue-600 px-4 py-2 text-sm font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors",children:"New Flow"})]}),S&&s.jsx("div",{className:"rounded-md bg-red-50 border border-red-200 px-3 py-2 mb-4",children:s.jsx("p",{className:"text-sm text-red-700",children:S})}),l?s.jsx("p",{className:"text-sm text-gray-400",children:"Loading..."}):o.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx("svg",{className:"mx-auto w-12 h-12 text-gray-300",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M6 2a2 2 0 00-2 2v1a2 2 0 002 2h1v2H5a2 2 0 00-2 2v1a2 2 0 002 2h1v2a2 2 0 002 2h4a2 2 0 002-2v-2h1a2 2 0 002-2v-1a2 2 0 00-2-2h-2V7h1a2 2 0 002-2V4a2 2 0 00-2-2H6zm0 2h8v1H6V4zm-1 7h10v1H5v-1zm3 5h4v1H8v-1z",clipRule:"evenodd"})}),s.jsx("h3",{className:"mt-4 text-sm font-medium text-gray-900",children:"No call flows"}),s.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Get started by creating your first call flow."}),s.jsx("button",{type:"button",onClick:L,className:"mt-4 rounded-md bg-blue-600 px-4 py-2 text-sm font-medium text-white hover:bg-blue-700 transition-colors",children:"New Flow"})]}):s.jsx("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3",children:o.map(z=>s.jsxs("div",{onClick:()=>F(z),className:"bg-white rounded-lg border border-gray-200 p-4 hover:border-blue-300 hover:shadow-sm cursor-pointer transition-all",children:[s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"min-w-0 flex-1",children:[s.jsx("h3",{className:"text-sm font-semibold text-gray-900 truncate",children:z.name}),s.jsxs("p",{className:"mt-1 text-xs text-gray-500",children:["Version ",z.version,z.published_at&&`  Published ${new Date(z.published_at).toLocaleDateString()}`]})]}),s.jsx("div",{className:"flex items-center gap-2 ml-2",children:z.published?s.jsx("span",{className:"inline-flex items-center rounded-full bg-green-50 px-2 py-0.5 text-xs font-medium text-green-700",children:"Live"}):s.jsx("span",{className:"inline-flex items-center rounded-full bg-gray-100 px-2 py-0.5 text-xs font-medium text-gray-500",children:"Draft"})})]}),s.jsxs("div",{className:"mt-3 flex items-center justify-between",children:[s.jsxs("span",{className:"text-xs text-gray-400",children:["Updated ",new Date(z.updated_at).toLocaleDateString()]}),s.jsx("button",{type:"button",onClick:T=>{T.stopPropagation(),k(z)},className:"text-xs text-red-500 hover:text-red-700",children:"Delete"})]})]},z.id))})]})}function En({columns:e,rows:r,keyFn:o,total:a,limit:l,offset:u,onPageChange:c,onRowClick:f,emptyMessage:m="No records found."}){const h=Math.floor(u/l)+1,x=Math.max(1,Math.ceil(a/l)),y=u>0,g=u+l<a;return s.jsxs("div",{children:[s.jsx("div",{className:"overflow-x-auto border border-gray-200 rounded-lg",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsx("tr",{children:e.map(w=>s.jsx("th",{className:`px-4 py-2.5 text-left text-xs font-medium text-gray-500 uppercase tracking-wider ${w.className??""}`,children:w.header},w.key))})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:r.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:e.length,className:"px-4 py-8 text-center text-sm text-gray-400",children:m})}):r.map(w=>s.jsx("tr",{onClick:f?()=>f(w):void 0,className:f?"cursor-pointer hover:bg-gray-50":"",children:e.map(j=>s.jsx("td",{className:`px-4 py-2.5 text-sm text-gray-900 ${j.className??""}`,children:j.render(w)},j.key))},o(w)))})]})}),a>0&&s.jsxs("div",{className:"flex items-center justify-between mt-3",children:[s.jsxs("p",{className:"text-sm text-gray-500",children:["Showing ",u+1,"",Math.min(u+l,a)," of ",a]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{type:"button",disabled:!y,onClick:()=>c(Math.max(0,u-l)),className:"rounded-md border border-gray-300 bg-white px-3 py-1.5 text-sm font-medium text-gray-700 hover:bg-gray-50 disabled:opacity-30 disabled:cursor-not-allowed transition-colors",children:"Previous"}),s.jsxs("span",{className:"text-sm text-gray-500",children:["Page ",h," of ",x]}),s.jsx("button",{type:"button",disabled:!g,onClick:()=>c(u+l),className:"rounded-md border border-gray-300 bg-white px-3 py-1.5 text-sm font-medium text-gray-700 hover:bg-gray-50 disabled:opacity-30 disabled:cursor-not-allowed transition-colors",children:"Next"})]})]})]})}const c0=20;function t4(){const[e,r]=N.useState([]),[o,a]=N.useState(0),[l,u]=N.useState(0),[c,f]=N.useState(!0),[m,h]=N.useState(null),[x,y]=N.useState(!1),[g,w]=N.useState(""),[j,E]=N.useState(!1),[S,_]=N.useState({}),R=N.useRef(null),[b,P]=N.useState($());function $(){return{name:"",type:"register",enabled:!0,host:"",port:5060,transport:"udp",username:"",password:"",auth_username:"",register_expiry:300,remote_hosts:[],local_host:"",codecs:[],max_channels:0,caller_id_name:"",caller_id_num:"",prefix_strip:0,prefix_add:"",priority:10}}const D=N.useCallback(()=>{tC().then(k=>{const A={};for(const X of k)A[X.trunk_id]=X;_(A)}).catch(()=>{})},[]);function M(k){f(!0),Hx({limit:c0,offset:k}).then(A=>{r(A.items),a(A.total),u(k)}).catch(()=>{r([]),a(0)}).finally(()=>f(!1))}N.useEffect(()=>(M(0),D(),R.current=setInterval(D,1e4),()=>{R.current&&clearInterval(R.current)}),[D]);function H(){P($()),h(null),y(!0),w("")}function Y(k){P({name:k.name,type:k.type,enabled:k.enabled,host:k.host,port:k.port,transport:k.transport,username:k.username,password:"",auth_username:k.auth_username,register_expiry:k.register_expiry,remote_hosts:k.remote_hosts,local_host:k.local_host,codecs:k.codecs,max_channels:k.max_channels,caller_id_name:k.caller_id_name,caller_id_num:k.caller_id_num,prefix_strip:k.prefix_strip,prefix_add:k.prefix_add,priority:k.priority}),h(k),y(!0),w("")}function B(){y(!1),h(null),w("")}async function I(k){k.preventDefault(),w(""),E(!0);try{m?await JE(m.id,b):await qE(b),B(),M(m?l:0)}catch(A){w(A instanceof Ue?A.message:"unable to save trunk")}finally{E(!1)}}async function F(k){if(confirm(`Delete trunk "${k.name}"?`))try{await eC(k.id),M(l)}catch(A){alert(A instanceof Ue?A.message:"unable to delete trunk")}}const L=[{key:"name",header:"Name",render:k=>k.name},{key:"type",header:"Type",render:k=>k.type==="register"?"Registration":"IP Auth"},{key:"host",header:"Host",render:k=>k.type==="register"?`${k.host}:${k.port}`:k.remote_hosts.join(", ")||""},{key:"transport",header:"Transport",render:k=>(k.transport||"udp").toUpperCase()},{key:"enabled",header:"Status",render:k=>{if(!k.enabled)return s.jsxs("div",{className:"flex items-center gap-1.5",children:[s.jsx("span",{className:"inline-block w-2 h-2 rounded-full bg-gray-300"}),s.jsx("span",{className:"text-sm text-gray-500",children:"Disabled"})]});const A=S[k.id],X=A?.status??"unknown",Q={registered:{dot:"bg-green-500",text:"text-green-700",label:"Registered"},registering:{dot:"bg-yellow-400",text:"text-yellow-700",label:"Registering"},failed:{dot:"bg-red-500",text:"text-red-700",label:"Failed"},unregistered:{dot:"bg-gray-400",text:"text-gray-600",label:"Unregistered"},unknown:{dot:"bg-gray-400",text:"text-gray-600",label:"Unknown"}};if(k.type==="ip"&&A){const K=A.options_healthy?{dot:"bg-green-500",text:"text-green-700",label:"Healthy"}:{dot:"bg-gray-400",text:"text-gray-600",label:"IP Auth"};return s.jsxs("div",{className:"flex items-center gap-1.5",children:[s.jsx("span",{className:`inline-block w-2 h-2 rounded-full ${K.dot}`}),s.jsx("span",{className:`text-sm ${K.text}`,children:K.label})]})}const O=Q[X]??Q.unknown;return s.jsxs("div",{className:"flex items-center gap-1.5",title:A?.last_error||void 0,children:[s.jsx("span",{className:`inline-block w-2 h-2 rounded-full ${O.dot}`}),s.jsx("span",{className:`text-sm ${O.text}`,children:O.label})]})}},{key:"actions",header:"",className:"w-24",render:k=>s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{type:"button",onClick:A=>{A.stopPropagation(),Y(k)},className:"text-sm text-blue-600 hover:text-blue-800",children:"Edit"}),s.jsx("button",{type:"button",onClick:A=>{A.stopPropagation(),F(k)},className:"text-sm text-red-600 hover:text-red-800",children:"Delete"})]})}];if(x){const k=b.type==="register";return s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:m?"Edit Trunk":"New Trunk"}),s.jsx("button",{type:"button",onClick:B,className:"text-sm text-gray-500 hover:text-gray-700",children:"Cancel"})]}),s.jsxs("form",{onSubmit:I,className:"max-w-lg space-y-4",children:[g&&s.jsx("div",{className:"rounded-md bg-red-50 border border-red-200 px-3 py-2",children:s.jsx("p",{className:"text-sm text-red-700",children:g})}),s.jsx(Me,{label:"Trunk Name",id:"trunk_name",required:!0,value:b.name,onChange:A=>P({...b,name:A.currentTarget.value}),placeholder:"My SIP Provider"}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs(ar,{label:"Type",id:"trunk_type",value:b.type,onChange:A=>P({...b,type:A.currentTarget.value}),children:[s.jsx("option",{value:"register",children:"Registration"}),s.jsx("option",{value:"ip",children:"IP Auth"})]}),s.jsxs(ar,{label:"Transport",id:"trunk_transport",value:b.transport??"udp",onChange:A=>P({...b,transport:A.currentTarget.value}),children:[s.jsx("option",{value:"udp",children:"UDP"}),s.jsx("option",{value:"tcp",children:"TCP"}),s.jsx("option",{value:"tls",children:"TLS"})]})]}),k?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsx(Me,{label:"Host",id:"trunk_host",required:!0,value:b.host??"",onChange:A=>P({...b,host:A.currentTarget.value}),placeholder:"sip.provider.com"}),s.jsx(It,{label:"Port",id:"trunk_port",min:1,max:65535,value:b.port??5060,onChange:A=>P({...b,port:Number(A.currentTarget.value)})})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsx(Me,{label:"Username",id:"trunk_username",value:b.username??"",onChange:A=>P({...b,username:A.currentTarget.value}),autoComplete:"off"}),s.jsx(Me,{label:m?"Password (leave blank to keep)":"Password",id:"trunk_password",type:"password",value:b.password??"",onChange:A=>P({...b,password:A.currentTarget.value}),autoComplete:"off"})]}),s.jsx(Me,{label:"Auth Username (if different)",id:"trunk_auth_username",value:b.auth_username??"",onChange:A=>P({...b,auth_username:A.currentTarget.value}),autoComplete:"off"}),s.jsx(It,{label:"Register Expiry (s)",id:"trunk_expiry",min:60,max:3600,value:b.register_expiry??300,onChange:A=>P({...b,register_expiry:Number(A.currentTarget.value)})})]}):s.jsxs(s.Fragment,{children:[s.jsx(Me,{label:"Remote Hosts (comma-separated IPs/CIDRs)",id:"trunk_remote_hosts",value:(b.remote_hosts??[]).join(", "),onChange:A=>{const X=A.currentTarget.value,Q=X?X.split(",").map(O=>O.trim()).filter(Boolean):[];P({...b,remote_hosts:Q})},placeholder:"203.0.113.10, 198.51.100.0/24"}),s.jsx(Me,{label:"Local Bind Address (optional)",id:"trunk_local_host",value:b.local_host??"",onChange:A=>P({...b,local_host:A.currentTarget.value})})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsx(Me,{label:"Caller ID Name",id:"trunk_cid_name",value:b.caller_id_name??"",onChange:A=>P({...b,caller_id_name:A.currentTarget.value})}),s.jsx(Me,{label:"Caller ID Number",id:"trunk_cid_num",value:b.caller_id_num??"",onChange:A=>P({...b,caller_id_num:A.currentTarget.value})})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[s.jsx(It,{label:"Max Channels",id:"trunk_max_channels",min:0,value:b.max_channels??0,onChange:A=>P({...b,max_channels:Number(A.currentTarget.value)})}),s.jsx(It,{label:"Priority",id:"trunk_priority",min:1,max:100,value:b.priority??10,onChange:A=>P({...b,priority:Number(A.currentTarget.value)})}),s.jsx(It,{label:"Prefix Strip",id:"trunk_prefix_strip",min:0,max:10,value:b.prefix_strip??0,onChange:A=>P({...b,prefix_strip:Number(A.currentTarget.value)})})]}),s.jsx(Me,{label:"Prefix Add",id:"trunk_prefix_add",value:b.prefix_add??"",onChange:A=>P({...b,prefix_add:A.currentTarget.value})}),s.jsx(rr,{label:"Enabled",checked:b.enabled??!0,onChange:A=>P({...b,enabled:A})}),s.jsx("div",{className:"pt-4 border-t border-gray-100",children:s.jsx("button",{type:"submit",disabled:j,className:"rounded-md bg-blue-600 px-4 py-2 text-sm font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:j?"Saving...":m?"Update Trunk":"Create Trunk"})})]})]})}return s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Trunks"}),s.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Manage SIP trunk connections to upstream providers."})]}),s.jsx("button",{type:"button",onClick:H,className:"rounded-md bg-blue-600 px-4 py-2 text-sm font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors",children:"Add Trunk"})]}),c?s.jsx("p",{className:"text-sm text-gray-400",children:"Loading..."}):s.jsx(En,{columns:L,rows:e,keyFn:k=>k.id,total:o,limit:c0,offset:l,onPageChange:M,onRowClick:Y,emptyMessage:"No trunks configured yet."})]})}const d0=20;function n4(){const[e,r]=N.useState([]),[o,a]=N.useState(0),[l,u]=N.useState(0),[c,f]=N.useState(!0),[m,h]=N.useState(null),[x,y]=N.useState(!1),[g,w]=N.useState(""),[j,E]=N.useState(!1),[S,_]=N.useState([]),[R,b]=N.useState(P());function P(){return{number:"",name:"",trunk_id:null,flow_id:null,flow_entry_node:"",enabled:!0}}function $(L){f(!0),Vx({limit:d0,offset:L}).then(k=>{r(k.items),a(k.total),u(L)}).catch(()=>{r([]),a(0)}).finally(()=>f(!1))}N.useEffect(()=>{$(0),Hx({limit:100}).then(L=>_(L.items)).catch(()=>{})},[]);function D(){b(P()),h(null),y(!0),w("")}function M(L){b({number:L.number,name:L.name,trunk_id:L.trunk_id,flow_id:L.flow_id,flow_entry_node:L.flow_entry_node,enabled:L.enabled}),h(L),y(!0),w("")}function H(){y(!1),h(null),w("")}async function Y(L){L.preventDefault(),w(""),E(!0);try{m?await uC(m.id,R):await lC(R),H(),$(m?l:0)}catch(k){w(k instanceof Ue?k.message:"unable to save inbound number")}finally{E(!1)}}async function B(L){if(confirm(`Delete inbound number ${L.number} (${L.name})?`))try{await cC(L.id),$(l)}catch(k){alert(k instanceof Ue?k.message:"unable to delete inbound number")}}function I(L){if(L==null)return"";const k=S.find(A=>A.id===L);return k?k.name:`#${L}`}const F=[{key:"number",header:"Number",render:L=>L.number},{key:"name",header:"Name",render:L=>L.name||""},{key:"trunk_id",header:"Trunk",render:L=>I(L.trunk_id)},{key:"enabled",header:"Status",render:L=>s.jsx("span",{className:`inline-flex items-center rounded-full px-2 py-0.5 text-xs font-medium ${L.enabled?"bg-green-50 text-green-700":"bg-gray-100 text-gray-500"}`,children:L.enabled?"Enabled":"Disabled"})},{key:"actions",header:"",className:"w-24",render:L=>s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{type:"button",onClick:k=>{k.stopPropagation(),M(L)},className:"text-sm text-blue-600 hover:text-blue-800",children:"Edit"}),s.jsx("button",{type:"button",onClick:k=>{k.stopPropagation(),B(L)},className:"text-sm text-red-600 hover:text-red-800",children:"Delete"})]})}];return x?s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:m?"Edit Inbound Number":"New Inbound Number"}),s.jsx("button",{type:"button",onClick:H,className:"text-sm text-gray-500 hover:text-gray-700",children:"Cancel"})]}),s.jsxs("form",{onSubmit:Y,className:"max-w-lg space-y-4",children:[g&&s.jsx("div",{className:"rounded-md bg-red-50 border border-red-200 px-3 py-2",children:s.jsx("p",{className:"text-sm text-red-700",children:g})}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsx(Me,{label:"Number",id:"number",required:!0,value:R.number,onChange:L=>b({...R,number:L.currentTarget.value}),placeholder:"+14155551234"}),s.jsx(Me,{label:"Name",id:"name",value:R.name,onChange:L=>b({...R,name:L.currentTarget.value}),placeholder:"Main Office"})]}),s.jsxs(ar,{label:"Trunk",id:"trunk_id",value:R.trunk_id??"",onChange:L=>b({...R,trunk_id:L.currentTarget.value?Number(L.currentTarget.value):null}),children:[s.jsx("option",{value:"",children:"None"}),S.map(L=>s.jsx("option",{value:L.id,children:L.name},L.id))]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsx(It,{label:"Flow ID",id:"flow_id",min:0,value:R.flow_id??"",onChange:L=>b({...R,flow_id:L.currentTarget.value?Number(L.currentTarget.value):null})}),s.jsx(Me,{label:"Flow Entry Node",id:"flow_entry_node",value:R.flow_entry_node??"",onChange:L=>b({...R,flow_entry_node:L.currentTarget.value}),placeholder:"start"})]}),s.jsx("p",{className:"text-xs text-gray-400",children:"Optional: route this number to a specific call flow and entry node."}),s.jsx(rr,{label:"Enabled",checked:R.enabled??!0,onChange:L=>b({...R,enabled:L})}),s.jsx("div",{className:"pt-4 border-t border-gray-100",children:s.jsx("button",{type:"submit",disabled:j,className:"rounded-md bg-blue-600 px-4 py-2 text-sm font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:j?"Saving...":m?"Update Number":"Create Number"})})]})]}):s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Inbound Numbers"}),s.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Manage DID numbers and route them to call flows."})]}),s.jsx("button",{type:"button",onClick:D,className:"rounded-md bg-blue-600 px-4 py-2 text-sm font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors",children:"Add Number"})]}),c?s.jsx("p",{className:"text-sm text-gray-400",children:"Loading..."}):s.jsx(En,{columns:F,rows:e,keyFn:L=>L.id,total:o,limit:d0,offset:l,onPageChange:$,onRowClick:M,emptyMessage:"No inbound numbers configured yet."})]})}const f0=20;function r4(){const[e,r]=N.useState([]),[o,a]=N.useState(0),[l,u]=N.useState(0),[c,f]=N.useState(!0),[m,h]=N.useState(null),[x,y]=N.useState(!1),[g,w]=N.useState(""),[j,E]=N.useState(!1),[S,_]=N.useState(R());function R(){return{extension:"",name:"",email:"",sip_username:"",sip_password:"",ring_timeout:30,dnd:!1,follow_me_enabled:!1,follow_me_numbers:[],follow_me_strategy:"sequential",follow_me_confirm:!1,recording_mode:"off",max_registrations:5}}function b(){const L=[...S.follow_me_numbers??[]];L.push({number:"",delay:0,timeout:20}),_({...S,follow_me_numbers:L})}function P(L,k,A){const X=[...S.follow_me_numbers??[]];X[L]={...X[L],[k]:A},_({...S,follow_me_numbers:X})}function $(L){const k=(S.follow_me_numbers??[]).filter((A,X)=>X!==L);_({...S,follow_me_numbers:k})}function D(L){f(!0),Ud({limit:f0,offset:L}).then(k=>{r(k.items),a(k.total),u(L)}).catch(()=>{r([]),a(0)}).finally(()=>f(!1))}N.useEffect(()=>{D(0)},[]);function M(){_(R()),h(null),y(!0),w("")}function H(L){_({extension:L.extension,name:L.name,email:L.email,sip_username:L.sip_username,sip_password:"",ring_timeout:L.ring_timeout,dnd:L.dnd,follow_me_enabled:L.follow_me_enabled,follow_me_numbers:L.follow_me_numbers??[],follow_me_strategy:L.follow_me_strategy||"sequential",follow_me_confirm:L.follow_me_confirm??!1,recording_mode:L.recording_mode,max_registrations:L.max_registrations}),h(L),y(!0),w("")}function Y(){y(!1),h(null),w("")}async function B(L){L.preventDefault(),w(""),E(!0);try{m?await ZE(m.id,S):await GE(S),Y(),D(m?l:0)}catch(k){w(k instanceof Ue?k.message:"unable to save extension")}finally{E(!1)}}async function I(L){if(confirm(`Delete extension ${L.extension} (${L.name})?`))try{await QE(L.id),D(l)}catch(k){alert(k instanceof Ue?k.message:"unable to delete extension")}}const F=[{key:"extension",header:"Extension",render:L=>L.extension},{key:"name",header:"Name",render:L=>L.name},{key:"email",header:"Email",render:L=>L.email||""},{key:"sip_username",header:"SIP Username",render:L=>L.sip_username},{key:"dnd",header:"DND",render:L=>s.jsx("span",{className:`inline-flex items-center rounded-full px-2 py-0.5 text-xs font-medium ${L.dnd?"bg-red-50 text-red-700":"bg-gray-100 text-gray-500"}`,children:L.dnd?"On":"Off"})},{key:"follow_me",header:"Follow Me",render:L=>s.jsx("span",{className:`inline-flex items-center rounded-full px-2 py-0.5 text-xs font-medium ${L.follow_me_enabled?"bg-green-50 text-green-700":"bg-gray-100 text-gray-500"}`,children:L.follow_me_enabled?"On":"Off"})},{key:"actions",header:"",className:"w-24",render:L=>s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{type:"button",onClick:k=>{k.stopPropagation(),H(L)},className:"text-sm text-blue-600 hover:text-blue-800",children:"Edit"}),s.jsx("button",{type:"button",onClick:k=>{k.stopPropagation(),I(L)},className:"text-sm text-red-600 hover:text-red-800",children:"Delete"})]})}];return x?s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:m?"Edit Extension":"New Extension"}),s.jsx("button",{type:"button",onClick:Y,className:"text-sm text-gray-500 hover:text-gray-700",children:"Cancel"})]}),s.jsxs("form",{onSubmit:B,className:"max-w-lg space-y-4",children:[g&&s.jsx("div",{className:"rounded-md bg-red-50 border border-red-200 px-3 py-2",children:s.jsx("p",{className:"text-sm text-red-700",children:g})}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsx(Me,{label:"Extension Number",id:"ext_number",required:!0,value:S.extension,onChange:L=>_({...S,extension:L.currentTarget.value}),placeholder:"101"}),s.jsx(Me,{label:"Display Name",id:"ext_name",required:!0,value:S.name,onChange:L=>_({...S,name:L.currentTarget.value}),placeholder:"John Smith"})]}),s.jsx(Me,{label:"Email",id:"ext_email",type:"email",value:S.email??"",onChange:L=>_({...S,email:L.currentTarget.value}),placeholder:"john@example.com"}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsx(Me,{label:"SIP Username",id:"sip_username",required:!0,value:S.sip_username,onChange:L=>_({...S,sip_username:L.currentTarget.value})}),s.jsx(Me,{label:m?"SIP Password (leave blank to keep)":"SIP Password",id:"sip_password",type:"password",required:!m,value:S.sip_password??"",onChange:L=>_({...S,sip_password:L.currentTarget.value}),autoComplete:"off"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsx(It,{label:"Ring Timeout (s)",id:"ring_timeout",min:5,max:300,value:S.ring_timeout??30,onChange:L=>_({...S,ring_timeout:Number(L.currentTarget.value)})}),s.jsx(It,{label:"Max Registrations",id:"max_registrations",min:1,max:20,value:S.max_registrations??5,onChange:L=>_({...S,max_registrations:Number(L.currentTarget.value)})})]}),s.jsxs(ar,{label:"Recording Mode",id:"recording_mode",value:S.recording_mode??"off",onChange:L=>_({...S,recording_mode:L.currentTarget.value}),children:[s.jsx("option",{value:"off",children:"Off"}),s.jsx("option",{value:"always",children:"Always"}),s.jsx("option",{value:"on_demand",children:"On Demand"})]}),s.jsxs("div",{className:"flex gap-6",children:[s.jsx(rr,{label:"Do Not Disturb",checked:S.dnd??!1,onChange:L=>_({...S,dnd:L})}),s.jsx(rr,{label:"Follow Me",checked:S.follow_me_enabled??!1,onChange:L=>_({...S,follow_me_enabled:L})})]}),S.follow_me_enabled&&s.jsxs("div",{className:"rounded-md border border-gray-200 p-4 space-y-4",children:[s.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"Follow-Me Configuration"}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs(ar,{label:"Ring Strategy",id:"follow_me_strategy",value:S.follow_me_strategy??"sequential",onChange:L=>_({...S,follow_me_strategy:L.currentTarget.value}),children:[s.jsx("option",{value:"sequential",children:"Sequential"}),s.jsx("option",{value:"simultaneous",children:"Simultaneous"})]}),s.jsx("div",{className:"flex items-end pb-2",children:s.jsx(rr,{label:"Require confirmation (Press 1)",checked:S.follow_me_confirm??!1,onChange:L=>_({...S,follow_me_confirm:L})})})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"External Numbers"}),s.jsx("button",{type:"button",onClick:b,className:"text-sm text-blue-600 hover:text-blue-800",children:"+ Add Number"})]}),(S.follow_me_numbers??[]).length===0?s.jsx("p",{className:"text-sm text-gray-400",children:"No external numbers configured."}):s.jsx("div",{className:"space-y-2",children:(S.follow_me_numbers??[]).map((L,k)=>s.jsxs("div",{className:"flex items-end gap-2",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("label",{className:"block text-xs text-gray-500 mb-0.5",children:"Number"}),s.jsx("input",{type:"tel",className:"block w-full rounded-md border border-gray-300 px-2 py-1.5 text-sm text-gray-900 placeholder-gray-400 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500",placeholder:"0412345678",value:L.number,onChange:A=>P(k,"number",A.currentTarget.value)})]}),s.jsxs("div",{className:"w-20",children:[s.jsx("label",{className:"block text-xs text-gray-500 mb-0.5",children:"Delay (s)"}),s.jsx("input",{type:"number",min:0,max:300,className:"block w-full rounded-md border border-gray-300 px-2 py-1.5 text-sm text-gray-900 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500",value:L.delay,onChange:A=>P(k,"delay",Number(A.currentTarget.value))})]}),s.jsxs("div",{className:"w-24",children:[s.jsx("label",{className:"block text-xs text-gray-500 mb-0.5",children:"Timeout (s)"}),s.jsx("input",{type:"number",min:1,max:300,className:"block w-full rounded-md border border-gray-300 px-2 py-1.5 text-sm text-gray-900 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500",value:L.timeout,onChange:A=>P(k,"timeout",Number(A.currentTarget.value))})]}),s.jsx("button",{type:"button",onClick:()=>$(k),className:"mb-0.5 rounded p-1.5 text-gray-400 hover:text-red-600 hover:bg-red-50",title:"Remove number",children:s.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]},k))}),S.follow_me_strategy==="sequential"&&(S.follow_me_numbers??[]).length>0&&s.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"Numbers are tried in order. Delay controls when each number starts ringing after the call begins."}),S.follow_me_strategy==="simultaneous"&&(S.follow_me_numbers??[]).length>0&&s.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"All numbers ring at the same time. First to answer wins."})]})]}),s.jsx("div",{className:"pt-4 border-t border-gray-100",children:s.jsx("button",{type:"submit",disabled:j,className:"rounded-md bg-blue-600 px-4 py-2 text-sm font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:j?"Saving...":m?"Update Extension":"Create Extension"})})]})]}):s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Extensions"}),s.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Manage SIP extensions and user accounts."})]}),s.jsx("button",{type:"button",onClick:M,className:"rounded-md bg-blue-600 px-4 py-2 text-sm font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors",children:"Add Extension"})]}),c?s.jsx("p",{className:"text-sm text-gray-400",children:"Loading..."}):s.jsx(En,{columns:F,rows:e,keyFn:L=>L.id,total:o,limit:f0,offset:l,onPageChange:D,onRowClick:H,emptyMessage:"No extensions configured yet."})]})}const h0=20;function o4(e){return new Date(e).toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}function i4(e){const r=Math.floor(e/60),o=e%60;return r>0?`${r}m ${o}s`:`${o}s`}function a4({box:e,onBack:r}){const[o,a]=N.useState([]),[l,u]=N.useState(!0),[c,f]=N.useState(null),m=N.useRef(null);function h(){u(!0),iC(e.id).then(S=>a(S)).catch(()=>a([])).finally(()=>u(!1))}N.useEffect(()=>(h(),()=>y()),[e.id]);function x(S){if(c===S.id){y();return}y();const _=new Audio(i0(e.id,S.id));_.addEventListener("ended",()=>f(null)),_.addEventListener("error",()=>f(null)),_.play(),m.current=_,f(S.id)}function y(){m.current&&(m.current.pause(),m.current=null),f(null)}async function g(S){try{const _=await sC(e.id,S.id);a(R=>R.map(b=>b.id===S.id?_:b))}catch(_){alert(_ instanceof Ue?_.message:"unable to mark message as read")}}async function w(S){if(confirm("Delete this voicemail message?")){y();try{await aC(e.id,S.id),a(_=>_.filter(R=>R.id!==S.id))}catch(_){alert(_ instanceof Ue?_.message:"unable to delete message")}}}const j=[{key:"status",header:"",className:"w-8",render:S=>s.jsx("span",{className:`inline-block h-2 w-2 rounded-full ${S.read?"bg-gray-300":"bg-blue-500"}`,title:S.read?"Read":"Unread"})},{key:"caller",header:"Caller",render:S=>s.jsxs("div",{children:[s.jsx("span",{className:`${S.read?"text-gray-700":"font-medium text-gray-900"}`,children:S.caller_id_name||"Unknown"}),S.caller_id_num&&s.jsx("span",{className:"ml-2 text-gray-400 text-xs",children:S.caller_id_num})]})},{key:"timestamp",header:"Date",render:S=>o4(S.timestamp)},{key:"duration",header:"Duration",render:S=>i4(S.duration)},{key:"actions",header:"",className:"w-48",render:S=>s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{type:"button",onClick:_=>{_.stopPropagation(),x(S)},className:"text-sm text-blue-600 hover:text-blue-800",children:c===S.id?"Stop":"Play"}),s.jsx("a",{href:i0(e.id,S.id),download:!0,onClick:_=>_.stopPropagation(),className:"text-sm text-blue-600 hover:text-blue-800",children:"Download"}),!S.read&&s.jsx("button",{type:"button",onClick:_=>{_.stopPropagation(),g(S)},className:"text-sm text-gray-500 hover:text-gray-700",children:"Mark Read"}),s.jsx("button",{type:"button",onClick:_=>{_.stopPropagation(),w(S)},className:"text-sm text-red-600 hover:text-red-800",children:"Delete"})]})}],E=o.filter(S=>!S.read).length;return s.jsxs("div",{children:[s.jsx("div",{className:"flex items-center justify-between mb-6",children:s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("button",{type:"button",onClick:r,className:"text-sm text-gray-500 hover:text-gray-700",children:" Back"}),s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:e.name})]}),s.jsxs("p",{className:"mt-1 text-sm text-gray-500",children:[o.length," message",o.length!==1?"s":"",E>0&&s.jsxs("span",{className:"ml-1 text-blue-600",children:["(",E," unread)"]})]})]})}),l?s.jsx("p",{className:"text-sm text-gray-400",children:"Loading messages..."}):s.jsx(En,{columns:j,rows:o,keyFn:S=>S.id,total:o.length,limit:o.length||1,offset:0,onPageChange:()=>{},emptyMessage:"No voicemail messages in this box."})]})}function s4(){const[e,r]=N.useState([]),[o,a]=N.useState(0),[l,u]=N.useState(0),[c,f]=N.useState(!0),[m,h]=N.useState(null),[x,y]=N.useState(!1),[g,w]=N.useState(null),[j,E]=N.useState(""),[S,_]=N.useState(!1),[R,b]=N.useState(P());function P(){return{name:"",mailbox_number:"",pin:"",greeting_type:"default",email_notify:!1,email_address:"",email_attach_audio:!0,max_message_duration:120,max_messages:50,retention_days:90,notify_extension_id:null}}function $(F){f(!0),Bx({limit:h0,offset:F}).then(L=>{r(L.items),a(L.total),u(F)}).catch(()=>{r([]),a(0)}).finally(()=>f(!1))}N.useEffect(()=>{$(0)},[]);function D(){b(P()),h(null),y(!0),E("")}function M(F){b({name:F.name,mailbox_number:F.mailbox_number,pin:"",greeting_type:F.greeting_type,email_notify:F.email_notify,email_address:F.email_address,email_attach_audio:F.email_attach_audio,max_message_duration:F.max_message_duration,max_messages:F.max_messages,retention_days:F.retention_days,notify_extension_id:F.notify_extension_id}),h(F),y(!0),E("")}function H(){y(!1),h(null),E("")}async function Y(F){F.preventDefault(),E(""),_(!0);try{m?await rC(m.id,R):await nC(R),H(),$(m?l:0)}catch(L){E(L instanceof Ue?L.message:"unable to save voicemail box")}finally{_(!1)}}async function B(F){if(confirm(`Delete voicemail box "${F.name}"?`))try{await oC(F.id),$(l)}catch(L){alert(L instanceof Ue?L.message:"unable to delete voicemail box")}}const I=[{key:"name",header:"Name",render:F=>F.name},{key:"mailbox_number",header:"Mailbox #",render:F=>F.mailbox_number||""},{key:"greeting_type",header:"Greeting",render:F=>F.greeting_type},{key:"email_notify",header:"Email Notify",render:F=>s.jsx("span",{className:`inline-flex items-center rounded-full px-2 py-0.5 text-xs font-medium ${F.email_notify?"bg-green-50 text-green-700":"bg-gray-100 text-gray-500"}`,children:F.email_notify?"On":"Off"})},{key:"max_messages",header:"Max Msgs",render:F=>F.max_messages},{key:"retention",header:"Retention",render:F=>F.retention_days===0?"Forever":`${F.retention_days}d`},{key:"actions",header:"",className:"w-36",render:F=>s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{type:"button",onClick:L=>{L.stopPropagation(),w(F)},className:"text-sm text-blue-600 hover:text-blue-800",children:"Messages"}),s.jsx("button",{type:"button",onClick:L=>{L.stopPropagation(),M(F)},className:"text-sm text-blue-600 hover:text-blue-800",children:"Edit"}),s.jsx("button",{type:"button",onClick:L=>{L.stopPropagation(),B(F)},className:"text-sm text-red-600 hover:text-red-800",children:"Delete"})]})}];return g?s.jsx(a4,{box:g,onBack:()=>w(null)}):x?s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:m?"Edit Voicemail Box":"New Voicemail Box"}),s.jsx("button",{type:"button",onClick:H,className:"text-sm text-gray-500 hover:text-gray-700",children:"Cancel"})]}),s.jsxs("form",{onSubmit:Y,className:"max-w-lg space-y-4",children:[j&&s.jsx("div",{className:"rounded-md bg-red-50 border border-red-200 px-3 py-2",children:s.jsx("p",{className:"text-sm text-red-700",children:j})}),s.jsx(Me,{label:"Name",id:"vm_name",required:!0,value:R.name,onChange:F=>b({...R,name:F.currentTarget.value}),placeholder:"Sales Voicemail"}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsx(Me,{label:"Mailbox Number (optional)",id:"vm_number",value:R.mailbox_number??"",onChange:F=>b({...R,mailbox_number:F.currentTarget.value}),placeholder:"901"}),s.jsx(Me,{label:m?"PIN (leave blank to keep)":"PIN (optional)",id:"vm_pin",type:"password",value:R.pin??"",onChange:F=>b({...R,pin:F.currentTarget.value}),autoComplete:"off"})]}),s.jsxs(ar,{label:"Greeting Type",id:"vm_greeting_type",value:R.greeting_type??"default",onChange:F=>b({...R,greeting_type:F.currentTarget.value}),children:[s.jsx("option",{value:"default",children:"Default"}),s.jsx("option",{value:"custom",children:"Custom"}),s.jsx("option",{value:"name_only",children:"Name Only"})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx(rr,{label:"Email Notifications",checked:R.email_notify??!1,onChange:F=>b({...R,email_notify:F})}),R.email_notify&&s.jsxs(s.Fragment,{children:[s.jsx(Me,{label:"Notification Email",id:"vm_email",type:"email",value:R.email_address??"",onChange:F=>b({...R,email_address:F.currentTarget.value}),placeholder:"user@example.com"}),s.jsx(rr,{label:"Attach Audio to Email",checked:R.email_attach_audio??!0,onChange:F=>b({...R,email_attach_audio:F})})]})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[s.jsx(It,{label:"Max Duration (s)",id:"vm_max_duration",min:10,max:600,value:R.max_message_duration??120,onChange:F=>b({...R,max_message_duration:Number(F.currentTarget.value)})}),s.jsx(It,{label:"Max Messages",id:"vm_max_messages",min:1,max:999,value:R.max_messages??50,onChange:F=>b({...R,max_messages:Number(F.currentTarget.value)})}),s.jsx(It,{label:"Retention (days)",id:"vm_retention",min:0,value:R.retention_days??90,onChange:F=>b({...R,retention_days:Number(F.currentTarget.value)})})]}),s.jsx("p",{className:"text-xs text-gray-400",children:"Set retention to 0 for no automatic deletion."}),s.jsx("div",{className:"pt-4 border-t border-gray-100",children:s.jsx("button",{type:"submit",disabled:S,className:"rounded-md bg-blue-600 px-4 py-2 text-sm font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:S?"Saving...":m?"Update Voicemail Box":"Create Voicemail Box"})})]})]}):s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Voicemail Boxes"}),s.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Manage voicemail boxes and message settings."})]}),s.jsx("button",{type:"button",onClick:D,className:"rounded-md bg-blue-600 px-4 py-2 text-sm font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors",children:"Add Voicemail Box"})]}),c?s.jsx("p",{className:"text-sm text-gray-400",children:"Loading..."}):s.jsx(En,{columns:I,rows:e,keyFn:F=>F.id,total:o,limit:h0,offset:l,onPageChange:$,onRowClick:M,emptyMessage:"No voicemail boxes configured yet."})]})}const l4={ring_all:"Ring All",round_robin:"Round Robin",random:"Random",longest_idle:"Longest Idle"};function u4(){const[e,r]=N.useState([]),[o,a]=N.useState(!0),[l,u]=N.useState(null),[c,f]=N.useState(!1),[m,h]=N.useState(""),[x,y]=N.useState(!1),[g,w]=N.useState([]),[j,E]=N.useState(S());function S(){return{name:"",strategy:"ring_all",ring_timeout:30,members:[],caller_id_mode:"pass"}}function _(){a(!0),Yx().then(B=>r(B)).catch(()=>r([])).finally(()=>a(!1))}function R(){Ud({limit:100,offset:0}).then(B=>w(B.items)).catch(()=>w([]))}N.useEffect(()=>{_(),R()},[]);function b(){E(S()),u(null),f(!0),h("")}function P(B){E({name:B.name,strategy:B.strategy,ring_timeout:B.ring_timeout,members:B.members??[],caller_id_mode:B.caller_id_mode}),u(B),f(!0),h("")}function $(){f(!1),u(null),h("")}async function D(B){B.preventDefault(),h(""),y(!0);try{l?await jC(l.id,j):await SC(j),$(),_()}catch(I){h(I instanceof Ue?I.message:"unable to save ring group")}finally{y(!1)}}async function M(B){if(confirm(`Delete ring group "${B.name}"?`))try{await kC(B.id),_()}catch(I){alert(I instanceof Ue?I.message:"unable to delete ring group")}}function H(B){E(I=>{const F=I.members.includes(B)?I.members.filter(L=>L!==B):[...I.members,B];return{...I,members:F}})}const Y=[{key:"name",header:"Name",render:B=>B.name},{key:"strategy",header:"Strategy",render:B=>s.jsx("span",{className:"inline-flex items-center rounded-full bg-blue-50 px-2 py-0.5 text-xs font-medium text-blue-700",children:l4[B.strategy]??B.strategy})},{key:"ring_timeout",header:"Timeout",render:B=>`${B.ring_timeout}s`},{key:"members",header:"Members",render:B=>{const I=B.members?.length??0;return s.jsxs("span",{className:"text-gray-600",children:[I," extension",I!==1?"s":""]})}},{key:"actions",header:"",className:"w-24",render:B=>s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{type:"button",onClick:I=>{I.stopPropagation(),P(B)},className:"text-sm text-blue-600 hover:text-blue-800",children:"Edit"}),s.jsx("button",{type:"button",onClick:I=>{I.stopPropagation(),M(B)},className:"text-sm text-red-600 hover:text-red-800",children:"Delete"})]})}];return c?s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:l?"Edit Ring Group":"New Ring Group"}),s.jsx("button",{type:"button",onClick:$,className:"text-sm text-gray-500 hover:text-gray-700",children:"Cancel"})]}),s.jsxs("form",{onSubmit:D,className:"max-w-lg space-y-4",children:[m&&s.jsx("div",{className:"rounded-md bg-red-50 border border-red-200 px-3 py-2",children:s.jsx("p",{className:"text-sm text-red-700",children:m})}),s.jsx(Me,{label:"Group Name",id:"rg_name",required:!0,value:j.name,onChange:B=>E({...j,name:B.currentTarget.value}),placeholder:"Sales Team"}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs(ar,{label:"Ring Strategy",id:"rg_strategy",value:j.strategy??"ring_all",onChange:B=>E({...j,strategy:B.currentTarget.value}),children:[s.jsx("option",{value:"ring_all",children:"Ring All"}),s.jsx("option",{value:"round_robin",children:"Round Robin"}),s.jsx("option",{value:"random",children:"Random"}),s.jsx("option",{value:"longest_idle",children:"Longest Idle"})]}),s.jsx(It,{label:"Ring Timeout (s)",id:"rg_timeout",min:5,max:300,value:j.ring_timeout??30,onChange:B=>E({...j,ring_timeout:Number(B.currentTarget.value)})})]}),s.jsxs(ar,{label:"Caller ID Mode",id:"rg_caller_id",value:j.caller_id_mode??"pass",onChange:B=>E({...j,caller_id_mode:B.currentTarget.value}),children:[s.jsx("option",{value:"pass",children:"Pass Through"}),s.jsx("option",{value:"prepend",children:"Prepend Group Name"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Members"}),g.length===0?s.jsx("p",{className:"text-sm text-gray-400",children:"No extensions available."}):s.jsx("div",{className:"border border-gray-200 rounded-md max-h-48 overflow-y-auto",children:g.map(B=>s.jsxs("label",{className:"flex items-center gap-3 px-3 py-2 hover:bg-gray-50 cursor-pointer border-b border-gray-100 last:border-b-0",children:[s.jsx("input",{type:"checkbox",checked:j.members.includes(B.id),onChange:()=>H(B.id),className:"h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),s.jsxs("span",{className:"text-sm text-gray-900",children:[B.extension,"  ",B.name]})]},B.id))}),j.members.length>0&&s.jsxs("p",{className:"mt-1 text-xs text-gray-500",children:[j.members.length," member",j.members.length!==1?"s":""," selected"]})]}),s.jsx("div",{className:"pt-4 border-t border-gray-100",children:s.jsx("button",{type:"submit",disabled:x,className:"rounded-md bg-blue-600 px-4 py-2 text-sm font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:x?"Saving...":l?"Update Ring Group":"Create Ring Group"})})]})]}):s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Ring Groups"}),s.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Manage ring groups for simultaneous or sequential ringing."})]}),s.jsx("button",{type:"button",onClick:b,className:"rounded-md bg-blue-600 px-4 py-2 text-sm font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors",children:"Add Ring Group"})]}),o?s.jsx("p",{className:"text-sm text-gray-400",children:"Loading..."}):s.jsx(En,{columns:Y,rows:e,keyFn:B=>B.id,total:e.length,limit:e.length||1,offset:0,onPageChange:()=>{},onRowClick:P,emptyMessage:"No ring groups configured yet."})]})}const c4=[["1","2","3"],["4","5","6"],["7","8","9"],["*","0","#"]],d4=[{key:"t",label:"Timeout",description:"No input received within the timeout period"},{key:"i",label:"Invalid",description:"Caller pressed an unmapped digit (after max retries)"}];function f4({options:e,onChange:r}){const o=Object.keys(e).filter(a=>e[a]).length;return s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Digit Mappings"}),s.jsx("p",{className:"text-xs text-gray-500 mb-3",children:"Assign a destination for each digit callers can press. Leave blank to ignore that digit."}),s.jsxs("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:[s.jsx("div",{className:"bg-gray-50 px-3 py-2 border-b border-gray-200",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide",children:"Keypad Digits"}),s.jsxs("span",{className:"text-xs text-gray-400",children:[o," mapping",o!==1?"s":""," configured"]})]})}),s.jsx("div",{className:"p-3 space-y-2",children:c4.map((a,l)=>s.jsx("div",{className:"grid grid-cols-3 gap-2",children:a.map(u=>s.jsx(h4,{label:u,value:e[u]??"",onChange:c=>r(u,c)},u))},l))}),s.jsx("div",{className:"border-t border-gray-200 bg-gray-50 px-3 py-2",children:s.jsx("span",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide",children:"Special Handlers"})}),s.jsx("div",{className:"p-3 space-y-2",children:d4.map(({key:a,label:l,description:u})=>s.jsx(m4,{digitKey:a,label:l,description:u,value:e[a]??"",onChange:c=>r(a,c)},a))})]})]})}function h4({label:e,value:r,onChange:o}){const a=r.length>0;return s.jsxs("div",{className:`flex items-center gap-2 rounded-md border px-2 py-1.5 transition-colors ${a?"border-blue-200 bg-blue-50/50":"border-gray-200 bg-white"}`,children:[s.jsx("span",{className:`w-7 h-7 flex items-center justify-center rounded text-sm font-semibold shrink-0 ${a?"bg-blue-600 text-white":"bg-gray-100 text-gray-500"}`,children:e}),s.jsx("input",{type:"text",value:r,onChange:l=>o(l.currentTarget.value),placeholder:"destination",className:"flex-1 min-w-0 bg-transparent text-sm text-gray-900 placeholder-gray-400 focus:outline-none"}),a&&s.jsx("button",{type:"button",onClick:()=>o(""),className:"shrink-0 text-gray-400 hover:text-gray-600",title:"Clear",children:s.jsx("svg",{className:"w-3.5 h-3.5",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]})}function m4({digitKey:e,label:r,description:o,value:a,onChange:l}){const u=a.length>0;return s.jsxs("div",{className:`flex items-center gap-3 rounded-md border px-3 py-2 transition-colors ${u?"border-amber-200 bg-amber-50/50":"border-gray-200 bg-white"}`,children:[s.jsxs("div",{className:"shrink-0 w-24",children:[s.jsx("span",{className:`inline-flex items-center rounded-full px-2 py-0.5 text-xs font-medium ${u?e==="t"?"bg-amber-100 text-amber-700":"bg-red-100 text-red-700":"bg-gray-100 text-gray-500"}`,children:r}),s.jsx("p",{className:"text-[10px] text-gray-400 mt-0.5 leading-tight",children:o})]}),s.jsx("input",{type:"text",value:a,onChange:c=>l(c.currentTarget.value),placeholder:"destination",className:"flex-1 min-w-0 rounded-md border border-gray-300 bg-white px-2 py-1 text-sm text-gray-900 placeholder-gray-400 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500"}),u&&s.jsx("button",{type:"button",onClick:()=>l(""),className:"shrink-0 text-gray-400 hover:text-gray-600",title:"Clear",children:s.jsx("svg",{className:"w-3.5 h-3.5",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]})}function p4({value:e,onChange:r}){const[o,a]=N.useState([]),[l,u]=N.useState(!0),[c,f]=N.useState(!1),[m,h]=N.useState(""),[x,y]=N.useState(null),g=N.useRef(null),w=N.useRef(null);function j(){u(!0),Ux().then(b=>a(b)).catch(()=>a([])).finally(()=>u(!1))}N.useEffect(()=>{j()},[]);async function E(b){if(!(!b||b.length===0)){h(""),f(!0);try{const P=await Wx(b[0]);j(),r(P.filename)}catch(P){h(P instanceof Error?P.message:"upload failed")}finally{f(!1),w.current&&(w.current.value="")}}}function S(b){if(x===b.id){_();return}_();const P=new Audio(Xx(b.id));P.addEventListener("ended",()=>y(null)),P.addEventListener("error",()=>y(null)),P.play(),g.current=P,y(b.id)}function _(){g.current&&(g.current.pause(),g.current=null),y(null)}const R=o.find(b=>b.filename===e);return s.jsxs("div",{className:"space-y-2",children:[m&&s.jsx("p",{className:"text-xs text-red-600",children:m}),R&&s.jsxs("div",{className:"flex items-center gap-2 rounded-md border border-green-200 bg-green-50 px-3 py-2",children:[s.jsx("svg",{className:"h-4 w-4 text-green-600 shrink-0",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.114 5.636a9 9 0 010 12.728M16.463 8.288a5.25 5.25 0 010 7.424M6.75 8.25l4.72-4.72a.75.75 0 011.28.53v15.88a.75.75 0 01-1.28.53l-4.72-4.72H4.51c-.88 0-1.704-.507-1.938-1.354A9.01 9.01 0 012.25 12c0-.83.112-1.633.322-2.396C2.806 8.756 3.63 8.25 4.51 8.25H6.75z"})}),s.jsx("span",{className:"text-sm text-green-800 font-medium truncate flex-1",children:R.name}),s.jsx("button",{type:"button",onClick:()=>S(R),className:"text-xs text-green-700 hover:text-green-900 font-medium",children:x===R.id?"Stop":"Play"}),s.jsx("button",{type:"button",onClick:()=>{_(),r("")},className:"text-xs text-gray-500 hover:text-gray-700",children:"Clear"})]}),!R&&s.jsx(s.Fragment,{children:l?s.jsx("p",{className:"text-xs text-gray-400 py-2",children:"Loading prompts..."}):o.length===0?s.jsx("p",{className:"text-xs text-gray-500 py-2",children:"No audio prompts in library. Upload one below."}):s.jsx("div",{className:"max-h-40 overflow-y-auto rounded-md border border-gray-200",children:o.map(b=>s.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 hover:bg-gray-50 cursor-pointer border-b border-gray-100 last:border-b-0",onClick:()=>r(b.filename),children:[s.jsx("span",{className:"text-sm text-gray-800 flex-1 truncate",children:b.name}),s.jsx("span",{className:"text-xs text-gray-400",children:b.format.toUpperCase()}),s.jsx("button",{type:"button",onClick:P=>{P.stopPropagation(),S(b)},className:"text-xs text-blue-600 hover:text-blue-800",children:x===b.id?"Stop":"Play"})]},b.id))})}),s.jsxs("div",{children:[s.jsx("input",{ref:w,type:"file",accept:".wav,.alaw,.al,.ulaw,.ul",className:"hidden",onChange:b=>E(b.target.files)}),s.jsx("button",{type:"button",disabled:c,onClick:()=>w.current?.click(),className:"text-xs text-blue-600 hover:text-blue-800 font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:c?"Uploading...":"Upload new prompt"})]})]})}function g4(){const[e,r]=N.useState([]),[o,a]=N.useState(!0),[l,u]=N.useState(null),[c,f]=N.useState(!1),[m,h]=N.useState(""),[x,y]=N.useState(!1),[g,w]=N.useState(S()),[j,E]=N.useState("none");function S(){return{name:"",greeting_file:"",greeting_tts:"",timeout:10,max_retries:3,digit_timeout:3,options:{}}}function _(){a(!0),EC().then(B=>r(B)).catch(()=>r([])).finally(()=>a(!1))}N.useEffect(()=>{_()},[]);function R(){w(S()),E("none"),u(null),f(!0),h("")}function b(B){w({name:B.name,greeting_file:B.greeting_file??"",greeting_tts:B.greeting_tts??"",timeout:B.timeout,max_retries:B.max_retries,digit_timeout:B.digit_timeout,options:B.options??{}}),E(B.greeting_file?"audio":B.greeting_tts?"tts":"none"),u(B),f(!0),h("")}function P(){f(!1),u(null),h("")}async function $(B){B.preventDefault(),h(""),y(!0);try{l?await PC(l.id,g):await CC(g),P(),_()}catch(I){h(I instanceof Ue?I.message:"unable to save ivr menu")}finally{y(!1)}}async function D(B){if(confirm(`Delete IVR menu "${B.name}"?`))try{await RC(B.id),_()}catch(I){alert(I instanceof Ue?I.message:"unable to delete ivr menu")}}function M(B,I){w(F=>{const L={...F.options};return I===""?delete L[B]:L[B]=I,{...F,options:L}})}function H(B){return B?Object.keys(B).length:0}const Y=[{key:"name",header:"Name",render:B=>B.name},{key:"timeout",header:"Timeout",render:B=>`${B.timeout}s`},{key:"max_retries",header:"Max Retries",render:B=>String(B.max_retries)},{key:"options",header:"Options",render:B=>{const I=H(B.options);return s.jsxs("span",{className:"text-gray-600",children:[I," mapping",I!==1?"s":""]})}},{key:"greeting",header:"Greeting",render:B=>B.greeting_file?s.jsx("span",{className:"inline-flex items-center rounded-full bg-green-50 px-2 py-0.5 text-xs font-medium text-green-700",children:"Audio"}):B.greeting_tts?s.jsx("span",{className:"inline-flex items-center rounded-full bg-blue-50 px-2 py-0.5 text-xs font-medium text-blue-700",children:"TTS"}):s.jsx("span",{className:"text-gray-400",children:"None"})},{key:"actions",header:"",className:"w-24",render:B=>s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{type:"button",onClick:I=>{I.stopPropagation(),b(B)},className:"text-sm text-blue-600 hover:text-blue-800",children:"Edit"}),s.jsx("button",{type:"button",onClick:I=>{I.stopPropagation(),D(B)},className:"text-sm text-red-600 hover:text-red-800",children:"Delete"})]})}];return c?s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:l?"Edit IVR Menu":"New IVR Menu"}),s.jsx("button",{type:"button",onClick:P,className:"text-sm text-gray-500 hover:text-gray-700",children:"Cancel"})]}),s.jsxs("form",{onSubmit:$,className:"max-w-lg space-y-4",children:[m&&s.jsx("div",{className:"rounded-md bg-red-50 border border-red-200 px-3 py-2",children:s.jsx("p",{className:"text-sm text-red-700",children:m})}),s.jsx(Me,{label:"Menu Name",id:"ivr_name",required:!0,value:g.name,onChange:B=>w({...g,name:B.currentTarget.value}),placeholder:"Main Menu"}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Greeting"}),s.jsx("div",{className:"flex gap-1 mb-2",children:["none","tts","audio"].map(B=>s.jsx("button",{type:"button",onClick:()=>{E(B),B!=="audio"&&w(I=>({...I,greeting_file:""})),B!=="tts"&&w(I=>({...I,greeting_tts:""}))},className:`px-3 py-1 text-xs font-medium rounded-md border transition-colors ${j===B?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"}`,children:B==="none"?"None":B==="tts"?"TTS Text":"Audio File"},B))}),j==="tts"&&s.jsx(Me,{label:"",id:"ivr_greeting_tts",value:g.greeting_tts??"",onChange:B=>w({...g,greeting_tts:B.currentTarget.value}),placeholder:"Press 1 for Sales, Press 2 for Support..."}),j==="audio"&&s.jsx(p4,{value:g.greeting_file??"",onChange:B=>w({...g,greeting_file:B})})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[s.jsx(It,{label:"Timeout (s)",id:"ivr_timeout",min:1,max:60,value:g.timeout??10,onChange:B=>w({...g,timeout:Number(B.currentTarget.value)})}),s.jsx(It,{label:"Max Retries",id:"ivr_max_retries",min:0,max:10,value:g.max_retries??3,onChange:B=>w({...g,max_retries:Number(B.currentTarget.value)})}),s.jsx(It,{label:"Digit Timeout (s)",id:"ivr_digit_timeout",min:1,max:30,value:g.digit_timeout??3,onChange:B=>w({...g,digit_timeout:Number(B.currentTarget.value)})})]}),s.jsx(f4,{options:g.options,onChange:M}),s.jsx("div",{className:"pt-4 border-t border-gray-100",children:s.jsx("button",{type:"submit",disabled:x,className:"rounded-md bg-blue-600 px-4 py-2 text-sm font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:x?"Saving...":l?"Update IVR Menu":"Create IVR Menu"})})]})]}):s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"IVR Menus"}),s.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Manage interactive voice response menus for caller self-service."})]}),s.jsx("button",{type:"button",onClick:R,className:"rounded-md bg-blue-600 px-4 py-2 text-sm font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors",children:"Add IVR Menu"})]}),o?s.jsx("p",{className:"text-sm text-gray-400",children:"Loading..."}):s.jsx(En,{columns:Y,rows:e,keyFn:B=>B.id,total:e.length,limit:e.length||1,offset:0,onPageChange:()=>{},onRowClick:b,emptyMessage:"No IVR menus configured yet."})]})}const x4=["mon","tue","wed","thu","fri","sat","sun"],y4={mon:"Mon",tue:"Tue",wed:"Wed",thu:"Thu",fri:"Fri",sat:"Sat",sun:"Sun"},v4=[{label:"Weekdays",days:["mon","tue","wed","thu","fri"]},{label:"Weekend",days:["sat","sun"]},{label:"All",days:["mon","tue","wed","thu","fri","sat","sun"]}];function w4(){return{label:"",days:["mon","tue","wed","thu","fri"],start:"08:30",end:"17:00",dest_node:""}}function m0(e){const r=e.split(":");if(r.length!==2)return 0;const o=parseInt(r[0],10),a=parseInt(r[1],10);return isNaN(o)||isNaN(a)?0:(o*60+a)/1440}function b4({rules:e,onChange:r}){function o(m,h){r(e.map((x,y)=>y===m?{...x,...h}:x))}function a(m,h){r(e.map((x,y)=>{if(y!==m)return x;const g=x.days.includes(h)?x.days.filter(w=>w!==h):[...x.days,h];return{...x,days:g}}))}function l(m,h){r(e.map((x,y)=>y===m?{...x,days:[...h]}:x))}function u(){r([...e,w4()])}function c(m){r(e.filter((h,x)=>x!==m))}function f(m,h){const x=m+h;if(x<0||x>=e.length)return;const y=[...e];[y[m],y[x]]=[y[x],y[m]],r(y)}return s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Rules"}),s.jsx("p",{className:"text-xs text-gray-500 mb-3",children:"Evaluated top to bottom  first matching rule wins. Drag to reorder or use the arrows."}),s.jsxs("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:[s.jsx("div",{className:"bg-gray-50 px-3 py-2 border-b border-gray-200",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide",children:"Time Rules"}),s.jsxs("span",{className:"text-xs text-gray-400",children:[e.length," rule",e.length!==1?"s":""]})]})}),s.jsx("div",{className:"divide-y divide-gray-100",children:e.map((m,h)=>s.jsxs("div",{className:"p-4 space-y-3 bg-white hover:bg-gray-50/50 transition-colors",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("div",{className:"flex flex-col shrink-0",children:[s.jsx("button",{type:"button",onClick:()=>f(h,-1),disabled:h===0,className:"text-gray-400 hover:text-gray-600 disabled:opacity-25 disabled:cursor-not-allowed p-0.5",title:"Move up",children:s.jsx("svg",{className:"w-3.5 h-3.5",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M14.707 12.707a1 1 0 01-1.414 0L10 9.414l-3.293 3.293a1 1 0 01-1.414-1.414l4-4a1 1 0 011.414 0l4 4a1 1 0 010 1.414z",clipRule:"evenodd"})})}),s.jsx("button",{type:"button",onClick:()=>f(h,1),disabled:h===e.length-1,className:"text-gray-400 hover:text-gray-600 disabled:opacity-25 disabled:cursor-not-allowed p-0.5",title:"Move down",children:s.jsx("svg",{className:"w-3.5 h-3.5",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),s.jsx("span",{className:"flex-shrink-0 inline-flex items-center justify-center w-5 h-5 rounded bg-blue-100 text-xs font-semibold text-blue-700",children:h+1}),s.jsx("input",{type:"text",value:m.label,onChange:x=>o(h,{label:x.currentTarget.value}),placeholder:"Rule label (e.g. Business Hours)",className:"flex-1 min-w-0 rounded-md border border-gray-300 px-3 py-1.5 text-sm text-gray-900 placeholder-gray-400 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500"}),e.length>1&&s.jsx("button",{type:"button",onClick:()=>c(h),className:"shrink-0 text-gray-400 hover:text-red-500 transition-colors p-1",title:"Remove rule",children:s.jsx("svg",{className:"w-4 h-4",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z",clipRule:"evenodd"})})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("span",{className:"text-xs text-gray-500 shrink-0",children:"Days"}),s.jsx("div",{className:"flex gap-1",children:v4.map(x=>{const y=x.days.length===m.days.length&&x.days.every(g=>m.days.includes(g));return s.jsx("button",{type:"button",onClick:()=>l(h,x.days),className:`px-2 py-0.5 rounded text-[10px] font-medium transition-colors ${y?"bg-blue-100 text-blue-700":"bg-gray-50 text-gray-400 hover:bg-gray-100 hover:text-gray-600"}`,children:x.label},x.label)})})]}),s.jsx("div",{className:"flex gap-1.5",children:x4.map(x=>{const y=m.days.includes(x),g=x==="sat"||x==="sun";return s.jsx("button",{type:"button",onClick:()=>a(h,x),className:`w-10 py-1.5 rounded text-xs font-medium transition-colors ${y?g?"bg-indigo-600 text-white":"bg-blue-600 text-white":g?"bg-gray-50 text-gray-400 hover:bg-gray-100 border border-dashed border-gray-300":"bg-gray-100 text-gray-500 hover:bg-gray-200"}`,children:y4[x]},x)})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-end gap-3",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("label",{className:"block text-xs text-gray-500 mb-0.5",children:"Start Time"}),s.jsx("input",{type:"time",value:m.start,onChange:x=>o(h,{start:x.currentTarget.value}),className:"block w-full rounded-md border border-gray-300 px-3 py-1.5 text-sm text-gray-900 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500"})]}),s.jsx("span",{className:"pb-2 text-gray-400 text-sm",children:"to"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("label",{className:"block text-xs text-gray-500 mb-0.5",children:"End Time"}),s.jsx("input",{type:"time",value:m.end,onChange:x=>o(h,{end:x.currentTarget.value}),className:"block w-full rounded-md border border-gray-300 px-3 py-1.5 text-sm text-gray-900 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500"})]})]}),s.jsx(_4,{start:m.start,end:m.end})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-gray-500 mb-0.5",children:"Destination"}),s.jsx("input",{type:"text",value:m.dest_node,onChange:x=>o(h,{dest_node:x.currentTarget.value}),placeholder:"Node ID  the flow node to route to when this rule matches",className:"block w-full rounded-md border border-gray-300 px-3 py-1.5 text-sm text-gray-900 placeholder-gray-400 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500"})]})]},h))}),s.jsx("div",{className:"border-t border-gray-200 bg-gray-50 px-3 py-2",children:s.jsxs("button",{type:"button",onClick:u,className:"inline-flex items-center gap-1.5 text-sm text-blue-600 hover:text-blue-800 transition-colors",children:[s.jsx("svg",{className:"w-4 h-4",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z",clipRule:"evenodd"})}),"Add Rule"]})})]})]})}function _4({start:e,end:r}){const o=m0(e),a=m0(r),l=a<=o,u=[0,6,12,18,24];return s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"relative h-5 bg-gray-100 rounded-full overflow-hidden",children:l?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"absolute inset-y-0 bg-blue-200 rounded-l-full",style:{left:0,width:`${a*100}%`}}),s.jsx("div",{className:"absolute inset-y-0 bg-blue-200 rounded-r-full",style:{left:`${o*100}%`,right:0}})]}):s.jsx("div",{className:"absolute inset-y-0 bg-blue-200 rounded-full",style:{left:`${o*100}%`,width:`${(a-o)*100}%`}})}),s.jsx("div",{className:"relative h-3 mt-0.5",children:u.map(c=>s.jsx("span",{className:"absolute text-[9px] text-gray-400 -translate-x-1/2",style:{left:`${c/24*100}%`},children:c.toString().padStart(2,"0")},c))})]})}function N4(){return{label:"",date:"",start:"",end:"",dest_node:""}}function S4({overrides:e,onChange:r}){function o(c,f){r(e.map((m,h)=>h===c?{...m,...f}:m))}function a(){r([...e,N4()])}function l(c){r(e.filter((f,m)=>m!==c))}function u(c,f){const m=c+f;if(m<0||m>=e.length)return;const h=[...e];[h[c],h[m]]=[h[m],h[c]],r(h)}return s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Holiday / Date Overrides"}),s.jsx("p",{className:"text-xs text-gray-500 mb-3",children:"Specific-date overrides take priority over regular time rules. Leave start/end empty for all-day overrides."}),s.jsxs("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:[s.jsx("div",{className:"bg-gray-50 px-3 py-2 border-b border-gray-200",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide",children:"Date Overrides"}),s.jsxs("span",{className:"text-xs text-gray-400",children:[e.length," override",e.length!==1?"s":""]})]})}),e.length===0?s.jsx("div",{className:"px-4 py-6 text-center text-sm text-gray-400",children:"No overrides configured. Add holidays or specific dates that should bypass regular rules."}):s.jsx("div",{className:"divide-y divide-gray-100",children:e.map((c,f)=>s.jsxs("div",{className:"p-4 space-y-3 bg-white hover:bg-gray-50/50 transition-colors",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("div",{className:"flex flex-col shrink-0",children:[s.jsx("button",{type:"button",onClick:()=>u(f,-1),disabled:f===0,className:"text-gray-400 hover:text-gray-600 disabled:opacity-25 disabled:cursor-not-allowed p-0.5",title:"Move up",children:s.jsx("svg",{className:"w-3.5 h-3.5",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M14.707 12.707a1 1 0 01-1.414 0L10 9.414l-3.293 3.293a1 1 0 01-1.414-1.414l4-4a1 1 0 011.414 0l4 4a1 1 0 010 1.414z",clipRule:"evenodd"})})}),s.jsx("button",{type:"button",onClick:()=>u(f,1),disabled:f===e.length-1,className:"text-gray-400 hover:text-gray-600 disabled:opacity-25 disabled:cursor-not-allowed p-0.5",title:"Move down",children:s.jsx("svg",{className:"w-3.5 h-3.5",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),s.jsx("span",{className:"flex-shrink-0 inline-flex items-center justify-center w-5 h-5 rounded bg-amber-100 text-xs font-semibold text-amber-700",children:f+1}),s.jsx("input",{type:"text",value:c.label,onChange:m=>o(f,{label:m.currentTarget.value}),placeholder:"Override label (e.g. Christmas Day)",className:"flex-1 min-w-0 rounded-md border border-gray-300 px-3 py-1.5 text-sm text-gray-900 placeholder-gray-400 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500"}),s.jsx("button",{type:"button",onClick:()=>l(f),className:"shrink-0 text-gray-400 hover:text-red-500 transition-colors p-1",title:"Remove override",children:s.jsx("svg",{className:"w-4 h-4",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z",clipRule:"evenodd"})})})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-gray-500 mb-0.5",children:"Date"}),s.jsx("input",{type:"date",value:c.date,onChange:m=>o(f,{date:m.currentTarget.value}),className:"block w-full rounded-md border border-gray-300 px-3 py-1.5 text-sm text-gray-900 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-xs text-gray-500 mb-0.5",children:["Start Time ",s.jsx("span",{className:"text-gray-400",children:"(optional)"})]}),s.jsx("input",{type:"time",value:c.start??"",onChange:m=>o(f,{start:m.currentTarget.value}),className:"block w-full rounded-md border border-gray-300 px-3 py-1.5 text-sm text-gray-900 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-xs text-gray-500 mb-0.5",children:["End Time ",s.jsx("span",{className:"text-gray-400",children:"(optional)"})]}),s.jsx("input",{type:"time",value:c.end??"",onChange:m=>o(f,{end:m.currentTarget.value}),className:"block w-full rounded-md border border-gray-300 px-3 py-1.5 text-sm text-gray-900 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500"})]})]}),!c.start&&!c.end&&c.date&&s.jsxs("div",{className:"flex items-center gap-1.5 text-xs text-amber-600",children:[s.jsx("svg",{className:"w-3.5 h-3.5",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z",clipRule:"evenodd"})}),"All-day override  applies for the entire date"]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-gray-500 mb-0.5",children:"Destination"}),s.jsx("input",{type:"text",value:c.dest_node,onChange:m=>o(f,{dest_node:m.currentTarget.value}),placeholder:"Node ID  the flow node to route to on this date",className:"block w-full rounded-md border border-gray-300 px-3 py-1.5 text-sm text-gray-900 placeholder-gray-400 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500"})]})]},f))}),s.jsx("div",{className:"border-t border-gray-200 bg-gray-50 px-3 py-2",children:s.jsxs("button",{type:"button",onClick:a,className:"inline-flex items-center gap-1.5 text-sm text-amber-600 hover:text-amber-800 transition-colors",children:[s.jsx("svg",{className:"w-4 h-4",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z",clipRule:"evenodd"})}),"Add Override"]})})]})]})}const j4=["mon","tue","wed","thu","fri","sat","sun"],k4={mon:"Mon",tue:"Tue",wed:"Wed",thu:"Thu",fri:"Fri",sat:"Sat",sun:"Sun"},p0=[0,3,6,9,12,15,18,21,24],ul=[{bg:"bg-blue-400",text:"text-blue-700",dot:"bg-blue-400",label:"bg-blue-50"},{bg:"bg-emerald-400",text:"text-emerald-700",dot:"bg-emerald-400",label:"bg-emerald-50"},{bg:"bg-amber-400",text:"text-amber-700",dot:"bg-amber-400",label:"bg-amber-50"},{bg:"bg-violet-400",text:"text-violet-700",dot:"bg-violet-400",label:"bg-violet-50"},{bg:"bg-rose-400",text:"text-rose-700",dot:"bg-rose-400",label:"bg-rose-50"},{bg:"bg-cyan-400",text:"text-cyan-700",dot:"bg-cyan-400",label:"bg-cyan-50"},{bg:"bg-orange-400",text:"text-orange-700",dot:"bg-orange-400",label:"bg-orange-50"},{bg:"bg-teal-400",text:"text-teal-700",dot:"bg-teal-400",label:"bg-teal-50"}];function g0(e){const r=e.split(":");if(r.length!==2)return 0;const o=parseInt(r[0],10),a=parseInt(r[1],10);return isNaN(o)||isNaN(a)?0:(o*60+a)/1440}function E4({rules:e}){return e.length===0?null:s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Weekly Preview"}),s.jsxs("div",{className:"border border-gray-200 rounded-lg overflow-hidden bg-white",children:[s.jsxs("div",{className:"flex border-b border-gray-200",children:[s.jsx("div",{className:"w-12 shrink-0"}),s.jsx("div",{className:"flex-1 relative h-5",children:p0.map(r=>s.jsx("span",{className:"absolute top-0.5 text-[9px] text-gray-400 -translate-x-1/2",style:{left:`${r/24*100}%`},children:r.toString().padStart(2,"0")},r))})]}),j4.map(r=>{const o=r==="sat"||r==="sun";return s.jsxs("div",{className:`flex items-center border-b border-gray-100 last:border-b-0 ${o?"bg-gray-50/50":""}`,children:[s.jsx("div",{className:`w-12 shrink-0 px-2 py-2 text-xs font-medium ${o?"text-indigo-600":"text-gray-600"}`,children:k4[r]}),s.jsxs("div",{className:"flex-1 relative h-7",children:[p0.slice(1,-1).map(a=>s.jsx("div",{className:"absolute top-0 bottom-0 border-l border-gray-100",style:{left:`${a/24*100}%`}},a)),e.map((a,l)=>{if(!a.days.includes(r))return null;const u=ul[l%ul.length],c=g0(a.start),f=g0(a.end);return f<=c?s.jsxs("span",{children:[s.jsx("div",{className:`absolute top-1 bottom-1 ${u.bg} rounded-sm opacity-70`,style:{left:0,width:`${f*100}%`},title:`${a.label||`Rule ${l+1}`}: ${a.start}${a.end}`}),s.jsx("div",{className:`absolute top-1 bottom-1 ${u.bg} rounded-sm opacity-70`,style:{left:`${c*100}%`,right:0},title:`${a.label||`Rule ${l+1}`}: ${a.start}${a.end}`})]},l):s.jsx("div",{className:`absolute top-1 bottom-1 ${u.bg} rounded-sm opacity-70`,style:{left:`${c*100}%`,width:`${(f-c)*100}%`},title:`${a.label||`Rule ${l+1}`}: ${a.start}${a.end}`},l)})]})]},r)}),e.length>0&&s.jsx("div",{className:"border-t border-gray-200 bg-gray-50 px-3 py-2 flex flex-wrap gap-3",children:e.map((r,o)=>{const a=ul[o%ul.length];return s.jsxs("span",{className:`inline-flex items-center gap-1.5 ${a.label} rounded-full px-2 py-0.5`,children:[s.jsx("span",{className:`w-2 h-2 rounded-full ${a.dot}`}),s.jsx("span",{className:`text-[10px] font-medium ${a.text}`,children:r.label||`Rule ${o+1}`}),s.jsxs("span",{className:"text-[10px] text-gray-400",children:[r.start,"",r.end]})]},o)})})]})]})}const C4="block text-sm font-medium text-gray-700 mb-1",P4="block w-full rounded-md border border-gray-300 px-3 py-2 text-sm text-gray-900 placeholder-gray-400 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500",R4=[{group:"Australia",zones:["Australia/Sydney","Australia/Melbourne","Australia/Brisbane","Australia/Perth","Australia/Adelaide","Australia/Hobart","Australia/Darwin","Australia/Lord_Howe"]},{group:"Pacific",zones:["Pacific/Auckland","Pacific/Fiji","Pacific/Guam","Pacific/Honolulu","Pacific/Noumea","Pacific/Tongatapu"]},{group:"Asia",zones:["Asia/Tokyo","Asia/Shanghai","Asia/Hong_Kong","Asia/Singapore","Asia/Kolkata","Asia/Dubai","Asia/Seoul","Asia/Bangkok","Asia/Jakarta","Asia/Karachi","Asia/Manila","Asia/Taipei","Asia/Kuala_Lumpur","Asia/Riyadh","Asia/Tehran","Asia/Dhaka"]},{group:"Europe",zones:["Europe/London","Europe/Berlin","Europe/Paris","Europe/Amsterdam","Europe/Rome","Europe/Madrid","Europe/Zurich","Europe/Stockholm","Europe/Vienna","Europe/Warsaw","Europe/Brussels","Europe/Helsinki","Europe/Lisbon","Europe/Athens","Europe/Bucharest","Europe/Moscow","Europe/Istanbul"]},{group:"Americas",zones:["America/New_York","America/Chicago","America/Denver","America/Los_Angeles","America/Anchorage","America/Phoenix","America/Toronto","America/Vancouver","America/Mexico_City","America/Bogota","America/Lima","America/Santiago","America/Sao_Paulo","America/Argentina/Buenos_Aires"]},{group:"Africa",zones:["Africa/Cairo","Africa/Johannesburg","Africa/Lagos","Africa/Nairobi","Africa/Casablanca"]},{group:"Other",zones:["UTC"]}];function M4(e){const r=e.split("/"),o=r[r.length-1].replace(/_/g," ");return e==="UTC"?"UTC":o}function T4({label:e="Timezone",id:r,...o}){return s.jsxs("div",{children:[s.jsx("label",{htmlFor:r,className:C4,children:e}),s.jsx("select",{id:r,className:P4,...o,children:R4.map(a=>s.jsx("optgroup",{label:a.group,children:a.zones.map(l=>s.jsx("option",{value:l,children:M4(l)},l))},a.group))})]})}function D4(){const[e,r]=N.useState([]),[o,a]=N.useState(!0),[l,u]=N.useState(null),[c,f]=N.useState(!1),[m,h]=N.useState(""),[x,y]=N.useState(!1),[g,w]=N.useState(j());function j(){return{name:"",timezone:"Australia/Sydney",rules:[{label:"",days:["mon","tue","wed","thu","fri"],start:"08:30",end:"17:00",dest_node:""}],overrides:[],default_dest:""}}function E(){a(!0),MC().then(D=>r(D)).catch(()=>r([])).finally(()=>a(!1))}N.useEffect(()=>{E()},[]);function S(){w(j()),u(null),f(!0),h("")}function _(D){w({name:D.name,timezone:D.timezone,rules:D.rules??[],overrides:D.overrides??[],default_dest:D.default_dest??""}),u(D),f(!0),h("")}function R(){f(!1),u(null),h("")}async function b(D){D.preventDefault(),h(""),y(!0);try{l?await DC(l.id,g):await TC(g),R(),E()}catch(M){h(M instanceof Ue?M.message:"unable to save time switch")}finally{y(!1)}}async function P(D){if(confirm(`Delete time switch "${D.name}"?`))try{await LC(D.id),E()}catch(M){alert(M instanceof Ue?M.message:"unable to delete time switch")}}const $=[{key:"name",header:"Name",render:D=>D.name},{key:"timezone",header:"Timezone",render:D=>s.jsx("span",{className:"inline-flex items-center rounded-full bg-blue-50 px-2 py-0.5 text-xs font-medium text-blue-700",children:D.timezone})},{key:"rules",header:"Rules",render:D=>{const M=D.rules?.length??0,H=D.overrides?.length??0;return s.jsxs("span",{className:"text-gray-600",children:[M," rule",M!==1?"s":"",H>0&&s.jsxs("span",{className:"ml-1.5 text-amber-600",children:["+ ",H," override",H!==1?"s":""]})]})}},{key:"actions",header:"",className:"w-24",render:D=>s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{type:"button",onClick:M=>{M.stopPropagation(),_(D)},className:"text-sm text-blue-600 hover:text-blue-800",children:"Edit"}),s.jsx("button",{type:"button",onClick:M=>{M.stopPropagation(),P(D)},className:"text-sm text-red-600 hover:text-red-800",children:"Delete"})]})}];return c?s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:l?"Edit Time Switch":"New Time Switch"}),s.jsx("button",{type:"button",onClick:R,className:"text-sm text-gray-500 hover:text-gray-700",children:"Cancel"})]}),s.jsxs("form",{onSubmit:b,className:"max-w-2xl space-y-4",children:[m&&s.jsx("div",{className:"rounded-md bg-red-50 border border-red-200 px-3 py-2",children:s.jsx("p",{className:"text-sm text-red-700",children:m})}),s.jsx(Me,{label:"Name",id:"ts_name",required:!0,value:g.name,onChange:D=>w({...g,name:D.currentTarget.value}),placeholder:"Business Hours"}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsx(T4,{id:"ts_timezone",value:g.timezone??"Australia/Sydney",onChange:D=>w({...g,timezone:D.currentTarget.value})}),s.jsx(Me,{label:"Default Destination",id:"ts_default_dest",value:g.default_dest??"",onChange:D=>w({...g,default_dest:D.currentTarget.value}),placeholder:"Node ID for after-hours"})]}),s.jsx(b4,{rules:g.rules,onChange:D=>w({...g,rules:D})}),s.jsx(S4,{overrides:g.overrides??[],onChange:D=>w({...g,overrides:D})}),s.jsx(E4,{rules:g.rules}),s.jsx("div",{className:"pt-4 border-t border-gray-100",children:s.jsx("button",{type:"submit",disabled:x,className:"rounded-md bg-blue-600 px-4 py-2 text-sm font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:x?"Saving...":l?"Update Time Switch":"Create Time Switch"})})]})]}):s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Time Switches"}),s.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Time-based routing rules for business hours, holidays, and schedules."})]}),s.jsx("button",{type:"button",onClick:S,className:"rounded-md bg-blue-600 px-4 py-2 text-sm font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors",children:"Add Time Switch"})]}),o?s.jsx("p",{className:"text-sm text-gray-400",children:"Loading..."}):s.jsx(En,{columns:$,rows:e,keyFn:D=>D.id,total:e.length,limit:e.length||1,offset:0,onPageChange:()=>{},onRowClick:_,emptyMessage:"No time switches configured yet."})]})}const L4=5e3;function I4(){const[e,r]=N.useState([]),[o,a]=N.useState(!0),[l,u]=N.useState(null),[c,f]=N.useState(!1),[m,h]=N.useState(""),[x,y]=N.useState(!1),[g,w]=N.useState(null),[j,E]=N.useState([]),[S,_]=N.useState(!1),[R,b]=N.useState(""),P=N.useRef(null),[$,D]=N.useState(M());function M(){return{name:"",extension:"",pin:"",max_members:10,record:!1,mute_on_join:!1,announce_joins:!1}}function H(){a(!0),IC().then(z=>r(z)).catch(()=>r([])).finally(()=>a(!1))}N.useEffect(()=>{H()},[]),N.useEffect(()=>{if(!g)return;function z(){g&&a0(g.id).then(T=>{E(T),b("")}).catch(T=>{b(T instanceof Ue?T.message:"failed to load participants")})}return _(!0),a0(g.id).then(T=>{E(T),b("")}).catch(T=>{b(T instanceof Ue?T.message:"failed to load participants")}).finally(()=>_(!1)),P.current=setInterval(z,L4),()=>{P.current&&clearInterval(P.current)}},[g]);function Y(){D(M()),u(null),f(!0),h("")}function B(z){D({name:z.name,extension:z.extension,pin:"",max_members:z.max_members,record:z.record,mute_on_join:z.mute_on_join,announce_joins:z.announce_joins}),u(z),f(!0),h("")}function I(){f(!1),u(null),h("")}function F(z){w(z),E([]),b("")}function L(){w(null),E([]),b("")}async function k(z){z.preventDefault(),h(""),y(!0);try{l?await AC(l.id,$):await zC($),I(),H()}catch(T){h(T instanceof Ue?T.message:"unable to save conference bridge")}finally{y(!1)}}async function A(z){if(confirm(`Delete conference bridge "${z.name}"?`))try{await $C(z.id),H()}catch(T){alert(T instanceof Ue?T.message:"unable to delete conference bridge")}}async function X(z){if(g)try{await FC(g.id,z.id,!z.muted),E(T=>T.map(U=>U.id===z.id?{...U,muted:!U.muted}:U))}catch(T){alert(T instanceof Ue?T.message:"failed to change mute state")}}async function Q(z){if(!g)return;const T=z.caller_id_name||z.caller_id_num||z.id;if(confirm(`Kick "${T}" from the conference?`))try{await OC(g.id,z.id),E(U=>U.filter(re=>re.id!==z.id))}catch(U){alert(U instanceof Ue?U.message:"failed to kick participant")}}function O(z){const T=new Date(z),re=Math.max(0,Math.floor((new Date().getTime()-T.getTime())/1e3)),oe=Math.floor(re/60),ue=re%60;return`${oe}:${String(ue).padStart(2,"0")}`}const K=[{key:"name",header:"Name",render:z=>z.name},{key:"extension",header:"Extension",render:z=>z.extension||s.jsx("span",{className:"text-gray-400",children:""})},{key:"max_members",header:"Max Members",render:z=>String(z.max_members)},{key:"pin",header:"PIN",render:z=>z.has_pin?s.jsx("span",{className:"inline-flex items-center rounded-full bg-green-50 px-2 py-0.5 text-xs font-medium text-green-700",children:"Protected"}):s.jsx("span",{className:"text-gray-400",children:"None"})},{key:"features",header:"Features",render:z=>{const T=[];return z.record&&T.push("Record"),z.mute_on_join&&T.push("Mute on join"),z.announce_joins&&T.push("Announce"),T.length>0?s.jsx("span",{className:"text-xs text-gray-600",children:T.join(", ")}):s.jsx("span",{className:"text-gray-400",children:""})}},{key:"actions",header:"",className:"w-36",render:z=>s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{type:"button",onClick:T=>{T.stopPropagation(),F(z)},className:"text-sm text-green-600 hover:text-green-800",children:"Manage"}),s.jsx("button",{type:"button",onClick:T=>{T.stopPropagation(),B(z)},className:"text-sm text-blue-600 hover:text-blue-800",children:"Edit"}),s.jsx("button",{type:"button",onClick:T=>{T.stopPropagation(),A(z)},className:"text-sm text-red-600 hover:text-red-800",children:"Delete"})]})}];return g?s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:g.name}),s.jsxs("p",{className:"mt-1 text-sm text-gray-500",children:["Active participants",g.extension&&s.jsxs(s.Fragment,{children:["  Extension ",g.extension]})]})]}),s.jsx("button",{type:"button",onClick:L,className:"text-sm text-gray-500 hover:text-gray-700",children:"Back to list"})]}),R&&s.jsx("div",{className:"rounded-md bg-red-50 border border-red-200 px-3 py-2 mb-4",children:s.jsx("p",{className:"text-sm text-red-700",children:R})}),S?s.jsx("p",{className:"text-sm text-gray-400",children:"Loading participants..."}):j.length===0?s.jsx("div",{className:"rounded-md border border-gray-200 bg-gray-50 px-6 py-8 text-center",children:s.jsx("p",{className:"text-sm text-gray-500",children:"No active participants in this conference."})}):s.jsxs("div",{className:"overflow-hidden rounded-md border border-gray-200",children:[s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500",children:"Participant"}),s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500",children:"Caller ID"}),s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500",children:"Duration"}),s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500",children:"Status"}),s.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium uppercase tracking-wider text-gray-500",children:"Actions"})]})}),s.jsx("tbody",{className:"divide-y divide-gray-200 bg-white",children:j.map(z=>s.jsxs("tr",{children:[s.jsx("td",{className:"whitespace-nowrap px-4 py-3 text-sm text-gray-900",children:z.caller_id_name||s.jsx("span",{className:"text-gray-400",children:"Unknown"})}),s.jsx("td",{className:"whitespace-nowrap px-4 py-3 text-sm text-gray-500",children:z.caller_id_num||""}),s.jsx("td",{className:"whitespace-nowrap px-4 py-3 text-sm text-gray-500 tabular-nums",children:O(z.joined_at)}),s.jsx("td",{className:"whitespace-nowrap px-4 py-3 text-sm",children:z.muted?s.jsx("span",{className:"inline-flex items-center rounded-full bg-yellow-50 px-2 py-0.5 text-xs font-medium text-yellow-700",children:"Muted"}):s.jsx("span",{className:"inline-flex items-center rounded-full bg-green-50 px-2 py-0.5 text-xs font-medium text-green-700",children:"Speaking"})}),s.jsx("td",{className:"whitespace-nowrap px-4 py-3 text-right text-sm",children:s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx("button",{type:"button",onClick:()=>X(z),className:`rounded px-2 py-1 text-xs font-medium transition-colors ${z.muted?"bg-green-50 text-green-700 hover:bg-green-100":"bg-yellow-50 text-yellow-700 hover:bg-yellow-100"}`,children:z.muted?"Unmute":"Mute"}),s.jsx("button",{type:"button",onClick:()=>Q(z),className:"rounded bg-red-50 px-2 py-1 text-xs font-medium text-red-700 hover:bg-red-100 transition-colors",children:"Kick"})]})})]},z.id))})]}),s.jsx("div",{className:"border-t border-gray-200 bg-gray-50 px-4 py-2",children:s.jsxs("p",{className:"text-xs text-gray-500",children:[j.length," participant",j.length!==1?"s":"","  auto-refreshing"]})})]})]}):c?s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:l?"Edit Conference Bridge":"New Conference Bridge"}),s.jsx("button",{type:"button",onClick:I,className:"text-sm text-gray-500 hover:text-gray-700",children:"Cancel"})]}),s.jsxs("form",{onSubmit:k,className:"max-w-lg space-y-4",children:[m&&s.jsx("div",{className:"rounded-md bg-red-50 border border-red-200 px-3 py-2",children:s.jsx("p",{className:"text-sm text-red-700",children:m})}),s.jsx(Me,{label:"Bridge Name",id:"cb_name",required:!0,value:$.name,onChange:z=>D({...$,name:z.currentTarget.value}),placeholder:"Team Standup"}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsx(Me,{label:"Dial-in Extension",id:"cb_extension",value:$.extension??"",onChange:z=>D({...$,extension:z.currentTarget.value}),placeholder:"800"}),s.jsx(It,{label:"Max Members",id:"cb_max_members",min:2,max:100,value:$.max_members??10,onChange:z=>D({...$,max_members:Number(z.currentTarget.value)})})]}),s.jsx(Me,{label:"Access PIN (optional)",id:"cb_pin",value:$.pin??"",onChange:z=>D({...$,pin:z.currentTarget.value}),placeholder:"1234"}),s.jsxs("div",{className:"space-y-3 pt-2",children:[s.jsx(rr,{label:"Record conference",checked:$.record??!1,onChange:z=>D({...$,record:z})}),s.jsx(rr,{label:"Mute participants on join",checked:$.mute_on_join??!1,onChange:z=>D({...$,mute_on_join:z})}),s.jsx(rr,{label:"Announce joins/leaves",checked:$.announce_joins??!1,onChange:z=>D({...$,announce_joins:z})})]}),s.jsx("div",{className:"pt-4 border-t border-gray-100",children:s.jsx("button",{type:"submit",disabled:x,className:"rounded-md bg-blue-600 px-4 py-2 text-sm font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:x?"Saving...":l?"Update Conference Bridge":"Create Conference Bridge"})})]})]}):s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Conference Bridges"}),s.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Manage conference bridges for multi-party audio calls."})]}),s.jsx("button",{type:"button",onClick:Y,className:"rounded-md bg-blue-600 px-4 py-2 text-sm font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors",children:"Add Conference Bridge"})]}),o?s.jsx("p",{className:"text-sm text-gray-400",children:"Loading..."}):s.jsx(En,{columns:K,rows:e,keyFn:z=>z.id,total:e.length,limit:e.length||1,offset:0,onPageChange:()=>{},onRowClick:B,emptyMessage:"No conference bridges configured yet."})]})}function z4(){const[e,r]=N.useState([]),[o,a]=N.useState(!0),[l,u]=N.useState(!1),[c,f]=N.useState(""),[m,h]=N.useState(null),x=N.useRef(null),y=N.useRef(null);function g(){a(!0),Ux().then(P=>r(P)).catch(()=>r([])).finally(()=>a(!1))}N.useEffect(()=>{g()},[]);async function w(P){if(!(!P||P.length===0)){f(""),u(!0);try{for(let $=0;$<P.length;$++)await Wx(P[$]);g()}catch($){f($ instanceof Error?$.message:"upload failed")}finally{u(!1),y.current&&(y.current.value="")}}}async function j(P){if(confirm(`Delete prompt "${P.name}"?`))try{await hC(P.id),S(),g()}catch($){alert($ instanceof Error?$.message:"unable to delete prompt")}}function E(P){if(m===P.id){S();return}S();const $=new Audio(Xx(P.id));$.addEventListener("ended",()=>h(null)),$.addEventListener("error",()=>h(null)),$.play(),x.current=$,h(P.id)}function S(){x.current&&(x.current.pause(),x.current=null),h(null)}function _(P){return P<1024?`${P} B`:P<1024*1024?`${(P/1024).toFixed(1)} KB`:`${(P/(1024*1024)).toFixed(1)} MB`}function R(P){return new Date(P).toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}const b=[{key:"name",header:"Name",render:P=>P.name},{key:"filename",header:"Filename",render:P=>P.filename},{key:"format",header:"Format",render:P=>s.jsx("span",{className:"inline-flex items-center rounded-full px-2 py-0.5 text-xs font-medium bg-gray-100 text-gray-700",children:P.format.toUpperCase()})},{key:"file_size",header:"Size",render:P=>_(P.file_size)},{key:"created_at",header:"Uploaded",render:P=>R(P.created_at)},{key:"actions",header:"",className:"w-28",render:P=>s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{type:"button",onClick:$=>{$.stopPropagation(),E(P)},className:"text-sm text-blue-600 hover:text-blue-800",children:m===P.id?"Stop":"Play"}),s.jsx("button",{type:"button",onClick:$=>{$.stopPropagation(),j(P)},className:"text-sm text-red-600 hover:text-red-800",children:"Delete"})]})}];return s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Audio Prompts"}),s.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Upload and manage audio prompts for IVR menus and call flows."})]}),s.jsxs("div",{children:[s.jsx("input",{ref:y,type:"file",accept:".wav,.alaw,.al,.ulaw,.ul",multiple:!0,className:"hidden",onChange:P=>w(P.target.files)}),s.jsx("button",{type:"button",disabled:l,onClick:()=>y.current?.click(),className:"rounded-md bg-blue-600 px-4 py-2 text-sm font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:l?"Uploading...":"Upload Prompt"})]})]}),c&&s.jsx("div",{className:"rounded-md bg-red-50 border border-red-200 px-3 py-2 mb-4",children:s.jsx("p",{className:"text-sm text-red-700",children:c})}),o?s.jsx("p",{className:"text-sm text-gray-400",children:"Loading..."}):s.jsx(En,{columns:b,rows:e,keyFn:P=>P.id,total:e.length,limit:e.length||1,offset:0,onPageChange:()=>{},emptyMessage:"No audio prompts uploaded yet."})]})}const x0=20;function A4(){const[e,r]=N.useState([]),[o,a]=N.useState(0),[l,u]=N.useState(0),[c,f]=N.useState(!0),[m,h]=N.useState(""),[x,y]=N.useState(""),[g,w]=N.useState(""),[j,E]=N.useState(null),S=N.useRef(null);function _(I){f(!0),HC({limit:x0,offset:I,search:m||void 0,start_date:x||void 0,end_date:g||void 0}).then(F=>{r(F.items),a(F.total),u(I)}).catch(()=>{r([]),a(0)}).finally(()=>f(!1))}N.useEffect(()=>{_(0)},[]);function R(){_(0)}function b(I){if(S.current&&(S.current.pause(),S.current=null),j===I.id){E(null);return}const F=new Audio(s0(I.id));F.onended=()=>E(null),F.onerror=()=>E(null),F.play(),S.current=F,E(I.id)}function P(I){const F=document.createElement("a");F.href=s0(I.id),F.download=I.filename,F.click()}async function $(I){if(confirm(`Delete recording "${I.filename}"? This cannot be undone.`))try{await BC(I.id),j===I.id&&S.current&&(S.current.pause(),S.current=null,E(null)),_(l)}catch(F){alert(F instanceof Ue?F.message:"unable to delete recording")}}function D(I){if(I==null)return"";const F=Math.floor(I/60),L=I%60;return`${F}:${L.toString().padStart(2,"0")}`}function M(I){return new Date(I).toLocaleString()}function H(I){return I==null?"":I<1024?`${I} B`:I<1024*1024?`${(I/1024).toFixed(1)} KB`:`${(I/(1024*1024)).toFixed(1)} MB`}const Y=[{key:"start_time",header:"Date",render:I=>s.jsx("span",{className:"whitespace-nowrap",children:M(I.start_time)})},{key:"direction",header:"Direction",render:I=>s.jsx($4,{direction:I.direction})},{key:"caller",header:"From",render:I=>I.caller_id_name?s.jsxs("span",{children:[s.jsx("span",{className:"font-medium",children:I.caller_id_name})," ",s.jsx("span",{className:"text-gray-500",children:I.caller_id_num})]}):I.caller_id_num||""},{key:"callee",header:"To",render:I=>I.callee||""},{key:"duration",header:"Duration",render:I=>D(I.duration)},{key:"file_size",header:"Size",render:I=>s.jsx("span",{className:"text-xs text-gray-500",children:H(I.file_size)})},{key:"actions",header:"",className:"w-36",render:I=>s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{type:"button",onClick:F=>{F.stopPropagation(),b(I)},className:`text-sm ${j===I.id?"text-orange-600 hover:text-orange-800":"text-blue-600 hover:text-blue-800"}`,title:j===I.id?"Stop":"Play",children:j===I.id?"Stop":"Play"}),s.jsx("button",{type:"button",onClick:F=>{F.stopPropagation(),P(I)},className:"text-sm text-gray-600 hover:text-gray-800",title:"Download",children:"Download"}),s.jsx("button",{type:"button",onClick:F=>{F.stopPropagation(),$(I)},className:"text-sm text-red-600 hover:text-red-800",title:"Delete",children:"Delete"})]})}],B=e.reduce((I,F)=>I+(F.file_size??0),0);return s.jsxs("div",{children:[s.jsx("div",{className:"flex items-center justify-between mb-6",children:s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Recordings"}),s.jsxs("p",{className:"mt-1 text-sm text-gray-500",children:["Browse, search, play, and manage call recordings.",o>0&&s.jsxs("span",{className:"ml-2 text-gray-400",children:[o," recording",o!==1?"s":"",B>0&&`  ${H(B)} on this page`]})]})]})}),s.jsxs("div",{className:"flex flex-wrap items-end gap-3 mb-4",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"rec_search",className:"block text-xs font-medium text-gray-500 mb-1",children:"Search"}),s.jsx("input",{id:"rec_search",type:"text",value:m,onChange:I=>h(I.currentTarget.value),onKeyDown:I=>I.key==="Enter"&&R(),placeholder:"Name, number, or callee",className:"block w-56 rounded-md border border-gray-300 px-3 py-1.5 text-sm focus:border-blue-500 focus:ring-1 focus:ring-blue-500"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"rec_start",className:"block text-xs font-medium text-gray-500 mb-1",children:"From"}),s.jsx("input",{id:"rec_start",type:"date",value:x,onChange:I=>y(I.currentTarget.value),className:"block rounded-md border border-gray-300 px-3 py-1.5 text-sm focus:border-blue-500 focus:ring-1 focus:ring-blue-500"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"rec_end",className:"block text-xs font-medium text-gray-500 mb-1",children:"To"}),s.jsx("input",{id:"rec_end",type:"date",value:g,onChange:I=>w(I.currentTarget.value),className:"block rounded-md border border-gray-300 px-3 py-1.5 text-sm focus:border-blue-500 focus:ring-1 focus:ring-blue-500"})]}),s.jsx("button",{type:"button",onClick:R,className:"rounded-md bg-blue-600 px-4 py-1.5 text-sm font-medium text-white hover:bg-blue-700 transition-colors",children:"Filter"}),(m||x||g)&&s.jsx("button",{type:"button",onClick:()=>{h(""),y(""),w(""),setTimeout(()=>_(0),0)},className:"text-sm text-gray-500 hover:text-gray-700",children:"Clear"})]}),c?s.jsx("p",{className:"text-sm text-gray-400",children:"Loading..."}):s.jsx(En,{columns:Y,rows:e,keyFn:I=>I.id,total:o,limit:x0,offset:l,onPageChange:_,emptyMessage:"No recordings found."})]})}function $4({direction:e}){const r={inbound:"bg-blue-50 text-blue-700",outbound:"bg-emerald-50 text-emerald-700",internal:"bg-gray-100 text-gray-700"},o={inbound:"In",outbound:"Out",internal:"Int"};return s.jsx("span",{className:`inline-flex items-center rounded-full px-2 py-0.5 text-xs font-medium ${r[e]??"bg-gray-100 text-gray-700"}`,children:o[e]??e})}const y0=20;function F4(){const[e,r]=N.useState([]),[o,a]=N.useState(0),[l,u]=N.useState(0),[c,f]=N.useState(!0),[m,h]=N.useState(""),[x,y]=N.useState(""),[g,w]=N.useState(""),[j,E]=N.useState("");function S(D){f(!0),dC({limit:y0,offset:D,search:m||void 0,direction:x||void 0,start_date:g||void 0,end_date:j||void 0}).then(M=>{r(M.items),a(M.total),u(D)}).catch(()=>{r([]),a(0)}).finally(()=>f(!1))}N.useEffect(()=>{S(0)},[]);function _(){S(0)}function R(){const D=fC({search:m||void 0,direction:x||void 0,start_date:g||void 0,end_date:j||void 0});window.open(D,"_blank")}function b(D){if(D==null)return"";const M=Math.floor(D/60),H=D%60;return`${M}:${H.toString().padStart(2,"0")}`}function P(D){return new Date(D).toLocaleString()}const $=[{key:"start_time",header:"Time",render:D=>s.jsx("span",{className:"whitespace-nowrap",children:P(D.start_time)})},{key:"direction",header:"Direction",render:D=>s.jsx(O4,{direction:D.direction})},{key:"caller",header:"From",render:D=>D.caller_id_name?s.jsxs("span",{children:[s.jsx("span",{className:"font-medium",children:D.caller_id_name})," ",s.jsx("span",{className:"text-gray-500",children:D.caller_id_num})]}):D.caller_id_num||""},{key:"callee",header:"To",render:D=>D.callee||""},{key:"duration",header:"Duration",render:D=>b(D.duration)},{key:"disposition",header:"Status",render:D=>s.jsx(H4,{disposition:D.disposition})},{key:"hangup_cause",header:"Cause",render:D=>s.jsx("span",{className:"text-xs text-gray-500",children:D.hangup_cause||""})}];return s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Call History"}),s.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Searchable and filterable call detail records."})]}),s.jsx("button",{type:"button",onClick:R,className:"rounded-md border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50 transition-colors",children:"Export CSV"})]}),s.jsxs("div",{className:"flex flex-wrap items-end gap-3 mb-4",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"cdr_search",className:"block text-xs font-medium text-gray-500 mb-1",children:"Search"}),s.jsx("input",{id:"cdr_search",type:"text",value:m,onChange:D=>h(D.currentTarget.value),onKeyDown:D=>D.key==="Enter"&&_(),placeholder:"Name, number, or callee",className:"block w-56 rounded-md border border-gray-300 px-3 py-1.5 text-sm focus:border-blue-500 focus:ring-1 focus:ring-blue-500"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"cdr_direction",className:"block text-xs font-medium text-gray-500 mb-1",children:"Direction"}),s.jsxs("select",{id:"cdr_direction",value:x,onChange:D=>y(D.currentTarget.value),className:"block w-32 rounded-md border border-gray-300 px-3 py-1.5 text-sm focus:border-blue-500 focus:ring-1 focus:ring-blue-500",children:[s.jsx("option",{value:"",children:"All"}),s.jsx("option",{value:"inbound",children:"Inbound"}),s.jsx("option",{value:"outbound",children:"Outbound"}),s.jsx("option",{value:"internal",children:"Internal"})]})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"cdr_start",className:"block text-xs font-medium text-gray-500 mb-1",children:"From"}),s.jsx("input",{id:"cdr_start",type:"date",value:g,onChange:D=>w(D.currentTarget.value),className:"block rounded-md border border-gray-300 px-3 py-1.5 text-sm focus:border-blue-500 focus:ring-1 focus:ring-blue-500"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"cdr_end",className:"block text-xs font-medium text-gray-500 mb-1",children:"To"}),s.jsx("input",{id:"cdr_end",type:"date",value:j,onChange:D=>E(D.currentTarget.value),className:"block rounded-md border border-gray-300 px-3 py-1.5 text-sm focus:border-blue-500 focus:ring-1 focus:ring-blue-500"})]}),s.jsx("button",{type:"button",onClick:_,className:"rounded-md bg-blue-600 px-4 py-1.5 text-sm font-medium text-white hover:bg-blue-700 transition-colors",children:"Filter"}),(m||x||g||j)&&s.jsx("button",{type:"button",onClick:()=>{h(""),y(""),w(""),E(""),setTimeout(()=>S(0),0)},className:"text-sm text-gray-500 hover:text-gray-700",children:"Clear"})]}),c?s.jsx("p",{className:"text-sm text-gray-400",children:"Loading..."}):s.jsx(En,{columns:$,rows:e,keyFn:D=>D.id,total:o,limit:y0,offset:l,onPageChange:S,emptyMessage:"No call records found."})]})}function O4({direction:e}){const r={inbound:"bg-blue-50 text-blue-700",outbound:"bg-emerald-50 text-emerald-700",internal:"bg-gray-100 text-gray-700"},o={inbound:"In",outbound:"Out",internal:"Int"};return s.jsx("span",{className:`inline-flex items-center rounded-full px-2 py-0.5 text-xs font-medium ${r[e]??"bg-gray-100 text-gray-700"}`,children:o[e]??e})}function H4({disposition:e}){const r={answered:"bg-green-50 text-green-700",no_answer:"bg-yellow-50 text-yellow-700",busy:"bg-orange-50 text-orange-700",cancelled:"bg-gray-100 text-gray-500",failed:"bg-red-50 text-red-700",in_progress:"bg-blue-50 text-blue-700"},o={answered:"Answered",no_answer:"No Answer",busy:"Busy",cancelled:"Cancelled",failed:"Failed",in_progress:"In Progress"};return s.jsx("span",{className:`inline-flex items-center rounded-full px-2 py-0.5 text-xs font-medium ${r[e]??"bg-gray-100 text-gray-700"}`,children:o[e]??e})}function B4(){const[e,r]=N.useState(!0),[o,a]=N.useState(""),[l,u]=N.useState(""),[c,f]=N.useState(!1),[m,h]=N.useState(!1),[x,y]=N.useState(""),[g,w]=N.useState({udp_port:"5060",tcp_port:"",tls_port:"5061",tls_cert:"",tls_key:"",external_ip:"",hostname:""}),[j,E]=N.useState({audio:"g711u,g711a,opus"}),[S,_]=N.useState({storage_path:"",format:"wav",max_days:""}),[R,b]=N.useState({host:"",port:"587",from:"",username:"",password:"",tls:"starttls"}),[P,$]=N.useState({key:""}),[D,M]=N.useState({gateway_url:""}),[H,Y]=N.useState(null),[B,I]=N.useState(!1);async function F(){a(""),u(""),I(!0);try{await gC(),u("System configuration reloaded")}catch(k){a(k instanceof Ue?k.message:"failed to reload configuration")}finally{I(!1)}}N.useEffect(()=>{r(!0),mC().then(k=>{w({udp_port:k.sip.udp_port||"5060",tcp_port:k.sip.tcp_port||"",tls_port:k.sip.tls_port||"5061",tls_cert:k.sip.tls_cert||"",tls_key:k.sip.tls_key||"",external_ip:k.sip.external_ip||"",hostname:k.sip.hostname||""}),E({audio:k.codecs.audio||"g711u,g711a,opus"}),_({storage_path:k.recording.storage_path||"",format:k.recording.format||"wav",max_days:k.recording.max_days||""}),b({host:k.smtp.host,port:k.smtp.port||"587",from:k.smtp.from,username:k.smtp.username,password:"",tls:k.smtp.tls||"starttls"}),f(k.smtp.has_password),h(k.license.has_key),y(k.license.instance_id),$({key:""}),M({gateway_url:k.push.gateway_url||""})}).catch(()=>{a("Failed to load settings")}).finally(()=>r(!1))},[]);async function L(k,A){a(""),u(""),Y(k);try{const X=await pC(A);f(X.smtp.has_password),h(X.license.has_key),y(X.license.instance_id),b(Q=>({...Q,password:""})),$({key:""}),u(`${k} settings saved`)}catch(X){a(X instanceof Ue?X.message:"failed to save settings")}finally{Y(null)}}return e?s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Settings"}),s.jsx("p",{className:"mt-4 text-sm text-gray-400",children:"Loading..."})]}):s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Settings"}),s.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"System configuration. Changes to SIP and codec settings require a reload to take effect."}),s.jsxs("div",{className:"mt-4 flex items-center gap-3",children:[s.jsx("button",{onClick:F,disabled:B,className:"rounded-md bg-amber-600 px-4 py-2 text-sm font-medium text-white hover:bg-amber-700 focus:outline-none focus:ring-2 focus:ring-amber-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:B?"Reloading...":"Reload Configuration"}),s.jsx("span",{className:"text-sm text-gray-500",children:"Apply saved changes to the running system without restarting."})]}),o&&s.jsx("div",{className:"mt-4 max-w-lg rounded-md bg-red-50 border border-red-200 px-3 py-2",children:s.jsx("p",{className:"text-sm text-red-700",children:o})}),l&&s.jsx("div",{className:"mt-4 max-w-lg rounded-md bg-green-50 border border-green-200 px-3 py-2",children:s.jsx("p",{className:"text-sm text-green-700",children:l})}),s.jsxs(hi,{title:"SIP",description:"SIP transport ports and TLS certificate paths.",saving:H==="SIP",onSubmit:()=>L("SIP",{sip:g}),children:[s.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[s.jsx(Me,{label:"UDP Port",id:"sip_udp_port",value:g.udp_port,onChange:k=>w({...g,udp_port:k.currentTarget.value}),placeholder:"5060"}),s.jsx(Me,{label:"TCP Port",id:"sip_tcp_port",value:g.tcp_port,onChange:k=>w({...g,tcp_port:k.currentTarget.value}),placeholder:"5060"}),s.jsx(Me,{label:"TLS Port",id:"sip_tls_port",value:g.tls_port,onChange:k=>w({...g,tls_port:k.currentTarget.value}),placeholder:"5061"})]}),s.jsx(Me,{label:"Hostname",id:"sip_hostname",value:g.hostname,onChange:k=>w({...g,hostname:k.currentTarget.value}),placeholder:"pbx.example.com"}),s.jsx(Me,{label:"External IP",id:"sip_external_ip",value:g.external_ip,onChange:k=>w({...g,external_ip:k.currentTarget.value}),placeholder:"Auto-detected if empty"}),s.jsx(Me,{label:"TLS Certificate Path",id:"sip_tls_cert",value:g.tls_cert,onChange:k=>w({...g,tls_cert:k.currentTarget.value}),placeholder:"/etc/flowpbx/tls/cert.pem"}),s.jsx(Me,{label:"TLS Key Path",id:"sip_tls_key",value:g.tls_key,onChange:k=>w({...g,tls_key:k.currentTarget.value}),placeholder:"/etc/flowpbx/tls/key.pem"})]}),s.jsx(hi,{title:"Codecs",description:"Audio codecs offered in SDP, in preference order. Supported: g711u, g711a, opus.",saving:H==="Codecs",onSubmit:()=>L("Codecs",{codecs:j}),children:s.jsx(Me,{label:"Audio Codecs",id:"codecs_audio",value:j.audio,onChange:k=>E({audio:k.currentTarget.value}),placeholder:"g711u,g711a,opus"})}),s.jsxs(hi,{title:"Recording",description:"Call recording storage settings.",saving:H==="Recording",onSubmit:()=>L("Recording",{recording:S}),children:[s.jsx(Me,{label:"Storage Path",id:"recording_storage_path",value:S.storage_path,onChange:k=>_({...S,storage_path:k.currentTarget.value}),placeholder:"Default: data/recordings"}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs(ar,{label:"Format",id:"recording_format",value:S.format,onChange:k=>_({...S,format:k.currentTarget.value}),children:[s.jsx("option",{value:"wav",children:"WAV"}),s.jsx("option",{value:"mp3",children:"MP3"})]}),s.jsx(Me,{label:"Retention (days)",id:"recording_max_days",value:S.max_days,onChange:k=>_({...S,max_days:k.currentTarget.value}),placeholder:"0 = keep forever"})]})]}),s.jsxs(hi,{title:"SMTP / Email",description:"Outgoing mail server for voicemail email notifications.",saving:H==="SMTP",onSubmit:()=>L("SMTP",{smtp:R}),children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsx(Me,{label:"SMTP Host",id:"smtp_host",value:R.host,onChange:k=>b({...R,host:k.currentTarget.value}),placeholder:"smtp.example.com"}),s.jsx(Me,{label:"Port",id:"smtp_port",value:R.port,onChange:k=>b({...R,port:k.currentTarget.value}),placeholder:"587"})]}),s.jsx(Me,{label:"From Address",id:"smtp_from",type:"email",value:R.from,onChange:k=>b({...R,from:k.currentTarget.value}),placeholder:"pbx@example.com"}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsx(Me,{label:"Username",id:"smtp_username",value:R.username,onChange:k=>b({...R,username:k.currentTarget.value}),placeholder:"user@example.com",autoComplete:"off"}),s.jsx(Me,{label:c?"Password (leave blank to keep)":"Password",id:"smtp_password",type:"password",value:R.password,onChange:k=>b({...R,password:k.currentTarget.value}),autoComplete:"off"})]}),s.jsxs(ar,{label:"Encryption",id:"smtp_tls",value:R.tls,onChange:k=>b({...R,tls:k.currentTarget.value}),children:[s.jsx("option",{value:"starttls",children:"STARTTLS (port 587)"}),s.jsx("option",{value:"tls",children:"Implicit TLS (port 465)"}),s.jsx("option",{value:"none",children:"None (port 25)"})]})]}),s.jsxs(hi,{title:"License",description:"FlowPBX license key for push notifications and premium features.",saving:H==="License",onSubmit:()=>L("License",{license:P}),children:[s.jsx(Me,{label:m?"License Key (leave blank to keep)":"License Key",id:"license_key",value:P.key,onChange:k=>$({key:k.currentTarget.value}),placeholder:"XXXX-XXXX-XXXX-XXXX",autoComplete:"off"}),x&&s.jsxs("p",{className:"text-xs text-gray-400",children:["Instance ID: ",x]})]}),s.jsx(hi,{title:"Push Gateway",description:"URL of the push notification gateway for mobile app wake-up.",saving:H==="Push",onSubmit:()=>L("Push",{push:D}),children:s.jsx(Me,{label:"Gateway URL",id:"push_gateway_url",value:D.gateway_url,onChange:k=>M({gateway_url:k.currentTarget.value}),placeholder:"https://push.flowpbx.com"})})]})}function hi({title:e,description:r,saving:o,onSubmit:a,children:l}){function u(c){c.preventDefault(),a()}return s.jsxs("div",{className:"mt-8 max-w-lg",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:e}),s.jsx("p",{className:"mt-1 text-sm text-gray-500",children:r}),s.jsxs("form",{onSubmit:u,className:"mt-4 space-y-4",children:[l,s.jsx("div",{className:"pt-4 border-t border-gray-100",children:s.jsx("button",{type:"submit",disabled:o,className:"rounded-md bg-blue-600 px-4 py-2 text-sm font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:o?"Saving...":`Save ${e} Settings`})})]})]})}function V4(){return s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("h1",{className:"text-4xl font-bold text-gray-900",children:"404"}),s.jsx("p",{className:"mt-2 text-gray-600",children:"Page not found."}),s.jsx(Sd,{to:"/",className:"mt-4 inline-block text-blue-600 hover:text-blue-800",children:"Go to Dashboard"})]})})}const U4=Gw([{path:"/login",element:s.jsx(Rb,{})},{path:"/setup",element:s.jsx(Tb,{})},{element:s.jsx(lb,{}),children:[{path:"/",element:s.jsx(Lb,{})},{path:"/call-flows",element:s.jsx(e4,{})},{path:"/trunks",element:s.jsx(t4,{})},{path:"/inbound-numbers",element:s.jsx(n4,{})},{path:"/extensions",element:s.jsx(r4,{})},{path:"/voicemail",element:s.jsx(s4,{})},{path:"/ring-groups",element:s.jsx(u4,{})},{path:"/ivr-menus",element:s.jsx(g4,{})},{path:"/time-switches",element:s.jsx(D4,{})},{path:"/conferences",element:s.jsx(I4,{})},{path:"/prompts",element:s.jsx(z4,{})},{path:"/recordings",element:s.jsx(A4,{})},{path:"/call-history",element:s.jsx(F4,{})},{path:"/settings",element:s.jsx(B4,{})}]},{path:"*",element:s.jsx(V4,{})}]);function W4(){return s.jsx(ab,{router:U4})}Iv.createRoot(document.getElementById("root")).render(s.jsx(N.StrictMode,{children:s.jsx(W4,{})}));
