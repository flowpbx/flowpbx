function mv(e,r){for(var o=0;o<r.length;o++){const a=r[o];if(typeof a!="string"&&!Array.isArray(a)){for(const s in a)if(s!=="default"&&!(s in e)){const l=Object.getOwnPropertyDescriptor(a,s);l&&Object.defineProperty(e,s,l.get?l:{enumerable:!0,get:()=>a[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))a(s);new MutationObserver(s=>{for(const l of s)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&a(c)}).observe(document,{childList:!0,subtree:!0});function o(s){const l={};return s.integrity&&(l.integrity=s.integrity),s.referrerPolicy&&(l.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?l.credentials="include":s.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function a(s){if(s.ep)return;s.ep=!0;const l=o(s);fetch(s.href,l)}})();function d0(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var bc={exports:{}},aa={},_c={exports:{}},Ie={};var pp;function gv(){if(pp)return Ie;pp=1;var e=Symbol.for("react.element"),r=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),c=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),g=Symbol.iterator;function v(T){return T===null||typeof T!="object"?null:(T=g&&T[g]||T["@@iterator"],typeof T=="function"?T:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,k={};function N(T,B,oe){this.props=T,this.context=B,this.refs=k,this.updater=oe||w}N.prototype.isReactComponent={},N.prototype.setState=function(T,B){if(typeof T!="object"&&typeof T!="function"&&T!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,T,B,"setState")},N.prototype.forceUpdate=function(T){this.updater.enqueueForceUpdate(this,T,"forceUpdate")};function _(){}_.prototype=N.prototype;function P(T,B,oe){this.props=T,this.context=B,this.refs=k,this.updater=oe||w}var b=P.prototype=new _;b.constructor=P,S(b,N.prototype),b.isPureReactComponent=!0;var j=Array.isArray,I=Object.prototype.hasOwnProperty,D={current:null},R={key:!0,ref:!0,__self:!0,__source:!0};function A(T,B,oe){var re,ce={},me=null,he=null;if(B!=null)for(re in B.ref!==void 0&&(he=B.ref),B.key!==void 0&&(me=""+B.key),B)I.call(B,re)&&!R.hasOwnProperty(re)&&(ce[re]=B[re]);var ie=arguments.length-2;if(ie===1)ce.children=oe;else if(1<ie){for(var pe=Array(ie),De=0;De<ie;De++)pe[De]=arguments[De+2];ce.children=pe}if(T&&T.defaultProps)for(re in ie=T.defaultProps,ie)ce[re]===void 0&&(ce[re]=ie[re]);return{$$typeof:e,type:T,key:me,ref:he,props:ce,_owner:D.current}}function K(T,B){return{$$typeof:e,type:T.type,key:B,ref:T.ref,props:T.props,_owner:T._owner}}function F(T){return typeof T=="object"&&T!==null&&T.$$typeof===e}function V(T){var B={"=":"=0",":":"=2"};return"$"+T.replace(/[=:]/g,function(oe){return B[oe]})}var H=/\/+/g;function W(T,B){return typeof T=="object"&&T!==null&&T.key!=null?V(""+T.key):B.toString(36)}function M(T,B,oe,re,ce){var me=typeof T;(me==="undefined"||me==="boolean")&&(T=null);var he=!1;if(T===null)he=!0;else switch(me){case"string":case"number":he=!0;break;case"object":switch(T.$$typeof){case e:case r:he=!0}}if(he)return he=T,ce=ce(he),T=re===""?"."+W(he,0):re,j(ce)?(oe="",T!=null&&(oe=T.replace(H,"$&/")+"/"),M(ce,B,oe,"",function(De){return De})):ce!=null&&(F(ce)&&(ce=K(ce,oe+(!ce.key||he&&he.key===ce.key?"":(""+ce.key).replace(H,"$&/")+"/")+T)),B.push(ce)),1;if(he=0,re=re===""?".":re+":",j(T))for(var ie=0;ie<T.length;ie++){me=T[ie];var pe=re+W(me,ie);he+=M(me,B,oe,pe,ce)}else if(pe=v(T),typeof pe=="function")for(T=pe.call(T),ie=0;!(me=T.next()).done;)me=me.value,pe=re+W(me,ie++),he+=M(me,B,oe,pe,ce);else if(me==="object")throw B=String(T),Error("Objects are not valid as a React child (found: "+(B==="[object Object]"?"object with keys {"+Object.keys(T).join(", ")+"}":B)+"). If you meant to render a collection of children, use an array instead.");return he}function L(T,B,oe){if(T==null)return T;var re=[],ce=0;return M(T,re,"","",function(me){return B.call(oe,me,ce++)}),re}function X(T){if(T._status===-1){var B=T._result;B=B(),B.then(function(oe){(T._status===0||T._status===-1)&&(T._status=1,T._result=oe)},function(oe){(T._status===0||T._status===-1)&&(T._status=2,T._result=oe)}),T._status===-1&&(T._status=0,T._result=B)}if(T._status===1)return T._result.default;throw T._result}var Q={current:null},z={transition:null},G={ReactCurrentDispatcher:Q,ReactCurrentBatchConfig:z,ReactCurrentOwner:D};function U(){throw Error("act(...) is not supported in production builds of React.")}return Ie.Children={map:L,forEach:function(T,B,oe){L(T,function(){B.apply(this,arguments)},oe)},count:function(T){var B=0;return L(T,function(){B++}),B},toArray:function(T){return L(T,function(B){return B})||[]},only:function(T){if(!F(T))throw Error("React.Children.only expected to receive a single React element child.");return T}},Ie.Component=N,Ie.Fragment=o,Ie.Profiler=s,Ie.PureComponent=P,Ie.StrictMode=a,Ie.Suspense=m,Ie.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=G,Ie.act=U,Ie.cloneElement=function(T,B,oe){if(T==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+T+".");var re=S({},T.props),ce=T.key,me=T.ref,he=T._owner;if(B!=null){if(B.ref!==void 0&&(me=B.ref,he=D.current),B.key!==void 0&&(ce=""+B.key),T.type&&T.type.defaultProps)var ie=T.type.defaultProps;for(pe in B)I.call(B,pe)&&!R.hasOwnProperty(pe)&&(re[pe]=B[pe]===void 0&&ie!==void 0?ie[pe]:B[pe])}var pe=arguments.length-2;if(pe===1)re.children=oe;else if(1<pe){ie=Array(pe);for(var De=0;De<pe;De++)ie[De]=arguments[De+2];re.children=ie}return{$$typeof:e,type:T.type,key:ce,ref:me,props:re,_owner:he}},Ie.createContext=function(T){return T={$$typeof:c,_currentValue:T,_currentValue2:T,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},T.Provider={$$typeof:l,_context:T},T.Consumer=T},Ie.createElement=A,Ie.createFactory=function(T){var B=A.bind(null,T);return B.type=T,B},Ie.createRef=function(){return{current:null}},Ie.forwardRef=function(T){return{$$typeof:f,render:T}},Ie.isValidElement=F,Ie.lazy=function(T){return{$$typeof:x,_payload:{_status:-1,_result:T},_init:X}},Ie.memo=function(T,B){return{$$typeof:p,type:T,compare:B===void 0?null:B}},Ie.startTransition=function(T){var B=z.transition;z.transition={};try{T()}finally{z.transition=B}},Ie.unstable_act=U,Ie.useCallback=function(T,B){return Q.current.useCallback(T,B)},Ie.useContext=function(T){return Q.current.useContext(T)},Ie.useDebugValue=function(){},Ie.useDeferredValue=function(T){return Q.current.useDeferredValue(T)},Ie.useEffect=function(T,B){return Q.current.useEffect(T,B)},Ie.useId=function(){return Q.current.useId()},Ie.useImperativeHandle=function(T,B,oe){return Q.current.useImperativeHandle(T,B,oe)},Ie.useInsertionEffect=function(T,B){return Q.current.useInsertionEffect(T,B)},Ie.useLayoutEffect=function(T,B){return Q.current.useLayoutEffect(T,B)},Ie.useMemo=function(T,B){return Q.current.useMemo(T,B)},Ie.useReducer=function(T,B,oe){return Q.current.useReducer(T,B,oe)},Ie.useRef=function(T){return Q.current.useRef(T)},Ie.useState=function(T){return Q.current.useState(T)},Ie.useSyncExternalStore=function(T,B,oe){return Q.current.useSyncExternalStore(T,B,oe)},Ie.useTransition=function(){return Q.current.useTransition()},Ie.version="18.3.1",Ie}var mp;function Ma(){return mp||(mp=1,_c.exports=gv()),_c.exports}var gp;function yv(){if(gp)return aa;gp=1;var e=Ma(),r=Symbol.for("react.element"),o=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,s=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(f,m,p){var x,g={},v=null,w=null;p!==void 0&&(v=""+p),m.key!==void 0&&(v=""+m.key),m.ref!==void 0&&(w=m.ref);for(x in m)a.call(m,x)&&!l.hasOwnProperty(x)&&(g[x]=m[x]);if(f&&f.defaultProps)for(x in m=f.defaultProps,m)g[x]===void 0&&(g[x]=m[x]);return{$$typeof:r,type:f,key:v,ref:w,props:g,_owner:s.current}}return aa.Fragment=o,aa.jsx=c,aa.jsxs=c,aa}var yp;function xv(){return yp||(yp=1,bc.exports=yv()),bc.exports}var d=xv(),E=Ma();const f0=d0(E),vv=mv({__proto__:null,default:f0},[E]);var Ys={},Sc={exports:{}},Kt={},Nc={exports:{}},Ec={};var xp;function wv(){return xp||(xp=1,(function(e){function r(z,G){var U=z.length;z.push(G);e:for(;0<U;){var T=U-1>>>1,B=z[T];if(0<s(B,G))z[T]=G,z[U]=B,U=T;else break e}}function o(z){return z.length===0?null:z[0]}function a(z){if(z.length===0)return null;var G=z[0],U=z.pop();if(U!==G){z[0]=U;e:for(var T=0,B=z.length,oe=B>>>1;T<oe;){var re=2*(T+1)-1,ce=z[re],me=re+1,he=z[me];if(0>s(ce,U))me<B&&0>s(he,ce)?(z[T]=he,z[me]=U,T=me):(z[T]=ce,z[re]=U,T=re);else if(me<B&&0>s(he,U))z[T]=he,z[me]=U,T=me;else break e}}return G}function s(z,G){var U=z.sortIndex-G.sortIndex;return U!==0?U:z.id-G.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;e.unstable_now=function(){return l.now()}}else{var c=Date,f=c.now();e.unstable_now=function(){return c.now()-f}}var m=[],p=[],x=1,g=null,v=3,w=!1,S=!1,k=!1,N=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,P=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(z){for(var G=o(p);G!==null;){if(G.callback===null)a(p);else if(G.startTime<=z)a(p),G.sortIndex=G.expirationTime,r(m,G);else break;G=o(p)}}function j(z){if(k=!1,b(z),!S)if(o(m)!==null)S=!0,X(I);else{var G=o(p);G!==null&&Q(j,G.startTime-z)}}function I(z,G){S=!1,k&&(k=!1,_(A),A=-1),w=!0;var U=v;try{for(b(G),g=o(m);g!==null&&(!(g.expirationTime>G)||z&&!V());){var T=g.callback;if(typeof T=="function"){g.callback=null,v=g.priorityLevel;var B=T(g.expirationTime<=G);G=e.unstable_now(),typeof B=="function"?g.callback=B:g===o(m)&&a(m),b(G)}else a(m);g=o(m)}if(g!==null)var oe=!0;else{var re=o(p);re!==null&&Q(j,re.startTime-G),oe=!1}return oe}finally{g=null,v=U,w=!1}}var D=!1,R=null,A=-1,K=5,F=-1;function V(){return!(e.unstable_now()-F<K)}function H(){if(R!==null){var z=e.unstable_now();F=z;var G=!0;try{G=R(!0,z)}finally{G?W():(D=!1,R=null)}}else D=!1}var W;if(typeof P=="function")W=function(){P(H)};else if(typeof MessageChannel<"u"){var M=new MessageChannel,L=M.port2;M.port1.onmessage=H,W=function(){L.postMessage(null)}}else W=function(){N(H,0)};function X(z){R=z,D||(D=!0,W())}function Q(z,G){A=N(function(){z(e.unstable_now())},G)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(z){z.callback=null},e.unstable_continueExecution=function(){S||w||(S=!0,X(I))},e.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):K=0<z?Math.floor(1e3/z):5},e.unstable_getCurrentPriorityLevel=function(){return v},e.unstable_getFirstCallbackNode=function(){return o(m)},e.unstable_next=function(z){switch(v){case 1:case 2:case 3:var G=3;break;default:G=v}var U=v;v=G;try{return z()}finally{v=U}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(z,G){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var U=v;v=z;try{return G()}finally{v=U}},e.unstable_scheduleCallback=function(z,G,U){var T=e.unstable_now();switch(typeof U=="object"&&U!==null?(U=U.delay,U=typeof U=="number"&&0<U?T+U:T):U=T,z){case 1:var B=-1;break;case 2:B=250;break;case 5:B=1073741823;break;case 4:B=1e4;break;default:B=5e3}return B=U+B,z={id:x++,callback:G,priorityLevel:z,startTime:U,expirationTime:B,sortIndex:-1},U>T?(z.sortIndex=U,r(p,z),o(m)===null&&z===o(p)&&(k?(_(A),A=-1):k=!0,Q(j,U-T))):(z.sortIndex=B,r(m,z),S||w||(S=!0,X(I))),z},e.unstable_shouldYield=V,e.unstable_wrapCallback=function(z){var G=v;return function(){var U=v;v=G;try{return z.apply(this,arguments)}finally{v=U}}}})(Ec)),Ec}var vp;function bv(){return vp||(vp=1,Nc.exports=wv()),Nc.exports}var wp;function _v(){if(wp)return Kt;wp=1;var e=Ma(),r=bv();function o(t){for(var n="https://reactjs.org/docs/error-decoder.html?invariant="+t,i=1;i<arguments.length;i++)n+="&args[]="+encodeURIComponent(arguments[i]);return"Minified React error #"+t+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,s={};function l(t,n){c(t,n),c(t+"Capture",n)}function c(t,n){for(s[t]=n,t=0;t<n.length;t++)a.add(n[t])}var f=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),m=Object.prototype.hasOwnProperty,p=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,x={},g={};function v(t){return m.call(g,t)?!0:m.call(x,t)?!1:p.test(t)?g[t]=!0:(x[t]=!0,!1)}function w(t,n,i,u){if(i!==null&&i.type===0)return!1;switch(typeof n){case"function":case"symbol":return!0;case"boolean":return u?!1:i!==null?!i.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function S(t,n,i,u){if(n===null||typeof n>"u"||w(t,n,i,u))return!0;if(u)return!1;if(i!==null)switch(i.type){case 3:return!n;case 4:return n===!1;case 5:return isNaN(n);case 6:return isNaN(n)||1>n}return!1}function k(t,n,i,u,h,y,C){this.acceptsBooleans=n===2||n===3||n===4,this.attributeName=u,this.attributeNamespace=h,this.mustUseProperty=i,this.propertyName=t,this.type=n,this.sanitizeURL=y,this.removeEmptyString=C}var N={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){N[t]=new k(t,0,!1,t,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var n=t[0];N[n]=new k(n,1,!1,t[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(t){N[t]=new k(t,2,!1,t.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){N[t]=new k(t,2,!1,t,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){N[t]=new k(t,3,!1,t.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(t){N[t]=new k(t,3,!0,t,null,!1,!1)}),["capture","download"].forEach(function(t){N[t]=new k(t,4,!1,t,null,!1,!1)}),["cols","rows","size","span"].forEach(function(t){N[t]=new k(t,6,!1,t,null,!1,!1)}),["rowSpan","start"].forEach(function(t){N[t]=new k(t,5,!1,t.toLowerCase(),null,!1,!1)});var _=/[\-:]([a-z])/g;function P(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var n=t.replace(_,P);N[n]=new k(n,1,!1,t,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var n=t.replace(_,P);N[n]=new k(n,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(t){var n=t.replace(_,P);N[n]=new k(n,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(t){N[t]=new k(t,1,!1,t.toLowerCase(),null,!1,!1)}),N.xlinkHref=new k("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(t){N[t]=new k(t,1,!1,t.toLowerCase(),null,!0,!0)});function b(t,n,i,u){var h=N.hasOwnProperty(n)?N[n]:null;(h!==null?h.type!==0:u||!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(S(n,i,h,u)&&(i=null),u||h===null?v(n)&&(i===null?t.removeAttribute(n):t.setAttribute(n,""+i)):h.mustUseProperty?t[h.propertyName]=i===null?h.type===3?!1:"":i:(n=h.attributeName,u=h.attributeNamespace,i===null?t.removeAttribute(n):(h=h.type,i=h===3||h===4&&i===!0?"":""+i,u?t.setAttributeNS(u,n,i):t.setAttribute(n,i))))}var j=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,I=Symbol.for("react.element"),D=Symbol.for("react.portal"),R=Symbol.for("react.fragment"),A=Symbol.for("react.strict_mode"),K=Symbol.for("react.profiler"),F=Symbol.for("react.provider"),V=Symbol.for("react.context"),H=Symbol.for("react.forward_ref"),W=Symbol.for("react.suspense"),M=Symbol.for("react.suspense_list"),L=Symbol.for("react.memo"),X=Symbol.for("react.lazy"),Q=Symbol.for("react.offscreen"),z=Symbol.iterator;function G(t){return t===null||typeof t!="object"?null:(t=z&&t[z]||t["@@iterator"],typeof t=="function"?t:null)}var U=Object.assign,T;function B(t){if(T===void 0)try{throw Error()}catch(i){var n=i.stack.trim().match(/\n( *(at )?)/);T=n&&n[1]||""}return`
`+T+t}var oe=!1;function re(t,n){if(!t||oe)return"";oe=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(n)if(n=function(){throw Error()},Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(n,[])}catch(ne){var u=ne}Reflect.construct(t,[],n)}else{try{n.call()}catch(ne){u=ne}t.call(n.prototype)}else{try{throw Error()}catch(ne){u=ne}t()}}catch(ne){if(ne&&u&&typeof ne.stack=="string"){for(var h=ne.stack.split(`
`),y=u.stack.split(`
`),C=h.length-1,$=y.length-1;1<=C&&0<=$&&h[C]!==y[$];)$--;for(;1<=C&&0<=$;C--,$--)if(h[C]!==y[$]){if(C!==1||$!==1)do if(C--,$--,0>$||h[C]!==y[$]){var Y=`
`+h[C].replace(" at new "," at ");return t.displayName&&Y.includes("<anonymous>")&&(Y=Y.replace("<anonymous>",t.displayName)),Y}while(1<=C&&0<=$);break}}}finally{oe=!1,Error.prepareStackTrace=i}return(t=t?t.displayName||t.name:"")?B(t):""}function ce(t){switch(t.tag){case 5:return B(t.type);case 16:return B("Lazy");case 13:return B("Suspense");case 19:return B("SuspenseList");case 0:case 2:case 15:return t=re(t.type,!1),t;case 11:return t=re(t.type.render,!1),t;case 1:return t=re(t.type,!0),t;default:return""}}function me(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case R:return"Fragment";case D:return"Portal";case K:return"Profiler";case A:return"StrictMode";case W:return"Suspense";case M:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case V:return(t.displayName||"Context")+".Consumer";case F:return(t._context.displayName||"Context")+".Provider";case H:var n=t.render;return t=t.displayName,t||(t=n.displayName||n.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case L:return n=t.displayName||null,n!==null?n:me(t.type)||"Memo";case X:n=t._payload,t=t._init;try{return me(t(n))}catch{}}return null}function he(t){var n=t.type;switch(t.tag){case 24:return"Cache";case 9:return(n.displayName||"Context")+".Consumer";case 10:return(n._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=n.render,t=t.displayName||t.name||"",n.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return n;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return me(n);case 8:return n===A?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n}return null}function ie(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function pe(t){var n=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function De(t){var n=pe(t)?"checked":"value",i=Object.getOwnPropertyDescriptor(t.constructor.prototype,n),u=""+t[n];if(!t.hasOwnProperty(n)&&typeof i<"u"&&typeof i.get=="function"&&typeof i.set=="function"){var h=i.get,y=i.set;return Object.defineProperty(t,n,{configurable:!0,get:function(){return h.call(this)},set:function(C){u=""+C,y.call(this,C)}}),Object.defineProperty(t,n,{enumerable:i.enumerable}),{getValue:function(){return u},setValue:function(C){u=""+C},stopTracking:function(){t._valueTracker=null,delete t[n]}}}}function ze(t){t._valueTracker||(t._valueTracker=De(t))}function ye(t){if(!t)return!1;var n=t._valueTracker;if(!n)return!0;var i=n.getValue(),u="";return t&&(u=pe(t)?t.checked?"true":"false":t.value),t=u,t!==i?(n.setValue(t),!0):!1}function Pe(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Be(t,n){var i=n.checked;return U({},n,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:i??t._wrapperState.initialChecked})}function Ze(t,n){var i=n.defaultValue==null?"":n.defaultValue,u=n.checked!=null?n.checked:n.defaultChecked;i=ie(n.value!=null?n.value:i),t._wrapperState={initialChecked:u,initialValue:i,controlled:n.type==="checkbox"||n.type==="radio"?n.checked!=null:n.value!=null}}function Oe(t,n){n=n.checked,n!=null&&b(t,"checked",n,!1)}function ut(t,n){Oe(t,n);var i=ie(n.value),u=n.type;if(i!=null)u==="number"?(i===0&&t.value===""||t.value!=i)&&(t.value=""+i):t.value!==""+i&&(t.value=""+i);else if(u==="submit"||u==="reset"){t.removeAttribute("value");return}n.hasOwnProperty("value")?Pt(t,n.type,i):n.hasOwnProperty("defaultValue")&&Pt(t,n.type,ie(n.defaultValue)),n.checked==null&&n.defaultChecked!=null&&(t.defaultChecked=!!n.defaultChecked)}function Qt(t,n,i){if(n.hasOwnProperty("value")||n.hasOwnProperty("defaultValue")){var u=n.type;if(!(u!=="submit"&&u!=="reset"||n.value!==void 0&&n.value!==null))return;n=""+t._wrapperState.initialValue,i||n===t.value||(t.value=n),t.defaultValue=n}i=t.name,i!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,i!==""&&(t.name=i)}function Pt(t,n,i){(n!=="number"||Pe(t.ownerDocument)!==t)&&(i==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+i&&(t.defaultValue=""+i))}var zt=Array.isArray;function At(t,n,i,u){if(t=t.options,n){n={};for(var h=0;h<i.length;h++)n["$"+i[h]]=!0;for(i=0;i<t.length;i++)h=n.hasOwnProperty("$"+t[i].value),t[i].selected!==h&&(t[i].selected=h),h&&u&&(t[i].defaultSelected=!0)}else{for(i=""+ie(i),n=null,h=0;h<t.length;h++){if(t[h].value===i){t[h].selected=!0,u&&(t[h].defaultSelected=!0);return}n!==null||t[h].disabled||(n=t[h])}n!==null&&(n.selected=!0)}}function Sn(t,n){if(n.dangerouslySetInnerHTML!=null)throw Error(o(91));return U({},n,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function An(t,n){var i=n.value;if(i==null){if(i=n.children,n=n.defaultValue,i!=null){if(n!=null)throw Error(o(92));if(zt(i)){if(1<i.length)throw Error(o(93));i=i[0]}n=i}n==null&&(n=""),i=n}t._wrapperState={initialValue:ie(i)}}function Ot(t,n){var i=ie(n.value),u=ie(n.defaultValue);i!=null&&(i=""+i,i!==t.value&&(t.value=i),n.defaultValue==null&&t.defaultValue!==i&&(t.defaultValue=i)),u!=null&&(t.defaultValue=""+u)}function qt(t){var n=t.textContent;n===t._wrapperState.initialValue&&n!==""&&n!==null&&(t.value=n)}function ln(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Jt(t,n){return t==null||t==="http://www.w3.org/1999/xhtml"?ln(n):t==="http://www.w3.org/2000/svg"&&n==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Nt,Ht=(function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(n,i,u,h){MSApp.execUnsafeLocalFunction(function(){return t(n,i,u,h)})}:t})(function(t,n){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=n;else{for(Nt=Nt||document.createElement("div"),Nt.innerHTML="<svg>"+n.valueOf().toString()+"</svg>",n=Nt.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;n.firstChild;)t.appendChild(n.firstChild)}});function un(t,n){if(n){var i=t.firstChild;if(i&&i===t.lastChild&&i.nodeType===3){i.nodeValue=n;return}}t.textContent=n}var or={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},oo=["Webkit","ms","Moz","O"];Object.keys(or).forEach(function(t){oo.forEach(function(n){n=n+t.charAt(0).toUpperCase()+t.substring(1),or[n]=or[t]})});function $o(t,n,i){return n==null||typeof n=="boolean"||n===""?"":i||typeof n!="number"||n===0||or.hasOwnProperty(t)&&or[t]?(""+n).trim():n+"px"}function Bt(t,n){t=t.style;for(var i in n)if(n.hasOwnProperty(i)){var u=i.indexOf("--")===0,h=$o(i,n[i],u);i==="float"&&(i="cssFloat"),u?t.setProperty(i,h):t[i]=h}}var Fo=U({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Nr(t,n){if(n){if(Fo[t]&&(n.children!=null||n.dangerouslySetInnerHTML!=null))throw Error(o(137,t));if(n.dangerouslySetInnerHTML!=null){if(n.children!=null)throw Error(o(60));if(typeof n.dangerouslySetInnerHTML!="object"||!("__html"in n.dangerouslySetInnerHTML))throw Error(o(61))}if(n.style!=null&&typeof n.style!="object")throw Error(o(62))}}function Er(t,n){if(t.indexOf("-")===-1)return typeof n.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var io=null;function Cr(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var On=null,Nn=null,cn=null;function Ao(t){if(t=Wi(t)){if(typeof On!="function")throw Error(o(280));var n=t.stateNode;n&&(n=ls(n),On(t.stateNode,t.type,n))}}function ao(t){Nn?cn?cn.push(t):cn=[t]:Nn=t}function Oo(){if(Nn){var t=Nn,n=cn;if(cn=Nn=null,Ao(t),n)for(t=0;t<n.length;t++)Ao(n[t])}}function so(t,n){return t(n)}function ir(){}var Hn=!1;function lo(t,n,i){if(Hn)return t(n,i);Hn=!0;try{return so(t,n,i)}finally{Hn=!1,(Nn!==null||cn!==null)&&(ir(),Oo())}}function ar(t,n){var i=t.stateNode;if(i===null)return null;var u=ls(i);if(u===null)return null;i=u[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(t=t.type,u=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!u;break e;default:t=!1}if(t)return null;if(i&&typeof i!="function")throw Error(o(231,n,typeof i));return i}var uo=!1;if(f)try{var O={};Object.defineProperty(O,"passive",{get:function(){uo=!0}}),window.addEventListener("test",O,O),window.removeEventListener("test",O,O)}catch{uo=!1}function q(t,n,i,u,h,y,C,$,Y){var ne=Array.prototype.slice.call(arguments,3);try{n.apply(i,ne)}catch(le){this.onError(le)}}var te=!1,se=null,de=!1,Se=null,xe={onError:function(t){te=!0,se=t}};function _e(t,n,i,u,h,y,C,$,Y){te=!1,se=null,q.apply(xe,arguments)}function Ce(t,n,i,u,h,y,C,$,Y){if(_e.apply(this,arguments),te){if(te){var ne=se;te=!1,se=null}else throw Error(o(198));de||(de=!0,Se=ne)}}function we(t){var n=t,i=t;if(t.alternate)for(;n.return;)n=n.return;else{t=n;do n=t,(n.flags&4098)!==0&&(i=n.return),t=n.return;while(t)}return n.tag===3?i:null}function Re(t){if(t.tag===13){var n=t.memoizedState;if(n===null&&(t=t.alternate,t!==null&&(n=t.memoizedState)),n!==null)return n.dehydrated}return null}function Ee(t){if(we(t)!==t)throw Error(o(188))}function He(t){var n=t.alternate;if(!n){if(n=we(t),n===null)throw Error(o(188));return n!==t?null:t}for(var i=t,u=n;;){var h=i.return;if(h===null)break;var y=h.alternate;if(y===null){if(u=h.return,u!==null){i=u;continue}break}if(h.child===y.child){for(y=h.child;y;){if(y===i)return Ee(h),t;if(y===u)return Ee(h),n;y=y.sibling}throw Error(o(188))}if(i.return!==u.return)i=h,u=y;else{for(var C=!1,$=h.child;$;){if($===i){C=!0,i=h,u=y;break}if($===u){C=!0,u=h,i=y;break}$=$.sibling}if(!C){for($=y.child;$;){if($===i){C=!0,i=y,u=h;break}if($===u){C=!0,u=y,i=h;break}$=$.sibling}if(!C)throw Error(o(189))}}if(i.alternate!==u)throw Error(o(190))}if(i.tag!==3)throw Error(o(188));return i.stateNode.current===i?t:n}function Fe(t){return t=He(t),t!==null?ct(t):null}function ct(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var n=ct(t);if(n!==null)return n;t=t.sibling}return null}var it=r.unstable_scheduleCallback,ht=r.unstable_cancelCallback,Xe=r.unstable_shouldYield,Et=r.unstable_requestPaint,Ge=r.unstable_now,sr=r.unstable_getCurrentPriorityLevel,Vt=r.unstable_ImmediatePriority,It=r.unstable_UserBlockingPriority,Bn=r.unstable_NormalPriority,lr=r.unstable_LowPriority,dn=r.unstable_IdlePriority,fn=null,Ct=null;function Ae(t){if(Ct&&typeof Ct.onCommitFiberRoot=="function")try{Ct.onCommitFiberRoot(fn,t,void 0,(t.current.flags&128)===128)}catch{}}var Ke=Math.clz32?Math.clz32:qe,Vn=Math.log,En=Math.LN2;function qe(t){return t>>>=0,t===0?32:31-(Vn(t)/En|0)|0}var Cn=64,ur=4194304;function Un(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Ho(t,n){var i=t.pendingLanes;if(i===0)return 0;var u=0,h=t.suspendedLanes,y=t.pingedLanes,C=i&268435455;if(C!==0){var $=C&~h;$!==0?u=Un($):(y&=C,y!==0&&(u=Un(y)))}else C=i&~h,C!==0?u=Un(C):y!==0&&(u=Un(y));if(u===0)return 0;if(n!==0&&n!==u&&(n&h)===0&&(h=u&-u,y=n&-n,h>=y||h===16&&(y&4194240)!==0))return n;if((u&4)!==0&&(u|=i&16),n=t.entangledLanes,n!==0)for(t=t.entanglements,n&=u;0<n;)i=31-Ke(n),h=1<<i,u|=t[i],n&=~h;return u}function Wa(t,n){switch(t){case 1:case 2:case 4:return n+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Vl(t,n){for(var i=t.suspendedLanes,u=t.pingedLanes,h=t.expirationTimes,y=t.pendingLanes;0<y;){var C=31-Ke(y),$=1<<C,Y=h[C];Y===-1?(($&i)===0||($&u)!==0)&&(h[C]=Wa($,n)):Y<=n&&(t.expiredLanes|=$),y&=~$}}function ki(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Bo(){var t=Cn;return Cn<<=1,(Cn&4194240)===0&&(Cn=64),t}function ji(t){for(var n=[],i=0;31>i;i++)n.push(t);return n}function co(t,n,i){t.pendingLanes|=n,n!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,n=31-Ke(n),t[n]=i}function Xa(t,n){var i=t.pendingLanes&~n;t.pendingLanes=n,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=n,t.mutableReadLanes&=n,t.entangledLanes&=n,n=t.entanglements;var u=t.eventTimes;for(t=t.expirationTimes;0<i;){var h=31-Ke(i),y=1<<h;n[h]=0,u[h]=-1,t[h]=-1,i&=~y}}function Ul(t,n){var i=t.entangledLanes|=n;for(t=t.entanglements;i;){var u=31-Ke(i),h=1<<u;h&n|t[u]&n&&(t[u]|=n),i&=~h}}var Qe=0;function Wd(t){return t&=-t,1<t?4<t?(t&268435455)!==0?16:536870912:4:1}var Xd,Wl,Yd,Gd,Kd,Xl=!1,Ya=[],kr=null,jr=null,Pr=null,Pi=new Map,Ri=new Map,Rr=[],$y="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Zd(t,n){switch(t){case"focusin":case"focusout":kr=null;break;case"dragenter":case"dragleave":jr=null;break;case"mouseover":case"mouseout":Pr=null;break;case"pointerover":case"pointerout":Pi.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ri.delete(n.pointerId)}}function Mi(t,n,i,u,h,y){return t===null||t.nativeEvent!==y?(t={blockedOn:n,domEventName:i,eventSystemFlags:u,nativeEvent:y,targetContainers:[h]},n!==null&&(n=Wi(n),n!==null&&Wl(n)),t):(t.eventSystemFlags|=u,n=t.targetContainers,h!==null&&n.indexOf(h)===-1&&n.push(h),t)}function Fy(t,n,i,u,h){switch(n){case"focusin":return kr=Mi(kr,t,n,i,u,h),!0;case"dragenter":return jr=Mi(jr,t,n,i,u,h),!0;case"mouseover":return Pr=Mi(Pr,t,n,i,u,h),!0;case"pointerover":var y=h.pointerId;return Pi.set(y,Mi(Pi.get(y)||null,t,n,i,u,h)),!0;case"gotpointercapture":return y=h.pointerId,Ri.set(y,Mi(Ri.get(y)||null,t,n,i,u,h)),!0}return!1}function Qd(t){var n=fo(t.target);if(n!==null){var i=we(n);if(i!==null){if(n=i.tag,n===13){if(n=Re(i),n!==null){t.blockedOn=n,Kd(t.priority,function(){Yd(i)});return}}else if(n===3&&i.stateNode.current.memoizedState.isDehydrated){t.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ga(t){if(t.blockedOn!==null)return!1;for(var n=t.targetContainers;0<n.length;){var i=Gl(t.domEventName,t.eventSystemFlags,n[0],t.nativeEvent);if(i===null){i=t.nativeEvent;var u=new i.constructor(i.type,i);io=u,i.target.dispatchEvent(u),io=null}else return n=Wi(i),n!==null&&Wl(n),t.blockedOn=i,!1;n.shift()}return!0}function qd(t,n,i){Ga(t)&&i.delete(n)}function Ay(){Xl=!1,kr!==null&&Ga(kr)&&(kr=null),jr!==null&&Ga(jr)&&(jr=null),Pr!==null&&Ga(Pr)&&(Pr=null),Pi.forEach(qd),Ri.forEach(qd)}function Ti(t,n){t.blockedOn===n&&(t.blockedOn=null,Xl||(Xl=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Ay)))}function Di(t){function n(h){return Ti(h,t)}if(0<Ya.length){Ti(Ya[0],t);for(var i=1;i<Ya.length;i++){var u=Ya[i];u.blockedOn===t&&(u.blockedOn=null)}}for(kr!==null&&Ti(kr,t),jr!==null&&Ti(jr,t),Pr!==null&&Ti(Pr,t),Pi.forEach(n),Ri.forEach(n),i=0;i<Rr.length;i++)u=Rr[i],u.blockedOn===t&&(u.blockedOn=null);for(;0<Rr.length&&(i=Rr[0],i.blockedOn===null);)Qd(i),i.blockedOn===null&&Rr.shift()}var Vo=j.ReactCurrentBatchConfig,Ka=!0;function Oy(t,n,i,u){var h=Qe,y=Vo.transition;Vo.transition=null;try{Qe=1,Yl(t,n,i,u)}finally{Qe=h,Vo.transition=y}}function Hy(t,n,i,u){var h=Qe,y=Vo.transition;Vo.transition=null;try{Qe=4,Yl(t,n,i,u)}finally{Qe=h,Vo.transition=y}}function Yl(t,n,i,u){if(Ka){var h=Gl(t,n,i,u);if(h===null)du(t,n,u,Za,i),Zd(t,u);else if(Fy(h,t,n,i,u))u.stopPropagation();else if(Zd(t,u),n&4&&-1<$y.indexOf(t)){for(;h!==null;){var y=Wi(h);if(y!==null&&Xd(y),y=Gl(t,n,i,u),y===null&&du(t,n,u,Za,i),y===h)break;h=y}h!==null&&u.stopPropagation()}else du(t,n,u,null,i)}}var Za=null;function Gl(t,n,i,u){if(Za=null,t=Cr(u),t=fo(t),t!==null)if(n=we(t),n===null)t=null;else if(i=n.tag,i===13){if(t=Re(n),t!==null)return t;t=null}else if(i===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;t=null}else n!==t&&(t=null);return Za=t,null}function Jd(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(sr()){case Vt:return 1;case It:return 4;case Bn:case lr:return 16;case dn:return 536870912;default:return 16}default:return 16}}var Mr=null,Kl=null,Qa=null;function ef(){if(Qa)return Qa;var t,n=Kl,i=n.length,u,h="value"in Mr?Mr.value:Mr.textContent,y=h.length;for(t=0;t<i&&n[t]===h[t];t++);var C=i-t;for(u=1;u<=C&&n[i-u]===h[y-u];u++);return Qa=h.slice(t,1<u?1-u:void 0)}function qa(t){var n=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&n===13&&(t=13)):t=n,t===10&&(t=13),32<=t||t===13?t:0}function Ja(){return!0}function tf(){return!1}function en(t){function n(i,u,h,y,C){this._reactName=i,this._targetInst=h,this.type=u,this.nativeEvent=y,this.target=C,this.currentTarget=null;for(var $ in t)t.hasOwnProperty($)&&(i=t[$],this[$]=i?i(y):y[$]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?Ja:tf,this.isPropagationStopped=tf,this}return U(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=Ja)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=Ja)},persist:function(){},isPersistent:Ja}),n}var Uo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Zl=en(Uo),Li=U({},Uo,{view:0,detail:0}),By=en(Li),Ql,ql,zi,es=U({},Li,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:eu,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==zi&&(zi&&t.type==="mousemove"?(Ql=t.screenX-zi.screenX,ql=t.screenY-zi.screenY):ql=Ql=0,zi=t),Ql)},movementY:function(t){return"movementY"in t?t.movementY:ql}}),nf=en(es),Vy=U({},es,{dataTransfer:0}),Uy=en(Vy),Wy=U({},Li,{relatedTarget:0}),Jl=en(Wy),Xy=U({},Uo,{animationName:0,elapsedTime:0,pseudoElement:0}),Yy=en(Xy),Gy=U({},Uo,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Ky=en(Gy),Zy=U({},Uo,{data:0}),rf=en(Zy),Qy={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},qy={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Jy={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ex(t){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(t):(t=Jy[t])?!!n[t]:!1}function eu(){return ex}var tx=U({},Li,{key:function(t){if(t.key){var n=Qy[t.key]||t.key;if(n!=="Unidentified")return n}return t.type==="keypress"?(t=qa(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?qy[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:eu,charCode:function(t){return t.type==="keypress"?qa(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?qa(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),nx=en(tx),rx=U({},es,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),of=en(rx),ox=U({},Li,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:eu}),ix=en(ox),ax=U({},Uo,{propertyName:0,elapsedTime:0,pseudoElement:0}),sx=en(ax),lx=U({},es,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),ux=en(lx),cx=[9,13,27,32],tu=f&&"CompositionEvent"in window,Ii=null;f&&"documentMode"in document&&(Ii=document.documentMode);var dx=f&&"TextEvent"in window&&!Ii,af=f&&(!tu||Ii&&8<Ii&&11>=Ii),sf=" ",lf=!1;function uf(t,n){switch(t){case"keyup":return cx.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function cf(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Wo=!1;function fx(t,n){switch(t){case"compositionend":return cf(n);case"keypress":return n.which!==32?null:(lf=!0,sf);case"textInput":return t=n.data,t===sf&&lf?null:t;default:return null}}function hx(t,n){if(Wo)return t==="compositionend"||!tu&&uf(t,n)?(t=ef(),Qa=Kl=Mr=null,Wo=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return af&&n.locale!=="ko"?null:n.data;default:return null}}var px={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function df(t){var n=t&&t.nodeName&&t.nodeName.toLowerCase();return n==="input"?!!px[t.type]:n==="textarea"}function ff(t,n,i,u){ao(u),n=is(n,"onChange"),0<n.length&&(i=new Zl("onChange","change",null,i,u),t.push({event:i,listeners:n}))}var $i=null,Fi=null;function mx(t){Rf(t,0)}function ts(t){var n=Zo(t);if(ye(n))return t}function gx(t,n){if(t==="change")return n}var hf=!1;if(f){var nu;if(f){var ru="oninput"in document;if(!ru){var pf=document.createElement("div");pf.setAttribute("oninput","return;"),ru=typeof pf.oninput=="function"}nu=ru}else nu=!1;hf=nu&&(!document.documentMode||9<document.documentMode)}function mf(){$i&&($i.detachEvent("onpropertychange",gf),Fi=$i=null)}function gf(t){if(t.propertyName==="value"&&ts(Fi)){var n=[];ff(n,Fi,t,Cr(t)),lo(mx,n)}}function yx(t,n,i){t==="focusin"?(mf(),$i=n,Fi=i,$i.attachEvent("onpropertychange",gf)):t==="focusout"&&mf()}function xx(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return ts(Fi)}function vx(t,n){if(t==="click")return ts(n)}function wx(t,n){if(t==="input"||t==="change")return ts(n)}function bx(t,n){return t===n&&(t!==0||1/t===1/n)||t!==t&&n!==n}var kn=typeof Object.is=="function"?Object.is:bx;function Ai(t,n){if(kn(t,n))return!0;if(typeof t!="object"||t===null||typeof n!="object"||n===null)return!1;var i=Object.keys(t),u=Object.keys(n);if(i.length!==u.length)return!1;for(u=0;u<i.length;u++){var h=i[u];if(!m.call(n,h)||!kn(t[h],n[h]))return!1}return!0}function yf(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function xf(t,n){var i=yf(t);t=0;for(var u;i;){if(i.nodeType===3){if(u=t+i.textContent.length,t<=n&&u>=n)return{node:i,offset:n-t};t=u}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=yf(i)}}function vf(t,n){return t&&n?t===n?!0:t&&t.nodeType===3?!1:n&&n.nodeType===3?vf(t,n.parentNode):"contains"in t?t.contains(n):t.compareDocumentPosition?!!(t.compareDocumentPosition(n)&16):!1:!1}function wf(){for(var t=window,n=Pe();n instanceof t.HTMLIFrameElement;){try{var i=typeof n.contentWindow.location.href=="string"}catch{i=!1}if(i)t=n.contentWindow;else break;n=Pe(t.document)}return n}function ou(t){var n=t&&t.nodeName&&t.nodeName.toLowerCase();return n&&(n==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||n==="textarea"||t.contentEditable==="true")}function _x(t){var n=wf(),i=t.focusedElem,u=t.selectionRange;if(n!==i&&i&&i.ownerDocument&&vf(i.ownerDocument.documentElement,i)){if(u!==null&&ou(i)){if(n=u.start,t=u.end,t===void 0&&(t=n),"selectionStart"in i)i.selectionStart=n,i.selectionEnd=Math.min(t,i.value.length);else if(t=(n=i.ownerDocument||document)&&n.defaultView||window,t.getSelection){t=t.getSelection();var h=i.textContent.length,y=Math.min(u.start,h);u=u.end===void 0?y:Math.min(u.end,h),!t.extend&&y>u&&(h=u,u=y,y=h),h=xf(i,y);var C=xf(i,u);h&&C&&(t.rangeCount!==1||t.anchorNode!==h.node||t.anchorOffset!==h.offset||t.focusNode!==C.node||t.focusOffset!==C.offset)&&(n=n.createRange(),n.setStart(h.node,h.offset),t.removeAllRanges(),y>u?(t.addRange(n),t.extend(C.node,C.offset)):(n.setEnd(C.node,C.offset),t.addRange(n)))}}for(n=[],t=i;t=t.parentNode;)t.nodeType===1&&n.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof i.focus=="function"&&i.focus(),i=0;i<n.length;i++)t=n[i],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Sx=f&&"documentMode"in document&&11>=document.documentMode,Xo=null,iu=null,Oi=null,au=!1;function bf(t,n,i){var u=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;au||Xo==null||Xo!==Pe(u)||(u=Xo,"selectionStart"in u&&ou(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Oi&&Ai(Oi,u)||(Oi=u,u=is(iu,"onSelect"),0<u.length&&(n=new Zl("onSelect","select",null,n,i),t.push({event:n,listeners:u}),n.target=Xo)))}function ns(t,n){var i={};return i[t.toLowerCase()]=n.toLowerCase(),i["Webkit"+t]="webkit"+n,i["Moz"+t]="moz"+n,i}var Yo={animationend:ns("Animation","AnimationEnd"),animationiteration:ns("Animation","AnimationIteration"),animationstart:ns("Animation","AnimationStart"),transitionend:ns("Transition","TransitionEnd")},su={},_f={};f&&(_f=document.createElement("div").style,"AnimationEvent"in window||(delete Yo.animationend.animation,delete Yo.animationiteration.animation,delete Yo.animationstart.animation),"TransitionEvent"in window||delete Yo.transitionend.transition);function rs(t){if(su[t])return su[t];if(!Yo[t])return t;var n=Yo[t],i;for(i in n)if(n.hasOwnProperty(i)&&i in _f)return su[t]=n[i];return t}var Sf=rs("animationend"),Nf=rs("animationiteration"),Ef=rs("animationstart"),Cf=rs("transitionend"),kf=new Map,jf="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Tr(t,n){kf.set(t,n),l(n,[t])}for(var lu=0;lu<jf.length;lu++){var uu=jf[lu],Nx=uu.toLowerCase(),Ex=uu[0].toUpperCase()+uu.slice(1);Tr(Nx,"on"+Ex)}Tr(Sf,"onAnimationEnd"),Tr(Nf,"onAnimationIteration"),Tr(Ef,"onAnimationStart"),Tr("dblclick","onDoubleClick"),Tr("focusin","onFocus"),Tr("focusout","onBlur"),Tr(Cf,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Hi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Cx=new Set("cancel close invalid load scroll toggle".split(" ").concat(Hi));function Pf(t,n,i){var u=t.type||"unknown-event";t.currentTarget=i,Ce(u,n,void 0,t),t.currentTarget=null}function Rf(t,n){n=(n&4)!==0;for(var i=0;i<t.length;i++){var u=t[i],h=u.event;u=u.listeners;e:{var y=void 0;if(n)for(var C=u.length-1;0<=C;C--){var $=u[C],Y=$.instance,ne=$.currentTarget;if($=$.listener,Y!==y&&h.isPropagationStopped())break e;Pf(h,$,ne),y=Y}else for(C=0;C<u.length;C++){if($=u[C],Y=$.instance,ne=$.currentTarget,$=$.listener,Y!==y&&h.isPropagationStopped())break e;Pf(h,$,ne),y=Y}}}if(de)throw t=Se,de=!1,Se=null,t}function et(t,n){var i=n[yu];i===void 0&&(i=n[yu]=new Set);var u=t+"__bubble";i.has(u)||(Mf(n,t,2,!1),i.add(u))}function cu(t,n,i){var u=0;n&&(u|=4),Mf(i,t,u,n)}var os="_reactListening"+Math.random().toString(36).slice(2);function Bi(t){if(!t[os]){t[os]=!0,a.forEach(function(i){i!=="selectionchange"&&(Cx.has(i)||cu(i,!1,t),cu(i,!0,t))});var n=t.nodeType===9?t:t.ownerDocument;n===null||n[os]||(n[os]=!0,cu("selectionchange",!1,n))}}function Mf(t,n,i,u){switch(Jd(n)){case 1:var h=Oy;break;case 4:h=Hy;break;default:h=Yl}i=h.bind(null,n,i,t),h=void 0,!uo||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(h=!0),u?h!==void 0?t.addEventListener(n,i,{capture:!0,passive:h}):t.addEventListener(n,i,!0):h!==void 0?t.addEventListener(n,i,{passive:h}):t.addEventListener(n,i,!1)}function du(t,n,i,u,h){var y=u;if((n&1)===0&&(n&2)===0&&u!==null)e:for(;;){if(u===null)return;var C=u.tag;if(C===3||C===4){var $=u.stateNode.containerInfo;if($===h||$.nodeType===8&&$.parentNode===h)break;if(C===4)for(C=u.return;C!==null;){var Y=C.tag;if((Y===3||Y===4)&&(Y=C.stateNode.containerInfo,Y===h||Y.nodeType===8&&Y.parentNode===h))return;C=C.return}for(;$!==null;){if(C=fo($),C===null)return;if(Y=C.tag,Y===5||Y===6){u=y=C;continue e}$=$.parentNode}}u=u.return}lo(function(){var ne=y,le=Cr(i),ue=[];e:{var ae=kf.get(t);if(ae!==void 0){var ge=Zl,be=t;switch(t){case"keypress":if(qa(i)===0)break e;case"keydown":case"keyup":ge=nx;break;case"focusin":be="focus",ge=Jl;break;case"focusout":be="blur",ge=Jl;break;case"beforeblur":case"afterblur":ge=Jl;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ge=nf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ge=Uy;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ge=ix;break;case Sf:case Nf:case Ef:ge=Yy;break;case Cf:ge=sx;break;case"scroll":ge=By;break;case"wheel":ge=ux;break;case"copy":case"cut":case"paste":ge=Ky;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ge=of}var Ne=(n&4)!==0,ft=!Ne&&t==="scroll",J=Ne?ae!==null?ae+"Capture":null:ae;Ne=[];for(var Z=ne,ee;Z!==null;){ee=Z;var fe=ee.stateNode;if(ee.tag===5&&fe!==null&&(ee=fe,J!==null&&(fe=ar(Z,J),fe!=null&&Ne.push(Vi(Z,fe,ee)))),ft)break;Z=Z.return}0<Ne.length&&(ae=new ge(ae,be,null,i,le),ue.push({event:ae,listeners:Ne}))}}if((n&7)===0){e:{if(ae=t==="mouseover"||t==="pointerover",ge=t==="mouseout"||t==="pointerout",ae&&i!==io&&(be=i.relatedTarget||i.fromElement)&&(fo(be)||be[cr]))break e;if((ge||ae)&&(ae=le.window===le?le:(ae=le.ownerDocument)?ae.defaultView||ae.parentWindow:window,ge?(be=i.relatedTarget||i.toElement,ge=ne,be=be?fo(be):null,be!==null&&(ft=we(be),be!==ft||be.tag!==5&&be.tag!==6)&&(be=null)):(ge=null,be=ne),ge!==be)){if(Ne=nf,fe="onMouseLeave",J="onMouseEnter",Z="mouse",(t==="pointerout"||t==="pointerover")&&(Ne=of,fe="onPointerLeave",J="onPointerEnter",Z="pointer"),ft=ge==null?ae:Zo(ge),ee=be==null?ae:Zo(be),ae=new Ne(fe,Z+"leave",ge,i,le),ae.target=ft,ae.relatedTarget=ee,fe=null,fo(le)===ne&&(Ne=new Ne(J,Z+"enter",be,i,le),Ne.target=ee,Ne.relatedTarget=ft,fe=Ne),ft=fe,ge&&be)t:{for(Ne=ge,J=be,Z=0,ee=Ne;ee;ee=Go(ee))Z++;for(ee=0,fe=J;fe;fe=Go(fe))ee++;for(;0<Z-ee;)Ne=Go(Ne),Z--;for(;0<ee-Z;)J=Go(J),ee--;for(;Z--;){if(Ne===J||J!==null&&Ne===J.alternate)break t;Ne=Go(Ne),J=Go(J)}Ne=null}else Ne=null;ge!==null&&Tf(ue,ae,ge,Ne,!1),be!==null&&ft!==null&&Tf(ue,ft,be,Ne,!0)}}e:{if(ae=ne?Zo(ne):window,ge=ae.nodeName&&ae.nodeName.toLowerCase(),ge==="select"||ge==="input"&&ae.type==="file")var ke=gx;else if(df(ae))if(hf)ke=wx;else{ke=xx;var Me=yx}else(ge=ae.nodeName)&&ge.toLowerCase()==="input"&&(ae.type==="checkbox"||ae.type==="radio")&&(ke=vx);if(ke&&(ke=ke(t,ne))){ff(ue,ke,i,le);break e}Me&&Me(t,ae,ne),t==="focusout"&&(Me=ae._wrapperState)&&Me.controlled&&ae.type==="number"&&Pt(ae,"number",ae.value)}switch(Me=ne?Zo(ne):window,t){case"focusin":(df(Me)||Me.contentEditable==="true")&&(Xo=Me,iu=ne,Oi=null);break;case"focusout":Oi=iu=Xo=null;break;case"mousedown":au=!0;break;case"contextmenu":case"mouseup":case"dragend":au=!1,bf(ue,i,le);break;case"selectionchange":if(Sx)break;case"keydown":case"keyup":bf(ue,i,le)}var Te;if(tu)e:{switch(t){case"compositionstart":var Le="onCompositionStart";break e;case"compositionend":Le="onCompositionEnd";break e;case"compositionupdate":Le="onCompositionUpdate";break e}Le=void 0}else Wo?uf(t,i)&&(Le="onCompositionEnd"):t==="keydown"&&i.keyCode===229&&(Le="onCompositionStart");Le&&(af&&i.locale!=="ko"&&(Wo||Le!=="onCompositionStart"?Le==="onCompositionEnd"&&Wo&&(Te=ef()):(Mr=le,Kl="value"in Mr?Mr.value:Mr.textContent,Wo=!0)),Me=is(ne,Le),0<Me.length&&(Le=new rf(Le,t,null,i,le),ue.push({event:Le,listeners:Me}),Te?Le.data=Te:(Te=cf(i),Te!==null&&(Le.data=Te)))),(Te=dx?fx(t,i):hx(t,i))&&(ne=is(ne,"onBeforeInput"),0<ne.length&&(le=new rf("onBeforeInput","beforeinput",null,i,le),ue.push({event:le,listeners:ne}),le.data=Te))}Rf(ue,n)})}function Vi(t,n,i){return{instance:t,listener:n,currentTarget:i}}function is(t,n){for(var i=n+"Capture",u=[];t!==null;){var h=t,y=h.stateNode;h.tag===5&&y!==null&&(h=y,y=ar(t,i),y!=null&&u.unshift(Vi(t,y,h)),y=ar(t,n),y!=null&&u.push(Vi(t,y,h))),t=t.return}return u}function Go(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Tf(t,n,i,u,h){for(var y=n._reactName,C=[];i!==null&&i!==u;){var $=i,Y=$.alternate,ne=$.stateNode;if(Y!==null&&Y===u)break;$.tag===5&&ne!==null&&($=ne,h?(Y=ar(i,y),Y!=null&&C.unshift(Vi(i,Y,$))):h||(Y=ar(i,y),Y!=null&&C.push(Vi(i,Y,$)))),i=i.return}C.length!==0&&t.push({event:n,listeners:C})}var kx=/\r\n?/g,jx=/\u0000|\uFFFD/g;function Df(t){return(typeof t=="string"?t:""+t).replace(kx,`
`).replace(jx,"")}function as(t,n,i){if(n=Df(n),Df(t)!==n&&i)throw Error(o(425))}function ss(){}var fu=null,hu=null;function pu(t,n){return t==="textarea"||t==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var mu=typeof setTimeout=="function"?setTimeout:void 0,Px=typeof clearTimeout=="function"?clearTimeout:void 0,Lf=typeof Promise=="function"?Promise:void 0,Rx=typeof queueMicrotask=="function"?queueMicrotask:typeof Lf<"u"?function(t){return Lf.resolve(null).then(t).catch(Mx)}:mu;function Mx(t){setTimeout(function(){throw t})}function gu(t,n){var i=n,u=0;do{var h=i.nextSibling;if(t.removeChild(i),h&&h.nodeType===8)if(i=h.data,i==="/$"){if(u===0){t.removeChild(h),Di(n);return}u--}else i!=="$"&&i!=="$?"&&i!=="$!"||u++;i=h}while(i);Di(n)}function Dr(t){for(;t!=null;t=t.nextSibling){var n=t.nodeType;if(n===1||n===3)break;if(n===8){if(n=t.data,n==="$"||n==="$!"||n==="$?")break;if(n==="/$")return null}}return t}function zf(t){t=t.previousSibling;for(var n=0;t;){if(t.nodeType===8){var i=t.data;if(i==="$"||i==="$!"||i==="$?"){if(n===0)return t;n--}else i==="/$"&&n++}t=t.previousSibling}return null}var Ko=Math.random().toString(36).slice(2),Wn="__reactFiber$"+Ko,Ui="__reactProps$"+Ko,cr="__reactContainer$"+Ko,yu="__reactEvents$"+Ko,Tx="__reactListeners$"+Ko,Dx="__reactHandles$"+Ko;function fo(t){var n=t[Wn];if(n)return n;for(var i=t.parentNode;i;){if(n=i[cr]||i[Wn]){if(i=n.alternate,n.child!==null||i!==null&&i.child!==null)for(t=zf(t);t!==null;){if(i=t[Wn])return i;t=zf(t)}return n}t=i,i=t.parentNode}return null}function Wi(t){return t=t[Wn]||t[cr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Zo(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(o(33))}function ls(t){return t[Ui]||null}var xu=[],Qo=-1;function Lr(t){return{current:t}}function tt(t){0>Qo||(t.current=xu[Qo],xu[Qo]=null,Qo--)}function Je(t,n){Qo++,xu[Qo]=t.current,t.current=n}var zr={},Rt=Lr(zr),Ut=Lr(!1),ho=zr;function qo(t,n){var i=t.type.contextTypes;if(!i)return zr;var u=t.stateNode;if(u&&u.__reactInternalMemoizedUnmaskedChildContext===n)return u.__reactInternalMemoizedMaskedChildContext;var h={},y;for(y in i)h[y]=n[y];return u&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=n,t.__reactInternalMemoizedMaskedChildContext=h),h}function Wt(t){return t=t.childContextTypes,t!=null}function us(){tt(Ut),tt(Rt)}function If(t,n,i){if(Rt.current!==zr)throw Error(o(168));Je(Rt,n),Je(Ut,i)}function $f(t,n,i){var u=t.stateNode;if(n=n.childContextTypes,typeof u.getChildContext!="function")return i;u=u.getChildContext();for(var h in u)if(!(h in n))throw Error(o(108,he(t)||"Unknown",h));return U({},i,u)}function cs(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||zr,ho=Rt.current,Je(Rt,t),Je(Ut,Ut.current),!0}function Ff(t,n,i){var u=t.stateNode;if(!u)throw Error(o(169));i?(t=$f(t,n,ho),u.__reactInternalMemoizedMergedChildContext=t,tt(Ut),tt(Rt),Je(Rt,t)):tt(Ut),Je(Ut,i)}var dr=null,ds=!1,vu=!1;function Af(t){dr===null?dr=[t]:dr.push(t)}function Lx(t){ds=!0,Af(t)}function Ir(){if(!vu&&dr!==null){vu=!0;var t=0,n=Qe;try{var i=dr;for(Qe=1;t<i.length;t++){var u=i[t];do u=u(!0);while(u!==null)}dr=null,ds=!1}catch(h){throw dr!==null&&(dr=dr.slice(t+1)),it(Vt,Ir),h}finally{Qe=n,vu=!1}}return null}var Jo=[],ei=0,fs=null,hs=0,hn=[],pn=0,po=null,fr=1,hr="";function mo(t,n){Jo[ei++]=hs,Jo[ei++]=fs,fs=t,hs=n}function Of(t,n,i){hn[pn++]=fr,hn[pn++]=hr,hn[pn++]=po,po=t;var u=fr;t=hr;var h=32-Ke(u)-1;u&=~(1<<h),i+=1;var y=32-Ke(n)+h;if(30<y){var C=h-h%5;y=(u&(1<<C)-1).toString(32),u>>=C,h-=C,fr=1<<32-Ke(n)+h|i<<h|u,hr=y+t}else fr=1<<y|i<<h|u,hr=t}function wu(t){t.return!==null&&(mo(t,1),Of(t,1,0))}function bu(t){for(;t===fs;)fs=Jo[--ei],Jo[ei]=null,hs=Jo[--ei],Jo[ei]=null;for(;t===po;)po=hn[--pn],hn[pn]=null,hr=hn[--pn],hn[pn]=null,fr=hn[--pn],hn[pn]=null}var tn=null,nn=null,nt=!1,jn=null;function Hf(t,n){var i=xn(5,null,null,0);i.elementType="DELETED",i.stateNode=n,i.return=t,n=t.deletions,n===null?(t.deletions=[i],t.flags|=16):n.push(i)}function Bf(t,n){switch(t.tag){case 5:var i=t.type;return n=n.nodeType!==1||i.toLowerCase()!==n.nodeName.toLowerCase()?null:n,n!==null?(t.stateNode=n,tn=t,nn=Dr(n.firstChild),!0):!1;case 6:return n=t.pendingProps===""||n.nodeType!==3?null:n,n!==null?(t.stateNode=n,tn=t,nn=null,!0):!1;case 13:return n=n.nodeType!==8?null:n,n!==null?(i=po!==null?{id:fr,overflow:hr}:null,t.memoizedState={dehydrated:n,treeContext:i,retryLane:1073741824},i=xn(18,null,null,0),i.stateNode=n,i.return=t,t.child=i,tn=t,nn=null,!0):!1;default:return!1}}function _u(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Su(t){if(nt){var n=nn;if(n){var i=n;if(!Bf(t,n)){if(_u(t))throw Error(o(418));n=Dr(i.nextSibling);var u=tn;n&&Bf(t,n)?Hf(u,i):(t.flags=t.flags&-4097|2,nt=!1,tn=t)}}else{if(_u(t))throw Error(o(418));t.flags=t.flags&-4097|2,nt=!1,tn=t}}}function Vf(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;tn=t}function ps(t){if(t!==tn)return!1;if(!nt)return Vf(t),nt=!0,!1;var n;if((n=t.tag!==3)&&!(n=t.tag!==5)&&(n=t.type,n=n!=="head"&&n!=="body"&&!pu(t.type,t.memoizedProps)),n&&(n=nn)){if(_u(t))throw Uf(),Error(o(418));for(;n;)Hf(t,n),n=Dr(n.nextSibling)}if(Vf(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(o(317));e:{for(t=t.nextSibling,n=0;t;){if(t.nodeType===8){var i=t.data;if(i==="/$"){if(n===0){nn=Dr(t.nextSibling);break e}n--}else i!=="$"&&i!=="$!"&&i!=="$?"||n++}t=t.nextSibling}nn=null}}else nn=tn?Dr(t.stateNode.nextSibling):null;return!0}function Uf(){for(var t=nn;t;)t=Dr(t.nextSibling)}function ti(){nn=tn=null,nt=!1}function Nu(t){jn===null?jn=[t]:jn.push(t)}var zx=j.ReactCurrentBatchConfig;function Xi(t,n,i){if(t=i.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(i._owner){if(i=i._owner,i){if(i.tag!==1)throw Error(o(309));var u=i.stateNode}if(!u)throw Error(o(147,t));var h=u,y=""+t;return n!==null&&n.ref!==null&&typeof n.ref=="function"&&n.ref._stringRef===y?n.ref:(n=function(C){var $=h.refs;C===null?delete $[y]:$[y]=C},n._stringRef=y,n)}if(typeof t!="string")throw Error(o(284));if(!i._owner)throw Error(o(290,t))}return t}function ms(t,n){throw t=Object.prototype.toString.call(n),Error(o(31,t==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":t))}function Wf(t){var n=t._init;return n(t._payload)}function Xf(t){function n(J,Z){if(t){var ee=J.deletions;ee===null?(J.deletions=[Z],J.flags|=16):ee.push(Z)}}function i(J,Z){if(!t)return null;for(;Z!==null;)n(J,Z),Z=Z.sibling;return null}function u(J,Z){for(J=new Map;Z!==null;)Z.key!==null?J.set(Z.key,Z):J.set(Z.index,Z),Z=Z.sibling;return J}function h(J,Z){return J=Ur(J,Z),J.index=0,J.sibling=null,J}function y(J,Z,ee){return J.index=ee,t?(ee=J.alternate,ee!==null?(ee=ee.index,ee<Z?(J.flags|=2,Z):ee):(J.flags|=2,Z)):(J.flags|=1048576,Z)}function C(J){return t&&J.alternate===null&&(J.flags|=2),J}function $(J,Z,ee,fe){return Z===null||Z.tag!==6?(Z=mc(ee,J.mode,fe),Z.return=J,Z):(Z=h(Z,ee),Z.return=J,Z)}function Y(J,Z,ee,fe){var ke=ee.type;return ke===R?le(J,Z,ee.props.children,fe,ee.key):Z!==null&&(Z.elementType===ke||typeof ke=="object"&&ke!==null&&ke.$$typeof===X&&Wf(ke)===Z.type)?(fe=h(Z,ee.props),fe.ref=Xi(J,Z,ee),fe.return=J,fe):(fe=As(ee.type,ee.key,ee.props,null,J.mode,fe),fe.ref=Xi(J,Z,ee),fe.return=J,fe)}function ne(J,Z,ee,fe){return Z===null||Z.tag!==4||Z.stateNode.containerInfo!==ee.containerInfo||Z.stateNode.implementation!==ee.implementation?(Z=gc(ee,J.mode,fe),Z.return=J,Z):(Z=h(Z,ee.children||[]),Z.return=J,Z)}function le(J,Z,ee,fe,ke){return Z===null||Z.tag!==7?(Z=So(ee,J.mode,fe,ke),Z.return=J,Z):(Z=h(Z,ee),Z.return=J,Z)}function ue(J,Z,ee){if(typeof Z=="string"&&Z!==""||typeof Z=="number")return Z=mc(""+Z,J.mode,ee),Z.return=J,Z;if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case I:return ee=As(Z.type,Z.key,Z.props,null,J.mode,ee),ee.ref=Xi(J,null,Z),ee.return=J,ee;case D:return Z=gc(Z,J.mode,ee),Z.return=J,Z;case X:var fe=Z._init;return ue(J,fe(Z._payload),ee)}if(zt(Z)||G(Z))return Z=So(Z,J.mode,ee,null),Z.return=J,Z;ms(J,Z)}return null}function ae(J,Z,ee,fe){var ke=Z!==null?Z.key:null;if(typeof ee=="string"&&ee!==""||typeof ee=="number")return ke!==null?null:$(J,Z,""+ee,fe);if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case I:return ee.key===ke?Y(J,Z,ee,fe):null;case D:return ee.key===ke?ne(J,Z,ee,fe):null;case X:return ke=ee._init,ae(J,Z,ke(ee._payload),fe)}if(zt(ee)||G(ee))return ke!==null?null:le(J,Z,ee,fe,null);ms(J,ee)}return null}function ge(J,Z,ee,fe,ke){if(typeof fe=="string"&&fe!==""||typeof fe=="number")return J=J.get(ee)||null,$(Z,J,""+fe,ke);if(typeof fe=="object"&&fe!==null){switch(fe.$$typeof){case I:return J=J.get(fe.key===null?ee:fe.key)||null,Y(Z,J,fe,ke);case D:return J=J.get(fe.key===null?ee:fe.key)||null,ne(Z,J,fe,ke);case X:var Me=fe._init;return ge(J,Z,ee,Me(fe._payload),ke)}if(zt(fe)||G(fe))return J=J.get(ee)||null,le(Z,J,fe,ke,null);ms(Z,fe)}return null}function be(J,Z,ee,fe){for(var ke=null,Me=null,Te=Z,Le=Z=0,bt=null;Te!==null&&Le<ee.length;Le++){Te.index>Le?(bt=Te,Te=null):bt=Te.sibling;var Ye=ae(J,Te,ee[Le],fe);if(Ye===null){Te===null&&(Te=bt);break}t&&Te&&Ye.alternate===null&&n(J,Te),Z=y(Ye,Z,Le),Me===null?ke=Ye:Me.sibling=Ye,Me=Ye,Te=bt}if(Le===ee.length)return i(J,Te),nt&&mo(J,Le),ke;if(Te===null){for(;Le<ee.length;Le++)Te=ue(J,ee[Le],fe),Te!==null&&(Z=y(Te,Z,Le),Me===null?ke=Te:Me.sibling=Te,Me=Te);return nt&&mo(J,Le),ke}for(Te=u(J,Te);Le<ee.length;Le++)bt=ge(Te,J,Le,ee[Le],fe),bt!==null&&(t&&bt.alternate!==null&&Te.delete(bt.key===null?Le:bt.key),Z=y(bt,Z,Le),Me===null?ke=bt:Me.sibling=bt,Me=bt);return t&&Te.forEach(function(Wr){return n(J,Wr)}),nt&&mo(J,Le),ke}function Ne(J,Z,ee,fe){var ke=G(ee);if(typeof ke!="function")throw Error(o(150));if(ee=ke.call(ee),ee==null)throw Error(o(151));for(var Me=ke=null,Te=Z,Le=Z=0,bt=null,Ye=ee.next();Te!==null&&!Ye.done;Le++,Ye=ee.next()){Te.index>Le?(bt=Te,Te=null):bt=Te.sibling;var Wr=ae(J,Te,Ye.value,fe);if(Wr===null){Te===null&&(Te=bt);break}t&&Te&&Wr.alternate===null&&n(J,Te),Z=y(Wr,Z,Le),Me===null?ke=Wr:Me.sibling=Wr,Me=Wr,Te=bt}if(Ye.done)return i(J,Te),nt&&mo(J,Le),ke;if(Te===null){for(;!Ye.done;Le++,Ye=ee.next())Ye=ue(J,Ye.value,fe),Ye!==null&&(Z=y(Ye,Z,Le),Me===null?ke=Ye:Me.sibling=Ye,Me=Ye);return nt&&mo(J,Le),ke}for(Te=u(J,Te);!Ye.done;Le++,Ye=ee.next())Ye=ge(Te,J,Le,Ye.value,fe),Ye!==null&&(t&&Ye.alternate!==null&&Te.delete(Ye.key===null?Le:Ye.key),Z=y(Ye,Z,Le),Me===null?ke=Ye:Me.sibling=Ye,Me=Ye);return t&&Te.forEach(function(pv){return n(J,pv)}),nt&&mo(J,Le),ke}function ft(J,Z,ee,fe){if(typeof ee=="object"&&ee!==null&&ee.type===R&&ee.key===null&&(ee=ee.props.children),typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case I:e:{for(var ke=ee.key,Me=Z;Me!==null;){if(Me.key===ke){if(ke=ee.type,ke===R){if(Me.tag===7){i(J,Me.sibling),Z=h(Me,ee.props.children),Z.return=J,J=Z;break e}}else if(Me.elementType===ke||typeof ke=="object"&&ke!==null&&ke.$$typeof===X&&Wf(ke)===Me.type){i(J,Me.sibling),Z=h(Me,ee.props),Z.ref=Xi(J,Me,ee),Z.return=J,J=Z;break e}i(J,Me);break}else n(J,Me);Me=Me.sibling}ee.type===R?(Z=So(ee.props.children,J.mode,fe,ee.key),Z.return=J,J=Z):(fe=As(ee.type,ee.key,ee.props,null,J.mode,fe),fe.ref=Xi(J,Z,ee),fe.return=J,J=fe)}return C(J);case D:e:{for(Me=ee.key;Z!==null;){if(Z.key===Me)if(Z.tag===4&&Z.stateNode.containerInfo===ee.containerInfo&&Z.stateNode.implementation===ee.implementation){i(J,Z.sibling),Z=h(Z,ee.children||[]),Z.return=J,J=Z;break e}else{i(J,Z);break}else n(J,Z);Z=Z.sibling}Z=gc(ee,J.mode,fe),Z.return=J,J=Z}return C(J);case X:return Me=ee._init,ft(J,Z,Me(ee._payload),fe)}if(zt(ee))return be(J,Z,ee,fe);if(G(ee))return Ne(J,Z,ee,fe);ms(J,ee)}return typeof ee=="string"&&ee!==""||typeof ee=="number"?(ee=""+ee,Z!==null&&Z.tag===6?(i(J,Z.sibling),Z=h(Z,ee),Z.return=J,J=Z):(i(J,Z),Z=mc(ee,J.mode,fe),Z.return=J,J=Z),C(J)):i(J,Z)}return ft}var ni=Xf(!0),Yf=Xf(!1),gs=Lr(null),ys=null,ri=null,Eu=null;function Cu(){Eu=ri=ys=null}function ku(t){var n=gs.current;tt(gs),t._currentValue=n}function ju(t,n,i){for(;t!==null;){var u=t.alternate;if((t.childLanes&n)!==n?(t.childLanes|=n,u!==null&&(u.childLanes|=n)):u!==null&&(u.childLanes&n)!==n&&(u.childLanes|=n),t===i)break;t=t.return}}function oi(t,n){ys=t,Eu=ri=null,t=t.dependencies,t!==null&&t.firstContext!==null&&((t.lanes&n)!==0&&(Xt=!0),t.firstContext=null)}function mn(t){var n=t._currentValue;if(Eu!==t)if(t={context:t,memoizedValue:n,next:null},ri===null){if(ys===null)throw Error(o(308));ri=t,ys.dependencies={lanes:0,firstContext:t}}else ri=ri.next=t;return n}var go=null;function Pu(t){go===null?go=[t]:go.push(t)}function Gf(t,n,i,u){var h=n.interleaved;return h===null?(i.next=i,Pu(n)):(i.next=h.next,h.next=i),n.interleaved=i,pr(t,u)}function pr(t,n){t.lanes|=n;var i=t.alternate;for(i!==null&&(i.lanes|=n),i=t,t=t.return;t!==null;)t.childLanes|=n,i=t.alternate,i!==null&&(i.childLanes|=n),i=t,t=t.return;return i.tag===3?i.stateNode:null}var $r=!1;function Ru(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Kf(t,n){t=t.updateQueue,n.updateQueue===t&&(n.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function mr(t,n){return{eventTime:t,lane:n,tag:0,payload:null,callback:null,next:null}}function Fr(t,n,i){var u=t.updateQueue;if(u===null)return null;if(u=u.shared,(We&2)!==0){var h=u.pending;return h===null?n.next=n:(n.next=h.next,h.next=n),u.pending=n,pr(t,i)}return h=u.interleaved,h===null?(n.next=n,Pu(u)):(n.next=h.next,h.next=n),u.interleaved=n,pr(t,i)}function xs(t,n,i){if(n=n.updateQueue,n!==null&&(n=n.shared,(i&4194240)!==0)){var u=n.lanes;u&=t.pendingLanes,i|=u,n.lanes=i,Ul(t,i)}}function Zf(t,n){var i=t.updateQueue,u=t.alternate;if(u!==null&&(u=u.updateQueue,i===u)){var h=null,y=null;if(i=i.firstBaseUpdate,i!==null){do{var C={eventTime:i.eventTime,lane:i.lane,tag:i.tag,payload:i.payload,callback:i.callback,next:null};y===null?h=y=C:y=y.next=C,i=i.next}while(i!==null);y===null?h=y=n:y=y.next=n}else h=y=n;i={baseState:u.baseState,firstBaseUpdate:h,lastBaseUpdate:y,shared:u.shared,effects:u.effects},t.updateQueue=i;return}t=i.lastBaseUpdate,t===null?i.firstBaseUpdate=n:t.next=n,i.lastBaseUpdate=n}function vs(t,n,i,u){var h=t.updateQueue;$r=!1;var y=h.firstBaseUpdate,C=h.lastBaseUpdate,$=h.shared.pending;if($!==null){h.shared.pending=null;var Y=$,ne=Y.next;Y.next=null,C===null?y=ne:C.next=ne,C=Y;var le=t.alternate;le!==null&&(le=le.updateQueue,$=le.lastBaseUpdate,$!==C&&($===null?le.firstBaseUpdate=ne:$.next=ne,le.lastBaseUpdate=Y))}if(y!==null){var ue=h.baseState;C=0,le=ne=Y=null,$=y;do{var ae=$.lane,ge=$.eventTime;if((u&ae)===ae){le!==null&&(le=le.next={eventTime:ge,lane:0,tag:$.tag,payload:$.payload,callback:$.callback,next:null});e:{var be=t,Ne=$;switch(ae=n,ge=i,Ne.tag){case 1:if(be=Ne.payload,typeof be=="function"){ue=be.call(ge,ue,ae);break e}ue=be;break e;case 3:be.flags=be.flags&-65537|128;case 0:if(be=Ne.payload,ae=typeof be=="function"?be.call(ge,ue,ae):be,ae==null)break e;ue=U({},ue,ae);break e;case 2:$r=!0}}$.callback!==null&&$.lane!==0&&(t.flags|=64,ae=h.effects,ae===null?h.effects=[$]:ae.push($))}else ge={eventTime:ge,lane:ae,tag:$.tag,payload:$.payload,callback:$.callback,next:null},le===null?(ne=le=ge,Y=ue):le=le.next=ge,C|=ae;if($=$.next,$===null){if($=h.shared.pending,$===null)break;ae=$,$=ae.next,ae.next=null,h.lastBaseUpdate=ae,h.shared.pending=null}}while(!0);if(le===null&&(Y=ue),h.baseState=Y,h.firstBaseUpdate=ne,h.lastBaseUpdate=le,n=h.shared.interleaved,n!==null){h=n;do C|=h.lane,h=h.next;while(h!==n)}else y===null&&(h.shared.lanes=0);vo|=C,t.lanes=C,t.memoizedState=ue}}function Qf(t,n,i){if(t=n.effects,n.effects=null,t!==null)for(n=0;n<t.length;n++){var u=t[n],h=u.callback;if(h!==null){if(u.callback=null,u=i,typeof h!="function")throw Error(o(191,h));h.call(u)}}}var Yi={},Xn=Lr(Yi),Gi=Lr(Yi),Ki=Lr(Yi);function yo(t){if(t===Yi)throw Error(o(174));return t}function Mu(t,n){switch(Je(Ki,n),Je(Gi,t),Je(Xn,Yi),t=n.nodeType,t){case 9:case 11:n=(n=n.documentElement)?n.namespaceURI:Jt(null,"");break;default:t=t===8?n.parentNode:n,n=t.namespaceURI||null,t=t.tagName,n=Jt(n,t)}tt(Xn),Je(Xn,n)}function ii(){tt(Xn),tt(Gi),tt(Ki)}function qf(t){yo(Ki.current);var n=yo(Xn.current),i=Jt(n,t.type);n!==i&&(Je(Gi,t),Je(Xn,i))}function Tu(t){Gi.current===t&&(tt(Xn),tt(Gi))}var at=Lr(0);function ws(t){for(var n=t;n!==null;){if(n.tag===13){var i=n.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||i.data==="$?"||i.data==="$!"))return n}else if(n.tag===19&&n.memoizedProps.revealOrder!==void 0){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var Du=[];function Lu(){for(var t=0;t<Du.length;t++)Du[t]._workInProgressVersionPrimary=null;Du.length=0}var bs=j.ReactCurrentDispatcher,zu=j.ReactCurrentBatchConfig,xo=0,st=null,yt=null,vt=null,_s=!1,Zi=!1,Qi=0,Ix=0;function Mt(){throw Error(o(321))}function Iu(t,n){if(n===null)return!1;for(var i=0;i<n.length&&i<t.length;i++)if(!kn(t[i],n[i]))return!1;return!0}function $u(t,n,i,u,h,y){if(xo=y,st=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,bs.current=t===null||t.memoizedState===null?Ox:Hx,t=i(u,h),Zi){y=0;do{if(Zi=!1,Qi=0,25<=y)throw Error(o(301));y+=1,vt=yt=null,n.updateQueue=null,bs.current=Bx,t=i(u,h)}while(Zi)}if(bs.current=Es,n=yt!==null&&yt.next!==null,xo=0,vt=yt=st=null,_s=!1,n)throw Error(o(300));return t}function Fu(){var t=Qi!==0;return Qi=0,t}function Yn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return vt===null?st.memoizedState=vt=t:vt=vt.next=t,vt}function gn(){if(yt===null){var t=st.alternate;t=t!==null?t.memoizedState:null}else t=yt.next;var n=vt===null?st.memoizedState:vt.next;if(n!==null)vt=n,yt=t;else{if(t===null)throw Error(o(310));yt=t,t={memoizedState:yt.memoizedState,baseState:yt.baseState,baseQueue:yt.baseQueue,queue:yt.queue,next:null},vt===null?st.memoizedState=vt=t:vt=vt.next=t}return vt}function qi(t,n){return typeof n=="function"?n(t):n}function Au(t){var n=gn(),i=n.queue;if(i===null)throw Error(o(311));i.lastRenderedReducer=t;var u=yt,h=u.baseQueue,y=i.pending;if(y!==null){if(h!==null){var C=h.next;h.next=y.next,y.next=C}u.baseQueue=h=y,i.pending=null}if(h!==null){y=h.next,u=u.baseState;var $=C=null,Y=null,ne=y;do{var le=ne.lane;if((xo&le)===le)Y!==null&&(Y=Y.next={lane:0,action:ne.action,hasEagerState:ne.hasEagerState,eagerState:ne.eagerState,next:null}),u=ne.hasEagerState?ne.eagerState:t(u,ne.action);else{var ue={lane:le,action:ne.action,hasEagerState:ne.hasEagerState,eagerState:ne.eagerState,next:null};Y===null?($=Y=ue,C=u):Y=Y.next=ue,st.lanes|=le,vo|=le}ne=ne.next}while(ne!==null&&ne!==y);Y===null?C=u:Y.next=$,kn(u,n.memoizedState)||(Xt=!0),n.memoizedState=u,n.baseState=C,n.baseQueue=Y,i.lastRenderedState=u}if(t=i.interleaved,t!==null){h=t;do y=h.lane,st.lanes|=y,vo|=y,h=h.next;while(h!==t)}else h===null&&(i.lanes=0);return[n.memoizedState,i.dispatch]}function Ou(t){var n=gn(),i=n.queue;if(i===null)throw Error(o(311));i.lastRenderedReducer=t;var u=i.dispatch,h=i.pending,y=n.memoizedState;if(h!==null){i.pending=null;var C=h=h.next;do y=t(y,C.action),C=C.next;while(C!==h);kn(y,n.memoizedState)||(Xt=!0),n.memoizedState=y,n.baseQueue===null&&(n.baseState=y),i.lastRenderedState=y}return[y,u]}function Jf(){}function eh(t,n){var i=st,u=gn(),h=n(),y=!kn(u.memoizedState,h);if(y&&(u.memoizedState=h,Xt=!0),u=u.queue,Hu(rh.bind(null,i,u,t),[t]),u.getSnapshot!==n||y||vt!==null&&vt.memoizedState.tag&1){if(i.flags|=2048,Ji(9,nh.bind(null,i,u,h,n),void 0,null),wt===null)throw Error(o(349));(xo&30)!==0||th(i,n,h)}return h}function th(t,n,i){t.flags|=16384,t={getSnapshot:n,value:i},n=st.updateQueue,n===null?(n={lastEffect:null,stores:null},st.updateQueue=n,n.stores=[t]):(i=n.stores,i===null?n.stores=[t]:i.push(t))}function nh(t,n,i,u){n.value=i,n.getSnapshot=u,oh(n)&&ih(t)}function rh(t,n,i){return i(function(){oh(n)&&ih(t)})}function oh(t){var n=t.getSnapshot;t=t.value;try{var i=n();return!kn(t,i)}catch{return!0}}function ih(t){var n=pr(t,1);n!==null&&Tn(n,t,1,-1)}function ah(t){var n=Yn();return typeof t=="function"&&(t=t()),n.memoizedState=n.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:qi,lastRenderedState:t},n.queue=t,t=t.dispatch=Ax.bind(null,st,t),[n.memoizedState,t]}function Ji(t,n,i,u){return t={tag:t,create:n,destroy:i,deps:u,next:null},n=st.updateQueue,n===null?(n={lastEffect:null,stores:null},st.updateQueue=n,n.lastEffect=t.next=t):(i=n.lastEffect,i===null?n.lastEffect=t.next=t:(u=i.next,i.next=t,t.next=u,n.lastEffect=t)),t}function sh(){return gn().memoizedState}function Ss(t,n,i,u){var h=Yn();st.flags|=t,h.memoizedState=Ji(1|n,i,void 0,u===void 0?null:u)}function Ns(t,n,i,u){var h=gn();u=u===void 0?null:u;var y=void 0;if(yt!==null){var C=yt.memoizedState;if(y=C.destroy,u!==null&&Iu(u,C.deps)){h.memoizedState=Ji(n,i,y,u);return}}st.flags|=t,h.memoizedState=Ji(1|n,i,y,u)}function lh(t,n){return Ss(8390656,8,t,n)}function Hu(t,n){return Ns(2048,8,t,n)}function uh(t,n){return Ns(4,2,t,n)}function ch(t,n){return Ns(4,4,t,n)}function dh(t,n){if(typeof n=="function")return t=t(),n(t),function(){n(null)};if(n!=null)return t=t(),n.current=t,function(){n.current=null}}function fh(t,n,i){return i=i!=null?i.concat([t]):null,Ns(4,4,dh.bind(null,n,t),i)}function Bu(){}function hh(t,n){var i=gn();n=n===void 0?null:n;var u=i.memoizedState;return u!==null&&n!==null&&Iu(n,u[1])?u[0]:(i.memoizedState=[t,n],t)}function ph(t,n){var i=gn();n=n===void 0?null:n;var u=i.memoizedState;return u!==null&&n!==null&&Iu(n,u[1])?u[0]:(t=t(),i.memoizedState=[t,n],t)}function mh(t,n,i){return(xo&21)===0?(t.baseState&&(t.baseState=!1,Xt=!0),t.memoizedState=i):(kn(i,n)||(i=Bo(),st.lanes|=i,vo|=i,t.baseState=!0),n)}function $x(t,n){var i=Qe;Qe=i!==0&&4>i?i:4,t(!0);var u=zu.transition;zu.transition={};try{t(!1),n()}finally{Qe=i,zu.transition=u}}function gh(){return gn().memoizedState}function Fx(t,n,i){var u=Br(t);if(i={lane:u,action:i,hasEagerState:!1,eagerState:null,next:null},yh(t))xh(n,i);else if(i=Gf(t,n,i,u),i!==null){var h=Ft();Tn(i,t,u,h),vh(i,n,u)}}function Ax(t,n,i){var u=Br(t),h={lane:u,action:i,hasEagerState:!1,eagerState:null,next:null};if(yh(t))xh(n,h);else{var y=t.alternate;if(t.lanes===0&&(y===null||y.lanes===0)&&(y=n.lastRenderedReducer,y!==null))try{var C=n.lastRenderedState,$=y(C,i);if(h.hasEagerState=!0,h.eagerState=$,kn($,C)){var Y=n.interleaved;Y===null?(h.next=h,Pu(n)):(h.next=Y.next,Y.next=h),n.interleaved=h;return}}catch{}i=Gf(t,n,h,u),i!==null&&(h=Ft(),Tn(i,t,u,h),vh(i,n,u))}}function yh(t){var n=t.alternate;return t===st||n!==null&&n===st}function xh(t,n){Zi=_s=!0;var i=t.pending;i===null?n.next=n:(n.next=i.next,i.next=n),t.pending=n}function vh(t,n,i){if((i&4194240)!==0){var u=n.lanes;u&=t.pendingLanes,i|=u,n.lanes=i,Ul(t,i)}}var Es={readContext:mn,useCallback:Mt,useContext:Mt,useEffect:Mt,useImperativeHandle:Mt,useInsertionEffect:Mt,useLayoutEffect:Mt,useMemo:Mt,useReducer:Mt,useRef:Mt,useState:Mt,useDebugValue:Mt,useDeferredValue:Mt,useTransition:Mt,useMutableSource:Mt,useSyncExternalStore:Mt,useId:Mt,unstable_isNewReconciler:!1},Ox={readContext:mn,useCallback:function(t,n){return Yn().memoizedState=[t,n===void 0?null:n],t},useContext:mn,useEffect:lh,useImperativeHandle:function(t,n,i){return i=i!=null?i.concat([t]):null,Ss(4194308,4,dh.bind(null,n,t),i)},useLayoutEffect:function(t,n){return Ss(4194308,4,t,n)},useInsertionEffect:function(t,n){return Ss(4,2,t,n)},useMemo:function(t,n){var i=Yn();return n=n===void 0?null:n,t=t(),i.memoizedState=[t,n],t},useReducer:function(t,n,i){var u=Yn();return n=i!==void 0?i(n):n,u.memoizedState=u.baseState=n,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:n},u.queue=t,t=t.dispatch=Fx.bind(null,st,t),[u.memoizedState,t]},useRef:function(t){var n=Yn();return t={current:t},n.memoizedState=t},useState:ah,useDebugValue:Bu,useDeferredValue:function(t){return Yn().memoizedState=t},useTransition:function(){var t=ah(!1),n=t[0];return t=$x.bind(null,t[1]),Yn().memoizedState=t,[n,t]},useMutableSource:function(){},useSyncExternalStore:function(t,n,i){var u=st,h=Yn();if(nt){if(i===void 0)throw Error(o(407));i=i()}else{if(i=n(),wt===null)throw Error(o(349));(xo&30)!==0||th(u,n,i)}h.memoizedState=i;var y={value:i,getSnapshot:n};return h.queue=y,lh(rh.bind(null,u,y,t),[t]),u.flags|=2048,Ji(9,nh.bind(null,u,y,i,n),void 0,null),i},useId:function(){var t=Yn(),n=wt.identifierPrefix;if(nt){var i=hr,u=fr;i=(u&~(1<<32-Ke(u)-1)).toString(32)+i,n=":"+n+"R"+i,i=Qi++,0<i&&(n+="H"+i.toString(32)),n+=":"}else i=Ix++,n=":"+n+"r"+i.toString(32)+":";return t.memoizedState=n},unstable_isNewReconciler:!1},Hx={readContext:mn,useCallback:hh,useContext:mn,useEffect:Hu,useImperativeHandle:fh,useInsertionEffect:uh,useLayoutEffect:ch,useMemo:ph,useReducer:Au,useRef:sh,useState:function(){return Au(qi)},useDebugValue:Bu,useDeferredValue:function(t){var n=gn();return mh(n,yt.memoizedState,t)},useTransition:function(){var t=Au(qi)[0],n=gn().memoizedState;return[t,n]},useMutableSource:Jf,useSyncExternalStore:eh,useId:gh,unstable_isNewReconciler:!1},Bx={readContext:mn,useCallback:hh,useContext:mn,useEffect:Hu,useImperativeHandle:fh,useInsertionEffect:uh,useLayoutEffect:ch,useMemo:ph,useReducer:Ou,useRef:sh,useState:function(){return Ou(qi)},useDebugValue:Bu,useDeferredValue:function(t){var n=gn();return yt===null?n.memoizedState=t:mh(n,yt.memoizedState,t)},useTransition:function(){var t=Ou(qi)[0],n=gn().memoizedState;return[t,n]},useMutableSource:Jf,useSyncExternalStore:eh,useId:gh,unstable_isNewReconciler:!1};function Pn(t,n){if(t&&t.defaultProps){n=U({},n),t=t.defaultProps;for(var i in t)n[i]===void 0&&(n[i]=t[i]);return n}return n}function Vu(t,n,i,u){n=t.memoizedState,i=i(u,n),i=i==null?n:U({},n,i),t.memoizedState=i,t.lanes===0&&(t.updateQueue.baseState=i)}var Cs={isMounted:function(t){return(t=t._reactInternals)?we(t)===t:!1},enqueueSetState:function(t,n,i){t=t._reactInternals;var u=Ft(),h=Br(t),y=mr(u,h);y.payload=n,i!=null&&(y.callback=i),n=Fr(t,y,h),n!==null&&(Tn(n,t,h,u),xs(n,t,h))},enqueueReplaceState:function(t,n,i){t=t._reactInternals;var u=Ft(),h=Br(t),y=mr(u,h);y.tag=1,y.payload=n,i!=null&&(y.callback=i),n=Fr(t,y,h),n!==null&&(Tn(n,t,h,u),xs(n,t,h))},enqueueForceUpdate:function(t,n){t=t._reactInternals;var i=Ft(),u=Br(t),h=mr(i,u);h.tag=2,n!=null&&(h.callback=n),n=Fr(t,h,u),n!==null&&(Tn(n,t,u,i),xs(n,t,u))}};function wh(t,n,i,u,h,y,C){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(u,y,C):n.prototype&&n.prototype.isPureReactComponent?!Ai(i,u)||!Ai(h,y):!0}function bh(t,n,i){var u=!1,h=zr,y=n.contextType;return typeof y=="object"&&y!==null?y=mn(y):(h=Wt(n)?ho:Rt.current,u=n.contextTypes,y=(u=u!=null)?qo(t,h):zr),n=new n(i,y),t.memoizedState=n.state!==null&&n.state!==void 0?n.state:null,n.updater=Cs,t.stateNode=n,n._reactInternals=t,u&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=h,t.__reactInternalMemoizedMaskedChildContext=y),n}function _h(t,n,i,u){t=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(i,u),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(i,u),n.state!==t&&Cs.enqueueReplaceState(n,n.state,null)}function Uu(t,n,i,u){var h=t.stateNode;h.props=i,h.state=t.memoizedState,h.refs={},Ru(t);var y=n.contextType;typeof y=="object"&&y!==null?h.context=mn(y):(y=Wt(n)?ho:Rt.current,h.context=qo(t,y)),h.state=t.memoizedState,y=n.getDerivedStateFromProps,typeof y=="function"&&(Vu(t,n,y,i),h.state=t.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof h.getSnapshotBeforeUpdate=="function"||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(n=h.state,typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount(),n!==h.state&&Cs.enqueueReplaceState(h,h.state,null),vs(t,i,h,u),h.state=t.memoizedState),typeof h.componentDidMount=="function"&&(t.flags|=4194308)}function ai(t,n){try{var i="",u=n;do i+=ce(u),u=u.return;while(u);var h=i}catch(y){h=`
Error generating stack: `+y.message+`
`+y.stack}return{value:t,source:n,stack:h,digest:null}}function Wu(t,n,i){return{value:t,source:null,stack:i??null,digest:n??null}}function Xu(t,n){try{console.error(n.value)}catch(i){setTimeout(function(){throw i})}}var Vx=typeof WeakMap=="function"?WeakMap:Map;function Sh(t,n,i){i=mr(-1,i),i.tag=3,i.payload={element:null};var u=n.value;return i.callback=function(){Ds||(Ds=!0,sc=u),Xu(t,n)},i}function Nh(t,n,i){i=mr(-1,i),i.tag=3;var u=t.type.getDerivedStateFromError;if(typeof u=="function"){var h=n.value;i.payload=function(){return u(h)},i.callback=function(){Xu(t,n)}}var y=t.stateNode;return y!==null&&typeof y.componentDidCatch=="function"&&(i.callback=function(){Xu(t,n),typeof u!="function"&&(Or===null?Or=new Set([this]):Or.add(this));var C=n.stack;this.componentDidCatch(n.value,{componentStack:C!==null?C:""})}),i}function Eh(t,n,i){var u=t.pingCache;if(u===null){u=t.pingCache=new Vx;var h=new Set;u.set(n,h)}else h=u.get(n),h===void 0&&(h=new Set,u.set(n,h));h.has(i)||(h.add(i),t=rv.bind(null,t,n,i),n.then(t,t))}function Ch(t){do{var n;if((n=t.tag===13)&&(n=t.memoizedState,n=n!==null?n.dehydrated!==null:!0),n)return t;t=t.return}while(t!==null);return null}function kh(t,n,i,u,h){return(t.mode&1)===0?(t===n?t.flags|=65536:(t.flags|=128,i.flags|=131072,i.flags&=-52805,i.tag===1&&(i.alternate===null?i.tag=17:(n=mr(-1,1),n.tag=2,Fr(i,n,1))),i.lanes|=1),t):(t.flags|=65536,t.lanes=h,t)}var Ux=j.ReactCurrentOwner,Xt=!1;function $t(t,n,i,u){n.child=t===null?Yf(n,null,i,u):ni(n,t.child,i,u)}function jh(t,n,i,u,h){i=i.render;var y=n.ref;return oi(n,h),u=$u(t,n,i,u,y,h),i=Fu(),t!==null&&!Xt?(n.updateQueue=t.updateQueue,n.flags&=-2053,t.lanes&=~h,gr(t,n,h)):(nt&&i&&wu(n),n.flags|=1,$t(t,n,u,h),n.child)}function Ph(t,n,i,u,h){if(t===null){var y=i.type;return typeof y=="function"&&!pc(y)&&y.defaultProps===void 0&&i.compare===null&&i.defaultProps===void 0?(n.tag=15,n.type=y,Rh(t,n,y,u,h)):(t=As(i.type,null,u,n,n.mode,h),t.ref=n.ref,t.return=n,n.child=t)}if(y=t.child,(t.lanes&h)===0){var C=y.memoizedProps;if(i=i.compare,i=i!==null?i:Ai,i(C,u)&&t.ref===n.ref)return gr(t,n,h)}return n.flags|=1,t=Ur(y,u),t.ref=n.ref,t.return=n,n.child=t}function Rh(t,n,i,u,h){if(t!==null){var y=t.memoizedProps;if(Ai(y,u)&&t.ref===n.ref)if(Xt=!1,n.pendingProps=u=y,(t.lanes&h)!==0)(t.flags&131072)!==0&&(Xt=!0);else return n.lanes=t.lanes,gr(t,n,h)}return Yu(t,n,i,u,h)}function Mh(t,n,i){var u=n.pendingProps,h=u.children,y=t!==null?t.memoizedState:null;if(u.mode==="hidden")if((n.mode&1)===0)n.memoizedState={baseLanes:0,cachePool:null,transitions:null},Je(li,rn),rn|=i;else{if((i&1073741824)===0)return t=y!==null?y.baseLanes|i:i,n.lanes=n.childLanes=1073741824,n.memoizedState={baseLanes:t,cachePool:null,transitions:null},n.updateQueue=null,Je(li,rn),rn|=t,null;n.memoizedState={baseLanes:0,cachePool:null,transitions:null},u=y!==null?y.baseLanes:i,Je(li,rn),rn|=u}else y!==null?(u=y.baseLanes|i,n.memoizedState=null):u=i,Je(li,rn),rn|=u;return $t(t,n,h,i),n.child}function Th(t,n){var i=n.ref;(t===null&&i!==null||t!==null&&t.ref!==i)&&(n.flags|=512,n.flags|=2097152)}function Yu(t,n,i,u,h){var y=Wt(i)?ho:Rt.current;return y=qo(n,y),oi(n,h),i=$u(t,n,i,u,y,h),u=Fu(),t!==null&&!Xt?(n.updateQueue=t.updateQueue,n.flags&=-2053,t.lanes&=~h,gr(t,n,h)):(nt&&u&&wu(n),n.flags|=1,$t(t,n,i,h),n.child)}function Dh(t,n,i,u,h){if(Wt(i)){var y=!0;cs(n)}else y=!1;if(oi(n,h),n.stateNode===null)js(t,n),bh(n,i,u),Uu(n,i,u,h),u=!0;else if(t===null){var C=n.stateNode,$=n.memoizedProps;C.props=$;var Y=C.context,ne=i.contextType;typeof ne=="object"&&ne!==null?ne=mn(ne):(ne=Wt(i)?ho:Rt.current,ne=qo(n,ne));var le=i.getDerivedStateFromProps,ue=typeof le=="function"||typeof C.getSnapshotBeforeUpdate=="function";ue||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||($!==u||Y!==ne)&&_h(n,C,u,ne),$r=!1;var ae=n.memoizedState;C.state=ae,vs(n,u,C,h),Y=n.memoizedState,$!==u||ae!==Y||Ut.current||$r?(typeof le=="function"&&(Vu(n,i,le,u),Y=n.memoizedState),($=$r||wh(n,i,$,u,ae,Y,ne))?(ue||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount()),typeof C.componentDidMount=="function"&&(n.flags|=4194308)):(typeof C.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=u,n.memoizedState=Y),C.props=u,C.state=Y,C.context=ne,u=$):(typeof C.componentDidMount=="function"&&(n.flags|=4194308),u=!1)}else{C=n.stateNode,Kf(t,n),$=n.memoizedProps,ne=n.type===n.elementType?$:Pn(n.type,$),C.props=ne,ue=n.pendingProps,ae=C.context,Y=i.contextType,typeof Y=="object"&&Y!==null?Y=mn(Y):(Y=Wt(i)?ho:Rt.current,Y=qo(n,Y));var ge=i.getDerivedStateFromProps;(le=typeof ge=="function"||typeof C.getSnapshotBeforeUpdate=="function")||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||($!==ue||ae!==Y)&&_h(n,C,u,Y),$r=!1,ae=n.memoizedState,C.state=ae,vs(n,u,C,h);var be=n.memoizedState;$!==ue||ae!==be||Ut.current||$r?(typeof ge=="function"&&(Vu(n,i,ge,u),be=n.memoizedState),(ne=$r||wh(n,i,ne,u,ae,be,Y)||!1)?(le||typeof C.UNSAFE_componentWillUpdate!="function"&&typeof C.componentWillUpdate!="function"||(typeof C.componentWillUpdate=="function"&&C.componentWillUpdate(u,be,Y),typeof C.UNSAFE_componentWillUpdate=="function"&&C.UNSAFE_componentWillUpdate(u,be,Y)),typeof C.componentDidUpdate=="function"&&(n.flags|=4),typeof C.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof C.componentDidUpdate!="function"||$===t.memoizedProps&&ae===t.memoizedState||(n.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||$===t.memoizedProps&&ae===t.memoizedState||(n.flags|=1024),n.memoizedProps=u,n.memoizedState=be),C.props=u,C.state=be,C.context=Y,u=ne):(typeof C.componentDidUpdate!="function"||$===t.memoizedProps&&ae===t.memoizedState||(n.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||$===t.memoizedProps&&ae===t.memoizedState||(n.flags|=1024),u=!1)}return Gu(t,n,i,u,y,h)}function Gu(t,n,i,u,h,y){Th(t,n);var C=(n.flags&128)!==0;if(!u&&!C)return h&&Ff(n,i,!1),gr(t,n,y);u=n.stateNode,Ux.current=n;var $=C&&typeof i.getDerivedStateFromError!="function"?null:u.render();return n.flags|=1,t!==null&&C?(n.child=ni(n,t.child,null,y),n.child=ni(n,null,$,y)):$t(t,n,$,y),n.memoizedState=u.state,h&&Ff(n,i,!0),n.child}function Lh(t){var n=t.stateNode;n.pendingContext?If(t,n.pendingContext,n.pendingContext!==n.context):n.context&&If(t,n.context,!1),Mu(t,n.containerInfo)}function zh(t,n,i,u,h){return ti(),Nu(h),n.flags|=256,$t(t,n,i,u),n.child}var Ku={dehydrated:null,treeContext:null,retryLane:0};function Zu(t){return{baseLanes:t,cachePool:null,transitions:null}}function Ih(t,n,i){var u=n.pendingProps,h=at.current,y=!1,C=(n.flags&128)!==0,$;if(($=C)||($=t!==null&&t.memoizedState===null?!1:(h&2)!==0),$?(y=!0,n.flags&=-129):(t===null||t.memoizedState!==null)&&(h|=1),Je(at,h&1),t===null)return Su(n),t=n.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?((n.mode&1)===0?n.lanes=1:t.data==="$!"?n.lanes=8:n.lanes=1073741824,null):(C=u.children,t=u.fallback,y?(u=n.mode,y=n.child,C={mode:"hidden",children:C},(u&1)===0&&y!==null?(y.childLanes=0,y.pendingProps=C):y=Os(C,u,0,null),t=So(t,u,i,null),y.return=n,t.return=n,y.sibling=t,n.child=y,n.child.memoizedState=Zu(i),n.memoizedState=Ku,t):Qu(n,C));if(h=t.memoizedState,h!==null&&($=h.dehydrated,$!==null))return Wx(t,n,C,u,$,h,i);if(y){y=u.fallback,C=n.mode,h=t.child,$=h.sibling;var Y={mode:"hidden",children:u.children};return(C&1)===0&&n.child!==h?(u=n.child,u.childLanes=0,u.pendingProps=Y,n.deletions=null):(u=Ur(h,Y),u.subtreeFlags=h.subtreeFlags&14680064),$!==null?y=Ur($,y):(y=So(y,C,i,null),y.flags|=2),y.return=n,u.return=n,u.sibling=y,n.child=u,u=y,y=n.child,C=t.child.memoizedState,C=C===null?Zu(i):{baseLanes:C.baseLanes|i,cachePool:null,transitions:C.transitions},y.memoizedState=C,y.childLanes=t.childLanes&~i,n.memoizedState=Ku,u}return y=t.child,t=y.sibling,u=Ur(y,{mode:"visible",children:u.children}),(n.mode&1)===0&&(u.lanes=i),u.return=n,u.sibling=null,t!==null&&(i=n.deletions,i===null?(n.deletions=[t],n.flags|=16):i.push(t)),n.child=u,n.memoizedState=null,u}function Qu(t,n){return n=Os({mode:"visible",children:n},t.mode,0,null),n.return=t,t.child=n}function ks(t,n,i,u){return u!==null&&Nu(u),ni(n,t.child,null,i),t=Qu(n,n.pendingProps.children),t.flags|=2,n.memoizedState=null,t}function Wx(t,n,i,u,h,y,C){if(i)return n.flags&256?(n.flags&=-257,u=Wu(Error(o(422))),ks(t,n,C,u)):n.memoizedState!==null?(n.child=t.child,n.flags|=128,null):(y=u.fallback,h=n.mode,u=Os({mode:"visible",children:u.children},h,0,null),y=So(y,h,C,null),y.flags|=2,u.return=n,y.return=n,u.sibling=y,n.child=u,(n.mode&1)!==0&&ni(n,t.child,null,C),n.child.memoizedState=Zu(C),n.memoizedState=Ku,y);if((n.mode&1)===0)return ks(t,n,C,null);if(h.data==="$!"){if(u=h.nextSibling&&h.nextSibling.dataset,u)var $=u.dgst;return u=$,y=Error(o(419)),u=Wu(y,u,void 0),ks(t,n,C,u)}if($=(C&t.childLanes)!==0,Xt||$){if(u=wt,u!==null){switch(C&-C){case 4:h=2;break;case 16:h=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:h=32;break;case 536870912:h=268435456;break;default:h=0}h=(h&(u.suspendedLanes|C))!==0?0:h,h!==0&&h!==y.retryLane&&(y.retryLane=h,pr(t,h),Tn(u,t,h,-1))}return hc(),u=Wu(Error(o(421))),ks(t,n,C,u)}return h.data==="$?"?(n.flags|=128,n.child=t.child,n=ov.bind(null,t),h._reactRetry=n,null):(t=y.treeContext,nn=Dr(h.nextSibling),tn=n,nt=!0,jn=null,t!==null&&(hn[pn++]=fr,hn[pn++]=hr,hn[pn++]=po,fr=t.id,hr=t.overflow,po=n),n=Qu(n,u.children),n.flags|=4096,n)}function $h(t,n,i){t.lanes|=n;var u=t.alternate;u!==null&&(u.lanes|=n),ju(t.return,n,i)}function qu(t,n,i,u,h){var y=t.memoizedState;y===null?t.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:u,tail:i,tailMode:h}:(y.isBackwards=n,y.rendering=null,y.renderingStartTime=0,y.last=u,y.tail=i,y.tailMode=h)}function Fh(t,n,i){var u=n.pendingProps,h=u.revealOrder,y=u.tail;if($t(t,n,u.children,i),u=at.current,(u&2)!==0)u=u&1|2,n.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=n.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&$h(t,i,n);else if(t.tag===19)$h(t,i,n);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===n)break e;for(;t.sibling===null;){if(t.return===null||t.return===n)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}u&=1}if(Je(at,u),(n.mode&1)===0)n.memoizedState=null;else switch(h){case"forwards":for(i=n.child,h=null;i!==null;)t=i.alternate,t!==null&&ws(t)===null&&(h=i),i=i.sibling;i=h,i===null?(h=n.child,n.child=null):(h=i.sibling,i.sibling=null),qu(n,!1,h,i,y);break;case"backwards":for(i=null,h=n.child,n.child=null;h!==null;){if(t=h.alternate,t!==null&&ws(t)===null){n.child=h;break}t=h.sibling,h.sibling=i,i=h,h=t}qu(n,!0,i,null,y);break;case"together":qu(n,!1,null,null,void 0);break;default:n.memoizedState=null}return n.child}function js(t,n){(n.mode&1)===0&&t!==null&&(t.alternate=null,n.alternate=null,n.flags|=2)}function gr(t,n,i){if(t!==null&&(n.dependencies=t.dependencies),vo|=n.lanes,(i&n.childLanes)===0)return null;if(t!==null&&n.child!==t.child)throw Error(o(153));if(n.child!==null){for(t=n.child,i=Ur(t,t.pendingProps),n.child=i,i.return=n;t.sibling!==null;)t=t.sibling,i=i.sibling=Ur(t,t.pendingProps),i.return=n;i.sibling=null}return n.child}function Xx(t,n,i){switch(n.tag){case 3:Lh(n),ti();break;case 5:qf(n);break;case 1:Wt(n.type)&&cs(n);break;case 4:Mu(n,n.stateNode.containerInfo);break;case 10:var u=n.type._context,h=n.memoizedProps.value;Je(gs,u._currentValue),u._currentValue=h;break;case 13:if(u=n.memoizedState,u!==null)return u.dehydrated!==null?(Je(at,at.current&1),n.flags|=128,null):(i&n.child.childLanes)!==0?Ih(t,n,i):(Je(at,at.current&1),t=gr(t,n,i),t!==null?t.sibling:null);Je(at,at.current&1);break;case 19:if(u=(i&n.childLanes)!==0,(t.flags&128)!==0){if(u)return Fh(t,n,i);n.flags|=128}if(h=n.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),Je(at,at.current),u)break;return null;case 22:case 23:return n.lanes=0,Mh(t,n,i)}return gr(t,n,i)}var Ah,Ju,Oh,Hh;Ah=function(t,n){for(var i=n.child;i!==null;){if(i.tag===5||i.tag===6)t.appendChild(i.stateNode);else if(i.tag!==4&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return;i=i.return}i.sibling.return=i.return,i=i.sibling}},Ju=function(){},Oh=function(t,n,i,u){var h=t.memoizedProps;if(h!==u){t=n.stateNode,yo(Xn.current);var y=null;switch(i){case"input":h=Be(t,h),u=Be(t,u),y=[];break;case"select":h=U({},h,{value:void 0}),u=U({},u,{value:void 0}),y=[];break;case"textarea":h=Sn(t,h),u=Sn(t,u),y=[];break;default:typeof h.onClick!="function"&&typeof u.onClick=="function"&&(t.onclick=ss)}Nr(i,u);var C;i=null;for(ne in h)if(!u.hasOwnProperty(ne)&&h.hasOwnProperty(ne)&&h[ne]!=null)if(ne==="style"){var $=h[ne];for(C in $)$.hasOwnProperty(C)&&(i||(i={}),i[C]="")}else ne!=="dangerouslySetInnerHTML"&&ne!=="children"&&ne!=="suppressContentEditableWarning"&&ne!=="suppressHydrationWarning"&&ne!=="autoFocus"&&(s.hasOwnProperty(ne)?y||(y=[]):(y=y||[]).push(ne,null));for(ne in u){var Y=u[ne];if($=h?.[ne],u.hasOwnProperty(ne)&&Y!==$&&(Y!=null||$!=null))if(ne==="style")if($){for(C in $)!$.hasOwnProperty(C)||Y&&Y.hasOwnProperty(C)||(i||(i={}),i[C]="");for(C in Y)Y.hasOwnProperty(C)&&$[C]!==Y[C]&&(i||(i={}),i[C]=Y[C])}else i||(y||(y=[]),y.push(ne,i)),i=Y;else ne==="dangerouslySetInnerHTML"?(Y=Y?Y.__html:void 0,$=$?$.__html:void 0,Y!=null&&$!==Y&&(y=y||[]).push(ne,Y)):ne==="children"?typeof Y!="string"&&typeof Y!="number"||(y=y||[]).push(ne,""+Y):ne!=="suppressContentEditableWarning"&&ne!=="suppressHydrationWarning"&&(s.hasOwnProperty(ne)?(Y!=null&&ne==="onScroll"&&et("scroll",t),y||$===Y||(y=[])):(y=y||[]).push(ne,Y))}i&&(y=y||[]).push("style",i);var ne=y;(n.updateQueue=ne)&&(n.flags|=4)}},Hh=function(t,n,i,u){i!==u&&(n.flags|=4)};function ea(t,n){if(!nt)switch(t.tailMode){case"hidden":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?t.tail=null:i.sibling=null;break;case"collapsed":i=t.tail;for(var u=null;i!==null;)i.alternate!==null&&(u=i),i=i.sibling;u===null?n||t.tail===null?t.tail=null:t.tail.sibling=null:u.sibling=null}}function Tt(t){var n=t.alternate!==null&&t.alternate.child===t.child,i=0,u=0;if(n)for(var h=t.child;h!==null;)i|=h.lanes|h.childLanes,u|=h.subtreeFlags&14680064,u|=h.flags&14680064,h.return=t,h=h.sibling;else for(h=t.child;h!==null;)i|=h.lanes|h.childLanes,u|=h.subtreeFlags,u|=h.flags,h.return=t,h=h.sibling;return t.subtreeFlags|=u,t.childLanes=i,n}function Yx(t,n,i){var u=n.pendingProps;switch(bu(n),n.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Tt(n),null;case 1:return Wt(n.type)&&us(),Tt(n),null;case 3:return u=n.stateNode,ii(),tt(Ut),tt(Rt),Lu(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(t===null||t.child===null)&&(ps(n)?n.flags|=4:t===null||t.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,jn!==null&&(cc(jn),jn=null))),Ju(t,n),Tt(n),null;case 5:Tu(n);var h=yo(Ki.current);if(i=n.type,t!==null&&n.stateNode!=null)Oh(t,n,i,u,h),t.ref!==n.ref&&(n.flags|=512,n.flags|=2097152);else{if(!u){if(n.stateNode===null)throw Error(o(166));return Tt(n),null}if(t=yo(Xn.current),ps(n)){u=n.stateNode,i=n.type;var y=n.memoizedProps;switch(u[Wn]=n,u[Ui]=y,t=(n.mode&1)!==0,i){case"dialog":et("cancel",u),et("close",u);break;case"iframe":case"object":case"embed":et("load",u);break;case"video":case"audio":for(h=0;h<Hi.length;h++)et(Hi[h],u);break;case"source":et("error",u);break;case"img":case"image":case"link":et("error",u),et("load",u);break;case"details":et("toggle",u);break;case"input":Ze(u,y),et("invalid",u);break;case"select":u._wrapperState={wasMultiple:!!y.multiple},et("invalid",u);break;case"textarea":An(u,y),et("invalid",u)}Nr(i,y),h=null;for(var C in y)if(y.hasOwnProperty(C)){var $=y[C];C==="children"?typeof $=="string"?u.textContent!==$&&(y.suppressHydrationWarning!==!0&&as(u.textContent,$,t),h=["children",$]):typeof $=="number"&&u.textContent!==""+$&&(y.suppressHydrationWarning!==!0&&as(u.textContent,$,t),h=["children",""+$]):s.hasOwnProperty(C)&&$!=null&&C==="onScroll"&&et("scroll",u)}switch(i){case"input":ze(u),Qt(u,y,!0);break;case"textarea":ze(u),qt(u);break;case"select":case"option":break;default:typeof y.onClick=="function"&&(u.onclick=ss)}u=h,n.updateQueue=u,u!==null&&(n.flags|=4)}else{C=h.nodeType===9?h:h.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=ln(i)),t==="http://www.w3.org/1999/xhtml"?i==="script"?(t=C.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof u.is=="string"?t=C.createElement(i,{is:u.is}):(t=C.createElement(i),i==="select"&&(C=t,u.multiple?C.multiple=!0:u.size&&(C.size=u.size))):t=C.createElementNS(t,i),t[Wn]=n,t[Ui]=u,Ah(t,n,!1,!1),n.stateNode=t;e:{switch(C=Er(i,u),i){case"dialog":et("cancel",t),et("close",t),h=u;break;case"iframe":case"object":case"embed":et("load",t),h=u;break;case"video":case"audio":for(h=0;h<Hi.length;h++)et(Hi[h],t);h=u;break;case"source":et("error",t),h=u;break;case"img":case"image":case"link":et("error",t),et("load",t),h=u;break;case"details":et("toggle",t),h=u;break;case"input":Ze(t,u),h=Be(t,u),et("invalid",t);break;case"option":h=u;break;case"select":t._wrapperState={wasMultiple:!!u.multiple},h=U({},u,{value:void 0}),et("invalid",t);break;case"textarea":An(t,u),h=Sn(t,u),et("invalid",t);break;default:h=u}Nr(i,h),$=h;for(y in $)if($.hasOwnProperty(y)){var Y=$[y];y==="style"?Bt(t,Y):y==="dangerouslySetInnerHTML"?(Y=Y?Y.__html:void 0,Y!=null&&Ht(t,Y)):y==="children"?typeof Y=="string"?(i!=="textarea"||Y!=="")&&un(t,Y):typeof Y=="number"&&un(t,""+Y):y!=="suppressContentEditableWarning"&&y!=="suppressHydrationWarning"&&y!=="autoFocus"&&(s.hasOwnProperty(y)?Y!=null&&y==="onScroll"&&et("scroll",t):Y!=null&&b(t,y,Y,C))}switch(i){case"input":ze(t),Qt(t,u,!1);break;case"textarea":ze(t),qt(t);break;case"option":u.value!=null&&t.setAttribute("value",""+ie(u.value));break;case"select":t.multiple=!!u.multiple,y=u.value,y!=null?At(t,!!u.multiple,y,!1):u.defaultValue!=null&&At(t,!!u.multiple,u.defaultValue,!0);break;default:typeof h.onClick=="function"&&(t.onclick=ss)}switch(i){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}}u&&(n.flags|=4)}n.ref!==null&&(n.flags|=512,n.flags|=2097152)}return Tt(n),null;case 6:if(t&&n.stateNode!=null)Hh(t,n,t.memoizedProps,u);else{if(typeof u!="string"&&n.stateNode===null)throw Error(o(166));if(i=yo(Ki.current),yo(Xn.current),ps(n)){if(u=n.stateNode,i=n.memoizedProps,u[Wn]=n,(y=u.nodeValue!==i)&&(t=tn,t!==null))switch(t.tag){case 3:as(u.nodeValue,i,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&as(u.nodeValue,i,(t.mode&1)!==0)}y&&(n.flags|=4)}else u=(i.nodeType===9?i:i.ownerDocument).createTextNode(u),u[Wn]=n,n.stateNode=u}return Tt(n),null;case 13:if(tt(at),u=n.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(nt&&nn!==null&&(n.mode&1)!==0&&(n.flags&128)===0)Uf(),ti(),n.flags|=98560,y=!1;else if(y=ps(n),u!==null&&u.dehydrated!==null){if(t===null){if(!y)throw Error(o(318));if(y=n.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(o(317));y[Wn]=n}else ti(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;Tt(n),y=!1}else jn!==null&&(cc(jn),jn=null),y=!0;if(!y)return n.flags&65536?n:null}return(n.flags&128)!==0?(n.lanes=i,n):(u=u!==null,u!==(t!==null&&t.memoizedState!==null)&&u&&(n.child.flags|=8192,(n.mode&1)!==0&&(t===null||(at.current&1)!==0?xt===0&&(xt=3):hc())),n.updateQueue!==null&&(n.flags|=4),Tt(n),null);case 4:return ii(),Ju(t,n),t===null&&Bi(n.stateNode.containerInfo),Tt(n),null;case 10:return ku(n.type._context),Tt(n),null;case 17:return Wt(n.type)&&us(),Tt(n),null;case 19:if(tt(at),y=n.memoizedState,y===null)return Tt(n),null;if(u=(n.flags&128)!==0,C=y.rendering,C===null)if(u)ea(y,!1);else{if(xt!==0||t!==null&&(t.flags&128)!==0)for(t=n.child;t!==null;){if(C=ws(t),C!==null){for(n.flags|=128,ea(y,!1),u=C.updateQueue,u!==null&&(n.updateQueue=u,n.flags|=4),n.subtreeFlags=0,u=i,i=n.child;i!==null;)y=i,t=u,y.flags&=14680066,C=y.alternate,C===null?(y.childLanes=0,y.lanes=t,y.child=null,y.subtreeFlags=0,y.memoizedProps=null,y.memoizedState=null,y.updateQueue=null,y.dependencies=null,y.stateNode=null):(y.childLanes=C.childLanes,y.lanes=C.lanes,y.child=C.child,y.subtreeFlags=0,y.deletions=null,y.memoizedProps=C.memoizedProps,y.memoizedState=C.memoizedState,y.updateQueue=C.updateQueue,y.type=C.type,t=C.dependencies,y.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),i=i.sibling;return Je(at,at.current&1|2),n.child}t=t.sibling}y.tail!==null&&Ge()>ui&&(n.flags|=128,u=!0,ea(y,!1),n.lanes=4194304)}else{if(!u)if(t=ws(C),t!==null){if(n.flags|=128,u=!0,i=t.updateQueue,i!==null&&(n.updateQueue=i,n.flags|=4),ea(y,!0),y.tail===null&&y.tailMode==="hidden"&&!C.alternate&&!nt)return Tt(n),null}else 2*Ge()-y.renderingStartTime>ui&&i!==1073741824&&(n.flags|=128,u=!0,ea(y,!1),n.lanes=4194304);y.isBackwards?(C.sibling=n.child,n.child=C):(i=y.last,i!==null?i.sibling=C:n.child=C,y.last=C)}return y.tail!==null?(n=y.tail,y.rendering=n,y.tail=n.sibling,y.renderingStartTime=Ge(),n.sibling=null,i=at.current,Je(at,u?i&1|2:i&1),n):(Tt(n),null);case 22:case 23:return fc(),u=n.memoizedState!==null,t!==null&&t.memoizedState!==null!==u&&(n.flags|=8192),u&&(n.mode&1)!==0?(rn&1073741824)!==0&&(Tt(n),n.subtreeFlags&6&&(n.flags|=8192)):Tt(n),null;case 24:return null;case 25:return null}throw Error(o(156,n.tag))}function Gx(t,n){switch(bu(n),n.tag){case 1:return Wt(n.type)&&us(),t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 3:return ii(),tt(Ut),tt(Rt),Lu(),t=n.flags,(t&65536)!==0&&(t&128)===0?(n.flags=t&-65537|128,n):null;case 5:return Tu(n),null;case 13:if(tt(at),t=n.memoizedState,t!==null&&t.dehydrated!==null){if(n.alternate===null)throw Error(o(340));ti()}return t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 19:return tt(at),null;case 4:return ii(),null;case 10:return ku(n.type._context),null;case 22:case 23:return fc(),null;case 24:return null;default:return null}}var Ps=!1,Dt=!1,Kx=typeof WeakSet=="function"?WeakSet:Set,ve=null;function si(t,n){var i=t.ref;if(i!==null)if(typeof i=="function")try{i(null)}catch(u){dt(t,n,u)}else i.current=null}function ec(t,n,i){try{i()}catch(u){dt(t,n,u)}}var Bh=!1;function Zx(t,n){if(fu=Ka,t=wf(),ou(t)){if("selectionStart"in t)var i={start:t.selectionStart,end:t.selectionEnd};else e:{i=(i=t.ownerDocument)&&i.defaultView||window;var u=i.getSelection&&i.getSelection();if(u&&u.rangeCount!==0){i=u.anchorNode;var h=u.anchorOffset,y=u.focusNode;u=u.focusOffset;try{i.nodeType,y.nodeType}catch{i=null;break e}var C=0,$=-1,Y=-1,ne=0,le=0,ue=t,ae=null;t:for(;;){for(var ge;ue!==i||h!==0&&ue.nodeType!==3||($=C+h),ue!==y||u!==0&&ue.nodeType!==3||(Y=C+u),ue.nodeType===3&&(C+=ue.nodeValue.length),(ge=ue.firstChild)!==null;)ae=ue,ue=ge;for(;;){if(ue===t)break t;if(ae===i&&++ne===h&&($=C),ae===y&&++le===u&&(Y=C),(ge=ue.nextSibling)!==null)break;ue=ae,ae=ue.parentNode}ue=ge}i=$===-1||Y===-1?null:{start:$,end:Y}}else i=null}i=i||{start:0,end:0}}else i=null;for(hu={focusedElem:t,selectionRange:i},Ka=!1,ve=n;ve!==null;)if(n=ve,t=n.child,(n.subtreeFlags&1028)!==0&&t!==null)t.return=n,ve=t;else for(;ve!==null;){n=ve;try{var be=n.alternate;if((n.flags&1024)!==0)switch(n.tag){case 0:case 11:case 15:break;case 1:if(be!==null){var Ne=be.memoizedProps,ft=be.memoizedState,J=n.stateNode,Z=J.getSnapshotBeforeUpdate(n.elementType===n.type?Ne:Pn(n.type,Ne),ft);J.__reactInternalSnapshotBeforeUpdate=Z}break;case 3:var ee=n.stateNode.containerInfo;ee.nodeType===1?ee.textContent="":ee.nodeType===9&&ee.documentElement&&ee.removeChild(ee.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(o(163))}}catch(fe){dt(n,n.return,fe)}if(t=n.sibling,t!==null){t.return=n.return,ve=t;break}ve=n.return}return be=Bh,Bh=!1,be}function ta(t,n,i){var u=n.updateQueue;if(u=u!==null?u.lastEffect:null,u!==null){var h=u=u.next;do{if((h.tag&t)===t){var y=h.destroy;h.destroy=void 0,y!==void 0&&ec(n,i,y)}h=h.next}while(h!==u)}}function Rs(t,n){if(n=n.updateQueue,n=n!==null?n.lastEffect:null,n!==null){var i=n=n.next;do{if((i.tag&t)===t){var u=i.create;i.destroy=u()}i=i.next}while(i!==n)}}function tc(t){var n=t.ref;if(n!==null){var i=t.stateNode;t.tag,t=i,typeof n=="function"?n(t):n.current=t}}function Vh(t){var n=t.alternate;n!==null&&(t.alternate=null,Vh(n)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(n=t.stateNode,n!==null&&(delete n[Wn],delete n[Ui],delete n[yu],delete n[Tx],delete n[Dx])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Uh(t){return t.tag===5||t.tag===3||t.tag===4}function Wh(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Uh(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function nc(t,n,i){var u=t.tag;if(u===5||u===6)t=t.stateNode,n?i.nodeType===8?i.parentNode.insertBefore(t,n):i.insertBefore(t,n):(i.nodeType===8?(n=i.parentNode,n.insertBefore(t,i)):(n=i,n.appendChild(t)),i=i._reactRootContainer,i!=null||n.onclick!==null||(n.onclick=ss));else if(u!==4&&(t=t.child,t!==null))for(nc(t,n,i),t=t.sibling;t!==null;)nc(t,n,i),t=t.sibling}function rc(t,n,i){var u=t.tag;if(u===5||u===6)t=t.stateNode,n?i.insertBefore(t,n):i.appendChild(t);else if(u!==4&&(t=t.child,t!==null))for(rc(t,n,i),t=t.sibling;t!==null;)rc(t,n,i),t=t.sibling}var kt=null,Rn=!1;function Ar(t,n,i){for(i=i.child;i!==null;)Xh(t,n,i),i=i.sibling}function Xh(t,n,i){if(Ct&&typeof Ct.onCommitFiberUnmount=="function")try{Ct.onCommitFiberUnmount(fn,i)}catch{}switch(i.tag){case 5:Dt||si(i,n);case 6:var u=kt,h=Rn;kt=null,Ar(t,n,i),kt=u,Rn=h,kt!==null&&(Rn?(t=kt,i=i.stateNode,t.nodeType===8?t.parentNode.removeChild(i):t.removeChild(i)):kt.removeChild(i.stateNode));break;case 18:kt!==null&&(Rn?(t=kt,i=i.stateNode,t.nodeType===8?gu(t.parentNode,i):t.nodeType===1&&gu(t,i),Di(t)):gu(kt,i.stateNode));break;case 4:u=kt,h=Rn,kt=i.stateNode.containerInfo,Rn=!0,Ar(t,n,i),kt=u,Rn=h;break;case 0:case 11:case 14:case 15:if(!Dt&&(u=i.updateQueue,u!==null&&(u=u.lastEffect,u!==null))){h=u=u.next;do{var y=h,C=y.destroy;y=y.tag,C!==void 0&&((y&2)!==0||(y&4)!==0)&&ec(i,n,C),h=h.next}while(h!==u)}Ar(t,n,i);break;case 1:if(!Dt&&(si(i,n),u=i.stateNode,typeof u.componentWillUnmount=="function"))try{u.props=i.memoizedProps,u.state=i.memoizedState,u.componentWillUnmount()}catch($){dt(i,n,$)}Ar(t,n,i);break;case 21:Ar(t,n,i);break;case 22:i.mode&1?(Dt=(u=Dt)||i.memoizedState!==null,Ar(t,n,i),Dt=u):Ar(t,n,i);break;default:Ar(t,n,i)}}function Yh(t){var n=t.updateQueue;if(n!==null){t.updateQueue=null;var i=t.stateNode;i===null&&(i=t.stateNode=new Kx),n.forEach(function(u){var h=iv.bind(null,t,u);i.has(u)||(i.add(u),u.then(h,h))})}}function Mn(t,n){var i=n.deletions;if(i!==null)for(var u=0;u<i.length;u++){var h=i[u];try{var y=t,C=n,$=C;e:for(;$!==null;){switch($.tag){case 5:kt=$.stateNode,Rn=!1;break e;case 3:kt=$.stateNode.containerInfo,Rn=!0;break e;case 4:kt=$.stateNode.containerInfo,Rn=!0;break e}$=$.return}if(kt===null)throw Error(o(160));Xh(y,C,h),kt=null,Rn=!1;var Y=h.alternate;Y!==null&&(Y.return=null),h.return=null}catch(ne){dt(h,n,ne)}}if(n.subtreeFlags&12854)for(n=n.child;n!==null;)Gh(n,t),n=n.sibling}function Gh(t,n){var i=t.alternate,u=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Mn(n,t),Gn(t),u&4){try{ta(3,t,t.return),Rs(3,t)}catch(Ne){dt(t,t.return,Ne)}try{ta(5,t,t.return)}catch(Ne){dt(t,t.return,Ne)}}break;case 1:Mn(n,t),Gn(t),u&512&&i!==null&&si(i,i.return);break;case 5:if(Mn(n,t),Gn(t),u&512&&i!==null&&si(i,i.return),t.flags&32){var h=t.stateNode;try{un(h,"")}catch(Ne){dt(t,t.return,Ne)}}if(u&4&&(h=t.stateNode,h!=null)){var y=t.memoizedProps,C=i!==null?i.memoizedProps:y,$=t.type,Y=t.updateQueue;if(t.updateQueue=null,Y!==null)try{$==="input"&&y.type==="radio"&&y.name!=null&&Oe(h,y),Er($,C);var ne=Er($,y);for(C=0;C<Y.length;C+=2){var le=Y[C],ue=Y[C+1];le==="style"?Bt(h,ue):le==="dangerouslySetInnerHTML"?Ht(h,ue):le==="children"?un(h,ue):b(h,le,ue,ne)}switch($){case"input":ut(h,y);break;case"textarea":Ot(h,y);break;case"select":var ae=h._wrapperState.wasMultiple;h._wrapperState.wasMultiple=!!y.multiple;var ge=y.value;ge!=null?At(h,!!y.multiple,ge,!1):ae!==!!y.multiple&&(y.defaultValue!=null?At(h,!!y.multiple,y.defaultValue,!0):At(h,!!y.multiple,y.multiple?[]:"",!1))}h[Ui]=y}catch(Ne){dt(t,t.return,Ne)}}break;case 6:if(Mn(n,t),Gn(t),u&4){if(t.stateNode===null)throw Error(o(162));h=t.stateNode,y=t.memoizedProps;try{h.nodeValue=y}catch(Ne){dt(t,t.return,Ne)}}break;case 3:if(Mn(n,t),Gn(t),u&4&&i!==null&&i.memoizedState.isDehydrated)try{Di(n.containerInfo)}catch(Ne){dt(t,t.return,Ne)}break;case 4:Mn(n,t),Gn(t);break;case 13:Mn(n,t),Gn(t),h=t.child,h.flags&8192&&(y=h.memoizedState!==null,h.stateNode.isHidden=y,!y||h.alternate!==null&&h.alternate.memoizedState!==null||(ac=Ge())),u&4&&Yh(t);break;case 22:if(le=i!==null&&i.memoizedState!==null,t.mode&1?(Dt=(ne=Dt)||le,Mn(n,t),Dt=ne):Mn(n,t),Gn(t),u&8192){if(ne=t.memoizedState!==null,(t.stateNode.isHidden=ne)&&!le&&(t.mode&1)!==0)for(ve=t,le=t.child;le!==null;){for(ue=ve=le;ve!==null;){switch(ae=ve,ge=ae.child,ae.tag){case 0:case 11:case 14:case 15:ta(4,ae,ae.return);break;case 1:si(ae,ae.return);var be=ae.stateNode;if(typeof be.componentWillUnmount=="function"){u=ae,i=ae.return;try{n=u,be.props=n.memoizedProps,be.state=n.memoizedState,be.componentWillUnmount()}catch(Ne){dt(u,i,Ne)}}break;case 5:si(ae,ae.return);break;case 22:if(ae.memoizedState!==null){Qh(ue);continue}}ge!==null?(ge.return=ae,ve=ge):Qh(ue)}le=le.sibling}e:for(le=null,ue=t;;){if(ue.tag===5){if(le===null){le=ue;try{h=ue.stateNode,ne?(y=h.style,typeof y.setProperty=="function"?y.setProperty("display","none","important"):y.display="none"):($=ue.stateNode,Y=ue.memoizedProps.style,C=Y!=null&&Y.hasOwnProperty("display")?Y.display:null,$.style.display=$o("display",C))}catch(Ne){dt(t,t.return,Ne)}}}else if(ue.tag===6){if(le===null)try{ue.stateNode.nodeValue=ne?"":ue.memoizedProps}catch(Ne){dt(t,t.return,Ne)}}else if((ue.tag!==22&&ue.tag!==23||ue.memoizedState===null||ue===t)&&ue.child!==null){ue.child.return=ue,ue=ue.child;continue}if(ue===t)break e;for(;ue.sibling===null;){if(ue.return===null||ue.return===t)break e;le===ue&&(le=null),ue=ue.return}le===ue&&(le=null),ue.sibling.return=ue.return,ue=ue.sibling}}break;case 19:Mn(n,t),Gn(t),u&4&&Yh(t);break;case 21:break;default:Mn(n,t),Gn(t)}}function Gn(t){var n=t.flags;if(n&2){try{e:{for(var i=t.return;i!==null;){if(Uh(i)){var u=i;break e}i=i.return}throw Error(o(160))}switch(u.tag){case 5:var h=u.stateNode;u.flags&32&&(un(h,""),u.flags&=-33);var y=Wh(t);rc(t,y,h);break;case 3:case 4:var C=u.stateNode.containerInfo,$=Wh(t);nc(t,$,C);break;default:throw Error(o(161))}}catch(Y){dt(t,t.return,Y)}t.flags&=-3}n&4096&&(t.flags&=-4097)}function Qx(t,n,i){ve=t,Kh(t)}function Kh(t,n,i){for(var u=(t.mode&1)!==0;ve!==null;){var h=ve,y=h.child;if(h.tag===22&&u){var C=h.memoizedState!==null||Ps;if(!C){var $=h.alternate,Y=$!==null&&$.memoizedState!==null||Dt;$=Ps;var ne=Dt;if(Ps=C,(Dt=Y)&&!ne)for(ve=h;ve!==null;)C=ve,Y=C.child,C.tag===22&&C.memoizedState!==null?qh(h):Y!==null?(Y.return=C,ve=Y):qh(h);for(;y!==null;)ve=y,Kh(y),y=y.sibling;ve=h,Ps=$,Dt=ne}Zh(t)}else(h.subtreeFlags&8772)!==0&&y!==null?(y.return=h,ve=y):Zh(t)}}function Zh(t){for(;ve!==null;){var n=ve;if((n.flags&8772)!==0){var i=n.alternate;try{if((n.flags&8772)!==0)switch(n.tag){case 0:case 11:case 15:Dt||Rs(5,n);break;case 1:var u=n.stateNode;if(n.flags&4&&!Dt)if(i===null)u.componentDidMount();else{var h=n.elementType===n.type?i.memoizedProps:Pn(n.type,i.memoizedProps);u.componentDidUpdate(h,i.memoizedState,u.__reactInternalSnapshotBeforeUpdate)}var y=n.updateQueue;y!==null&&Qf(n,y,u);break;case 3:var C=n.updateQueue;if(C!==null){if(i=null,n.child!==null)switch(n.child.tag){case 5:i=n.child.stateNode;break;case 1:i=n.child.stateNode}Qf(n,C,i)}break;case 5:var $=n.stateNode;if(i===null&&n.flags&4){i=$;var Y=n.memoizedProps;switch(n.type){case"button":case"input":case"select":case"textarea":Y.autoFocus&&i.focus();break;case"img":Y.src&&(i.src=Y.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(n.memoizedState===null){var ne=n.alternate;if(ne!==null){var le=ne.memoizedState;if(le!==null){var ue=le.dehydrated;ue!==null&&Di(ue)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(o(163))}Dt||n.flags&512&&tc(n)}catch(ae){dt(n,n.return,ae)}}if(n===t){ve=null;break}if(i=n.sibling,i!==null){i.return=n.return,ve=i;break}ve=n.return}}function Qh(t){for(;ve!==null;){var n=ve;if(n===t){ve=null;break}var i=n.sibling;if(i!==null){i.return=n.return,ve=i;break}ve=n.return}}function qh(t){for(;ve!==null;){var n=ve;try{switch(n.tag){case 0:case 11:case 15:var i=n.return;try{Rs(4,n)}catch(Y){dt(n,i,Y)}break;case 1:var u=n.stateNode;if(typeof u.componentDidMount=="function"){var h=n.return;try{u.componentDidMount()}catch(Y){dt(n,h,Y)}}var y=n.return;try{tc(n)}catch(Y){dt(n,y,Y)}break;case 5:var C=n.return;try{tc(n)}catch(Y){dt(n,C,Y)}}}catch(Y){dt(n,n.return,Y)}if(n===t){ve=null;break}var $=n.sibling;if($!==null){$.return=n.return,ve=$;break}ve=n.return}}var qx=Math.ceil,Ms=j.ReactCurrentDispatcher,oc=j.ReactCurrentOwner,yn=j.ReactCurrentBatchConfig,We=0,wt=null,pt=null,jt=0,rn=0,li=Lr(0),xt=0,na=null,vo=0,Ts=0,ic=0,ra=null,Yt=null,ac=0,ui=1/0,yr=null,Ds=!1,sc=null,Or=null,Ls=!1,Hr=null,zs=0,oa=0,lc=null,Is=-1,$s=0;function Ft(){return(We&6)!==0?Ge():Is!==-1?Is:Is=Ge()}function Br(t){return(t.mode&1)===0?1:(We&2)!==0&&jt!==0?jt&-jt:zx.transition!==null?($s===0&&($s=Bo()),$s):(t=Qe,t!==0||(t=window.event,t=t===void 0?16:Jd(t.type)),t)}function Tn(t,n,i,u){if(50<oa)throw oa=0,lc=null,Error(o(185));co(t,i,u),((We&2)===0||t!==wt)&&(t===wt&&((We&2)===0&&(Ts|=i),xt===4&&Vr(t,jt)),Gt(t,u),i===1&&We===0&&(n.mode&1)===0&&(ui=Ge()+500,ds&&Ir()))}function Gt(t,n){var i=t.callbackNode;Vl(t,n);var u=Ho(t,t===wt?jt:0);if(u===0)i!==null&&ht(i),t.callbackNode=null,t.callbackPriority=0;else if(n=u&-u,t.callbackPriority!==n){if(i!=null&&ht(i),n===1)t.tag===0?Lx(ep.bind(null,t)):Af(ep.bind(null,t)),Rx(function(){(We&6)===0&&Ir()}),i=null;else{switch(Wd(u)){case 1:i=Vt;break;case 4:i=It;break;case 16:i=Bn;break;case 536870912:i=dn;break;default:i=Bn}i=lp(i,Jh.bind(null,t))}t.callbackPriority=n,t.callbackNode=i}}function Jh(t,n){if(Is=-1,$s=0,(We&6)!==0)throw Error(o(327));var i=t.callbackNode;if(ci()&&t.callbackNode!==i)return null;var u=Ho(t,t===wt?jt:0);if(u===0)return null;if((u&30)!==0||(u&t.expiredLanes)!==0||n)n=Fs(t,u);else{n=u;var h=We;We|=2;var y=np();(wt!==t||jt!==n)&&(yr=null,ui=Ge()+500,bo(t,n));do try{tv();break}catch($){tp(t,$)}while(!0);Cu(),Ms.current=y,We=h,pt!==null?n=0:(wt=null,jt=0,n=xt)}if(n!==0){if(n===2&&(h=ki(t),h!==0&&(u=h,n=uc(t,h))),n===1)throw i=na,bo(t,0),Vr(t,u),Gt(t,Ge()),i;if(n===6)Vr(t,u);else{if(h=t.current.alternate,(u&30)===0&&!Jx(h)&&(n=Fs(t,u),n===2&&(y=ki(t),y!==0&&(u=y,n=uc(t,y))),n===1))throw i=na,bo(t,0),Vr(t,u),Gt(t,Ge()),i;switch(t.finishedWork=h,t.finishedLanes=u,n){case 0:case 1:throw Error(o(345));case 2:_o(t,Yt,yr);break;case 3:if(Vr(t,u),(u&130023424)===u&&(n=ac+500-Ge(),10<n)){if(Ho(t,0)!==0)break;if(h=t.suspendedLanes,(h&u)!==u){Ft(),t.pingedLanes|=t.suspendedLanes&h;break}t.timeoutHandle=mu(_o.bind(null,t,Yt,yr),n);break}_o(t,Yt,yr);break;case 4:if(Vr(t,u),(u&4194240)===u)break;for(n=t.eventTimes,h=-1;0<u;){var C=31-Ke(u);y=1<<C,C=n[C],C>h&&(h=C),u&=~y}if(u=h,u=Ge()-u,u=(120>u?120:480>u?480:1080>u?1080:1920>u?1920:3e3>u?3e3:4320>u?4320:1960*qx(u/1960))-u,10<u){t.timeoutHandle=mu(_o.bind(null,t,Yt,yr),u);break}_o(t,Yt,yr);break;case 5:_o(t,Yt,yr);break;default:throw Error(o(329))}}}return Gt(t,Ge()),t.callbackNode===i?Jh.bind(null,t):null}function uc(t,n){var i=ra;return t.current.memoizedState.isDehydrated&&(bo(t,n).flags|=256),t=Fs(t,n),t!==2&&(n=Yt,Yt=i,n!==null&&cc(n)),t}function cc(t){Yt===null?Yt=t:Yt.push.apply(Yt,t)}function Jx(t){for(var n=t;;){if(n.flags&16384){var i=n.updateQueue;if(i!==null&&(i=i.stores,i!==null))for(var u=0;u<i.length;u++){var h=i[u],y=h.getSnapshot;h=h.value;try{if(!kn(y(),h))return!1}catch{return!1}}}if(i=n.child,n.subtreeFlags&16384&&i!==null)i.return=n,n=i;else{if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function Vr(t,n){for(n&=~ic,n&=~Ts,t.suspendedLanes|=n,t.pingedLanes&=~n,t=t.expirationTimes;0<n;){var i=31-Ke(n),u=1<<i;t[i]=-1,n&=~u}}function ep(t){if((We&6)!==0)throw Error(o(327));ci();var n=Ho(t,0);if((n&1)===0)return Gt(t,Ge()),null;var i=Fs(t,n);if(t.tag!==0&&i===2){var u=ki(t);u!==0&&(n=u,i=uc(t,u))}if(i===1)throw i=na,bo(t,0),Vr(t,n),Gt(t,Ge()),i;if(i===6)throw Error(o(345));return t.finishedWork=t.current.alternate,t.finishedLanes=n,_o(t,Yt,yr),Gt(t,Ge()),null}function dc(t,n){var i=We;We|=1;try{return t(n)}finally{We=i,We===0&&(ui=Ge()+500,ds&&Ir())}}function wo(t){Hr!==null&&Hr.tag===0&&(We&6)===0&&ci();var n=We;We|=1;var i=yn.transition,u=Qe;try{if(yn.transition=null,Qe=1,t)return t()}finally{Qe=u,yn.transition=i,We=n,(We&6)===0&&Ir()}}function fc(){rn=li.current,tt(li)}function bo(t,n){t.finishedWork=null,t.finishedLanes=0;var i=t.timeoutHandle;if(i!==-1&&(t.timeoutHandle=-1,Px(i)),pt!==null)for(i=pt.return;i!==null;){var u=i;switch(bu(u),u.tag){case 1:u=u.type.childContextTypes,u!=null&&us();break;case 3:ii(),tt(Ut),tt(Rt),Lu();break;case 5:Tu(u);break;case 4:ii();break;case 13:tt(at);break;case 19:tt(at);break;case 10:ku(u.type._context);break;case 22:case 23:fc()}i=i.return}if(wt=t,pt=t=Ur(t.current,null),jt=rn=n,xt=0,na=null,ic=Ts=vo=0,Yt=ra=null,go!==null){for(n=0;n<go.length;n++)if(i=go[n],u=i.interleaved,u!==null){i.interleaved=null;var h=u.next,y=i.pending;if(y!==null){var C=y.next;y.next=h,u.next=C}i.pending=u}go=null}return t}function tp(t,n){do{var i=pt;try{if(Cu(),bs.current=Es,_s){for(var u=st.memoizedState;u!==null;){var h=u.queue;h!==null&&(h.pending=null),u=u.next}_s=!1}if(xo=0,vt=yt=st=null,Zi=!1,Qi=0,oc.current=null,i===null||i.return===null){xt=1,na=n,pt=null;break}e:{var y=t,C=i.return,$=i,Y=n;if(n=jt,$.flags|=32768,Y!==null&&typeof Y=="object"&&typeof Y.then=="function"){var ne=Y,le=$,ue=le.tag;if((le.mode&1)===0&&(ue===0||ue===11||ue===15)){var ae=le.alternate;ae?(le.updateQueue=ae.updateQueue,le.memoizedState=ae.memoizedState,le.lanes=ae.lanes):(le.updateQueue=null,le.memoizedState=null)}var ge=Ch(C);if(ge!==null){ge.flags&=-257,kh(ge,C,$,y,n),ge.mode&1&&Eh(y,ne,n),n=ge,Y=ne;var be=n.updateQueue;if(be===null){var Ne=new Set;Ne.add(Y),n.updateQueue=Ne}else be.add(Y);break e}else{if((n&1)===0){Eh(y,ne,n),hc();break e}Y=Error(o(426))}}else if(nt&&$.mode&1){var ft=Ch(C);if(ft!==null){(ft.flags&65536)===0&&(ft.flags|=256),kh(ft,C,$,y,n),Nu(ai(Y,$));break e}}y=Y=ai(Y,$),xt!==4&&(xt=2),ra===null?ra=[y]:ra.push(y),y=C;do{switch(y.tag){case 3:y.flags|=65536,n&=-n,y.lanes|=n;var J=Sh(y,Y,n);Zf(y,J);break e;case 1:$=Y;var Z=y.type,ee=y.stateNode;if((y.flags&128)===0&&(typeof Z.getDerivedStateFromError=="function"||ee!==null&&typeof ee.componentDidCatch=="function"&&(Or===null||!Or.has(ee)))){y.flags|=65536,n&=-n,y.lanes|=n;var fe=Nh(y,$,n);Zf(y,fe);break e}}y=y.return}while(y!==null)}op(i)}catch(ke){n=ke,pt===i&&i!==null&&(pt=i=i.return);continue}break}while(!0)}function np(){var t=Ms.current;return Ms.current=Es,t===null?Es:t}function hc(){(xt===0||xt===3||xt===2)&&(xt=4),wt===null||(vo&268435455)===0&&(Ts&268435455)===0||Vr(wt,jt)}function Fs(t,n){var i=We;We|=2;var u=np();(wt!==t||jt!==n)&&(yr=null,bo(t,n));do try{ev();break}catch(h){tp(t,h)}while(!0);if(Cu(),We=i,Ms.current=u,pt!==null)throw Error(o(261));return wt=null,jt=0,xt}function ev(){for(;pt!==null;)rp(pt)}function tv(){for(;pt!==null&&!Xe();)rp(pt)}function rp(t){var n=sp(t.alternate,t,rn);t.memoizedProps=t.pendingProps,n===null?op(t):pt=n,oc.current=null}function op(t){var n=t;do{var i=n.alternate;if(t=n.return,(n.flags&32768)===0){if(i=Yx(i,n,rn),i!==null){pt=i;return}}else{if(i=Gx(i,n),i!==null){i.flags&=32767,pt=i;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{xt=6,pt=null;return}}if(n=n.sibling,n!==null){pt=n;return}pt=n=t}while(n!==null);xt===0&&(xt=5)}function _o(t,n,i){var u=Qe,h=yn.transition;try{yn.transition=null,Qe=1,nv(t,n,i,u)}finally{yn.transition=h,Qe=u}return null}function nv(t,n,i,u){do ci();while(Hr!==null);if((We&6)!==0)throw Error(o(327));i=t.finishedWork;var h=t.finishedLanes;if(i===null)return null;if(t.finishedWork=null,t.finishedLanes=0,i===t.current)throw Error(o(177));t.callbackNode=null,t.callbackPriority=0;var y=i.lanes|i.childLanes;if(Xa(t,y),t===wt&&(pt=wt=null,jt=0),(i.subtreeFlags&2064)===0&&(i.flags&2064)===0||Ls||(Ls=!0,lp(Bn,function(){return ci(),null})),y=(i.flags&15990)!==0,(i.subtreeFlags&15990)!==0||y){y=yn.transition,yn.transition=null;var C=Qe;Qe=1;var $=We;We|=4,oc.current=null,Zx(t,i),Gh(i,t),_x(hu),Ka=!!fu,hu=fu=null,t.current=i,Qx(i),Et(),We=$,Qe=C,yn.transition=y}else t.current=i;if(Ls&&(Ls=!1,Hr=t,zs=h),y=t.pendingLanes,y===0&&(Or=null),Ae(i.stateNode),Gt(t,Ge()),n!==null)for(u=t.onRecoverableError,i=0;i<n.length;i++)h=n[i],u(h.value,{componentStack:h.stack,digest:h.digest});if(Ds)throw Ds=!1,t=sc,sc=null,t;return(zs&1)!==0&&t.tag!==0&&ci(),y=t.pendingLanes,(y&1)!==0?t===lc?oa++:(oa=0,lc=t):oa=0,Ir(),null}function ci(){if(Hr!==null){var t=Wd(zs),n=yn.transition,i=Qe;try{if(yn.transition=null,Qe=16>t?16:t,Hr===null)var u=!1;else{if(t=Hr,Hr=null,zs=0,(We&6)!==0)throw Error(o(331));var h=We;for(We|=4,ve=t.current;ve!==null;){var y=ve,C=y.child;if((ve.flags&16)!==0){var $=y.deletions;if($!==null){for(var Y=0;Y<$.length;Y++){var ne=$[Y];for(ve=ne;ve!==null;){var le=ve;switch(le.tag){case 0:case 11:case 15:ta(8,le,y)}var ue=le.child;if(ue!==null)ue.return=le,ve=ue;else for(;ve!==null;){le=ve;var ae=le.sibling,ge=le.return;if(Vh(le),le===ne){ve=null;break}if(ae!==null){ae.return=ge,ve=ae;break}ve=ge}}}var be=y.alternate;if(be!==null){var Ne=be.child;if(Ne!==null){be.child=null;do{var ft=Ne.sibling;Ne.sibling=null,Ne=ft}while(Ne!==null)}}ve=y}}if((y.subtreeFlags&2064)!==0&&C!==null)C.return=y,ve=C;else e:for(;ve!==null;){if(y=ve,(y.flags&2048)!==0)switch(y.tag){case 0:case 11:case 15:ta(9,y,y.return)}var J=y.sibling;if(J!==null){J.return=y.return,ve=J;break e}ve=y.return}}var Z=t.current;for(ve=Z;ve!==null;){C=ve;var ee=C.child;if((C.subtreeFlags&2064)!==0&&ee!==null)ee.return=C,ve=ee;else e:for(C=Z;ve!==null;){if($=ve,($.flags&2048)!==0)try{switch($.tag){case 0:case 11:case 15:Rs(9,$)}}catch(ke){dt($,$.return,ke)}if($===C){ve=null;break e}var fe=$.sibling;if(fe!==null){fe.return=$.return,ve=fe;break e}ve=$.return}}if(We=h,Ir(),Ct&&typeof Ct.onPostCommitFiberRoot=="function")try{Ct.onPostCommitFiberRoot(fn,t)}catch{}u=!0}return u}finally{Qe=i,yn.transition=n}}return!1}function ip(t,n,i){n=ai(i,n),n=Sh(t,n,1),t=Fr(t,n,1),n=Ft(),t!==null&&(co(t,1,n),Gt(t,n))}function dt(t,n,i){if(t.tag===3)ip(t,t,i);else for(;n!==null;){if(n.tag===3){ip(n,t,i);break}else if(n.tag===1){var u=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Or===null||!Or.has(u))){t=ai(i,t),t=Nh(n,t,1),n=Fr(n,t,1),t=Ft(),n!==null&&(co(n,1,t),Gt(n,t));break}}n=n.return}}function rv(t,n,i){var u=t.pingCache;u!==null&&u.delete(n),n=Ft(),t.pingedLanes|=t.suspendedLanes&i,wt===t&&(jt&i)===i&&(xt===4||xt===3&&(jt&130023424)===jt&&500>Ge()-ac?bo(t,0):ic|=i),Gt(t,n)}function ap(t,n){n===0&&((t.mode&1)===0?n=1:(n=ur,ur<<=1,(ur&130023424)===0&&(ur=4194304)));var i=Ft();t=pr(t,n),t!==null&&(co(t,n,i),Gt(t,i))}function ov(t){var n=t.memoizedState,i=0;n!==null&&(i=n.retryLane),ap(t,i)}function iv(t,n){var i=0;switch(t.tag){case 13:var u=t.stateNode,h=t.memoizedState;h!==null&&(i=h.retryLane);break;case 19:u=t.stateNode;break;default:throw Error(o(314))}u!==null&&u.delete(n),ap(t,i)}var sp;sp=function(t,n,i){if(t!==null)if(t.memoizedProps!==n.pendingProps||Ut.current)Xt=!0;else{if((t.lanes&i)===0&&(n.flags&128)===0)return Xt=!1,Xx(t,n,i);Xt=(t.flags&131072)!==0}else Xt=!1,nt&&(n.flags&1048576)!==0&&Of(n,hs,n.index);switch(n.lanes=0,n.tag){case 2:var u=n.type;js(t,n),t=n.pendingProps;var h=qo(n,Rt.current);oi(n,i),h=$u(null,n,u,t,h,i);var y=Fu();return n.flags|=1,typeof h=="object"&&h!==null&&typeof h.render=="function"&&h.$$typeof===void 0?(n.tag=1,n.memoizedState=null,n.updateQueue=null,Wt(u)?(y=!0,cs(n)):y=!1,n.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,Ru(n),h.updater=Cs,n.stateNode=h,h._reactInternals=n,Uu(n,u,t,i),n=Gu(null,n,u,!0,y,i)):(n.tag=0,nt&&y&&wu(n),$t(null,n,h,i),n=n.child),n;case 16:u=n.elementType;e:{switch(js(t,n),t=n.pendingProps,h=u._init,u=h(u._payload),n.type=u,h=n.tag=sv(u),t=Pn(u,t),h){case 0:n=Yu(null,n,u,t,i);break e;case 1:n=Dh(null,n,u,t,i);break e;case 11:n=jh(null,n,u,t,i);break e;case 14:n=Ph(null,n,u,Pn(u.type,t),i);break e}throw Error(o(306,u,""))}return n;case 0:return u=n.type,h=n.pendingProps,h=n.elementType===u?h:Pn(u,h),Yu(t,n,u,h,i);case 1:return u=n.type,h=n.pendingProps,h=n.elementType===u?h:Pn(u,h),Dh(t,n,u,h,i);case 3:e:{if(Lh(n),t===null)throw Error(o(387));u=n.pendingProps,y=n.memoizedState,h=y.element,Kf(t,n),vs(n,u,null,i);var C=n.memoizedState;if(u=C.element,y.isDehydrated)if(y={element:u,isDehydrated:!1,cache:C.cache,pendingSuspenseBoundaries:C.pendingSuspenseBoundaries,transitions:C.transitions},n.updateQueue.baseState=y,n.memoizedState=y,n.flags&256){h=ai(Error(o(423)),n),n=zh(t,n,u,i,h);break e}else if(u!==h){h=ai(Error(o(424)),n),n=zh(t,n,u,i,h);break e}else for(nn=Dr(n.stateNode.containerInfo.firstChild),tn=n,nt=!0,jn=null,i=Yf(n,null,u,i),n.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling;else{if(ti(),u===h){n=gr(t,n,i);break e}$t(t,n,u,i)}n=n.child}return n;case 5:return qf(n),t===null&&Su(n),u=n.type,h=n.pendingProps,y=t!==null?t.memoizedProps:null,C=h.children,pu(u,h)?C=null:y!==null&&pu(u,y)&&(n.flags|=32),Th(t,n),$t(t,n,C,i),n.child;case 6:return t===null&&Su(n),null;case 13:return Ih(t,n,i);case 4:return Mu(n,n.stateNode.containerInfo),u=n.pendingProps,t===null?n.child=ni(n,null,u,i):$t(t,n,u,i),n.child;case 11:return u=n.type,h=n.pendingProps,h=n.elementType===u?h:Pn(u,h),jh(t,n,u,h,i);case 7:return $t(t,n,n.pendingProps,i),n.child;case 8:return $t(t,n,n.pendingProps.children,i),n.child;case 12:return $t(t,n,n.pendingProps.children,i),n.child;case 10:e:{if(u=n.type._context,h=n.pendingProps,y=n.memoizedProps,C=h.value,Je(gs,u._currentValue),u._currentValue=C,y!==null)if(kn(y.value,C)){if(y.children===h.children&&!Ut.current){n=gr(t,n,i);break e}}else for(y=n.child,y!==null&&(y.return=n);y!==null;){var $=y.dependencies;if($!==null){C=y.child;for(var Y=$.firstContext;Y!==null;){if(Y.context===u){if(y.tag===1){Y=mr(-1,i&-i),Y.tag=2;var ne=y.updateQueue;if(ne!==null){ne=ne.shared;var le=ne.pending;le===null?Y.next=Y:(Y.next=le.next,le.next=Y),ne.pending=Y}}y.lanes|=i,Y=y.alternate,Y!==null&&(Y.lanes|=i),ju(y.return,i,n),$.lanes|=i;break}Y=Y.next}}else if(y.tag===10)C=y.type===n.type?null:y.child;else if(y.tag===18){if(C=y.return,C===null)throw Error(o(341));C.lanes|=i,$=C.alternate,$!==null&&($.lanes|=i),ju(C,i,n),C=y.sibling}else C=y.child;if(C!==null)C.return=y;else for(C=y;C!==null;){if(C===n){C=null;break}if(y=C.sibling,y!==null){y.return=C.return,C=y;break}C=C.return}y=C}$t(t,n,h.children,i),n=n.child}return n;case 9:return h=n.type,u=n.pendingProps.children,oi(n,i),h=mn(h),u=u(h),n.flags|=1,$t(t,n,u,i),n.child;case 14:return u=n.type,h=Pn(u,n.pendingProps),h=Pn(u.type,h),Ph(t,n,u,h,i);case 15:return Rh(t,n,n.type,n.pendingProps,i);case 17:return u=n.type,h=n.pendingProps,h=n.elementType===u?h:Pn(u,h),js(t,n),n.tag=1,Wt(u)?(t=!0,cs(n)):t=!1,oi(n,i),bh(n,u,h),Uu(n,u,h,i),Gu(null,n,u,!0,t,i);case 19:return Fh(t,n,i);case 22:return Mh(t,n,i)}throw Error(o(156,n.tag))};function lp(t,n){return it(t,n)}function av(t,n,i,u){this.tag=t,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function xn(t,n,i,u){return new av(t,n,i,u)}function pc(t){return t=t.prototype,!(!t||!t.isReactComponent)}function sv(t){if(typeof t=="function")return pc(t)?1:0;if(t!=null){if(t=t.$$typeof,t===H)return 11;if(t===L)return 14}return 2}function Ur(t,n){var i=t.alternate;return i===null?(i=xn(t.tag,n,t.key,t.mode),i.elementType=t.elementType,i.type=t.type,i.stateNode=t.stateNode,i.alternate=t,t.alternate=i):(i.pendingProps=n,i.type=t.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=t.flags&14680064,i.childLanes=t.childLanes,i.lanes=t.lanes,i.child=t.child,i.memoizedProps=t.memoizedProps,i.memoizedState=t.memoizedState,i.updateQueue=t.updateQueue,n=t.dependencies,i.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},i.sibling=t.sibling,i.index=t.index,i.ref=t.ref,i}function As(t,n,i,u,h,y){var C=2;if(u=t,typeof t=="function")pc(t)&&(C=1);else if(typeof t=="string")C=5;else e:switch(t){case R:return So(i.children,h,y,n);case A:C=8,h|=8;break;case K:return t=xn(12,i,n,h|2),t.elementType=K,t.lanes=y,t;case W:return t=xn(13,i,n,h),t.elementType=W,t.lanes=y,t;case M:return t=xn(19,i,n,h),t.elementType=M,t.lanes=y,t;case Q:return Os(i,h,y,n);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case F:C=10;break e;case V:C=9;break e;case H:C=11;break e;case L:C=14;break e;case X:C=16,u=null;break e}throw Error(o(130,t==null?t:typeof t,""))}return n=xn(C,i,n,h),n.elementType=t,n.type=u,n.lanes=y,n}function So(t,n,i,u){return t=xn(7,t,u,n),t.lanes=i,t}function Os(t,n,i,u){return t=xn(22,t,u,n),t.elementType=Q,t.lanes=i,t.stateNode={isHidden:!1},t}function mc(t,n,i){return t=xn(6,t,null,n),t.lanes=i,t}function gc(t,n,i){return n=xn(4,t.children!==null?t.children:[],t.key,n),n.lanes=i,n.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},n}function lv(t,n,i,u,h){this.tag=n,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ji(0),this.expirationTimes=ji(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ji(0),this.identifierPrefix=u,this.onRecoverableError=h,this.mutableSourceEagerHydrationData=null}function yc(t,n,i,u,h,y,C,$,Y){return t=new lv(t,n,i,$,Y),n===1?(n=1,y===!0&&(n|=8)):n=0,y=xn(3,null,null,n),t.current=y,y.stateNode=t,y.memoizedState={element:u,isDehydrated:i,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ru(y),t}function uv(t,n,i){var u=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:D,key:u==null?null:""+u,children:t,containerInfo:n,implementation:i}}function up(t){if(!t)return zr;t=t._reactInternals;e:{if(we(t)!==t||t.tag!==1)throw Error(o(170));var n=t;do{switch(n.tag){case 3:n=n.stateNode.context;break e;case 1:if(Wt(n.type)){n=n.stateNode.__reactInternalMemoizedMergedChildContext;break e}}n=n.return}while(n!==null);throw Error(o(171))}if(t.tag===1){var i=t.type;if(Wt(i))return $f(t,i,n)}return n}function cp(t,n,i,u,h,y,C,$,Y){return t=yc(i,u,!0,t,h,y,C,$,Y),t.context=up(null),i=t.current,u=Ft(),h=Br(i),y=mr(u,h),y.callback=n??null,Fr(i,y,h),t.current.lanes=h,co(t,h,u),Gt(t,u),t}function Hs(t,n,i,u){var h=n.current,y=Ft(),C=Br(h);return i=up(i),n.context===null?n.context=i:n.pendingContext=i,n=mr(y,C),n.payload={element:t},u=u===void 0?null:u,u!==null&&(n.callback=u),t=Fr(h,n,C),t!==null&&(Tn(t,h,C,y),xs(t,h,C)),C}function Bs(t){return t=t.current,t.child?(t.child.tag===5,t.child.stateNode):null}function dp(t,n){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var i=t.retryLane;t.retryLane=i!==0&&i<n?i:n}}function xc(t,n){dp(t,n),(t=t.alternate)&&dp(t,n)}function cv(){return null}var fp=typeof reportError=="function"?reportError:function(t){console.error(t)};function vc(t){this._internalRoot=t}Vs.prototype.render=vc.prototype.render=function(t){var n=this._internalRoot;if(n===null)throw Error(o(409));Hs(t,n,null,null)},Vs.prototype.unmount=vc.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var n=t.containerInfo;wo(function(){Hs(null,t,null,null)}),n[cr]=null}};function Vs(t){this._internalRoot=t}Vs.prototype.unstable_scheduleHydration=function(t){if(t){var n=Gd();t={blockedOn:null,target:t,priority:n};for(var i=0;i<Rr.length&&n!==0&&n<Rr[i].priority;i++);Rr.splice(i,0,t),i===0&&Qd(t)}};function wc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Us(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function hp(){}function dv(t,n,i,u,h){if(h){if(typeof u=="function"){var y=u;u=function(){var ne=Bs(C);y.call(ne)}}var C=cp(n,u,t,0,null,!1,!1,"",hp);return t._reactRootContainer=C,t[cr]=C.current,Bi(t.nodeType===8?t.parentNode:t),wo(),C}for(;h=t.lastChild;)t.removeChild(h);if(typeof u=="function"){var $=u;u=function(){var ne=Bs(Y);$.call(ne)}}var Y=yc(t,0,!1,null,null,!1,!1,"",hp);return t._reactRootContainer=Y,t[cr]=Y.current,Bi(t.nodeType===8?t.parentNode:t),wo(function(){Hs(n,Y,i,u)}),Y}function Ws(t,n,i,u,h){var y=i._reactRootContainer;if(y){var C=y;if(typeof h=="function"){var $=h;h=function(){var Y=Bs(C);$.call(Y)}}Hs(n,C,t,h)}else C=dv(i,n,t,h,u);return Bs(C)}Xd=function(t){switch(t.tag){case 3:var n=t.stateNode;if(n.current.memoizedState.isDehydrated){var i=Un(n.pendingLanes);i!==0&&(Ul(n,i|1),Gt(n,Ge()),(We&6)===0&&(ui=Ge()+500,Ir()))}break;case 13:wo(function(){var u=pr(t,1);if(u!==null){var h=Ft();Tn(u,t,1,h)}}),xc(t,1)}},Wl=function(t){if(t.tag===13){var n=pr(t,134217728);if(n!==null){var i=Ft();Tn(n,t,134217728,i)}xc(t,134217728)}},Yd=function(t){if(t.tag===13){var n=Br(t),i=pr(t,n);if(i!==null){var u=Ft();Tn(i,t,n,u)}xc(t,n)}},Gd=function(){return Qe},Kd=function(t,n){var i=Qe;try{return Qe=t,n()}finally{Qe=i}},On=function(t,n,i){switch(n){case"input":if(ut(t,i),n=i.name,i.type==="radio"&&n!=null){for(i=t;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll("input[name="+JSON.stringify(""+n)+'][type="radio"]'),n=0;n<i.length;n++){var u=i[n];if(u!==t&&u.form===t.form){var h=ls(u);if(!h)throw Error(o(90));ye(u),ut(u,h)}}}break;case"textarea":Ot(t,i);break;case"select":n=i.value,n!=null&&At(t,!!i.multiple,n,!1)}},so=dc,ir=wo;var fv={usingClientEntryPoint:!1,Events:[Wi,Zo,ls,ao,Oo,dc]},ia={findFiberByHostInstance:fo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},hv={bundleType:ia.bundleType,version:ia.version,rendererPackageName:ia.rendererPackageName,rendererConfig:ia.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:j.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Fe(t),t===null?null:t.stateNode},findFiberByHostInstance:ia.findFiberByHostInstance||cv,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Xs=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Xs.isDisabled&&Xs.supportsFiber)try{fn=Xs.inject(hv),Ct=Xs}catch{}}return Kt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=fv,Kt.createPortal=function(t,n){var i=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!wc(n))throw Error(o(200));return uv(t,n,null,i)},Kt.createRoot=function(t,n){if(!wc(t))throw Error(o(299));var i=!1,u="",h=fp;return n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(u=n.identifierPrefix),n.onRecoverableError!==void 0&&(h=n.onRecoverableError)),n=yc(t,1,!1,null,null,i,!1,u,h),t[cr]=n.current,Bi(t.nodeType===8?t.parentNode:t),new vc(n)},Kt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var n=t._reactInternals;if(n===void 0)throw typeof t.render=="function"?Error(o(188)):(t=Object.keys(t).join(","),Error(o(268,t)));return t=Fe(n),t=t===null?null:t.stateNode,t},Kt.flushSync=function(t){return wo(t)},Kt.hydrate=function(t,n,i){if(!Us(n))throw Error(o(200));return Ws(null,t,n,!0,i)},Kt.hydrateRoot=function(t,n,i){if(!wc(t))throw Error(o(405));var u=i!=null&&i.hydratedSources||null,h=!1,y="",C=fp;if(i!=null&&(i.unstable_strictMode===!0&&(h=!0),i.identifierPrefix!==void 0&&(y=i.identifierPrefix),i.onRecoverableError!==void 0&&(C=i.onRecoverableError)),n=cp(n,null,t,1,i??null,h,!1,y,C),t[cr]=n.current,Bi(t),u)for(t=0;t<u.length;t++)i=u[t],h=i._getVersion,h=h(i._source),n.mutableSourceEagerHydrationData==null?n.mutableSourceEagerHydrationData=[i,h]:n.mutableSourceEagerHydrationData.push(i,h);return new Vs(n)},Kt.render=function(t,n,i){if(!Us(n))throw Error(o(200));return Ws(null,t,n,!1,i)},Kt.unmountComponentAtNode=function(t){if(!Us(t))throw Error(o(40));return t._reactRootContainer?(wo(function(){Ws(null,null,t,!1,function(){t._reactRootContainer=null,t[cr]=null})}),!0):!1},Kt.unstable_batchedUpdates=dc,Kt.unstable_renderSubtreeIntoContainer=function(t,n,i,u){if(!Us(i))throw Error(o(200));if(t==null||t._reactInternals===void 0)throw Error(o(38));return Ws(t,n,i,!1,u)},Kt.version="18.3.1-next-f1338f8080-20240426",Kt}var bp;function h0(){if(bp)return Sc.exports;bp=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(r){console.error(r)}}return e(),Sc.exports=_v(),Sc.exports}var _p;function Sv(){if(_p)return Ys;_p=1;var e=h0();return Ys.createRoot=e.createRoot,Ys.hydrateRoot=e.hydrateRoot,Ys}var Nv=Sv();var p0=e=>{throw TypeError(e)},Ev=(e,r,o)=>r.has(e)||p0("Cannot "+o),Cc=(e,r,o)=>(Ev(e,r,"read from private field"),o?o.call(e):r.get(e)),Cv=(e,r,o)=>r.has(e)?p0("Cannot add the same private member more than once"):r instanceof WeakSet?r.add(e):r.set(e,o),Sp="popstate";function kv(e={}){function r(a,s){let{pathname:l,search:c,hash:f}=a.location;return va("",{pathname:l,search:c,hash:f},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function o(a,s){return typeof s=="string"?s:qn(s)}return Pv(r,o,null,e)}function $e(e,r){if(e===!1||e===null||typeof e>"u")throw new Error(r)}function mt(e,r){if(!e){typeof console<"u"&&console.warn(r);try{throw new Error(r)}catch{}}}function jv(){return Math.random().toString(36).substring(2,10)}function Np(e,r){return{usr:e.state,key:e.key,idx:r}}function va(e,r,o=null,a){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof r=="string"?eo(r):r,state:o,key:r&&r.key||a||jv()}}function qn({pathname:e="/",search:r="",hash:o=""}){return r&&r!=="?"&&(e+=r.charAt(0)==="?"?r:"?"+r),o&&o!=="#"&&(e+=o.charAt(0)==="#"?o:"#"+o),e}function eo(e){let r={};if(e){let o=e.indexOf("#");o>=0&&(r.hash=e.substring(o),e=e.substring(0,o));let a=e.indexOf("?");a>=0&&(r.search=e.substring(a),e=e.substring(0,a)),e&&(r.pathname=e)}return r}function Pv(e,r,o,a={}){let{window:s=document.defaultView,v5Compat:l=!1}=a,c=s.history,f="POP",m=null,p=x();p==null&&(p=0,c.replaceState({...c.state,idx:p},""));function x(){return(c.state||{idx:null}).idx}function g(){f="POP";let N=x(),_=N==null?null:N-p;p=N,m&&m({action:f,location:k.location,delta:_})}function v(N,_){f="PUSH";let P=va(k.location,N,_);p=x()+1;let b=Np(P,p),j=k.createHref(P);try{c.pushState(b,"",j)}catch(I){if(I instanceof DOMException&&I.name==="DataCloneError")throw I;s.location.assign(j)}l&&m&&m({action:f,location:k.location,delta:1})}function w(N,_){f="REPLACE";let P=va(k.location,N,_);p=x();let b=Np(P,p),j=k.createHref(P);c.replaceState(b,"",j),l&&m&&m({action:f,location:k.location,delta:0})}function S(N){return m0(N)}let k={get action(){return f},get location(){return e(s,c)},listen(N){if(m)throw new Error("A history only accepts one active listener");return s.addEventListener(Sp,g),m=N,()=>{s.removeEventListener(Sp,g),m=null}},createHref(N){return r(s,N)},createURL:S,encodeLocation(N){let _=S(N);return{pathname:_.pathname,search:_.search,hash:_.hash}},push:v,replace:w,go(N){return c.go(N)}};return k}function m0(e,r=!1){let o="http://localhost";typeof window<"u"&&(o=window.location.origin!=="null"?window.location.origin:window.location.href),$e(o,"No window.location.(origin|href) available to create URL");let a=typeof e=="string"?e:qn(e);return a=a.replace(/ $/,"%20"),!r&&a.startsWith("//")&&(a=o+a),new URL(a,o)}var fa,Ep=class{constructor(e){if(Cv(this,fa,new Map),e)for(let[r,o]of e)this.set(r,o)}get(e){if(Cc(this,fa).has(e))return Cc(this,fa).get(e);if(e.defaultValue!==void 0)return e.defaultValue;throw new Error("No value found for context")}set(e,r){Cc(this,fa).set(e,r)}};fa=new WeakMap;var Rv=new Set(["lazy","caseSensitive","path","id","index","children"]);function Mv(e){return Rv.has(e)}var Tv=new Set(["lazy","caseSensitive","path","id","index","middleware","children"]);function Dv(e){return Tv.has(e)}function Lv(e){return e.index===!0}function wa(e,r,o=[],a={},s=!1){return e.map((l,c)=>{let f=[...o,String(c)],m=typeof l.id=="string"?l.id:f.join("-");if($e(l.index!==!0||!l.children,"Cannot specify children on an index route"),$e(s||!a[m],`Found a route id collision on id "${m}".  Route id's must be globally unique within Data Router usages`),Lv(l)){let p={...l,id:m};return a[m]=Cp(p,r(p)),p}else{let p={...l,id:m,children:void 0};return a[m]=Cp(p,r(p)),l.children&&(p.children=wa(l.children,r,f,a,s)),p}})}function Cp(e,r){return Object.assign(e,{...r,...typeof r.lazy=="object"&&r.lazy!=null?{lazy:{...e.lazy,...r.lazy}}:{}})}function Kr(e,r,o="/"){return ha(e,r,o,!1)}function ha(e,r,o,a){let s=typeof r=="string"?eo(r):r,l=bn(s.pathname||"/",o);if(l==null)return null;let c=g0(e);Iv(c);let f=null;for(let m=0;f==null&&m<c.length;++m){let p=Yv(l);f=Wv(c[m],p,a)}return f}function zv(e,r){let{route:o,pathname:a,params:s}=e;return{id:o.id,pathname:a,params:s,data:r[o.id],loaderData:r[o.id],handle:o.handle}}function g0(e,r=[],o=[],a="",s=!1){let l=(c,f,m=s,p)=>{let x={relativePath:p===void 0?c.path||"":p,caseSensitive:c.caseSensitive===!0,childrenIndex:f,route:c};if(x.relativePath.startsWith("/")){if(!x.relativePath.startsWith(a)&&m)return;$e(x.relativePath.startsWith(a),`Absolute route path "${x.relativePath}" nested under path "${a}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),x.relativePath=x.relativePath.slice(a.length)}let g=Zn([a,x.relativePath]),v=o.concat(x);c.children&&c.children.length>0&&($e(c.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${g}".`),g0(c.children,r,v,g,m)),!(c.path==null&&!c.index)&&r.push({path:g,score:Vv(g,c.index),routesMeta:v})};return e.forEach((c,f)=>{if(c.path===""||!c.path?.includes("?"))l(c,f);else for(let m of y0(c.path))l(c,f,!0,m)}),r}function y0(e){let r=e.split("/");if(r.length===0)return[];let[o,...a]=r,s=o.endsWith("?"),l=o.replace(/\?$/,"");if(a.length===0)return s?[l,""]:[l];let c=y0(a.join("/")),f=[];return f.push(...c.map(m=>m===""?l:[l,m].join("/"))),s&&f.push(...c),f.map(m=>e.startsWith("/")&&m===""?"/":m)}function Iv(e){e.sort((r,o)=>r.score!==o.score?o.score-r.score:Uv(r.routesMeta.map(a=>a.childrenIndex),o.routesMeta.map(a=>a.childrenIndex)))}var $v=/^:[\w-]+$/,Fv=3,Av=2,Ov=1,Hv=10,Bv=-2,kp=e=>e==="*";function Vv(e,r){let o=e.split("/"),a=o.length;return o.some(kp)&&(a+=Bv),r&&(a+=Av),o.filter(s=>!kp(s)).reduce((s,l)=>s+($v.test(l)?Fv:l===""?Ov:Hv),a)}function Uv(e,r){return e.length===r.length&&e.slice(0,-1).every((a,s)=>a===r[s])?e[e.length-1]-r[r.length-1]:0}function Wv(e,r,o=!1){let{routesMeta:a}=e,s={},l="/",c=[];for(let f=0;f<a.length;++f){let m=a[f],p=f===a.length-1,x=l==="/"?r:r.slice(l.length)||"/",g=gl({path:m.relativePath,caseSensitive:m.caseSensitive,end:p},x),v=m.route;if(!g&&p&&o&&!a[a.length-1].route.index&&(g=gl({path:m.relativePath,caseSensitive:m.caseSensitive,end:!1},x)),!g)return null;Object.assign(s,g.params),c.push({params:s,pathname:Zn([l,g.pathname]),pathnameBase:Zv(Zn([l,g.pathnameBase])),route:v}),g.pathnameBase!=="/"&&(l=Zn([l,g.pathnameBase]))}return c}function gl(e,r){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[o,a]=Xv(e.path,e.caseSensitive,e.end),s=r.match(o);if(!s)return null;let l=s[0],c=l.replace(/(.)\/+$/,"$1"),f=s.slice(1);return{params:a.reduce((p,{paramName:x,isOptional:g},v)=>{if(x==="*"){let S=f[v]||"";c=l.slice(0,l.length-S.length).replace(/(.)\/+$/,"$1")}const w=f[v];return g&&!w?p[x]=void 0:p[x]=(w||"").replace(/%2F/g,"/"),p},{}),pathname:l,pathnameBase:c,pattern:e}}function Xv(e,r=!1,o=!0){mt(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let a=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,f,m)=>(a.push({paramName:f,isOptional:m!=null}),m?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(a.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):o?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,r?void 0:"i"),a]}function Yv(e){try{return e.split("/").map(r=>decodeURIComponent(r).replace(/\//g,"%2F")).join("/")}catch(r){return mt(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${r}).`),e}}function bn(e,r){if(r==="/")return e;if(!e.toLowerCase().startsWith(r.toLowerCase()))return null;let o=r.endsWith("/")?r.length-1:r.length,a=e.charAt(o);return a&&a!=="/"?null:e.slice(o)||"/"}function Gv({basename:e,pathname:r}){return r==="/"?e:Zn([e,r])}var x0=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ud=e=>x0.test(e);function Kv(e,r="/"){let{pathname:o,search:a="",hash:s=""}=typeof e=="string"?eo(e):e,l;return o?(o=o.replace(/\/\/+/g,"/"),o.startsWith("/")?l=jp(o.substring(1),"/"):l=jp(o,r)):l=r,{pathname:l,search:Qv(a),hash:qv(s)}}function jp(e,r){let o=r.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?o.length>1&&o.pop():s!=="."&&o.push(s)}),o.length>1?o.join("/"):"/"}function kc(e,r,o,a){return`Cannot include a '${e}' character in a manually specified \`to.${r}\` field [${JSON.stringify(a)}].  Please separate it out to the \`to.${o}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function v0(e){return e.filter((r,o)=>o===0||r.route.path&&r.route.path.length>0)}function cd(e){let r=v0(e);return r.map((o,a)=>a===r.length-1?o.pathname:o.pathnameBase)}function dd(e,r,o,a=!1){let s;typeof e=="string"?s=eo(e):(s={...e},$e(!s.pathname||!s.pathname.includes("?"),kc("?","pathname","search",s)),$e(!s.pathname||!s.pathname.includes("#"),kc("#","pathname","hash",s)),$e(!s.search||!s.search.includes("#"),kc("#","search","hash",s)));let l=e===""||s.pathname==="",c=l?"/":s.pathname,f;if(c==null)f=o;else{let g=r.length-1;if(!a&&c.startsWith("..")){let v=c.split("/");for(;v[0]==="..";)v.shift(),g-=1;s.pathname=v.join("/")}f=g>=0?r[g]:"/"}let m=Kv(s,f),p=c&&c!=="/"&&c.endsWith("/"),x=(l||c===".")&&o.endsWith("/");return!m.pathname.endsWith("/")&&(p||x)&&(m.pathname+="/"),m}var Zn=e=>e.join("/").replace(/\/\/+/g,"/"),Zv=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Qv=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,qv=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e,Ta=class{constructor(e,r,o,a=!1){this.status=e,this.statusText=r||"",this.internal=a,o instanceof Error?(this.data=o.toString(),this.error=o):this.data=o}};function ba(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}function Da(e){return e.map(r=>r.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var w0=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function b0(e,r){let o=e;if(typeof o!="string"||!x0.test(o))return{absoluteURL:void 0,isExternal:!1,to:o};let a=o,s=!1;if(w0)try{let l=new URL(window.location.href),c=o.startsWith("//")?new URL(l.protocol+o):new URL(o),f=bn(c.pathname,r);c.origin===l.origin&&f!=null?o=f+c.search+c.hash:s=!0}catch{mt(!1,`<Link to="${o}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:a,isExternal:s,to:o}}var qr=Symbol("Uninstrumented");function Jv(e,r){let o={lazy:[],"lazy.loader":[],"lazy.action":[],"lazy.middleware":[],middleware:[],loader:[],action:[]};e.forEach(s=>s({id:r.id,index:r.index,path:r.path,instrument(l){let c=Object.keys(o);for(let f of c)l[f]&&o[f].push(l[f])}}));let a={};if(typeof r.lazy=="function"&&o.lazy.length>0){let s=hi(o.lazy,r.lazy,()=>{});s&&(a.lazy=s)}if(typeof r.lazy=="object"){let s=r.lazy;["middleware","loader","action"].forEach(l=>{let c=s[l],f=o[`lazy.${l}`];if(typeof c=="function"&&f.length>0){let m=hi(f,c,()=>{});m&&(a.lazy=Object.assign(a.lazy||{},{[l]:m}))}})}return["loader","action"].forEach(s=>{let l=r[s];if(typeof l=="function"&&o[s].length>0){let c=l[qr]??l,f=hi(o[s],c,(...m)=>Pp(m[0]));f&&(s==="loader"&&c.hydrate===!0&&(f.hydrate=!0),f[qr]=c,a[s]=f)}}),r.middleware&&r.middleware.length>0&&o.middleware.length>0&&(a.middleware=r.middleware.map(s=>{let l=s[qr]??s,c=hi(o.middleware,l,(...f)=>Pp(f[0]));return c?(c[qr]=l,c):s})),a}function e1(e,r){let o={navigate:[],fetch:[]};if(r.forEach(a=>a({instrument(s){let l=Object.keys(s);for(let c of l)s[c]&&o[c].push(s[c])}})),o.navigate.length>0){let a=e.navigate[qr]??e.navigate,s=hi(o.navigate,a,(...l)=>{let[c,f]=l;return{to:typeof c=="number"||typeof c=="string"?c:c?qn(c):".",...Rp(e,f??{})}});s&&(s[qr]=a,e.navigate=s)}if(o.fetch.length>0){let a=e.fetch[qr]??e.fetch,s=hi(o.fetch,a,(...l)=>{let[c,,f,m]=l;return{href:f??".",fetcherKey:c,...Rp(e,m??{})}});s&&(s[qr]=a,e.fetch=s)}return e}function hi(e,r,o){return e.length===0?null:async(...a)=>{let s=await _0(e,o(...a),()=>r(...a),e.length-1);if(s.type==="error")throw s.value;return s.value}}async function _0(e,r,o,a){let s=e[a],l;if(s){let c,f=async()=>(c?console.error("You cannot call instrumented handlers more than once"):c=_0(e,r,o,a-1),l=await c,$e(l,"Expected a result"),l.type==="error"&&l.value instanceof Error?{status:"error",error:l.value}:{status:"success",error:void 0});try{await s(f,r)}catch(m){console.error("An instrumentation function threw an error:",m)}c||await f(),await c}else try{l={type:"success",value:await o()}}catch(c){l={type:"error",value:c}}return l||{type:"error",value:new Error("No result assigned in instrumentation chain.")}}function Pp(e){let{request:r,context:o,params:a,unstable_pattern:s}=e;return{request:t1(r),params:{...a},unstable_pattern:s,context:n1(o)}}function Rp(e,r){return{currentUrl:qn(e.state.location),..."formMethod"in r?{formMethod:r.formMethod}:{},..."formEncType"in r?{formEncType:r.formEncType}:{},..."formData"in r?{formData:r.formData}:{},..."body"in r?{body:r.body}:{}}}function t1(e){return{method:e.method,url:e.url,headers:{get:(...r)=>e.headers.get(...r)}}}function n1(e){if(o1(e)){let r={...e};return Object.freeze(r),r}else return{get:r=>e.get(r)}}var r1=Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function o1(e){if(e===null||typeof e!="object")return!1;const r=Object.getPrototypeOf(e);return r===Object.prototype||r===null||Object.getOwnPropertyNames(r).sort().join("\0")===r1}var S0=["POST","PUT","PATCH","DELETE"],i1=new Set(S0),a1=["GET",...S0],s1=new Set(a1),N0=new Set([301,302,303,307,308]),l1=new Set([307,308]),jc={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},u1={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},sa={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},c1=e=>({hasErrorBoundary:!!e.hasErrorBoundary}),E0="remix-router-transitions",C0=Symbol("ResetLoaderData");function d1(e){const r=e.window?e.window:typeof window<"u"?window:void 0,o=typeof r<"u"&&typeof r.document<"u"&&typeof r.document.createElement<"u";$e(e.routes.length>0,"You must provide a non-empty routes array to createRouter");let a=e.hydrationRouteProperties||[],s=e.mapRouteProperties||c1,l=s;if(e.unstable_instrumentations){let O=e.unstable_instrumentations;l=q=>({...s(q),...Jv(O.map(te=>te.route).filter(Boolean),q)})}let c={},f=wa(e.routes,l,void 0,c),m,p=e.basename||"/";p.startsWith("/")||(p=`/${p}`);let x=e.dataStrategy||g1,g={...e.future},v=null,w=new Set,S=null,k=null,N=null,_=e.hydrationData!=null,P=Kr(f,e.history.location,p),b=!1,j=null,I;if(P==null&&!e.patchRoutesOnNavigation){let O=vn(404,{pathname:e.history.location.pathname}),{matches:q,route:te}=Gs(f);I=!0,P=q,j={[te.id]:O}}else if(P&&!e.hydrationData&&ir(P,f,e.history.location.pathname).active&&(P=null),P)if(P.some(O=>O.route.lazy))I=!1;else if(!P.some(O=>fd(O.route)))I=!0;else{let O=e.hydrationData?e.hydrationData.loaderData:null,q=e.hydrationData?e.hydrationData.errors:null;if(q){let te=P.findIndex(se=>q[se.route.id]!==void 0);I=P.slice(0,te+1).every(se=>!Xc(se.route,O,q))}else I=P.every(te=>!Xc(te.route,O,q))}else{I=!1,P=[];let O=ir(null,f,e.history.location.pathname);O.active&&O.matches&&(b=!0,P=O.matches)}let D,R={historyAction:e.history.action,location:e.history.location,matches:P,initialized:I,navigation:jc,restoreScrollPosition:e.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:e.hydrationData&&e.hydrationData.loaderData||{},actionData:e.hydrationData&&e.hydrationData.actionData||null,errors:e.hydrationData&&e.hydrationData.errors||j,fetchers:new Map,blockers:new Map},A="POP",K=null,F=!1,V,H=!1,W=new Map,M=null,L=!1,X=!1,Q=new Set,z=new Map,G=0,U=-1,T=new Map,B=new Set,oe=new Map,re=new Map,ce=new Set,me=new Map,he,ie=null;function pe(){if(v=e.history.listen(({action:O,location:q,delta:te})=>{if(he){he(),he=void 0;return}mt(me.size===0||te!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let se=Nn({currentLocation:R.location,nextLocation:q,historyAction:O});if(se&&te!=null){let de=new Promise(Se=>{he=Se});e.history.go(te*-1),On(se,{state:"blocked",location:q,proceed(){On(se,{state:"proceeding",proceed:void 0,reset:void 0,location:q}),de.then(()=>e.history.go(te))},reset(){let Se=new Map(R.blockers);Se.set(se,sa),ye({blockers:Se})}}),K?.resolve(),K=null;return}return Oe(O,q)}),o){L1(r,W);let O=()=>z1(r,W);r.addEventListener("pagehide",O),M=()=>r.removeEventListener("pagehide",O)}return R.initialized||Oe("POP",R.location,{initialHydration:!0}),D}function De(){v&&v(),M&&M(),w.clear(),V&&V.abort(),R.fetchers.forEach((O,q)=>oo(q)),R.blockers.forEach((O,q)=>Cr(q))}function ze(O){return w.add(O),()=>w.delete(O)}function ye(O,q={}){O.matches&&(O.matches=O.matches.map(de=>{let Se=c[de.route.id],xe=de.route;return xe.element!==Se.element||xe.errorElement!==Se.errorElement||xe.hydrateFallbackElement!==Se.hydrateFallbackElement?{...de,route:Se}:de})),R={...R,...O};let te=[],se=[];R.fetchers.forEach((de,Se)=>{de.state==="idle"&&(ce.has(Se)?te.push(Se):se.push(Se))}),ce.forEach(de=>{!R.fetchers.has(de)&&!z.has(de)&&te.push(de)}),[...w].forEach(de=>de(R,{deletedFetchers:te,newErrors:O.errors??null,viewTransitionOpts:q.viewTransitionOpts,flushSync:q.flushSync===!0})),te.forEach(de=>oo(de)),se.forEach(de=>R.fetchers.delete(de))}function Pe(O,q,{flushSync:te}={}){let se=R.actionData!=null&&R.navigation.formMethod!=null&&Lt(R.navigation.formMethod)&&R.navigation.state==="loading"&&O.state?._isRedirect!==!0,de;q.actionData?Object.keys(q.actionData).length>0?de=q.actionData:de=null:se?de=R.actionData:de=null;let Se=q.loaderData?Op(R.loaderData,q.loaderData,q.matches||[],q.errors):R.loaderData,xe=R.blockers;xe.size>0&&(xe=new Map(xe),xe.forEach((Re,Ee)=>xe.set(Ee,sa)));let _e=L?!1:so(O,q.matches||R.matches),Ce=F===!0||R.navigation.formMethod!=null&&Lt(R.navigation.formMethod)&&O.state?._isRedirect!==!0;m&&(f=m,m=void 0),L||A==="POP"||(A==="PUSH"?e.history.push(O,O.state):A==="REPLACE"&&e.history.replace(O,O.state));let we;if(A==="POP"){let Re=W.get(R.location.pathname);Re&&Re.has(O.pathname)?we={currentLocation:R.location,nextLocation:O}:W.has(O.pathname)&&(we={currentLocation:O,nextLocation:R.location})}else if(H){let Re=W.get(R.location.pathname);Re?Re.add(O.pathname):(Re=new Set([O.pathname]),W.set(R.location.pathname,Re)),we={currentLocation:R.location,nextLocation:O}}ye({...q,actionData:de,loaderData:Se,historyAction:A,location:O,initialized:!0,navigation:jc,revalidation:"idle",restoreScrollPosition:_e,preventScrollReset:Ce,blockers:xe},{viewTransitionOpts:we,flushSync:te===!0}),A="POP",F=!1,H=!1,L=!1,X=!1,K?.resolve(),K=null,ie?.resolve(),ie=null}async function Be(O,q){if(K?.resolve(),K=null,typeof O=="number"){K||(K=Up());let Fe=K.promise;return e.history.go(O),Fe}let te=Wc(R.location,R.matches,p,O,q?.fromRouteId,q?.relative),{path:se,submission:de,error:Se}=Mp(!1,te,q),xe=R.location,_e=va(R.location,se,q&&q.state);_e={..._e,...e.history.encodeLocation(_e)};let Ce=q&&q.replace!=null?q.replace:void 0,we="PUSH";Ce===!0?we="REPLACE":Ce===!1||de!=null&&Lt(de.formMethod)&&de.formAction===R.location.pathname+R.location.search&&(we="REPLACE");let Re=q&&"preventScrollReset"in q?q.preventScrollReset===!0:void 0,Ee=(q&&q.flushSync)===!0,He=Nn({currentLocation:xe,nextLocation:_e,historyAction:we});if(He){On(He,{state:"blocked",location:_e,proceed(){On(He,{state:"proceeding",proceed:void 0,reset:void 0,location:_e}),Be(O,q)},reset(){let Fe=new Map(R.blockers);Fe.set(He,sa),ye({blockers:Fe})}});return}await Oe(we,_e,{submission:de,pendingError:Se,preventScrollReset:Re,replace:q&&q.replace,enableViewTransition:q&&q.viewTransition,flushSync:Ee,callSiteDefaultShouldRevalidate:q&&q.unstable_defaultShouldRevalidate})}function Ze(){ie||(ie=Up()),Jt(),ye({revalidation:"loading"});let O=ie.promise;return R.navigation.state==="submitting"?O:R.navigation.state==="idle"?(Oe(R.historyAction,R.location,{startUninterruptedRevalidation:!0}),O):(Oe(A||R.historyAction,R.navigation.location,{overrideNavigation:R.navigation,enableViewTransition:H===!0}),O)}async function Oe(O,q,te){V&&V.abort(),V=null,A=O,L=(te&&te.startUninterruptedRevalidation)===!0,Oo(R.location,R.matches),F=(te&&te.preventScrollReset)===!0,H=(te&&te.enableViewTransition)===!0;let se=m||f,de=te&&te.overrideNavigation,Se=te?.initialHydration&&R.matches&&R.matches.length>0&&!b?R.matches:Kr(se,q,p),xe=(te&&te.flushSync)===!0;if(Se&&R.initialized&&!X&&N1(R.location,q)&&!(te&&te.submission&&Lt(te.submission.formMethod))){Pe(q,{matches:Se},{flushSync:xe});return}let _e=ir(Se,se,q.pathname);if(_e.active&&_e.matches&&(Se=_e.matches),!Se){let{error:it,notFoundMatches:ht,route:Xe}=cn(q.pathname);Pe(q,{matches:ht,loaderData:{},errors:{[Xe.id]:it}},{flushSync:xe});return}V=new AbortController;let Ce=fi(e.history,q,V.signal,te&&te.submission),we=e.getContext?await e.getContext():new Ep,Re;if(te&&te.pendingError)Re=[Zr(Se).route.id,{type:"error",error:te.pendingError}];else if(te&&te.submission&&Lt(te.submission.formMethod)){let it=await ut(Ce,q,te.submission,Se,we,_e.active,te&&te.initialHydration===!0,{replace:te.replace,flushSync:xe});if(it.shortCircuited)return;if(it.pendingActionResult){let[ht,Xe]=it.pendingActionResult;if(on(Xe)&&ba(Xe.error)&&Xe.error.status===404){V=null,Pe(q,{matches:it.matches,loaderData:{},errors:{[ht]:Xe.error}});return}}Se=it.matches||Se,Re=it.pendingActionResult,de=Pc(q,te.submission),xe=!1,_e.active=!1,Ce=fi(e.history,Ce.url,Ce.signal)}let{shortCircuited:Ee,matches:He,loaderData:Fe,errors:ct}=await Qt(Ce,q,Se,we,_e.active,de,te&&te.submission,te&&te.fetcherSubmission,te&&te.replace,te&&te.initialHydration===!0,xe,Re,te&&te.callSiteDefaultShouldRevalidate);Ee||(V=null,Pe(q,{matches:He||Se,...Hp(Re),loaderData:Fe,errors:ct}))}async function ut(O,q,te,se,de,Se,xe,_e={}){Jt();let Ce=T1(q,te);if(ye({navigation:Ce},{flushSync:_e.flushSync===!0}),Se){let Ee=await Hn(se,q.pathname,O.signal);if(Ee.type==="aborted")return{shortCircuited:!0};if(Ee.type==="error"){if(Ee.partialMatches.length===0){let{matches:Fe,route:ct}=Gs(f);return{matches:Fe,pendingActionResult:[ct.id,{type:"error",error:Ee.error}]}}let He=Zr(Ee.partialMatches).route.id;return{matches:Ee.partialMatches,pendingActionResult:[He,{type:"error",error:Ee.error}]}}else if(Ee.matches)se=Ee.matches;else{let{notFoundMatches:He,error:Fe,route:ct}=cn(q.pathname);return{matches:He,pendingActionResult:[ct.id,{type:"error",error:Fe}]}}}let we,Re=ll(se,q);if(!Re.route.action&&!Re.route.lazy)we={type:"error",error:vn(405,{method:O.method,pathname:q.pathname,routeId:Re.route.id})};else{let Ee=gi(l,c,O,se,Re,xe?[]:a,de),He=await qt(O,Ee,de,null);if(we=He[Re.route.id],!we){for(let Fe of se)if(He[Fe.route.id]){we=He[Fe.route.id];break}}if(O.signal.aborted)return{shortCircuited:!0}}if(Eo(we)){let Ee;return _e&&_e.replace!=null?Ee=_e.replace:Ee=$p(we.response.headers.get("Location"),new URL(O.url),p,e.history)===R.location.pathname+R.location.search,await Ot(O,we,!0,{submission:te,replace:Ee}),{shortCircuited:!0}}if(on(we)){let Ee=Zr(se,Re.route.id);return(_e&&_e.replace)!==!0&&(A="PUSH"),{matches:se,pendingActionResult:[Ee.route.id,we,Re.route.id]}}return{matches:se,pendingActionResult:[Re.route.id,we]}}async function Qt(O,q,te,se,de,Se,xe,_e,Ce,we,Re,Ee,He){let Fe=Se||Pc(q,xe),ct=xe||_e||Vp(Fe),it=!L&&!we;if(de){if(it){let Ke=Pt(Ee);ye({navigation:Fe,...Ke!==void 0?{actionData:Ke}:{}},{flushSync:Re})}let Ae=await Hn(te,q.pathname,O.signal);if(Ae.type==="aborted")return{shortCircuited:!0};if(Ae.type==="error"){if(Ae.partialMatches.length===0){let{matches:Vn,route:En}=Gs(f);return{matches:Vn,loaderData:{},errors:{[En.id]:Ae.error}}}let Ke=Zr(Ae.partialMatches).route.id;return{matches:Ae.partialMatches,loaderData:{},errors:{[Ke]:Ae.error}}}else if(Ae.matches)te=Ae.matches;else{let{error:Ke,notFoundMatches:Vn,route:En}=cn(q.pathname);return{matches:Vn,loaderData:{},errors:{[En.id]:Ke}}}}let ht=m||f,{dsMatches:Xe,revalidatingFetchers:Et}=Tp(O,se,l,c,e.history,R,te,ct,q,we?[]:a,we===!0,X,Q,ce,oe,B,ht,p,e.patchRoutesOnNavigation!=null,Ee,He);if(U=++G,!e.dataStrategy&&!Xe.some(Ae=>Ae.shouldLoad)&&!Xe.some(Ae=>Ae.route.middleware&&Ae.route.middleware.length>0)&&Et.length===0){let Ae=Nr();return Pe(q,{matches:te,loaderData:{},errors:Ee&&on(Ee[1])?{[Ee[0]]:Ee[1].error}:null,...Hp(Ee),...Ae?{fetchers:new Map(R.fetchers)}:{}},{flushSync:Re}),{shortCircuited:!0}}if(it){let Ae={};if(!de){Ae.navigation=Fe;let Ke=Pt(Ee);Ke!==void 0&&(Ae.actionData=Ke)}Et.length>0&&(Ae.fetchers=zt(Et)),ye(Ae,{flushSync:Re})}Et.forEach(Ae=>{Bt(Ae.key),Ae.controller&&z.set(Ae.key,Ae.controller)});let Ge=()=>Et.forEach(Ae=>Bt(Ae.key));V&&V.signal.addEventListener("abort",Ge);let{loaderResults:sr,fetcherResults:Vt}=await ln(Xe,Et,O,se);if(O.signal.aborted)return{shortCircuited:!0};V&&V.signal.removeEventListener("abort",Ge),Et.forEach(Ae=>z.delete(Ae.key));let It=Ks(sr);if(It)return await Ot(O,It.result,!0,{replace:Ce}),{shortCircuited:!0};if(It=Ks(Vt),It)return B.add(It.key),await Ot(O,It.result,!0,{replace:Ce}),{shortCircuited:!0};let{loaderData:Bn,errors:lr}=Ap(R,te,sr,Ee,Et,Vt);we&&R.errors&&(lr={...R.errors,...lr});let dn=Nr(),fn=Er(U),Ct=dn||fn||Et.length>0;return{matches:te,loaderData:Bn,errors:lr,...Ct?{fetchers:new Map(R.fetchers)}:{}}}function Pt(O){if(O&&!on(O[1]))return{[O[0]]:O[1].data};if(R.actionData)return Object.keys(R.actionData).length===0?null:R.actionData}function zt(O){return O.forEach(q=>{let te=R.fetchers.get(q.key),se=la(void 0,te?te.data:void 0);R.fetchers.set(q.key,se)}),new Map(R.fetchers)}async function At(O,q,te,se){Bt(O);let de=(se&&se.flushSync)===!0,Se=m||f,xe=Wc(R.location,R.matches,p,te,q,se?.relative),_e=Kr(Se,xe,p),Ce=ir(_e,Se,xe);if(Ce.active&&Ce.matches&&(_e=Ce.matches),!_e){Ht(O,q,vn(404,{pathname:xe}),{flushSync:de});return}let{path:we,submission:Re,error:Ee}=Mp(!0,xe,se);if(Ee){Ht(O,q,Ee,{flushSync:de});return}let He=e.getContext?await e.getContext():new Ep,Fe=(se&&se.preventScrollReset)===!0;if(Re&&Lt(Re.formMethod)){await Sn(O,q,we,_e,He,Ce.active,de,Fe,Re,se&&se.unstable_defaultShouldRevalidate);return}oe.set(O,{routeId:q,path:we}),await An(O,q,we,_e,He,Ce.active,de,Fe,Re)}async function Sn(O,q,te,se,de,Se,xe,_e,Ce,we){Jt(),oe.delete(O);let Re=R.fetchers.get(O);Nt(O,D1(Ce,Re),{flushSync:xe});let Ee=new AbortController,He=fi(e.history,te,Ee.signal,Ce);if(Se){let qe=await Hn(se,new URL(He.url).pathname,He.signal,O);if(qe.type==="aborted")return;if(qe.type==="error"){Ht(O,q,qe.error,{flushSync:xe});return}else if(qe.matches)se=qe.matches;else{Ht(O,q,vn(404,{pathname:te}),{flushSync:xe});return}}let Fe=ll(se,te);if(!Fe.route.action&&!Fe.route.lazy){let qe=vn(405,{method:Ce.formMethod,pathname:te,routeId:q});Ht(O,q,qe,{flushSync:xe});return}z.set(O,Ee);let ct=G,it=gi(l,c,He,se,Fe,a,de),ht=await qt(He,it,de,O),Xe=ht[Fe.route.id];if(!Xe){for(let qe of it)if(ht[qe.route.id]){Xe=ht[qe.route.id];break}}if(He.signal.aborted){z.get(O)===Ee&&z.delete(O);return}if(ce.has(O)){if(Eo(Xe)||on(Xe)){Nt(O,vr(void 0));return}}else{if(Eo(Xe))if(z.delete(O),U>ct){Nt(O,vr(void 0));return}else return B.add(O),Nt(O,la(Ce)),Ot(He,Xe,!1,{fetcherSubmission:Ce,preventScrollReset:_e});if(on(Xe)){Ht(O,q,Xe.error);return}}let Et=R.navigation.location||R.location,Ge=fi(e.history,Et,Ee.signal),sr=m||f,Vt=R.navigation.state!=="idle"?Kr(sr,R.navigation.location,p):R.matches;$e(Vt,"Didn't find any matches after fetcher action");let It=++G;T.set(O,It);let Bn=la(Ce,Xe.data);R.fetchers.set(O,Bn);let{dsMatches:lr,revalidatingFetchers:dn}=Tp(Ge,de,l,c,e.history,R,Vt,Ce,Et,a,!1,X,Q,ce,oe,B,sr,p,e.patchRoutesOnNavigation!=null,[Fe.route.id,Xe],we);dn.filter(qe=>qe.key!==O).forEach(qe=>{let Cn=qe.key,ur=R.fetchers.get(Cn),Un=la(void 0,ur?ur.data:void 0);R.fetchers.set(Cn,Un),Bt(Cn),qe.controller&&z.set(Cn,qe.controller)}),ye({fetchers:new Map(R.fetchers)});let fn=()=>dn.forEach(qe=>Bt(qe.key));Ee.signal.addEventListener("abort",fn);let{loaderResults:Ct,fetcherResults:Ae}=await ln(lr,dn,Ge,de);if(Ee.signal.aborted)return;if(Ee.signal.removeEventListener("abort",fn),T.delete(O),z.delete(O),dn.forEach(qe=>z.delete(qe.key)),R.fetchers.has(O)){let qe=vr(Xe.data);R.fetchers.set(O,qe)}let Ke=Ks(Ct);if(Ke)return Ot(Ge,Ke.result,!1,{preventScrollReset:_e});if(Ke=Ks(Ae),Ke)return B.add(Ke.key),Ot(Ge,Ke.result,!1,{preventScrollReset:_e});let{loaderData:Vn,errors:En}=Ap(R,Vt,Ct,void 0,dn,Ae);Er(It),R.navigation.state==="loading"&&It>U?($e(A,"Expected pending action"),V&&V.abort(),Pe(R.navigation.location,{matches:Vt,loaderData:Vn,errors:En,fetchers:new Map(R.fetchers)})):(ye({errors:En,loaderData:Op(R.loaderData,Vn,Vt,En),fetchers:new Map(R.fetchers)}),X=!1)}async function An(O,q,te,se,de,Se,xe,_e,Ce){let we=R.fetchers.get(O);Nt(O,la(Ce,we?we.data:void 0),{flushSync:xe});let Re=new AbortController,Ee=fi(e.history,te,Re.signal);if(Se){let Xe=await Hn(se,new URL(Ee.url).pathname,Ee.signal,O);if(Xe.type==="aborted")return;if(Xe.type==="error"){Ht(O,q,Xe.error,{flushSync:xe});return}else if(Xe.matches)se=Xe.matches;else{Ht(O,q,vn(404,{pathname:te}),{flushSync:xe});return}}let He=ll(se,te);z.set(O,Re);let Fe=G,ct=gi(l,c,Ee,se,He,a,de),ht=(await qt(Ee,ct,de,O))[He.route.id];if(z.get(O)===Re&&z.delete(O),!Ee.signal.aborted){if(ce.has(O)){Nt(O,vr(void 0));return}if(Eo(ht))if(U>Fe){Nt(O,vr(void 0));return}else{B.add(O),await Ot(Ee,ht,!1,{preventScrollReset:_e});return}if(on(ht)){Ht(O,q,ht.error);return}Nt(O,vr(ht.data))}}async function Ot(O,q,te,{submission:se,fetcherSubmission:de,preventScrollReset:Se,replace:xe}={}){te||(K?.resolve(),K=null),q.response.headers.has("X-Remix-Revalidate")&&(X=!0);let _e=q.response.headers.get("Location");$e(_e,"Expected a Location header on the redirect Response"),_e=$p(_e,new URL(O.url),p,e.history);let Ce=va(R.location,_e,{_isRedirect:!0});if(o){let ct=!1;if(q.response.headers.has("X-Remix-Reload-Document"))ct=!0;else if(ud(_e)){const it=m0(_e,!0);ct=it.origin!==r.location.origin||bn(it.pathname,p)==null}if(ct){xe?r.location.replace(_e):r.location.assign(_e);return}}V=null;let we=xe===!0||q.response.headers.has("X-Remix-Replace")?"REPLACE":"PUSH",{formMethod:Re,formAction:Ee,formEncType:He}=R.navigation;!se&&!de&&Re&&Ee&&He&&(se=Vp(R.navigation));let Fe=se||de;if(l1.has(q.response.status)&&Fe&&Lt(Fe.formMethod))await Oe(we,Ce,{submission:{...Fe,formAction:_e},preventScrollReset:Se||F,enableViewTransition:te?H:void 0});else{let ct=Pc(Ce,se);await Oe(we,Ce,{overrideNavigation:ct,fetcherSubmission:de,preventScrollReset:Se||F,enableViewTransition:te?H:void 0})}}async function qt(O,q,te,se){let de,Se={};try{de=await x1(x,O,q,se,te,!1)}catch(xe){return q.filter(_e=>_e.shouldLoad).forEach(_e=>{Se[_e.route.id]={type:"error",error:xe}}),Se}if(O.signal.aborted)return Se;if(!Lt(O.method))for(let xe of q){if(de[xe.route.id]?.type==="error")break;!de.hasOwnProperty(xe.route.id)&&!R.loaderData.hasOwnProperty(xe.route.id)&&(!R.errors||!R.errors.hasOwnProperty(xe.route.id))&&xe.shouldCallHandler()&&(de[xe.route.id]={type:"error",result:new Error(`No result returned from dataStrategy for route ${xe.route.id}`)})}for(let[xe,_e]of Object.entries(de))if(j1(_e)){let Ce=_e.result;Se[xe]={type:"redirect",response:_1(Ce,O,xe,q,p)}}else Se[xe]=await b1(_e);return Se}async function ln(O,q,te,se){let de=qt(te,O,se,null),Se=Promise.all(q.map(async Ce=>{if(Ce.matches&&Ce.match&&Ce.request&&Ce.controller){let Re=(await qt(Ce.request,Ce.matches,se,Ce.key))[Ce.match.route.id];return{[Ce.key]:Re}}else return Promise.resolve({[Ce.key]:{type:"error",error:vn(404,{pathname:Ce.path})}})})),xe=await de,_e=(await Se).reduce((Ce,we)=>Object.assign(Ce,we),{});return{loaderResults:xe,fetcherResults:_e}}function Jt(){X=!0,oe.forEach((O,q)=>{z.has(q)&&Q.add(q),Bt(q)})}function Nt(O,q,te={}){R.fetchers.set(O,q),ye({fetchers:new Map(R.fetchers)},{flushSync:(te&&te.flushSync)===!0})}function Ht(O,q,te,se={}){let de=Zr(R.matches,q);oo(O),ye({errors:{[de.route.id]:te},fetchers:new Map(R.fetchers)},{flushSync:(se&&se.flushSync)===!0})}function un(O){return re.set(O,(re.get(O)||0)+1),ce.has(O)&&ce.delete(O),R.fetchers.get(O)||u1}function or(O,q){Bt(O,q?.reason),Nt(O,vr(null))}function oo(O){let q=R.fetchers.get(O);z.has(O)&&!(q&&q.state==="loading"&&T.has(O))&&Bt(O),oe.delete(O),T.delete(O),B.delete(O),ce.delete(O),Q.delete(O),R.fetchers.delete(O)}function $o(O){let q=(re.get(O)||0)-1;q<=0?(re.delete(O),ce.add(O)):re.set(O,q),ye({fetchers:new Map(R.fetchers)})}function Bt(O,q){let te=z.get(O);te&&(te.abort(q),z.delete(O))}function Fo(O){for(let q of O){let te=un(q),se=vr(te.data);R.fetchers.set(q,se)}}function Nr(){let O=[],q=!1;for(let te of B){let se=R.fetchers.get(te);$e(se,`Expected fetcher: ${te}`),se.state==="loading"&&(B.delete(te),O.push(te),q=!0)}return Fo(O),q}function Er(O){let q=[];for(let[te,se]of T)if(se<O){let de=R.fetchers.get(te);$e(de,`Expected fetcher: ${te}`),de.state==="loading"&&(Bt(te),T.delete(te),q.push(te))}return Fo(q),q.length>0}function io(O,q){let te=R.blockers.get(O)||sa;return me.get(O)!==q&&me.set(O,q),te}function Cr(O){R.blockers.delete(O),me.delete(O)}function On(O,q){let te=R.blockers.get(O)||sa;$e(te.state==="unblocked"&&q.state==="blocked"||te.state==="blocked"&&q.state==="blocked"||te.state==="blocked"&&q.state==="proceeding"||te.state==="blocked"&&q.state==="unblocked"||te.state==="proceeding"&&q.state==="unblocked",`Invalid blocker state transition: ${te.state} -> ${q.state}`);let se=new Map(R.blockers);se.set(O,q),ye({blockers:se})}function Nn({currentLocation:O,nextLocation:q,historyAction:te}){if(me.size===0)return;me.size>1&&mt(!1,"A router only supports one blocker at a time");let se=Array.from(me.entries()),[de,Se]=se[se.length-1],xe=R.blockers.get(de);if(!(xe&&xe.state==="proceeding")&&Se({currentLocation:O,nextLocation:q,historyAction:te}))return de}function cn(O){let q=vn(404,{pathname:O}),te=m||f,{matches:se,route:de}=Gs(te);return{notFoundMatches:se,route:de,error:q}}function Ao(O,q,te){if(S=O,N=q,k=te||null,!_&&R.navigation===jc){_=!0;let se=so(R.location,R.matches);se!=null&&ye({restoreScrollPosition:se})}return()=>{S=null,N=null,k=null}}function ao(O,q){return k&&k(O,q.map(se=>zv(se,R.loaderData)))||O.key}function Oo(O,q){if(S&&N){let te=ao(O,q);S[te]=N()}}function so(O,q){if(S){let te=ao(O,q),se=S[te];if(typeof se=="number")return se}return null}function ir(O,q,te){if(e.patchRoutesOnNavigation)if(O){if(Object.keys(O[0].params).length>0)return{active:!0,matches:ha(q,te,p,!0)}}else return{active:!0,matches:ha(q,te,p,!0)||[]};return{active:!1,matches:null}}async function Hn(O,q,te,se){if(!e.patchRoutesOnNavigation)return{type:"success",matches:O};let de=O;for(;;){let Se=m==null,xe=m||f,_e=c;try{await e.patchRoutesOnNavigation({signal:te,path:q,matches:de,fetcherKey:se,patch:(Re,Ee)=>{te.aborted||Dp(Re,Ee,xe,_e,l,!1)}})}catch(Re){return{type:"error",error:Re,partialMatches:de}}finally{Se&&!te.aborted&&(f=[...f])}if(te.aborted)return{type:"aborted"};let Ce=Kr(xe,q,p),we=null;if(Ce){if(Object.keys(Ce[0].params).length===0)return{type:"success",matches:Ce};if(we=ha(xe,q,p,!0),!(we&&de.length<we.length&&lo(de,we.slice(0,de.length))))return{type:"success",matches:Ce}}if(we||(we=ha(xe,q,p,!0)),!we||lo(de,we))return{type:"success",matches:null};de=we}}function lo(O,q){return O.length===q.length&&O.every((te,se)=>te.route.id===q[se].route.id)}function ar(O){c={},m=wa(O,l,void 0,c)}function uo(O,q,te=!1){let se=m==null;Dp(O,q,m||f,c,l,te),se&&(f=[...f],ye({}))}return D={get basename(){return p},get future(){return g},get state(){return R},get routes(){return f},get window(){return r},initialize:pe,subscribe:ze,enableScrollRestoration:Ao,navigate:Be,fetch:At,revalidate:Ze,createHref:O=>e.history.createHref(O),encodeLocation:O=>e.history.encodeLocation(O),getFetcher:un,resetFetcher:or,deleteFetcher:$o,dispose:De,getBlocker:io,deleteBlocker:Cr,patchRoutes:uo,_internalFetchControllers:z,_internalSetRoutes:ar,_internalSetStateDoNotUseOrYouWillBreakYourApp(O){ye(O)}},e.unstable_instrumentations&&(D=e1(D,e.unstable_instrumentations.map(O=>O.router).filter(Boolean))),D}function f1(e){return e!=null&&("formData"in e&&e.formData!=null||"body"in e&&e.body!==void 0)}function Wc(e,r,o,a,s,l){let c,f;if(s){c=[];for(let p of r)if(c.push(p),p.route.id===s){f=p;break}}else c=r,f=r[r.length-1];let m=dd(a||".",cd(c),bn(e.pathname,o)||e.pathname,l==="path");if(a==null&&(m.search=e.search,m.hash=e.hash),(a==null||a===""||a===".")&&f){let p=pd(m.search);if(f.route.index&&!p)m.search=m.search?m.search.replace(/^\?/,"?index&"):"?index";else if(!f.route.index&&p){let x=new URLSearchParams(m.search),g=x.getAll("index");x.delete("index"),g.filter(w=>w).forEach(w=>x.append("index",w));let v=x.toString();m.search=v?`?${v}`:""}}return o!=="/"&&(m.pathname=Gv({basename:o,pathname:m.pathname})),qn(m)}function Mp(e,r,o){if(!o||!f1(o))return{path:r};if(o.formMethod&&!M1(o.formMethod))return{path:r,error:vn(405,{method:o.formMethod})};let a=()=>({path:r,error:vn(400,{type:"invalid-body"})}),l=(o.formMethod||"get").toUpperCase(),c=T0(r);if(o.body!==void 0){if(o.formEncType==="text/plain"){if(!Lt(l))return a();let g=typeof o.body=="string"?o.body:o.body instanceof FormData||o.body instanceof URLSearchParams?Array.from(o.body.entries()).reduce((v,[w,S])=>`${v}${w}=${S}
`,""):String(o.body);return{path:r,submission:{formMethod:l,formAction:c,formEncType:o.formEncType,formData:void 0,json:void 0,text:g}}}else if(o.formEncType==="application/json"){if(!Lt(l))return a();try{let g=typeof o.body=="string"?JSON.parse(o.body):o.body;return{path:r,submission:{formMethod:l,formAction:c,formEncType:o.formEncType,formData:void 0,json:g,text:void 0}}}catch{return a()}}}$e(typeof FormData=="function","FormData is not available in this environment");let f,m;if(o.formData)f=Gc(o.formData),m=o.formData;else if(o.body instanceof FormData)f=Gc(o.body),m=o.body;else if(o.body instanceof URLSearchParams)f=o.body,m=Fp(f);else if(o.body==null)f=new URLSearchParams,m=new FormData;else try{f=new URLSearchParams(o.body),m=Fp(f)}catch{return a()}let p={formMethod:l,formAction:c,formEncType:o&&o.formEncType||"application/x-www-form-urlencoded",formData:m,json:void 0,text:void 0};if(Lt(p.formMethod))return{path:r,submission:p};let x=eo(r);return e&&x.search&&pd(x.search)&&f.append("index",""),x.search=`?${f}`,{path:qn(x),submission:p}}function Tp(e,r,o,a,s,l,c,f,m,p,x,g,v,w,S,k,N,_,P,b,j){let I=b?on(b[1])?b[1].error:b[1].data:void 0,D=s.createURL(l.location),R=s.createURL(m),A;if(x&&l.errors){let L=Object.keys(l.errors)[0];A=c.findIndex(X=>X.route.id===L)}else if(b&&on(b[1])){let L=b[0];A=c.findIndex(X=>X.route.id===L)-1}let K=b?b[1].statusCode:void 0,F=K&&K>=400,V={currentUrl:D,currentParams:l.matches[0]?.params||{},nextUrl:R,nextParams:c[0].params,...f,actionResult:I,actionStatus:K},H=Da(c),W=c.map((L,X)=>{let{route:Q}=L,z=null;if(A!=null&&X>A?z=!1:Q.lazy?z=!0:fd(Q)?x?z=Xc(Q,l.loaderData,l.errors):h1(l.loaderData,l.matches[X],L)&&(z=!0):z=!1,z!==null)return Yc(o,a,e,H,L,p,r,z);let G=!1;typeof j=="boolean"?G=j:F?G=!1:(g||D.pathname+D.search===R.pathname+R.search||D.search!==R.search||p1(l.matches[X],L))&&(G=!0);let U={...V,defaultShouldRevalidate:G},T=ga(L,U);return Yc(o,a,e,H,L,p,r,T,U,j)}),M=[];return S.forEach((L,X)=>{if(x||!c.some(re=>re.route.id===L.routeId)||w.has(X))return;let Q=l.fetchers.get(X),z=Q&&Q.state!=="idle"&&Q.data===void 0,G=Kr(N,L.path,_);if(!G){if(P&&z)return;M.push({key:X,routeId:L.routeId,path:L.path,matches:null,match:null,request:null,controller:null});return}if(k.has(X))return;let U=ll(G,L.path),T=new AbortController,B=fi(s,L.path,T.signal),oe=null;if(v.has(X))v.delete(X),oe=gi(o,a,B,G,U,p,r);else if(z)g&&(oe=gi(o,a,B,G,U,p,r));else{let re;typeof j=="boolean"?re=j:F?re=!1:re=g;let ce={...V,defaultShouldRevalidate:re};ga(U,ce)&&(oe=gi(o,a,B,G,U,p,r,ce))}oe&&M.push({key:X,routeId:L.routeId,path:L.path,matches:oe,match:U,request:B,controller:T})}),{dsMatches:W,revalidatingFetchers:M}}function fd(e){return e.loader!=null||e.middleware!=null&&e.middleware.length>0}function Xc(e,r,o){if(e.lazy)return!0;if(!fd(e))return!1;let a=r!=null&&e.id in r,s=o!=null&&o[e.id]!==void 0;return!a&&s?!1:typeof e.loader=="function"&&e.loader.hydrate===!0?!0:!a&&!s}function h1(e,r,o){let a=!r||o.route.id!==r.route.id,s=!e.hasOwnProperty(o.route.id);return a||s}function p1(e,r){let o=e.route.path;return e.pathname!==r.pathname||o!=null&&o.endsWith("*")&&e.params["*"]!==r.params["*"]}function ga(e,r){if(e.route.shouldRevalidate){let o=e.route.shouldRevalidate(r);if(typeof o=="boolean")return o}return r.defaultShouldRevalidate}function Dp(e,r,o,a,s,l){let c;if(e){let p=a[e];$e(p,`No route found to patch children into: routeId = ${e}`),p.children||(p.children=[]),c=p.children}else c=o;let f=[],m=[];if(r.forEach(p=>{let x=c.find(g=>k0(p,g));x?m.push({existingRoute:x,newRoute:p}):f.push(p)}),f.length>0){let p=wa(f,s,[e||"_","patch",String(c?.length||"0")],a);c.push(...p)}if(l&&m.length>0)for(let p=0;p<m.length;p++){let{existingRoute:x,newRoute:g}=m[p],v=x,[w]=wa([g],s,[],{},!0);Object.assign(v,{element:w.element?w.element:v.element,errorElement:w.errorElement?w.errorElement:v.errorElement,hydrateFallbackElement:w.hydrateFallbackElement?w.hydrateFallbackElement:v.hydrateFallbackElement})}}function k0(e,r){return"id"in e&&"id"in r&&e.id===r.id?!0:e.index===r.index&&e.path===r.path&&e.caseSensitive===r.caseSensitive?(!e.children||e.children.length===0)&&(!r.children||r.children.length===0)?!0:e.children.every((o,a)=>r.children?.some(s=>k0(o,s))):!1}var Lp=new WeakMap,j0=({key:e,route:r,manifest:o,mapRouteProperties:a})=>{let s=o[r.id];if($e(s,"No route found in manifest"),!s.lazy||typeof s.lazy!="object")return;let l=s.lazy[e];if(!l)return;let c=Lp.get(s);c||(c={},Lp.set(s,c));let f=c[e];if(f)return f;let m=(async()=>{let p=Mv(e),g=s[e]!==void 0&&e!=="hasErrorBoundary";if(p)mt(!p,"Route property "+e+" is not a supported lazy route property. This property will be ignored."),c[e]=Promise.resolve();else if(g)mt(!1,`Route "${s.id}" has a static property "${e}" defined. The lazy property will be ignored.`);else{let v=await l();v!=null&&(Object.assign(s,{[e]:v}),Object.assign(s,a(s)))}typeof s.lazy=="object"&&(s.lazy[e]=void 0,Object.values(s.lazy).every(v=>v===void 0)&&(s.lazy=void 0))})();return c[e]=m,m},zp=new WeakMap;function m1(e,r,o,a,s){let l=o[e.id];if($e(l,"No route found in manifest"),!e.lazy)return{lazyRoutePromise:void 0,lazyHandlerPromise:void 0};if(typeof e.lazy=="function"){let x=zp.get(l);if(x)return{lazyRoutePromise:x,lazyHandlerPromise:x};let g=(async()=>{$e(typeof e.lazy=="function","No lazy route function found");let v=await e.lazy(),w={};for(let S in v){let k=v[S];if(k===void 0)continue;let N=Dv(S),P=l[S]!==void 0&&S!=="hasErrorBoundary";N?mt(!N,"Route property "+S+" is not a supported property to be returned from a lazy route function. This property will be ignored."):P?mt(!P,`Route "${l.id}" has a static property "${S}" defined but its lazy function is also returning a value for this property. The lazy route property "${S}" will be ignored.`):w[S]=k}Object.assign(l,w),Object.assign(l,{...a(l),lazy:void 0})})();return zp.set(l,g),g.catch(()=>{}),{lazyRoutePromise:g,lazyHandlerPromise:g}}let c=Object.keys(e.lazy),f=[],m;for(let x of c){if(s&&s.includes(x))continue;let g=j0({key:x,route:e,manifest:o,mapRouteProperties:a});g&&(f.push(g),x===r&&(m=g))}let p=f.length>0?Promise.all(f).then(()=>{}):void 0;return p?.catch(()=>{}),m?.catch(()=>{}),{lazyRoutePromise:p,lazyHandlerPromise:m}}async function Ip(e){let r=e.matches.filter(s=>s.shouldLoad),o={};return(await Promise.all(r.map(s=>s.resolve()))).forEach((s,l)=>{o[r[l].route.id]=s}),o}async function g1(e){return e.matches.some(r=>r.route.middleware)?P0(e,()=>Ip(e)):Ip(e)}function P0(e,r){return y1(e,r,a=>{if(R1(a))throw a;return a},C1,o);function o(a,s,l){if(l)return Promise.resolve(Object.assign(l.value,{[s]:{type:"error",result:a}}));{let{matches:c}=e,f=Math.min(Math.max(c.findIndex(p=>p.route.id===s),0),Math.max(c.findIndex(p=>p.shouldCallHandler()),0)),m=Zr(c,c[f].route.id).route.id;return Promise.resolve({[m]:{type:"error",result:a}})}}}async function y1(e,r,o,a,s){let{matches:l,request:c,params:f,context:m,unstable_pattern:p}=e,x=l.flatMap(v=>v.route.middleware?v.route.middleware.map(w=>[v.route.id,w]):[]);return await R0({request:c,params:f,context:m,unstable_pattern:p},x,r,o,a,s)}async function R0(e,r,o,a,s,l,c=0){let{request:f}=e;if(f.signal.aborted)throw f.signal.reason??new Error(`Request aborted: ${f.method} ${f.url}`);let m=r[c];if(!m)return await o();let[p,x]=m,g,v=async()=>{if(g)throw new Error("You may only call `next()` once per middleware");try{return g={value:await R0(e,r,o,a,s,l,c+1)},g.value}catch(w){return g={value:await l(w,p,g)},g.value}};try{let w=await x(e,v),S=w!=null?a(w):void 0;return s(S)?S:g?S??g.value:(g={value:await v()},g.value)}catch(w){return await l(w,p,g)}}function M0(e,r,o,a,s){let l=j0({key:"middleware",route:a.route,manifest:r,mapRouteProperties:e}),c=m1(a.route,Lt(o.method)?"action":"loader",r,e,s);return{middleware:l,route:c.lazyRoutePromise,handler:c.lazyHandlerPromise}}function Yc(e,r,o,a,s,l,c,f,m=null,p){let x=!1,g=M0(e,r,o,s,l);return{...s,_lazyPromises:g,shouldLoad:f,shouldRevalidateArgs:m,shouldCallHandler(v){return x=!0,m?typeof p=="boolean"?ga(s,{...m,defaultShouldRevalidate:p}):typeof v=="boolean"?ga(s,{...m,defaultShouldRevalidate:v}):ga(s,m):f},resolve(v){let{lazy:w,loader:S,middleware:k}=s.route,N=x||f||v&&!Lt(o.method)&&(w||S),_=k&&k.length>0&&!S&&!w;return N&&(Lt(o.method)||!_)?v1({request:o,unstable_pattern:a,match:s,lazyHandlerPromise:g?.handler,lazyRoutePromise:g?.route,handlerOverride:v,scopedContext:c}):Promise.resolve({type:"data",result:void 0})}}}function gi(e,r,o,a,s,l,c,f=null){return a.map(m=>m.route.id!==s.route.id?{...m,shouldLoad:!1,shouldRevalidateArgs:f,shouldCallHandler:()=>!1,_lazyPromises:M0(e,r,o,m,l),resolve:()=>Promise.resolve({type:"data",result:void 0})}:Yc(e,r,o,Da(a),m,l,c,!0,f))}async function x1(e,r,o,a,s,l){o.some(p=>p._lazyPromises?.middleware)&&await Promise.all(o.map(p=>p._lazyPromises?.middleware));let c={request:r,unstable_pattern:Da(o),params:o[0].params,context:s,matches:o},m=await e({...c,fetcherKey:a,runClientMiddleware:p=>{let x=c;return P0(x,()=>p({...x,fetcherKey:a,runClientMiddleware:()=>{throw new Error("Cannot call `runClientMiddleware()` from within an `runClientMiddleware` handler")}}))}});try{await Promise.all(o.flatMap(p=>[p._lazyPromises?.handler,p._lazyPromises?.route]))}catch{}return m}async function v1({request:e,unstable_pattern:r,match:o,lazyHandlerPromise:a,lazyRoutePromise:s,handlerOverride:l,scopedContext:c}){let f,m,p=Lt(e.method),x=p?"action":"loader",g=v=>{let w,S=new Promise((_,P)=>w=P);m=()=>w(),e.signal.addEventListener("abort",m);let k=_=>typeof v!="function"?Promise.reject(new Error(`You cannot call the handler for a route which defines a boolean "${x}" [routeId: ${o.route.id}]`)):v({request:e,unstable_pattern:r,params:o.params,context:c},..._!==void 0?[_]:[]),N=(async()=>{try{return{type:"data",result:await(l?l(P=>k(P)):k())}}catch(_){return{type:"error",result:_}}})();return Promise.race([N,S])};try{let v=p?o.route.action:o.route.loader;if(a||s)if(v){let w,[S]=await Promise.all([g(v).catch(k=>{w=k}),a,s]);if(w!==void 0)throw w;f=S}else{await a;let w=p?o.route.action:o.route.loader;if(w)[f]=await Promise.all([g(w),s]);else if(x==="action"){let S=new URL(e.url),k=S.pathname+S.search;throw vn(405,{method:e.method,pathname:k,routeId:o.route.id})}else return{type:"data",result:void 0}}else if(v)f=await g(v);else{let w=new URL(e.url),S=w.pathname+w.search;throw vn(404,{pathname:S})}}catch(v){return{type:"error",result:v}}finally{m&&e.signal.removeEventListener("abort",m)}return f}async function w1(e){let r=e.headers.get("Content-Type");return r&&/\bapplication\/json\b/.test(r)?e.body==null?null:e.json():e.text()}async function b1(e){let{result:r,type:o}=e;if(hd(r)){let a;try{a=await w1(r)}catch(s){return{type:"error",error:s}}return o==="error"?{type:"error",error:new Ta(r.status,r.statusText,a),statusCode:r.status,headers:r.headers}:{type:"data",data:a,statusCode:r.status,headers:r.headers}}return o==="error"?Bp(r)?r.data instanceof Error?{type:"error",error:r.data,statusCode:r.init?.status,headers:r.init?.headers?new Headers(r.init.headers):void 0}:{type:"error",error:E1(r),statusCode:ba(r)?r.status:void 0,headers:r.init?.headers?new Headers(r.init.headers):void 0}:{type:"error",error:r,statusCode:ba(r)?r.status:void 0}:Bp(r)?{type:"data",data:r.data,statusCode:r.init?.status,headers:r.init?.headers?new Headers(r.init.headers):void 0}:{type:"data",data:r}}function _1(e,r,o,a,s){let l=e.headers.get("Location");if($e(l,"Redirects returned/thrown from loaders/actions must have a Location header"),!ud(l)){let c=a.slice(0,a.findIndex(f=>f.route.id===o)+1);l=Wc(new URL(r.url),c,s,l),e.headers.set("Location",l)}return e}function $p(e,r,o,a){let s=["about:","blob:","chrome:","chrome-untrusted:","content:","data:","devtools:","file:","filesystem:","javascript:"];if(ud(e)){let l=e,c=l.startsWith("//")?new URL(r.protocol+l):new URL(l);if(s.includes(c.protocol))throw new Error("Invalid redirect location");let f=bn(c.pathname,o)!=null;if(c.origin===r.origin&&f)return c.pathname+c.search+c.hash}try{let l=a.createURL(e);if(s.includes(l.protocol))throw new Error("Invalid redirect location")}catch{}return e}function fi(e,r,o,a){let s=e.createURL(T0(r)).toString(),l={signal:o};if(a&&Lt(a.formMethod)){let{formMethod:c,formEncType:f}=a;l.method=c.toUpperCase(),f==="application/json"?(l.headers=new Headers({"Content-Type":f}),l.body=JSON.stringify(a.json)):f==="text/plain"?l.body=a.text:f==="application/x-www-form-urlencoded"&&a.formData?l.body=Gc(a.formData):l.body=a.formData}return new Request(s,l)}function Gc(e){let r=new URLSearchParams;for(let[o,a]of e.entries())r.append(o,typeof a=="string"?a:a.name);return r}function Fp(e){let r=new FormData;for(let[o,a]of e.entries())r.append(o,a);return r}function S1(e,r,o,a=!1,s=!1){let l={},c=null,f,m=!1,p={},x=o&&on(o[1])?o[1].error:void 0;return e.forEach(g=>{if(!(g.route.id in r))return;let v=g.route.id,w=r[v];if($e(!Eo(w),"Cannot handle redirect results in processLoaderData"),on(w)){let S=w.error;if(x!==void 0&&(S=x,x=void 0),c=c||{},s)c[v]=S;else{let k=Zr(e,v);c[k.route.id]==null&&(c[k.route.id]=S)}a||(l[v]=C0),m||(m=!0,f=ba(w.error)?w.error.status:500),w.headers&&(p[v]=w.headers)}else l[v]=w.data,w.statusCode&&w.statusCode!==200&&!m&&(f=w.statusCode),w.headers&&(p[v]=w.headers)}),x!==void 0&&o&&(c={[o[0]]:x},o[2]&&(l[o[2]]=void 0)),{loaderData:l,errors:c,statusCode:f||200,loaderHeaders:p}}function Ap(e,r,o,a,s,l){let{loaderData:c,errors:f}=S1(r,o,a);return s.filter(m=>!m.matches||m.matches.some(p=>p.shouldLoad)).forEach(m=>{let{key:p,match:x,controller:g}=m;if(g&&g.signal.aborted)return;let v=l[p];if($e(v,"Did not find corresponding fetcher result"),on(v)){let w=Zr(e.matches,x?.route.id);f&&f[w.route.id]||(f={...f,[w.route.id]:v.error}),e.fetchers.delete(p)}else if(Eo(v))$e(!1,"Unhandled fetcher revalidation redirect");else{let w=vr(v.data);e.fetchers.set(p,w)}}),{loaderData:c,errors:f}}function Op(e,r,o,a){let s=Object.entries(r).filter(([,l])=>l!==C0).reduce((l,[c,f])=>(l[c]=f,l),{});for(let l of o){let c=l.route.id;if(!r.hasOwnProperty(c)&&e.hasOwnProperty(c)&&l.route.loader&&(s[c]=e[c]),a&&a.hasOwnProperty(c))break}return s}function Hp(e){return e?on(e[1])?{actionData:{}}:{actionData:{[e[0]]:e[1].data}}:{}}function Zr(e,r){return(r?e.slice(0,e.findIndex(a=>a.route.id===r)+1):[...e]).reverse().find(a=>a.route.hasErrorBoundary===!0)||e[0]}function Gs(e){let r=e.length===1?e[0]:e.find(o=>o.index||!o.path||o.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:r}],route:r}}function vn(e,{pathname:r,routeId:o,method:a,type:s,message:l}={}){let c="Unknown Server Error",f="Unknown @remix-run/router error";return e===400?(c="Bad Request",a&&r&&o?f=`You made a ${a} request to "${r}" but did not provide a \`loader\` for route "${o}", so there is no way to handle the request.`:s==="invalid-body"&&(f="Unable to encode submission body")):e===403?(c="Forbidden",f=`Route "${o}" does not match URL "${r}"`):e===404?(c="Not Found",f=`No route matches URL "${r}"`):e===405&&(c="Method Not Allowed",a&&r&&o?f=`You made a ${a.toUpperCase()} request to "${r}" but did not provide an \`action\` for route "${o}", so there is no way to handle the request.`:a&&(f=`Invalid request method "${a.toUpperCase()}"`)),new Ta(e||500,c,new Error(f),!0)}function Ks(e){let r=Object.entries(e);for(let o=r.length-1;o>=0;o--){let[a,s]=r[o];if(Eo(s))return{key:a,result:s}}}function T0(e){let r=typeof e=="string"?eo(e):e;return qn({...r,hash:""})}function N1(e,r){return e.pathname!==r.pathname||e.search!==r.search?!1:e.hash===""?r.hash!=="":e.hash===r.hash?!0:r.hash!==""}function E1(e){return new Ta(e.init?.status??500,e.init?.statusText??"Internal Server Error",e.data)}function C1(e){return e!=null&&typeof e=="object"&&Object.entries(e).every(([r,o])=>typeof r=="string"&&k1(o))}function k1(e){return e!=null&&typeof e=="object"&&"type"in e&&"result"in e&&(e.type==="data"||e.type==="error")}function j1(e){return hd(e.result)&&N0.has(e.result.status)}function on(e){return e.type==="error"}function Eo(e){return(e&&e.type)==="redirect"}function Bp(e){return typeof e=="object"&&e!=null&&"type"in e&&"data"in e&&"init"in e&&e.type==="DataWithResponseInit"}function hd(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.headers=="object"&&typeof e.body<"u"}function P1(e){return N0.has(e)}function R1(e){return hd(e)&&P1(e.status)&&e.headers.has("Location")}function M1(e){return s1.has(e.toUpperCase())}function Lt(e){return i1.has(e.toUpperCase())}function pd(e){return new URLSearchParams(e).getAll("index").some(r=>r==="")}function ll(e,r){let o=typeof r=="string"?eo(r).search:r.search;if(e[e.length-1].route.index&&pd(o||""))return e[e.length-1];let a=v0(e);return a[a.length-1]}function Vp(e){let{formMethod:r,formAction:o,formEncType:a,text:s,formData:l,json:c}=e;if(!(!r||!o||!a)){if(s!=null)return{formMethod:r,formAction:o,formEncType:a,formData:void 0,json:void 0,text:s};if(l!=null)return{formMethod:r,formAction:o,formEncType:a,formData:l,json:void 0,text:void 0};if(c!==void 0)return{formMethod:r,formAction:o,formEncType:a,formData:void 0,json:c,text:void 0}}}function Pc(e,r){return r?{state:"loading",location:e,formMethod:r.formMethod,formAction:r.formAction,formEncType:r.formEncType,formData:r.formData,json:r.json,text:r.text}:{state:"loading",location:e,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function T1(e,r){return{state:"submitting",location:e,formMethod:r.formMethod,formAction:r.formAction,formEncType:r.formEncType,formData:r.formData,json:r.json,text:r.text}}function la(e,r){return e?{state:"loading",formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text,data:r}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:r}}function D1(e,r){return{state:"submitting",formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text,data:r?r.data:void 0}}function vr(e){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function L1(e,r){try{let o=e.sessionStorage.getItem(E0);if(o){let a=JSON.parse(o);for(let[s,l]of Object.entries(a||{}))l&&Array.isArray(l)&&r.set(s,new Set(l||[]))}}catch{}}function z1(e,r){if(r.size>0){let o={};for(let[a,s]of r)o[a]=[...s];try{e.sessionStorage.setItem(E0,JSON.stringify(o))}catch(a){mt(!1,`Failed to save applied view transitions in sessionStorage (${a}).`)}}}function Up(){let e,r,o=new Promise((a,s)=>{e=async l=>{a(l);try{await o}catch{}},r=async l=>{s(l);try{await o}catch{}}});return{promise:o,resolve:e,reject:r}}var zo=E.createContext(null);zo.displayName="DataRouter";var La=E.createContext(null);La.displayName="DataRouterState";var D0=E.createContext(!1);function I1(){return E.useContext(D0)}var md=E.createContext({isTransitioning:!1});md.displayName="ViewTransition";var L0=E.createContext(new Map);L0.displayName="Fetchers";var $1=E.createContext(null);$1.displayName="Await";var _n=E.createContext(null);_n.displayName="Navigation";var Pl=E.createContext(null);Pl.displayName="Location";var er=E.createContext({outlet:null,matches:[],isDataRoute:!1});er.displayName="Route";var gd=E.createContext(null);gd.displayName="RouteError";var z0="REACT_ROUTER_ERROR",F1="REDIRECT",A1="ROUTE_ERROR_RESPONSE";function O1(e){if(e.startsWith(`${z0}:${F1}:{`))try{let r=JSON.parse(e.slice(28));if(typeof r=="object"&&r&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.location=="string"&&typeof r.reloadDocument=="boolean"&&typeof r.replace=="boolean")return r}catch{}}function H1(e){if(e.startsWith(`${z0}:${A1}:{`))try{let r=JSON.parse(e.slice(40));if(typeof r=="object"&&r&&typeof r.status=="number"&&typeof r.statusText=="string")return new Ta(r.status,r.statusText,r.data)}catch{}}function B1(e,{relative:r}={}){$e(za(),"useHref() may be used only in the context of a <Router> component.");let{basename:o,navigator:a}=E.useContext(_n),{hash:s,pathname:l,search:c}=Ia(e,{relative:r}),f=l;return o!=="/"&&(f=l==="/"?o:Zn([o,l])),a.createHref({pathname:f,search:c,hash:s})}function za(){return E.useContext(Pl)!=null}function Io(){return $e(za(),"useLocation() may be used only in the context of a <Router> component."),E.useContext(Pl).location}var I0="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function $0(e){E.useContext(_n).static||E.useLayoutEffect(e)}function yd(){let{isDataRoute:e}=E.useContext(er);return e?rw():V1()}function V1(){$e(za(),"useNavigate() may be used only in the context of a <Router> component.");let e=E.useContext(zo),{basename:r,navigator:o}=E.useContext(_n),{matches:a}=E.useContext(er),{pathname:s}=Io(),l=JSON.stringify(cd(a)),c=E.useRef(!1);return $0(()=>{c.current=!0}),E.useCallback((m,p={})=>{if(mt(c.current,I0),!c.current)return;if(typeof m=="number"){o.go(m);return}let x=dd(m,JSON.parse(l),s,p.relative==="path");e==null&&r!=="/"&&(x.pathname=x.pathname==="/"?r:Zn([r,x.pathname])),(p.replace?o.replace:o.push)(x,p.state,p)},[r,o,l,s,e])}var U1=E.createContext(null);function W1(e){let r=E.useContext(er).outlet;return E.useMemo(()=>r&&E.createElement(U1.Provider,{value:e},r),[r,e])}function Ia(e,{relative:r}={}){let{matches:o}=E.useContext(er),{pathname:a}=Io(),s=JSON.stringify(cd(o));return E.useMemo(()=>dd(e,JSON.parse(s),a,r==="path"),[e,s,a,r])}function X1(e,r,o,a,s){$e(za(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:l}=E.useContext(_n),{matches:c}=E.useContext(er),f=c[c.length-1],m=f?f.params:{},p=f?f.pathname:"/",x=f?f.pathnameBase:"/",g=f&&f.route;{let P=g&&g.path||"";A0(p,!g||P.endsWith("*")||P.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${p}" (under <Route path="${P}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${P}"> to <Route path="${P==="/"?"*":`${P}/*`}">.`)}let v=Io(),w;w=v;let S=w.pathname||"/",k=S;if(x!=="/"){let P=x.replace(/^\//,"").split("/");k="/"+S.replace(/^\//,"").split("/").slice(P.length).join("/")}let N=Kr(e,{pathname:k});return mt(g||N!=null,`No routes matched location "${w.pathname}${w.search}${w.hash}" `),mt(N==null||N[N.length-1].route.element!==void 0||N[N.length-1].route.Component!==void 0||N[N.length-1].route.lazy!==void 0,`Matched leaf route at location "${w.pathname}${w.search}${w.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`),Q1(N&&N.map(P=>Object.assign({},P,{params:Object.assign({},m,P.params),pathname:Zn([x,l.encodeLocation?l.encodeLocation(P.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:P.pathname]),pathnameBase:P.pathnameBase==="/"?x:Zn([x,l.encodeLocation?l.encodeLocation(P.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:P.pathnameBase])})),c,o,a,s)}function Y1(){let e=nw(),r=ba(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),o=e instanceof Error?e.stack:null,a="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:a},l={padding:"2px 4px",backgroundColor:a},c=null;return console.error("Error handled by React Router default ErrorBoundary:",e),c=E.createElement(E.Fragment,null,E.createElement("p",null," Hey developer "),E.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",E.createElement("code",{style:l},"ErrorBoundary")," or"," ",E.createElement("code",{style:l},"errorElement")," prop on your route.")),E.createElement(E.Fragment,null,E.createElement("h2",null,"Unexpected Application Error!"),E.createElement("h3",{style:{fontStyle:"italic"}},r),o?E.createElement("pre",{style:s},o):null,c)}var G1=E.createElement(Y1,null),F0=class extends E.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,r){return r.location!==e.location||r.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:r.error,location:r.location,revalidation:e.revalidation||r.revalidation}}componentDidCatch(e,r){this.props.onError?this.props.onError(e,r):console.error("React Router caught the following error during render",e)}render(){let e=this.state.error;if(this.context&&typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){const o=H1(e.digest);o&&(e=o)}let r=e!==void 0?E.createElement(er.Provider,{value:this.props.routeContext},E.createElement(gd.Provider,{value:e,children:this.props.component})):this.props.children;return this.context?E.createElement(K1,{error:e},r):r}};F0.contextType=D0;var Rc=new WeakMap;function K1({children:e,error:r}){let{basename:o}=E.useContext(_n);if(typeof r=="object"&&r&&"digest"in r&&typeof r.digest=="string"){let a=O1(r.digest);if(a){let s=Rc.get(r);if(s)throw s;let l=b0(a.location,o);if(w0&&!Rc.get(r))if(l.isExternal||a.reloadDocument)window.location.href=l.absoluteURL||l.to;else{const c=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(l.to,{replace:a.replace}));throw Rc.set(r,c),c}return E.createElement("meta",{httpEquiv:"refresh",content:`0;url=${l.absoluteURL||l.to}`})}}return e}function Z1({routeContext:e,match:r,children:o}){let a=E.useContext(zo);return a&&a.static&&a.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=r.route.id),E.createElement(er.Provider,{value:e},o)}function Q1(e,r=[],o=null,a=null,s=null){if(e==null){if(!o)return null;if(o.errors)e=o.matches;else if(r.length===0&&!o.initialized&&o.matches.length>0)e=o.matches;else return null}let l=e,c=o?.errors;if(c!=null){let x=l.findIndex(g=>g.route.id&&c?.[g.route.id]!==void 0);$e(x>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(c).join(",")}`),l=l.slice(0,Math.min(l.length,x+1))}let f=!1,m=-1;if(o)for(let x=0;x<l.length;x++){let g=l[x];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(m=x),g.route.id){let{loaderData:v,errors:w}=o,S=g.route.loader&&!v.hasOwnProperty(g.route.id)&&(!w||w[g.route.id]===void 0);if(g.route.lazy||S){f=!0,m>=0?l=l.slice(0,m+1):l=[l[0]];break}}}let p=o&&a?(x,g)=>{a(x,{location:o.location,params:o.matches?.[0]?.params??{},unstable_pattern:Da(o.matches),errorInfo:g})}:void 0;return l.reduceRight((x,g,v)=>{let w,S=!1,k=null,N=null;o&&(w=c&&g.route.id?c[g.route.id]:void 0,k=g.route.errorElement||G1,f&&(m<0&&v===0?(A0("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),S=!0,N=null):m===v&&(S=!0,N=g.route.hydrateFallbackElement||null)));let _=r.concat(l.slice(0,v+1)),P=()=>{let b;return w?b=k:S?b=N:g.route.Component?b=E.createElement(g.route.Component,null):g.route.element?b=g.route.element:b=x,E.createElement(Z1,{match:g,routeContext:{outlet:x,matches:_,isDataRoute:o!=null},children:b})};return o&&(g.route.ErrorBoundary||g.route.errorElement||v===0)?E.createElement(F0,{location:o.location,revalidation:o.revalidation,component:k,error:w,children:P(),routeContext:{outlet:null,matches:_,isDataRoute:!0},onError:p}):P()},null)}function xd(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function q1(e){let r=E.useContext(zo);return $e(r,xd(e)),r}function J1(e){let r=E.useContext(La);return $e(r,xd(e)),r}function ew(e){let r=E.useContext(er);return $e(r,xd(e)),r}function vd(e){let r=ew(e),o=r.matches[r.matches.length-1];return $e(o.route.id,`${e} can only be used on routes that contain a unique "id"`),o.route.id}function tw(){return vd("useRouteId")}function nw(){let e=E.useContext(gd),r=J1("useRouteError"),o=vd("useRouteError");return e!==void 0?e:r.errors?.[o]}function rw(){let{router:e}=q1("useNavigate"),r=vd("useNavigate"),o=E.useRef(!1);return $0(()=>{o.current=!0}),E.useCallback(async(s,l={})=>{mt(o.current,I0),o.current&&(typeof s=="number"?await e.navigate(s):await e.navigate(s,{fromRouteId:r,...l}))},[e,r])}var Wp={};function A0(e,r,o){!r&&!Wp[e]&&(Wp[e]=!0,mt(!1,o))}var Xp={};function Yp(e,r){!e&&!Xp[r]&&(Xp[r]=!0,console.warn(r))}var ow="useOptimistic",Gp=vv[ow],iw=()=>{};function aw(e){return Gp?Gp(e):[e,iw]}function sw(e){let r={hasErrorBoundary:e.hasErrorBoundary||e.ErrorBoundary!=null||e.errorElement!=null};return e.Component&&(e.element&&mt(!1,"You should not include both `Component` and `element` on your route - `Component` will be used."),Object.assign(r,{element:E.createElement(e.Component),Component:void 0})),e.HydrateFallback&&(e.hydrateFallbackElement&&mt(!1,"You should not include both `HydrateFallback` and `hydrateFallbackElement` on your route - `HydrateFallback` will be used."),Object.assign(r,{hydrateFallbackElement:E.createElement(e.HydrateFallback),HydrateFallback:void 0})),e.ErrorBoundary&&(e.errorElement&&mt(!1,"You should not include both `ErrorBoundary` and `errorElement` on your route - `ErrorBoundary` will be used."),Object.assign(r,{errorElement:E.createElement(e.ErrorBoundary),ErrorBoundary:void 0})),r}var lw=["HydrateFallback","hydrateFallbackElement"],uw=class{constructor(){this.status="pending",this.promise=new Promise((e,r)=>{this.resolve=o=>{this.status==="pending"&&(this.status="resolved",e(o))},this.reject=o=>{this.status==="pending"&&(this.status="rejected",r(o))}})}};function cw({router:e,flushSync:r,onError:o,unstable_useTransitions:a}){a=I1()||a;let[l,c]=E.useState(e.state),[f,m]=aw(l),[p,x]=E.useState(),[g,v]=E.useState({isTransitioning:!1}),[w,S]=E.useState(),[k,N]=E.useState(),[_,P]=E.useState(),b=E.useRef(new Map),j=E.useCallback((A,{deletedFetchers:K,newErrors:F,flushSync:V,viewTransitionOpts:H})=>{F&&o&&Object.values(F).forEach(M=>o(M,{location:A.location,params:A.matches[0]?.params??{},unstable_pattern:Da(A.matches)})),A.fetchers.forEach((M,L)=>{M.data!==void 0&&b.current.set(L,M.data)}),K.forEach(M=>b.current.delete(M)),Yp(V===!1||r!=null,'You provided the `flushSync` option to a router update, but you are not using the `<RouterProvider>` from `react-router/dom` so `ReactDOM.flushSync()` is unavailable.  Please update your app to `import { RouterProvider } from "react-router/dom"` and ensure you have `react-dom` installed as a dependency to use the `flushSync` option.');let W=e.window!=null&&e.window.document!=null&&typeof e.window.document.startViewTransition=="function";if(Yp(H==null||W,"You provided the `viewTransition` option to a router update, but you do not appear to be running in a DOM environment as `window.startViewTransition` is not available."),!H||!W){r&&V?r(()=>c(A)):a===!1?c(A):E.startTransition(()=>{a===!0&&m(M=>Kp(M,A)),c(A)});return}if(r&&V){r(()=>{k&&(w?.resolve(),k.skipTransition()),v({isTransitioning:!0,flushSync:!0,currentLocation:H.currentLocation,nextLocation:H.nextLocation})});let M=e.window.document.startViewTransition(()=>{r(()=>c(A))});M.finished.finally(()=>{r(()=>{S(void 0),N(void 0),x(void 0),v({isTransitioning:!1})})}),r(()=>N(M));return}k?(w?.resolve(),k.skipTransition(),P({state:A,currentLocation:H.currentLocation,nextLocation:H.nextLocation})):(x(A),v({isTransitioning:!0,flushSync:!1,currentLocation:H.currentLocation,nextLocation:H.nextLocation}))},[e.window,r,k,w,a,m,o]);E.useLayoutEffect(()=>e.subscribe(j),[e,j]),E.useEffect(()=>{g.isTransitioning&&!g.flushSync&&S(new uw)},[g]),E.useEffect(()=>{if(w&&p&&e.window){let A=p,K=w.promise,F=e.window.document.startViewTransition(async()=>{a===!1?c(A):E.startTransition(()=>{a===!0&&m(V=>Kp(V,A)),c(A)}),await K});F.finished.finally(()=>{S(void 0),N(void 0),x(void 0),v({isTransitioning:!1})}),N(F)}},[p,w,e.window,a,m]),E.useEffect(()=>{w&&p&&f.location.key===p.location.key&&w.resolve()},[w,k,f.location,p]),E.useEffect(()=>{!g.isTransitioning&&_&&(x(_.state),v({isTransitioning:!0,flushSync:!1,currentLocation:_.currentLocation,nextLocation:_.nextLocation}),P(void 0))},[g.isTransitioning,_]);let I=E.useMemo(()=>({createHref:e.createHref,encodeLocation:e.encodeLocation,go:A=>e.navigate(A),push:(A,K,F)=>e.navigate(A,{state:K,preventScrollReset:F?.preventScrollReset}),replace:(A,K,F)=>e.navigate(A,{replace:!0,state:K,preventScrollReset:F?.preventScrollReset})}),[e]),D=e.basename||"/",R=E.useMemo(()=>({router:e,navigator:I,static:!1,basename:D,onError:o}),[e,I,D,o]);return E.createElement(E.Fragment,null,E.createElement(zo.Provider,{value:R},E.createElement(La.Provider,{value:f},E.createElement(L0.Provider,{value:b.current},E.createElement(md.Provider,{value:g},E.createElement(pw,{basename:D,location:f.location,navigationType:f.historyAction,navigator:I,unstable_useTransitions:a},E.createElement(dw,{routes:e.routes,future:e.future,state:f,onError:o})))))),null)}function Kp(e,r){return{...e,navigation:r.navigation.state!=="idle"?r.navigation:e.navigation,revalidation:r.revalidation!=="idle"?r.revalidation:e.revalidation,actionData:r.navigation.state!=="submitting"?r.actionData:e.actionData,fetchers:r.fetchers}}var dw=E.memo(fw);function fw({routes:e,future:r,state:o,onError:a}){return X1(e,void 0,o,a,r)}function hw(e){return W1(e.context)}function pw({basename:e="/",children:r=null,location:o,navigationType:a="POP",navigator:s,static:l=!1,unstable_useTransitions:c}){$e(!za(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let f=e.replace(/^\/*/,"/"),m=E.useMemo(()=>({basename:f,navigator:s,static:l,unstable_useTransitions:c,future:{}}),[f,s,l,c]);typeof o=="string"&&(o=eo(o));let{pathname:p="/",search:x="",hash:g="",state:v=null,key:w="default"}=o,S=E.useMemo(()=>{let k=bn(p,f);return k==null?null:{location:{pathname:k,search:x,hash:g,state:v,key:w},navigationType:a}},[f,p,x,g,v,w,a]);return mt(S!=null,`<Router basename="${f}"> is not able to match the URL "${p}${x}${g}" because it does not start with the basename, so the <Router> won't render anything.`),S==null?null:E.createElement(_n.Provider,{value:m},E.createElement(Pl.Provider,{children:r,value:S}))}var ul="get",cl="application/x-www-form-urlencoded";function Rl(e){return typeof HTMLElement<"u"&&e instanceof HTMLElement}function mw(e){return Rl(e)&&e.tagName.toLowerCase()==="button"}function gw(e){return Rl(e)&&e.tagName.toLowerCase()==="form"}function yw(e){return Rl(e)&&e.tagName.toLowerCase()==="input"}function xw(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function vw(e,r){return e.button===0&&(!r||r==="_self")&&!xw(e)}var Zs=null;function ww(){if(Zs===null)try{new FormData(document.createElement("form"),0),Zs=!1}catch{Zs=!0}return Zs}var bw=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Mc(e){return e!=null&&!bw.has(e)?(mt(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${cl}"`),null):e}function _w(e,r){let o,a,s,l,c;if(gw(e)){let f=e.getAttribute("action");a=f?bn(f,r):null,o=e.getAttribute("method")||ul,s=Mc(e.getAttribute("enctype"))||cl,l=new FormData(e)}else if(mw(e)||yw(e)&&(e.type==="submit"||e.type==="image")){let f=e.form;if(f==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let m=e.getAttribute("formaction")||f.getAttribute("action");if(a=m?bn(m,r):null,o=e.getAttribute("formmethod")||f.getAttribute("method")||ul,s=Mc(e.getAttribute("formenctype"))||Mc(f.getAttribute("enctype"))||cl,l=new FormData(f,e),!ww()){let{name:p,type:x,value:g}=e;if(x==="image"){let v=p?`${p}.`:"";l.append(`${v}x`,"0"),l.append(`${v}y`,"0")}else p&&l.append(p,g)}}else{if(Rl(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');o=ul,a=null,s=cl,c=e}return l&&s==="text/plain"&&(c=l,l=void 0),{action:a,method:o.toLowerCase(),encType:s,formData:l,body:c}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function wd(e,r){if(e===!1||e===null||typeof e>"u")throw new Error(r)}function Sw(e,r,o,a){let s=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return o?s.pathname.endsWith("/")?s.pathname=`${s.pathname}_.${a}`:s.pathname=`${s.pathname}.${a}`:s.pathname==="/"?s.pathname=`_root.${a}`:r&&bn(s.pathname,r)==="/"?s.pathname=`${r.replace(/\/$/,"")}/_root.${a}`:s.pathname=`${s.pathname.replace(/\/$/,"")}.${a}`,s}async function Nw(e,r){if(e.id in r)return r[e.id];try{let o=await import(e.module);return r[e.id]=o,o}catch(o){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(o),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Ew(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function Cw(e,r,o){let a=await Promise.all(e.map(async s=>{let l=r.routes[s.route.id];if(l){let c=await Nw(l,o);return c.links?c.links():[]}return[]}));return Rw(a.flat(1).filter(Ew).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function Zp(e,r,o,a,s,l){let c=(m,p)=>o[p]?m.route.id!==o[p].route.id:!0,f=(m,p)=>o[p].pathname!==m.pathname||o[p].route.path?.endsWith("*")&&o[p].params["*"]!==m.params["*"];return l==="assets"?r.filter((m,p)=>c(m,p)||f(m,p)):l==="data"?r.filter((m,p)=>{let x=a.routes[m.route.id];if(!x||!x.hasLoader)return!1;if(c(m,p)||f(m,p))return!0;if(m.route.shouldRevalidate){let g=m.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:o[0]?.params||{},nextUrl:new URL(e,window.origin),nextParams:m.params,defaultShouldRevalidate:!0});if(typeof g=="boolean")return g}return!0}):[]}function kw(e,r,{includeHydrateFallback:o}={}){return jw(e.map(a=>{let s=r.routes[a.route.id];if(!s)return[];let l=[s.module];return s.clientActionModule&&(l=l.concat(s.clientActionModule)),s.clientLoaderModule&&(l=l.concat(s.clientLoaderModule)),o&&s.hydrateFallbackModule&&(l=l.concat(s.hydrateFallbackModule)),s.imports&&(l=l.concat(s.imports)),l}).flat(1))}function jw(e){return[...new Set(e)]}function Pw(e){let r={},o=Object.keys(e).sort();for(let a of o)r[a]=e[a];return r}function Rw(e,r){let o=new Set;return new Set(r),e.reduce((a,s)=>{let l=JSON.stringify(Pw(s));return o.has(l)||(o.add(l),a.push({key:l,link:s})),a},[])}function O0(){let e=E.useContext(zo);return wd(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function Mw(){let e=E.useContext(La);return wd(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var bd=E.createContext(void 0);bd.displayName="FrameworkContext";function H0(){let e=E.useContext(bd);return wd(e,"You must render this element inside a <HydratedRouter> element"),e}function Tw(e,r){let o=E.useContext(bd),[a,s]=E.useState(!1),[l,c]=E.useState(!1),{onFocus:f,onBlur:m,onMouseEnter:p,onMouseLeave:x,onTouchStart:g}=r,v=E.useRef(null);E.useEffect(()=>{if(e==="render"&&c(!0),e==="viewport"){let k=_=>{_.forEach(P=>{c(P.isIntersecting)})},N=new IntersectionObserver(k,{threshold:.5});return v.current&&N.observe(v.current),()=>{N.disconnect()}}},[e]),E.useEffect(()=>{if(a){let k=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(k)}}},[a]);let w=()=>{s(!0)},S=()=>{s(!1),c(!1)};return o?e!=="intent"?[l,v,{}]:[l,v,{onFocus:ua(f,w),onBlur:ua(m,S),onMouseEnter:ua(p,w),onMouseLeave:ua(x,S),onTouchStart:ua(g,w)}]:[!1,v,{}]}function ua(e,r){return o=>{e&&e(o),o.defaultPrevented||r(o)}}function Dw({page:e,...r}){let{router:o}=O0(),a=E.useMemo(()=>Kr(o.routes,e,o.basename),[o.routes,e,o.basename]);return a?E.createElement(zw,{page:e,matches:a,...r}):null}function Lw(e){let{manifest:r,routeModules:o}=H0(),[a,s]=E.useState([]);return E.useEffect(()=>{let l=!1;return Cw(e,r,o).then(c=>{l||s(c)}),()=>{l=!0}},[e,r,o]),a}function zw({page:e,matches:r,...o}){let a=Io(),{future:s,manifest:l,routeModules:c}=H0(),{basename:f}=O0(),{loaderData:m,matches:p}=Mw(),x=E.useMemo(()=>Zp(e,r,p,l,a,"data"),[e,r,p,l,a]),g=E.useMemo(()=>Zp(e,r,p,l,a,"assets"),[e,r,p,l,a]),v=E.useMemo(()=>{if(e===a.pathname+a.search+a.hash)return[];let k=new Set,N=!1;if(r.forEach(P=>{let b=l.routes[P.route.id];!b||!b.hasLoader||(!x.some(j=>j.route.id===P.route.id)&&P.route.id in m&&c[P.route.id]?.shouldRevalidate||b.hasClientLoader?N=!0:k.add(P.route.id))}),k.size===0)return[];let _=Sw(e,f,s.unstable_trailingSlashAwareDataRequests,"data");return N&&k.size>0&&_.searchParams.set("_routes",r.filter(P=>k.has(P.route.id)).map(P=>P.route.id).join(",")),[_.pathname+_.search]},[f,s.unstable_trailingSlashAwareDataRequests,m,a,l,x,r,e,c]),w=E.useMemo(()=>kw(g,l),[g,l]),S=Lw(g);return E.createElement(E.Fragment,null,v.map(k=>E.createElement("link",{key:k,rel:"prefetch",as:"fetch",href:k,...o})),w.map(k=>E.createElement("link",{key:k,rel:"modulepreload",href:k,...o})),S.map(({key:k,link:N})=>E.createElement("link",{key:k,nonce:o.nonce,...N,crossOrigin:N.crossOrigin??o.crossOrigin})))}function Iw(...e){return r=>{e.forEach(o=>{typeof o=="function"?o(r):o!=null&&(o.current=r)})}}var $w=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{$w&&(window.__reactRouterVersion="7.13.0")}catch{}function Fw(e,r){return d1({basename:r?.basename,getContext:r?.getContext,future:r?.future,history:kv({window:r?.window}),hydrationData:Aw(),routes:e,mapRouteProperties:sw,hydrationRouteProperties:lw,dataStrategy:r?.dataStrategy,patchRoutesOnNavigation:r?.patchRoutesOnNavigation,window:r?.window,unstable_instrumentations:r?.unstable_instrumentations}).initialize()}function Aw(){let e=window?.__staticRouterHydrationData;return e&&e.errors&&(e={...e,errors:Ow(e.errors)}),e}function Ow(e){if(!e)return null;let r=Object.entries(e),o={};for(let[a,s]of r)if(s&&s.__type==="RouteErrorResponse")o[a]=new Ta(s.status,s.statusText,s.data,s.internal===!0);else if(s&&s.__type==="Error"){if(s.__subType){let l=window[s.__subType];if(typeof l=="function")try{let c=new l(s.message);c.stack="",o[a]=c}catch{}}if(o[a]==null){let l=new Error(s.message);l.stack="",o[a]=l}}else o[a]=s;return o}var B0=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,_d=E.forwardRef(function({onClick:r,discover:o="render",prefetch:a="none",relative:s,reloadDocument:l,replace:c,state:f,target:m,to:p,preventScrollReset:x,viewTransition:g,unstable_defaultShouldRevalidate:v,...w},S){let{basename:k,unstable_useTransitions:N}=E.useContext(_n),_=typeof p=="string"&&B0.test(p),P=b0(p,k);p=P.to;let b=B1(p,{relative:s}),[j,I,D]=Tw(a,w),R=Vw(p,{replace:c,state:f,target:m,preventScrollReset:x,relative:s,viewTransition:g,unstable_defaultShouldRevalidate:v,unstable_useTransitions:N});function A(F){r&&r(F),F.defaultPrevented||R(F)}let K=E.createElement("a",{...w,...D,href:P.absoluteURL||b,onClick:P.isExternal||l?r:A,ref:Iw(S,I),target:m,"data-discover":!_&&o==="render"?"true":void 0});return j&&!_?E.createElement(E.Fragment,null,K,E.createElement(Dw,{page:b})):K});_d.displayName="Link";var Kc=E.forwardRef(function({"aria-current":r="page",caseSensitive:o=!1,className:a="",end:s=!1,style:l,to:c,viewTransition:f,children:m,...p},x){let g=Ia(c,{relative:p.relative}),v=Io(),w=E.useContext(La),{navigator:S,basename:k}=E.useContext(_n),N=w!=null&&Gw(g)&&f===!0,_=S.encodeLocation?S.encodeLocation(g).pathname:g.pathname,P=v.pathname,b=w&&w.navigation&&w.navigation.location?w.navigation.location.pathname:null;o||(P=P.toLowerCase(),b=b?b.toLowerCase():null,_=_.toLowerCase()),b&&k&&(b=bn(b,k)||b);const j=_!=="/"&&_.endsWith("/")?_.length-1:_.length;let I=P===_||!s&&P.startsWith(_)&&P.charAt(j)==="/",D=b!=null&&(b===_||!s&&b.startsWith(_)&&b.charAt(_.length)==="/"),R={isActive:I,isPending:D,isTransitioning:N},A=I?r:void 0,K;typeof a=="function"?K=a(R):K=[a,I?"active":null,D?"pending":null,N?"transitioning":null].filter(Boolean).join(" ");let F=typeof l=="function"?l(R):l;return E.createElement(_d,{...p,"aria-current":A,className:K,ref:x,style:F,to:c,viewTransition:f},typeof m=="function"?m(R):m)});Kc.displayName="NavLink";var Hw=E.forwardRef(({discover:e="render",fetcherKey:r,navigate:o,reloadDocument:a,replace:s,state:l,method:c=ul,action:f,onSubmit:m,relative:p,preventScrollReset:x,viewTransition:g,unstable_defaultShouldRevalidate:v,...w},S)=>{let{unstable_useTransitions:k}=E.useContext(_n),N=Xw(),_=Yw(f,{relative:p}),P=c.toLowerCase()==="get"?"get":"post",b=typeof f=="string"&&B0.test(f),j=I=>{if(m&&m(I),I.defaultPrevented)return;I.preventDefault();let D=I.nativeEvent.submitter,R=D?.getAttribute("formmethod")||c,A=()=>N(D||I.currentTarget,{fetcherKey:r,method:R,navigate:o,replace:s,state:l,relative:p,preventScrollReset:x,viewTransition:g,unstable_defaultShouldRevalidate:v});k&&o!==!1?E.startTransition(()=>A()):A()};return E.createElement("form",{ref:S,method:P,action:_,onSubmit:a?m:j,...w,"data-discover":!b&&e==="render"?"true":void 0})});Hw.displayName="Form";function Bw(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function V0(e){let r=E.useContext(zo);return $e(r,Bw(e)),r}function Vw(e,{target:r,replace:o,state:a,preventScrollReset:s,relative:l,viewTransition:c,unstable_defaultShouldRevalidate:f,unstable_useTransitions:m}={}){let p=yd(),x=Io(),g=Ia(e,{relative:l});return E.useCallback(v=>{if(vw(v,r)){v.preventDefault();let w=o!==void 0?o:qn(x)===qn(g),S=()=>p(e,{replace:w,state:a,preventScrollReset:s,relative:l,viewTransition:c,unstable_defaultShouldRevalidate:f});m?E.startTransition(()=>S()):S()}},[x,p,g,o,a,r,e,s,l,c,f,m])}var Uw=0,Ww=()=>`__${String(++Uw)}__`;function Xw(){let{router:e}=V0("useSubmit"),{basename:r}=E.useContext(_n),o=tw(),a=e.fetch,s=e.navigate;return E.useCallback(async(l,c={})=>{let{action:f,method:m,encType:p,formData:x,body:g}=_w(l,r);if(c.navigate===!1){let v=c.fetcherKey||Ww();await a(v,o,c.action||f,{unstable_defaultShouldRevalidate:c.unstable_defaultShouldRevalidate,preventScrollReset:c.preventScrollReset,formData:x,body:g,formMethod:c.method||m,formEncType:c.encType||p,flushSync:c.flushSync})}else await s(c.action||f,{unstable_defaultShouldRevalidate:c.unstable_defaultShouldRevalidate,preventScrollReset:c.preventScrollReset,formData:x,body:g,formMethod:c.method||m,formEncType:c.encType||p,replace:c.replace,state:c.state,fromRouteId:o,flushSync:c.flushSync,viewTransition:c.viewTransition})},[a,s,r,o])}function Yw(e,{relative:r}={}){let{basename:o}=E.useContext(_n),a=E.useContext(er);$e(a,"useFormAction must be used inside a RouteContext");let[s]=a.matches.slice(-1),l={...Ia(e||".",{relative:r})},c=Io();if(e==null){l.search=c.search;let f=new URLSearchParams(l.search),m=f.getAll("index");if(m.some(x=>x==="")){f.delete("index"),m.filter(g=>g).forEach(g=>f.append("index",g));let x=f.toString();l.search=x?`?${x}`:""}}return(!e||e===".")&&s.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),o!=="/"&&(l.pathname=l.pathname==="/"?o:Zn([o,l.pathname])),qn(l)}function Gw(e,{relative:r}={}){let o=E.useContext(md);$e(o!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:a}=V0("useViewTransitionState"),s=Ia(e,{relative:r});if(!o.isTransitioning)return!1;let l=bn(o.currentLocation.pathname,a)||o.currentLocation.pathname,c=bn(o.nextLocation.pathname,a)||o.nextLocation.pathname;return gl(s.pathname,c)!=null||gl(s.pathname,l)!=null}var U0=h0();function Kw(e){return E.createElement(cw,{flushSync:U0.flushSync,...e})}const Zw=[{label:"Overview",items:[{to:"/",label:"Dashboard",icon:qw}]},{label:"Call Routing",items:[{to:"/call-flows",label:"Call Flows",icon:Jw},{to:"/inbound-numbers",label:"Inbound Numbers",icon:eb},{to:"/time-switches",label:"Time Switches",icon:tb},{to:"/ivr-menus",label:"IVR Menus",icon:nb},{to:"/ring-groups",label:"Ring Groups",icon:rb}]},{label:"Resources",items:[{to:"/extensions",label:"Extensions",icon:ob},{to:"/trunks",label:"Trunks",icon:ib},{to:"/voicemail",label:"Voicemail Boxes",icon:ab},{to:"/conferences",label:"Conferences",icon:sb},{to:"/prompts",label:"Audio Prompts",icon:db}]},{label:"History",items:[{to:"/call-history",label:"Call History",icon:lb},{to:"/recordings",label:"Recordings",icon:ub}]}];function Qw(){const[e,r]=E.useState(!1);return d.jsxs("div",{className:"min-h-screen bg-gray-50 flex",children:[e&&d.jsx("div",{className:"fixed inset-0 bg-black/30 z-20 lg:hidden",onClick:()=>r(!1)}),d.jsxs("aside",{className:`fixed inset-y-0 left-0 z-30 w-60 bg-gray-900 text-gray-300 flex flex-col transform transition-transform duration-200 lg:translate-x-0 lg:static lg:z-auto ${e?"translate-x-0":"-translate-x-full"}`,children:[d.jsx("div",{className:"flex items-center gap-2 px-4 h-14 border-b border-gray-800 shrink-0",children:d.jsx("span",{className:"text-lg font-bold text-white tracking-tight",children:"FlowPBX"})}),d.jsx("nav",{className:"flex-1 overflow-y-auto py-3 px-2 space-y-4",children:Zw.map(o=>d.jsxs("div",{children:[d.jsx("p",{className:"px-2 mb-1 text-xs font-semibold uppercase tracking-wider text-gray-500",children:o.label}),d.jsx("ul",{className:"space-y-0.5",children:o.items.map(a=>d.jsx("li",{children:d.jsxs(Kc,{to:a.to,end:a.to==="/",onClick:()=>r(!1),className:({isActive:s})=>`flex items-center gap-2.5 px-2 py-1.5 text-sm rounded-md transition-colors ${s?"bg-gray-800 text-white font-medium":"hover:bg-gray-800/60 hover:text-white"}`,children:[d.jsx(a.icon,{className:"w-4 h-4 shrink-0"}),a.label]})},a.to))})]},o.label))}),d.jsx("div",{className:"border-t border-gray-800 p-2 shrink-0",children:d.jsxs(Kc,{to:"/settings",onClick:()=>r(!1),className:({isActive:o})=>`flex items-center gap-2.5 px-2 py-1.5 text-sm rounded-md transition-colors ${o?"bg-gray-800 text-white font-medium":"hover:bg-gray-800/60 hover:text-white"}`,children:[d.jsx(cb,{className:"w-4 h-4 shrink-0"}),"Settings"]})})]}),d.jsxs("div",{className:"flex-1 flex flex-col min-w-0",children:[d.jsxs("header",{className:"h-14 bg-white border-b border-gray-200 flex items-center justify-between px-4 shrink-0",children:[d.jsx("button",{type:"button",className:"lg:hidden p-1.5 -ml-1.5 rounded-md text-gray-500 hover:text-gray-700 hover:bg-gray-100",onClick:()=>r(!0),children:d.jsx(fb,{className:"w-5 h-5"})}),d.jsx("div",{className:"lg:hidden"}),d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("span",{className:"text-sm text-gray-500",children:"Admin"}),d.jsx("a",{href:"/api/v1/auth/logout",onClick:o=>{o.preventDefault(),fetch("/api/v1/auth/logout",{method:"POST",credentials:"same-origin"}).then(()=>{window.location.href="/login"})},className:"text-sm text-gray-500 hover:text-gray-700",children:"Logout"})]})]}),d.jsx("main",{className:"flex-1 overflow-y-auto p-6",children:d.jsx(hw,{})})]})]})}function qw({className:e}){return d.jsx("svg",{className:e,viewBox:"0 0 20 20",fill:"currentColor",children:d.jsx("path",{d:"M3 4a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1H4a1 1 0 01-1-1V4zm8 0a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1h-4a1 1 0 01-1-1V4zM3 12a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1H4a1 1 0 01-1-1v-4zm8 0a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1h-4a1 1 0 01-1-1v-4z"})})}function Jw({className:e}){return d.jsx("svg",{className:e,viewBox:"0 0 20 20",fill:"currentColor",children:d.jsx("path",{fillRule:"evenodd",d:"M6 2a2 2 0 00-2 2v1a2 2 0 002 2h1v2H5a2 2 0 00-2 2v1a2 2 0 002 2h1v2a2 2 0 002 2h4a2 2 0 002-2v-2h1a2 2 0 002-2v-1a2 2 0 00-2-2h-2V7h1a2 2 0 002-2V4a2 2 0 00-2-2H6zm0 2h8v1H6V4zm-1 7h10v1H5v-1zm3 5h4v1H8v-1z",clipRule:"evenodd"})})}function eb({className:e}){return d.jsx("svg",{className:e,viewBox:"0 0 20 20",fill:"currentColor",children:d.jsx("path",{d:"M2 3a1 1 0 011-1h2.153a1 1 0 01.986.836l.74 4.435a1 1 0 01-.54 1.06l-1.548.773a11.037 11.037 0 006.105 6.105l.774-1.548a1 1 0 011.059-.54l4.435.74a1 1 0 01.836.986V17a1 1 0 01-1 1h-2C7.82 18 2 12.18 2 5V3z"})})}function tb({className:e}){return d.jsx("svg",{className:e,viewBox:"0 0 20 20",fill:"currentColor",children:d.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z",clipRule:"evenodd"})})}function nb({className:e}){return d.jsx("svg",{className:e,viewBox:"0 0 20 20",fill:"currentColor",children:d.jsx("path",{fillRule:"evenodd",d:"M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 5a1 1 0 011-1h6a1 1 0 110 2H4a1 1 0 01-1-1z",clipRule:"evenodd"})})}function rb({className:e}){return d.jsx("svg",{className:e,viewBox:"0 0 20 20",fill:"currentColor",children:d.jsx("path",{d:"M13 6a3 3 0 11-6 0 3 3 0 016 0zm5 2a2 2 0 11-4 0 2 2 0 014 0zm-4 7a4 4 0 00-8 0v3h8v-3zM6 8a2 2 0 11-4 0 2 2 0 014 0zm10 10v-3a5.972 5.972 0 00-.75-2.906A3.005 3.005 0 0119 15v3h-3zM4.75 12.094A5.973 5.973 0 004 15v3H1v-3a3 3 0 013.75-2.906z"})})}function ob({className:e}){return d.jsx("svg",{className:e,viewBox:"0 0 20 20",fill:"currentColor",children:d.jsx("path",{fillRule:"evenodd",d:"M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z",clipRule:"evenodd"})})}function ib({className:e}){return d.jsx("svg",{className:e,viewBox:"0 0 20 20",fill:"currentColor",children:d.jsx("path",{fillRule:"evenodd",d:"M2 5a2 2 0 012-2h12a2 2 0 012 2v2a2 2 0 01-2 2H4a2 2 0 01-2-2V5zm14 1a1 1 0 11-2 0 1 1 0 012 0zM2 13a2 2 0 012-2h12a2 2 0 012 2v2a2 2 0 01-2 2H4a2 2 0 01-2-2v-2zm14 1a1 1 0 11-2 0 1 1 0 012 0z",clipRule:"evenodd"})})}function ab({className:e}){return d.jsx("svg",{className:e,viewBox:"0 0 20 20",fill:"currentColor",children:d.jsx("path",{d:"M18 10c0 3.866-3.582 7-8 7a8.841 8.841 0 01-4.083-.98L2 17l1.338-3.123C2.493 12.767 2 11.434 2 10c0-3.866 3.582-7 8-7s8 3.134 8 7z"})})}function sb({className:e}){return d.jsx("svg",{className:e,viewBox:"0 0 20 20",fill:"currentColor",children:d.jsx("path",{fillRule:"evenodd",d:"M7 4a3 3 0 016 0v4a3 3 0 11-6 0V4zm4 10.93A7.001 7.001 0 0017 8a1 1 0 10-2 0A5 5 0 015 8a1 1 0 00-2 0 7.001 7.001 0 006 6.93V17H6a1 1 0 100 2h8a1 1 0 100-2h-3v-2.07z",clipRule:"evenodd"})})}function lb({className:e}){return d.jsx("svg",{className:e,viewBox:"0 0 20 20",fill:"currentColor",children:d.jsx("path",{fillRule:"evenodd",d:"M3 3a1 1 0 000 2v8a2 2 0 002 2h2.586l-1.293 1.293a1 1 0 101.414 1.414L10 15.414l2.293 2.293a1 1 0 001.414-1.414L12.414 15H15a2 2 0 002-2V5a1 1 0 100-2H3zm11 4a1 1 0 10-2 0v4a1 1 0 102 0V7zm-3 1a1 1 0 10-2 0v3a1 1 0 102 0V8zM8 9a1 1 0 00-2 0v2a1 1 0 102 0V9z",clipRule:"evenodd"})})}function ub({className:e}){return d.jsx("svg",{className:e,viewBox:"0 0 20 20",fill:"currentColor",children:d.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z",clipRule:"evenodd"})})}function cb({className:e}){return d.jsx("svg",{className:e,viewBox:"0 0 20 20",fill:"currentColor",children:d.jsx("path",{fillRule:"evenodd",d:"M11.49 3.17c-.38-1.56-2.6-1.56-2.98 0a1.532 1.532 0 01-2.286.948c-1.372-.836-2.942.734-2.106 2.106.54.886.061 2.042-.947 2.287-1.561.379-1.561 2.6 0 2.978a1.532 1.532 0 01.947 2.287c-.836 1.372.734 2.942 2.106 2.106a1.532 1.532 0 012.287.947c.379 1.561 2.6 1.561 2.978 0a1.533 1.533 0 012.287-.947c1.372.836 2.942-.734 2.106-2.106a1.533 1.533 0 01.947-2.287c1.561-.379 1.561-2.6 0-2.978a1.532 1.532 0 01-.947-2.287c.836-1.372-.734-2.942-2.106-2.106a1.532 1.532 0 01-2.287-.947zM10 13a3 3 0 100-6 3 3 0 000 6z",clipRule:"evenodd"})})}function db({className:e}){return d.jsx("svg",{className:e,viewBox:"0 0 20 20",fill:"currentColor",children:d.jsx("path",{fillRule:"evenodd",d:"M9.383 3.076A1 1 0 0110 4v12a1 1 0 01-1.707.707L4.586 13H2a1 1 0 01-1-1V8a1 1 0 011-1h2.586l3.707-3.707a1 1 0 011.09-.217zM14.657 2.929a1 1 0 011.414 0A9.972 9.972 0 0119 10a9.972 9.972 0 01-2.929 7.071 1 1 0 01-1.414-1.414A7.971 7.971 0 0017 10c0-2.21-.894-4.208-2.343-5.657a1 1 0 010-1.414zm-2.829 2.828a1 1 0 011.415 0A5.983 5.983 0 0115 10a5.984 5.984 0 01-1.757 4.243 1 1 0 01-1.415-1.415A3.984 3.984 0 0013 10a3.983 3.983 0 00-1.172-2.828 1 1 0 010-1.415z",clipRule:"evenodd"})})}function fb({className:e}){return d.jsx("svg",{className:e,viewBox:"0 0 20 20",fill:"currentColor",children:d.jsx("path",{fillRule:"evenodd",d:"M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z",clipRule:"evenodd"})})}const hb="/api/v1";class lt extends Error{status;constructor(r,o){super(o),this.name="ApiError",this.status=r}}function pb(){const e=document.cookie.split("; ").find(r=>r.startsWith("flowpbx_csrf="));return e?e.split("=")[1]:null}function mb(e,r){const o=new URL(hb+e,window.location.origin);if(r)for(const[a,s]of Object.entries(r))s!==void 0&&o.searchParams.set(a,String(s));return o.pathname+o.search}async function Ml(e,r,o){const a=mb(r,o?.params),s={Accept:"application/json"};if(o?.body!==void 0&&(s["Content-Type"]="application/json"),e!=="GET"&&e!=="HEAD"){const f=pb();f&&(s["X-CSRF-Token"]=f)}const l=await fetch(a,{method:e,headers:s,credentials:"same-origin",body:o?.body!==void 0?JSON.stringify(o.body):void 0});if(l.status===401){const f=window.location.pathname;throw f!=="/login"&&f!=="/setup"&&(window.location.href="/login"),new lt(l.status,"authentication required")}const c=await l.json();if(!l.ok||c.error)throw new lt(l.status,c.error??`request failed with status ${l.status}`);return c.data}function tr(e,r){return Ml("GET",e,{params:r})}function nr(e,r){return Ml("POST",e,{body:r})}function to(e,r){return Ml("PUT",e,{body:r})}function no(e){return Ml("DELETE",e)}function $a(e,r){return tr(e,r)}function gb(){return tr("/health")}function yb(e){return nr("/auth/login",e)}function xb(e){return nr("/setup",e)}function vb(){const e=yd(),[r,o]=E.useState(""),[a,s]=E.useState(""),[l,c]=E.useState(""),[f,m]=E.useState(!1),[p,x]=E.useState(!0);E.useEffect(()=>{let v=!1;return gb().then(w=>{!v&&w.needs_setup&&e("/setup",{replace:!0})}).catch(()=>{}).finally(()=>{v||x(!1)}),()=>{v=!0}},[e]);async function g(v){v.preventDefault(),c(""),m(!0);try{await yb({username:r,password:a}),e("/",{replace:!0})}catch(w){w instanceof lt?c(w.message):c("unable to connect to server")}finally{m(!1)}}return p?d.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:d.jsx("p",{className:"text-sm text-gray-400",children:"Loading"})}):d.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center px-4",children:d.jsxs("div",{className:"w-full max-w-sm",children:[d.jsxs("div",{className:"text-center mb-8",children:[d.jsx("h1",{className:"text-2xl font-bold text-gray-900 tracking-tight",children:"FlowPBX"}),d.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Sign in to your account"})]}),d.jsxs("form",{onSubmit:g,className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 space-y-4",children:[l&&d.jsx("div",{className:"rounded-md bg-red-50 border border-red-200 px-3 py-2",children:d.jsx("p",{className:"text-sm text-red-700",children:l})}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-700 mb-1",children:"Username"}),d.jsx("input",{id:"username",type:"text",required:!0,autoComplete:"username",autoFocus:!0,value:r,onChange:v=>o(v.target.value),className:"block w-full rounded-md border border-gray-300 px-3 py-2 text-sm text-gray-900 placeholder-gray-400 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500",placeholder:"admin"})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),d.jsx("input",{id:"password",type:"password",required:!0,autoComplete:"current-password",value:a,onChange:v=>s(v.target.value),className:"block w-full rounded-md border border-gray-300 px-3 py-2 text-sm text-gray-900 placeholder-gray-400 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500"})]}),d.jsx("button",{type:"submit",disabled:f,className:"w-full rounded-md bg-blue-600 px-3 py-2 text-sm font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:f?"Signing in":"Sign in"})]})]})})}const Qs=["Admin Account","Hostname","SIP Ports","First Trunk","First Extension","License Key","Review"],wb={admin_username:"admin",admin_password:"",admin_password_confirm:"",hostname:"",sip_port:5060,sip_tls_port:5061,rtp_port_min:1e4,rtp_port_max:2e4,trunk_name:"",trunk_host:"",trunk_port:5060,trunk_username:"",trunk_password:"",trunk_transport:"udp",skip_trunk:!1,ext_number:"100",ext_name:"",ext_password:"",skip_extension:!1,license_key:"",skip_license:!1},_t="block w-full rounded-md border border-gray-300 px-3 py-2 text-sm text-gray-900 placeholder-gray-400 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500",St="block text-sm font-medium text-gray-700 mb-1";function bb(){const e=yd(),[r,o]=E.useState(0),[a,s]=E.useState(wb),[l,c]=E.useState(""),[f,m]=E.useState(!1);function p(_,P){s(b=>({...b,[_]:P}))}function x(){switch(r){case 0:return a.admin_username.trim()?a.admin_password.length<8?"Password must be at least 8 characters":a.admin_password!==a.admin_password_confirm?"Passwords do not match":null:"Username is required";case 1:return a.hostname.trim()?null:"Hostname or IP address is required";case 2:return a.sip_port<1||a.sip_port>65535?"SIP port must be 1-65535":a.sip_tls_port<1||a.sip_tls_port>65535?"SIP TLS port must be 1-65535":a.rtp_port_min<1024?"RTP port min must be at least 1024":a.rtp_port_max>65535?"RTP port max must be at most 65535":a.rtp_port_min>=a.rtp_port_max?"RTP port min must be less than max":null;case 3:{if(!a.skip_trunk){if(!a.trunk_name.trim())return"Trunk name is required";if(!a.trunk_host.trim())return"Trunk host is required"}return null}case 4:{if(!a.skip_extension){if(!a.ext_number.trim())return"Extension number is required";if(!a.ext_name.trim())return"Display name is required";if(a.ext_password.length<8)return"SIP password must be at least 8 characters"}return null}default:return null}}function g(_){_.preventDefault();const P=x();if(P){c(P);return}c(""),o(b=>b+1)}function v(){c(""),o(_=>_-1)}async function w(_){_.preventDefault(),c(""),m(!0);try{await xb({admin_username:a.admin_username.trim(),admin_password:a.admin_password,hostname:a.hostname.trim(),sip_port:a.sip_port,sip_tls_port:a.sip_tls_port,rtp_port_min:a.rtp_port_min,rtp_port_max:a.rtp_port_max}),e("/login",{replace:!0})}catch(P){P instanceof lt?c(P.message):c("unable to connect to server")}finally{m(!1)}}function S(){switch(r){case 0:return d.jsxs("div",{className:"space-y-4",children:[d.jsx("p",{className:"text-sm text-gray-500",children:"Create the initial administrator account."}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"admin_username",className:St,children:"Username"}),d.jsx("input",{id:"admin_username",type:"text",required:!0,autoComplete:"username",autoFocus:!0,value:a.admin_username,onChange:_=>p("admin_username",_.target.value),className:_t})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"admin_password",className:St,children:"Password"}),d.jsx("input",{id:"admin_password",type:"password",required:!0,autoComplete:"new-password",value:a.admin_password,onChange:_=>p("admin_password",_.target.value),className:_t,placeholder:"Minimum 8 characters"})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"admin_password_confirm",className:St,children:"Confirm Password"}),d.jsx("input",{id:"admin_password_confirm",type:"password",required:!0,autoComplete:"new-password",value:a.admin_password_confirm,onChange:_=>p("admin_password_confirm",_.target.value),className:_t})]})]});case 1:return d.jsxs("div",{className:"space-y-4",children:[d.jsx("p",{className:"text-sm text-gray-500",children:"Enter the hostname or public IP address that SIP devices and trunks will use to reach this PBX."}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"hostname",className:St,children:"Hostname / External IP"}),d.jsx("input",{id:"hostname",type:"text",required:!0,autoFocus:!0,value:a.hostname,onChange:_=>p("hostname",_.target.value),className:_t,placeholder:"pbx.example.com or 203.0.113.10"})]})]});case 2:return d.jsxs("div",{className:"space-y-4",children:[d.jsx("p",{className:"text-sm text-gray-500",children:"Configure SIP signaling and RTP media port ranges. Defaults work for most installations."}),d.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsx("label",{htmlFor:"sip_port",className:St,children:"SIP UDP/TCP Port"}),d.jsx("input",{id:"sip_port",type:"number",required:!0,autoFocus:!0,min:1,max:65535,value:a.sip_port,onChange:_=>p("sip_port",Number(_.target.value)),className:_t})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"sip_tls_port",className:St,children:"SIP TLS Port"}),d.jsx("input",{id:"sip_tls_port",type:"number",required:!0,min:1,max:65535,value:a.sip_tls_port,onChange:_=>p("sip_tls_port",Number(_.target.value)),className:_t})]})]}),d.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsx("label",{htmlFor:"rtp_port_min",className:St,children:"RTP Port Min"}),d.jsx("input",{id:"rtp_port_min",type:"number",required:!0,min:1024,max:65535,value:a.rtp_port_min,onChange:_=>p("rtp_port_min",Number(_.target.value)),className:_t})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"rtp_port_max",className:St,children:"RTP Port Max"}),d.jsx("input",{id:"rtp_port_max",type:"number",required:!0,min:1024,max:65535,value:a.rtp_port_max,onChange:_=>p("rtp_port_max",Number(_.target.value)),className:_t})]})]})]});case 3:return d.jsxs("div",{className:"space-y-4",children:[d.jsx("p",{className:"text-sm text-gray-500",children:"Optionally configure your first SIP trunk to connect to an upstream provider."}),d.jsxs("label",{className:"flex items-center gap-2 text-sm text-gray-700",children:[d.jsx("input",{type:"checkbox",checked:a.skip_trunk,onChange:_=>p("skip_trunk",_.target.checked),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),"Skip  I'll add a trunk later"]}),!a.skip_trunk&&d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{htmlFor:"trunk_name",className:St,children:"Trunk Name"}),d.jsx("input",{id:"trunk_name",type:"text",value:a.trunk_name,onChange:_=>p("trunk_name",_.target.value),className:_t,placeholder:"My SIP Provider"})]}),d.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsx("label",{htmlFor:"trunk_host",className:St,children:"Host"}),d.jsx("input",{id:"trunk_host",type:"text",value:a.trunk_host,onChange:_=>p("trunk_host",_.target.value),className:_t,placeholder:"sip.provider.com"})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"trunk_port",className:St,children:"Port"}),d.jsx("input",{id:"trunk_port",type:"number",min:1,max:65535,value:a.trunk_port,onChange:_=>p("trunk_port",Number(_.target.value)),className:_t})]})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"trunk_transport",className:St,children:"Transport"}),d.jsxs("select",{id:"trunk_transport",value:a.trunk_transport,onChange:_=>p("trunk_transport",_.target.value),className:_t,children:[d.jsx("option",{value:"udp",children:"UDP"}),d.jsx("option",{value:"tcp",children:"TCP"}),d.jsx("option",{value:"tls",children:"TLS"})]})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"trunk_username",className:St,children:"Username"}),d.jsx("input",{id:"trunk_username",type:"text",value:a.trunk_username,onChange:_=>p("trunk_username",_.target.value),className:_t,autoComplete:"off"})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"trunk_password",className:St,children:"Password"}),d.jsx("input",{id:"trunk_password",type:"password",value:a.trunk_password,onChange:_=>p("trunk_password",_.target.value),className:_t,autoComplete:"off"})]})]})]});case 4:return d.jsxs("div",{className:"space-y-4",children:[d.jsx("p",{className:"text-sm text-gray-500",children:"Optionally create your first extension so a phone can register immediately."}),d.jsxs("label",{className:"flex items-center gap-2 text-sm text-gray-700",children:[d.jsx("input",{type:"checkbox",checked:a.skip_extension,onChange:_=>p("skip_extension",_.target.checked),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),"Skip  I'll add extensions later"]}),!a.skip_extension&&d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsx("label",{htmlFor:"ext_number",className:St,children:"Extension Number"}),d.jsx("input",{id:"ext_number",type:"text",value:a.ext_number,onChange:_=>p("ext_number",_.target.value),className:_t,placeholder:"100"})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"ext_name",className:St,children:"Display Name"}),d.jsx("input",{id:"ext_name",type:"text",value:a.ext_name,onChange:_=>p("ext_name",_.target.value),className:_t,placeholder:"John Smith"})]})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"ext_password",className:St,children:"SIP Password"}),d.jsx("input",{id:"ext_password",type:"password",value:a.ext_password,onChange:_=>p("ext_password",_.target.value),className:_t,placeholder:"Minimum 8 characters",autoComplete:"off"})]})]})]});case 5:return d.jsxs("div",{className:"space-y-4",children:[d.jsx("p",{className:"text-sm text-gray-500",children:"Enter your FlowPBX license key, or skip to use the free tier."}),d.jsxs("label",{className:"flex items-center gap-2 text-sm text-gray-700",children:[d.jsx("input",{type:"checkbox",checked:a.skip_license,onChange:_=>p("skip_license",_.target.checked),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),"Skip  use free tier"]}),!a.skip_license&&d.jsxs("div",{children:[d.jsx("label",{htmlFor:"license_key",className:St,children:"License Key"}),d.jsx("input",{id:"license_key",type:"text",value:a.license_key,onChange:_=>p("license_key",_.target.value),className:_t,placeholder:"XXXX-XXXX-XXXX-XXXX",autoComplete:"off"})]})]});case 6:return d.jsxs("div",{className:"space-y-4",children:[d.jsx("p",{className:"text-sm text-gray-500",children:"Review your settings before completing setup."}),d.jsxs("dl",{className:"divide-y divide-gray-100 text-sm",children:[d.jsx(Xr,{label:"Admin Username",value:a.admin_username}),d.jsx(Xr,{label:"Hostname",value:a.hostname}),d.jsx(Xr,{label:"SIP Port",value:String(a.sip_port)}),d.jsx(Xr,{label:"SIP TLS Port",value:String(a.sip_tls_port)}),d.jsx(Xr,{label:"RTP Ports",value:`${a.rtp_port_min}  ${a.rtp_port_max}`}),d.jsx(Xr,{label:"First Trunk",value:a.skip_trunk?"Skipped":`${a.trunk_name} (${a.trunk_host})`}),d.jsx(Xr,{label:"First Extension",value:a.skip_extension?"Skipped":`${a.ext_number}  ${a.ext_name}`}),d.jsx(Xr,{label:"License",value:a.skip_license?"Free tier":a.license_key||"(empty)"})]})]})}}const k=r===Qs.length-1,N=k?w:g;return d.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center px-4",children:d.jsxs("div",{className:"w-full max-w-lg",children:[d.jsxs("div",{className:"text-center mb-8",children:[d.jsx("h1",{className:"text-2xl font-bold text-gray-900 tracking-tight",children:"FlowPBX Setup"}),d.jsxs("p",{className:"mt-1 text-sm text-gray-500",children:["Step ",r+1," of ",Qs.length]})]}),d.jsx("div",{className:"mb-6",children:d.jsx("div",{className:"flex gap-1",children:Qs.map((_,P)=>d.jsx("div",{className:`h-1 flex-1 rounded-full transition-colors ${P<=r?"bg-blue-600":"bg-gray-200"}`},P))})}),d.jsxs("form",{onSubmit:N,className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[d.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:Qs[r]}),l&&d.jsx("div",{className:"rounded-md bg-red-50 border border-red-200 px-3 py-2 mb-4",children:d.jsx("p",{className:"text-sm text-red-700",children:l})}),S(),d.jsxs("div",{className:"flex justify-between mt-6 pt-4 border-t border-gray-100",children:[d.jsx("button",{type:"button",onClick:v,disabled:r===0,className:"rounded-md border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50 disabled:opacity-30 disabled:cursor-not-allowed transition-colors",children:"Back"}),d.jsx("button",{type:"submit",disabled:f,className:"rounded-md bg-blue-600 px-4 py-2 text-sm font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:k?f?"Finishing":"Finish Setup":"Next"})]})]})]})})}function Xr({label:e,value:r}){return d.jsxs("div",{className:"flex justify-between py-2",children:[d.jsx("dt",{className:"text-gray-500",children:e}),d.jsx("dd",{className:"font-medium text-gray-900",children:r})]})}const _b={active_calls:0,registered_devices:0,total_extensions:0,total_trunks:0,recent_cdrs:[]};function Sb(){const[e,r]=E.useState(_b),[o,a]=E.useState(!0);E.useEffect(()=>{let l=!1;return tr("/dashboard/stats").then(c=>{l||r(c)}).catch(()=>{}).finally(()=>{l||a(!1)}),()=>{l=!0}},[]);function s(l){const c=Math.floor(l/60),f=l%60;return`${c}:${f.toString().padStart(2,"0")}`}return d.jsxs("div",{children:[d.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Dashboard"}),d.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"System overview and recent activity."}),d.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mt-6",children:[d.jsx(qs,{label:"Active Calls",value:e.active_calls,loading:o,color:"blue"}),d.jsx(qs,{label:"Registered Devices",value:e.registered_devices,loading:o,color:"green"}),d.jsx(qs,{label:"Extensions",value:e.total_extensions,loading:o,color:"gray"}),d.jsx(qs,{label:"Trunks",value:e.total_trunks,loading:o,color:"gray"})]}),d.jsxs("div",{className:"mt-8",children:[d.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Recent Calls"}),d.jsx("div",{className:"overflow-x-auto border border-gray-200 rounded-lg",children:d.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[d.jsx("thead",{className:"bg-gray-50",children:d.jsxs("tr",{children:[d.jsx("th",{className:"px-4 py-2.5 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Time"}),d.jsx("th",{className:"px-4 py-2.5 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Direction"}),d.jsx("th",{className:"px-4 py-2.5 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"From"}),d.jsx("th",{className:"px-4 py-2.5 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"To"}),d.jsx("th",{className:"px-4 py-2.5 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Duration"}),d.jsx("th",{className:"px-4 py-2.5 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"})]})}),d.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:o?d.jsx("tr",{children:d.jsx("td",{colSpan:6,className:"px-4 py-8 text-center text-sm text-gray-400",children:"Loading..."})}):e.recent_cdrs.length===0?d.jsx("tr",{children:d.jsx("td",{colSpan:6,className:"px-4 py-8 text-center text-sm text-gray-400",children:"No recent calls."})}):e.recent_cdrs.map(l=>d.jsxs("tr",{children:[d.jsx("td",{className:"px-4 py-2.5 text-sm text-gray-900 whitespace-nowrap",children:new Date(l.timestamp).toLocaleString()}),d.jsx("td",{className:"px-4 py-2.5 text-sm text-gray-900",children:d.jsx(Nb,{direction:l.direction})}),d.jsx("td",{className:"px-4 py-2.5 text-sm text-gray-900",children:l.caller}),d.jsx("td",{className:"px-4 py-2.5 text-sm text-gray-900",children:l.callee}),d.jsx("td",{className:"px-4 py-2.5 text-sm text-gray-900",children:s(l.duration)}),d.jsx("td",{className:"px-4 py-2.5 text-sm",children:d.jsx(Eb,{status:l.status})})]},l.id))})]})})]})]})}function qs({label:e,value:r,loading:o,color:a}){const s={blue:"text-blue-600",green:"text-green-600",gray:"text-gray-900"};return d.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[d.jsx("p",{className:"text-sm font-medium text-gray-500",children:e}),d.jsx("p",{className:`mt-1 text-2xl font-bold ${s[a]}`,children:o?"":r})]})}function Nb({direction:e}){const r=e==="inbound";return d.jsx("span",{className:`inline-flex items-center rounded-full px-2 py-0.5 text-xs font-medium ${r?"bg-blue-50 text-blue-700":"bg-gray-100 text-gray-700"}`,children:r?"In":"Out"})}function Eb({status:e}){const r={answered:"bg-green-50 text-green-700",missed:"bg-red-50 text-red-700",busy:"bg-yellow-50 text-yellow-700",failed:"bg-red-50 text-red-700"};return d.jsx("span",{className:`inline-flex items-center rounded-full px-2 py-0.5 text-xs font-medium ${r[e]??"bg-gray-100 text-gray-700"}`,children:e})}function gt(e){if(typeof e=="string"||typeof e=="number")return""+e;let r="";if(Array.isArray(e))for(let o=0,a;o<e.length;o++)(a=gt(e[o]))!==""&&(r+=(r&&" ")+a);else for(let o in e)e[o]&&(r+=(r&&" ")+o);return r}var Cb={value:()=>{}};function Tl(){for(var e=0,r=arguments.length,o={},a;e<r;++e){if(!(a=arguments[e]+"")||a in o||/[\s.]/.test(a))throw new Error("illegal type: "+a);o[a]=[]}return new dl(o)}function dl(e){this._=e}function kb(e,r){return e.trim().split(/^|\s+/).map(function(o){var a="",s=o.indexOf(".");if(s>=0&&(a=o.slice(s+1),o=o.slice(0,s)),o&&!r.hasOwnProperty(o))throw new Error("unknown type: "+o);return{type:o,name:a}})}dl.prototype=Tl.prototype={constructor:dl,on:function(e,r){var o=this._,a=kb(e+"",o),s,l=-1,c=a.length;if(arguments.length<2){for(;++l<c;)if((s=(e=a[l]).type)&&(s=jb(o[s],e.name)))return s;return}if(r!=null&&typeof r!="function")throw new Error("invalid callback: "+r);for(;++l<c;)if(s=(e=a[l]).type)o[s]=Qp(o[s],e.name,r);else if(r==null)for(s in o)o[s]=Qp(o[s],e.name,null);return this},copy:function(){var e={},r=this._;for(var o in r)e[o]=r[o].slice();return new dl(e)},call:function(e,r){if((s=arguments.length-2)>0)for(var o=new Array(s),a=0,s,l;a<s;++a)o[a]=arguments[a+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(l=this._[e],a=0,s=l.length;a<s;++a)l[a].value.apply(r,o)},apply:function(e,r,o){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var a=this._[e],s=0,l=a.length;s<l;++s)a[s].value.apply(r,o)}};function jb(e,r){for(var o=0,a=e.length,s;o<a;++o)if((s=e[o]).name===r)return s.value}function Qp(e,r,o){for(var a=0,s=e.length;a<s;++a)if(e[a].name===r){e[a]=Cb,e=e.slice(0,a).concat(e.slice(a+1));break}return o!=null&&e.push({name:r,value:o}),e}var Zc="http://www.w3.org/1999/xhtml";const qp={svg:"http://www.w3.org/2000/svg",xhtml:Zc,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Dl(e){var r=e+="",o=r.indexOf(":");return o>=0&&(r=e.slice(0,o))!=="xmlns"&&(e=e.slice(o+1)),qp.hasOwnProperty(r)?{space:qp[r],local:e}:e}function Pb(e){return function(){var r=this.ownerDocument,o=this.namespaceURI;return o===Zc&&r.documentElement.namespaceURI===Zc?r.createElement(e):r.createElementNS(o,e)}}function Rb(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function W0(e){var r=Dl(e);return(r.local?Rb:Pb)(r)}function Mb(){}function Sd(e){return e==null?Mb:function(){return this.querySelector(e)}}function Tb(e){typeof e!="function"&&(e=Sd(e));for(var r=this._groups,o=r.length,a=new Array(o),s=0;s<o;++s)for(var l=r[s],c=l.length,f=a[s]=new Array(c),m,p,x=0;x<c;++x)(m=l[x])&&(p=e.call(m,m.__data__,x,l))&&("__data__"in m&&(p.__data__=m.__data__),f[x]=p);return new sn(a,this._parents)}function Db(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function Lb(){return[]}function X0(e){return e==null?Lb:function(){return this.querySelectorAll(e)}}function zb(e){return function(){return Db(e.apply(this,arguments))}}function Ib(e){typeof e=="function"?e=zb(e):e=X0(e);for(var r=this._groups,o=r.length,a=[],s=[],l=0;l<o;++l)for(var c=r[l],f=c.length,m,p=0;p<f;++p)(m=c[p])&&(a.push(e.call(m,m.__data__,p,c)),s.push(m));return new sn(a,s)}function Y0(e){return function(){return this.matches(e)}}function G0(e){return function(r){return r.matches(e)}}var $b=Array.prototype.find;function Fb(e){return function(){return $b.call(this.children,e)}}function Ab(){return this.firstElementChild}function Ob(e){return this.select(e==null?Ab:Fb(typeof e=="function"?e:G0(e)))}var Hb=Array.prototype.filter;function Bb(){return Array.from(this.children)}function Vb(e){return function(){return Hb.call(this.children,e)}}function Ub(e){return this.selectAll(e==null?Bb:Vb(typeof e=="function"?e:G0(e)))}function Wb(e){typeof e!="function"&&(e=Y0(e));for(var r=this._groups,o=r.length,a=new Array(o),s=0;s<o;++s)for(var l=r[s],c=l.length,f=a[s]=[],m,p=0;p<c;++p)(m=l[p])&&e.call(m,m.__data__,p,l)&&f.push(m);return new sn(a,this._parents)}function K0(e){return new Array(e.length)}function Xb(){return new sn(this._enter||this._groups.map(K0),this._parents)}function yl(e,r){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=r}yl.prototype={constructor:yl,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,r){return this._parent.insertBefore(e,r)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function Yb(e){return function(){return e}}function Gb(e,r,o,a,s,l){for(var c=0,f,m=r.length,p=l.length;c<p;++c)(f=r[c])?(f.__data__=l[c],a[c]=f):o[c]=new yl(e,l[c]);for(;c<m;++c)(f=r[c])&&(s[c]=f)}function Kb(e,r,o,a,s,l,c){var f,m,p=new Map,x=r.length,g=l.length,v=new Array(x),w;for(f=0;f<x;++f)(m=r[f])&&(v[f]=w=c.call(m,m.__data__,f,r)+"",p.has(w)?s[f]=m:p.set(w,m));for(f=0;f<g;++f)w=c.call(e,l[f],f,l)+"",(m=p.get(w))?(a[f]=m,m.__data__=l[f],p.delete(w)):o[f]=new yl(e,l[f]);for(f=0;f<x;++f)(m=r[f])&&p.get(v[f])===m&&(s[f]=m)}function Zb(e){return e.__data__}function Qb(e,r){if(!arguments.length)return Array.from(this,Zb);var o=r?Kb:Gb,a=this._parents,s=this._groups;typeof e!="function"&&(e=Yb(e));for(var l=s.length,c=new Array(l),f=new Array(l),m=new Array(l),p=0;p<l;++p){var x=a[p],g=s[p],v=g.length,w=qb(e.call(x,x&&x.__data__,p,a)),S=w.length,k=f[p]=new Array(S),N=c[p]=new Array(S),_=m[p]=new Array(v);o(x,g,k,N,_,w,r);for(var P=0,b=0,j,I;P<S;++P)if(j=k[P]){for(P>=b&&(b=P+1);!(I=N[b])&&++b<S;);j._next=I||null}}return c=new sn(c,a),c._enter=f,c._exit=m,c}function qb(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Jb(){return new sn(this._exit||this._groups.map(K0),this._parents)}function e2(e,r,o){var a=this.enter(),s=this,l=this.exit();return typeof e=="function"?(a=e(a),a&&(a=a.selection())):a=a.append(e+""),r!=null&&(s=r(s),s&&(s=s.selection())),o==null?l.remove():o(l),a&&s?a.merge(s).order():s}function t2(e){for(var r=e.selection?e.selection():e,o=this._groups,a=r._groups,s=o.length,l=a.length,c=Math.min(s,l),f=new Array(s),m=0;m<c;++m)for(var p=o[m],x=a[m],g=p.length,v=f[m]=new Array(g),w,S=0;S<g;++S)(w=p[S]||x[S])&&(v[S]=w);for(;m<s;++m)f[m]=o[m];return new sn(f,this._parents)}function n2(){for(var e=this._groups,r=-1,o=e.length;++r<o;)for(var a=e[r],s=a.length-1,l=a[s],c;--s>=0;)(c=a[s])&&(l&&c.compareDocumentPosition(l)^4&&l.parentNode.insertBefore(c,l),l=c);return this}function r2(e){e||(e=o2);function r(g,v){return g&&v?e(g.__data__,v.__data__):!g-!v}for(var o=this._groups,a=o.length,s=new Array(a),l=0;l<a;++l){for(var c=o[l],f=c.length,m=s[l]=new Array(f),p,x=0;x<f;++x)(p=c[x])&&(m[x]=p);m.sort(r)}return new sn(s,this._parents).order()}function o2(e,r){return e<r?-1:e>r?1:e>=r?0:NaN}function i2(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function a2(){return Array.from(this)}function s2(){for(var e=this._groups,r=0,o=e.length;r<o;++r)for(var a=e[r],s=0,l=a.length;s<l;++s){var c=a[s];if(c)return c}return null}function l2(){let e=0;for(const r of this)++e;return e}function u2(){return!this.node()}function c2(e){for(var r=this._groups,o=0,a=r.length;o<a;++o)for(var s=r[o],l=0,c=s.length,f;l<c;++l)(f=s[l])&&e.call(f,f.__data__,l,s);return this}function d2(e){return function(){this.removeAttribute(e)}}function f2(e){return function(){this.removeAttributeNS(e.space,e.local)}}function h2(e,r){return function(){this.setAttribute(e,r)}}function p2(e,r){return function(){this.setAttributeNS(e.space,e.local,r)}}function m2(e,r){return function(){var o=r.apply(this,arguments);o==null?this.removeAttribute(e):this.setAttribute(e,o)}}function g2(e,r){return function(){var o=r.apply(this,arguments);o==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,o)}}function y2(e,r){var o=Dl(e);if(arguments.length<2){var a=this.node();return o.local?a.getAttributeNS(o.space,o.local):a.getAttribute(o)}return this.each((r==null?o.local?f2:d2:typeof r=="function"?o.local?g2:m2:o.local?p2:h2)(o,r))}function Z0(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function x2(e){return function(){this.style.removeProperty(e)}}function v2(e,r,o){return function(){this.style.setProperty(e,r,o)}}function w2(e,r,o){return function(){var a=r.apply(this,arguments);a==null?this.style.removeProperty(e):this.style.setProperty(e,a,o)}}function b2(e,r,o){return arguments.length>1?this.each((r==null?x2:typeof r=="function"?w2:v2)(e,r,o??"")):vi(this.node(),e)}function vi(e,r){return e.style.getPropertyValue(r)||Z0(e).getComputedStyle(e,null).getPropertyValue(r)}function _2(e){return function(){delete this[e]}}function S2(e,r){return function(){this[e]=r}}function N2(e,r){return function(){var o=r.apply(this,arguments);o==null?delete this[e]:this[e]=o}}function E2(e,r){return arguments.length>1?this.each((r==null?_2:typeof r=="function"?N2:S2)(e,r)):this.node()[e]}function Q0(e){return e.trim().split(/^|\s+/)}function Nd(e){return e.classList||new q0(e)}function q0(e){this._node=e,this._names=Q0(e.getAttribute("class")||"")}q0.prototype={add:function(e){var r=this._names.indexOf(e);r<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var r=this._names.indexOf(e);r>=0&&(this._names.splice(r,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function J0(e,r){for(var o=Nd(e),a=-1,s=r.length;++a<s;)o.add(r[a])}function eg(e,r){for(var o=Nd(e),a=-1,s=r.length;++a<s;)o.remove(r[a])}function C2(e){return function(){J0(this,e)}}function k2(e){return function(){eg(this,e)}}function j2(e,r){return function(){(r.apply(this,arguments)?J0:eg)(this,e)}}function P2(e,r){var o=Q0(e+"");if(arguments.length<2){for(var a=Nd(this.node()),s=-1,l=o.length;++s<l;)if(!a.contains(o[s]))return!1;return!0}return this.each((typeof r=="function"?j2:r?C2:k2)(o,r))}function R2(){this.textContent=""}function M2(e){return function(){this.textContent=e}}function T2(e){return function(){var r=e.apply(this,arguments);this.textContent=r??""}}function D2(e){return arguments.length?this.each(e==null?R2:(typeof e=="function"?T2:M2)(e)):this.node().textContent}function L2(){this.innerHTML=""}function z2(e){return function(){this.innerHTML=e}}function I2(e){return function(){var r=e.apply(this,arguments);this.innerHTML=r??""}}function $2(e){return arguments.length?this.each(e==null?L2:(typeof e=="function"?I2:z2)(e)):this.node().innerHTML}function F2(){this.nextSibling&&this.parentNode.appendChild(this)}function A2(){return this.each(F2)}function O2(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function H2(){return this.each(O2)}function B2(e){var r=typeof e=="function"?e:W0(e);return this.select(function(){return this.appendChild(r.apply(this,arguments))})}function V2(){return null}function U2(e,r){var o=typeof e=="function"?e:W0(e),a=r==null?V2:typeof r=="function"?r:Sd(r);return this.select(function(){return this.insertBefore(o.apply(this,arguments),a.apply(this,arguments)||null)})}function W2(){var e=this.parentNode;e&&e.removeChild(this)}function X2(){return this.each(W2)}function Y2(){var e=this.cloneNode(!1),r=this.parentNode;return r?r.insertBefore(e,this.nextSibling):e}function G2(){var e=this.cloneNode(!0),r=this.parentNode;return r?r.insertBefore(e,this.nextSibling):e}function K2(e){return this.select(e?G2:Y2)}function Z2(e){return arguments.length?this.property("__data__",e):this.node().__data__}function Q2(e){return function(r){e.call(this,r,this.__data__)}}function q2(e){return e.trim().split(/^|\s+/).map(function(r){var o="",a=r.indexOf(".");return a>=0&&(o=r.slice(a+1),r=r.slice(0,a)),{type:r,name:o}})}function J2(e){return function(){var r=this.__on;if(r){for(var o=0,a=-1,s=r.length,l;o<s;++o)l=r[o],(!e.type||l.type===e.type)&&l.name===e.name?this.removeEventListener(l.type,l.listener,l.options):r[++a]=l;++a?r.length=a:delete this.__on}}}function e_(e,r,o){return function(){var a=this.__on,s,l=Q2(r);if(a){for(var c=0,f=a.length;c<f;++c)if((s=a[c]).type===e.type&&s.name===e.name){this.removeEventListener(s.type,s.listener,s.options),this.addEventListener(s.type,s.listener=l,s.options=o),s.value=r;return}}this.addEventListener(e.type,l,o),s={type:e.type,name:e.name,value:r,listener:l,options:o},a?a.push(s):this.__on=[s]}}function t_(e,r,o){var a=q2(e+""),s,l=a.length,c;if(arguments.length<2){var f=this.node().__on;if(f){for(var m=0,p=f.length,x;m<p;++m)for(s=0,x=f[m];s<l;++s)if((c=a[s]).type===x.type&&c.name===x.name)return x.value}return}for(f=r?e_:J2,s=0;s<l;++s)this.each(f(a[s],r,o));return this}function tg(e,r,o){var a=Z0(e),s=a.CustomEvent;typeof s=="function"?s=new s(r,o):(s=a.document.createEvent("Event"),o?(s.initEvent(r,o.bubbles,o.cancelable),s.detail=o.detail):s.initEvent(r,!1,!1)),e.dispatchEvent(s)}function n_(e,r){return function(){return tg(this,e,r)}}function r_(e,r){return function(){return tg(this,e,r.apply(this,arguments))}}function o_(e,r){return this.each((typeof r=="function"?r_:n_)(e,r))}function*i_(){for(var e=this._groups,r=0,o=e.length;r<o;++r)for(var a=e[r],s=0,l=a.length,c;s<l;++s)(c=a[s])&&(yield c)}var ng=[null];function sn(e,r){this._groups=e,this._parents=r}function Fa(){return new sn([[document.documentElement]],ng)}function a_(){return this}sn.prototype=Fa.prototype={constructor:sn,select:Tb,selectAll:Ib,selectChild:Ob,selectChildren:Ub,filter:Wb,data:Qb,enter:Xb,exit:Jb,join:e2,merge:t2,selection:a_,order:n2,sort:r2,call:i2,nodes:a2,node:s2,size:l2,empty:u2,each:c2,attr:y2,style:b2,property:E2,classed:P2,text:D2,html:$2,raise:A2,lower:H2,append:B2,insert:U2,remove:X2,clone:K2,datum:Z2,on:t_,dispatch:o_,[Symbol.iterator]:i_};function an(e){return typeof e=="string"?new sn([[document.querySelector(e)]],[document.documentElement]):new sn([[e]],ng)}function s_(e){let r;for(;r=e.sourceEvent;)e=r;return e}function Ln(e,r){if(e=s_(e),r===void 0&&(r=e.currentTarget),r){var o=r.ownerSVGElement||r;if(o.createSVGPoint){var a=o.createSVGPoint();return a.x=e.clientX,a.y=e.clientY,a=a.matrixTransform(r.getScreenCTM().inverse()),[a.x,a.y]}if(r.getBoundingClientRect){var s=r.getBoundingClientRect();return[e.clientX-s.left-r.clientLeft,e.clientY-s.top-r.clientTop]}}return[e.pageX,e.pageY]}const l_={passive:!1},_a={capture:!0,passive:!1};function Tc(e){e.stopImmediatePropagation()}function yi(e){e.preventDefault(),e.stopImmediatePropagation()}function rg(e){var r=e.document.documentElement,o=an(e).on("dragstart.drag",yi,_a);"onselectstart"in r?o.on("selectstart.drag",yi,_a):(r.__noselect=r.style.MozUserSelect,r.style.MozUserSelect="none")}function og(e,r){var o=e.document.documentElement,a=an(e).on("dragstart.drag",null);r&&(a.on("click.drag",yi,_a),setTimeout(function(){a.on("click.drag",null)},0)),"onselectstart"in o?a.on("selectstart.drag",null):(o.style.MozUserSelect=o.__noselect,delete o.__noselect)}const Js=e=>()=>e;function Qc(e,{sourceEvent:r,subject:o,target:a,identifier:s,active:l,x:c,y:f,dx:m,dy:p,dispatch:x}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:r,enumerable:!0,configurable:!0},subject:{value:o,enumerable:!0,configurable:!0},target:{value:a,enumerable:!0,configurable:!0},identifier:{value:s,enumerable:!0,configurable:!0},active:{value:l,enumerable:!0,configurable:!0},x:{value:c,enumerable:!0,configurable:!0},y:{value:f,enumerable:!0,configurable:!0},dx:{value:m,enumerable:!0,configurable:!0},dy:{value:p,enumerable:!0,configurable:!0},_:{value:x}})}Qc.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function u_(e){return!e.ctrlKey&&!e.button}function c_(){return this.parentNode}function d_(e,r){return r??{x:e.x,y:e.y}}function f_(){return navigator.maxTouchPoints||"ontouchstart"in this}function ig(){var e=u_,r=c_,o=d_,a=f_,s={},l=Tl("start","drag","end"),c=0,f,m,p,x,g=0;function v(j){j.on("mousedown.drag",w).filter(a).on("touchstart.drag",N).on("touchmove.drag",_,l_).on("touchend.drag touchcancel.drag",P).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function w(j,I){if(!(x||!e.call(this,j,I))){var D=b(this,r.call(this,j,I),j,I,"mouse");D&&(an(j.view).on("mousemove.drag",S,_a).on("mouseup.drag",k,_a),rg(j.view),Tc(j),p=!1,f=j.clientX,m=j.clientY,D("start",j))}}function S(j){if(yi(j),!p){var I=j.clientX-f,D=j.clientY-m;p=I*I+D*D>g}s.mouse("drag",j)}function k(j){an(j.view).on("mousemove.drag mouseup.drag",null),og(j.view,p),yi(j),s.mouse("end",j)}function N(j,I){if(e.call(this,j,I)){var D=j.changedTouches,R=r.call(this,j,I),A=D.length,K,F;for(K=0;K<A;++K)(F=b(this,R,j,I,D[K].identifier,D[K]))&&(Tc(j),F("start",j,D[K]))}}function _(j){var I=j.changedTouches,D=I.length,R,A;for(R=0;R<D;++R)(A=s[I[R].identifier])&&(yi(j),A("drag",j,I[R]))}function P(j){var I=j.changedTouches,D=I.length,R,A;for(x&&clearTimeout(x),x=setTimeout(function(){x=null},500),R=0;R<D;++R)(A=s[I[R].identifier])&&(Tc(j),A("end",j,I[R]))}function b(j,I,D,R,A,K){var F=l.copy(),V=Ln(K||D,I),H,W,M;if((M=o.call(j,new Qc("beforestart",{sourceEvent:D,target:v,identifier:A,active:c,x:V[0],y:V[1],dx:0,dy:0,dispatch:F}),R))!=null)return H=M.x-V[0]||0,W=M.y-V[1]||0,function L(X,Q,z){var G=V,U;switch(X){case"start":s[A]=L,U=c++;break;case"end":delete s[A],--c;case"drag":V=Ln(z||Q,I),U=c;break}F.call(X,j,new Qc(X,{sourceEvent:Q,subject:M,target:v,identifier:A,active:U,x:V[0]+H,y:V[1]+W,dx:V[0]-G[0],dy:V[1]-G[1],dispatch:F}),R)}}return v.filter=function(j){return arguments.length?(e=typeof j=="function"?j:Js(!!j),v):e},v.container=function(j){return arguments.length?(r=typeof j=="function"?j:Js(j),v):r},v.subject=function(j){return arguments.length?(o=typeof j=="function"?j:Js(j),v):o},v.touchable=function(j){return arguments.length?(a=typeof j=="function"?j:Js(!!j),v):a},v.on=function(){var j=l.on.apply(l,arguments);return j===l?v:j},v.clickDistance=function(j){return arguments.length?(g=(j=+j)*j,v):Math.sqrt(g)},v}function Ed(e,r,o){e.prototype=r.prototype=o,o.constructor=e}function ag(e,r){var o=Object.create(e.prototype);for(var a in r)o[a]=r[a];return o}function Aa(){}var Sa=.7,xl=1/Sa,xi="\\s*([+-]?\\d+)\\s*",Na="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Qn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",h_=/^#([0-9a-f]{3,8})$/,p_=new RegExp(`^rgb\\(${xi},${xi},${xi}\\)$`),m_=new RegExp(`^rgb\\(${Qn},${Qn},${Qn}\\)$`),g_=new RegExp(`^rgba\\(${xi},${xi},${xi},${Na}\\)$`),y_=new RegExp(`^rgba\\(${Qn},${Qn},${Qn},${Na}\\)$`),x_=new RegExp(`^hsl\\(${Na},${Qn},${Qn}\\)$`),v_=new RegExp(`^hsla\\(${Na},${Qn},${Qn},${Na}\\)$`),Jp={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Ed(Aa,Mo,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:em,formatHex:em,formatHex8:w_,formatHsl:b_,formatRgb:tm,toString:tm});function em(){return this.rgb().formatHex()}function w_(){return this.rgb().formatHex8()}function b_(){return sg(this).formatHsl()}function tm(){return this.rgb().formatRgb()}function Mo(e){var r,o;return e=(e+"").trim().toLowerCase(),(r=h_.exec(e))?(o=r[1].length,r=parseInt(r[1],16),o===6?nm(r):o===3?new Zt(r>>8&15|r>>4&240,r>>4&15|r&240,(r&15)<<4|r&15,1):o===8?el(r>>24&255,r>>16&255,r>>8&255,(r&255)/255):o===4?el(r>>12&15|r>>8&240,r>>8&15|r>>4&240,r>>4&15|r&240,((r&15)<<4|r&15)/255):null):(r=p_.exec(e))?new Zt(r[1],r[2],r[3],1):(r=m_.exec(e))?new Zt(r[1]*255/100,r[2]*255/100,r[3]*255/100,1):(r=g_.exec(e))?el(r[1],r[2],r[3],r[4]):(r=y_.exec(e))?el(r[1]*255/100,r[2]*255/100,r[3]*255/100,r[4]):(r=x_.exec(e))?im(r[1],r[2]/100,r[3]/100,1):(r=v_.exec(e))?im(r[1],r[2]/100,r[3]/100,r[4]):Jp.hasOwnProperty(e)?nm(Jp[e]):e==="transparent"?new Zt(NaN,NaN,NaN,0):null}function nm(e){return new Zt(e>>16&255,e>>8&255,e&255,1)}function el(e,r,o,a){return a<=0&&(e=r=o=NaN),new Zt(e,r,o,a)}function __(e){return e instanceof Aa||(e=Mo(e)),e?(e=e.rgb(),new Zt(e.r,e.g,e.b,e.opacity)):new Zt}function qc(e,r,o,a){return arguments.length===1?__(e):new Zt(e,r,o,a??1)}function Zt(e,r,o,a){this.r=+e,this.g=+r,this.b=+o,this.opacity=+a}Ed(Zt,qc,ag(Aa,{brighter(e){return e=e==null?xl:Math.pow(xl,e),new Zt(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Sa:Math.pow(Sa,e),new Zt(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Zt(ko(this.r),ko(this.g),ko(this.b),vl(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:rm,formatHex:rm,formatHex8:S_,formatRgb:om,toString:om}));function rm(){return`#${Co(this.r)}${Co(this.g)}${Co(this.b)}`}function S_(){return`#${Co(this.r)}${Co(this.g)}${Co(this.b)}${Co((isNaN(this.opacity)?1:this.opacity)*255)}`}function om(){const e=vl(this.opacity);return`${e===1?"rgb(":"rgba("}${ko(this.r)}, ${ko(this.g)}, ${ko(this.b)}${e===1?")":`, ${e})`}`}function vl(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function ko(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Co(e){return e=ko(e),(e<16?"0":"")+e.toString(16)}function im(e,r,o,a){return a<=0?e=r=o=NaN:o<=0||o>=1?e=r=NaN:r<=0&&(e=NaN),new zn(e,r,o,a)}function sg(e){if(e instanceof zn)return new zn(e.h,e.s,e.l,e.opacity);if(e instanceof Aa||(e=Mo(e)),!e)return new zn;if(e instanceof zn)return e;e=e.rgb();var r=e.r/255,o=e.g/255,a=e.b/255,s=Math.min(r,o,a),l=Math.max(r,o,a),c=NaN,f=l-s,m=(l+s)/2;return f?(r===l?c=(o-a)/f+(o<a)*6:o===l?c=(a-r)/f+2:c=(r-o)/f+4,f/=m<.5?l+s:2-l-s,c*=60):f=m>0&&m<1?0:c,new zn(c,f,m,e.opacity)}function N_(e,r,o,a){return arguments.length===1?sg(e):new zn(e,r,o,a??1)}function zn(e,r,o,a){this.h=+e,this.s=+r,this.l=+o,this.opacity=+a}Ed(zn,N_,ag(Aa,{brighter(e){return e=e==null?xl:Math.pow(xl,e),new zn(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Sa:Math.pow(Sa,e),new zn(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,r=isNaN(e)||isNaN(this.s)?0:this.s,o=this.l,a=o+(o<.5?o:1-o)*r,s=2*o-a;return new Zt(Dc(e>=240?e-240:e+120,s,a),Dc(e,s,a),Dc(e<120?e+240:e-120,s,a),this.opacity)},clamp(){return new zn(am(this.h),tl(this.s),tl(this.l),vl(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=vl(this.opacity);return`${e===1?"hsl(":"hsla("}${am(this.h)}, ${tl(this.s)*100}%, ${tl(this.l)*100}%${e===1?")":`, ${e})`}`}}));function am(e){return e=(e||0)%360,e<0?e+360:e}function tl(e){return Math.max(0,Math.min(1,e||0))}function Dc(e,r,o){return(e<60?r+(o-r)*e/60:e<180?o:e<240?r+(o-r)*(240-e)/60:r)*255}const Cd=e=>()=>e;function E_(e,r){return function(o){return e+o*r}}function C_(e,r,o){return e=Math.pow(e,o),r=Math.pow(r,o)-e,o=1/o,function(a){return Math.pow(e+a*r,o)}}function k_(e){return(e=+e)==1?lg:function(r,o){return o-r?C_(r,o,e):Cd(isNaN(r)?o:r)}}function lg(e,r){var o=r-e;return o?E_(e,o):Cd(isNaN(e)?r:e)}const wl=(function e(r){var o=k_(r);function a(s,l){var c=o((s=qc(s)).r,(l=qc(l)).r),f=o(s.g,l.g),m=o(s.b,l.b),p=lg(s.opacity,l.opacity);return function(x){return s.r=c(x),s.g=f(x),s.b=m(x),s.opacity=p(x),s+""}}return a.gamma=e,a})(1);function j_(e,r){r||(r=[]);var o=e?Math.min(r.length,e.length):0,a=r.slice(),s;return function(l){for(s=0;s<o;++s)a[s]=e[s]*(1-l)+r[s]*l;return a}}function P_(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function R_(e,r){var o=r?r.length:0,a=e?Math.min(o,e.length):0,s=new Array(a),l=new Array(o),c;for(c=0;c<a;++c)s[c]=ya(e[c],r[c]);for(;c<o;++c)l[c]=r[c];return function(f){for(c=0;c<a;++c)l[c]=s[c](f);return l}}function M_(e,r){var o=new Date;return e=+e,r=+r,function(a){return o.setTime(e*(1-a)+r*a),o}}function Kn(e,r){return e=+e,r=+r,function(o){return e*(1-o)+r*o}}function T_(e,r){var o={},a={},s;(e===null||typeof e!="object")&&(e={}),(r===null||typeof r!="object")&&(r={});for(s in r)s in e?o[s]=ya(e[s],r[s]):a[s]=r[s];return function(l){for(s in o)a[s]=o[s](l);return a}}var Jc=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Lc=new RegExp(Jc.source,"g");function D_(e){return function(){return e}}function L_(e){return function(r){return e(r)+""}}function ug(e,r){var o=Jc.lastIndex=Lc.lastIndex=0,a,s,l,c=-1,f=[],m=[];for(e=e+"",r=r+"";(a=Jc.exec(e))&&(s=Lc.exec(r));)(l=s.index)>o&&(l=r.slice(o,l),f[c]?f[c]+=l:f[++c]=l),(a=a[0])===(s=s[0])?f[c]?f[c]+=s:f[++c]=s:(f[++c]=null,m.push({i:c,x:Kn(a,s)})),o=Lc.lastIndex;return o<r.length&&(l=r.slice(o),f[c]?f[c]+=l:f[++c]=l),f.length<2?m[0]?L_(m[0].x):D_(r):(r=m.length,function(p){for(var x=0,g;x<r;++x)f[(g=m[x]).i]=g.x(p);return f.join("")})}function ya(e,r){var o=typeof r,a;return r==null||o==="boolean"?Cd(r):(o==="number"?Kn:o==="string"?(a=Mo(r))?(r=a,wl):ug:r instanceof Mo?wl:r instanceof Date?M_:P_(r)?j_:Array.isArray(r)?R_:typeof r.valueOf!="function"&&typeof r.toString!="function"||isNaN(r)?T_:Kn)(e,r)}var sm=180/Math.PI,ed={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function cg(e,r,o,a,s,l){var c,f,m;return(c=Math.sqrt(e*e+r*r))&&(e/=c,r/=c),(m=e*o+r*a)&&(o-=e*m,a-=r*m),(f=Math.sqrt(o*o+a*a))&&(o/=f,a/=f,m/=f),e*a<r*o&&(e=-e,r=-r,m=-m,c=-c),{translateX:s,translateY:l,rotate:Math.atan2(r,e)*sm,skewX:Math.atan(m)*sm,scaleX:c,scaleY:f}}var nl;function z_(e){const r=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return r.isIdentity?ed:cg(r.a,r.b,r.c,r.d,r.e,r.f)}function I_(e){return e==null||(nl||(nl=document.createElementNS("http://www.w3.org/2000/svg","g")),nl.setAttribute("transform",e),!(e=nl.transform.baseVal.consolidate()))?ed:(e=e.matrix,cg(e.a,e.b,e.c,e.d,e.e,e.f))}function dg(e,r,o,a){function s(p){return p.length?p.pop()+" ":""}function l(p,x,g,v,w,S){if(p!==g||x!==v){var k=w.push("translate(",null,r,null,o);S.push({i:k-4,x:Kn(p,g)},{i:k-2,x:Kn(x,v)})}else(g||v)&&w.push("translate("+g+r+v+o)}function c(p,x,g,v){p!==x?(p-x>180?x+=360:x-p>180&&(p+=360),v.push({i:g.push(s(g)+"rotate(",null,a)-2,x:Kn(p,x)})):x&&g.push(s(g)+"rotate("+x+a)}function f(p,x,g,v){p!==x?v.push({i:g.push(s(g)+"skewX(",null,a)-2,x:Kn(p,x)}):x&&g.push(s(g)+"skewX("+x+a)}function m(p,x,g,v,w,S){if(p!==g||x!==v){var k=w.push(s(w)+"scale(",null,",",null,")");S.push({i:k-4,x:Kn(p,g)},{i:k-2,x:Kn(x,v)})}else(g!==1||v!==1)&&w.push(s(w)+"scale("+g+","+v+")")}return function(p,x){var g=[],v=[];return p=e(p),x=e(x),l(p.translateX,p.translateY,x.translateX,x.translateY,g,v),c(p.rotate,x.rotate,g,v),f(p.skewX,x.skewX,g,v),m(p.scaleX,p.scaleY,x.scaleX,x.scaleY,g,v),p=x=null,function(w){for(var S=-1,k=v.length,N;++S<k;)g[(N=v[S]).i]=N.x(w);return g.join("")}}}var $_=dg(z_,"px, ","px)","deg)"),F_=dg(I_,", ",")",")"),A_=1e-12;function lm(e){return((e=Math.exp(e))+1/e)/2}function O_(e){return((e=Math.exp(e))-1/e)/2}function H_(e){return((e=Math.exp(2*e))-1)/(e+1)}const fl=(function e(r,o,a){function s(l,c){var f=l[0],m=l[1],p=l[2],x=c[0],g=c[1],v=c[2],w=x-f,S=g-m,k=w*w+S*S,N,_;if(k<A_)_=Math.log(v/p)/r,N=function(R){return[f+R*w,m+R*S,p*Math.exp(r*R*_)]};else{var P=Math.sqrt(k),b=(v*v-p*p+a*k)/(2*p*o*P),j=(v*v-p*p-a*k)/(2*v*o*P),I=Math.log(Math.sqrt(b*b+1)-b),D=Math.log(Math.sqrt(j*j+1)-j);_=(D-I)/r,N=function(R){var A=R*_,K=lm(I),F=p/(o*P)*(K*H_(r*A+I)-O_(I));return[f+F*w,m+F*S,p*K/lm(r*A+I)]}}return N.duration=_*1e3*r/Math.SQRT2,N}return s.rho=function(l){var c=Math.max(.001,+l),f=c*c,m=f*f;return e(c,f,m)},s})(Math.SQRT2,2,4);var wi=0,pa=0,ca=0,fg=1e3,bl,ma,_l=0,To=0,Ll=0,Ea=typeof performance=="object"&&performance.now?performance:Date,hg=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function kd(){return To||(hg(B_),To=Ea.now()+Ll)}function B_(){To=0}function Sl(){this._call=this._time=this._next=null}Sl.prototype=pg.prototype={constructor:Sl,restart:function(e,r,o){if(typeof e!="function")throw new TypeError("callback is not a function");o=(o==null?kd():+o)+(r==null?0:+r),!this._next&&ma!==this&&(ma?ma._next=this:bl=this,ma=this),this._call=e,this._time=o,td()},stop:function(){this._call&&(this._call=null,this._time=1/0,td())}};function pg(e,r,o){var a=new Sl;return a.restart(e,r,o),a}function V_(){kd(),++wi;for(var e=bl,r;e;)(r=To-e._time)>=0&&e._call.call(void 0,r),e=e._next;--wi}function um(){To=(_l=Ea.now())+Ll,wi=pa=0;try{V_()}finally{wi=0,W_(),To=0}}function U_(){var e=Ea.now(),r=e-_l;r>fg&&(Ll-=r,_l=e)}function W_(){for(var e,r=bl,o,a=1/0;r;)r._call?(a>r._time&&(a=r._time),e=r,r=r._next):(o=r._next,r._next=null,r=e?e._next=o:bl=o);ma=e,td(a)}function td(e){if(!wi){pa&&(pa=clearTimeout(pa));var r=e-To;r>24?(e<1/0&&(pa=setTimeout(um,e-Ea.now()-Ll)),ca&&(ca=clearInterval(ca))):(ca||(_l=Ea.now(),ca=setInterval(U_,fg)),wi=1,hg(um))}}function cm(e,r,o){var a=new Sl;return r=r==null?0:+r,a.restart(s=>{a.stop(),e(s+r)},r,o),a}var X_=Tl("start","end","cancel","interrupt"),Y_=[],mg=0,dm=1,nd=2,hl=3,fm=4,rd=5,pl=6;function zl(e,r,o,a,s,l){var c=e.__transition;if(!c)e.__transition={};else if(o in c)return;G_(e,o,{name:r,index:a,group:s,on:X_,tween:Y_,time:l.time,delay:l.delay,duration:l.duration,ease:l.ease,timer:null,state:mg})}function jd(e,r){var o=Fn(e,r);if(o.state>mg)throw new Error("too late; already scheduled");return o}function rr(e,r){var o=Fn(e,r);if(o.state>hl)throw new Error("too late; already running");return o}function Fn(e,r){var o=e.__transition;if(!o||!(o=o[r]))throw new Error("transition not found");return o}function G_(e,r,o){var a=e.__transition,s;a[r]=o,o.timer=pg(l,0,o.time);function l(p){o.state=dm,o.timer.restart(c,o.delay,o.time),o.delay<=p&&c(p-o.delay)}function c(p){var x,g,v,w;if(o.state!==dm)return m();for(x in a)if(w=a[x],w.name===o.name){if(w.state===hl)return cm(c);w.state===fm?(w.state=pl,w.timer.stop(),w.on.call("interrupt",e,e.__data__,w.index,w.group),delete a[x]):+x<r&&(w.state=pl,w.timer.stop(),w.on.call("cancel",e,e.__data__,w.index,w.group),delete a[x])}if(cm(function(){o.state===hl&&(o.state=fm,o.timer.restart(f,o.delay,o.time),f(p))}),o.state=nd,o.on.call("start",e,e.__data__,o.index,o.group),o.state===nd){for(o.state=hl,s=new Array(v=o.tween.length),x=0,g=-1;x<v;++x)(w=o.tween[x].value.call(e,e.__data__,o.index,o.group))&&(s[++g]=w);s.length=g+1}}function f(p){for(var x=p<o.duration?o.ease.call(null,p/o.duration):(o.timer.restart(m),o.state=rd,1),g=-1,v=s.length;++g<v;)s[g].call(e,x);o.state===rd&&(o.on.call("end",e,e.__data__,o.index,o.group),m())}function m(){o.state=pl,o.timer.stop(),delete a[r];for(var p in a)return;delete e.__transition}}function ml(e,r){var o=e.__transition,a,s,l=!0,c;if(o){r=r==null?null:r+"";for(c in o){if((a=o[c]).name!==r){l=!1;continue}s=a.state>nd&&a.state<rd,a.state=pl,a.timer.stop(),a.on.call(s?"interrupt":"cancel",e,e.__data__,a.index,a.group),delete o[c]}l&&delete e.__transition}}function K_(e){return this.each(function(){ml(this,e)})}function Z_(e,r){var o,a;return function(){var s=rr(this,e),l=s.tween;if(l!==o){a=o=l;for(var c=0,f=a.length;c<f;++c)if(a[c].name===r){a=a.slice(),a.splice(c,1);break}}s.tween=a}}function Q_(e,r,o){var a,s;if(typeof o!="function")throw new Error;return function(){var l=rr(this,e),c=l.tween;if(c!==a){s=(a=c).slice();for(var f={name:r,value:o},m=0,p=s.length;m<p;++m)if(s[m].name===r){s[m]=f;break}m===p&&s.push(f)}l.tween=s}}function q_(e,r){var o=this._id;if(e+="",arguments.length<2){for(var a=Fn(this.node(),o).tween,s=0,l=a.length,c;s<l;++s)if((c=a[s]).name===e)return c.value;return null}return this.each((r==null?Z_:Q_)(o,e,r))}function Pd(e,r,o){var a=e._id;return e.each(function(){var s=rr(this,a);(s.value||(s.value={}))[r]=o.apply(this,arguments)}),function(s){return Fn(s,a).value[r]}}function gg(e,r){var o;return(typeof r=="number"?Kn:r instanceof Mo?wl:(o=Mo(r))?(r=o,wl):ug)(e,r)}function J_(e){return function(){this.removeAttribute(e)}}function eS(e){return function(){this.removeAttributeNS(e.space,e.local)}}function tS(e,r,o){var a,s=o+"",l;return function(){var c=this.getAttribute(e);return c===s?null:c===a?l:l=r(a=c,o)}}function nS(e,r,o){var a,s=o+"",l;return function(){var c=this.getAttributeNS(e.space,e.local);return c===s?null:c===a?l:l=r(a=c,o)}}function rS(e,r,o){var a,s,l;return function(){var c,f=o(this),m;return f==null?void this.removeAttribute(e):(c=this.getAttribute(e),m=f+"",c===m?null:c===a&&m===s?l:(s=m,l=r(a=c,f)))}}function oS(e,r,o){var a,s,l;return function(){var c,f=o(this),m;return f==null?void this.removeAttributeNS(e.space,e.local):(c=this.getAttributeNS(e.space,e.local),m=f+"",c===m?null:c===a&&m===s?l:(s=m,l=r(a=c,f)))}}function iS(e,r){var o=Dl(e),a=o==="transform"?F_:gg;return this.attrTween(e,typeof r=="function"?(o.local?oS:rS)(o,a,Pd(this,"attr."+e,r)):r==null?(o.local?eS:J_)(o):(o.local?nS:tS)(o,a,r))}function aS(e,r){return function(o){this.setAttribute(e,r.call(this,o))}}function sS(e,r){return function(o){this.setAttributeNS(e.space,e.local,r.call(this,o))}}function lS(e,r){var o,a;function s(){var l=r.apply(this,arguments);return l!==a&&(o=(a=l)&&sS(e,l)),o}return s._value=r,s}function uS(e,r){var o,a;function s(){var l=r.apply(this,arguments);return l!==a&&(o=(a=l)&&aS(e,l)),o}return s._value=r,s}function cS(e,r){var o="attr."+e;if(arguments.length<2)return(o=this.tween(o))&&o._value;if(r==null)return this.tween(o,null);if(typeof r!="function")throw new Error;var a=Dl(e);return this.tween(o,(a.local?lS:uS)(a,r))}function dS(e,r){return function(){jd(this,e).delay=+r.apply(this,arguments)}}function fS(e,r){return r=+r,function(){jd(this,e).delay=r}}function hS(e){var r=this._id;return arguments.length?this.each((typeof e=="function"?dS:fS)(r,e)):Fn(this.node(),r).delay}function pS(e,r){return function(){rr(this,e).duration=+r.apply(this,arguments)}}function mS(e,r){return r=+r,function(){rr(this,e).duration=r}}function gS(e){var r=this._id;return arguments.length?this.each((typeof e=="function"?pS:mS)(r,e)):Fn(this.node(),r).duration}function yS(e,r){if(typeof r!="function")throw new Error;return function(){rr(this,e).ease=r}}function xS(e){var r=this._id;return arguments.length?this.each(yS(r,e)):Fn(this.node(),r).ease}function vS(e,r){return function(){var o=r.apply(this,arguments);if(typeof o!="function")throw new Error;rr(this,e).ease=o}}function wS(e){if(typeof e!="function")throw new Error;return this.each(vS(this._id,e))}function bS(e){typeof e!="function"&&(e=Y0(e));for(var r=this._groups,o=r.length,a=new Array(o),s=0;s<o;++s)for(var l=r[s],c=l.length,f=a[s]=[],m,p=0;p<c;++p)(m=l[p])&&e.call(m,m.__data__,p,l)&&f.push(m);return new _r(a,this._parents,this._name,this._id)}function _S(e){if(e._id!==this._id)throw new Error;for(var r=this._groups,o=e._groups,a=r.length,s=o.length,l=Math.min(a,s),c=new Array(a),f=0;f<l;++f)for(var m=r[f],p=o[f],x=m.length,g=c[f]=new Array(x),v,w=0;w<x;++w)(v=m[w]||p[w])&&(g[w]=v);for(;f<a;++f)c[f]=r[f];return new _r(c,this._parents,this._name,this._id)}function SS(e){return(e+"").trim().split(/^|\s+/).every(function(r){var o=r.indexOf(".");return o>=0&&(r=r.slice(0,o)),!r||r==="start"})}function NS(e,r,o){var a,s,l=SS(r)?jd:rr;return function(){var c=l(this,e),f=c.on;f!==a&&(s=(a=f).copy()).on(r,o),c.on=s}}function ES(e,r){var o=this._id;return arguments.length<2?Fn(this.node(),o).on.on(e):this.each(NS(o,e,r))}function CS(e){return function(){var r=this.parentNode;for(var o in this.__transition)if(+o!==e)return;r&&r.removeChild(this)}}function kS(){return this.on("end.remove",CS(this._id))}function jS(e){var r=this._name,o=this._id;typeof e!="function"&&(e=Sd(e));for(var a=this._groups,s=a.length,l=new Array(s),c=0;c<s;++c)for(var f=a[c],m=f.length,p=l[c]=new Array(m),x,g,v=0;v<m;++v)(x=f[v])&&(g=e.call(x,x.__data__,v,f))&&("__data__"in x&&(g.__data__=x.__data__),p[v]=g,zl(p[v],r,o,v,p,Fn(x,o)));return new _r(l,this._parents,r,o)}function PS(e){var r=this._name,o=this._id;typeof e!="function"&&(e=X0(e));for(var a=this._groups,s=a.length,l=[],c=[],f=0;f<s;++f)for(var m=a[f],p=m.length,x,g=0;g<p;++g)if(x=m[g]){for(var v=e.call(x,x.__data__,g,m),w,S=Fn(x,o),k=0,N=v.length;k<N;++k)(w=v[k])&&zl(w,r,o,k,v,S);l.push(v),c.push(x)}return new _r(l,c,r,o)}var RS=Fa.prototype.constructor;function MS(){return new RS(this._groups,this._parents)}function TS(e,r){var o,a,s;return function(){var l=vi(this,e),c=(this.style.removeProperty(e),vi(this,e));return l===c?null:l===o&&c===a?s:s=r(o=l,a=c)}}function yg(e){return function(){this.style.removeProperty(e)}}function DS(e,r,o){var a,s=o+"",l;return function(){var c=vi(this,e);return c===s?null:c===a?l:l=r(a=c,o)}}function LS(e,r,o){var a,s,l;return function(){var c=vi(this,e),f=o(this),m=f+"";return f==null&&(m=f=(this.style.removeProperty(e),vi(this,e))),c===m?null:c===a&&m===s?l:(s=m,l=r(a=c,f))}}function zS(e,r){var o,a,s,l="style."+r,c="end."+l,f;return function(){var m=rr(this,e),p=m.on,x=m.value[l]==null?f||(f=yg(r)):void 0;(p!==o||s!==x)&&(a=(o=p).copy()).on(c,s=x),m.on=a}}function IS(e,r,o){var a=(e+="")=="transform"?$_:gg;return r==null?this.styleTween(e,TS(e,a)).on("end.style."+e,yg(e)):typeof r=="function"?this.styleTween(e,LS(e,a,Pd(this,"style."+e,r))).each(zS(this._id,e)):this.styleTween(e,DS(e,a,r),o).on("end.style."+e,null)}function $S(e,r,o){return function(a){this.style.setProperty(e,r.call(this,a),o)}}function FS(e,r,o){var a,s;function l(){var c=r.apply(this,arguments);return c!==s&&(a=(s=c)&&$S(e,c,o)),a}return l._value=r,l}function AS(e,r,o){var a="style."+(e+="");if(arguments.length<2)return(a=this.tween(a))&&a._value;if(r==null)return this.tween(a,null);if(typeof r!="function")throw new Error;return this.tween(a,FS(e,r,o??""))}function OS(e){return function(){this.textContent=e}}function HS(e){return function(){var r=e(this);this.textContent=r??""}}function BS(e){return this.tween("text",typeof e=="function"?HS(Pd(this,"text",e)):OS(e==null?"":e+""))}function VS(e){return function(r){this.textContent=e.call(this,r)}}function US(e){var r,o;function a(){var s=e.apply(this,arguments);return s!==o&&(r=(o=s)&&VS(s)),r}return a._value=e,a}function WS(e){var r="text";if(arguments.length<1)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,US(e))}function XS(){for(var e=this._name,r=this._id,o=xg(),a=this._groups,s=a.length,l=0;l<s;++l)for(var c=a[l],f=c.length,m,p=0;p<f;++p)if(m=c[p]){var x=Fn(m,r);zl(m,e,o,p,c,{time:x.time+x.delay+x.duration,delay:0,duration:x.duration,ease:x.ease})}return new _r(a,this._parents,e,o)}function YS(){var e,r,o=this,a=o._id,s=o.size();return new Promise(function(l,c){var f={value:c},m={value:function(){--s===0&&l()}};o.each(function(){var p=rr(this,a),x=p.on;x!==e&&(r=(e=x).copy(),r._.cancel.push(f),r._.interrupt.push(f),r._.end.push(m)),p.on=r}),s===0&&l()})}var GS=0;function _r(e,r,o,a){this._groups=e,this._parents=r,this._name=o,this._id=a}function xg(){return++GS}var xr=Fa.prototype;_r.prototype={constructor:_r,select:jS,selectAll:PS,selectChild:xr.selectChild,selectChildren:xr.selectChildren,filter:bS,merge:_S,selection:MS,transition:XS,call:xr.call,nodes:xr.nodes,node:xr.node,size:xr.size,empty:xr.empty,each:xr.each,on:ES,attr:iS,attrTween:cS,style:IS,styleTween:AS,text:BS,textTween:WS,remove:kS,tween:q_,delay:hS,duration:gS,ease:xS,easeVarying:wS,end:YS,[Symbol.iterator]:xr[Symbol.iterator]};function KS(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var ZS={time:null,delay:0,duration:250,ease:KS};function QS(e,r){for(var o;!(o=e.__transition)||!(o=o[r]);)if(!(e=e.parentNode))throw new Error(`transition ${r} not found`);return o}function qS(e){var r,o;e instanceof _r?(r=e._id,e=e._name):(r=xg(),(o=ZS).time=kd(),e=e==null?null:e+"");for(var a=this._groups,s=a.length,l=0;l<s;++l)for(var c=a[l],f=c.length,m,p=0;p<f;++p)(m=c[p])&&zl(m,e,r,p,c,o||QS(m,r));return new _r(a,this._parents,e,r)}Fa.prototype.interrupt=K_;Fa.prototype.transition=qS;const rl=e=>()=>e;function JS(e,{sourceEvent:r,target:o,transform:a,dispatch:s}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:r,enumerable:!0,configurable:!0},target:{value:o,enumerable:!0,configurable:!0},transform:{value:a,enumerable:!0,configurable:!0},_:{value:s}})}function wr(e,r,o){this.k=e,this.x=r,this.y=o}wr.prototype={constructor:wr,scale:function(e){return e===1?this:new wr(this.k*e,this.x,this.y)},translate:function(e,r){return e===0&r===0?this:new wr(this.k,this.x+this.k*e,this.y+this.k*r)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Il=new wr(1,0,0);vg.prototype=wr.prototype;function vg(e){for(;!e.__zoom;)if(!(e=e.parentNode))return Il;return e.__zoom}function zc(e){e.stopImmediatePropagation()}function da(e){e.preventDefault(),e.stopImmediatePropagation()}function eN(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function tN(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function hm(){return this.__zoom||Il}function nN(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function rN(){return navigator.maxTouchPoints||"ontouchstart"in this}function oN(e,r,o){var a=e.invertX(r[0][0])-o[0][0],s=e.invertX(r[1][0])-o[1][0],l=e.invertY(r[0][1])-o[0][1],c=e.invertY(r[1][1])-o[1][1];return e.translate(s>a?(a+s)/2:Math.min(0,a)||Math.max(0,s),c>l?(l+c)/2:Math.min(0,l)||Math.max(0,c))}function wg(){var e=eN,r=tN,o=oN,a=nN,s=rN,l=[0,1/0],c=[[-1/0,-1/0],[1/0,1/0]],f=250,m=fl,p=Tl("start","zoom","end"),x,g,v,w=500,S=150,k=0,N=10;function _(M){M.property("__zoom",hm).on("wheel.zoom",A,{passive:!1}).on("mousedown.zoom",K).on("dblclick.zoom",F).filter(s).on("touchstart.zoom",V).on("touchmove.zoom",H).on("touchend.zoom touchcancel.zoom",W).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}_.transform=function(M,L,X,Q){var z=M.selection?M.selection():M;z.property("__zoom",hm),M!==z?I(M,L,X,Q):z.interrupt().each(function(){D(this,arguments).event(Q).start().zoom(null,typeof L=="function"?L.apply(this,arguments):L).end()})},_.scaleBy=function(M,L,X,Q){_.scaleTo(M,function(){var z=this.__zoom.k,G=typeof L=="function"?L.apply(this,arguments):L;return z*G},X,Q)},_.scaleTo=function(M,L,X,Q){_.transform(M,function(){var z=r.apply(this,arguments),G=this.__zoom,U=X==null?j(z):typeof X=="function"?X.apply(this,arguments):X,T=G.invert(U),B=typeof L=="function"?L.apply(this,arguments):L;return o(b(P(G,B),U,T),z,c)},X,Q)},_.translateBy=function(M,L,X,Q){_.transform(M,function(){return o(this.__zoom.translate(typeof L=="function"?L.apply(this,arguments):L,typeof X=="function"?X.apply(this,arguments):X),r.apply(this,arguments),c)},null,Q)},_.translateTo=function(M,L,X,Q,z){_.transform(M,function(){var G=r.apply(this,arguments),U=this.__zoom,T=Q==null?j(G):typeof Q=="function"?Q.apply(this,arguments):Q;return o(Il.translate(T[0],T[1]).scale(U.k).translate(typeof L=="function"?-L.apply(this,arguments):-L,typeof X=="function"?-X.apply(this,arguments):-X),G,c)},Q,z)};function P(M,L){return L=Math.max(l[0],Math.min(l[1],L)),L===M.k?M:new wr(L,M.x,M.y)}function b(M,L,X){var Q=L[0]-X[0]*M.k,z=L[1]-X[1]*M.k;return Q===M.x&&z===M.y?M:new wr(M.k,Q,z)}function j(M){return[(+M[0][0]+ +M[1][0])/2,(+M[0][1]+ +M[1][1])/2]}function I(M,L,X,Q){M.on("start.zoom",function(){D(this,arguments).event(Q).start()}).on("interrupt.zoom end.zoom",function(){D(this,arguments).event(Q).end()}).tween("zoom",function(){var z=this,G=arguments,U=D(z,G).event(Q),T=r.apply(z,G),B=X==null?j(T):typeof X=="function"?X.apply(z,G):X,oe=Math.max(T[1][0]-T[0][0],T[1][1]-T[0][1]),re=z.__zoom,ce=typeof L=="function"?L.apply(z,G):L,me=m(re.invert(B).concat(oe/re.k),ce.invert(B).concat(oe/ce.k));return function(he){if(he===1)he=ce;else{var ie=me(he),pe=oe/ie[2];he=new wr(pe,B[0]-ie[0]*pe,B[1]-ie[1]*pe)}U.zoom(null,he)}})}function D(M,L,X){return!X&&M.__zooming||new R(M,L)}function R(M,L){this.that=M,this.args=L,this.active=0,this.sourceEvent=null,this.extent=r.apply(M,L),this.taps=0}R.prototype={event:function(M){return M&&(this.sourceEvent=M),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(M,L){return this.mouse&&M!=="mouse"&&(this.mouse[1]=L.invert(this.mouse[0])),this.touch0&&M!=="touch"&&(this.touch0[1]=L.invert(this.touch0[0])),this.touch1&&M!=="touch"&&(this.touch1[1]=L.invert(this.touch1[0])),this.that.__zoom=L,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(M){var L=an(this.that).datum();p.call(M,this.that,new JS(M,{sourceEvent:this.sourceEvent,target:_,transform:this.that.__zoom,dispatch:p}),L)}};function A(M,...L){if(!e.apply(this,arguments))return;var X=D(this,L).event(M),Q=this.__zoom,z=Math.max(l[0],Math.min(l[1],Q.k*Math.pow(2,a.apply(this,arguments)))),G=Ln(M);if(X.wheel)(X.mouse[0][0]!==G[0]||X.mouse[0][1]!==G[1])&&(X.mouse[1]=Q.invert(X.mouse[0]=G)),clearTimeout(X.wheel);else{if(Q.k===z)return;X.mouse=[G,Q.invert(G)],ml(this),X.start()}da(M),X.wheel=setTimeout(U,S),X.zoom("mouse",o(b(P(Q,z),X.mouse[0],X.mouse[1]),X.extent,c));function U(){X.wheel=null,X.end()}}function K(M,...L){if(v||!e.apply(this,arguments))return;var X=M.currentTarget,Q=D(this,L,!0).event(M),z=an(M.view).on("mousemove.zoom",B,!0).on("mouseup.zoom",oe,!0),G=Ln(M,X),U=M.clientX,T=M.clientY;rg(M.view),zc(M),Q.mouse=[G,this.__zoom.invert(G)],ml(this),Q.start();function B(re){if(da(re),!Q.moved){var ce=re.clientX-U,me=re.clientY-T;Q.moved=ce*ce+me*me>k}Q.event(re).zoom("mouse",o(b(Q.that.__zoom,Q.mouse[0]=Ln(re,X),Q.mouse[1]),Q.extent,c))}function oe(re){z.on("mousemove.zoom mouseup.zoom",null),og(re.view,Q.moved),da(re),Q.event(re).end()}}function F(M,...L){if(e.apply(this,arguments)){var X=this.__zoom,Q=Ln(M.changedTouches?M.changedTouches[0]:M,this),z=X.invert(Q),G=X.k*(M.shiftKey?.5:2),U=o(b(P(X,G),Q,z),r.apply(this,L),c);da(M),f>0?an(this).transition().duration(f).call(I,U,Q,M):an(this).call(_.transform,U,Q,M)}}function V(M,...L){if(e.apply(this,arguments)){var X=M.touches,Q=X.length,z=D(this,L,M.changedTouches.length===Q).event(M),G,U,T,B;for(zc(M),U=0;U<Q;++U)T=X[U],B=Ln(T,this),B=[B,this.__zoom.invert(B),T.identifier],z.touch0?!z.touch1&&z.touch0[2]!==B[2]&&(z.touch1=B,z.taps=0):(z.touch0=B,G=!0,z.taps=1+!!x);x&&(x=clearTimeout(x)),G&&(z.taps<2&&(g=B[0],x=setTimeout(function(){x=null},w)),ml(this),z.start())}}function H(M,...L){if(this.__zooming){var X=D(this,L).event(M),Q=M.changedTouches,z=Q.length,G,U,T,B;for(da(M),G=0;G<z;++G)U=Q[G],T=Ln(U,this),X.touch0&&X.touch0[2]===U.identifier?X.touch0[0]=T:X.touch1&&X.touch1[2]===U.identifier&&(X.touch1[0]=T);if(U=X.that.__zoom,X.touch1){var oe=X.touch0[0],re=X.touch0[1],ce=X.touch1[0],me=X.touch1[1],he=(he=ce[0]-oe[0])*he+(he=ce[1]-oe[1])*he,ie=(ie=me[0]-re[0])*ie+(ie=me[1]-re[1])*ie;U=P(U,Math.sqrt(he/ie)),T=[(oe[0]+ce[0])/2,(oe[1]+ce[1])/2],B=[(re[0]+me[0])/2,(re[1]+me[1])/2]}else if(X.touch0)T=X.touch0[0],B=X.touch0[1];else return;X.zoom("touch",o(b(U,T,B),X.extent,c))}}function W(M,...L){if(this.__zooming){var X=D(this,L).event(M),Q=M.changedTouches,z=Q.length,G,U;for(zc(M),v&&clearTimeout(v),v=setTimeout(function(){v=null},w),G=0;G<z;++G)U=Q[G],X.touch0&&X.touch0[2]===U.identifier?delete X.touch0:X.touch1&&X.touch1[2]===U.identifier&&delete X.touch1;if(X.touch1&&!X.touch0&&(X.touch0=X.touch1,delete X.touch1),X.touch0)X.touch0[1]=this.__zoom.invert(X.touch0[0]);else if(X.end(),X.taps===2&&(U=Ln(U,this),Math.hypot(g[0]-U[0],g[1]-U[1])<N)){var T=an(this).on("dblclick.zoom");T&&T.apply(this,arguments)}}}return _.wheelDelta=function(M){return arguments.length?(a=typeof M=="function"?M:rl(+M),_):a},_.filter=function(M){return arguments.length?(e=typeof M=="function"?M:rl(!!M),_):e},_.touchable=function(M){return arguments.length?(s=typeof M=="function"?M:rl(!!M),_):s},_.extent=function(M){return arguments.length?(r=typeof M=="function"?M:rl([[+M[0][0],+M[0][1]],[+M[1][0],+M[1][1]]]),_):r},_.scaleExtent=function(M){return arguments.length?(l[0]=+M[0],l[1]=+M[1],_):[l[0],l[1]]},_.translateExtent=function(M){return arguments.length?(c[0][0]=+M[0][0],c[1][0]=+M[1][0],c[0][1]=+M[0][1],c[1][1]=+M[1][1],_):[[c[0][0],c[0][1]],[c[1][0],c[1][1]]]},_.constrain=function(M){return arguments.length?(o=M,_):o},_.duration=function(M){return arguments.length?(f=+M,_):f},_.interpolate=function(M){return arguments.length?(m=M,_):m},_.on=function(){var M=p.on.apply(p,arguments);return M===p?_:M},_.clickDistance=function(M){return arguments.length?(k=(M=+M)*M,_):Math.sqrt(k)},_.tapDistance=function(M){return arguments.length?(N=+M,_):N},_}const Jn={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,{id:r,sourceHandle:o,targetHandle:a})=>`Couldn't create edge for ${e} handle id: "${e==="source"?o:a}", edge id: ${r}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(e="react")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${e}/dist/style.css' or base.css to make sure everything is working properly.`,error014:()=>"useNodeConnections: No node ID found. Call useNodeConnections inside a custom Node or provide a node ID.",error015:()=>"It seems that you are trying to drag a node that is not initialized. Please use onNodesChange as explained in the docs."},Ca=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],bg=["Enter"," ","Escape"],_g={"node.a11yDescription.default":"Press enter or space to select a node. Press delete to remove it and escape to cancel.","node.a11yDescription.keyboardDisabled":"Press enter or space to select a node. You can then use the arrow keys to move the node around. Press delete to remove it and escape to cancel.","node.a11yDescription.ariaLiveMessage":({direction:e,x:r,y:o})=>`Moved selected node ${e}. New position, x: ${r}, y: ${o}`,"edge.a11yDescription.default":"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel.","controls.ariaLabel":"Control Panel","controls.zoomIn.ariaLabel":"Zoom In","controls.zoomOut.ariaLabel":"Zoom Out","controls.fitView.ariaLabel":"Fit View","controls.interactive.ariaLabel":"Toggle Interactivity","minimap.ariaLabel":"Mini Map","handle.ariaLabel":"Handle"};var bi;(function(e){e.Strict="strict",e.Loose="loose"})(bi||(bi={}));var jo;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(jo||(jo={}));var ka;(function(e){e.Partial="partial",e.Full="full"})(ka||(ka={}));const Sg={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null,pointer:null};var Qr;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(Qr||(Qr={}));var Nl;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(Nl||(Nl={}));var je;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(je||(je={}));const pm={[je.Left]:je.Right,[je.Right]:je.Left,[je.Top]:je.Bottom,[je.Bottom]:je.Top};function Ng(e){return e===null?null:e?"valid":"invalid"}const Eg=e=>"id"in e&&"source"in e&&"target"in e,iN=e=>"id"in e&&"position"in e&&!("source"in e)&&!("target"in e),Rd=e=>"id"in e&&"internals"in e&&!("source"in e)&&!("target"in e),Oa=(e,r=[0,0])=>{const{width:o,height:a}=Sr(e),s=e.origin??r,l=o*s[0],c=a*s[1];return{x:e.position.x-l,y:e.position.y-c}},aN=(e,r={nodeOrigin:[0,0]})=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const o=e.reduce((a,s)=>{const l=typeof s=="string";let c=!r.nodeLookup&&!l?s:void 0;r.nodeLookup&&(c=l?r.nodeLookup.get(s):Rd(s)?s:r.nodeLookup.get(s.id));const f=c?El(c,r.nodeOrigin):{x:0,y:0,x2:0,y2:0};return $l(a,f)},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return Fl(o)},Ha=(e,r={})=>{let o={x:1/0,y:1/0,x2:-1/0,y2:-1/0},a=!1;return e.forEach(s=>{(r.filter===void 0||r.filter(s))&&(o=$l(o,El(s)),a=!0)}),a?Fl(o):{x:0,y:0,width:0,height:0}},Md=(e,r,[o,a,s]=[0,0,1],l=!1,c=!1)=>{const f={...Va(r,[o,a,s]),width:r.width/s,height:r.height/s},m=[];for(const p of e.values()){const{measured:x,selectable:g=!0,hidden:v=!1}=p;if(c&&!g||v)continue;const w=x.width??p.width??p.initialWidth??null,S=x.height??p.height??p.initialHeight??null,k=ja(f,Si(p)),N=(w??0)*(S??0),_=l&&k>0;(!p.internals.handleBounds||_||k>=N||p.dragging)&&m.push(p)}return m},sN=(e,r)=>{const o=new Set;return e.forEach(a=>{o.add(a.id)}),r.filter(a=>o.has(a.source)||o.has(a.target))};function lN(e,r){const o=new Map,a=r?.nodes?new Set(r.nodes.map(s=>s.id)):null;return e.forEach(s=>{s.measured.width&&s.measured.height&&(r?.includeHiddenNodes||!s.hidden)&&(!a||a.has(s.id))&&o.set(s.id,s)}),o}async function uN({nodes:e,width:r,height:o,panZoom:a,minZoom:s,maxZoom:l},c){if(e.size===0)return Promise.resolve(!0);const f=lN(e,c),m=Ha(f),p=Td(m,r,o,c?.minZoom??s,c?.maxZoom??l,c?.padding??.1);return await a.setViewport(p,{duration:c?.duration,ease:c?.ease,interpolate:c?.interpolate}),Promise.resolve(!0)}function Cg({nodeId:e,nextPosition:r,nodeLookup:o,nodeOrigin:a=[0,0],nodeExtent:s,onError:l}){const c=o.get(e),f=c.parentId?o.get(c.parentId):void 0,{x:m,y:p}=f?f.internals.positionAbsolute:{x:0,y:0},x=c.origin??a;let g=c.extent||s;if(c.extent==="parent"&&!c.expandParent)if(!f)l?.("005",Jn.error005());else{const w=f.measured.width,S=f.measured.height;w&&S&&(g=[[m,p],[m+w,p+S]])}else f&&Ni(c.extent)&&(g=[[c.extent[0][0]+m,c.extent[0][1]+p],[c.extent[1][0]+m,c.extent[1][1]+p]]);const v=Ni(g)?Do(r,g,c.measured):r;return(c.measured.width===void 0||c.measured.height===void 0)&&l?.("015",Jn.error015()),{position:{x:v.x-m+(c.measured.width??0)*x[0],y:v.y-p+(c.measured.height??0)*x[1]},positionAbsolute:v}}async function cN({nodesToRemove:e=[],edgesToRemove:r=[],nodes:o,edges:a,onBeforeDelete:s}){const l=new Set(e.map(v=>v.id)),c=[];for(const v of o){if(v.deletable===!1)continue;const w=l.has(v.id),S=!w&&v.parentId&&c.find(k=>k.id===v.parentId);(w||S)&&c.push(v)}const f=new Set(r.map(v=>v.id)),m=a.filter(v=>v.deletable!==!1),x=sN(c,m);for(const v of m)f.has(v.id)&&!x.find(S=>S.id===v.id)&&x.push(v);if(!s)return{edges:x,nodes:c};const g=await s({nodes:c,edges:x});return typeof g=="boolean"?g?{edges:x,nodes:c}:{edges:[],nodes:[]}:g}const _i=(e,r=0,o=1)=>Math.min(Math.max(e,r),o),Do=(e={x:0,y:0},r,o)=>({x:_i(e.x,r[0][0],r[1][0]-(o?.width??0)),y:_i(e.y,r[0][1],r[1][1]-(o?.height??0))});function kg(e,r,o){const{width:a,height:s}=Sr(o),{x:l,y:c}=o.internals.positionAbsolute;return Do(e,[[l,c],[l+a,c+s]],r)}const mm=(e,r,o)=>e<r?_i(Math.abs(e-r),1,r)/r:e>o?-_i(Math.abs(e-o),1,r)/r:0,jg=(e,r,o=15,a=40)=>{const s=mm(e.x,a,r.width-a)*o,l=mm(e.y,a,r.height-a)*o;return[s,l]},$l=(e,r)=>({x:Math.min(e.x,r.x),y:Math.min(e.y,r.y),x2:Math.max(e.x2,r.x2),y2:Math.max(e.y2,r.y2)}),od=({x:e,y:r,width:o,height:a})=>({x:e,y:r,x2:e+o,y2:r+a}),Fl=({x:e,y:r,x2:o,y2:a})=>({x:e,y:r,width:o-e,height:a-r}),Si=(e,r=[0,0])=>{const{x:o,y:a}=Rd(e)?e.internals.positionAbsolute:Oa(e,r);return{x:o,y:a,width:e.measured?.width??e.width??e.initialWidth??0,height:e.measured?.height??e.height??e.initialHeight??0}},El=(e,r=[0,0])=>{const{x:o,y:a}=Rd(e)?e.internals.positionAbsolute:Oa(e,r);return{x:o,y:a,x2:o+(e.measured?.width??e.width??e.initialWidth??0),y2:a+(e.measured?.height??e.height??e.initialHeight??0)}},Pg=(e,r)=>Fl($l(od(e),od(r))),ja=(e,r)=>{const o=Math.max(0,Math.min(e.x+e.width,r.x+r.width)-Math.max(e.x,r.x)),a=Math.max(0,Math.min(e.y+e.height,r.y+r.height)-Math.max(e.y,r.y));return Math.ceil(o*a)},gm=e=>In(e.width)&&In(e.height)&&In(e.x)&&In(e.y),In=e=>!isNaN(e)&&isFinite(e),dN=(e,r)=>{},Ba=(e,r=[1,1])=>({x:r[0]*Math.round(e.x/r[0]),y:r[1]*Math.round(e.y/r[1])}),Va=({x:e,y:r},[o,a,s],l=!1,c=[1,1])=>{const f={x:(e-o)/s,y:(r-a)/s};return l?Ba(f,c):f},Cl=({x:e,y:r},[o,a,s])=>({x:e*s+o,y:r*s+a});function di(e,r){if(typeof e=="number")return Math.floor((r-r/(1+e))*.5);if(typeof e=="string"&&e.endsWith("px")){const o=parseFloat(e);if(!Number.isNaN(o))return Math.floor(o)}if(typeof e=="string"&&e.endsWith("%")){const o=parseFloat(e);if(!Number.isNaN(o))return Math.floor(r*o*.01)}return console.error(`[React Flow] The padding value "${e}" is invalid. Please provide a number or a string with a valid unit (px or %).`),0}function fN(e,r,o){if(typeof e=="string"||typeof e=="number"){const a=di(e,o),s=di(e,r);return{top:a,right:s,bottom:a,left:s,x:s*2,y:a*2}}if(typeof e=="object"){const a=di(e.top??e.y??0,o),s=di(e.bottom??e.y??0,o),l=di(e.left??e.x??0,r),c=di(e.right??e.x??0,r);return{top:a,right:c,bottom:s,left:l,x:l+c,y:a+s}}return{top:0,right:0,bottom:0,left:0,x:0,y:0}}function hN(e,r,o,a,s,l){const{x:c,y:f}=Cl(e,[r,o,a]),{x:m,y:p}=Cl({x:e.x+e.width,y:e.y+e.height},[r,o,a]),x=s-m,g=l-p;return{left:Math.floor(c),top:Math.floor(f),right:Math.floor(x),bottom:Math.floor(g)}}const Td=(e,r,o,a,s,l)=>{const c=fN(l,r,o),f=(r-c.x)/e.width,m=(o-c.y)/e.height,p=Math.min(f,m),x=_i(p,a,s),g=e.x+e.width/2,v=e.y+e.height/2,w=r/2-g*x,S=o/2-v*x,k=hN(e,w,S,x,r,o),N={left:Math.min(k.left-c.left,0),top:Math.min(k.top-c.top,0),right:Math.min(k.right-c.right,0),bottom:Math.min(k.bottom-c.bottom,0)};return{x:w-N.left+N.right,y:S-N.top+N.bottom,zoom:x}},Pa=()=>typeof navigator<"u"&&navigator?.userAgent?.indexOf("Mac")>=0;function Ni(e){return e!=null&&e!=="parent"}function Sr(e){return{width:e.measured?.width??e.width??e.initialWidth??0,height:e.measured?.height??e.height??e.initialHeight??0}}function Rg(e){return(e.measured?.width??e.width??e.initialWidth)!==void 0&&(e.measured?.height??e.height??e.initialHeight)!==void 0}function Mg(e,r={width:0,height:0},o,a,s){const l={...e},c=a.get(o);if(c){const f=c.origin||s;l.x+=c.internals.positionAbsolute.x-(r.width??0)*f[0],l.y+=c.internals.positionAbsolute.y-(r.height??0)*f[1]}return l}function ym(e,r){if(e.size!==r.size)return!1;for(const o of e)if(!r.has(o))return!1;return!0}function pN(){let e,r;return{promise:new Promise((a,s)=>{e=a,r=s}),resolve:e,reject:r}}function mN(e){return{..._g,...e||{}}}function xa(e,{snapGrid:r=[0,0],snapToGrid:o=!1,transform:a,containerBounds:s}){const{x:l,y:c}=$n(e),f=Va({x:l-(s?.left??0),y:c-(s?.top??0)},a),{x:m,y:p}=o?Ba(f,r):f;return{xSnapped:m,ySnapped:p,...f}}const Dd=e=>({width:e.offsetWidth,height:e.offsetHeight}),Tg=e=>e?.getRootNode?.()||window?.document,gN=["INPUT","SELECT","TEXTAREA"];function Dg(e){const r=e.composedPath?.()?.[0]||e.target;return r?.nodeType!==1?!1:gN.includes(r.nodeName)||r.hasAttribute("contenteditable")||!!r.closest(".nokey")}const Lg=e=>"clientX"in e,$n=(e,r)=>{const o=Lg(e),a=o?e.clientX:e.touches?.[0].clientX,s=o?e.clientY:e.touches?.[0].clientY;return{x:a-(r?.left??0),y:s-(r?.top??0)}},xm=(e,r,o,a,s)=>{const l=r.querySelectorAll(`.${e}`);return!l||!l.length?null:Array.from(l).map(c=>{const f=c.getBoundingClientRect();return{id:c.getAttribute("data-handleid"),type:e,nodeId:s,position:c.getAttribute("data-handlepos"),x:(f.left-o.left)/a,y:(f.top-o.top)/a,...Dd(c)}})};function zg({sourceX:e,sourceY:r,targetX:o,targetY:a,sourceControlX:s,sourceControlY:l,targetControlX:c,targetControlY:f}){const m=e*.125+s*.375+c*.375+o*.125,p=r*.125+l*.375+f*.375+a*.125,x=Math.abs(m-e),g=Math.abs(p-r);return[m,p,x,g]}function ol(e,r){return e>=0?.5*e:r*25*Math.sqrt(-e)}function vm({pos:e,x1:r,y1:o,x2:a,y2:s,c:l}){switch(e){case je.Left:return[r-ol(r-a,l),o];case je.Right:return[r+ol(a-r,l),o];case je.Top:return[r,o-ol(o-s,l)];case je.Bottom:return[r,o+ol(s-o,l)]}}function Ig({sourceX:e,sourceY:r,sourcePosition:o=je.Bottom,targetX:a,targetY:s,targetPosition:l=je.Top,curvature:c=.25}){const[f,m]=vm({pos:o,x1:e,y1:r,x2:a,y2:s,c}),[p,x]=vm({pos:l,x1:a,y1:s,x2:e,y2:r,c}),[g,v,w,S]=zg({sourceX:e,sourceY:r,targetX:a,targetY:s,sourceControlX:f,sourceControlY:m,targetControlX:p,targetControlY:x});return[`M${e},${r} C${f},${m} ${p},${x} ${a},${s}`,g,v,w,S]}function $g({sourceX:e,sourceY:r,targetX:o,targetY:a}){const s=Math.abs(o-e)/2,l=o<e?o+s:o-s,c=Math.abs(a-r)/2,f=a<r?a+c:a-c;return[l,f,s,c]}function yN({sourceNode:e,targetNode:r,selected:o=!1,zIndex:a=0,elevateOnSelect:s=!1,zIndexMode:l="basic"}){if(l==="manual")return a;const c=s&&o?a+1e3:a,f=Math.max(e.parentId||s&&e.selected?e.internals.z:0,r.parentId||s&&r.selected?r.internals.z:0);return c+f}function xN({sourceNode:e,targetNode:r,width:o,height:a,transform:s}){const l=$l(El(e),El(r));l.x===l.x2&&(l.x2+=1),l.y===l.y2&&(l.y2+=1);const c={x:-s[0]/s[2],y:-s[1]/s[2],width:o/s[2],height:a/s[2]};return ja(c,Fl(l))>0}const vN=({source:e,sourceHandle:r,target:o,targetHandle:a})=>`xy-edge__${e}${r||""}-${o}${a||""}`,wN=(e,r)=>r.some(o=>o.source===e.source&&o.target===e.target&&(o.sourceHandle===e.sourceHandle||!o.sourceHandle&&!e.sourceHandle)&&(o.targetHandle===e.targetHandle||!o.targetHandle&&!e.targetHandle)),Fg=(e,r,o={})=>{if(!e.source||!e.target)return r;const a=o.getEdgeId||vN;let s;return Eg(e)?s={...e}:s={...e,id:a(e)},wN(s,r)?r:(s.sourceHandle===null&&delete s.sourceHandle,s.targetHandle===null&&delete s.targetHandle,r.concat(s))};function Ag({sourceX:e,sourceY:r,targetX:o,targetY:a}){const[s,l,c,f]=$g({sourceX:e,sourceY:r,targetX:o,targetY:a});return[`M ${e},${r}L ${o},${a}`,s,l,c,f]}const wm={[je.Left]:{x:-1,y:0},[je.Right]:{x:1,y:0},[je.Top]:{x:0,y:-1},[je.Bottom]:{x:0,y:1}},bN=({source:e,sourcePosition:r=je.Bottom,target:o})=>r===je.Left||r===je.Right?e.x<o.x?{x:1,y:0}:{x:-1,y:0}:e.y<o.y?{x:0,y:1}:{x:0,y:-1},bm=(e,r)=>Math.sqrt(Math.pow(r.x-e.x,2)+Math.pow(r.y-e.y,2));function _N({source:e,sourcePosition:r=je.Bottom,target:o,targetPosition:a=je.Top,center:s,offset:l,stepPosition:c}){const f=wm[r],m=wm[a],p={x:e.x+f.x*l,y:e.y+f.y*l},x={x:o.x+m.x*l,y:o.y+m.y*l},g=bN({source:p,sourcePosition:r,target:x}),v=g.x!==0?"x":"y",w=g[v];let S=[],k,N;const _={x:0,y:0},P={x:0,y:0},[,,b,j]=$g({sourceX:e.x,sourceY:e.y,targetX:o.x,targetY:o.y});if(f[v]*m[v]===-1){v==="x"?(k=s.x??p.x+(x.x-p.x)*c,N=s.y??(p.y+x.y)/2):(k=s.x??(p.x+x.x)/2,N=s.y??p.y+(x.y-p.y)*c);const D=[{x:k,y:p.y},{x:k,y:x.y}],R=[{x:p.x,y:N},{x:x.x,y:N}];f[v]===w?S=v==="x"?D:R:S=v==="x"?R:D}else{const D=[{x:p.x,y:x.y}],R=[{x:x.x,y:p.y}];if(v==="x"?S=f.x===w?R:D:S=f.y===w?D:R,r===a){const H=Math.abs(e[v]-o[v]);if(H<=l){const W=Math.min(l-1,l-H);f[v]===w?_[v]=(p[v]>e[v]?-1:1)*W:P[v]=(x[v]>o[v]?-1:1)*W}}if(r!==a){const H=v==="x"?"y":"x",W=f[v]===m[H],M=p[H]>x[H],L=p[H]<x[H];(f[v]===1&&(!W&&M||W&&L)||f[v]!==1&&(!W&&L||W&&M))&&(S=v==="x"?D:R)}const A={x:p.x+_.x,y:p.y+_.y},K={x:x.x+P.x,y:x.y+P.y},F=Math.max(Math.abs(A.x-S[0].x),Math.abs(K.x-S[0].x)),V=Math.max(Math.abs(A.y-S[0].y),Math.abs(K.y-S[0].y));F>=V?(k=(A.x+K.x)/2,N=S[0].y):(k=S[0].x,N=(A.y+K.y)/2)}return[[e,{x:p.x+_.x,y:p.y+_.y},...S,{x:x.x+P.x,y:x.y+P.y},o],k,N,b,j]}function SN(e,r,o,a){const s=Math.min(bm(e,r)/2,bm(r,o)/2,a),{x:l,y:c}=r;if(e.x===l&&l===o.x||e.y===c&&c===o.y)return`L${l} ${c}`;if(e.y===c){const p=e.x<o.x?-1:1,x=e.y<o.y?1:-1;return`L ${l+s*p},${c}Q ${l},${c} ${l},${c+s*x}`}const f=e.x<o.x?1:-1,m=e.y<o.y?-1:1;return`L ${l},${c+s*m}Q ${l},${c} ${l+s*f},${c}`}function kl({sourceX:e,sourceY:r,sourcePosition:o=je.Bottom,targetX:a,targetY:s,targetPosition:l=je.Top,borderRadius:c=5,centerX:f,centerY:m,offset:p=20,stepPosition:x=.5}){const[g,v,w,S,k]=_N({source:{x:e,y:r},sourcePosition:o,target:{x:a,y:s},targetPosition:l,center:{x:f,y:m},offset:p,stepPosition:x});return[g.reduce((_,P,b)=>{let j="";return b>0&&b<g.length-1?j=SN(g[b-1],P,g[b+1],c):j=`${b===0?"M":"L"}${P.x} ${P.y}`,_+=j,_},""),v,w,S,k]}function _m(e){return e&&!!(e.internals.handleBounds||e.handles?.length)&&!!(e.measured.width||e.width||e.initialWidth)}function NN(e){const{sourceNode:r,targetNode:o}=e;if(!_m(r)||!_m(o))return null;const a=r.internals.handleBounds||Sm(r.handles),s=o.internals.handleBounds||Sm(o.handles),l=Nm(a?.source??[],e.sourceHandle),c=Nm(e.connectionMode===bi.Strict?s?.target??[]:(s?.target??[]).concat(s?.source??[]),e.targetHandle);if(!l||!c)return e.onError?.("008",Jn.error008(l?"target":"source",{id:e.id,sourceHandle:e.sourceHandle,targetHandle:e.targetHandle})),null;const f=l?.position||je.Bottom,m=c?.position||je.Top,p=Lo(r,l,f),x=Lo(o,c,m);return{sourceX:p.x,sourceY:p.y,targetX:x.x,targetY:x.y,sourcePosition:f,targetPosition:m}}function Sm(e){if(!e)return null;const r=[],o=[];for(const a of e)a.width=a.width??1,a.height=a.height??1,a.type==="source"?r.push(a):a.type==="target"&&o.push(a);return{source:r,target:o}}function Lo(e,r,o=je.Left,a=!1){const s=(r?.x??0)+e.internals.positionAbsolute.x,l=(r?.y??0)+e.internals.positionAbsolute.y,{width:c,height:f}=r??Sr(e);if(a)return{x:s+c/2,y:l+f/2};switch(r?.position??o){case je.Top:return{x:s+c/2,y:l};case je.Right:return{x:s+c,y:l+f/2};case je.Bottom:return{x:s+c/2,y:l+f};case je.Left:return{x:s,y:l+f/2}}}function Nm(e,r){return e&&(r?e.find(o=>o.id===r):e[0])||null}function id(e,r){return e?typeof e=="string"?e:`${r?`${r}__`:""}${Object.keys(e).sort().map(a=>`${a}=${e[a]}`).join("&")}`:""}function EN(e,{id:r,defaultColor:o,defaultMarkerStart:a,defaultMarkerEnd:s}){const l=new Set;return e.reduce((c,f)=>([f.markerStart||a,f.markerEnd||s].forEach(m=>{if(m&&typeof m=="object"){const p=id(m,r);l.has(p)||(c.push({id:p,color:m.color||o,...m}),l.add(p))}}),c),[]).sort((c,f)=>c.id.localeCompare(f.id))}const Og=1e3,CN=10,Ld={nodeOrigin:[0,0],nodeExtent:Ca,elevateNodesOnSelect:!0,zIndexMode:"basic",defaults:{}},kN={...Ld,checkEquality:!0};function zd(e,r){const o={...e};for(const a in r)r[a]!==void 0&&(o[a]=r[a]);return o}function jN(e,r,o){const a=zd(Ld,o);for(const s of e.values())if(s.parentId)$d(s,e,r,a);else{const l=Oa(s,a.nodeOrigin),c=Ni(s.extent)?s.extent:a.nodeExtent,f=Do(l,c,Sr(s));s.internals.positionAbsolute=f}}function PN(e,r){if(!e.handles)return e.measured?r?.internals.handleBounds:void 0;const o=[],a=[];for(const s of e.handles){const l={id:s.id,width:s.width??1,height:s.height??1,nodeId:e.id,x:s.x,y:s.y,position:s.position,type:s.type};s.type==="source"?o.push(l):s.type==="target"&&a.push(l)}return{source:o,target:a}}function Id(e){return e==="manual"}function ad(e,r,o,a={}){const s=zd(kN,a),l={i:0},c=new Map(r),f=s?.elevateNodesOnSelect&&!Id(s.zIndexMode)?Og:0;let m=e.length>0;r.clear(),o.clear();for(const p of e){let x=c.get(p.id);if(s.checkEquality&&p===x?.internals.userNode)r.set(p.id,x);else{const g=Oa(p,s.nodeOrigin),v=Ni(p.extent)?p.extent:s.nodeExtent,w=Do(g,v,Sr(p));x={...s.defaults,...p,measured:{width:p.measured?.width,height:p.measured?.height},internals:{positionAbsolute:w,handleBounds:PN(p,x),z:Hg(p,f,s.zIndexMode),userNode:p}},r.set(p.id,x)}(x.measured===void 0||x.measured.width===void 0||x.measured.height===void 0)&&!x.hidden&&(m=!1),p.parentId&&$d(x,r,o,a,l)}return m}function RN(e,r){if(!e.parentId)return;const o=r.get(e.parentId);o?o.set(e.id,e):r.set(e.parentId,new Map([[e.id,e]]))}function $d(e,r,o,a,s){const{elevateNodesOnSelect:l,nodeOrigin:c,nodeExtent:f,zIndexMode:m}=zd(Ld,a),p=e.parentId,x=r.get(p);if(!x){console.warn(`Parent node ${p} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);return}RN(e,o),s&&!x.parentId&&x.internals.rootParentIndex===void 0&&m==="auto"&&(x.internals.rootParentIndex=++s.i,x.internals.z=x.internals.z+s.i*CN),s&&x.internals.rootParentIndex!==void 0&&(s.i=x.internals.rootParentIndex);const g=l&&!Id(m)?Og:0,{x:v,y:w,z:S}=MN(e,x,c,f,g,m),{positionAbsolute:k}=e.internals,N=v!==k.x||w!==k.y;(N||S!==e.internals.z)&&r.set(e.id,{...e,internals:{...e.internals,positionAbsolute:N?{x:v,y:w}:k,z:S}})}function Hg(e,r,o){const a=In(e.zIndex)?e.zIndex:0;return Id(o)?a:a+(e.selected?r:0)}function MN(e,r,o,a,s,l){const{x:c,y:f}=r.internals.positionAbsolute,m=Sr(e),p=Oa(e,o),x=Ni(e.extent)?Do(p,e.extent,m):p;let g=Do({x:c+x.x,y:f+x.y},a,m);e.extent==="parent"&&(g=kg(g,m,r));const v=Hg(e,s,l),w=r.internals.z??0;return{x:g.x,y:g.y,z:w>=v?w+1:v}}function Fd(e,r,o,a=[0,0]){const s=[],l=new Map;for(const c of e){const f=r.get(c.parentId);if(!f)continue;const m=l.get(c.parentId)?.expandedRect??Si(f),p=Pg(m,c.rect);l.set(c.parentId,{expandedRect:p,parent:f})}return l.size>0&&l.forEach(({expandedRect:c,parent:f},m)=>{const p=f.internals.positionAbsolute,x=Sr(f),g=f.origin??a,v=c.x<p.x?Math.round(Math.abs(p.x-c.x)):0,w=c.y<p.y?Math.round(Math.abs(p.y-c.y)):0,S=Math.max(x.width,Math.round(c.width)),k=Math.max(x.height,Math.round(c.height)),N=(S-x.width)*g[0],_=(k-x.height)*g[1];(v>0||w>0||N||_)&&(s.push({id:m,type:"position",position:{x:f.position.x-v+N,y:f.position.y-w+_}}),o.get(m)?.forEach(P=>{e.some(b=>b.id===P.id)||s.push({id:P.id,type:"position",position:{x:P.position.x+v,y:P.position.y+w}})})),(x.width<c.width||x.height<c.height||v||w)&&s.push({id:m,type:"dimensions",setAttributes:!0,dimensions:{width:S+(v?g[0]*v-N:0),height:k+(w?g[1]*w-_:0)}})}),s}function TN(e,r,o,a,s,l,c){const f=a?.querySelector(".xyflow__viewport");let m=!1;if(!f)return{changes:[],updatedInternals:m};const p=[],x=window.getComputedStyle(f),{m22:g}=new window.DOMMatrixReadOnly(x.transform),v=[];for(const w of e.values()){const S=r.get(w.id);if(!S)continue;if(S.hidden){r.set(S.id,{...S,internals:{...S.internals,handleBounds:void 0}}),m=!0;continue}const k=Dd(w.nodeElement),N=S.measured.width!==k.width||S.measured.height!==k.height;if(!!(k.width&&k.height&&(N||!S.internals.handleBounds||w.force))){const P=w.nodeElement.getBoundingClientRect(),b=Ni(S.extent)?S.extent:l;let{positionAbsolute:j}=S.internals;S.parentId&&S.extent==="parent"?j=kg(j,k,r.get(S.parentId)):b&&(j=Do(j,b,k));const I={...S,measured:k,internals:{...S.internals,positionAbsolute:j,handleBounds:{source:xm("source",w.nodeElement,P,g,S.id),target:xm("target",w.nodeElement,P,g,S.id)}}};r.set(S.id,I),S.parentId&&$d(I,r,o,{nodeOrigin:s,zIndexMode:c}),m=!0,N&&(p.push({id:S.id,type:"dimensions",dimensions:k}),S.expandParent&&S.parentId&&v.push({id:S.id,parentId:S.parentId,rect:Si(I,s)}))}}if(v.length>0){const w=Fd(v,r,o,s);p.push(...w)}return{changes:p,updatedInternals:m}}async function DN({delta:e,panZoom:r,transform:o,translateExtent:a,width:s,height:l}){if(!r||!e.x&&!e.y)return Promise.resolve(!1);const c=await r.setViewportConstrained({x:o[0]+e.x,y:o[1]+e.y,zoom:o[2]},[[0,0],[s,l]],a),f=!!c&&(c.x!==o[0]||c.y!==o[1]||c.k!==o[2]);return Promise.resolve(f)}function Em(e,r,o,a,s,l){let c=s;const f=a.get(c)||new Map;a.set(c,f.set(o,r)),c=`${s}-${e}`;const m=a.get(c)||new Map;if(a.set(c,m.set(o,r)),l){c=`${s}-${e}-${l}`;const p=a.get(c)||new Map;a.set(c,p.set(o,r))}}function Bg(e,r,o){e.clear(),r.clear();for(const a of o){const{source:s,target:l,sourceHandle:c=null,targetHandle:f=null}=a,m={edgeId:a.id,source:s,target:l,sourceHandle:c,targetHandle:f},p=`${s}-${c}--${l}-${f}`,x=`${l}-${f}--${s}-${c}`;Em("source",m,x,e,s,c),Em("target",m,p,e,l,f),r.set(a.id,a)}}function Vg(e,r){if(!e.parentId)return!1;const o=r.get(e.parentId);return o?o.selected?!0:Vg(o,r):!1}function Cm(e,r,o){let a=e;do{if(a?.matches?.(r))return!0;if(a===o)return!1;a=a?.parentElement}while(a);return!1}function LN(e,r,o,a){const s=new Map;for(const[l,c]of e)if((c.selected||c.id===a)&&(!c.parentId||!Vg(c,e))&&(c.draggable||r&&typeof c.draggable>"u")){const f=e.get(l);f&&s.set(l,{id:l,position:f.position||{x:0,y:0},distance:{x:o.x-f.internals.positionAbsolute.x,y:o.y-f.internals.positionAbsolute.y},extent:f.extent,parentId:f.parentId,origin:f.origin,expandParent:f.expandParent,internals:{positionAbsolute:f.internals.positionAbsolute||{x:0,y:0}},measured:{width:f.measured.width??0,height:f.measured.height??0}})}return s}function Ic({nodeId:e,dragItems:r,nodeLookup:o,dragging:a=!0}){const s=[];for(const[c,f]of r){const m=o.get(c)?.internals.userNode;m&&s.push({...m,position:f.position,dragging:a})}if(!e)return[s[0],s];const l=o.get(e)?.internals.userNode;return[l?{...l,position:r.get(e)?.position||l.position,dragging:a}:s[0],s]}function zN({dragItems:e,snapGrid:r,x:o,y:a}){const s=e.values().next().value;if(!s)return null;const l={x:o-s.distance.x,y:a-s.distance.y},c=Ba(l,r);return{x:c.x-l.x,y:c.y-l.y}}function IN({onNodeMouseDown:e,getStoreItems:r,onDragStart:o,onDrag:a,onDragStop:s}){let l={x:null,y:null},c=0,f=new Map,m=!1,p={x:0,y:0},x=null,g=!1,v=null,w=!1,S=!1,k=null;function N({noDragClassName:P,handleSelector:b,domNode:j,isSelectable:I,nodeId:D,nodeClickDistance:R=0}){v=an(j);function A({x:H,y:W}){const{nodeLookup:M,nodeExtent:L,snapGrid:X,snapToGrid:Q,nodeOrigin:z,onNodeDrag:G,onSelectionDrag:U,onError:T,updateNodePositions:B}=r();l={x:H,y:W};let oe=!1;const re=f.size>1,ce=re&&L?od(Ha(f)):null,me=re&&Q?zN({dragItems:f,snapGrid:X,x:H,y:W}):null;for(const[he,ie]of f){if(!M.has(he))continue;let pe={x:H-ie.distance.x,y:W-ie.distance.y};Q&&(pe=me?{x:Math.round(pe.x+me.x),y:Math.round(pe.y+me.y)}:Ba(pe,X));let De=null;if(re&&L&&!ie.extent&&ce){const{positionAbsolute:Pe}=ie.internals,Be=Pe.x-ce.x+L[0][0],Ze=Pe.x+ie.measured.width-ce.x2+L[1][0],Oe=Pe.y-ce.y+L[0][1],ut=Pe.y+ie.measured.height-ce.y2+L[1][1];De=[[Be,Oe],[Ze,ut]]}const{position:ze,positionAbsolute:ye}=Cg({nodeId:he,nextPosition:pe,nodeLookup:M,nodeExtent:De||L,nodeOrigin:z,onError:T});oe=oe||ie.position.x!==ze.x||ie.position.y!==ze.y,ie.position=ze,ie.internals.positionAbsolute=ye}if(S=S||oe,!!oe&&(B(f,!0),k&&(a||G||!D&&U))){const[he,ie]=Ic({nodeId:D,dragItems:f,nodeLookup:M});a?.(k,f,he,ie),G?.(k,he,ie),D||U?.(k,ie)}}async function K(){if(!x)return;const{transform:H,panBy:W,autoPanSpeed:M,autoPanOnNodeDrag:L}=r();if(!L){m=!1,cancelAnimationFrame(c);return}const[X,Q]=jg(p,x,M);(X!==0||Q!==0)&&(l.x=(l.x??0)-X/H[2],l.y=(l.y??0)-Q/H[2],await W({x:X,y:Q})&&A(l)),c=requestAnimationFrame(K)}function F(H){const{nodeLookup:W,multiSelectionActive:M,nodesDraggable:L,transform:X,snapGrid:Q,snapToGrid:z,selectNodesOnDrag:G,onNodeDragStart:U,onSelectionDragStart:T,unselectNodesAndEdges:B}=r();g=!0,(!G||!I)&&!M&&D&&(W.get(D)?.selected||B()),I&&G&&D&&e?.(D);const oe=xa(H.sourceEvent,{transform:X,snapGrid:Q,snapToGrid:z,containerBounds:x});if(l=oe,f=LN(W,L,oe,D),f.size>0&&(o||U||!D&&T)){const[re,ce]=Ic({nodeId:D,dragItems:f,nodeLookup:W});o?.(H.sourceEvent,f,re,ce),U?.(H.sourceEvent,re,ce),D||T?.(H.sourceEvent,ce)}}const V=ig().clickDistance(R).on("start",H=>{const{domNode:W,nodeDragThreshold:M,transform:L,snapGrid:X,snapToGrid:Q}=r();x=W?.getBoundingClientRect()||null,w=!1,S=!1,k=H.sourceEvent,M===0&&F(H),l=xa(H.sourceEvent,{transform:L,snapGrid:X,snapToGrid:Q,containerBounds:x}),p=$n(H.sourceEvent,x)}).on("drag",H=>{const{autoPanOnNodeDrag:W,transform:M,snapGrid:L,snapToGrid:X,nodeDragThreshold:Q,nodeLookup:z}=r(),G=xa(H.sourceEvent,{transform:M,snapGrid:L,snapToGrid:X,containerBounds:x});if(k=H.sourceEvent,(H.sourceEvent.type==="touchmove"&&H.sourceEvent.touches.length>1||D&&!z.has(D))&&(w=!0),!w){if(!m&&W&&g&&(m=!0,K()),!g){const U=$n(H.sourceEvent,x),T=U.x-p.x,B=U.y-p.y;Math.sqrt(T*T+B*B)>Q&&F(H)}(l.x!==G.xSnapped||l.y!==G.ySnapped)&&f&&g&&(p=$n(H.sourceEvent,x),A(G))}}).on("end",H=>{if(!(!g||w)&&(m=!1,g=!1,cancelAnimationFrame(c),f.size>0)){const{nodeLookup:W,updateNodePositions:M,onNodeDragStop:L,onSelectionDragStop:X}=r();if(S&&(M(f,!1),S=!1),s||L||!D&&X){const[Q,z]=Ic({nodeId:D,dragItems:f,nodeLookup:W,dragging:!1});s?.(H.sourceEvent,f,Q,z),L?.(H.sourceEvent,Q,z),D||X?.(H.sourceEvent,z)}}}).filter(H=>{const W=H.target;return!H.button&&(!P||!Cm(W,`.${P}`,j))&&(!b||Cm(W,b,j))});v.call(V)}function _(){v?.on(".drag",null)}return{update:N,destroy:_}}function $N(e,r,o){const a=[],s={x:e.x-o,y:e.y-o,width:o*2,height:o*2};for(const l of r.values())ja(s,Si(l))>0&&a.push(l);return a}const FN=250;function AN(e,r,o,a){let s=[],l=1/0;const c=$N(e,o,r+FN);for(const f of c){const m=[...f.internals.handleBounds?.source??[],...f.internals.handleBounds?.target??[]];for(const p of m){if(a.nodeId===p.nodeId&&a.type===p.type&&a.id===p.id)continue;const{x,y:g}=Lo(f,p,p.position,!0),v=Math.sqrt(Math.pow(x-e.x,2)+Math.pow(g-e.y,2));v>r||(v<l?(s=[{...p,x,y:g}],l=v):v===l&&s.push({...p,x,y:g}))}}if(!s.length)return null;if(s.length>1){const f=a.type==="source"?"target":"source";return s.find(m=>m.type===f)??s[0]}return s[0]}function Ug(e,r,o,a,s,l=!1){const c=a.get(e);if(!c)return null;const f=s==="strict"?c.internals.handleBounds?.[r]:[...c.internals.handleBounds?.source??[],...c.internals.handleBounds?.target??[]],m=(o?f?.find(p=>p.id===o):f?.[0])??null;return m&&l?{...m,...Lo(c,m,m.position,!0)}:m}function Wg(e,r){return e||(r?.classList.contains("target")?"target":r?.classList.contains("source")?"source":null)}function ON(e,r){let o=null;return r?o=!0:e&&!r&&(o=!1),o}const Xg=()=>!0;function HN(e,{connectionMode:r,connectionRadius:o,handleId:a,nodeId:s,edgeUpdaterType:l,isTarget:c,domNode:f,nodeLookup:m,lib:p,autoPanOnConnect:x,flowId:g,panBy:v,cancelConnection:w,onConnectStart:S,onConnect:k,onConnectEnd:N,isValidConnection:_=Xg,onReconnectEnd:P,updateConnection:b,getTransform:j,getFromHandle:I,autoPanSpeed:D,dragThreshold:R=1,handleDomNode:A}){const K=Tg(e.target);let F=0,V;const{x:H,y:W}=$n(e),M=Wg(l,A),L=f?.getBoundingClientRect();let X=!1;if(!L||!M)return;const Q=Ug(s,M,a,m,r);if(!Q)return;let z=$n(e,L),G=!1,U=null,T=!1,B=null;function oe(){if(!x||!L)return;const[ze,ye]=jg(z,L,D);v({x:ze,y:ye}),F=requestAnimationFrame(oe)}const re={...Q,nodeId:s,type:M,position:Q.position},ce=m.get(s);let he={inProgress:!0,isValid:null,from:Lo(ce,re,je.Left,!0),fromHandle:re,fromPosition:re.position,fromNode:ce,to:z,toHandle:null,toPosition:pm[re.position],toNode:null,pointer:z};function ie(){X=!0,b(he),S?.(e,{nodeId:s,handleId:a,handleType:M})}R===0&&ie();function pe(ze){if(!X){const{x:ut,y:Qt}=$n(ze),Pt=ut-H,zt=Qt-W;if(!(Pt*Pt+zt*zt>R*R))return;ie()}if(!I()||!re){De(ze);return}const ye=j();z=$n(ze,L),V=AN(Va(z,ye,!1,[1,1]),o,m,re),G||(oe(),G=!0);const Pe=Yg(ze,{handle:V,connectionMode:r,fromNodeId:s,fromHandleId:a,fromType:c?"target":"source",isValidConnection:_,doc:K,lib:p,flowId:g,nodeLookup:m});B=Pe.handleDomNode,U=Pe.connection,T=ON(!!V,Pe.isValid);const Be=m.get(s),Ze=Be?Lo(Be,re,je.Left,!0):he.from,Oe={...he,from:Ze,isValid:T,to:Pe.toHandle&&T?Cl({x:Pe.toHandle.x,y:Pe.toHandle.y},ye):z,toHandle:Pe.toHandle,toPosition:T&&Pe.toHandle?Pe.toHandle.position:pm[re.position],toNode:Pe.toHandle?m.get(Pe.toHandle.nodeId):null,pointer:z};b(Oe),he=Oe}function De(ze){if(!("touches"in ze&&ze.touches.length>0)){if(X){(V||B)&&U&&T&&k?.(U);const{inProgress:ye,...Pe}=he,Be={...Pe,toPosition:he.toHandle?he.toPosition:null};N?.(ze,Be),l&&P?.(ze,Be)}w(),cancelAnimationFrame(F),G=!1,T=!1,U=null,B=null,K.removeEventListener("mousemove",pe),K.removeEventListener("mouseup",De),K.removeEventListener("touchmove",pe),K.removeEventListener("touchend",De)}}K.addEventListener("mousemove",pe),K.addEventListener("mouseup",De),K.addEventListener("touchmove",pe),K.addEventListener("touchend",De)}function Yg(e,{handle:r,connectionMode:o,fromNodeId:a,fromHandleId:s,fromType:l,doc:c,lib:f,flowId:m,isValidConnection:p=Xg,nodeLookup:x}){const g=l==="target",v=r?c.querySelector(`.${f}-flow__handle[data-id="${m}-${r?.nodeId}-${r?.id}-${r?.type}"]`):null,{x:w,y:S}=$n(e),k=c.elementFromPoint(w,S),N=k?.classList.contains(`${f}-flow__handle`)?k:v,_={handleDomNode:N,isValid:!1,connection:null,toHandle:null};if(N){const P=Wg(void 0,N),b=N.getAttribute("data-nodeid"),j=N.getAttribute("data-handleid"),I=N.classList.contains("connectable"),D=N.classList.contains("connectableend");if(!b||!P)return _;const R={source:g?b:a,sourceHandle:g?j:s,target:g?a:b,targetHandle:g?s:j};_.connection=R;const K=I&&D&&(o===bi.Strict?g&&P==="source"||!g&&P==="target":b!==a||j!==s);_.isValid=K&&p(R),_.toHandle=Ug(b,P,j,x,o,!0)}return _}const sd={onPointerDown:HN,isValid:Yg};function BN({domNode:e,panZoom:r,getTransform:o,getViewScale:a}){const s=an(e);function l({translateExtent:f,width:m,height:p,zoomStep:x=1,pannable:g=!0,zoomable:v=!0,inversePan:w=!1}){const S=b=>{if(b.sourceEvent.type!=="wheel"||!r)return;const j=o(),I=b.sourceEvent.ctrlKey&&Pa()?10:1,D=-b.sourceEvent.deltaY*(b.sourceEvent.deltaMode===1?.05:b.sourceEvent.deltaMode?1:.002)*x,R=j[2]*Math.pow(2,D*I);r.scaleTo(R)};let k=[0,0];const N=b=>{(b.sourceEvent.type==="mousedown"||b.sourceEvent.type==="touchstart")&&(k=[b.sourceEvent.clientX??b.sourceEvent.touches[0].clientX,b.sourceEvent.clientY??b.sourceEvent.touches[0].clientY])},_=b=>{const j=o();if(b.sourceEvent.type!=="mousemove"&&b.sourceEvent.type!=="touchmove"||!r)return;const I=[b.sourceEvent.clientX??b.sourceEvent.touches[0].clientX,b.sourceEvent.clientY??b.sourceEvent.touches[0].clientY],D=[I[0]-k[0],I[1]-k[1]];k=I;const R=a()*Math.max(j[2],Math.log(j[2]))*(w?-1:1),A={x:j[0]-D[0]*R,y:j[1]-D[1]*R},K=[[0,0],[m,p]];r.setViewportConstrained({x:A.x,y:A.y,zoom:j[2]},K,f)},P=wg().on("start",N).on("zoom",g?_:null).on("zoom.wheel",v?S:null);s.call(P,{})}function c(){s.on("zoom",null)}return{update:l,destroy:c,pointer:Ln}}const Al=e=>({x:e.x,y:e.y,zoom:e.k}),$c=({x:e,y:r,zoom:o})=>Il.translate(e,r).scale(o),pi=(e,r)=>e.target.closest(`.${r}`),Gg=(e,r)=>r===2&&Array.isArray(e)&&e.includes(2),VN=e=>((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2,Fc=(e,r=0,o=VN,a=()=>{})=>{const s=typeof r=="number"&&r>0;return s||a(),s?e.transition().duration(r).ease(o).on("end",a):e},Kg=e=>{const r=e.ctrlKey&&Pa()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*r};function UN({zoomPanValues:e,noWheelClassName:r,d3Selection:o,d3Zoom:a,panOnScrollMode:s,panOnScrollSpeed:l,zoomOnPinch:c,onPanZoomStart:f,onPanZoom:m,onPanZoomEnd:p}){return x=>{if(pi(x,r))return x.ctrlKey&&x.preventDefault(),!1;x.preventDefault(),x.stopImmediatePropagation();const g=o.property("__zoom").k||1;if(x.ctrlKey&&c){const N=Ln(x),_=Kg(x),P=g*Math.pow(2,_);a.scaleTo(o,P,N,x);return}const v=x.deltaMode===1?20:1;let w=s===jo.Vertical?0:x.deltaX*v,S=s===jo.Horizontal?0:x.deltaY*v;!Pa()&&x.shiftKey&&s!==jo.Vertical&&(w=x.deltaY*v,S=0),a.translateBy(o,-(w/g)*l,-(S/g)*l,{internal:!0});const k=Al(o.property("__zoom"));clearTimeout(e.panScrollTimeout),e.isPanScrolling?(m?.(x,k),e.panScrollTimeout=setTimeout(()=>{p?.(x,k),e.isPanScrolling=!1},150)):(e.isPanScrolling=!0,f?.(x,k))}}function WN({noWheelClassName:e,preventScrolling:r,d3ZoomHandler:o}){return function(a,s){const l=a.type==="wheel",c=!r&&l&&!a.ctrlKey,f=pi(a,e);if(a.ctrlKey&&l&&f&&a.preventDefault(),c||f)return null;a.preventDefault(),o.call(this,a,s)}}function XN({zoomPanValues:e,onDraggingChange:r,onPanZoomStart:o}){return a=>{if(a.sourceEvent?.internal)return;const s=Al(a.transform);e.mouseButton=a.sourceEvent?.button||0,e.isZoomingOrPanning=!0,e.prevViewport=s,a.sourceEvent?.type==="mousedown"&&r(!0),o&&o?.(a.sourceEvent,s)}}function YN({zoomPanValues:e,panOnDrag:r,onPaneContextMenu:o,onTransformChange:a,onPanZoom:s}){return l=>{e.usedRightMouseButton=!!(o&&Gg(r,e.mouseButton??0)),l.sourceEvent?.sync||a([l.transform.x,l.transform.y,l.transform.k]),s&&!l.sourceEvent?.internal&&s?.(l.sourceEvent,Al(l.transform))}}function GN({zoomPanValues:e,panOnDrag:r,panOnScroll:o,onDraggingChange:a,onPanZoomEnd:s,onPaneContextMenu:l}){return c=>{if(!c.sourceEvent?.internal&&(e.isZoomingOrPanning=!1,l&&Gg(r,e.mouseButton??0)&&!e.usedRightMouseButton&&c.sourceEvent&&l(c.sourceEvent),e.usedRightMouseButton=!1,a(!1),s)){const f=Al(c.transform);e.prevViewport=f,clearTimeout(e.timerId),e.timerId=setTimeout(()=>{s?.(c.sourceEvent,f)},o?150:0)}}}function KN({zoomActivationKeyPressed:e,zoomOnScroll:r,zoomOnPinch:o,panOnDrag:a,panOnScroll:s,zoomOnDoubleClick:l,userSelectionActive:c,noWheelClassName:f,noPanClassName:m,lib:p,connectionInProgress:x}){return g=>{const v=e||r,w=o&&g.ctrlKey,S=g.type==="wheel";if(g.button===1&&g.type==="mousedown"&&(pi(g,`${p}-flow__node`)||pi(g,`${p}-flow__edge`)))return!0;if(!a&&!v&&!s&&!l&&!o||c||x&&!S||pi(g,f)&&S||pi(g,m)&&(!S||s&&S&&!e)||!o&&g.ctrlKey&&S)return!1;if(!o&&g.type==="touchstart"&&g.touches?.length>1)return g.preventDefault(),!1;if(!v&&!s&&!w&&S||!a&&(g.type==="mousedown"||g.type==="touchstart")||Array.isArray(a)&&!a.includes(g.button)&&g.type==="mousedown")return!1;const k=Array.isArray(a)&&a.includes(g.button)||!g.button||g.button<=1;return(!g.ctrlKey||S)&&k}}function ZN({domNode:e,minZoom:r,maxZoom:o,translateExtent:a,viewport:s,onPanZoom:l,onPanZoomStart:c,onPanZoomEnd:f,onDraggingChange:m}){const p={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},x=e.getBoundingClientRect(),g=wg().scaleExtent([r,o]).translateExtent(a),v=an(e).call(g);P({x:s.x,y:s.y,zoom:_i(s.zoom,r,o)},[[0,0],[x.width,x.height]],a);const w=v.on("wheel.zoom"),S=v.on("dblclick.zoom");g.wheelDelta(Kg);function k(V,H){return v?new Promise(W=>{g?.interpolate(H?.interpolate==="linear"?ya:fl).transform(Fc(v,H?.duration,H?.ease,()=>W(!0)),V)}):Promise.resolve(!1)}function N({noWheelClassName:V,noPanClassName:H,onPaneContextMenu:W,userSelectionActive:M,panOnScroll:L,panOnDrag:X,panOnScrollMode:Q,panOnScrollSpeed:z,preventScrolling:G,zoomOnPinch:U,zoomOnScroll:T,zoomOnDoubleClick:B,zoomActivationKeyPressed:oe,lib:re,onTransformChange:ce,connectionInProgress:me,paneClickDistance:he,selectionOnDrag:ie}){M&&!p.isZoomingOrPanning&&_();const pe=L&&!oe&&!M;g.clickDistance(ie?1/0:!In(he)||he<0?0:he);const De=pe?UN({zoomPanValues:p,noWheelClassName:V,d3Selection:v,d3Zoom:g,panOnScrollMode:Q,panOnScrollSpeed:z,zoomOnPinch:U,onPanZoomStart:c,onPanZoom:l,onPanZoomEnd:f}):WN({noWheelClassName:V,preventScrolling:G,d3ZoomHandler:w});if(v.on("wheel.zoom",De,{passive:!1}),!M){const ye=XN({zoomPanValues:p,onDraggingChange:m,onPanZoomStart:c});g.on("start",ye);const Pe=YN({zoomPanValues:p,panOnDrag:X,onPaneContextMenu:!!W,onPanZoom:l,onTransformChange:ce});g.on("zoom",Pe);const Be=GN({zoomPanValues:p,panOnDrag:X,panOnScroll:L,onPaneContextMenu:W,onPanZoomEnd:f,onDraggingChange:m});g.on("end",Be)}const ze=KN({zoomActivationKeyPressed:oe,panOnDrag:X,zoomOnScroll:T,panOnScroll:L,zoomOnDoubleClick:B,zoomOnPinch:U,userSelectionActive:M,noPanClassName:H,noWheelClassName:V,lib:re,connectionInProgress:me});g.filter(ze),B?v.on("dblclick.zoom",S):v.on("dblclick.zoom",null)}function _(){g.on("zoom",null)}async function P(V,H,W){const M=$c(V),L=g?.constrain()(M,H,W);return L&&await k(L),new Promise(X=>X(L))}async function b(V,H){const W=$c(V);return await k(W,H),new Promise(M=>M(W))}function j(V){if(v){const H=$c(V),W=v.property("__zoom");(W.k!==V.zoom||W.x!==V.x||W.y!==V.y)&&g?.transform(v,H,null,{sync:!0})}}function I(){const V=v?vg(v.node()):{x:0,y:0,k:1};return{x:V.x,y:V.y,zoom:V.k}}function D(V,H){return v?new Promise(W=>{g?.interpolate(H?.interpolate==="linear"?ya:fl).scaleTo(Fc(v,H?.duration,H?.ease,()=>W(!0)),V)}):Promise.resolve(!1)}function R(V,H){return v?new Promise(W=>{g?.interpolate(H?.interpolate==="linear"?ya:fl).scaleBy(Fc(v,H?.duration,H?.ease,()=>W(!0)),V)}):Promise.resolve(!1)}function A(V){g?.scaleExtent(V)}function K(V){g?.translateExtent(V)}function F(V){const H=!In(V)||V<0?0:V;g?.clickDistance(H)}return{update:N,destroy:_,setViewport:b,setViewportConstrained:P,getViewport:I,scaleTo:D,scaleBy:R,setScaleExtent:A,setTranslateExtent:K,syncViewport:j,setClickDistance:F}}var Ei;(function(e){e.Line="line",e.Handle="handle"})(Ei||(Ei={}));function QN({width:e,prevWidth:r,height:o,prevHeight:a,affectsX:s,affectsY:l}){const c=e-r,f=o-a,m=[c>0?1:c<0?-1:0,f>0?1:f<0?-1:0];return c&&s&&(m[0]=m[0]*-1),f&&l&&(m[1]=m[1]*-1),m}function km(e){const r=e.includes("right")||e.includes("left"),o=e.includes("bottom")||e.includes("top"),a=e.includes("left"),s=e.includes("top");return{isHorizontal:r,isVertical:o,affectsX:a,affectsY:s}}function Yr(e,r){return Math.max(0,r-e)}function Gr(e,r){return Math.max(0,e-r)}function il(e,r,o){return Math.max(0,r-e,e-o)}function jm(e,r){return e?!r:r}function qN(e,r,o,a,s,l,c,f){let{affectsX:m,affectsY:p}=r;const{isHorizontal:x,isVertical:g}=r,v=x&&g,{xSnapped:w,ySnapped:S}=o,{minWidth:k,maxWidth:N,minHeight:_,maxHeight:P}=a,{x:b,y:j,width:I,height:D,aspectRatio:R}=e;let A=Math.floor(x?w-e.pointerX:0),K=Math.floor(g?S-e.pointerY:0);const F=I+(m?-A:A),V=D+(p?-K:K),H=-l[0]*I,W=-l[1]*D;let M=il(F,k,N),L=il(V,_,P);if(c){let z=0,G=0;m&&A<0?z=Yr(b+A+H,c[0][0]):!m&&A>0&&(z=Gr(b+F+H,c[1][0])),p&&K<0?G=Yr(j+K+W,c[0][1]):!p&&K>0&&(G=Gr(j+V+W,c[1][1])),M=Math.max(M,z),L=Math.max(L,G)}if(f){let z=0,G=0;m&&A>0?z=Gr(b+A,f[0][0]):!m&&A<0&&(z=Yr(b+F,f[1][0])),p&&K>0?G=Gr(j+K,f[0][1]):!p&&K<0&&(G=Yr(j+V,f[1][1])),M=Math.max(M,z),L=Math.max(L,G)}if(s){if(x){const z=il(F/R,_,P)*R;if(M=Math.max(M,z),c){let G=0;!m&&!p||m&&!p&&v?G=Gr(j+W+F/R,c[1][1])*R:G=Yr(j+W+(m?A:-A)/R,c[0][1])*R,M=Math.max(M,G)}if(f){let G=0;!m&&!p||m&&!p&&v?G=Yr(j+F/R,f[1][1])*R:G=Gr(j+(m?A:-A)/R,f[0][1])*R,M=Math.max(M,G)}}if(g){const z=il(V*R,k,N)/R;if(L=Math.max(L,z),c){let G=0;!m&&!p||p&&!m&&v?G=Gr(b+V*R+H,c[1][0])/R:G=Yr(b+(p?K:-K)*R+H,c[0][0])/R,L=Math.max(L,G)}if(f){let G=0;!m&&!p||p&&!m&&v?G=Yr(b+V*R,f[1][0])/R:G=Gr(b+(p?K:-K)*R,f[0][0])/R,L=Math.max(L,G)}}}K=K+(K<0?L:-L),A=A+(A<0?M:-M),s&&(v?F>V*R?K=(jm(m,p)?-A:A)/R:A=(jm(m,p)?-K:K)*R:x?(K=A/R,p=m):(A=K*R,m=p));const X=m?b+A:b,Q=p?j+K:j;return{width:I+(m?-A:A),height:D+(p?-K:K),x:l[0]*A*(m?-1:1)+X,y:l[1]*K*(p?-1:1)+Q}}const Zg={width:0,height:0,x:0,y:0},JN={...Zg,pointerX:0,pointerY:0,aspectRatio:1};function eE(e){return[[0,0],[e.measured.width,e.measured.height]]}function tE(e,r,o){const a=r.position.x+e.position.x,s=r.position.y+e.position.y,l=e.measured.width??0,c=e.measured.height??0,f=o[0]*l,m=o[1]*c;return[[a-f,s-m],[a+l-f,s+c-m]]}function nE({domNode:e,nodeId:r,getStoreItems:o,onChange:a,onEnd:s}){const l=an(e);let c={controlDirection:km("bottom-right"),boundaries:{minWidth:0,minHeight:0,maxWidth:Number.MAX_VALUE,maxHeight:Number.MAX_VALUE},resizeDirection:void 0,keepAspectRatio:!1};function f({controlPosition:p,boundaries:x,keepAspectRatio:g,resizeDirection:v,onResizeStart:w,onResize:S,onResizeEnd:k,shouldResize:N}){let _={...Zg},P={...JN};c={boundaries:x,resizeDirection:v,keepAspectRatio:g,controlDirection:km(p)};let b,j=null,I=[],D,R,A,K=!1;const F=ig().on("start",V=>{const{nodeLookup:H,transform:W,snapGrid:M,snapToGrid:L,nodeOrigin:X,paneDomNode:Q}=o();if(b=H.get(r),!b)return;j=Q?.getBoundingClientRect()??null;const{xSnapped:z,ySnapped:G}=xa(V.sourceEvent,{transform:W,snapGrid:M,snapToGrid:L,containerBounds:j});_={width:b.measured.width??0,height:b.measured.height??0,x:b.position.x??0,y:b.position.y??0},P={..._,pointerX:z,pointerY:G,aspectRatio:_.width/_.height},D=void 0,b.parentId&&(b.extent==="parent"||b.expandParent)&&(D=H.get(b.parentId),R=D&&b.extent==="parent"?eE(D):void 0),I=[],A=void 0;for(const[U,T]of H)if(T.parentId===r&&(I.push({id:U,position:{...T.position},extent:T.extent}),T.extent==="parent"||T.expandParent)){const B=tE(T,b,T.origin??X);A?A=[[Math.min(B[0][0],A[0][0]),Math.min(B[0][1],A[0][1])],[Math.max(B[1][0],A[1][0]),Math.max(B[1][1],A[1][1])]]:A=B}w?.(V,{..._})}).on("drag",V=>{const{transform:H,snapGrid:W,snapToGrid:M,nodeOrigin:L}=o(),X=xa(V.sourceEvent,{transform:H,snapGrid:W,snapToGrid:M,containerBounds:j}),Q=[];if(!b)return;const{x:z,y:G,width:U,height:T}=_,B={},oe=b.origin??L,{width:re,height:ce,x:me,y:he}=qN(P,c.controlDirection,X,c.boundaries,c.keepAspectRatio,oe,R,A),ie=re!==U,pe=ce!==T,De=me!==z&&ie,ze=he!==G&&pe;if(!De&&!ze&&!ie&&!pe)return;if((De||ze||oe[0]===1||oe[1]===1)&&(B.x=De?me:_.x,B.y=ze?he:_.y,_.x=B.x,_.y=B.y,I.length>0)){const Ze=me-z,Oe=he-G;for(const ut of I)ut.position={x:ut.position.x-Ze+oe[0]*(re-U),y:ut.position.y-Oe+oe[1]*(ce-T)},Q.push(ut)}if((ie||pe)&&(B.width=ie&&(!c.resizeDirection||c.resizeDirection==="horizontal")?re:_.width,B.height=pe&&(!c.resizeDirection||c.resizeDirection==="vertical")?ce:_.height,_.width=B.width,_.height=B.height),D&&b.expandParent){const Ze=oe[0]*(B.width??0);B.x&&B.x<Ze&&(_.x=Ze,P.x=P.x-(B.x-Ze));const Oe=oe[1]*(B.height??0);B.y&&B.y<Oe&&(_.y=Oe,P.y=P.y-(B.y-Oe))}const ye=QN({width:_.width,prevWidth:U,height:_.height,prevHeight:T,affectsX:c.controlDirection.affectsX,affectsY:c.controlDirection.affectsY}),Pe={..._,direction:ye};N?.(V,Pe)!==!1&&(K=!0,S?.(V,Pe),a(B,Q))}).on("end",V=>{K&&(k?.(V,{..._}),s?.({..._}),K=!1)});l.call(F)}function m(){l.on(".drag",null)}return{update:f,destroy:m}}var Ac={exports:{}},Oc={},Hc={exports:{}},Bc={};var Pm;function rE(){if(Pm)return Bc;Pm=1;var e=Ma();function r(g,v){return g===v&&(g!==0||1/g===1/v)||g!==g&&v!==v}var o=typeof Object.is=="function"?Object.is:r,a=e.useState,s=e.useEffect,l=e.useLayoutEffect,c=e.useDebugValue;function f(g,v){var w=v(),S=a({inst:{value:w,getSnapshot:v}}),k=S[0].inst,N=S[1];return l(function(){k.value=w,k.getSnapshot=v,m(k)&&N({inst:k})},[g,w,v]),s(function(){return m(k)&&N({inst:k}),g(function(){m(k)&&N({inst:k})})},[g]),c(w),w}function m(g){var v=g.getSnapshot;g=g.value;try{var w=v();return!o(g,w)}catch{return!0}}function p(g,v){return v()}var x=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?p:f;return Bc.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:x,Bc}var Rm;function oE(){return Rm||(Rm=1,Hc.exports=rE()),Hc.exports}var Mm;function iE(){if(Mm)return Oc;Mm=1;var e=Ma(),r=oE();function o(p,x){return p===x&&(p!==0||1/p===1/x)||p!==p&&x!==x}var a=typeof Object.is=="function"?Object.is:o,s=r.useSyncExternalStore,l=e.useRef,c=e.useEffect,f=e.useMemo,m=e.useDebugValue;return Oc.useSyncExternalStoreWithSelector=function(p,x,g,v,w){var S=l(null);if(S.current===null){var k={hasValue:!1,value:null};S.current=k}else k=S.current;S=f(function(){function _(D){if(!P){if(P=!0,b=D,D=v(D),w!==void 0&&k.hasValue){var R=k.value;if(w(R,D))return j=R}return j=D}if(R=j,a(b,D))return R;var A=v(D);return w!==void 0&&w(R,A)?(b=D,R):(b=D,j=A)}var P=!1,b,j,I=g===void 0?null:g;return[function(){return _(x())},I===null?void 0:function(){return _(I())}]},[x,g,v,w]);var N=s(p,S[0],S[1]);return c(function(){k.hasValue=!0,k.value=N},[N]),m(N),N},Oc}var Tm;function aE(){return Tm||(Tm=1,Ac.exports=iE()),Ac.exports}var sE=aE();const lE=d0(sE),uE={},Dm=e=>{let r;const o=new Set,a=(x,g)=>{const v=typeof x=="function"?x(r):x;if(!Object.is(v,r)){const w=r;r=g??(typeof v!="object"||v===null)?v:Object.assign({},r,v),o.forEach(S=>S(r,w))}},s=()=>r,m={setState:a,getState:s,getInitialState:()=>p,subscribe:x=>(o.add(x),()=>o.delete(x)),destroy:()=>{(uE?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),o.clear()}},p=r=e(a,s,m);return m},cE=e=>e?Dm(e):Dm,{useDebugValue:dE}=f0,{useSyncExternalStoreWithSelector:fE}=lE,hE=e=>e;function Qg(e,r=hE,o){const a=fE(e.subscribe,e.getState,e.getServerState||e.getInitialState,r,o);return dE(a),a}const Lm=(e,r)=>{const o=cE(e),a=(s,l=r)=>Qg(o,s,l);return Object.assign(a,o),a},pE=(e,r)=>e?Lm(e,r):Lm;function rt(e,r){if(Object.is(e,r))return!0;if(typeof e!="object"||e===null||typeof r!="object"||r===null)return!1;if(e instanceof Map&&r instanceof Map){if(e.size!==r.size)return!1;for(const[a,s]of e)if(!Object.is(s,r.get(a)))return!1;return!0}if(e instanceof Set&&r instanceof Set){if(e.size!==r.size)return!1;for(const a of e)if(!r.has(a))return!1;return!0}const o=Object.keys(e);if(o.length!==Object.keys(r).length)return!1;for(const a of o)if(!Object.prototype.hasOwnProperty.call(r,a)||!Object.is(e[a],r[a]))return!1;return!0}const Ol=E.createContext(null),mE=Ol.Provider,qg=Jn.error001();function Ve(e,r){const o=E.useContext(Ol);if(o===null)throw new Error(qg);return Qg(o,e,r)}function ot(){const e=E.useContext(Ol);if(e===null)throw new Error(qg);return E.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe}),[e])}const zm={display:"none"},gE={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},Jg="react-flow__node-desc",ey="react-flow__edge-desc",yE="react-flow__aria-live",xE=e=>e.ariaLiveMessage,vE=e=>e.ariaLabelConfig;function wE({rfId:e}){const r=Ve(xE);return d.jsx("div",{id:`${yE}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:gE,children:r})}function bE({rfId:e,disableKeyboardA11y:r}){const o=Ve(vE);return d.jsxs(d.Fragment,{children:[d.jsx("div",{id:`${Jg}-${e}`,style:zm,children:r?o["node.a11yDescription.default"]:o["node.a11yDescription.keyboardDisabled"]}),d.jsx("div",{id:`${ey}-${e}`,style:zm,children:o["edge.a11yDescription.default"]}),!r&&d.jsx(wE,{rfId:e})]})}const Hl=E.forwardRef(({position:e="top-left",children:r,className:o,style:a,...s},l)=>{const c=`${e}`.split("-");return d.jsx("div",{className:gt(["react-flow__panel",o,...c]),style:a,ref:l,...s,children:r})});Hl.displayName="Panel";function _E({proOptions:e,position:r="bottom-right"}){return e?.hideAttribution?null:d.jsx(Hl,{position:r,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev",children:d.jsx("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution",children:"React Flow"})})}const SE=e=>{const r=[],o=[];for(const[,a]of e.nodeLookup)a.selected&&r.push(a.internals.userNode);for(const[,a]of e.edgeLookup)a.selected&&o.push(a);return{selectedNodes:r,selectedEdges:o}},al=e=>e.id;function NE(e,r){return rt(e.selectedNodes.map(al),r.selectedNodes.map(al))&&rt(e.selectedEdges.map(al),r.selectedEdges.map(al))}function EE({onSelectionChange:e}){const r=ot(),{selectedNodes:o,selectedEdges:a}=Ve(SE,NE);return E.useEffect(()=>{const s={nodes:o,edges:a};e?.(s),r.getState().onSelectionChangeHandlers.forEach(l=>l(s))},[o,a,e]),null}const CE=e=>!!e.onSelectionChangeHandlers;function kE({onSelectionChange:e}){const r=Ve(CE);return e||r?d.jsx(EE,{onSelectionChange:e}):null}const ty=[0,0],jE={x:0,y:0,zoom:1},PE=["nodes","edges","defaultNodes","defaultEdges","onConnect","onConnectStart","onConnectEnd","onClickConnectStart","onClickConnectEnd","nodesDraggable","autoPanOnNodeFocus","nodesConnectable","nodesFocusable","edgesFocusable","edgesReconnectable","elevateNodesOnSelect","elevateEdgesOnSelect","minZoom","maxZoom","nodeExtent","onNodesChange","onEdgesChange","elementsSelectable","connectionMode","snapGrid","snapToGrid","translateExtent","connectOnClick","defaultEdgeOptions","fitView","fitViewOptions","onNodesDelete","onEdgesDelete","onDelete","onNodeDrag","onNodeDragStart","onNodeDragStop","onSelectionDrag","onSelectionDragStart","onSelectionDragStop","onMoveStart","onMove","onMoveEnd","noPanClassName","nodeOrigin","autoPanOnConnect","autoPanOnNodeDrag","onError","connectionRadius","isValidConnection","selectNodesOnDrag","nodeDragThreshold","connectionDragThreshold","onBeforeDelete","debug","autoPanSpeed","ariaLabelConfig","zIndexMode"],Im=[...PE,"rfId"],RE=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges}),$m={translateExtent:Ca,nodeOrigin:ty,minZoom:.5,maxZoom:2,elementsSelectable:!0,noPanClassName:"nopan",rfId:"1"};function ME(e){const{setNodes:r,setEdges:o,setMinZoom:a,setMaxZoom:s,setTranslateExtent:l,setNodeExtent:c,reset:f,setDefaultNodesAndEdges:m}=Ve(RE,rt),p=ot();E.useEffect(()=>(m(e.defaultNodes,e.defaultEdges),()=>{x.current=$m,f()}),[]);const x=E.useRef($m);return E.useEffect(()=>{for(const g of Im){const v=e[g],w=x.current[g];v!==w&&(typeof e[g]>"u"||(g==="nodes"?r(v):g==="edges"?o(v):g==="minZoom"?a(v):g==="maxZoom"?s(v):g==="translateExtent"?l(v):g==="nodeExtent"?c(v):g==="ariaLabelConfig"?p.setState({ariaLabelConfig:mN(v)}):g==="fitView"?p.setState({fitViewQueued:v}):g==="fitViewOptions"?p.setState({fitViewOptions:v}):p.setState({[g]:v})))}x.current=e},Im.map(g=>e[g])),null}function Fm(){return typeof window>"u"||!window.matchMedia?null:window.matchMedia("(prefers-color-scheme: dark)")}function TE(e){const[r,o]=E.useState(e==="system"?null:e);return E.useEffect(()=>{if(e!=="system"){o(e);return}const a=Fm(),s=()=>o(a?.matches?"dark":"light");return s(),a?.addEventListener("change",s),()=>{a?.removeEventListener("change",s)}},[e]),r!==null?r:Fm()?.matches?"dark":"light"}const Am=typeof document<"u"?document:null;function Ra(e=null,r={target:Am,actInsideInputWithModifier:!0}){const[o,a]=E.useState(!1),s=E.useRef(!1),l=E.useRef(new Set([])),[c,f]=E.useMemo(()=>{if(e!==null){const p=(Array.isArray(e)?e:[e]).filter(g=>typeof g=="string").map(g=>g.replace("+",`
`).replace(`

`,`
+`).split(`
`)),x=p.reduce((g,v)=>g.concat(...v),[]);return[p,x]}return[[],[]]},[e]);return E.useEffect(()=>{const m=r?.target??Am,p=r?.actInsideInputWithModifier??!0;if(e!==null){const x=w=>{if(s.current=w.ctrlKey||w.metaKey||w.shiftKey||w.altKey,(!s.current||s.current&&!p)&&Dg(w))return!1;const k=Hm(w.code,f);if(l.current.add(w[k]),Om(c,l.current,!1)){const N=w.composedPath?.()?.[0]||w.target,_=N?.nodeName==="BUTTON"||N?.nodeName==="A";r.preventDefault!==!1&&(s.current||!_)&&w.preventDefault(),a(!0)}},g=w=>{const S=Hm(w.code,f);Om(c,l.current,!0)?(a(!1),l.current.clear()):l.current.delete(w[S]),w.key==="Meta"&&l.current.clear(),s.current=!1},v=()=>{l.current.clear(),a(!1)};return m?.addEventListener("keydown",x),m?.addEventListener("keyup",g),window.addEventListener("blur",v),window.addEventListener("contextmenu",v),()=>{m?.removeEventListener("keydown",x),m?.removeEventListener("keyup",g),window.removeEventListener("blur",v),window.removeEventListener("contextmenu",v)}}},[e,a]),o}function Om(e,r,o){return e.filter(a=>o||a.length===r.size).some(a=>a.every(s=>r.has(s)))}function Hm(e,r){return r.includes(e)?"code":"key"}const DE=()=>{const e=ot();return E.useMemo(()=>({zoomIn:r=>{const{panZoom:o}=e.getState();return o?o.scaleBy(1.2,{duration:r?.duration}):Promise.resolve(!1)},zoomOut:r=>{const{panZoom:o}=e.getState();return o?o.scaleBy(1/1.2,{duration:r?.duration}):Promise.resolve(!1)},zoomTo:(r,o)=>{const{panZoom:a}=e.getState();return a?a.scaleTo(r,{duration:o?.duration}):Promise.resolve(!1)},getZoom:()=>e.getState().transform[2],setViewport:async(r,o)=>{const{transform:[a,s,l],panZoom:c}=e.getState();return c?(await c.setViewport({x:r.x??a,y:r.y??s,zoom:r.zoom??l},o),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>{const[r,o,a]=e.getState().transform;return{x:r,y:o,zoom:a}},setCenter:async(r,o,a)=>e.getState().setCenter(r,o,a),fitBounds:async(r,o)=>{const{width:a,height:s,minZoom:l,maxZoom:c,panZoom:f}=e.getState(),m=Td(r,a,s,l,c,o?.padding??.1);return f?(await f.setViewport(m,{duration:o?.duration,ease:o?.ease,interpolate:o?.interpolate}),Promise.resolve(!0)):Promise.resolve(!1)},screenToFlowPosition:(r,o={})=>{const{transform:a,snapGrid:s,snapToGrid:l,domNode:c}=e.getState();if(!c)return r;const{x:f,y:m}=c.getBoundingClientRect(),p={x:r.x-f,y:r.y-m},x=o.snapGrid??s,g=o.snapToGrid??l;return Va(p,a,g,x)},flowToScreenPosition:r=>{const{transform:o,domNode:a}=e.getState();if(!a)return r;const{x:s,y:l}=a.getBoundingClientRect(),c=Cl(r,o);return{x:c.x+s,y:c.y+l}}}),[])};function ny(e,r){const o=[],a=new Map,s=[];for(const l of e)if(l.type==="add"){s.push(l);continue}else if(l.type==="remove"||l.type==="replace")a.set(l.id,[l]);else{const c=a.get(l.id);c?c.push(l):a.set(l.id,[l])}for(const l of r){const c=a.get(l.id);if(!c){o.push(l);continue}if(c[0].type==="remove")continue;if(c[0].type==="replace"){o.push({...c[0].item});continue}const f={...l};for(const m of c)LE(m,f);o.push(f)}return s.length&&s.forEach(l=>{l.index!==void 0?o.splice(l.index,0,{...l.item}):o.push({...l.item})}),o}function LE(e,r){switch(e.type){case"select":{r.selected=e.selected;break}case"position":{typeof e.position<"u"&&(r.position=e.position),typeof e.dragging<"u"&&(r.dragging=e.dragging);break}case"dimensions":{typeof e.dimensions<"u"&&(r.measured={...e.dimensions},e.setAttributes&&((e.setAttributes===!0||e.setAttributes==="width")&&(r.width=e.dimensions.width),(e.setAttributes===!0||e.setAttributes==="height")&&(r.height=e.dimensions.height))),typeof e.resizing=="boolean"&&(r.resizing=e.resizing);break}}}function ry(e,r){return ny(e,r)}function oy(e,r){return ny(e,r)}function No(e,r){return{id:e,type:"select",selected:r}}function mi(e,r=new Set,o=!1){const a=[];for(const[s,l]of e){const c=r.has(s);!(l.selected===void 0&&!c)&&l.selected!==c&&(o&&(l.selected=c),a.push(No(l.id,c)))}return a}function Bm({items:e=[],lookup:r}){const o=[],a=new Map(e.map(s=>[s.id,s]));for(const[s,l]of e.entries()){const c=r.get(l.id),f=c?.internals?.userNode??c;f!==void 0&&f!==l&&o.push({id:l.id,item:l,type:"replace"}),f===void 0&&o.push({item:l,type:"add",index:s})}for(const[s]of r)a.get(s)===void 0&&o.push({id:s,type:"remove"});return o}function Vm(e){return{id:e.id,type:"remove"}}const Um=e=>iN(e),zE=e=>Eg(e);function iy(e){return E.forwardRef(e)}const IE=typeof window<"u"?E.useLayoutEffect:E.useEffect;function Wm(e){const[r,o]=E.useState(BigInt(0)),[a]=E.useState(()=>$E(()=>o(s=>s+BigInt(1))));return IE(()=>{const s=a.get();s.length&&(e(s),a.reset())},[r]),a}function $E(e){let r=[];return{get:()=>r,reset:()=>{r=[]},push:o=>{r.push(o),e()}}}const ay=E.createContext(null);function FE({children:e}){const r=ot(),o=E.useCallback(f=>{const{nodes:m=[],setNodes:p,hasDefaultNodes:x,onNodesChange:g,nodeLookup:v,fitViewQueued:w,onNodesChangeMiddlewareMap:S}=r.getState();let k=m;for(const _ of f)k=typeof _=="function"?_(k):_;let N=Bm({items:k,lookup:v});for(const _ of S.values())N=_(N);x&&p(k),N.length>0?g?.(N):w&&window.requestAnimationFrame(()=>{const{fitViewQueued:_,nodes:P,setNodes:b}=r.getState();_&&b(P)})},[]),a=Wm(o),s=E.useCallback(f=>{const{edges:m=[],setEdges:p,hasDefaultEdges:x,onEdgesChange:g,edgeLookup:v}=r.getState();let w=m;for(const S of f)w=typeof S=="function"?S(w):S;x?p(w):g&&g(Bm({items:w,lookup:v}))},[]),l=Wm(s),c=E.useMemo(()=>({nodeQueue:a,edgeQueue:l}),[]);return d.jsx(ay.Provider,{value:c,children:e})}function AE(){const e=E.useContext(ay);if(!e)throw new Error("useBatchContext must be used within a BatchProvider");return e}const OE=e=>!!e.panZoom;function Ad(){const e=DE(),r=ot(),o=AE(),a=Ve(OE),s=E.useMemo(()=>{const l=g=>r.getState().nodeLookup.get(g),c=g=>{o.nodeQueue.push(g)},f=g=>{o.edgeQueue.push(g)},m=g=>{const{nodeLookup:v,nodeOrigin:w}=r.getState(),S=Um(g)?g:v.get(g.id),k=S.parentId?Mg(S.position,S.measured,S.parentId,v,w):S.position,N={...S,position:k,width:S.measured?.width??S.width,height:S.measured?.height??S.height};return Si(N)},p=(g,v,w={replace:!1})=>{c(S=>S.map(k=>{if(k.id===g){const N=typeof v=="function"?v(k):v;return w.replace&&Um(N)?N:{...k,...N}}return k}))},x=(g,v,w={replace:!1})=>{f(S=>S.map(k=>{if(k.id===g){const N=typeof v=="function"?v(k):v;return w.replace&&zE(N)?N:{...k,...N}}return k}))};return{getNodes:()=>r.getState().nodes.map(g=>({...g})),getNode:g=>l(g)?.internals.userNode,getInternalNode:l,getEdges:()=>{const{edges:g=[]}=r.getState();return g.map(v=>({...v}))},getEdge:g=>r.getState().edgeLookup.get(g),setNodes:c,setEdges:f,addNodes:g=>{const v=Array.isArray(g)?g:[g];o.nodeQueue.push(w=>[...w,...v])},addEdges:g=>{const v=Array.isArray(g)?g:[g];o.edgeQueue.push(w=>[...w,...v])},toObject:()=>{const{nodes:g=[],edges:v=[],transform:w}=r.getState(),[S,k,N]=w;return{nodes:g.map(_=>({..._})),edges:v.map(_=>({..._})),viewport:{x:S,y:k,zoom:N}}},deleteElements:async({nodes:g=[],edges:v=[]})=>{const{nodes:w,edges:S,onNodesDelete:k,onEdgesDelete:N,triggerNodeChanges:_,triggerEdgeChanges:P,onDelete:b,onBeforeDelete:j}=r.getState(),{nodes:I,edges:D}=await cN({nodesToRemove:g,edgesToRemove:v,nodes:w,edges:S,onBeforeDelete:j}),R=D.length>0,A=I.length>0;if(R){const K=D.map(Vm);N?.(D),P(K)}if(A){const K=I.map(Vm);k?.(I),_(K)}return(A||R)&&b?.({nodes:I,edges:D}),{deletedNodes:I,deletedEdges:D}},getIntersectingNodes:(g,v=!0,w)=>{const S=gm(g),k=S?g:m(g),N=w!==void 0;return k?(w||r.getState().nodes).filter(_=>{const P=r.getState().nodeLookup.get(_.id);if(P&&!S&&(_.id===g.id||!P.internals.positionAbsolute))return!1;const b=Si(N?_:P),j=ja(b,k);return v&&j>0||j>=b.width*b.height||j>=k.width*k.height}):[]},isNodeIntersecting:(g,v,w=!0)=>{const k=gm(g)?g:m(g);if(!k)return!1;const N=ja(k,v);return w&&N>0||N>=v.width*v.height||N>=k.width*k.height},updateNode:p,updateNodeData:(g,v,w={replace:!1})=>{p(g,S=>{const k=typeof v=="function"?v(S):v;return w.replace?{...S,data:k}:{...S,data:{...S.data,...k}}},w)},updateEdge:x,updateEdgeData:(g,v,w={replace:!1})=>{x(g,S=>{const k=typeof v=="function"?v(S):v;return w.replace?{...S,data:k}:{...S,data:{...S.data,...k}}},w)},getNodesBounds:g=>{const{nodeLookup:v,nodeOrigin:w}=r.getState();return aN(g,{nodeLookup:v,nodeOrigin:w})},getHandleConnections:({type:g,id:v,nodeId:w})=>Array.from(r.getState().connectionLookup.get(`${w}-${g}${v?`-${v}`:""}`)?.values()??[]),getNodeConnections:({type:g,handleId:v,nodeId:w})=>Array.from(r.getState().connectionLookup.get(`${w}${g?v?`-${g}-${v}`:`-${g}`:""}`)?.values()??[]),fitView:async g=>{const v=r.getState().fitViewResolver??pN();return r.setState({fitViewQueued:!0,fitViewOptions:g,fitViewResolver:v}),o.nodeQueue.push(w=>[...w]),v.promise}}},[]);return E.useMemo(()=>({...s,...e,viewportInitialized:a}),[a])}const Xm=e=>e.selected,HE=typeof window<"u"?window:void 0;function BE({deleteKeyCode:e,multiSelectionKeyCode:r}){const o=ot(),{deleteElements:a}=Ad(),s=Ra(e,{actInsideInputWithModifier:!1}),l=Ra(r,{target:HE});E.useEffect(()=>{if(s){const{edges:c,nodes:f}=o.getState();a({nodes:f.filter(Xm),edges:c.filter(Xm)}),o.setState({nodesSelectionActive:!1})}},[s]),E.useEffect(()=>{o.setState({multiSelectionActive:l})},[l])}function VE(e){const r=ot();E.useEffect(()=>{const o=()=>{if(!e.current||!(e.current.checkVisibility?.()??!0))return!1;const a=Dd(e.current);(a.height===0||a.width===0)&&r.getState().onError?.("004",Jn.error004()),r.setState({width:a.width||500,height:a.height||500})};if(e.current){o(),window.addEventListener("resize",o);const a=new ResizeObserver(()=>o());return a.observe(e.current),()=>{window.removeEventListener("resize",o),a&&e.current&&a.unobserve(e.current)}}},[])}const Bl={position:"absolute",width:"100%",height:"100%",top:0,left:0},UE=e=>({userSelectionActive:e.userSelectionActive,lib:e.lib,connectionInProgress:e.connection.inProgress});function WE({onPaneContextMenu:e,zoomOnScroll:r=!0,zoomOnPinch:o=!0,panOnScroll:a=!1,panOnScrollSpeed:s=.5,panOnScrollMode:l=jo.Free,zoomOnDoubleClick:c=!0,panOnDrag:f=!0,defaultViewport:m,translateExtent:p,minZoom:x,maxZoom:g,zoomActivationKeyCode:v,preventScrolling:w=!0,children:S,noWheelClassName:k,noPanClassName:N,onViewportChange:_,isControlledViewport:P,paneClickDistance:b,selectionOnDrag:j}){const I=ot(),D=E.useRef(null),{userSelectionActive:R,lib:A,connectionInProgress:K}=Ve(UE,rt),F=Ra(v),V=E.useRef();VE(D);const H=E.useCallback(W=>{_?.({x:W[0],y:W[1],zoom:W[2]}),P||I.setState({transform:W})},[_,P]);return E.useEffect(()=>{if(D.current){V.current=ZN({domNode:D.current,minZoom:x,maxZoom:g,translateExtent:p,viewport:m,onDraggingChange:X=>I.setState({paneDragging:X}),onPanZoomStart:(X,Q)=>{const{onViewportChangeStart:z,onMoveStart:G}=I.getState();G?.(X,Q),z?.(Q)},onPanZoom:(X,Q)=>{const{onViewportChange:z,onMove:G}=I.getState();G?.(X,Q),z?.(Q)},onPanZoomEnd:(X,Q)=>{const{onViewportChangeEnd:z,onMoveEnd:G}=I.getState();G?.(X,Q),z?.(Q)}});const{x:W,y:M,zoom:L}=V.current.getViewport();return I.setState({panZoom:V.current,transform:[W,M,L],domNode:D.current.closest(".react-flow")}),()=>{V.current?.destroy()}}},[]),E.useEffect(()=>{V.current?.update({onPaneContextMenu:e,zoomOnScroll:r,zoomOnPinch:o,panOnScroll:a,panOnScrollSpeed:s,panOnScrollMode:l,zoomOnDoubleClick:c,panOnDrag:f,zoomActivationKeyPressed:F,preventScrolling:w,noPanClassName:N,userSelectionActive:R,noWheelClassName:k,lib:A,onTransformChange:H,connectionInProgress:K,selectionOnDrag:j,paneClickDistance:b})},[e,r,o,a,s,l,c,f,F,w,N,R,k,A,H,K,j,b]),d.jsx("div",{className:"react-flow__renderer",ref:D,style:Bl,children:S})}const XE=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function YE(){const{userSelectionActive:e,userSelectionRect:r}=Ve(XE,rt);return e&&r?d.jsx("div",{className:"react-flow__selection react-flow__container",style:{width:r.width,height:r.height,transform:`translate(${r.x}px, ${r.y}px)`}}):null}const Vc=(e,r)=>o=>{o.target===r.current&&e?.(o)},GE=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,connectionInProgress:e.connection.inProgress,dragging:e.paneDragging});function KE({isSelecting:e,selectionKeyPressed:r,selectionMode:o=ka.Full,panOnDrag:a,paneClickDistance:s,selectionOnDrag:l,onSelectionStart:c,onSelectionEnd:f,onPaneClick:m,onPaneContextMenu:p,onPaneScroll:x,onPaneMouseEnter:g,onPaneMouseMove:v,onPaneMouseLeave:w,children:S}){const k=ot(),{userSelectionActive:N,elementsSelectable:_,dragging:P,connectionInProgress:b}=Ve(GE,rt),j=_&&(e||N),I=E.useRef(null),D=E.useRef(),R=E.useRef(new Set),A=E.useRef(new Set),K=E.useRef(!1),F=z=>{if(K.current||b){K.current=!1;return}m?.(z),k.getState().resetSelectedElements(),k.setState({nodesSelectionActive:!1})},V=z=>{if(Array.isArray(a)&&a?.includes(2)){z.preventDefault();return}p?.(z)},H=x?z=>x(z):void 0,W=z=>{K.current&&(z.stopPropagation(),K.current=!1)},M=z=>{const{domNode:G}=k.getState();if(D.current=G?.getBoundingClientRect(),!D.current)return;const U=z.target===I.current;if(!U&&!!z.target.closest(".nokey")||!e||!(l&&U||r)||z.button!==0||!z.isPrimary)return;z.target?.setPointerCapture?.(z.pointerId),K.current=!1;const{x:oe,y:re}=$n(z.nativeEvent,D.current);k.setState({userSelectionRect:{width:0,height:0,startX:oe,startY:re,x:oe,y:re}}),U||(z.stopPropagation(),z.preventDefault())},L=z=>{const{userSelectionRect:G,transform:U,nodeLookup:T,edgeLookup:B,connectionLookup:oe,triggerNodeChanges:re,triggerEdgeChanges:ce,defaultEdgeOptions:me,resetSelectedElements:he}=k.getState();if(!D.current||!G)return;const{x:ie,y:pe}=$n(z.nativeEvent,D.current),{startX:De,startY:ze}=G;if(!K.current){const Oe=r?0:s;if(Math.hypot(ie-De,pe-ze)<=Oe)return;he(),c?.(z)}K.current=!0;const ye={startX:De,startY:ze,x:ie<De?ie:De,y:pe<ze?pe:ze,width:Math.abs(ie-De),height:Math.abs(pe-ze)},Pe=R.current,Be=A.current;R.current=new Set(Md(T,ye,U,o===ka.Partial,!0).map(Oe=>Oe.id)),A.current=new Set;const Ze=me?.selectable??!0;for(const Oe of R.current){const ut=oe.get(Oe);if(ut)for(const{edgeId:Qt}of ut.values()){const Pt=B.get(Qt);Pt&&(Pt.selectable??Ze)&&A.current.add(Qt)}}if(!ym(Pe,R.current)){const Oe=mi(T,R.current,!0);re(Oe)}if(!ym(Be,A.current)){const Oe=mi(B,A.current);ce(Oe)}k.setState({userSelectionRect:ye,userSelectionActive:!0,nodesSelectionActive:!1})},X=z=>{z.button===0&&(z.target?.releasePointerCapture?.(z.pointerId),!N&&z.target===I.current&&k.getState().userSelectionRect&&F?.(z),k.setState({userSelectionActive:!1,userSelectionRect:null}),K.current&&(f?.(z),k.setState({nodesSelectionActive:R.current.size>0})))},Q=a===!0||Array.isArray(a)&&a.includes(0);return d.jsxs("div",{className:gt(["react-flow__pane",{draggable:Q,dragging:P,selection:e}]),onClick:j?void 0:Vc(F,I),onContextMenu:Vc(V,I),onWheel:Vc(H,I),onPointerEnter:j?void 0:g,onPointerMove:j?L:v,onPointerUp:j?X:void 0,onPointerDownCapture:j?M:void 0,onClickCapture:j?W:void 0,onPointerLeave:w,ref:I,style:Bl,children:[S,d.jsx(YE,{})]})}function ld({id:e,store:r,unselect:o=!1,nodeRef:a}){const{addSelectedNodes:s,unselectNodesAndEdges:l,multiSelectionActive:c,nodeLookup:f,onError:m}=r.getState(),p=f.get(e);if(!p){m?.("012",Jn.error012(e));return}r.setState({nodesSelectionActive:!1}),p.selected?(o||p.selected&&c)&&(l({nodes:[p],edges:[]}),requestAnimationFrame(()=>a?.current?.blur())):s([e])}function sy({nodeRef:e,disabled:r=!1,noDragClassName:o,handleSelector:a,nodeId:s,isSelectable:l,nodeClickDistance:c}){const f=ot(),[m,p]=E.useState(!1),x=E.useRef();return E.useEffect(()=>{x.current=IN({getStoreItems:()=>f.getState(),onNodeMouseDown:g=>{ld({id:g,store:f,nodeRef:e})},onDragStart:()=>{p(!0)},onDragStop:()=>{p(!1)}})},[]),E.useEffect(()=>{if(r)x.current?.destroy();else if(e.current)return x.current?.update({noDragClassName:o,handleSelector:a,domNode:e.current,isSelectable:l,nodeId:s,nodeClickDistance:c}),()=>{x.current?.destroy()}},[o,a,r,l,e,s]),m}const ZE=e=>r=>r.selected&&(r.draggable||e&&typeof r.draggable>"u");function ly(){const e=ot();return E.useCallback(o=>{const{nodeExtent:a,snapToGrid:s,snapGrid:l,nodesDraggable:c,onError:f,updateNodePositions:m,nodeLookup:p,nodeOrigin:x}=e.getState(),g=new Map,v=ZE(c),w=s?l[0]:5,S=s?l[1]:5,k=o.direction.x*w*o.factor,N=o.direction.y*S*o.factor;for(const[,_]of p){if(!v(_))continue;let P={x:_.internals.positionAbsolute.x+k,y:_.internals.positionAbsolute.y+N};s&&(P=Ba(P,l));const{position:b,positionAbsolute:j}=Cg({nodeId:_.id,nextPosition:P,nodeLookup:p,nodeExtent:a,nodeOrigin:x,onError:f});_.position=b,_.internals.positionAbsolute=j,g.set(_.id,_)}m(g)},[])}const Od=E.createContext(null),QE=Od.Provider;Od.Consumer;const uy=()=>E.useContext(Od),qE=e=>({connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName,rfId:e.rfId}),JE=(e,r,o)=>a=>{const{connectionClickStartHandle:s,connectionMode:l,connection:c}=a,{fromHandle:f,toHandle:m,isValid:p}=c,x=m?.nodeId===e&&m?.id===r&&m?.type===o;return{connectingFrom:f?.nodeId===e&&f?.id===r&&f?.type===o,connectingTo:x,clickConnecting:s?.nodeId===e&&s?.id===r&&s?.type===o,isPossibleEndHandle:l===bi.Strict?f?.type!==o:e!==f?.nodeId||r!==f?.id,connectionInProcess:!!f,clickConnectionInProcess:!!s,valid:x&&p}};function eC({type:e="source",position:r=je.Top,isValidConnection:o,isConnectable:a=!0,isConnectableStart:s=!0,isConnectableEnd:l=!0,id:c,onConnect:f,children:m,className:p,onMouseDown:x,onTouchStart:g,...v},w){const S=c||null,k=e==="target",N=ot(),_=uy(),{connectOnClick:P,noPanClassName:b,rfId:j}=Ve(qE,rt),{connectingFrom:I,connectingTo:D,clickConnecting:R,isPossibleEndHandle:A,connectionInProcess:K,clickConnectionInProcess:F,valid:V}=Ve(JE(_,S,e),rt);_||N.getState().onError?.("010",Jn.error010());const H=L=>{const{defaultEdgeOptions:X,onConnect:Q,hasDefaultEdges:z}=N.getState(),G={...X,...L};if(z){const{edges:U,setEdges:T}=N.getState();T(Fg(G,U))}Q?.(G),f?.(G)},W=L=>{if(!_)return;const X=Lg(L.nativeEvent);if(s&&(X&&L.button===0||!X)){const Q=N.getState();sd.onPointerDown(L.nativeEvent,{handleDomNode:L.currentTarget,autoPanOnConnect:Q.autoPanOnConnect,connectionMode:Q.connectionMode,connectionRadius:Q.connectionRadius,domNode:Q.domNode,nodeLookup:Q.nodeLookup,lib:Q.lib,isTarget:k,handleId:S,nodeId:_,flowId:Q.rfId,panBy:Q.panBy,cancelConnection:Q.cancelConnection,onConnectStart:Q.onConnectStart,onConnectEnd:Q.onConnectEnd,updateConnection:Q.updateConnection,onConnect:H,isValidConnection:o||Q.isValidConnection,getTransform:()=>N.getState().transform,getFromHandle:()=>N.getState().connection.fromHandle,autoPanSpeed:Q.autoPanSpeed,dragThreshold:Q.connectionDragThreshold})}X?x?.(L):g?.(L)},M=L=>{const{onClickConnectStart:X,onClickConnectEnd:Q,connectionClickStartHandle:z,connectionMode:G,isValidConnection:U,lib:T,rfId:B,nodeLookup:oe,connection:re}=N.getState();if(!_||!z&&!s)return;if(!z){X?.(L.nativeEvent,{nodeId:_,handleId:S,handleType:e}),N.setState({connectionClickStartHandle:{nodeId:_,type:e,id:S}});return}const ce=Tg(L.target),me=o||U,{connection:he,isValid:ie}=sd.isValid(L.nativeEvent,{handle:{nodeId:_,id:S,type:e},connectionMode:G,fromNodeId:z.nodeId,fromHandleId:z.id||null,fromType:z.type,isValidConnection:me,flowId:B,doc:ce,lib:T,nodeLookup:oe});ie&&he&&H(he);const pe=structuredClone(re);delete pe.inProgress,pe.toPosition=pe.toHandle?pe.toHandle.position:null,Q?.(L,pe),N.setState({connectionClickStartHandle:null})};return d.jsx("div",{"data-handleid":S,"data-nodeid":_,"data-handlepos":r,"data-id":`${j}-${_}-${S}-${e}`,className:gt(["react-flow__handle",`react-flow__handle-${r}`,"nodrag",b,p,{source:!k,target:k,connectable:a,connectablestart:s,connectableend:l,clickconnecting:R,connectingfrom:I,connectingto:D,valid:V,connectionindicator:a&&(!K||A)&&(K||F?l:s)}]),onMouseDown:W,onTouchStart:W,onClick:P?M:void 0,ref:w,...v,children:m})}const Po=E.memo(iy(eC));function tC({data:e,isConnectable:r,sourcePosition:o=je.Bottom}){return d.jsxs(d.Fragment,{children:[e?.label,d.jsx(Po,{type:"source",position:o,isConnectable:r})]})}function nC({data:e,isConnectable:r,targetPosition:o=je.Top,sourcePosition:a=je.Bottom}){return d.jsxs(d.Fragment,{children:[d.jsx(Po,{type:"target",position:o,isConnectable:r}),e?.label,d.jsx(Po,{type:"source",position:a,isConnectable:r})]})}function rC(){return null}function oC({data:e,isConnectable:r,targetPosition:o=je.Top}){return d.jsxs(d.Fragment,{children:[d.jsx(Po,{type:"target",position:o,isConnectable:r}),e?.label]})}const jl={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},Ym={input:tC,default:nC,output:oC,group:rC};function iC(e){return e.internals.handleBounds===void 0?{width:e.width??e.initialWidth??e.style?.width,height:e.height??e.initialHeight??e.style?.height}:{width:e.width??e.style?.width,height:e.height??e.style?.height}}const aC=e=>{const{width:r,height:o,x:a,y:s}=Ha(e.nodeLookup,{filter:l=>!!l.selected});return{width:In(r)?r:null,height:In(o)?o:null,userSelectionActive:e.userSelectionActive,transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]}) translate(${a}px,${s}px)`}};function sC({onSelectionContextMenu:e,noPanClassName:r,disableKeyboardA11y:o}){const a=ot(),{width:s,height:l,transformString:c,userSelectionActive:f}=Ve(aC,rt),m=ly(),p=E.useRef(null);if(E.useEffect(()=>{o||p.current?.focus({preventScroll:!0})},[o]),sy({nodeRef:p}),f||!s||!l)return null;const x=e?v=>{const w=a.getState().nodes.filter(S=>S.selected);e(v,w)}:void 0,g=v=>{Object.prototype.hasOwnProperty.call(jl,v.key)&&(v.preventDefault(),m({direction:jl[v.key],factor:v.shiftKey?4:1}))};return d.jsx("div",{className:gt(["react-flow__nodesselection","react-flow__container",r]),style:{transform:c},children:d.jsx("div",{ref:p,className:"react-flow__nodesselection-rect",onContextMenu:x,tabIndex:o?void 0:-1,onKeyDown:o?void 0:g,style:{width:s,height:l}})})}const Gm=typeof window<"u"?window:void 0,lC=e=>({nodesSelectionActive:e.nodesSelectionActive,userSelectionActive:e.userSelectionActive});function cy({children:e,onPaneClick:r,onPaneMouseEnter:o,onPaneMouseMove:a,onPaneMouseLeave:s,onPaneContextMenu:l,onPaneScroll:c,paneClickDistance:f,deleteKeyCode:m,selectionKeyCode:p,selectionOnDrag:x,selectionMode:g,onSelectionStart:v,onSelectionEnd:w,multiSelectionKeyCode:S,panActivationKeyCode:k,zoomActivationKeyCode:N,elementsSelectable:_,zoomOnScroll:P,zoomOnPinch:b,panOnScroll:j,panOnScrollSpeed:I,panOnScrollMode:D,zoomOnDoubleClick:R,panOnDrag:A,defaultViewport:K,translateExtent:F,minZoom:V,maxZoom:H,preventScrolling:W,onSelectionContextMenu:M,noWheelClassName:L,noPanClassName:X,disableKeyboardA11y:Q,onViewportChange:z,isControlledViewport:G}){const{nodesSelectionActive:U,userSelectionActive:T}=Ve(lC,rt),B=Ra(p,{target:Gm}),oe=Ra(k,{target:Gm}),re=oe||A,ce=oe||j,me=x&&re!==!0,he=B||T||me;return BE({deleteKeyCode:m,multiSelectionKeyCode:S}),d.jsx(WE,{onPaneContextMenu:l,elementsSelectable:_,zoomOnScroll:P,zoomOnPinch:b,panOnScroll:ce,panOnScrollSpeed:I,panOnScrollMode:D,zoomOnDoubleClick:R,panOnDrag:!B&&re,defaultViewport:K,translateExtent:F,minZoom:V,maxZoom:H,zoomActivationKeyCode:N,preventScrolling:W,noWheelClassName:L,noPanClassName:X,onViewportChange:z,isControlledViewport:G,paneClickDistance:f,selectionOnDrag:me,children:d.jsxs(KE,{onSelectionStart:v,onSelectionEnd:w,onPaneClick:r,onPaneMouseEnter:o,onPaneMouseMove:a,onPaneMouseLeave:s,onPaneContextMenu:l,onPaneScroll:c,panOnDrag:re,isSelecting:!!he,selectionMode:g,selectionKeyPressed:B,paneClickDistance:f,selectionOnDrag:me,children:[e,U&&d.jsx(sC,{onSelectionContextMenu:M,noPanClassName:X,disableKeyboardA11y:Q})]})})}cy.displayName="FlowRenderer";const uC=E.memo(cy),cC=e=>r=>e?Md(r.nodeLookup,{x:0,y:0,width:r.width,height:r.height},r.transform,!0).map(o=>o.id):Array.from(r.nodeLookup.keys());function dC(e){return Ve(E.useCallback(cC(e),[e]),rt)}const fC=e=>e.updateNodeInternals;function hC(){const e=Ve(fC),[r]=E.useState(()=>typeof ResizeObserver>"u"?null:new ResizeObserver(o=>{const a=new Map;o.forEach(s=>{const l=s.target.getAttribute("data-id");a.set(l,{id:l,nodeElement:s.target,force:!0})}),e(a)}));return E.useEffect(()=>()=>{r?.disconnect()},[r]),r}function pC({node:e,nodeType:r,hasDimensions:o,resizeObserver:a}){const s=ot(),l=E.useRef(null),c=E.useRef(null),f=E.useRef(e.sourcePosition),m=E.useRef(e.targetPosition),p=E.useRef(r),x=o&&!!e.internals.handleBounds;return E.useEffect(()=>{l.current&&!e.hidden&&(!x||c.current!==l.current)&&(c.current&&a?.unobserve(c.current),a?.observe(l.current),c.current=l.current)},[x,e.hidden]),E.useEffect(()=>()=>{c.current&&(a?.unobserve(c.current),c.current=null)},[]),E.useEffect(()=>{if(l.current){const g=p.current!==r,v=f.current!==e.sourcePosition,w=m.current!==e.targetPosition;(g||v||w)&&(p.current=r,f.current=e.sourcePosition,m.current=e.targetPosition,s.getState().updateNodeInternals(new Map([[e.id,{id:e.id,nodeElement:l.current,force:!0}]])))}},[e.id,r,e.sourcePosition,e.targetPosition]),l}function mC({id:e,onClick:r,onMouseEnter:o,onMouseMove:a,onMouseLeave:s,onContextMenu:l,onDoubleClick:c,nodesDraggable:f,elementsSelectable:m,nodesConnectable:p,nodesFocusable:x,resizeObserver:g,noDragClassName:v,noPanClassName:w,disableKeyboardA11y:S,rfId:k,nodeTypes:N,nodeClickDistance:_,onError:P}){const{node:b,internals:j,isParent:I}=Ve(ie=>{const pe=ie.nodeLookup.get(e),De=ie.parentLookup.has(e);return{node:pe,internals:pe.internals,isParent:De}},rt);let D=b.type||"default",R=N?.[D]||Ym[D];R===void 0&&(P?.("003",Jn.error003(D)),D="default",R=N?.default||Ym.default);const A=!!(b.draggable||f&&typeof b.draggable>"u"),K=!!(b.selectable||m&&typeof b.selectable>"u"),F=!!(b.connectable||p&&typeof b.connectable>"u"),V=!!(b.focusable||x&&typeof b.focusable>"u"),H=ot(),W=Rg(b),M=pC({node:b,nodeType:D,hasDimensions:W,resizeObserver:g}),L=sy({nodeRef:M,disabled:b.hidden||!A,noDragClassName:v,handleSelector:b.dragHandle,nodeId:e,isSelectable:K,nodeClickDistance:_}),X=ly();if(b.hidden)return null;const Q=Sr(b),z=iC(b),G=K||A||r||o||a||s,U=o?ie=>o(ie,{...j.userNode}):void 0,T=a?ie=>a(ie,{...j.userNode}):void 0,B=s?ie=>s(ie,{...j.userNode}):void 0,oe=l?ie=>l(ie,{...j.userNode}):void 0,re=c?ie=>c(ie,{...j.userNode}):void 0,ce=ie=>{const{selectNodesOnDrag:pe,nodeDragThreshold:De}=H.getState();K&&(!pe||!A||De>0)&&ld({id:e,store:H,nodeRef:M}),r&&r(ie,{...j.userNode})},me=ie=>{if(!(Dg(ie.nativeEvent)||S)){if(bg.includes(ie.key)&&K){const pe=ie.key==="Escape";ld({id:e,store:H,unselect:pe,nodeRef:M})}else if(A&&b.selected&&Object.prototype.hasOwnProperty.call(jl,ie.key)){ie.preventDefault();const{ariaLabelConfig:pe}=H.getState();H.setState({ariaLiveMessage:pe["node.a11yDescription.ariaLiveMessage"]({direction:ie.key.replace("Arrow","").toLowerCase(),x:~~j.positionAbsolute.x,y:~~j.positionAbsolute.y})}),X({direction:jl[ie.key],factor:ie.shiftKey?4:1})}}},he=()=>{if(S||!M.current?.matches(":focus-visible"))return;const{transform:ie,width:pe,height:De,autoPanOnNodeFocus:ze,setCenter:ye}=H.getState();if(!ze)return;Md(new Map([[e,b]]),{x:0,y:0,width:pe,height:De},ie,!0).length>0||ye(b.position.x+Q.width/2,b.position.y+Q.height/2,{zoom:ie[2]})};return d.jsx("div",{className:gt(["react-flow__node",`react-flow__node-${D}`,{[w]:A},b.className,{selected:b.selected,selectable:K,parent:I,draggable:A,dragging:L}]),ref:M,style:{zIndex:j.z,transform:`translate(${j.positionAbsolute.x}px,${j.positionAbsolute.y}px)`,pointerEvents:G?"all":"none",visibility:W?"visible":"hidden",...b.style,...z},"data-id":e,"data-testid":`rf__node-${e}`,onMouseEnter:U,onMouseMove:T,onMouseLeave:B,onContextMenu:oe,onClick:ce,onDoubleClick:re,onKeyDown:V?me:void 0,tabIndex:V?0:void 0,onFocus:V?he:void 0,role:b.ariaRole??(V?"group":void 0),"aria-roledescription":"node","aria-describedby":S?void 0:`${Jg}-${k}`,"aria-label":b.ariaLabel,...b.domAttributes,children:d.jsx(QE,{value:e,children:d.jsx(R,{id:e,data:b.data,type:D,positionAbsoluteX:j.positionAbsolute.x,positionAbsoluteY:j.positionAbsolute.y,selected:b.selected??!1,selectable:K,draggable:A,deletable:b.deletable??!0,isConnectable:F,sourcePosition:b.sourcePosition,targetPosition:b.targetPosition,dragging:L,dragHandle:b.dragHandle,zIndex:j.z,parentId:b.parentId,...Q})})})}var gC=E.memo(mC);const yC=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,onError:e.onError});function dy(e){const{nodesDraggable:r,nodesConnectable:o,nodesFocusable:a,elementsSelectable:s,onError:l}=Ve(yC,rt),c=dC(e.onlyRenderVisibleElements),f=hC();return d.jsx("div",{className:"react-flow__nodes",style:Bl,children:c.map(m=>d.jsx(gC,{id:m,nodeTypes:e.nodeTypes,nodeExtent:e.nodeExtent,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,resizeObserver:f,nodesDraggable:r,nodesConnectable:o,nodesFocusable:a,elementsSelectable:s,nodeClickDistance:e.nodeClickDistance,onError:l},m))})}dy.displayName="NodeRenderer";const xC=E.memo(dy);function vC(e){return Ve(E.useCallback(o=>{if(!e)return o.edges.map(s=>s.id);const a=[];if(o.width&&o.height)for(const s of o.edges){const l=o.nodeLookup.get(s.source),c=o.nodeLookup.get(s.target);l&&c&&xN({sourceNode:l,targetNode:c,width:o.width,height:o.height,transform:o.transform})&&a.push(s.id)}return a},[e]),rt)}const wC=({color:e="none",strokeWidth:r=1})=>{const o={strokeWidth:r,...e&&{stroke:e}};return d.jsx("polyline",{className:"arrow",style:o,strokeLinecap:"round",fill:"none",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4"})},bC=({color:e="none",strokeWidth:r=1})=>{const o={strokeWidth:r,...e&&{stroke:e,fill:e}};return d.jsx("polyline",{className:"arrowclosed",style:o,strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"})},Km={[Nl.Arrow]:wC,[Nl.ArrowClosed]:bC};function _C(e){const r=ot();return E.useMemo(()=>Object.prototype.hasOwnProperty.call(Km,e)?Km[e]:(r.getState().onError?.("009",Jn.error009(e)),null),[e])}const SC=({id:e,type:r,color:o,width:a=12.5,height:s=12.5,markerUnits:l="strokeWidth",strokeWidth:c,orient:f="auto-start-reverse"})=>{const m=_C(r);return m?d.jsx("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${a}`,markerHeight:`${s}`,viewBox:"-10 -10 20 20",markerUnits:l,orient:f,refX:"0",refY:"0",children:d.jsx(m,{color:o,strokeWidth:c})}):null},fy=({defaultColor:e,rfId:r})=>{const o=Ve(l=>l.edges),a=Ve(l=>l.defaultEdgeOptions),s=E.useMemo(()=>EN(o,{id:r,defaultColor:e,defaultMarkerStart:a?.markerStart,defaultMarkerEnd:a?.markerEnd}),[o,a,r,e]);return s.length?d.jsx("svg",{className:"react-flow__marker","aria-hidden":"true",children:d.jsx("defs",{children:s.map(l=>d.jsx(SC,{id:l.id,type:l.type,color:l.color,width:l.width,height:l.height,markerUnits:l.markerUnits,strokeWidth:l.strokeWidth,orient:l.orient},l.id))})}):null};fy.displayName="MarkerDefinitions";var NC=E.memo(fy);function hy({x:e,y:r,label:o,labelStyle:a,labelShowBg:s=!0,labelBgStyle:l,labelBgPadding:c=[2,4],labelBgBorderRadius:f=2,children:m,className:p,...x}){const[g,v]=E.useState({x:1,y:0,width:0,height:0}),w=gt(["react-flow__edge-textwrapper",p]),S=E.useRef(null);return E.useEffect(()=>{if(S.current){const k=S.current.getBBox();v({x:k.x,y:k.y,width:k.width,height:k.height})}},[o]),o?d.jsxs("g",{transform:`translate(${e-g.width/2} ${r-g.height/2})`,className:w,visibility:g.width?"visible":"hidden",...x,children:[s&&d.jsx("rect",{width:g.width+2*c[0],x:-c[0],y:-c[1],height:g.height+2*c[1],className:"react-flow__edge-textbg",style:l,rx:f,ry:f}),d.jsx("text",{className:"react-flow__edge-text",y:g.height/2,dy:"0.3em",ref:S,style:a,children:o}),m]}):null}hy.displayName="EdgeText";const EC=E.memo(hy);function Ua({path:e,labelX:r,labelY:o,label:a,labelStyle:s,labelShowBg:l,labelBgStyle:c,labelBgPadding:f,labelBgBorderRadius:m,interactionWidth:p=20,...x}){return d.jsxs(d.Fragment,{children:[d.jsx("path",{...x,d:e,fill:"none",className:gt(["react-flow__edge-path",x.className])}),p?d.jsx("path",{d:e,fill:"none",strokeOpacity:0,strokeWidth:p,className:"react-flow__edge-interaction"}):null,a&&In(r)&&In(o)?d.jsx(EC,{x:r,y:o,label:a,labelStyle:s,labelShowBg:l,labelBgStyle:c,labelBgPadding:f,labelBgBorderRadius:m}):null]})}function Zm({pos:e,x1:r,y1:o,x2:a,y2:s}){return e===je.Left||e===je.Right?[.5*(r+a),o]:[r,.5*(o+s)]}function py({sourceX:e,sourceY:r,sourcePosition:o=je.Bottom,targetX:a,targetY:s,targetPosition:l=je.Top}){const[c,f]=Zm({pos:o,x1:e,y1:r,x2:a,y2:s}),[m,p]=Zm({pos:l,x1:a,y1:s,x2:e,y2:r}),[x,g,v,w]=zg({sourceX:e,sourceY:r,targetX:a,targetY:s,sourceControlX:c,sourceControlY:f,targetControlX:m,targetControlY:p});return[`M${e},${r} C${c},${f} ${m},${p} ${a},${s}`,x,g,v,w]}function my(e){return E.memo(({id:r,sourceX:o,sourceY:a,targetX:s,targetY:l,sourcePosition:c,targetPosition:f,label:m,labelStyle:p,labelShowBg:x,labelBgStyle:g,labelBgPadding:v,labelBgBorderRadius:w,style:S,markerEnd:k,markerStart:N,interactionWidth:_})=>{const[P,b,j]=py({sourceX:o,sourceY:a,sourcePosition:c,targetX:s,targetY:l,targetPosition:f}),I=e.isInternal?void 0:r;return d.jsx(Ua,{id:I,path:P,labelX:b,labelY:j,label:m,labelStyle:p,labelShowBg:x,labelBgStyle:g,labelBgPadding:v,labelBgBorderRadius:w,style:S,markerEnd:k,markerStart:N,interactionWidth:_})})}const CC=my({isInternal:!1}),gy=my({isInternal:!0});CC.displayName="SimpleBezierEdge";gy.displayName="SimpleBezierEdgeInternal";function yy(e){return E.memo(({id:r,sourceX:o,sourceY:a,targetX:s,targetY:l,label:c,labelStyle:f,labelShowBg:m,labelBgStyle:p,labelBgPadding:x,labelBgBorderRadius:g,style:v,sourcePosition:w=je.Bottom,targetPosition:S=je.Top,markerEnd:k,markerStart:N,pathOptions:_,interactionWidth:P})=>{const[b,j,I]=kl({sourceX:o,sourceY:a,sourcePosition:w,targetX:s,targetY:l,targetPosition:S,borderRadius:_?.borderRadius,offset:_?.offset,stepPosition:_?.stepPosition}),D=e.isInternal?void 0:r;return d.jsx(Ua,{id:D,path:b,labelX:j,labelY:I,label:c,labelStyle:f,labelShowBg:m,labelBgStyle:p,labelBgPadding:x,labelBgBorderRadius:g,style:v,markerEnd:k,markerStart:N,interactionWidth:P})})}const xy=yy({isInternal:!1}),vy=yy({isInternal:!0});xy.displayName="SmoothStepEdge";vy.displayName="SmoothStepEdgeInternal";function wy(e){return E.memo(({id:r,...o})=>{const a=e.isInternal?void 0:r;return d.jsx(xy,{...o,id:a,pathOptions:E.useMemo(()=>({borderRadius:0,offset:o.pathOptions?.offset}),[o.pathOptions?.offset])})})}const kC=wy({isInternal:!1}),by=wy({isInternal:!0});kC.displayName="StepEdge";by.displayName="StepEdgeInternal";function _y(e){return E.memo(({id:r,sourceX:o,sourceY:a,targetX:s,targetY:l,label:c,labelStyle:f,labelShowBg:m,labelBgStyle:p,labelBgPadding:x,labelBgBorderRadius:g,style:v,markerEnd:w,markerStart:S,interactionWidth:k})=>{const[N,_,P]=Ag({sourceX:o,sourceY:a,targetX:s,targetY:l}),b=e.isInternal?void 0:r;return d.jsx(Ua,{id:b,path:N,labelX:_,labelY:P,label:c,labelStyle:f,labelShowBg:m,labelBgStyle:p,labelBgPadding:x,labelBgBorderRadius:g,style:v,markerEnd:w,markerStart:S,interactionWidth:k})})}const jC=_y({isInternal:!1}),Sy=_y({isInternal:!0});jC.displayName="StraightEdge";Sy.displayName="StraightEdgeInternal";function Ny(e){return E.memo(({id:r,sourceX:o,sourceY:a,targetX:s,targetY:l,sourcePosition:c=je.Bottom,targetPosition:f=je.Top,label:m,labelStyle:p,labelShowBg:x,labelBgStyle:g,labelBgPadding:v,labelBgBorderRadius:w,style:S,markerEnd:k,markerStart:N,pathOptions:_,interactionWidth:P})=>{const[b,j,I]=Ig({sourceX:o,sourceY:a,sourcePosition:c,targetX:s,targetY:l,targetPosition:f,curvature:_?.curvature}),D=e.isInternal?void 0:r;return d.jsx(Ua,{id:D,path:b,labelX:j,labelY:I,label:m,labelStyle:p,labelShowBg:x,labelBgStyle:g,labelBgPadding:v,labelBgBorderRadius:w,style:S,markerEnd:k,markerStart:N,interactionWidth:P})})}const PC=Ny({isInternal:!1}),Ey=Ny({isInternal:!0});PC.displayName="BezierEdge";Ey.displayName="BezierEdgeInternal";const Qm={default:Ey,straight:Sy,step:by,smoothstep:vy,simplebezier:gy},qm={sourceX:null,sourceY:null,targetX:null,targetY:null,sourcePosition:null,targetPosition:null},RC=(e,r,o)=>o===je.Left?e-r:o===je.Right?e+r:e,MC=(e,r,o)=>o===je.Top?e-r:o===je.Bottom?e+r:e,Jm="react-flow__edgeupdater";function e0({position:e,centerX:r,centerY:o,radius:a=10,onMouseDown:s,onMouseEnter:l,onMouseOut:c,type:f}){return d.jsx("circle",{onMouseDown:s,onMouseEnter:l,onMouseOut:c,className:gt([Jm,`${Jm}-${f}`]),cx:RC(r,a,e),cy:MC(o,a,e),r:a,stroke:"transparent",fill:"transparent"})}function TC({isReconnectable:e,reconnectRadius:r,edge:o,sourceX:a,sourceY:s,targetX:l,targetY:c,sourcePosition:f,targetPosition:m,onReconnect:p,onReconnectStart:x,onReconnectEnd:g,setReconnecting:v,setUpdateHover:w}){const S=ot(),k=(j,I)=>{if(j.button!==0)return;const{autoPanOnConnect:D,domNode:R,isValidConnection:A,connectionMode:K,connectionRadius:F,lib:V,onConnectStart:H,onConnectEnd:W,cancelConnection:M,nodeLookup:L,rfId:X,panBy:Q,updateConnection:z}=S.getState(),G=I.type==="target",U=(oe,re)=>{v(!1),g?.(oe,o,I.type,re)},T=oe=>p?.(o,oe),B=(oe,re)=>{v(!0),x?.(j,o,I.type),H?.(oe,re)};sd.onPointerDown(j.nativeEvent,{autoPanOnConnect:D,connectionMode:K,connectionRadius:F,domNode:R,handleId:I.id,nodeId:I.nodeId,nodeLookup:L,isTarget:G,edgeUpdaterType:I.type,lib:V,flowId:X,cancelConnection:M,panBy:Q,isValidConnection:A,onConnect:T,onConnectStart:B,onConnectEnd:W,onReconnectEnd:U,updateConnection:z,getTransform:()=>S.getState().transform,getFromHandle:()=>S.getState().connection.fromHandle,dragThreshold:S.getState().connectionDragThreshold,handleDomNode:j.currentTarget})},N=j=>k(j,{nodeId:o.target,id:o.targetHandle??null,type:"target"}),_=j=>k(j,{nodeId:o.source,id:o.sourceHandle??null,type:"source"}),P=()=>w(!0),b=()=>w(!1);return d.jsxs(d.Fragment,{children:[(e===!0||e==="source")&&d.jsx(e0,{position:f,centerX:a,centerY:s,radius:r,onMouseDown:N,onMouseEnter:P,onMouseOut:b,type:"source"}),(e===!0||e==="target")&&d.jsx(e0,{position:m,centerX:l,centerY:c,radius:r,onMouseDown:_,onMouseEnter:P,onMouseOut:b,type:"target"})]})}function DC({id:e,edgesFocusable:r,edgesReconnectable:o,elementsSelectable:a,onClick:s,onDoubleClick:l,onContextMenu:c,onMouseEnter:f,onMouseMove:m,onMouseLeave:p,reconnectRadius:x,onReconnect:g,onReconnectStart:v,onReconnectEnd:w,rfId:S,edgeTypes:k,noPanClassName:N,onError:_,disableKeyboardA11y:P}){let b=Ve(ye=>ye.edgeLookup.get(e));const j=Ve(ye=>ye.defaultEdgeOptions);b=j?{...j,...b}:b;let I=b.type||"default",D=k?.[I]||Qm[I];D===void 0&&(_?.("011",Jn.error011(I)),I="default",D=k?.default||Qm.default);const R=!!(b.focusable||r&&typeof b.focusable>"u"),A=typeof g<"u"&&(b.reconnectable||o&&typeof b.reconnectable>"u"),K=!!(b.selectable||a&&typeof b.selectable>"u"),F=E.useRef(null),[V,H]=E.useState(!1),[W,M]=E.useState(!1),L=ot(),{zIndex:X,sourceX:Q,sourceY:z,targetX:G,targetY:U,sourcePosition:T,targetPosition:B}=Ve(E.useCallback(ye=>{const Pe=ye.nodeLookup.get(b.source),Be=ye.nodeLookup.get(b.target);if(!Pe||!Be)return{zIndex:b.zIndex,...qm};const Ze=NN({id:e,sourceNode:Pe,targetNode:Be,sourceHandle:b.sourceHandle||null,targetHandle:b.targetHandle||null,connectionMode:ye.connectionMode,onError:_});return{zIndex:yN({selected:b.selected,zIndex:b.zIndex,sourceNode:Pe,targetNode:Be,elevateOnSelect:ye.elevateEdgesOnSelect,zIndexMode:ye.zIndexMode}),...Ze||qm}},[b.source,b.target,b.sourceHandle,b.targetHandle,b.selected,b.zIndex]),rt),oe=E.useMemo(()=>b.markerStart?`url('#${id(b.markerStart,S)}')`:void 0,[b.markerStart,S]),re=E.useMemo(()=>b.markerEnd?`url('#${id(b.markerEnd,S)}')`:void 0,[b.markerEnd,S]);if(b.hidden||Q===null||z===null||G===null||U===null)return null;const ce=ye=>{const{addSelectedEdges:Pe,unselectNodesAndEdges:Be,multiSelectionActive:Ze}=L.getState();K&&(L.setState({nodesSelectionActive:!1}),b.selected&&Ze?(Be({nodes:[],edges:[b]}),F.current?.blur()):Pe([e])),s&&s(ye,b)},me=l?ye=>{l(ye,{...b})}:void 0,he=c?ye=>{c(ye,{...b})}:void 0,ie=f?ye=>{f(ye,{...b})}:void 0,pe=m?ye=>{m(ye,{...b})}:void 0,De=p?ye=>{p(ye,{...b})}:void 0,ze=ye=>{if(!P&&bg.includes(ye.key)&&K){const{unselectNodesAndEdges:Pe,addSelectedEdges:Be}=L.getState();ye.key==="Escape"?(F.current?.blur(),Pe({edges:[b]})):Be([e])}};return d.jsx("svg",{style:{zIndex:X},children:d.jsxs("g",{className:gt(["react-flow__edge",`react-flow__edge-${I}`,b.className,N,{selected:b.selected,animated:b.animated,inactive:!K&&!s,updating:V,selectable:K}]),onClick:ce,onDoubleClick:me,onContextMenu:he,onMouseEnter:ie,onMouseMove:pe,onMouseLeave:De,onKeyDown:R?ze:void 0,tabIndex:R?0:void 0,role:b.ariaRole??(R?"group":"img"),"aria-roledescription":"edge","data-id":e,"data-testid":`rf__edge-${e}`,"aria-label":b.ariaLabel===null?void 0:b.ariaLabel||`Edge from ${b.source} to ${b.target}`,"aria-describedby":R?`${ey}-${S}`:void 0,ref:F,...b.domAttributes,children:[!W&&d.jsx(D,{id:e,source:b.source,target:b.target,type:b.type,selected:b.selected,animated:b.animated,selectable:K,deletable:b.deletable??!0,label:b.label,labelStyle:b.labelStyle,labelShowBg:b.labelShowBg,labelBgStyle:b.labelBgStyle,labelBgPadding:b.labelBgPadding,labelBgBorderRadius:b.labelBgBorderRadius,sourceX:Q,sourceY:z,targetX:G,targetY:U,sourcePosition:T,targetPosition:B,data:b.data,style:b.style,sourceHandleId:b.sourceHandle,targetHandleId:b.targetHandle,markerStart:oe,markerEnd:re,pathOptions:"pathOptions"in b?b.pathOptions:void 0,interactionWidth:b.interactionWidth}),A&&d.jsx(TC,{edge:b,isReconnectable:A,reconnectRadius:x,onReconnect:g,onReconnectStart:v,onReconnectEnd:w,sourceX:Q,sourceY:z,targetX:G,targetY:U,sourcePosition:T,targetPosition:B,setUpdateHover:H,setReconnecting:M})]})})}var LC=E.memo(DC);const zC=e=>({edgesFocusable:e.edgesFocusable,edgesReconnectable:e.edgesReconnectable,elementsSelectable:e.elementsSelectable,connectionMode:e.connectionMode,onError:e.onError});function Cy({defaultMarkerColor:e,onlyRenderVisibleElements:r,rfId:o,edgeTypes:a,noPanClassName:s,onReconnect:l,onEdgeContextMenu:c,onEdgeMouseEnter:f,onEdgeMouseMove:m,onEdgeMouseLeave:p,onEdgeClick:x,reconnectRadius:g,onEdgeDoubleClick:v,onReconnectStart:w,onReconnectEnd:S,disableKeyboardA11y:k}){const{edgesFocusable:N,edgesReconnectable:_,elementsSelectable:P,onError:b}=Ve(zC,rt),j=vC(r);return d.jsxs("div",{className:"react-flow__edges",children:[d.jsx(NC,{defaultColor:e,rfId:o}),j.map(I=>d.jsx(LC,{id:I,edgesFocusable:N,edgesReconnectable:_,elementsSelectable:P,noPanClassName:s,onReconnect:l,onContextMenu:c,onMouseEnter:f,onMouseMove:m,onMouseLeave:p,onClick:x,reconnectRadius:g,onDoubleClick:v,onReconnectStart:w,onReconnectEnd:S,rfId:o,onError:b,edgeTypes:a,disableKeyboardA11y:k},I))]})}Cy.displayName="EdgeRenderer";const IC=E.memo(Cy),$C=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function FC({children:e}){const r=Ve($C);return d.jsx("div",{className:"react-flow__viewport xyflow__viewport react-flow__container",style:{transform:r},children:e})}function AC(e){const r=Ad(),o=E.useRef(!1);E.useEffect(()=>{!o.current&&r.viewportInitialized&&e&&(setTimeout(()=>e(r),1),o.current=!0)},[e,r.viewportInitialized])}const OC=e=>e.panZoom?.syncViewport;function HC(e){const r=Ve(OC),o=ot();return E.useEffect(()=>{e&&(r?.(e),o.setState({transform:[e.x,e.y,e.zoom]}))},[e,r]),null}function BC(e){return e.connection.inProgress?{...e.connection,to:Va(e.connection.to,e.transform)}:{...e.connection}}function VC(e){return BC}function UC(e){const r=VC();return Ve(r,rt)}const WC=e=>({nodesConnectable:e.nodesConnectable,isValid:e.connection.isValid,inProgress:e.connection.inProgress,width:e.width,height:e.height});function XC({containerStyle:e,style:r,type:o,component:a}){const{nodesConnectable:s,width:l,height:c,isValid:f,inProgress:m}=Ve(WC,rt);return!(l&&s&&m)?null:d.jsx("svg",{style:e,width:l,height:c,className:"react-flow__connectionline react-flow__container",children:d.jsx("g",{className:gt(["react-flow__connection",Ng(f)]),children:d.jsx(ky,{style:r,type:o,CustomComponent:a,isValid:f})})})}const ky=({style:e,type:r=Qr.Bezier,CustomComponent:o,isValid:a})=>{const{inProgress:s,from:l,fromNode:c,fromHandle:f,fromPosition:m,to:p,toNode:x,toHandle:g,toPosition:v,pointer:w}=UC();if(!s)return;if(o)return d.jsx(o,{connectionLineType:r,connectionLineStyle:e,fromNode:c,fromHandle:f,fromX:l.x,fromY:l.y,toX:p.x,toY:p.y,fromPosition:m,toPosition:v,connectionStatus:Ng(a),toNode:x,toHandle:g,pointer:w});let S="";const k={sourceX:l.x,sourceY:l.y,sourcePosition:m,targetX:p.x,targetY:p.y,targetPosition:v};switch(r){case Qr.Bezier:[S]=Ig(k);break;case Qr.SimpleBezier:[S]=py(k);break;case Qr.Step:[S]=kl({...k,borderRadius:0});break;case Qr.SmoothStep:[S]=kl(k);break;default:[S]=Ag(k)}return d.jsx("path",{d:S,fill:"none",className:"react-flow__connection-path",style:e})};ky.displayName="ConnectionLine";const YC={};function t0(e=YC){E.useRef(e),ot(),E.useEffect(()=>{},[e])}function GC(){ot(),E.useRef(!1),E.useEffect(()=>{},[])}function jy({nodeTypes:e,edgeTypes:r,onInit:o,onNodeClick:a,onEdgeClick:s,onNodeDoubleClick:l,onEdgeDoubleClick:c,onNodeMouseEnter:f,onNodeMouseMove:m,onNodeMouseLeave:p,onNodeContextMenu:x,onSelectionContextMenu:g,onSelectionStart:v,onSelectionEnd:w,connectionLineType:S,connectionLineStyle:k,connectionLineComponent:N,connectionLineContainerStyle:_,selectionKeyCode:P,selectionOnDrag:b,selectionMode:j,multiSelectionKeyCode:I,panActivationKeyCode:D,zoomActivationKeyCode:R,deleteKeyCode:A,onlyRenderVisibleElements:K,elementsSelectable:F,defaultViewport:V,translateExtent:H,minZoom:W,maxZoom:M,preventScrolling:L,defaultMarkerColor:X,zoomOnScroll:Q,zoomOnPinch:z,panOnScroll:G,panOnScrollSpeed:U,panOnScrollMode:T,zoomOnDoubleClick:B,panOnDrag:oe,onPaneClick:re,onPaneMouseEnter:ce,onPaneMouseMove:me,onPaneMouseLeave:he,onPaneScroll:ie,onPaneContextMenu:pe,paneClickDistance:De,nodeClickDistance:ze,onEdgeContextMenu:ye,onEdgeMouseEnter:Pe,onEdgeMouseMove:Be,onEdgeMouseLeave:Ze,reconnectRadius:Oe,onReconnect:ut,onReconnectStart:Qt,onReconnectEnd:Pt,noDragClassName:zt,noWheelClassName:At,noPanClassName:Sn,disableKeyboardA11y:An,nodeExtent:Ot,rfId:qt,viewport:ln,onViewportChange:Jt}){return t0(e),t0(r),GC(),AC(o),HC(ln),d.jsx(uC,{onPaneClick:re,onPaneMouseEnter:ce,onPaneMouseMove:me,onPaneMouseLeave:he,onPaneContextMenu:pe,onPaneScroll:ie,paneClickDistance:De,deleteKeyCode:A,selectionKeyCode:P,selectionOnDrag:b,selectionMode:j,onSelectionStart:v,onSelectionEnd:w,multiSelectionKeyCode:I,panActivationKeyCode:D,zoomActivationKeyCode:R,elementsSelectable:F,zoomOnScroll:Q,zoomOnPinch:z,zoomOnDoubleClick:B,panOnScroll:G,panOnScrollSpeed:U,panOnScrollMode:T,panOnDrag:oe,defaultViewport:V,translateExtent:H,minZoom:W,maxZoom:M,onSelectionContextMenu:g,preventScrolling:L,noDragClassName:zt,noWheelClassName:At,noPanClassName:Sn,disableKeyboardA11y:An,onViewportChange:Jt,isControlledViewport:!!ln,children:d.jsxs(FC,{children:[d.jsx(IC,{edgeTypes:r,onEdgeClick:s,onEdgeDoubleClick:c,onReconnect:ut,onReconnectStart:Qt,onReconnectEnd:Pt,onlyRenderVisibleElements:K,onEdgeContextMenu:ye,onEdgeMouseEnter:Pe,onEdgeMouseMove:Be,onEdgeMouseLeave:Ze,reconnectRadius:Oe,defaultMarkerColor:X,noPanClassName:Sn,disableKeyboardA11y:An,rfId:qt}),d.jsx(XC,{style:k,type:S,component:N,containerStyle:_}),d.jsx("div",{className:"react-flow__edgelabel-renderer"}),d.jsx(xC,{nodeTypes:e,onNodeClick:a,onNodeDoubleClick:l,onNodeMouseEnter:f,onNodeMouseMove:m,onNodeMouseLeave:p,onNodeContextMenu:x,nodeClickDistance:ze,onlyRenderVisibleElements:K,noPanClassName:Sn,noDragClassName:zt,disableKeyboardA11y:An,nodeExtent:Ot,rfId:qt}),d.jsx("div",{className:"react-flow__viewport-portal"})]})})}jy.displayName="GraphView";const KC=E.memo(jy),n0=({nodes:e,edges:r,defaultNodes:o,defaultEdges:a,width:s,height:l,fitView:c,fitViewOptions:f,minZoom:m=.5,maxZoom:p=2,nodeOrigin:x,nodeExtent:g,zIndexMode:v="basic"}={})=>{const w=new Map,S=new Map,k=new Map,N=new Map,_=a??r??[],P=o??e??[],b=x??[0,0],j=g??Ca;Bg(k,N,_);const I=ad(P,w,S,{nodeOrigin:b,nodeExtent:j,zIndexMode:v});let D=[0,0,1];if(c&&s&&l){const R=Ha(w,{filter:V=>!!((V.width||V.initialWidth)&&(V.height||V.initialHeight))}),{x:A,y:K,zoom:F}=Td(R,s,l,m,p,f?.padding??.1);D=[A,K,F]}return{rfId:"1",width:s??0,height:l??0,transform:D,nodes:P,nodesInitialized:I,nodeLookup:w,parentLookup:S,edges:_,edgeLookup:N,connectionLookup:k,onNodesChange:null,onEdgesChange:null,hasDefaultNodes:o!==void 0,hasDefaultEdges:a!==void 0,panZoom:null,minZoom:m,maxZoom:p,translateExtent:Ca,nodeExtent:j,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionMode:bi.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:b,nodeDragThreshold:1,connectionDragThreshold:1,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesReconnectable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,elevateEdgesOnSelect:!0,selectNodesOnDrag:!0,multiSelectionActive:!1,fitViewQueued:c??!1,fitViewOptions:f,fitViewResolver:null,connection:{...Sg},connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,autoPanOnNodeFocus:!0,autoPanSpeed:15,connectionRadius:20,onError:dN,isValidConnection:void 0,onSelectionChangeHandlers:[],lib:"react",debug:!1,ariaLabelConfig:_g,zIndexMode:v,onNodesChangeMiddlewareMap:new Map,onEdgesChangeMiddlewareMap:new Map}},ZC=({nodes:e,edges:r,defaultNodes:o,defaultEdges:a,width:s,height:l,fitView:c,fitViewOptions:f,minZoom:m,maxZoom:p,nodeOrigin:x,nodeExtent:g,zIndexMode:v})=>pE((w,S)=>{async function k(){const{nodeLookup:N,panZoom:_,fitViewOptions:P,fitViewResolver:b,width:j,height:I,minZoom:D,maxZoom:R}=S();_&&(await uN({nodes:N,width:j,height:I,panZoom:_,minZoom:D,maxZoom:R},P),b?.resolve(!0),w({fitViewResolver:null}))}return{...n0({nodes:e,edges:r,width:s,height:l,fitView:c,fitViewOptions:f,minZoom:m,maxZoom:p,nodeOrigin:x,nodeExtent:g,defaultNodes:o,defaultEdges:a,zIndexMode:v}),setNodes:N=>{const{nodeLookup:_,parentLookup:P,nodeOrigin:b,elevateNodesOnSelect:j,fitViewQueued:I,zIndexMode:D}=S(),R=ad(N,_,P,{nodeOrigin:b,nodeExtent:g,elevateNodesOnSelect:j,checkEquality:!0,zIndexMode:D});I&&R?(k(),w({nodes:N,nodesInitialized:R,fitViewQueued:!1,fitViewOptions:void 0})):w({nodes:N,nodesInitialized:R})},setEdges:N=>{const{connectionLookup:_,edgeLookup:P}=S();Bg(_,P,N),w({edges:N})},setDefaultNodesAndEdges:(N,_)=>{if(N){const{setNodes:P}=S();P(N),w({hasDefaultNodes:!0})}if(_){const{setEdges:P}=S();P(_),w({hasDefaultEdges:!0})}},updateNodeInternals:N=>{const{triggerNodeChanges:_,nodeLookup:P,parentLookup:b,domNode:j,nodeOrigin:I,nodeExtent:D,debug:R,fitViewQueued:A,zIndexMode:K}=S(),{changes:F,updatedInternals:V}=TN(N,P,b,j,I,D,K);V&&(jN(P,b,{nodeOrigin:I,nodeExtent:D,zIndexMode:K}),A?(k(),w({fitViewQueued:!1,fitViewOptions:void 0})):w({}),F?.length>0&&(R&&console.log("React Flow: trigger node changes",F),_?.(F)))},updateNodePositions:(N,_=!1)=>{const P=[];let b=[];const{nodeLookup:j,triggerNodeChanges:I,connection:D,updateConnection:R,onNodesChangeMiddlewareMap:A}=S();for(const[K,F]of N){const V=j.get(K),H=!!(V?.expandParent&&V?.parentId&&F?.position),W={id:K,type:"position",position:H?{x:Math.max(0,F.position.x),y:Math.max(0,F.position.y)}:F.position,dragging:_};if(V&&D.inProgress&&D.fromNode.id===V.id){const M=Lo(V,D.fromHandle,je.Left,!0);R({...D,from:M})}H&&V.parentId&&P.push({id:K,parentId:V.parentId,rect:{...F.internals.positionAbsolute,width:F.measured.width??0,height:F.measured.height??0}}),b.push(W)}if(P.length>0){const{parentLookup:K,nodeOrigin:F}=S(),V=Fd(P,j,K,F);b.push(...V)}for(const K of A.values())b=K(b);I(b)},triggerNodeChanges:N=>{const{onNodesChange:_,setNodes:P,nodes:b,hasDefaultNodes:j,debug:I}=S();if(N?.length){if(j){const D=ry(N,b);P(D)}I&&console.log("React Flow: trigger node changes",N),_?.(N)}},triggerEdgeChanges:N=>{const{onEdgesChange:_,setEdges:P,edges:b,hasDefaultEdges:j,debug:I}=S();if(N?.length){if(j){const D=oy(N,b);P(D)}I&&console.log("React Flow: trigger edge changes",N),_?.(N)}},addSelectedNodes:N=>{const{multiSelectionActive:_,edgeLookup:P,nodeLookup:b,triggerNodeChanges:j,triggerEdgeChanges:I}=S();if(_){const D=N.map(R=>No(R,!0));j(D);return}j(mi(b,new Set([...N]),!0)),I(mi(P))},addSelectedEdges:N=>{const{multiSelectionActive:_,edgeLookup:P,nodeLookup:b,triggerNodeChanges:j,triggerEdgeChanges:I}=S();if(_){const D=N.map(R=>No(R,!0));I(D);return}I(mi(P,new Set([...N]))),j(mi(b,new Set,!0))},unselectNodesAndEdges:({nodes:N,edges:_}={})=>{const{edges:P,nodes:b,nodeLookup:j,triggerNodeChanges:I,triggerEdgeChanges:D}=S(),R=N||b,A=_||P,K=R.map(V=>{const H=j.get(V.id);return H&&(H.selected=!1),No(V.id,!1)}),F=A.map(V=>No(V.id,!1));I(K),D(F)},setMinZoom:N=>{const{panZoom:_,maxZoom:P}=S();_?.setScaleExtent([N,P]),w({minZoom:N})},setMaxZoom:N=>{const{panZoom:_,minZoom:P}=S();_?.setScaleExtent([P,N]),w({maxZoom:N})},setTranslateExtent:N=>{S().panZoom?.setTranslateExtent(N),w({translateExtent:N})},resetSelectedElements:()=>{const{edges:N,nodes:_,triggerNodeChanges:P,triggerEdgeChanges:b,elementsSelectable:j}=S();if(!j)return;const I=_.reduce((R,A)=>A.selected?[...R,No(A.id,!1)]:R,[]),D=N.reduce((R,A)=>A.selected?[...R,No(A.id,!1)]:R,[]);P(I),b(D)},setNodeExtent:N=>{const{nodes:_,nodeLookup:P,parentLookup:b,nodeOrigin:j,elevateNodesOnSelect:I,nodeExtent:D,zIndexMode:R}=S();N[0][0]===D[0][0]&&N[0][1]===D[0][1]&&N[1][0]===D[1][0]&&N[1][1]===D[1][1]||(ad(_,P,b,{nodeOrigin:j,nodeExtent:N,elevateNodesOnSelect:I,checkEquality:!1,zIndexMode:R}),w({nodeExtent:N}))},panBy:N=>{const{transform:_,width:P,height:b,panZoom:j,translateExtent:I}=S();return DN({delta:N,panZoom:j,transform:_,translateExtent:I,width:P,height:b})},setCenter:async(N,_,P)=>{const{width:b,height:j,maxZoom:I,panZoom:D}=S();if(!D)return Promise.resolve(!1);const R=typeof P?.zoom<"u"?P.zoom:I;return await D.setViewport({x:b/2-N*R,y:j/2-_*R,zoom:R},{duration:P?.duration,ease:P?.ease,interpolate:P?.interpolate}),Promise.resolve(!0)},cancelConnection:()=>{w({connection:{...Sg}})},updateConnection:N=>{w({connection:N})},reset:()=>w({...n0()})}},Object.is);function QC({initialNodes:e,initialEdges:r,defaultNodes:o,defaultEdges:a,initialWidth:s,initialHeight:l,initialMinZoom:c,initialMaxZoom:f,initialFitViewOptions:m,fitView:p,nodeOrigin:x,nodeExtent:g,zIndexMode:v,children:w}){const[S]=E.useState(()=>ZC({nodes:e,edges:r,defaultNodes:o,defaultEdges:a,width:s,height:l,fitView:p,minZoom:c,maxZoom:f,fitViewOptions:m,nodeOrigin:x,nodeExtent:g,zIndexMode:v}));return d.jsx(mE,{value:S,children:d.jsx(FE,{children:w})})}function qC({children:e,nodes:r,edges:o,defaultNodes:a,defaultEdges:s,width:l,height:c,fitView:f,fitViewOptions:m,minZoom:p,maxZoom:x,nodeOrigin:g,nodeExtent:v,zIndexMode:w}){return E.useContext(Ol)?d.jsx(d.Fragment,{children:e}):d.jsx(QC,{initialNodes:r,initialEdges:o,defaultNodes:a,defaultEdges:s,initialWidth:l,initialHeight:c,fitView:f,initialFitViewOptions:m,initialMinZoom:p,initialMaxZoom:x,nodeOrigin:g,nodeExtent:v,zIndexMode:w,children:e})}const JC={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0};function ek({nodes:e,edges:r,defaultNodes:o,defaultEdges:a,className:s,nodeTypes:l,edgeTypes:c,onNodeClick:f,onEdgeClick:m,onInit:p,onMove:x,onMoveStart:g,onMoveEnd:v,onConnect:w,onConnectStart:S,onConnectEnd:k,onClickConnectStart:N,onClickConnectEnd:_,onNodeMouseEnter:P,onNodeMouseMove:b,onNodeMouseLeave:j,onNodeContextMenu:I,onNodeDoubleClick:D,onNodeDragStart:R,onNodeDrag:A,onNodeDragStop:K,onNodesDelete:F,onEdgesDelete:V,onDelete:H,onSelectionChange:W,onSelectionDragStart:M,onSelectionDrag:L,onSelectionDragStop:X,onSelectionContextMenu:Q,onSelectionStart:z,onSelectionEnd:G,onBeforeDelete:U,connectionMode:T,connectionLineType:B=Qr.Bezier,connectionLineStyle:oe,connectionLineComponent:re,connectionLineContainerStyle:ce,deleteKeyCode:me="Backspace",selectionKeyCode:he="Shift",selectionOnDrag:ie=!1,selectionMode:pe=ka.Full,panActivationKeyCode:De="Space",multiSelectionKeyCode:ze=Pa()?"Meta":"Control",zoomActivationKeyCode:ye=Pa()?"Meta":"Control",snapToGrid:Pe,snapGrid:Be,onlyRenderVisibleElements:Ze=!1,selectNodesOnDrag:Oe,nodesDraggable:ut,autoPanOnNodeFocus:Qt,nodesConnectable:Pt,nodesFocusable:zt,nodeOrigin:At=ty,edgesFocusable:Sn,edgesReconnectable:An,elementsSelectable:Ot=!0,defaultViewport:qt=jE,minZoom:ln=.5,maxZoom:Jt=2,translateExtent:Nt=Ca,preventScrolling:Ht=!0,nodeExtent:un,defaultMarkerColor:or="#b1b1b7",zoomOnScroll:oo=!0,zoomOnPinch:$o=!0,panOnScroll:Bt=!1,panOnScrollSpeed:Fo=.5,panOnScrollMode:Nr=jo.Free,zoomOnDoubleClick:Er=!0,panOnDrag:io=!0,onPaneClick:Cr,onPaneMouseEnter:On,onPaneMouseMove:Nn,onPaneMouseLeave:cn,onPaneScroll:Ao,onPaneContextMenu:ao,paneClickDistance:Oo=1,nodeClickDistance:so=0,children:ir,onReconnect:Hn,onReconnectStart:lo,onReconnectEnd:ar,onEdgeContextMenu:uo,onEdgeDoubleClick:O,onEdgeMouseEnter:q,onEdgeMouseMove:te,onEdgeMouseLeave:se,reconnectRadius:de=10,onNodesChange:Se,onEdgesChange:xe,noDragClassName:_e="nodrag",noWheelClassName:Ce="nowheel",noPanClassName:we="nopan",fitView:Re,fitViewOptions:Ee,connectOnClick:He,attributionPosition:Fe,proOptions:ct,defaultEdgeOptions:it,elevateNodesOnSelect:ht=!0,elevateEdgesOnSelect:Xe=!1,disableKeyboardA11y:Et=!1,autoPanOnConnect:Ge,autoPanOnNodeDrag:sr,autoPanSpeed:Vt,connectionRadius:It,isValidConnection:Bn,onError:lr,style:dn,id:fn,nodeDragThreshold:Ct,connectionDragThreshold:Ae,viewport:Ke,onViewportChange:Vn,width:En,height:qe,colorMode:Cn="light",debug:ur,onScroll:Un,ariaLabelConfig:Ho,zIndexMode:Wa="basic",...Vl},ki){const Bo=fn||"1",ji=TE(Cn),co=E.useCallback(Xa=>{Xa.currentTarget.scrollTo({top:0,left:0,behavior:"instant"}),Un?.(Xa)},[Un]);return d.jsx("div",{"data-testid":"rf__wrapper",...Vl,onScroll:co,style:{...dn,...JC},ref:ki,className:gt(["react-flow",s,ji]),id:fn,role:"application",children:d.jsxs(qC,{nodes:e,edges:r,width:En,height:qe,fitView:Re,fitViewOptions:Ee,minZoom:ln,maxZoom:Jt,nodeOrigin:At,nodeExtent:un,zIndexMode:Wa,children:[d.jsx(KC,{onInit:p,onNodeClick:f,onEdgeClick:m,onNodeMouseEnter:P,onNodeMouseMove:b,onNodeMouseLeave:j,onNodeContextMenu:I,onNodeDoubleClick:D,nodeTypes:l,edgeTypes:c,connectionLineType:B,connectionLineStyle:oe,connectionLineComponent:re,connectionLineContainerStyle:ce,selectionKeyCode:he,selectionOnDrag:ie,selectionMode:pe,deleteKeyCode:me,multiSelectionKeyCode:ze,panActivationKeyCode:De,zoomActivationKeyCode:ye,onlyRenderVisibleElements:Ze,defaultViewport:qt,translateExtent:Nt,minZoom:ln,maxZoom:Jt,preventScrolling:Ht,zoomOnScroll:oo,zoomOnPinch:$o,zoomOnDoubleClick:Er,panOnScroll:Bt,panOnScrollSpeed:Fo,panOnScrollMode:Nr,panOnDrag:io,onPaneClick:Cr,onPaneMouseEnter:On,onPaneMouseMove:Nn,onPaneMouseLeave:cn,onPaneScroll:Ao,onPaneContextMenu:ao,paneClickDistance:Oo,nodeClickDistance:so,onSelectionContextMenu:Q,onSelectionStart:z,onSelectionEnd:G,onReconnect:Hn,onReconnectStart:lo,onReconnectEnd:ar,onEdgeContextMenu:uo,onEdgeDoubleClick:O,onEdgeMouseEnter:q,onEdgeMouseMove:te,onEdgeMouseLeave:se,reconnectRadius:de,defaultMarkerColor:or,noDragClassName:_e,noWheelClassName:Ce,noPanClassName:we,rfId:Bo,disableKeyboardA11y:Et,nodeExtent:un,viewport:Ke,onViewportChange:Vn}),d.jsx(ME,{nodes:e,edges:r,defaultNodes:o,defaultEdges:a,onConnect:w,onConnectStart:S,onConnectEnd:k,onClickConnectStart:N,onClickConnectEnd:_,nodesDraggable:ut,autoPanOnNodeFocus:Qt,nodesConnectable:Pt,nodesFocusable:zt,edgesFocusable:Sn,edgesReconnectable:An,elementsSelectable:Ot,elevateNodesOnSelect:ht,elevateEdgesOnSelect:Xe,minZoom:ln,maxZoom:Jt,nodeExtent:un,onNodesChange:Se,onEdgesChange:xe,snapToGrid:Pe,snapGrid:Be,connectionMode:T,translateExtent:Nt,connectOnClick:He,defaultEdgeOptions:it,fitView:Re,fitViewOptions:Ee,onNodesDelete:F,onEdgesDelete:V,onDelete:H,onNodeDragStart:R,onNodeDrag:A,onNodeDragStop:K,onSelectionDrag:L,onSelectionDragStart:M,onSelectionDragStop:X,onMove:x,onMoveStart:g,onMoveEnd:v,noPanClassName:we,nodeOrigin:At,rfId:Bo,autoPanOnConnect:Ge,autoPanOnNodeDrag:sr,autoPanSpeed:Vt,onError:lr,connectionRadius:It,isValidConnection:Bn,selectNodesOnDrag:Oe,nodeDragThreshold:Ct,connectionDragThreshold:Ae,onBeforeDelete:U,debug:ur,ariaLabelConfig:Ho,zIndexMode:Wa}),d.jsx(kE,{onSelectionChange:W}),ir,d.jsx(_E,{proOptions:ct,position:Fe}),d.jsx(bE,{rfId:Bo,disableKeyboardA11y:Et})]})})}var tk=iy(ek);const nk=e=>e.domNode?.querySelector(".react-flow__edgelabel-renderer");function rk({children:e}){const r=Ve(nk);return r?U0.createPortal(e,r):null}function ok(e){const[r,o]=E.useState(e),a=E.useCallback(s=>o(l=>ry(s,l)),[]);return[r,o,a]}function ik(e){const[r,o]=E.useState(e),a=E.useCallback(s=>o(l=>oy(s,l)),[]);return[r,o,a]}function ak({dimensions:e,lineWidth:r,variant:o,className:a}){return d.jsx("path",{strokeWidth:r,d:`M${e[0]/2} 0 V${e[1]} M0 ${e[1]/2} H${e[0]}`,className:gt(["react-flow__background-pattern",o,a])})}function sk({radius:e,className:r}){return d.jsx("circle",{cx:e,cy:e,r:e,className:gt(["react-flow__background-pattern","dots",r])})}var br;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(br||(br={}));const lk={[br.Dots]:1,[br.Lines]:1,[br.Cross]:6},uk=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function Py({id:e,variant:r=br.Dots,gap:o=20,size:a,lineWidth:s=1,offset:l=0,color:c,bgColor:f,style:m,className:p,patternClassName:x}){const g=E.useRef(null),{transform:v,patternId:w}=Ve(uk,rt),S=a||lk[r],k=r===br.Dots,N=r===br.Cross,_=Array.isArray(o)?o:[o,o],P=[_[0]*v[2]||1,_[1]*v[2]||1],b=S*v[2],j=Array.isArray(l)?l:[l,l],I=N?[b,b]:P,D=[j[0]*v[2]||1+I[0]/2,j[1]*v[2]||1+I[1]/2],R=`${w}${e||""}`;return d.jsxs("svg",{className:gt(["react-flow__background",p]),style:{...m,...Bl,"--xy-background-color-props":f,"--xy-background-pattern-color-props":c},ref:g,"data-testid":"rf__background",children:[d.jsx("pattern",{id:R,x:v[0]%P[0],y:v[1]%P[1],width:P[0],height:P[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${D[0]},-${D[1]})`,children:k?d.jsx(sk,{radius:b/2,className:x}):d.jsx(ak,{dimensions:I,lineWidth:s,variant:r,className:x})}),d.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${R})`})]})}Py.displayName="Background";const ck=E.memo(Py);function dk(){return d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:d.jsx("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function fk(){return d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:d.jsx("path",{d:"M0 0h32v4.2H0z"})})}function hk(){return d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:d.jsx("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function pk(){return d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:d.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function mk(){return d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:d.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}function sl({children:e,className:r,...o}){return d.jsx("button",{type:"button",className:gt(["react-flow__controls-button",r]),...o,children:e})}const gk=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom,ariaLabelConfig:e.ariaLabelConfig});function Ry({style:e,showZoom:r=!0,showFitView:o=!0,showInteractive:a=!0,fitViewOptions:s,onZoomIn:l,onZoomOut:c,onFitView:f,onInteractiveChange:m,className:p,children:x,position:g="bottom-left",orientation:v="vertical","aria-label":w}){const S=ot(),{isInteractive:k,minZoomReached:N,maxZoomReached:_,ariaLabelConfig:P}=Ve(gk,rt),{zoomIn:b,zoomOut:j,fitView:I}=Ad(),D=()=>{b(),l?.()},R=()=>{j(),c?.()},A=()=>{I(s),f?.()},K=()=>{S.setState({nodesDraggable:!k,nodesConnectable:!k,elementsSelectable:!k}),m?.(!k)},F=v==="horizontal"?"horizontal":"vertical";return d.jsxs(Hl,{className:gt(["react-flow__controls",F,p]),position:g,style:e,"data-testid":"rf__controls","aria-label":w??P["controls.ariaLabel"],children:[r&&d.jsxs(d.Fragment,{children:[d.jsx(sl,{onClick:D,className:"react-flow__controls-zoomin",title:P["controls.zoomIn.ariaLabel"],"aria-label":P["controls.zoomIn.ariaLabel"],disabled:_,children:d.jsx(dk,{})}),d.jsx(sl,{onClick:R,className:"react-flow__controls-zoomout",title:P["controls.zoomOut.ariaLabel"],"aria-label":P["controls.zoomOut.ariaLabel"],disabled:N,children:d.jsx(fk,{})})]}),o&&d.jsx(sl,{className:"react-flow__controls-fitview",onClick:A,title:P["controls.fitView.ariaLabel"],"aria-label":P["controls.fitView.ariaLabel"],children:d.jsx(hk,{})}),a&&d.jsx(sl,{className:"react-flow__controls-interactive",onClick:K,title:P["controls.interactive.ariaLabel"],"aria-label":P["controls.interactive.ariaLabel"],children:k?d.jsx(mk,{}):d.jsx(pk,{})}),x]})}Ry.displayName="Controls";const yk=E.memo(Ry);function xk({id:e,x:r,y:o,width:a,height:s,style:l,color:c,strokeColor:f,strokeWidth:m,className:p,borderRadius:x,shapeRendering:g,selected:v,onClick:w}){const{background:S,backgroundColor:k}=l||{},N=c||S||k;return d.jsx("rect",{className:gt(["react-flow__minimap-node",{selected:v},p]),x:r,y:o,rx:x,ry:x,width:a,height:s,style:{fill:N,stroke:f,strokeWidth:m},shapeRendering:g,onClick:w?_=>w(_,e):void 0})}const vk=E.memo(xk),wk=e=>e.nodes.map(r=>r.id),Uc=e=>e instanceof Function?e:()=>e;function bk({nodeStrokeColor:e,nodeColor:r,nodeClassName:o="",nodeBorderRadius:a=5,nodeStrokeWidth:s,nodeComponent:l=vk,onClick:c}){const f=Ve(wk,rt),m=Uc(r),p=Uc(e),x=Uc(o),g=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return d.jsx(d.Fragment,{children:f.map(v=>d.jsx(Sk,{id:v,nodeColorFunc:m,nodeStrokeColorFunc:p,nodeClassNameFunc:x,nodeBorderRadius:a,nodeStrokeWidth:s,NodeComponent:l,onClick:c,shapeRendering:g},v))})}function _k({id:e,nodeColorFunc:r,nodeStrokeColorFunc:o,nodeClassNameFunc:a,nodeBorderRadius:s,nodeStrokeWidth:l,shapeRendering:c,NodeComponent:f,onClick:m}){const{node:p,x,y:g,width:v,height:w}=Ve(S=>{const{internals:k}=S.nodeLookup.get(e),N=k.userNode,{x:_,y:P}=k.positionAbsolute,{width:b,height:j}=Sr(N);return{node:N,x:_,y:P,width:b,height:j}},rt);return!p||p.hidden||!Rg(p)?null:d.jsx(f,{x,y:g,width:v,height:w,style:p.style,selected:!!p.selected,className:a(p),color:r(p),borderRadius:s,strokeColor:o(p),strokeWidth:l,shapeRendering:c,onClick:m,id:p.id})}const Sk=E.memo(_k);var Nk=E.memo(bk);const Ek=200,Ck=150,kk=e=>!e.hidden,jk=e=>{const r={x:-e.transform[0]/e.transform[2],y:-e.transform[1]/e.transform[2],width:e.width/e.transform[2],height:e.height/e.transform[2]};return{viewBB:r,boundingRect:e.nodeLookup.size>0?Pg(Ha(e.nodeLookup,{filter:kk}),r):r,rfId:e.rfId,panZoom:e.panZoom,translateExtent:e.translateExtent,flowWidth:e.width,flowHeight:e.height,ariaLabelConfig:e.ariaLabelConfig}},Pk="react-flow__minimap-desc";function My({style:e,className:r,nodeStrokeColor:o,nodeColor:a,nodeClassName:s="",nodeBorderRadius:l=5,nodeStrokeWidth:c,nodeComponent:f,bgColor:m,maskColor:p,maskStrokeColor:x,maskStrokeWidth:g,position:v="bottom-right",onClick:w,onNodeClick:S,pannable:k=!1,zoomable:N=!1,ariaLabel:_,inversePan:P,zoomStep:b=1,offsetScale:j=5}){const I=ot(),D=E.useRef(null),{boundingRect:R,viewBB:A,rfId:K,panZoom:F,translateExtent:V,flowWidth:H,flowHeight:W,ariaLabelConfig:M}=Ve(jk,rt),L=e?.width??Ek,X=e?.height??Ck,Q=R.width/L,z=R.height/X,G=Math.max(Q,z),U=G*L,T=G*X,B=j*G,oe=R.x-(U-R.width)/2-B,re=R.y-(T-R.height)/2-B,ce=U+B*2,me=T+B*2,he=`${Pk}-${K}`,ie=E.useRef(0),pe=E.useRef();ie.current=G,E.useEffect(()=>{if(D.current&&F)return pe.current=BN({domNode:D.current,panZoom:F,getTransform:()=>I.getState().transform,getViewScale:()=>ie.current}),()=>{pe.current?.destroy()}},[F]),E.useEffect(()=>{pe.current?.update({translateExtent:V,width:H,height:W,inversePan:P,pannable:k,zoomStep:b,zoomable:N})},[k,N,P,b,V,H,W]);const De=w?Pe=>{const[Be,Ze]=pe.current?.pointer(Pe)||[0,0];w(Pe,{x:Be,y:Ze})}:void 0,ze=S?E.useCallback((Pe,Be)=>{const Ze=I.getState().nodeLookup.get(Be).internals.userNode;S(Pe,Ze)},[]):void 0,ye=_??M["minimap.ariaLabel"];return d.jsx(Hl,{position:v,style:{...e,"--xy-minimap-background-color-props":typeof m=="string"?m:void 0,"--xy-minimap-mask-background-color-props":typeof p=="string"?p:void 0,"--xy-minimap-mask-stroke-color-props":typeof x=="string"?x:void 0,"--xy-minimap-mask-stroke-width-props":typeof g=="number"?g*G:void 0,"--xy-minimap-node-background-color-props":typeof a=="string"?a:void 0,"--xy-minimap-node-stroke-color-props":typeof o=="string"?o:void 0,"--xy-minimap-node-stroke-width-props":typeof c=="number"?c:void 0},className:gt(["react-flow__minimap",r]),"data-testid":"rf__minimap",children:d.jsxs("svg",{width:L,height:X,viewBox:`${oe} ${re} ${ce} ${me}`,className:"react-flow__minimap-svg",role:"img","aria-labelledby":he,ref:D,onClick:De,children:[ye&&d.jsx("title",{id:he,children:ye}),d.jsx(Nk,{onClick:ze,nodeColor:a,nodeStrokeColor:o,nodeBorderRadius:l,nodeClassName:s,nodeStrokeWidth:c,nodeComponent:f}),d.jsx("path",{className:"react-flow__minimap-mask",d:`M${oe-B},${re-B}h${ce+B*2}v${me+B*2}h${-ce-B*2}z
        M${A.x},${A.y}h${A.width}v${A.height}h${-A.width}z`,fillRule:"evenodd",pointerEvents:"none"})]})})}My.displayName="MiniMap";const Rk=E.memo(My),Mk=e=>r=>e?`${Math.max(1/r.transform[2],1)}`:void 0,Tk={[Ei.Line]:"right",[Ei.Handle]:"bottom-right"};function Dk({nodeId:e,position:r,variant:o=Ei.Handle,className:a,style:s=void 0,children:l,color:c,minWidth:f=10,minHeight:m=10,maxWidth:p=Number.MAX_VALUE,maxHeight:x=Number.MAX_VALUE,keepAspectRatio:g=!1,resizeDirection:v,autoScale:w=!0,shouldResize:S,onResizeStart:k,onResize:N,onResizeEnd:_}){const P=uy(),b=typeof e=="string"?e:P,j=ot(),I=E.useRef(null),D=o===Ei.Handle,R=Ve(E.useCallback(Mk(D&&w),[D,w]),rt),A=E.useRef(null),K=r??Tk[o];E.useEffect(()=>{if(!(!I.current||!b))return A.current||(A.current=nE({domNode:I.current,nodeId:b,getStoreItems:()=>{const{nodeLookup:V,transform:H,snapGrid:W,snapToGrid:M,nodeOrigin:L,domNode:X}=j.getState();return{nodeLookup:V,transform:H,snapGrid:W,snapToGrid:M,nodeOrigin:L,paneDomNode:X}},onChange:(V,H)=>{const{triggerNodeChanges:W,nodeLookup:M,parentLookup:L,nodeOrigin:X}=j.getState(),Q=[],z={x:V.x,y:V.y},G=M.get(b);if(G&&G.expandParent&&G.parentId){const U=G.origin??X,T=V.width??G.measured.width??0,B=V.height??G.measured.height??0,oe={id:G.id,parentId:G.parentId,rect:{width:T,height:B,...Mg({x:V.x??G.position.x,y:V.y??G.position.y},{width:T,height:B},G.parentId,M,U)}},re=Fd([oe],M,L,X);Q.push(...re),z.x=V.x?Math.max(U[0]*T,V.x):void 0,z.y=V.y?Math.max(U[1]*B,V.y):void 0}if(z.x!==void 0&&z.y!==void 0){const U={id:b,type:"position",position:{...z}};Q.push(U)}if(V.width!==void 0&&V.height!==void 0){const T={id:b,type:"dimensions",resizing:!0,setAttributes:v?v==="horizontal"?"width":"height":!0,dimensions:{width:V.width,height:V.height}};Q.push(T)}for(const U of H){const T={...U,type:"position"};Q.push(T)}W(Q)},onEnd:({width:V,height:H})=>{const W={id:b,type:"dimensions",resizing:!1,dimensions:{width:V,height:H}};j.getState().triggerNodeChanges([W])}})),A.current.update({controlPosition:K,boundaries:{minWidth:f,minHeight:m,maxWidth:p,maxHeight:x},keepAspectRatio:g,resizeDirection:v,onResizeStart:k,onResize:N,onResizeEnd:_,shouldResize:S}),()=>{A.current?.destroy()}},[K,f,m,p,x,g,k,N,_,S]);const F=K.split("-");return d.jsx("div",{className:gt(["react-flow__resize-control","nodrag",...F,o,a]),ref:I,style:{...s,scale:R,...c&&{[D?"backgroundColor":"borderColor"]:c}},children:l})}E.memo(Dk);const Ty=[{type:"inbound_number",label:"Inbound Number",description:"Entry point  one or more DIDs mapped to it",entityType:"inbound_number",outputs:1,outputHandles:[{id:"next",label:"Next"}],iconPath:"M2 3a1 1 0 011-1h2.153a1 1 0 01.986.836l.74 4.435a1 1 0 01-.54 1.06l-1.548.773a11.037 11.037 0 006.105 6.105l.774-1.548a1 1 0 011.059-.54l4.435.74a1 1 0 01.836.986V17a1 1 0 01-1 1h-2C7.82 18 2 12.18 2 5V3z",color:"emerald"},{type:"time_switch",label:"Time Switch",description:"Route calls based on day/time rules",entityType:"time_switch",outputs:"dynamic",iconPath:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z",color:"amber"},{type:"ivr_menu",label:"IVR Menu",description:"Play prompt, collect DTMF digits",entityType:"ivr_menu",outputs:"dynamic",iconPath:"M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 5a1 1 0 011-1h6a1 1 0 110 2H4a1 1 0 01-1-1z",color:"violet"},{type:"ring_group",label:"Ring Group",description:"Ring a group of extensions",entityType:"ring_group",outputs:2,outputHandles:[{id:"answered",label:"Answered"},{id:"no_answer",label:"No Answer"}],iconPath:"M13 6a3 3 0 11-6 0 3 3 0 016 0zm5 2a2 2 0 11-4 0 2 2 0 014 0zm-4 7a4 4 0 00-8 0v3h8v-3zM6 8a2 2 0 11-4 0 2 2 0 014 0zm10 10v-3a5.972 5.972 0 00-.75-2.906A3.005 3.005 0 0119 15v3h-3zM4.75 12.094A5.973 5.973 0 004 15v3H1v-3a3 3 0 013.75-2.906z",color:"blue"},{type:"extension",label:"Extension",description:"Ring a single extension",entityType:"extension",outputs:2,outputHandles:[{id:"answered",label:"Answered"},{id:"no_answer",label:"No Answer"}],iconPath:"M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z",color:"sky"},{type:"voicemail",label:"Voicemail",description:"Record voicemail into a mailbox",entityType:"voicemail_box",outputs:1,outputHandles:[{id:"after_recording",label:"After Recording"}],iconPath:"M18 10c0 3.866-3.582 7-8 7a8.841 8.841 0 01-4.083-.98L2 17l1.338-3.123C2.493 12.767 2 11.434 2 10c0-3.866 3.582-7 8-7s8 3.134 8 7z",color:"orange"},{type:"play_message",label:"Play Message",description:"Play an audio file or TTS",outputs:1,outputHandles:[{id:"after_playback",label:"After Playback"}],iconPath:"M9.383 3.076A1 1 0 0110 4v12a1 1 0 01-1.707.707L4.586 13H2a1 1 0 01-1-1V8a1 1 0 011-1h2.586l3.707-3.707a1 1 0 011.09-.217zM14.657 2.929a1 1 0 011.414 0A9.972 9.972 0 0119 10a9.972 9.972 0 01-2.929 7.071 1 1 0 01-1.414-1.414A7.971 7.971 0 0017 10c0-2.21-.894-4.208-2.343-5.657a1 1 0 010-1.414z",color:"teal"},{type:"conference",label:"Conference",description:"Join caller into a conference bridge",entityType:"conference",outputs:1,outputHandles:[{id:"after_leave",label:"After Leave"}],iconPath:"M7 4a3 3 0 016 0v4a3 3 0 11-6 0V4zm4 10.93A7.001 7.001 0 0017 8a1 1 0 10-2 0A5 5 0 015 8a1 1 0 00-2 0 7.001 7.001 0 006 6.93V17H6a1 1 0 100 2h8a1 1 0 100-2h-3v-2.07z",color:"indigo"},{type:"transfer",label:"Transfer",description:"Transfer call to external number or extension",outputs:0,iconPath:"M10.293 3.293a1 1 0 011.414 0l6 6a1 1 0 010 1.414l-6 6a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-4.293-4.293a1 1 0 010-1.414z",color:"cyan"},{type:"hangup",label:"Hangup",description:"Terminate the call",outputs:0,iconPath:"M3.707 2.293a1 1 0 00-1.414 1.414l6.921 6.922c.05.062.105.118.168.167l6.91 6.911a1 1 0 001.415-1.414l-.354-.354A8 8 0 003.707 2.293zM2 10a8 8 0 0011.953 6.953l-1.5-1.5A6 6 0 014 10a1 1 0 00-2 0zm14-1a1 1 0 10-2 0 4 4 0 01-.32 1.564l1.492 1.492A6 6 0 0016 10v-1z",color:"red"},{type:"set_caller_id",label:"Set Caller ID",description:"Override caller ID name/number",outputs:1,outputHandles:[{id:"next",label:"Next"}],iconPath:"M17.414 2.586a2 2 0 00-2.828 0L7 10.172V13h2.828l7.586-7.586a2 2 0 000-2.828z M2 6a2 2 0 012-2h4a1 1 0 010 2H4v10h10v-4a1 1 0 112 0v4a2 2 0 01-2 2H4a2 2 0 01-2-2V6z",color:"pink"}];function Hd(e){return Ty.find(r=>r.type===e)}const Ro={emerald:{bg:"bg-emerald-50",border:"border-emerald-300",text:"text-emerald-700",handle:"bg-emerald-500"},amber:{bg:"bg-amber-50",border:"border-amber-300",text:"text-amber-700",handle:"bg-amber-500"},violet:{bg:"bg-violet-50",border:"border-violet-300",text:"text-violet-700",handle:"bg-violet-500"},blue:{bg:"bg-blue-50",border:"border-blue-300",text:"text-blue-700",handle:"bg-blue-500"},sky:{bg:"bg-sky-50",border:"border-sky-300",text:"text-sky-700",handle:"bg-sky-500"},orange:{bg:"bg-orange-50",border:"border-orange-300",text:"text-orange-700",handle:"bg-orange-500"},teal:{bg:"bg-teal-50",border:"border-teal-300",text:"text-teal-700",handle:"bg-teal-500"},indigo:{bg:"bg-indigo-50",border:"border-indigo-300",text:"text-indigo-700",handle:"bg-indigo-500"},cyan:{bg:"bg-cyan-50",border:"border-cyan-300",text:"text-cyan-700",handle:"bg-cyan-500"},red:{bg:"bg-red-50",border:"border-red-300",text:"text-red-700",handle:"bg-red-500"},pink:{bg:"bg-pink-50",border:"border-pink-300",text:"text-pink-700",handle:"bg-pink-500"}};function Lk({data:e,type:r,selected:o}){const a=Hd(r??"");if(!a)return null;const s=Ro[a.color]??Ro.blue,l=e.validationIssues?.some(x=>x.severity==="error"),c=e.validationIssues?.some(x=>x.severity==="warning"),f=e.outputHandles??a.outputHandles??[],m=a.outputs===0,p=a.type==="inbound_number";return d.jsxs("div",{className:`rounded-lg border-2 shadow-sm min-w-[180px] max-w-[220px] ${s.bg} ${l?"border-red-500":c?"border-amber-500":o?"border-blue-500":s.border} transition-colors`,children:[!p&&d.jsx(Po,{type:"target",position:je.Left,id:"incoming",className:"!w-3 !h-3 !bg-gray-400 !border-2 !border-white"}),d.jsxs("div",{className:`flex items-center gap-2 px-3 py-2 ${s.text}`,children:[d.jsx("svg",{className:"w-4 h-4 shrink-0",viewBox:"0 0 20 20",fill:"currentColor",children:d.jsx("path",{fillRule:"evenodd",d:a.iconPath,clipRule:"evenodd"})}),d.jsxs("div",{className:"min-w-0 flex-1",children:[d.jsx("div",{className:"text-[11px] font-semibold uppercase tracking-wider opacity-60",children:a.label}),d.jsx("div",{className:"text-sm font-medium truncate text-gray-900",children:e.label||"Untitled"})]})]}),!m&&f.length>0&&d.jsx("div",{className:"border-t border-gray-200/60 px-3 py-1.5 space-y-1",children:f.map(x=>d.jsxs("div",{className:"relative flex items-center justify-end pr-1",children:[d.jsx("span",{className:"text-[10px] text-gray-500 mr-1",children:x.label}),d.jsx(Po,{type:"source",position:je.Right,id:x.id,className:`!w-2.5 !h-2.5 ${s.handle} !border-2 !border-white`,style:{top:"auto",position:"relative",transform:"none"}})]},x.id))}),!m&&f.length===0&&a.outputs!==0&&d.jsx(Po,{type:"source",position:je.Right,id:"next",className:`!w-3 !h-3 ${s.handle} !border-2 !border-white`}),m&&d.jsx("div",{className:"border-t border-gray-200/60 px-3 py-1 text-center",children:d.jsx("span",{className:"text-[10px] text-gray-400 uppercase tracking-wider",children:"End"})}),l&&d.jsx("div",{className:"absolute -top-2 -right-2 w-5 h-5 rounded-full bg-red-500 flex items-center justify-center",children:d.jsx("span",{className:"text-white text-[10px] font-bold",children:"!"})}),!l&&c&&d.jsx("div",{className:"absolute -top-2 -right-2 w-5 h-5 rounded-full bg-amber-500 flex items-center justify-center",children:d.jsx("span",{className:"text-white text-[10px] font-bold",children:"!"})})]})}const Dn=E.memo(Lk);function zk({id:e,sourceX:r,sourceY:o,targetX:a,targetY:s,sourcePosition:l,targetPosition:c,data:f,selected:m}){const[p,x,g]=kl({sourceX:r,sourceY:o,targetX:a,targetY:s,sourcePosition:l,targetPosition:c,borderRadius:8}),v=f?.label;return d.jsxs(d.Fragment,{children:[d.jsx(Ua,{id:e,path:p,style:{stroke:m?"#3b82f6":"#94a3b8",strokeWidth:m?2:1.5}}),v&&d.jsx(rk,{children:d.jsx("div",{className:"absolute bg-white border border-gray-200 rounded px-1.5 py-0.5 text-[10px] text-gray-600 font-medium shadow-sm pointer-events-none",style:{transform:`translate(-50%, -50%) translate(${x}px, ${g}px)`},children:v})})]})}const Ik=E.memo(zk);function $k(){function e(r,o){r.dataTransfer.setData("application/reactflow-type",o),r.dataTransfer.effectAllowed="move"}return d.jsxs("div",{className:"w-52 bg-white border-r border-gray-200 flex flex-col shrink-0",children:[d.jsx("div",{className:"px-3 py-2 border-b border-gray-200",children:d.jsx("h3",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Nodes"})}),d.jsx("div",{className:"flex-1 overflow-y-auto p-2 space-y-1",children:Ty.map(r=>{const o=Ro[r.color]??Ro.blue;return d.jsxs("div",{draggable:!0,onDragStart:a=>e(a,r.type),className:`flex items-center gap-2 px-2.5 py-2 rounded-md border ${o.border} ${o.bg} cursor-grab active:cursor-grabbing hover:shadow-sm transition-shadow select-none`,title:r.description,children:[d.jsx("svg",{className:`w-4 h-4 shrink-0 ${o.text}`,viewBox:"0 0 20 20",fill:"currentColor",children:d.jsx("path",{fillRule:"evenodd",d:r.iconPath,clipRule:"evenodd"})}),d.jsx("span",{className:"text-sm font-medium text-gray-700",children:r.label})]},r.type)})})]})}function Bd(e){return $a("/extensions",e)}function Fk(e){return nr("/extensions",e)}function Ak(e,r){return to(`/extensions/${e}`,r)}function Ok(e){return no(`/extensions/${e}`)}function Dy(e){return $a("/trunks",e)}function Hk(e){return nr("/trunks",e)}function Bk(e,r){return to(`/trunks/${e}`,r)}function Vk(e){return no(`/trunks/${e}`)}function Uk(){return tr("/trunks/status")}function Ly(e){return $a("/voicemail-boxes",e)}function Wk(e){return nr("/voicemail-boxes",e)}function Xk(e,r){return to(`/voicemail-boxes/${e}`,r)}function Yk(e){return no(`/voicemail-boxes/${e}`)}function Gk(e){return tr(`/voicemail-boxes/${e}/messages`)}function Kk(e,r){return no(`/voicemail-boxes/${e}/messages/${r}`)}function Zk(e,r){return to(`/voicemail-boxes/${e}/messages/${r}/read`)}function r0(e,r){return`/api/v1/voicemail-boxes/${e}/messages/${r}/audio`}function zy(e){return $a("/numbers",e)}function Qk(e){return nr("/numbers",e)}function qk(e,r){return to(`/numbers/${e}`,r)}function Jk(e){return no(`/numbers/${e}`)}function ej(e){return $a("/cdrs",e)}function tj(e){const r=new URL("/api/v1/cdrs/export",window.location.origin);if(e)for(const[o,a]of Object.entries(e))a!==void 0&&a!==""&&r.searchParams.set(o,String(a));return r.toString()}function nj(){return tr("/prompts")}async function rj(e,r){const o=new FormData;o.append("file",e);const a=document.cookie.split("; ").find(m=>m.startsWith("flowpbx_csrf=")),s=a?a.split("=")[1]:null,l={Accept:"application/json"};s&&(l["X-CSRF-Token"]=s);const c=await fetch("/api/v1/prompts",{method:"POST",headers:l,credentials:"same-origin",body:o});if(c.status===401)throw window.location.href="/login",new Error("authentication required");const f=await c.json();if(!c.ok||f.error)throw new Error(f.error??`upload failed with status ${c.status}`);return f.data}function oj(e){return no(`/prompts/${e}`)}function ij(e){return`/api/v1/prompts/${e}/audio`}function aj(){return tr("/settings")}function sj(e){return to("/settings",e)}function lj(){return tr("/flows")}function uj(e){return tr(`/flows/${e}`)}function cj(e){return nr("/flows",e)}function dj(e,r){return to(`/flows/${e}`,r)}function fj(e){return no(`/flows/${e}`)}function hj(e){return nr(`/flows/${e}/publish`)}function pj(e){return nr(`/flows/${e}/validate`)}function Iy(){return tr("/ring-groups")}function mj(e){return nr("/ring-groups",e)}function gj(e,r){return to(`/ring-groups/${e}`,r)}function yj(e){return no(`/ring-groups/${e}`)}const xj={extension:"Extension",voicemail_box:"Voicemail Box",inbound_number:"Inbound Number",ring_group:"Ring Group",ivr_menu:"IVR Menu",time_switch:"Time Switch",conference:"Conference"};function vj({entityType:e,selectedId:r,onSelect:o,onCreateNew:a}){const[s,l]=E.useState([]),[c,f]=E.useState(!1),[m,p]=E.useState(!1),[x,g]=E.useState(""),v=E.useRef(null);E.useEffect(()=>{w()},[e]),E.useEffect(()=>{function _(P){v.current&&!v.current.contains(P.target)&&p(!1)}return document.addEventListener("mousedown",_),()=>document.removeEventListener("mousedown",_)},[]);async function w(){f(!0);try{const _=await wj(e);l(_)}catch{l([])}finally{f(!1)}}const S=s.find(_=>_.id===r),k=s.filter(_=>_.label.toLowerCase().includes(x.toLowerCase())||_.sublabel?.toLowerCase().includes(x.toLowerCase())),N=xj[e]??e;return d.jsxs("div",{ref:v,className:"relative",children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:N}),d.jsxs("button",{type:"button",onClick:()=>p(!m),className:"w-full flex items-center justify-between rounded-md border border-gray-300 bg-white px-3 py-2 text-sm text-left focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500",children:[d.jsx("span",{className:S?"text-gray-900":"text-gray-400",children:c?"Loading...":S?S.label:`Select ${N}...`}),d.jsx("svg",{className:"w-4 h-4 text-gray-400",viewBox:"0 0 20 20",fill:"currentColor",children:d.jsx("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})})]}),m&&d.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg max-h-60 flex flex-col",children:[d.jsx("div",{className:"p-2 border-b border-gray-100",children:d.jsx("input",{type:"text",value:x,onChange:_=>g(_.target.value),placeholder:"Search...",className:"w-full text-sm rounded border border-gray-200 px-2 py-1 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500",autoFocus:!0})}),a&&d.jsxs("button",{type:"button",onClick:()=>{a(),p(!1)},className:"flex items-center gap-2 px-3 py-2 text-sm text-blue-600 hover:bg-blue-50 border-b border-gray-100",children:[d.jsx("svg",{className:"w-4 h-4",viewBox:"0 0 20 20",fill:"currentColor",children:d.jsx("path",{fillRule:"evenodd",d:"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z",clipRule:"evenodd"})}),"New ",N,"..."]}),d.jsxs("div",{className:"flex-1 overflow-y-auto",children:[d.jsx("button",{type:"button",onClick:()=>{o(null),p(!1)},className:"w-full text-left px-3 py-2 text-sm text-gray-400 hover:bg-gray-50",children:"None"}),k.map(_=>d.jsxs("button",{type:"button",onClick:()=>{o(_.id),p(!1),g("")},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${_.id===r?"bg-blue-50 text-blue-700":"text-gray-900"}`,children:[d.jsx("div",{className:"font-medium",children:_.label}),_.sublabel&&d.jsx("div",{className:"text-xs text-gray-500",children:_.sublabel})]},_.id)),k.length===0&&!c&&d.jsx("div",{className:"px-3 py-2 text-sm text-gray-400",children:"No results"})]})]})]})}async function wj(e){switch(e){case"extension":return(await Bd({limit:200})).items.map(o=>({id:o.id,label:`${o.extension} - ${o.name}`,sublabel:o.email||void 0}));case"voicemail_box":return(await Ly({limit:200})).items.map(o=>({id:o.id,label:`${o.mailbox_number} - ${o.name}`,sublabel:o.email_address||void 0}));case"inbound_number":return(await zy({limit:200})).items.map(o=>({id:o.id,label:o.number,sublabel:o.name||void 0}));case"ring_group":return(await Iy()).map(o=>({id:o.id,label:o.name,sublabel:o.strategy}));case"ivr_menu":case"time_switch":case"conference":return[];default:return[]}}const Vd="block w-full rounded-md border border-gray-300 px-3 py-2 text-sm text-gray-900 placeholder-gray-400 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500",Ud="block text-sm font-medium text-gray-700 mb-1";function Ue({label:e,id:r,...o}){return d.jsxs("div",{children:[d.jsx("label",{htmlFor:r,className:Ud,children:e}),d.jsx("input",{id:r,className:Vd,...o})]})}function wn({label:e,id:r,...o}){return d.jsxs("div",{children:[d.jsx("label",{htmlFor:r,className:Ud,children:e}),d.jsx("input",{id:r,type:"number",className:Vd,...o})]})}function Jr({label:e,id:r,children:o,...a}){return d.jsxs("div",{children:[d.jsx("label",{htmlFor:r,className:Ud,children:e}),d.jsx("select",{id:r,className:Vd,...a,children:o})]})}function Ci({label:e,checked:r,onChange:o}){return d.jsxs("label",{className:"flex items-center gap-2 text-sm text-gray-700 cursor-pointer",children:[d.jsx("button",{type:"button",role:"switch","aria-checked":r,onClick:()=>o(!r),className:`relative inline-flex h-5 w-9 shrink-0 rounded-full border-2 border-transparent transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 ${r?"bg-blue-600":"bg-gray-200"}`,children:d.jsx("span",{className:`pointer-events-none inline-block h-4 w-4 rounded-full bg-white shadow transform transition-transform ${r?"translate-x-4":"translate-x-0"}`})}),e]})}function bj({node:e,onUpdate:r,onClose:o}){const a=Hd(e.type??""),s=a?Ro[a.color]??Ro.blue:Ro.blue,l=e.data,[c,f]=E.useState(l.label??"");E.useEffect(()=>{f(e.data.label??"")},[e.id,e.data]);function m(w){f(w),r(e.id,{label:w})}function p(w){r(e.id,{entity_id:w})}function x(w,S){r(e.id,{config:{...l.config,[w]:S}})}function g(w,S){const k=l.outputHandles??[];k.some(N=>N.id===w)||r(e.id,{outputHandles:[...k,{id:w,label:S}]})}function v(w){const S=l.outputHandles??[];r(e.id,{outputHandles:S.filter(k=>k.id!==w)})}return d.jsxs("div",{className:"w-80 bg-white border-l border-gray-200 flex flex-col shrink-0",children:[d.jsxs("div",{className:`flex items-center justify-between px-4 py-3 border-b border-gray-200 ${s.bg}`,children:[d.jsxs("div",{className:"flex items-center gap-2",children:[a&&d.jsx("svg",{className:`w-4 h-4 ${s.text}`,viewBox:"0 0 20 20",fill:"currentColor",children:d.jsx("path",{fillRule:"evenodd",d:a.iconPath,clipRule:"evenodd"})}),d.jsx("h3",{className:"text-sm font-semibold text-gray-900",children:a?.label??"Node"})]}),d.jsx("button",{type:"button",onClick:o,className:"text-gray-400 hover:text-gray-600 transition-colors",children:d.jsx("svg",{className:"w-5 h-5",viewBox:"0 0 20 20",fill:"currentColor",children:d.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),d.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[d.jsx(Ue,{label:"Label",id:"node-label",value:c,onChange:w=>m(w.currentTarget.value),placeholder:"Enter label..."}),a?.entityType&&d.jsx(vj,{entityType:a.entityType,selectedId:l.entity_id??null,onSelect:p}),e.type==="transfer"&&d.jsx(Ue,{label:"Transfer To",id:"transfer-to",value:l.config?.transfer_to??"",onChange:w=>x("transfer_to",w.currentTarget.value),placeholder:"Number or extension"}),e.type==="hangup"&&d.jsx(Ue,{label:"Cause Code",id:"hangup-cause",value:l.config?.cause_code??"",onChange:w=>x("cause_code",w.currentTarget.value),placeholder:"Normal (default)"}),e.type==="set_caller_id"&&d.jsxs(d.Fragment,{children:[d.jsx(Ue,{label:"Caller ID Name",id:"cid-name",value:l.config?.caller_id_name??"",onChange:w=>x("caller_id_name",w.currentTarget.value),placeholder:"Display name"}),d.jsx(Ue,{label:"Caller ID Number",id:"cid-number",value:l.config?.caller_id_num??"",onChange:w=>x("caller_id_num",w.currentTarget.value),placeholder:"Number"})]}),e.type==="play_message"&&d.jsx(Ue,{label:"Audio Prompt",id:"prompt-file",value:l.config?.prompt??"",onChange:w=>x("prompt",w.currentTarget.value),placeholder:"Prompt filename"}),e.type==="time_switch"&&d.jsx(o0,{handles:l.outputHandles??[{id:"default",label:"Default"}],onAdd:g,onRemove:v,addLabel:"Add Time Rule",idPrefix:"rule_"}),e.type==="ivr_menu"&&d.jsx(o0,{handles:l.outputHandles??[{id:"timeout",label:"Timeout"},{id:"invalid",label:"Invalid"}],onAdd:g,onRemove:v,addLabel:"Add Digit",idPrefix:"digit_",protectedIds:["timeout","invalid"]}),l.validationIssues&&l.validationIssues.length>0&&d.jsxs("div",{className:"space-y-1",children:[d.jsx("p",{className:"text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Issues"}),l.validationIssues.map((w,S)=>d.jsx("div",{className:`text-xs px-2 py-1 rounded ${w.severity==="error"?"bg-red-50 text-red-700":"bg-amber-50 text-amber-700"}`,children:w.message},S))]})]})]})}function o0({handles:e,onAdd:r,onRemove:o,addLabel:a,idPrefix:s,protectedIds:l=[]}){const[c,f]=E.useState("");function m(){if(!c.trim())return;const p=s+c.trim().toLowerCase().replace(/[^a-z0-9]/g,"_");r(p,c.trim()),f("")}return d.jsxs("div",{className:"space-y-2",children:[d.jsx("p",{className:"text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Outputs"}),d.jsx("div",{className:"space-y-1",children:e.map(p=>d.jsxs("div",{className:"flex items-center justify-between text-sm",children:[d.jsx("span",{className:"text-gray-700",children:p.label}),!l.includes(p.id)&&d.jsx("button",{type:"button",onClick:()=>o(p.id),className:"text-xs text-red-500 hover:text-red-700",children:"Remove"})]},p.id))}),d.jsxs("div",{className:"flex gap-2",children:[d.jsx("input",{type:"text",value:c,onChange:p=>f(p.target.value),onKeyDown:p=>p.key==="Enter"&&m(),placeholder:"Label...",className:"flex-1 text-sm rounded border border-gray-300 px-2 py-1 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500"}),d.jsx("button",{type:"button",onClick:m,className:"text-xs text-blue-600 hover:text-blue-800 font-medium whitespace-nowrap",children:a})]})]})}const _j={inbound_number:Dn,time_switch:Dn,ivr_menu:Dn,ring_group:Dn,extension:Dn,voicemail:Dn,play_message:Dn,conference:Dn,transfer:Dn,hangup:Dn,set_caller_id:Dn},Sj={flow:Ik},Nj={type:"flow",animated:!1};let Ej=0;function Cj(){return`node_${Date.now()}_${++Ej}`}function kj({initialNodes:e,initialEdges:r,onChange:o,validationIssues:a}){const s=E.useRef(null),[l,c]=E.useState(null),[f,m,p]=ok(e),[x,g,v]=ik(r),[w,S]=E.useState(null),k=E.useCallback((A,K)=>{o?.(A,K)},[o]),N=E.useCallback(A=>{const K=f.find(H=>H.id===A.source);let F="";if(K){const W=K.data.outputHandles?.find(M=>M.id===A.sourceHandle);W&&W.id!=="next"&&(F=W.label)}const V={...A,type:"flow",data:{label:F}};g(H=>{const W=Fg(V,H);return k(f,W),W})},[f,g,k]),_=E.useCallback(A=>{p(A),queueMicrotask(()=>{m(K=>(k(K,x),K))})},[p,m,x,k]),P=E.useCallback(A=>{v(A),queueMicrotask(()=>{g(K=>(k(f,K),K))})},[v,g,f,k]),b=E.useCallback(({nodes:A})=>{A.length===1?S(A[0]):S(null)},[]),j=E.useCallback((A,K)=>{m(F=>{const V=F.map(H=>{if(H.id===A){const W=H.data,M={...W,...K};K.config&&W.config&&(M.config={...W.config,...K.config});const L={...H,data:M};return S(L),L}return H});return k(V,x),V})},[m,x,k]),I=E.useCallback(A=>{A.preventDefault(),A.dataTransfer.dropEffect="move"},[]),D=E.useCallback(A=>{A.preventDefault();const K=A.dataTransfer.getData("application/reactflow-type");if(!K||!l||!s.current)return;const F=Hd(K);if(!F)return;const V=s.current.getBoundingClientRect(),H=l.screenToFlowPosition({x:A.clientX-V.left,y:A.clientY-V.top});let W;K==="time_switch"?W=[{id:"default",label:"Default"}]:K==="ivr_menu"&&(W=[{id:"timeout",label:"Timeout"},{id:"invalid",label:"Invalid"}]);const M={label:F.label,entity_type:F.entityType,outputHandles:W},L={id:Cj(),type:K,position:H,data:M};m(X=>{const Q=[...X,L];return k(Q,x),Q}),S(L)},[l,m,x,k]),R=a?f.map(A=>({...A,data:{...A.data,validationIssues:a[A.id]}})):f;return d.jsxs("div",{className:"flex flex-1 h-full",children:[d.jsx($k,{}),d.jsx("div",{ref:s,className:"flex-1 h-full",children:d.jsxs(tk,{nodes:R,edges:x,onNodesChange:_,onEdgesChange:P,onConnect:N,onInit:c,onDrop:D,onDragOver:I,onSelectionChange:b,nodeTypes:_j,edgeTypes:Sj,defaultEdgeOptions:Nj,fitView:!0,deleteKeyCode:"Delete",multiSelectionKeyCode:"Shift",snapToGrid:!0,snapGrid:[16,16],children:[d.jsx(ck,{variant:br.Dots,gap:16,size:1,color:"#e5e7eb"}),d.jsx(yk,{}),d.jsx(Rk,{nodeStrokeWidth:3,zoomable:!0,pannable:!0,className:"!bg-gray-50 !border-gray-200"})]})}),w&&d.jsx(bj,{node:w,onUpdate:j,onClose:()=>S(null)})]})}function jj(e,r){return JSON.stringify({nodes:e.map(o=>{const a=o.data;return{id:o.id,type:o.type,position:o.position,data:{label:a.label,entity_id:a.entity_id??void 0,entity_type:a.entity_type??void 0,config:a.config??void 0,outputHandles:a.outputHandles??void 0}}}),edges:r.map(o=>({id:o.id,source:o.source,target:o.target,sourceHandle:o.sourceHandle,targetHandle:o.targetHandle,label:o.data?.label??void 0}))})}function i0(e){try{const r=JSON.parse(e),o=(r.nodes??[]).map(s=>{const l=s.data,c={label:l?.label??"",entity_id:l?.entity_id,entity_type:l?.entity_type,config:l?.config,outputHandles:l?.outputHandles};return{id:s.id,type:s.type,position:s.position,data:c}}),a=(r.edges??[]).map(s=>({id:s.id,source:s.source,target:s.target,sourceHandle:s.sourceHandle,targetHandle:s.targetHandle,type:"flow",data:{label:s.label??""}}));return{nodes:o,edges:a}}catch{return{nodes:[],edges:[]}}}function Pj(){const[e,r]=E.useState("list"),[o,a]=E.useState([]),[s,l]=E.useState(!0),[c,f]=E.useState(null),[m,p]=E.useState(""),[x,g]=E.useState(!1),[v,w]=E.useState(!1),[S,k]=E.useState(!1),[N,_]=E.useState(""),[P,b]=E.useState(""),[j,I]=E.useState({}),[D,R]=E.useState(null),A=E.useRef([]),K=E.useRef([]),F=E.useRef(null);function V(){l(!0),lj().then(U=>a(U)).catch(()=>a([])).finally(()=>l(!1))}E.useEffect(()=>{V()},[]);async function H(U){try{const T=await uj(U.id);f(T),p(T.name);const{nodes:B,edges:oe}=i0(T.flow_data);A.current=B,K.current=oe,I({}),R(null),_(""),b(""),r("editor")}catch(T){_(T instanceof lt?T.message:"failed to load flow")}}async function W(){_("");try{const U=await cj({name:"New Flow"});await H(U)}catch(U){_(U instanceof lt?U.message:"failed to create flow")}}async function M(U){if(confirm(`Delete flow "${U.name}"? This cannot be undone.`))try{await fj(U.id),V()}catch(T){alert(T instanceof lt?T.message:"failed to delete flow")}}const L=E.useCallback(async(U=!1)=>{if(c){g(!0),_("");try{const T=jj(A.current,K.current),B=await dj(c.id,{name:m||c.name,flow_data:T});f(B),U||b("Flow saved"),U||setTimeout(()=>b(""),2e3)}catch(T){_(T instanceof lt?T.message:"failed to save flow")}finally{g(!1)}}},[c,m]),X=E.useCallback((U,T)=>{A.current=U,K.current=T,F.current&&clearTimeout(F.current),F.current=setTimeout(()=>L(!0),2e3)},[L]);async function Q(){if(c){await L(),w(!0),_("");try{const U=await hj(c.id);f(U),b("Flow published successfully"),setTimeout(()=>b(""),3e3)}catch(U){_(U instanceof lt?U.message:"failed to publish flow")}finally{w(!1)}}}async function z(){if(c){await L(),k(!0),_("");try{const U=await pj(c.id);R(U);const T={};for(const B of U.issues)B.node_id&&(T[B.node_id]||(T[B.node_id]=[]),T[B.node_id].push({severity:B.severity,message:B.message}));I(T),U.valid&&(b("Flow is valid"),setTimeout(()=>b(""),2e3))}catch(U){_(U instanceof lt?U.message:"failed to validate flow")}finally{k(!1)}}}function G(){F.current&&clearTimeout(F.current),L(!0),r("list"),f(null),V()}if(e==="editor"&&c){const{nodes:U,edges:T}=i0(c.flow_data);return d.jsxs("div",{className:"flex flex-col h-[calc(100vh-theme(spacing.14)-theme(spacing.12))]",children:[d.jsxs("div",{className:"flex items-center justify-between px-4 py-2 bg-white border-b border-gray-200 shrink-0",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsxs("button",{type:"button",onClick:G,className:"text-sm text-gray-500 hover:text-gray-700 flex items-center gap-1",children:[d.jsx("svg",{className:"w-4 h-4",viewBox:"0 0 20 20",fill:"currentColor",children:d.jsx("path",{fillRule:"evenodd",d:"M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z",clipRule:"evenodd"})}),"Back"]}),d.jsx("input",{type:"text",value:m,onChange:B=>p(B.target.value),onBlur:()=>L(!0),className:"text-lg font-semibold text-gray-900 bg-transparent border-none focus:outline-none focus:ring-0 p-0",placeholder:"Flow name..."}),c.published&&d.jsxs("span",{className:"inline-flex items-center rounded-full bg-green-50 px-2 py-0.5 text-xs font-medium text-green-700",children:["Published v",c.version]}),x&&d.jsx("span",{className:"text-xs text-gray-400",children:"Saving..."})]}),d.jsxs("div",{className:"flex items-center gap-2",children:[N&&d.jsx("span",{className:"text-xs text-red-600",children:N}),P&&d.jsx("span",{className:"text-xs text-green-600",children:P}),d.jsx("button",{type:"button",onClick:()=>L(),disabled:x,className:"rounded-md border border-gray-300 bg-white px-3 py-1.5 text-sm font-medium text-gray-700 hover:bg-gray-50 disabled:opacity-50 transition-colors",children:"Save"}),d.jsx("button",{type:"button",onClick:z,disabled:S,className:"rounded-md border border-gray-300 bg-white px-3 py-1.5 text-sm font-medium text-gray-700 hover:bg-gray-50 disabled:opacity-50 transition-colors",children:S?"Validating...":"Validate"}),d.jsx("button",{type:"button",onClick:Q,disabled:v,className:"rounded-md bg-blue-600 px-3 py-1.5 text-sm font-medium text-white hover:bg-blue-700 disabled:opacity-50 transition-colors",children:v?"Publishing...":"Publish"})]})]}),D&&!D.valid&&d.jsxs("div",{className:"bg-red-50 border-b border-red-200 px-4 py-2 flex items-center justify-between",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("svg",{className:"w-4 h-4 text-red-500",viewBox:"0 0 20 20",fill:"currentColor",children:d.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),d.jsxs("span",{className:"text-sm text-red-700",children:[D.issues.length," issue",D.issues.length!==1?"s":""," found"]})]}),d.jsx("button",{type:"button",onClick:()=>{R(null),I({})},className:"text-xs text-red-500 hover:text-red-700",children:"Dismiss"})]}),d.jsx(kj,{initialNodes:U,initialEdges:T,onChange:X,validationIssues:Object.keys(j).length>0?j:void 0})]})}return d.jsxs("div",{children:[d.jsxs("div",{className:"flex items-center justify-between mb-6",children:[d.jsxs("div",{children:[d.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Call Flows"}),d.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Visual call flow editor. Create and manage call routing logic."})]}),d.jsx("button",{type:"button",onClick:W,className:"rounded-md bg-blue-600 px-4 py-2 text-sm font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors",children:"New Flow"})]}),N&&d.jsx("div",{className:"rounded-md bg-red-50 border border-red-200 px-3 py-2 mb-4",children:d.jsx("p",{className:"text-sm text-red-700",children:N})}),s?d.jsx("p",{className:"text-sm text-gray-400",children:"Loading..."}):o.length===0?d.jsxs("div",{className:"text-center py-12",children:[d.jsx("svg",{className:"mx-auto w-12 h-12 text-gray-300",viewBox:"0 0 20 20",fill:"currentColor",children:d.jsx("path",{fillRule:"evenodd",d:"M6 2a2 2 0 00-2 2v1a2 2 0 002 2h1v2H5a2 2 0 00-2 2v1a2 2 0 002 2h1v2a2 2 0 002 2h4a2 2 0 002-2v-2h1a2 2 0 002-2v-1a2 2 0 00-2-2h-2V7h1a2 2 0 002-2V4a2 2 0 00-2-2H6zm0 2h8v1H6V4zm-1 7h10v1H5v-1zm3 5h4v1H8v-1z",clipRule:"evenodd"})}),d.jsx("h3",{className:"mt-4 text-sm font-medium text-gray-900",children:"No call flows"}),d.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Get started by creating your first call flow."}),d.jsx("button",{type:"button",onClick:W,className:"mt-4 rounded-md bg-blue-600 px-4 py-2 text-sm font-medium text-white hover:bg-blue-700 transition-colors",children:"New Flow"})]}):d.jsx("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3",children:o.map(U=>d.jsxs("div",{onClick:()=>H(U),className:"bg-white rounded-lg border border-gray-200 p-4 hover:border-blue-300 hover:shadow-sm cursor-pointer transition-all",children:[d.jsxs("div",{className:"flex items-start justify-between",children:[d.jsxs("div",{className:"min-w-0 flex-1",children:[d.jsx("h3",{className:"text-sm font-semibold text-gray-900 truncate",children:U.name}),d.jsxs("p",{className:"mt-1 text-xs text-gray-500",children:["Version ",U.version,U.published_at&&`  Published ${new Date(U.published_at).toLocaleDateString()}`]})]}),d.jsx("div",{className:"flex items-center gap-2 ml-2",children:U.published?d.jsx("span",{className:"inline-flex items-center rounded-full bg-green-50 px-2 py-0.5 text-xs font-medium text-green-700",children:"Live"}):d.jsx("span",{className:"inline-flex items-center rounded-full bg-gray-100 px-2 py-0.5 text-xs font-medium text-gray-500",children:"Draft"})})]}),d.jsxs("div",{className:"mt-3 flex items-center justify-between",children:[d.jsxs("span",{className:"text-xs text-gray-400",children:["Updated ",new Date(U.updated_at).toLocaleDateString()]}),d.jsx("button",{type:"button",onClick:T=>{T.stopPropagation(),M(U)},className:"text-xs text-red-500 hover:text-red-700",children:"Delete"})]})]},U.id))})]})}function ro({columns:e,rows:r,keyFn:o,total:a,limit:s,offset:l,onPageChange:c,onRowClick:f,emptyMessage:m="No records found."}){const p=Math.floor(l/s)+1,x=Math.max(1,Math.ceil(a/s)),g=l>0,v=l+s<a;return d.jsxs("div",{children:[d.jsx("div",{className:"overflow-x-auto border border-gray-200 rounded-lg",children:d.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[d.jsx("thead",{className:"bg-gray-50",children:d.jsx("tr",{children:e.map(w=>d.jsx("th",{className:`px-4 py-2.5 text-left text-xs font-medium text-gray-500 uppercase tracking-wider ${w.className??""}`,children:w.header},w.key))})}),d.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:r.length===0?d.jsx("tr",{children:d.jsx("td",{colSpan:e.length,className:"px-4 py-8 text-center text-sm text-gray-400",children:m})}):r.map(w=>d.jsx("tr",{onClick:f?()=>f(w):void 0,className:f?"cursor-pointer hover:bg-gray-50":"",children:e.map(S=>d.jsx("td",{className:`px-4 py-2.5 text-sm text-gray-900 ${S.className??""}`,children:S.render(w)},S.key))},o(w)))})]})}),a>0&&d.jsxs("div",{className:"flex items-center justify-between mt-3",children:[d.jsxs("p",{className:"text-sm text-gray-500",children:["Showing ",l+1,"",Math.min(l+s,a)," of ",a]}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("button",{type:"button",disabled:!g,onClick:()=>c(Math.max(0,l-s)),className:"rounded-md border border-gray-300 bg-white px-3 py-1.5 text-sm font-medium text-gray-700 hover:bg-gray-50 disabled:opacity-30 disabled:cursor-not-allowed transition-colors",children:"Previous"}),d.jsxs("span",{className:"text-sm text-gray-500",children:["Page ",p," of ",x]}),d.jsx("button",{type:"button",disabled:!v,onClick:()=>c(l+s),className:"rounded-md border border-gray-300 bg-white px-3 py-1.5 text-sm font-medium text-gray-700 hover:bg-gray-50 disabled:opacity-30 disabled:cursor-not-allowed transition-colors",children:"Next"})]})]})]})}const a0=20;function Rj(){const[e,r]=E.useState([]),[o,a]=E.useState(0),[s,l]=E.useState(0),[c,f]=E.useState(!0),[m,p]=E.useState(null),[x,g]=E.useState(!1),[v,w]=E.useState(""),[S,k]=E.useState(!1),[N,_]=E.useState({}),P=E.useRef(null),[b,j]=E.useState(I());function I(){return{name:"",type:"register",enabled:!0,host:"",port:5060,transport:"udp",username:"",password:"",auth_username:"",register_expiry:300,remote_hosts:"",local_host:"",codecs:"",max_channels:0,caller_id_name:"",caller_id_num:"",prefix_strip:0,prefix_add:"",priority:10}}const D=E.useCallback(()=>{Uk().then(M=>{const L={};for(const X of M)L[X.trunk_id]=X;_(L)}).catch(()=>{})},[]);function R(M){f(!0),Dy({limit:a0,offset:M}).then(L=>{r(L.items),a(L.total),l(M)}).catch(()=>{r([]),a(0)}).finally(()=>f(!1))}E.useEffect(()=>(R(0),D(),P.current=setInterval(D,1e4),()=>{P.current&&clearInterval(P.current)}),[D]);function A(){j(I()),p(null),g(!0),w("")}function K(M){j({name:M.name,type:M.type,enabled:M.enabled,host:M.host,port:M.port,transport:M.transport,username:M.username,password:"",auth_username:M.auth_username,register_expiry:M.register_expiry,remote_hosts:M.remote_hosts,local_host:M.local_host,codecs:M.codecs,max_channels:M.max_channels,caller_id_name:M.caller_id_name,caller_id_num:M.caller_id_num,prefix_strip:M.prefix_strip,prefix_add:M.prefix_add,priority:M.priority}),p(M),g(!0),w("")}function F(){g(!1),p(null),w("")}async function V(M){M.preventDefault(),w(""),k(!0);try{m?await Bk(m.id,b):await Hk(b),F(),R(m?s:0)}catch(L){w(L instanceof lt?L.message:"unable to save trunk")}finally{k(!1)}}async function H(M){if(confirm(`Delete trunk "${M.name}"?`))try{await Vk(M.id),R(s)}catch(L){alert(L instanceof lt?L.message:"unable to delete trunk")}}const W=[{key:"name",header:"Name",render:M=>M.name},{key:"type",header:"Type",render:M=>M.type==="register"?"Registration":"IP Auth"},{key:"host",header:"Host",render:M=>M.type==="register"?`${M.host}:${M.port}`:M.remote_hosts||""},{key:"transport",header:"Transport",render:M=>(M.transport||"udp").toUpperCase()},{key:"enabled",header:"Status",render:M=>{if(!M.enabled)return d.jsxs("div",{className:"flex items-center gap-1.5",children:[d.jsx("span",{className:"inline-block w-2 h-2 rounded-full bg-gray-300"}),d.jsx("span",{className:"text-sm text-gray-500",children:"Disabled"})]});const L=N[M.id],X=L?.status??"unknown",Q={registered:{dot:"bg-green-500",text:"text-green-700",label:"Registered"},registering:{dot:"bg-yellow-400",text:"text-yellow-700",label:"Registering"},failed:{dot:"bg-red-500",text:"text-red-700",label:"Failed"},unregistered:{dot:"bg-gray-400",text:"text-gray-600",label:"Unregistered"},unknown:{dot:"bg-gray-400",text:"text-gray-600",label:"Unknown"}};if(M.type==="ip"&&L){const G=L.options_healthy?{dot:"bg-green-500",text:"text-green-700",label:"Healthy"}:{dot:"bg-gray-400",text:"text-gray-600",label:"IP Auth"};return d.jsxs("div",{className:"flex items-center gap-1.5",children:[d.jsx("span",{className:`inline-block w-2 h-2 rounded-full ${G.dot}`}),d.jsx("span",{className:`text-sm ${G.text}`,children:G.label})]})}const z=Q[X]??Q.unknown;return d.jsxs("div",{className:"flex items-center gap-1.5",title:L?.last_error||void 0,children:[d.jsx("span",{className:`inline-block w-2 h-2 rounded-full ${z.dot}`}),d.jsx("span",{className:`text-sm ${z.text}`,children:z.label})]})}},{key:"actions",header:"",className:"w-24",render:M=>d.jsxs("div",{className:"flex gap-2",children:[d.jsx("button",{type:"button",onClick:L=>{L.stopPropagation(),K(M)},className:"text-sm text-blue-600 hover:text-blue-800",children:"Edit"}),d.jsx("button",{type:"button",onClick:L=>{L.stopPropagation(),H(M)},className:"text-sm text-red-600 hover:text-red-800",children:"Delete"})]})}];if(x){const M=b.type==="register";return d.jsxs("div",{children:[d.jsxs("div",{className:"flex items-center justify-between mb-6",children:[d.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:m?"Edit Trunk":"New Trunk"}),d.jsx("button",{type:"button",onClick:F,className:"text-sm text-gray-500 hover:text-gray-700",children:"Cancel"})]}),d.jsxs("form",{onSubmit:V,className:"max-w-lg space-y-4",children:[v&&d.jsx("div",{className:"rounded-md bg-red-50 border border-red-200 px-3 py-2",children:d.jsx("p",{className:"text-sm text-red-700",children:v})}),d.jsx(Ue,{label:"Trunk Name",id:"trunk_name",required:!0,value:b.name,onChange:L=>j({...b,name:L.currentTarget.value}),placeholder:"My SIP Provider"}),d.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[d.jsxs(Jr,{label:"Type",id:"trunk_type",value:b.type,onChange:L=>j({...b,type:L.currentTarget.value}),children:[d.jsx("option",{value:"register",children:"Registration"}),d.jsx("option",{value:"ip",children:"IP Auth"})]}),d.jsxs(Jr,{label:"Transport",id:"trunk_transport",value:b.transport??"udp",onChange:L=>j({...b,transport:L.currentTarget.value}),children:[d.jsx("option",{value:"udp",children:"UDP"}),d.jsx("option",{value:"tcp",children:"TCP"}),d.jsx("option",{value:"tls",children:"TLS"})]})]}),M?d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[d.jsx(Ue,{label:"Host",id:"trunk_host",required:!0,value:b.host??"",onChange:L=>j({...b,host:L.currentTarget.value}),placeholder:"sip.provider.com"}),d.jsx(wn,{label:"Port",id:"trunk_port",min:1,max:65535,value:b.port??5060,onChange:L=>j({...b,port:Number(L.currentTarget.value)})})]}),d.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[d.jsx(Ue,{label:"Username",id:"trunk_username",value:b.username??"",onChange:L=>j({...b,username:L.currentTarget.value}),autoComplete:"off"}),d.jsx(Ue,{label:m?"Password (leave blank to keep)":"Password",id:"trunk_password",type:"password",value:b.password??"",onChange:L=>j({...b,password:L.currentTarget.value}),autoComplete:"off"})]}),d.jsx(Ue,{label:"Auth Username (if different)",id:"trunk_auth_username",value:b.auth_username??"",onChange:L=>j({...b,auth_username:L.currentTarget.value}),autoComplete:"off"}),d.jsx(wn,{label:"Register Expiry (s)",id:"trunk_expiry",min:60,max:3600,value:b.register_expiry??300,onChange:L=>j({...b,register_expiry:Number(L.currentTarget.value)})})]}):d.jsxs(d.Fragment,{children:[d.jsx(Ue,{label:"Remote Hosts (comma-separated IPs/CIDRs)",id:"trunk_remote_hosts",value:b.remote_hosts??"",onChange:L=>j({...b,remote_hosts:L.currentTarget.value}),placeholder:"203.0.113.10, 198.51.100.0/24"}),d.jsx(Ue,{label:"Local Bind Address (optional)",id:"trunk_local_host",value:b.local_host??"",onChange:L=>j({...b,local_host:L.currentTarget.value})})]}),d.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[d.jsx(Ue,{label:"Caller ID Name",id:"trunk_cid_name",value:b.caller_id_name??"",onChange:L=>j({...b,caller_id_name:L.currentTarget.value})}),d.jsx(Ue,{label:"Caller ID Number",id:"trunk_cid_num",value:b.caller_id_num??"",onChange:L=>j({...b,caller_id_num:L.currentTarget.value})})]}),d.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[d.jsx(wn,{label:"Max Channels",id:"trunk_max_channels",min:0,value:b.max_channels??0,onChange:L=>j({...b,max_channels:Number(L.currentTarget.value)})}),d.jsx(wn,{label:"Priority",id:"trunk_priority",min:1,max:100,value:b.priority??10,onChange:L=>j({...b,priority:Number(L.currentTarget.value)})}),d.jsx(wn,{label:"Prefix Strip",id:"trunk_prefix_strip",min:0,max:10,value:b.prefix_strip??0,onChange:L=>j({...b,prefix_strip:Number(L.currentTarget.value)})})]}),d.jsx(Ue,{label:"Prefix Add",id:"trunk_prefix_add",value:b.prefix_add??"",onChange:L=>j({...b,prefix_add:L.currentTarget.value})}),d.jsx(Ci,{label:"Enabled",checked:b.enabled??!0,onChange:L=>j({...b,enabled:L})}),d.jsx("div",{className:"pt-4 border-t border-gray-100",children:d.jsx("button",{type:"submit",disabled:S,className:"rounded-md bg-blue-600 px-4 py-2 text-sm font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:S?"Saving...":m?"Update Trunk":"Create Trunk"})})]})]})}return d.jsxs("div",{children:[d.jsxs("div",{className:"flex items-center justify-between mb-6",children:[d.jsxs("div",{children:[d.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Trunks"}),d.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Manage SIP trunk connections to upstream providers."})]}),d.jsx("button",{type:"button",onClick:A,className:"rounded-md bg-blue-600 px-4 py-2 text-sm font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors",children:"Add Trunk"})]}),c?d.jsx("p",{className:"text-sm text-gray-400",children:"Loading..."}):d.jsx(ro,{columns:W,rows:e,keyFn:M=>M.id,total:o,limit:a0,offset:s,onPageChange:R,onRowClick:K,emptyMessage:"No trunks configured yet."})]})}const s0=20;function Mj(){const[e,r]=E.useState([]),[o,a]=E.useState(0),[s,l]=E.useState(0),[c,f]=E.useState(!0),[m,p]=E.useState(null),[x,g]=E.useState(!1),[v,w]=E.useState(""),[S,k]=E.useState(!1),[N,_]=E.useState([]),[P,b]=E.useState(j());function j(){return{number:"",name:"",trunk_id:null,flow_id:null,flow_entry_node:"",enabled:!0}}function I(W){f(!0),zy({limit:s0,offset:W}).then(M=>{r(M.items),a(M.total),l(W)}).catch(()=>{r([]),a(0)}).finally(()=>f(!1))}E.useEffect(()=>{I(0),Dy({limit:100}).then(W=>_(W.items)).catch(()=>{})},[]);function D(){b(j()),p(null),g(!0),w("")}function R(W){b({number:W.number,name:W.name,trunk_id:W.trunk_id,flow_id:W.flow_id,flow_entry_node:W.flow_entry_node,enabled:W.enabled}),p(W),g(!0),w("")}function A(){g(!1),p(null),w("")}async function K(W){W.preventDefault(),w(""),k(!0);try{m?await qk(m.id,P):await Qk(P),A(),I(m?s:0)}catch(M){w(M instanceof lt?M.message:"unable to save inbound number")}finally{k(!1)}}async function F(W){if(confirm(`Delete inbound number ${W.number} (${W.name})?`))try{await Jk(W.id),I(s)}catch(M){alert(M instanceof lt?M.message:"unable to delete inbound number")}}function V(W){if(W==null)return"";const M=N.find(L=>L.id===W);return M?M.name:`#${W}`}const H=[{key:"number",header:"Number",render:W=>W.number},{key:"name",header:"Name",render:W=>W.name||""},{key:"trunk_id",header:"Trunk",render:W=>V(W.trunk_id)},{key:"enabled",header:"Status",render:W=>d.jsx("span",{className:`inline-flex items-center rounded-full px-2 py-0.5 text-xs font-medium ${W.enabled?"bg-green-50 text-green-700":"bg-gray-100 text-gray-500"}`,children:W.enabled?"Enabled":"Disabled"})},{key:"actions",header:"",className:"w-24",render:W=>d.jsxs("div",{className:"flex gap-2",children:[d.jsx("button",{type:"button",onClick:M=>{M.stopPropagation(),R(W)},className:"text-sm text-blue-600 hover:text-blue-800",children:"Edit"}),d.jsx("button",{type:"button",onClick:M=>{M.stopPropagation(),F(W)},className:"text-sm text-red-600 hover:text-red-800",children:"Delete"})]})}];return x?d.jsxs("div",{children:[d.jsxs("div",{className:"flex items-center justify-between mb-6",children:[d.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:m?"Edit Inbound Number":"New Inbound Number"}),d.jsx("button",{type:"button",onClick:A,className:"text-sm text-gray-500 hover:text-gray-700",children:"Cancel"})]}),d.jsxs("form",{onSubmit:K,className:"max-w-lg space-y-4",children:[v&&d.jsx("div",{className:"rounded-md bg-red-50 border border-red-200 px-3 py-2",children:d.jsx("p",{className:"text-sm text-red-700",children:v})}),d.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[d.jsx(Ue,{label:"Number",id:"number",required:!0,value:P.number,onChange:W=>b({...P,number:W.currentTarget.value}),placeholder:"+14155551234"}),d.jsx(Ue,{label:"Name",id:"name",value:P.name,onChange:W=>b({...P,name:W.currentTarget.value}),placeholder:"Main Office"})]}),d.jsxs(Jr,{label:"Trunk",id:"trunk_id",value:P.trunk_id??"",onChange:W=>b({...P,trunk_id:W.currentTarget.value?Number(W.currentTarget.value):null}),children:[d.jsx("option",{value:"",children:"None"}),N.map(W=>d.jsx("option",{value:W.id,children:W.name},W.id))]}),d.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[d.jsx(wn,{label:"Flow ID",id:"flow_id",min:0,value:P.flow_id??"",onChange:W=>b({...P,flow_id:W.currentTarget.value?Number(W.currentTarget.value):null})}),d.jsx(Ue,{label:"Flow Entry Node",id:"flow_entry_node",value:P.flow_entry_node??"",onChange:W=>b({...P,flow_entry_node:W.currentTarget.value}),placeholder:"start"})]}),d.jsx("p",{className:"text-xs text-gray-400",children:"Optional: route this number to a specific call flow and entry node."}),d.jsx(Ci,{label:"Enabled",checked:P.enabled??!0,onChange:W=>b({...P,enabled:W})}),d.jsx("div",{className:"pt-4 border-t border-gray-100",children:d.jsx("button",{type:"submit",disabled:S,className:"rounded-md bg-blue-600 px-4 py-2 text-sm font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:S?"Saving...":m?"Update Number":"Create Number"})})]})]}):d.jsxs("div",{children:[d.jsxs("div",{className:"flex items-center justify-between mb-6",children:[d.jsxs("div",{children:[d.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Inbound Numbers"}),d.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Manage DID numbers and route them to call flows."})]}),d.jsx("button",{type:"button",onClick:D,className:"rounded-md bg-blue-600 px-4 py-2 text-sm font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors",children:"Add Number"})]}),c?d.jsx("p",{className:"text-sm text-gray-400",children:"Loading..."}):d.jsx(ro,{columns:H,rows:e,keyFn:W=>W.id,total:o,limit:s0,offset:s,onPageChange:I,onRowClick:R,emptyMessage:"No inbound numbers configured yet."})]})}const l0=20;function Tj(){const[e,r]=E.useState([]),[o,a]=E.useState(0),[s,l]=E.useState(0),[c,f]=E.useState(!0),[m,p]=E.useState(null),[x,g]=E.useState(!1),[v,w]=E.useState(""),[S,k]=E.useState(!1),[N,_]=E.useState(P());function P(){return{extension:"",name:"",email:"",sip_username:"",sip_password:"",ring_timeout:30,dnd:!1,follow_me_enabled:!1,recording_mode:"off",max_registrations:5}}function b(F){f(!0),Bd({limit:l0,offset:F}).then(V=>{r(V.items),a(V.total),l(F)}).catch(()=>{r([]),a(0)}).finally(()=>f(!1))}E.useEffect(()=>{b(0)},[]);function j(){_(P()),p(null),g(!0),w("")}function I(F){_({extension:F.extension,name:F.name,email:F.email,sip_username:F.sip_username,sip_password:"",ring_timeout:F.ring_timeout,dnd:F.dnd,follow_me_enabled:F.follow_me_enabled,recording_mode:F.recording_mode,max_registrations:F.max_registrations}),p(F),g(!0),w("")}function D(){g(!1),p(null),w("")}async function R(F){F.preventDefault(),w(""),k(!0);try{m?await Ak(m.id,N):await Fk(N),D(),b(m?s:0)}catch(V){w(V instanceof lt?V.message:"unable to save extension")}finally{k(!1)}}async function A(F){if(confirm(`Delete extension ${F.extension} (${F.name})?`))try{await Ok(F.id),b(s)}catch(V){alert(V instanceof lt?V.message:"unable to delete extension")}}const K=[{key:"extension",header:"Extension",render:F=>F.extension},{key:"name",header:"Name",render:F=>F.name},{key:"email",header:"Email",render:F=>F.email||""},{key:"sip_username",header:"SIP Username",render:F=>F.sip_username},{key:"dnd",header:"DND",render:F=>d.jsx("span",{className:`inline-flex items-center rounded-full px-2 py-0.5 text-xs font-medium ${F.dnd?"bg-red-50 text-red-700":"bg-gray-100 text-gray-500"}`,children:F.dnd?"On":"Off"})},{key:"actions",header:"",className:"w-24",render:F=>d.jsxs("div",{className:"flex gap-2",children:[d.jsx("button",{type:"button",onClick:V=>{V.stopPropagation(),I(F)},className:"text-sm text-blue-600 hover:text-blue-800",children:"Edit"}),d.jsx("button",{type:"button",onClick:V=>{V.stopPropagation(),A(F)},className:"text-sm text-red-600 hover:text-red-800",children:"Delete"})]})}];return x?d.jsxs("div",{children:[d.jsxs("div",{className:"flex items-center justify-between mb-6",children:[d.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:m?"Edit Extension":"New Extension"}),d.jsx("button",{type:"button",onClick:D,className:"text-sm text-gray-500 hover:text-gray-700",children:"Cancel"})]}),d.jsxs("form",{onSubmit:R,className:"max-w-lg space-y-4",children:[v&&d.jsx("div",{className:"rounded-md bg-red-50 border border-red-200 px-3 py-2",children:d.jsx("p",{className:"text-sm text-red-700",children:v})}),d.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[d.jsx(Ue,{label:"Extension Number",id:"ext_number",required:!0,value:N.extension,onChange:F=>_({...N,extension:F.currentTarget.value}),placeholder:"101"}),d.jsx(Ue,{label:"Display Name",id:"ext_name",required:!0,value:N.name,onChange:F=>_({...N,name:F.currentTarget.value}),placeholder:"John Smith"})]}),d.jsx(Ue,{label:"Email",id:"ext_email",type:"email",value:N.email??"",onChange:F=>_({...N,email:F.currentTarget.value}),placeholder:"john@example.com"}),d.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[d.jsx(Ue,{label:"SIP Username",id:"sip_username",required:!0,value:N.sip_username,onChange:F=>_({...N,sip_username:F.currentTarget.value})}),d.jsx(Ue,{label:m?"SIP Password (leave blank to keep)":"SIP Password",id:"sip_password",type:"password",required:!m,value:N.sip_password??"",onChange:F=>_({...N,sip_password:F.currentTarget.value}),autoComplete:"off"})]}),d.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[d.jsx(wn,{label:"Ring Timeout (s)",id:"ring_timeout",min:5,max:300,value:N.ring_timeout??30,onChange:F=>_({...N,ring_timeout:Number(F.currentTarget.value)})}),d.jsx(wn,{label:"Max Registrations",id:"max_registrations",min:1,max:20,value:N.max_registrations??5,onChange:F=>_({...N,max_registrations:Number(F.currentTarget.value)})})]}),d.jsxs(Jr,{label:"Recording Mode",id:"recording_mode",value:N.recording_mode??"off",onChange:F=>_({...N,recording_mode:F.currentTarget.value}),children:[d.jsx("option",{value:"off",children:"Off"}),d.jsx("option",{value:"always",children:"Always"}),d.jsx("option",{value:"on_demand",children:"On Demand"})]}),d.jsxs("div",{className:"flex gap-6",children:[d.jsx(Ci,{label:"Do Not Disturb",checked:N.dnd??!1,onChange:F=>_({...N,dnd:F})}),d.jsx(Ci,{label:"Follow Me",checked:N.follow_me_enabled??!1,onChange:F=>_({...N,follow_me_enabled:F})})]}),d.jsx("div",{className:"pt-4 border-t border-gray-100",children:d.jsx("button",{type:"submit",disabled:S,className:"rounded-md bg-blue-600 px-4 py-2 text-sm font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:S?"Saving...":m?"Update Extension":"Create Extension"})})]})]}):d.jsxs("div",{children:[d.jsxs("div",{className:"flex items-center justify-between mb-6",children:[d.jsxs("div",{children:[d.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Extensions"}),d.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Manage SIP extensions and user accounts."})]}),d.jsx("button",{type:"button",onClick:j,className:"rounded-md bg-blue-600 px-4 py-2 text-sm font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors",children:"Add Extension"})]}),c?d.jsx("p",{className:"text-sm text-gray-400",children:"Loading..."}):d.jsx(ro,{columns:K,rows:e,keyFn:F=>F.id,total:o,limit:l0,offset:s,onPageChange:b,onRowClick:I,emptyMessage:"No extensions configured yet."})]})}const u0=20;function Dj(e){return new Date(e).toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}function Lj(e){const r=Math.floor(e/60),o=e%60;return r>0?`${r}m ${o}s`:`${o}s`}function zj({box:e,onBack:r}){const[o,a]=E.useState([]),[s,l]=E.useState(!0),[c,f]=E.useState(null),m=E.useRef(null);function p(){l(!0),Gk(e.id).then(N=>a(N)).catch(()=>a([])).finally(()=>l(!1))}E.useEffect(()=>(p(),()=>g()),[e.id]);function x(N){if(c===N.id){g();return}g();const _=new Audio(r0(e.id,N.id));_.addEventListener("ended",()=>f(null)),_.addEventListener("error",()=>f(null)),_.play(),m.current=_,f(N.id)}function g(){m.current&&(m.current.pause(),m.current=null),f(null)}async function v(N){try{const _=await Zk(e.id,N.id);a(P=>P.map(b=>b.id===N.id?_:b))}catch(_){alert(_ instanceof lt?_.message:"unable to mark message as read")}}async function w(N){if(confirm("Delete this voicemail message?")){g();try{await Kk(e.id,N.id),a(_=>_.filter(P=>P.id!==N.id))}catch(_){alert(_ instanceof lt?_.message:"unable to delete message")}}}const S=[{key:"status",header:"",className:"w-8",render:N=>d.jsx("span",{className:`inline-block h-2 w-2 rounded-full ${N.read?"bg-gray-300":"bg-blue-500"}`,title:N.read?"Read":"Unread"})},{key:"caller",header:"Caller",render:N=>d.jsxs("div",{children:[d.jsx("span",{className:`${N.read?"text-gray-700":"font-medium text-gray-900"}`,children:N.caller_id_name||"Unknown"}),N.caller_id_num&&d.jsx("span",{className:"ml-2 text-gray-400 text-xs",children:N.caller_id_num})]})},{key:"timestamp",header:"Date",render:N=>Dj(N.timestamp)},{key:"duration",header:"Duration",render:N=>Lj(N.duration)},{key:"actions",header:"",className:"w-48",render:N=>d.jsxs("div",{className:"flex gap-2",children:[d.jsx("button",{type:"button",onClick:_=>{_.stopPropagation(),x(N)},className:"text-sm text-blue-600 hover:text-blue-800",children:c===N.id?"Stop":"Play"}),d.jsx("a",{href:r0(e.id,N.id),download:!0,onClick:_=>_.stopPropagation(),className:"text-sm text-blue-600 hover:text-blue-800",children:"Download"}),!N.read&&d.jsx("button",{type:"button",onClick:_=>{_.stopPropagation(),v(N)},className:"text-sm text-gray-500 hover:text-gray-700",children:"Mark Read"}),d.jsx("button",{type:"button",onClick:_=>{_.stopPropagation(),w(N)},className:"text-sm text-red-600 hover:text-red-800",children:"Delete"})]})}],k=o.filter(N=>!N.read).length;return d.jsxs("div",{children:[d.jsx("div",{className:"flex items-center justify-between mb-6",children:d.jsxs("div",{children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("button",{type:"button",onClick:r,className:"text-sm text-gray-500 hover:text-gray-700",children:" Back"}),d.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:e.name})]}),d.jsxs("p",{className:"mt-1 text-sm text-gray-500",children:[o.length," message",o.length!==1?"s":"",k>0&&d.jsxs("span",{className:"ml-1 text-blue-600",children:["(",k," unread)"]})]})]})}),s?d.jsx("p",{className:"text-sm text-gray-400",children:"Loading messages..."}):d.jsx(ro,{columns:S,rows:o,keyFn:N=>N.id,total:o.length,limit:o.length||1,offset:0,onPageChange:()=>{},emptyMessage:"No voicemail messages in this box."})]})}function Ij(){const[e,r]=E.useState([]),[o,a]=E.useState(0),[s,l]=E.useState(0),[c,f]=E.useState(!0),[m,p]=E.useState(null),[x,g]=E.useState(!1),[v,w]=E.useState(null),[S,k]=E.useState(""),[N,_]=E.useState(!1),[P,b]=E.useState(j());function j(){return{name:"",mailbox_number:"",pin:"",greeting_type:"default",email_notify:!1,email_address:"",email_attach_audio:!0,max_message_duration:120,max_messages:50,retention_days:90,notify_extension_id:null}}function I(H){f(!0),Ly({limit:u0,offset:H}).then(W=>{r(W.items),a(W.total),l(H)}).catch(()=>{r([]),a(0)}).finally(()=>f(!1))}E.useEffect(()=>{I(0)},[]);function D(){b(j()),p(null),g(!0),k("")}function R(H){b({name:H.name,mailbox_number:H.mailbox_number,pin:"",greeting_type:H.greeting_type,email_notify:H.email_notify,email_address:H.email_address,email_attach_audio:H.email_attach_audio,max_message_duration:H.max_message_duration,max_messages:H.max_messages,retention_days:H.retention_days,notify_extension_id:H.notify_extension_id}),p(H),g(!0),k("")}function A(){g(!1),p(null),k("")}async function K(H){H.preventDefault(),k(""),_(!0);try{m?await Xk(m.id,P):await Wk(P),A(),I(m?s:0)}catch(W){k(W instanceof lt?W.message:"unable to save voicemail box")}finally{_(!1)}}async function F(H){if(confirm(`Delete voicemail box "${H.name}"?`))try{await Yk(H.id),I(s)}catch(W){alert(W instanceof lt?W.message:"unable to delete voicemail box")}}const V=[{key:"name",header:"Name",render:H=>H.name},{key:"mailbox_number",header:"Mailbox #",render:H=>H.mailbox_number||""},{key:"greeting_type",header:"Greeting",render:H=>H.greeting_type},{key:"email_notify",header:"Email Notify",render:H=>d.jsx("span",{className:`inline-flex items-center rounded-full px-2 py-0.5 text-xs font-medium ${H.email_notify?"bg-green-50 text-green-700":"bg-gray-100 text-gray-500"}`,children:H.email_notify?"On":"Off"})},{key:"max_messages",header:"Max Msgs",render:H=>H.max_messages},{key:"retention",header:"Retention",render:H=>H.retention_days===0?"Forever":`${H.retention_days}d`},{key:"actions",header:"",className:"w-36",render:H=>d.jsxs("div",{className:"flex gap-2",children:[d.jsx("button",{type:"button",onClick:W=>{W.stopPropagation(),w(H)},className:"text-sm text-blue-600 hover:text-blue-800",children:"Messages"}),d.jsx("button",{type:"button",onClick:W=>{W.stopPropagation(),R(H)},className:"text-sm text-blue-600 hover:text-blue-800",children:"Edit"}),d.jsx("button",{type:"button",onClick:W=>{W.stopPropagation(),F(H)},className:"text-sm text-red-600 hover:text-red-800",children:"Delete"})]})}];return v?d.jsx(zj,{box:v,onBack:()=>w(null)}):x?d.jsxs("div",{children:[d.jsxs("div",{className:"flex items-center justify-between mb-6",children:[d.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:m?"Edit Voicemail Box":"New Voicemail Box"}),d.jsx("button",{type:"button",onClick:A,className:"text-sm text-gray-500 hover:text-gray-700",children:"Cancel"})]}),d.jsxs("form",{onSubmit:K,className:"max-w-lg space-y-4",children:[S&&d.jsx("div",{className:"rounded-md bg-red-50 border border-red-200 px-3 py-2",children:d.jsx("p",{className:"text-sm text-red-700",children:S})}),d.jsx(Ue,{label:"Name",id:"vm_name",required:!0,value:P.name,onChange:H=>b({...P,name:H.currentTarget.value}),placeholder:"Sales Voicemail"}),d.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[d.jsx(Ue,{label:"Mailbox Number (optional)",id:"vm_number",value:P.mailbox_number??"",onChange:H=>b({...P,mailbox_number:H.currentTarget.value}),placeholder:"901"}),d.jsx(Ue,{label:m?"PIN (leave blank to keep)":"PIN (optional)",id:"vm_pin",type:"password",value:P.pin??"",onChange:H=>b({...P,pin:H.currentTarget.value}),autoComplete:"off"})]}),d.jsxs(Jr,{label:"Greeting Type",id:"vm_greeting_type",value:P.greeting_type??"default",onChange:H=>b({...P,greeting_type:H.currentTarget.value}),children:[d.jsx("option",{value:"default",children:"Default"}),d.jsx("option",{value:"custom",children:"Custom"}),d.jsx("option",{value:"name_only",children:"Name Only"})]}),d.jsxs("div",{className:"space-y-3",children:[d.jsx(Ci,{label:"Email Notifications",checked:P.email_notify??!1,onChange:H=>b({...P,email_notify:H})}),P.email_notify&&d.jsxs(d.Fragment,{children:[d.jsx(Ue,{label:"Notification Email",id:"vm_email",type:"email",value:P.email_address??"",onChange:H=>b({...P,email_address:H.currentTarget.value}),placeholder:"user@example.com"}),d.jsx(Ci,{label:"Attach Audio to Email",checked:P.email_attach_audio??!0,onChange:H=>b({...P,email_attach_audio:H})})]})]}),d.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[d.jsx(wn,{label:"Max Duration (s)",id:"vm_max_duration",min:10,max:600,value:P.max_message_duration??120,onChange:H=>b({...P,max_message_duration:Number(H.currentTarget.value)})}),d.jsx(wn,{label:"Max Messages",id:"vm_max_messages",min:1,max:999,value:P.max_messages??50,onChange:H=>b({...P,max_messages:Number(H.currentTarget.value)})}),d.jsx(wn,{label:"Retention (days)",id:"vm_retention",min:0,value:P.retention_days??90,onChange:H=>b({...P,retention_days:Number(H.currentTarget.value)})})]}),d.jsx("p",{className:"text-xs text-gray-400",children:"Set retention to 0 for no automatic deletion."}),d.jsx("div",{className:"pt-4 border-t border-gray-100",children:d.jsx("button",{type:"submit",disabled:N,className:"rounded-md bg-blue-600 px-4 py-2 text-sm font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:N?"Saving...":m?"Update Voicemail Box":"Create Voicemail Box"})})]})]}):d.jsxs("div",{children:[d.jsxs("div",{className:"flex items-center justify-between mb-6",children:[d.jsxs("div",{children:[d.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Voicemail Boxes"}),d.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Manage voicemail boxes and message settings."})]}),d.jsx("button",{type:"button",onClick:D,className:"rounded-md bg-blue-600 px-4 py-2 text-sm font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors",children:"Add Voicemail Box"})]}),c?d.jsx("p",{className:"text-sm text-gray-400",children:"Loading..."}):d.jsx(ro,{columns:V,rows:e,keyFn:H=>H.id,total:o,limit:u0,offset:s,onPageChange:I,onRowClick:R,emptyMessage:"No voicemail boxes configured yet."})]})}const $j={ring_all:"Ring All",round_robin:"Round Robin",random:"Random",longest_idle:"Longest Idle"};function Fj(){const[e,r]=E.useState([]),[o,a]=E.useState(!0),[s,l]=E.useState(null),[c,f]=E.useState(!1),[m,p]=E.useState(""),[x,g]=E.useState(!1),[v,w]=E.useState([]),[S,k]=E.useState(N());function N(){return{name:"",strategy:"ring_all",ring_timeout:30,members:[],caller_id_mode:"pass"}}function _(){a(!0),Iy().then(F=>r(F)).catch(()=>r([])).finally(()=>a(!1))}function P(){Bd({limit:100,offset:0}).then(F=>w(F.items)).catch(()=>w([]))}E.useEffect(()=>{_(),P()},[]);function b(){k(N()),l(null),f(!0),p("")}function j(F){k({name:F.name,strategy:F.strategy,ring_timeout:F.ring_timeout,members:F.members??[],caller_id_mode:F.caller_id_mode}),l(F),f(!0),p("")}function I(){f(!1),l(null),p("")}async function D(F){F.preventDefault(),p(""),g(!0);try{s?await gj(s.id,S):await mj(S),I(),_()}catch(V){p(V instanceof lt?V.message:"unable to save ring group")}finally{g(!1)}}async function R(F){if(confirm(`Delete ring group "${F.name}"?`))try{await yj(F.id),_()}catch(V){alert(V instanceof lt?V.message:"unable to delete ring group")}}function A(F){k(V=>{const H=V.members.includes(F)?V.members.filter(W=>W!==F):[...V.members,F];return{...V,members:H}})}const K=[{key:"name",header:"Name",render:F=>F.name},{key:"strategy",header:"Strategy",render:F=>d.jsx("span",{className:"inline-flex items-center rounded-full bg-blue-50 px-2 py-0.5 text-xs font-medium text-blue-700",children:$j[F.strategy]??F.strategy})},{key:"ring_timeout",header:"Timeout",render:F=>`${F.ring_timeout}s`},{key:"members",header:"Members",render:F=>{const V=F.members?.length??0;return d.jsxs("span",{className:"text-gray-600",children:[V," extension",V!==1?"s":""]})}},{key:"actions",header:"",className:"w-24",render:F=>d.jsxs("div",{className:"flex gap-2",children:[d.jsx("button",{type:"button",onClick:V=>{V.stopPropagation(),j(F)},className:"text-sm text-blue-600 hover:text-blue-800",children:"Edit"}),d.jsx("button",{type:"button",onClick:V=>{V.stopPropagation(),R(F)},className:"text-sm text-red-600 hover:text-red-800",children:"Delete"})]})}];return c?d.jsxs("div",{children:[d.jsxs("div",{className:"flex items-center justify-between mb-6",children:[d.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:s?"Edit Ring Group":"New Ring Group"}),d.jsx("button",{type:"button",onClick:I,className:"text-sm text-gray-500 hover:text-gray-700",children:"Cancel"})]}),d.jsxs("form",{onSubmit:D,className:"max-w-lg space-y-4",children:[m&&d.jsx("div",{className:"rounded-md bg-red-50 border border-red-200 px-3 py-2",children:d.jsx("p",{className:"text-sm text-red-700",children:m})}),d.jsx(Ue,{label:"Group Name",id:"rg_name",required:!0,value:S.name,onChange:F=>k({...S,name:F.currentTarget.value}),placeholder:"Sales Team"}),d.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[d.jsxs(Jr,{label:"Ring Strategy",id:"rg_strategy",value:S.strategy??"ring_all",onChange:F=>k({...S,strategy:F.currentTarget.value}),children:[d.jsx("option",{value:"ring_all",children:"Ring All"}),d.jsx("option",{value:"round_robin",children:"Round Robin"}),d.jsx("option",{value:"random",children:"Random"}),d.jsx("option",{value:"longest_idle",children:"Longest Idle"})]}),d.jsx(wn,{label:"Ring Timeout (s)",id:"rg_timeout",min:5,max:300,value:S.ring_timeout??30,onChange:F=>k({...S,ring_timeout:Number(F.currentTarget.value)})})]}),d.jsxs(Jr,{label:"Caller ID Mode",id:"rg_caller_id",value:S.caller_id_mode??"pass",onChange:F=>k({...S,caller_id_mode:F.currentTarget.value}),children:[d.jsx("option",{value:"pass",children:"Pass Through"}),d.jsx("option",{value:"prepend",children:"Prepend Group Name"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Members"}),v.length===0?d.jsx("p",{className:"text-sm text-gray-400",children:"No extensions available."}):d.jsx("div",{className:"border border-gray-200 rounded-md max-h-48 overflow-y-auto",children:v.map(F=>d.jsxs("label",{className:"flex items-center gap-3 px-3 py-2 hover:bg-gray-50 cursor-pointer border-b border-gray-100 last:border-b-0",children:[d.jsx("input",{type:"checkbox",checked:S.members.includes(F.id),onChange:()=>A(F.id),className:"h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),d.jsxs("span",{className:"text-sm text-gray-900",children:[F.extension,"  ",F.name]})]},F.id))}),S.members.length>0&&d.jsxs("p",{className:"mt-1 text-xs text-gray-500",children:[S.members.length," member",S.members.length!==1?"s":""," selected"]})]}),d.jsx("div",{className:"pt-4 border-t border-gray-100",children:d.jsx("button",{type:"submit",disabled:x,className:"rounded-md bg-blue-600 px-4 py-2 text-sm font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:x?"Saving...":s?"Update Ring Group":"Create Ring Group"})})]})]}):d.jsxs("div",{children:[d.jsxs("div",{className:"flex items-center justify-between mb-6",children:[d.jsxs("div",{children:[d.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Ring Groups"}),d.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Manage ring groups for simultaneous or sequential ringing."})]}),d.jsx("button",{type:"button",onClick:b,className:"rounded-md bg-blue-600 px-4 py-2 text-sm font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors",children:"Add Ring Group"})]}),o?d.jsx("p",{className:"text-sm text-gray-400",children:"Loading..."}):d.jsx(ro,{columns:K,rows:e,keyFn:F=>F.id,total:e.length,limit:e.length||1,offset:0,onPageChange:()=>{},onRowClick:j,emptyMessage:"No ring groups configured yet."})]})}function Aj(){return d.jsxs("div",{children:[d.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"IVR Menus"}),d.jsx("p",{className:"mt-2 text-gray-600",children:"IVR menu management with audio upload and TTS preview."})]})}function Oj(){return d.jsxs("div",{children:[d.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Time Switches"}),d.jsx("p",{className:"mt-2 text-gray-600",children:"Time-based routing rules and visual schedule editor."})]})}function Hj(){return d.jsxs("div",{children:[d.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Conference Bridges"}),d.jsx("p",{className:"mt-2 text-gray-600",children:"Conference bridge management and active participants."})]})}function Bj(){const[e,r]=E.useState([]),[o,a]=E.useState(!0),[s,l]=E.useState(!1),[c,f]=E.useState(""),[m,p]=E.useState(null),x=E.useRef(null),g=E.useRef(null);function v(){a(!0),nj().then(j=>r(j)).catch(()=>r([])).finally(()=>a(!1))}E.useEffect(()=>{v()},[]);async function w(j){if(!(!j||j.length===0)){f(""),l(!0);try{for(let I=0;I<j.length;I++)await rj(j[I]);v()}catch(I){f(I instanceof Error?I.message:"upload failed")}finally{l(!1),g.current&&(g.current.value="")}}}async function S(j){if(confirm(`Delete prompt "${j.name}"?`))try{await oj(j.id),N(),v()}catch(I){alert(I instanceof Error?I.message:"unable to delete prompt")}}function k(j){if(m===j.id){N();return}N();const I=new Audio(ij(j.id));I.addEventListener("ended",()=>p(null)),I.addEventListener("error",()=>p(null)),I.play(),x.current=I,p(j.id)}function N(){x.current&&(x.current.pause(),x.current=null),p(null)}function _(j){return j<1024?`${j} B`:j<1024*1024?`${(j/1024).toFixed(1)} KB`:`${(j/(1024*1024)).toFixed(1)} MB`}function P(j){return new Date(j).toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}const b=[{key:"name",header:"Name",render:j=>j.name},{key:"filename",header:"Filename",render:j=>j.filename},{key:"format",header:"Format",render:j=>d.jsx("span",{className:"inline-flex items-center rounded-full px-2 py-0.5 text-xs font-medium bg-gray-100 text-gray-700",children:j.format.toUpperCase()})},{key:"file_size",header:"Size",render:j=>_(j.file_size)},{key:"created_at",header:"Uploaded",render:j=>P(j.created_at)},{key:"actions",header:"",className:"w-28",render:j=>d.jsxs("div",{className:"flex gap-2",children:[d.jsx("button",{type:"button",onClick:I=>{I.stopPropagation(),k(j)},className:"text-sm text-blue-600 hover:text-blue-800",children:m===j.id?"Stop":"Play"}),d.jsx("button",{type:"button",onClick:I=>{I.stopPropagation(),S(j)},className:"text-sm text-red-600 hover:text-red-800",children:"Delete"})]})}];return d.jsxs("div",{children:[d.jsxs("div",{className:"flex items-center justify-between mb-6",children:[d.jsxs("div",{children:[d.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Audio Prompts"}),d.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Upload and manage audio prompts for IVR menus and call flows."})]}),d.jsxs("div",{children:[d.jsx("input",{ref:g,type:"file",accept:".wav,.alaw,.al,.ulaw,.ul",multiple:!0,className:"hidden",onChange:j=>w(j.target.files)}),d.jsx("button",{type:"button",disabled:s,onClick:()=>g.current?.click(),className:"rounded-md bg-blue-600 px-4 py-2 text-sm font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:s?"Uploading...":"Upload Prompt"})]})]}),c&&d.jsx("div",{className:"rounded-md bg-red-50 border border-red-200 px-3 py-2 mb-4",children:d.jsx("p",{className:"text-sm text-red-700",children:c})}),o?d.jsx("p",{className:"text-sm text-gray-400",children:"Loading..."}):d.jsx(ro,{columns:b,rows:e,keyFn:j=>j.id,total:e.length,limit:e.length||1,offset:0,onPageChange:()=>{},emptyMessage:"No audio prompts uploaded yet."})]})}function Vj(){return d.jsxs("div",{children:[d.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Recordings"}),d.jsx("p",{className:"mt-2 text-gray-600",children:"Call recording browser with playback and storage usage."})]})}const c0=20;function Uj(){const[e,r]=E.useState([]),[o,a]=E.useState(0),[s,l]=E.useState(0),[c,f]=E.useState(!0),[m,p]=E.useState(""),[x,g]=E.useState(""),[v,w]=E.useState(""),[S,k]=E.useState("");function N(D){f(!0),ej({limit:c0,offset:D,search:m||void 0,direction:x||void 0,start_date:v||void 0,end_date:S||void 0}).then(R=>{r(R.items),a(R.total),l(D)}).catch(()=>{r([]),a(0)}).finally(()=>f(!1))}E.useEffect(()=>{N(0)},[]);function _(){N(0)}function P(){const D=tj({search:m||void 0,direction:x||void 0,start_date:v||void 0,end_date:S||void 0});window.open(D,"_blank")}function b(D){if(D==null)return"";const R=Math.floor(D/60),A=D%60;return`${R}:${A.toString().padStart(2,"0")}`}function j(D){return new Date(D).toLocaleString()}const I=[{key:"start_time",header:"Time",render:D=>d.jsx("span",{className:"whitespace-nowrap",children:j(D.start_time)})},{key:"direction",header:"Direction",render:D=>d.jsx(Wj,{direction:D.direction})},{key:"caller",header:"From",render:D=>D.caller_id_name?d.jsxs("span",{children:[d.jsx("span",{className:"font-medium",children:D.caller_id_name})," ",d.jsx("span",{className:"text-gray-500",children:D.caller_id_num})]}):D.caller_id_num||""},{key:"callee",header:"To",render:D=>D.callee||""},{key:"duration",header:"Duration",render:D=>b(D.duration)},{key:"disposition",header:"Status",render:D=>d.jsx(Xj,{disposition:D.disposition})},{key:"hangup_cause",header:"Cause",render:D=>d.jsx("span",{className:"text-xs text-gray-500",children:D.hangup_cause||""})}];return d.jsxs("div",{children:[d.jsxs("div",{className:"flex items-center justify-between mb-6",children:[d.jsxs("div",{children:[d.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Call History"}),d.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Searchable and filterable call detail records."})]}),d.jsx("button",{type:"button",onClick:P,className:"rounded-md border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50 transition-colors",children:"Export CSV"})]}),d.jsxs("div",{className:"flex flex-wrap items-end gap-3 mb-4",children:[d.jsxs("div",{children:[d.jsx("label",{htmlFor:"cdr_search",className:"block text-xs font-medium text-gray-500 mb-1",children:"Search"}),d.jsx("input",{id:"cdr_search",type:"text",value:m,onChange:D=>p(D.currentTarget.value),onKeyDown:D=>D.key==="Enter"&&_(),placeholder:"Name, number, or callee",className:"block w-56 rounded-md border border-gray-300 px-3 py-1.5 text-sm focus:border-blue-500 focus:ring-1 focus:ring-blue-500"})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"cdr_direction",className:"block text-xs font-medium text-gray-500 mb-1",children:"Direction"}),d.jsxs("select",{id:"cdr_direction",value:x,onChange:D=>g(D.currentTarget.value),className:"block w-32 rounded-md border border-gray-300 px-3 py-1.5 text-sm focus:border-blue-500 focus:ring-1 focus:ring-blue-500",children:[d.jsx("option",{value:"",children:"All"}),d.jsx("option",{value:"inbound",children:"Inbound"}),d.jsx("option",{value:"outbound",children:"Outbound"}),d.jsx("option",{value:"internal",children:"Internal"})]})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"cdr_start",className:"block text-xs font-medium text-gray-500 mb-1",children:"From"}),d.jsx("input",{id:"cdr_start",type:"date",value:v,onChange:D=>w(D.currentTarget.value),className:"block rounded-md border border-gray-300 px-3 py-1.5 text-sm focus:border-blue-500 focus:ring-1 focus:ring-blue-500"})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"cdr_end",className:"block text-xs font-medium text-gray-500 mb-1",children:"To"}),d.jsx("input",{id:"cdr_end",type:"date",value:S,onChange:D=>k(D.currentTarget.value),className:"block rounded-md border border-gray-300 px-3 py-1.5 text-sm focus:border-blue-500 focus:ring-1 focus:ring-blue-500"})]}),d.jsx("button",{type:"button",onClick:_,className:"rounded-md bg-blue-600 px-4 py-1.5 text-sm font-medium text-white hover:bg-blue-700 transition-colors",children:"Filter"}),(m||x||v||S)&&d.jsx("button",{type:"button",onClick:()=>{p(""),g(""),w(""),k(""),setTimeout(()=>N(0),0)},className:"text-sm text-gray-500 hover:text-gray-700",children:"Clear"})]}),c?d.jsx("p",{className:"text-sm text-gray-400",children:"Loading..."}):d.jsx(ro,{columns:I,rows:e,keyFn:D=>D.id,total:o,limit:c0,offset:s,onPageChange:N,emptyMessage:"No call records found."})]})}function Wj({direction:e}){const r={inbound:"bg-blue-50 text-blue-700",outbound:"bg-emerald-50 text-emerald-700",internal:"bg-gray-100 text-gray-700"},o={inbound:"In",outbound:"Out",internal:"Int"};return d.jsx("span",{className:`inline-flex items-center rounded-full px-2 py-0.5 text-xs font-medium ${r[e]??"bg-gray-100 text-gray-700"}`,children:o[e]??e})}function Xj({disposition:e}){const r={answered:"bg-green-50 text-green-700",no_answer:"bg-yellow-50 text-yellow-700",busy:"bg-orange-50 text-orange-700",cancelled:"bg-gray-100 text-gray-500",failed:"bg-red-50 text-red-700",in_progress:"bg-blue-50 text-blue-700"},o={answered:"Answered",no_answer:"No Answer",busy:"Busy",cancelled:"Cancelled",failed:"Failed",in_progress:"In Progress"};return d.jsx("span",{className:`inline-flex items-center rounded-full px-2 py-0.5 text-xs font-medium ${r[e]??"bg-gray-100 text-gray-700"}`,children:o[e]??e})}function Yj(){const[e,r]=E.useState(!0),[o,a]=E.useState(!1),[s,l]=E.useState(""),[c,f]=E.useState(""),[m,p]=E.useState(!1),[x,g]=E.useState({host:"",port:"587",from:"",username:"",password:"",tls:"starttls"});E.useEffect(()=>{r(!0),aj().then(w=>{g({host:w.smtp.host,port:w.smtp.port||"587",from:w.smtp.from,username:w.smtp.username,password:"",tls:w.smtp.tls||"starttls"}),p(w.smtp.has_password)}).catch(()=>{l("Failed to load settings")}).finally(()=>r(!1))},[]);async function v(w){w.preventDefault(),l(""),f(""),a(!0);try{const S=await sj({smtp:x});p(S.smtp.has_password),g(k=>({...k,password:""})),f("SMTP settings saved")}catch(S){l(S instanceof lt?S.message:"failed to save settings")}finally{a(!1)}}return e?d.jsxs("div",{children:[d.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Settings"}),d.jsx("p",{className:"mt-4 text-sm text-gray-400",children:"Loading..."})]}):d.jsxs("div",{children:[d.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Settings"}),d.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"System configuration."}),d.jsxs("div",{className:"mt-8 max-w-lg",children:[d.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"SMTP / Email"}),d.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Configure the outgoing mail server used for voicemail email notifications."}),d.jsxs("form",{onSubmit:v,className:"mt-4 space-y-4",children:[s&&d.jsx("div",{className:"rounded-md bg-red-50 border border-red-200 px-3 py-2",children:d.jsx("p",{className:"text-sm text-red-700",children:s})}),c&&d.jsx("div",{className:"rounded-md bg-green-50 border border-green-200 px-3 py-2",children:d.jsx("p",{className:"text-sm text-green-700",children:c})}),d.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[d.jsx(Ue,{label:"SMTP Host",id:"smtp_host",value:x.host,onChange:w=>g({...x,host:w.currentTarget.value}),placeholder:"smtp.example.com"}),d.jsx(Ue,{label:"Port",id:"smtp_port",value:x.port,onChange:w=>g({...x,port:w.currentTarget.value}),placeholder:"587"})]}),d.jsx(Ue,{label:"From Address",id:"smtp_from",type:"email",value:x.from,onChange:w=>g({...x,from:w.currentTarget.value}),placeholder:"pbx@example.com"}),d.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[d.jsx(Ue,{label:"Username",id:"smtp_username",value:x.username,onChange:w=>g({...x,username:w.currentTarget.value}),placeholder:"user@example.com",autoComplete:"off"}),d.jsx(Ue,{label:m?"Password (leave blank to keep)":"Password",id:"smtp_password",type:"password",value:x.password,onChange:w=>g({...x,password:w.currentTarget.value}),autoComplete:"off"})]}),d.jsxs(Jr,{label:"Encryption",id:"smtp_tls",value:x.tls,onChange:w=>g({...x,tls:w.currentTarget.value}),children:[d.jsx("option",{value:"starttls",children:"STARTTLS (port 587)"}),d.jsx("option",{value:"tls",children:"Implicit TLS (port 465)"}),d.jsx("option",{value:"none",children:"None (port 25)"})]}),d.jsx("div",{className:"pt-4 border-t border-gray-100",children:d.jsx("button",{type:"submit",disabled:o,className:"rounded-md bg-blue-600 px-4 py-2 text-sm font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:o?"Saving...":"Save SMTP Settings"})})]})]})]})}function Gj(){return d.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:d.jsxs("div",{className:"text-center",children:[d.jsx("h1",{className:"text-4xl font-bold text-gray-900",children:"404"}),d.jsx("p",{className:"mt-2 text-gray-600",children:"Page not found."}),d.jsx(_d,{to:"/",className:"mt-4 inline-block text-blue-600 hover:text-blue-800",children:"Go to Dashboard"})]})})}const Kj=Fw([{path:"/login",element:d.jsx(vb,{})},{path:"/setup",element:d.jsx(bb,{})},{element:d.jsx(Qw,{}),children:[{path:"/",element:d.jsx(Sb,{})},{path:"/call-flows",element:d.jsx(Pj,{})},{path:"/trunks",element:d.jsx(Rj,{})},{path:"/inbound-numbers",element:d.jsx(Mj,{})},{path:"/extensions",element:d.jsx(Tj,{})},{path:"/voicemail",element:d.jsx(Ij,{})},{path:"/ring-groups",element:d.jsx(Fj,{})},{path:"/ivr-menus",element:d.jsx(Aj,{})},{path:"/time-switches",element:d.jsx(Oj,{})},{path:"/conferences",element:d.jsx(Hj,{})},{path:"/prompts",element:d.jsx(Bj,{})},{path:"/recordings",element:d.jsx(Vj,{})},{path:"/call-history",element:d.jsx(Uj,{})},{path:"/settings",element:d.jsx(Yj,{})}]},{path:"*",element:d.jsx(Gj,{})}]);function Zj(){return d.jsx(Kw,{router:Kj})}Nv.createRoot(document.getElementById("root")).render(d.jsx(E.StrictMode,{children:d.jsx(Zj,{})}));
